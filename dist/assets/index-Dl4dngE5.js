import{r as _,g as Tf,a as Yd,_ as Xd,b as Zd,R as Kr,T as Sf,c as vr,d as dr,u as hr,e as Qd,f as jd,h as Jd,i as nu,j as ne,s as xt,k as Ot,l as pr,m as ur,n as or,P as eh,B as Rf,o as th,p as rh,q as Mn,t as Xt,v as Vu,w as ah,A as pi,x as zt,C as Pf,y as kf,z as nh,D as ih,E as oh,F as sh,G as uh}from"./PdfUploader-jl0inDlS.js";/**
 * react-router v7.7.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var qu="popstate";function lh(t={}){function e(n,i){let{pathname:o="/",search:s="",hash:u=""}=ta(n.location.hash.substring(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),Is("",{pathname:o,search:s,hash:u},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function r(n,i){let o=n.document.querySelector("base"),s="";if(o&&o.getAttribute("href")){let u=n.location.href,l=u.indexOf("#");s=l===-1?u:u.slice(0,l)}return s+"#"+(typeof i=="string"?i:an(i))}function a(n,i){$t(n.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(i)})`)}return fh(e,r,a,t)}function He(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function $t(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function ch(){return Math.random().toString(36).substring(2,10)}function _u(t,e){return{usr:t.state,key:t.key,idx:e}}function Is(t,e,r=null,a){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?ta(e):e,state:r,key:e&&e.key||a||ch()}}function an({pathname:t="/",search:e="",hash:r=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function ta(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substring(r),t=t.substring(0,r));let a=t.indexOf("?");a>=0&&(e.search=t.substring(a),t=t.substring(0,a)),t&&(e.pathname=t)}return e}function fh(t,e,r,a={}){let{window:n=document.defaultView,v5Compat:i=!1}=a,o=n.history,s="POP",u=null,l=c();l==null&&(l=0,o.replaceState({...o.state,idx:l},""));function c(){return(o.state||{idx:null}).idx}function f(){s="POP";let p=c(),g=p==null?null:p-l;l=p,u&&u({action:s,location:m.location,delta:g})}function v(p,g){s="PUSH";let y=Is(m.location,p,g);r&&r(y,p),l=c()+1;let b=_u(y,l),w=m.createHref(y);try{o.pushState(b,"",w)}catch(E){if(E instanceof DOMException&&E.name==="DataCloneError")throw E;n.location.assign(w)}i&&u&&u({action:s,location:m.location,delta:1})}function h(p,g){s="REPLACE";let y=Is(m.location,p,g);r&&r(y,p),l=c();let b=_u(y,l),w=m.createHref(y);o.replaceState(b,"",w),i&&u&&u({action:s,location:m.location,delta:0})}function d(p){return vh(p)}let m={get action(){return s},get location(){return t(n,o)},listen(p){if(u)throw new Error("A history only accepts one active listener");return n.addEventListener(qu,f),u=p,()=>{n.removeEventListener(qu,f),u=null}},createHref(p){return e(n,p)},createURL:d,encodeLocation(p){let g=d(p);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:v,replace:h,go(p){return o.go(p)}};return m}function vh(t,e=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),He(r,"No window.location.(origin|href) available to create URL");let a=typeof t=="string"?t:an(t);return a=a.replace(/ $/,"%20"),!e&&a.startsWith("//")&&(a=r+a),new URL(a,r)}function Df(t,e,r="/"){return dh(t,e,r,!1)}function dh(t,e,r,a){let n=typeof e=="string"?ta(e):e,i=lr(n.pathname||"/",r);if(i==null)return null;let o=Bf(t);hh(o);let s=null;for(let u=0;s==null&&u<o.length;++u){let l=Sh(i);s=Ch(o[u],l,a)}return s}function Bf(t,e=[],r=[],a=""){let n=(i,o,s)=>{let u={relativePath:s===void 0?i.path||"":s,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};u.relativePath.startsWith("/")&&(He(u.relativePath.startsWith(a),`Absolute route path "${u.relativePath}" nested under path "${a}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),u.relativePath=u.relativePath.slice(a.length));let l=sr([a,u.relativePath]),c=r.concat(u);i.children&&i.children.length>0&&(He(i.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${l}".`),Bf(i.children,e,c,l)),!(i.path==null&&!i.index)&&e.push({path:l,score:xh(l,i.index),routesMeta:c})};return t.forEach((i,o)=>{var s;if(i.path===""||!((s=i.path)!=null&&s.includes("?")))n(i,o);else for(let u of Af(i.path))n(i,o,u)}),e}function Af(t){let e=t.split("/");if(e.length===0)return[];let[r,...a]=e,n=r.endsWith("?"),i=r.replace(/\?$/,"");if(a.length===0)return n?[i,""]:[i];let o=Af(a.join("/")),s=[];return s.push(...o.map(u=>u===""?i:[i,u].join("/"))),n&&s.push(...o),s.map(u=>t.startsWith("/")&&u===""?"/":u)}function hh(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:Eh(e.routesMeta.map(a=>a.childrenIndex),r.routesMeta.map(a=>a.childrenIndex)))}var ph=/^:[\w-]+$/,gh=3,mh=2,yh=1,bh=10,wh=-2,$u=t=>t==="*";function xh(t,e){let r=t.split("/"),a=r.length;return r.some($u)&&(a+=wh),e&&(a+=mh),r.filter(n=>!$u(n)).reduce((n,i)=>n+(ph.test(i)?gh:i===""?yh:bh),a)}function Eh(t,e){return t.length===e.length&&t.slice(0,-1).every((a,n)=>a===e[n])?t[t.length-1]-e[e.length-1]:0}function Ch(t,e,r=!1){let{routesMeta:a}=t,n={},i="/",o=[];for(let s=0;s<a.length;++s){let u=a[s],l=s===a.length-1,c=i==="/"?e:e.slice(i.length)||"/",f=gi({path:u.relativePath,caseSensitive:u.caseSensitive,end:l},c),v=u.route;if(!f&&l&&r&&!a[a.length-1].route.index&&(f=gi({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},c)),!f)return null;Object.assign(n,f.params),o.push({params:n,pathname:sr([i,f.pathname]),pathnameBase:Dh(sr([i,f.pathnameBase])),route:v}),f.pathnameBase!=="/"&&(i=sr([i,f.pathnameBase]))}return o}function gi(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,a]=Th(t.path,t.caseSensitive,t.end),n=e.match(r);if(!n)return null;let i=n[0],o=i.replace(/(.)\/+$/,"$1"),s=n.slice(1);return{params:a.reduce((l,{paramName:c,isOptional:f},v)=>{if(c==="*"){let d=s[v]||"";o=i.slice(0,i.length-d.length).replace(/(.)\/+$/,"$1")}const h=s[v];return f&&!h?l[c]=void 0:l[c]=(h||"").replace(/%2F/g,"/"),l},{}),pathname:i,pathnameBase:o,pattern:t}}function Th(t,e=!1,r=!0){$t(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let a=[],n="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,s,u)=>(a.push({paramName:s,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(a.push({paramName:"*"}),n+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?n+="\\/*$":t!==""&&t!=="/"&&(n+="(?:(?=\\/|$))"),[new RegExp(n,e?void 0:"i"),a]}function Sh(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return $t(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function lr(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,a=t.charAt(r);return a&&a!=="/"?null:t.slice(r)||"/"}function Rh(t,e="/"){let{pathname:r,search:a="",hash:n=""}=typeof t=="string"?ta(t):t;return{pathname:r?r.startsWith("/")?r:Ph(r,e):e,search:Bh(a),hash:Ah(n)}}function Ph(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(n=>{n===".."?r.length>1&&r.pop():n!=="."&&r.push(n)}),r.length>1?r.join("/"):"/"}function Ji(t,e,r,a){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(a)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function kh(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function Lf(t){let e=kh(t);return e.map((r,a)=>a===e.length-1?r.pathname:r.pathnameBase)}function Mf(t,e,r,a=!1){let n;typeof t=="string"?n=ta(t):(n={...t},He(!n.pathname||!n.pathname.includes("?"),Ji("?","pathname","search",n)),He(!n.pathname||!n.pathname.includes("#"),Ji("#","pathname","hash",n)),He(!n.search||!n.search.includes("#"),Ji("#","search","hash",n)));let i=t===""||n.pathname==="",o=i?"/":n.pathname,s;if(o==null)s=r;else{let f=e.length-1;if(!a&&o.startsWith("..")){let v=o.split("/");for(;v[0]==="..";)v.shift(),f-=1;n.pathname=v.join("/")}s=f>=0?e[f]:"/"}let u=Rh(n,s),l=o&&o!=="/"&&o.endsWith("/"),c=(i||o===".")&&r.endsWith("/");return!u.pathname.endsWith("/")&&(l||c)&&(u.pathname+="/"),u}var sr=t=>t.join("/").replace(/\/\/+/g,"/"),Dh=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Bh=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Ah=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Lh(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var If=["POST","PUT","PATCH","DELETE"];new Set(If);var Mh=["GET",...If];new Set(Mh);var Aa=_.createContext(null);Aa.displayName="DataRouter";var Ai=_.createContext(null);Ai.displayName="DataRouterState";_.createContext(!1);var Of=_.createContext({isTransitioning:!1});Of.displayName="ViewTransition";var Ih=_.createContext(new Map);Ih.displayName="Fetchers";var Oh=_.createContext(null);Oh.displayName="Await";var jt=_.createContext(null);jt.displayName="Navigation";var pn=_.createContext(null);pn.displayName="Location";var Jt=_.createContext({outlet:null,matches:[],isDataRoute:!1});Jt.displayName="Route";var iu=_.createContext(null);iu.displayName="RouteError";function Nh(t,{relative:e}={}){He(gn(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:a}=_.useContext(jt),{hash:n,pathname:i,search:o}=mn(t,{relative:e}),s=i;return r!=="/"&&(s=i==="/"?r:sr([r,i])),a.createHref({pathname:s,search:o,hash:n})}function gn(){return _.useContext(pn)!=null}function ra(){return He(gn(),"useLocation() may be used only in the context of a <Router> component."),_.useContext(pn).location}var Nf="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Ff(t){_.useContext(jt).static||_.useLayoutEffect(t)}function zf(){let{isDataRoute:t}=_.useContext(Jt);return t?Zh():Fh()}function Fh(){He(gn(),"useNavigate() may be used only in the context of a <Router> component.");let t=_.useContext(Aa),{basename:e,navigator:r}=_.useContext(jt),{matches:a}=_.useContext(Jt),{pathname:n}=ra(),i=JSON.stringify(Lf(a)),o=_.useRef(!1);return Ff(()=>{o.current=!0}),_.useCallback((u,l={})=>{if($t(o.current,Nf),!o.current)return;if(typeof u=="number"){r.go(u);return}let c=Mf(u,JSON.parse(i),n,l.relative==="path");t==null&&e!=="/"&&(c.pathname=c.pathname==="/"?e:sr([e,c.pathname])),(l.replace?r.replace:r.push)(c,l.state,l)},[e,r,i,n,t])}_.createContext(null);function zh(){let{matches:t}=_.useContext(Jt),e=t[t.length-1];return e?e.params:{}}function mn(t,{relative:e}={}){let{matches:r}=_.useContext(Jt),{pathname:a}=ra(),n=JSON.stringify(Lf(r));return _.useMemo(()=>Mf(t,JSON.parse(n),a,e==="path"),[t,n,a,e])}function Vh(t,e){return Vf(t,e)}function Vf(t,e,r,a){var g;He(gn(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:n}=_.useContext(jt),{matches:i}=_.useContext(Jt),o=i[i.length-1],s=o?o.params:{},u=o?o.pathname:"/",l=o?o.pathnameBase:"/",c=o&&o.route;{let y=c&&c.path||"";qf(u,!c||y.endsWith("*")||y.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${y}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${y}"> to <Route path="${y==="/"?"*":`${y}/*`}">.`)}let f=ra(),v;if(e){let y=typeof e=="string"?ta(e):e;He(l==="/"||((g=y.pathname)==null?void 0:g.startsWith(l)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${l}" but pathname "${y.pathname}" was given in the \`location\` prop.`),v=y}else v=f;let h=v.pathname||"/",d=h;if(l!=="/"){let y=l.replace(/^\//,"").split("/");d="/"+h.replace(/^\//,"").split("/").slice(y.length).join("/")}let m=Df(t,{pathname:d});$t(c||m!=null,`No routes matched location "${v.pathname}${v.search}${v.hash}" `),$t(m==null||m[m.length-1].route.element!==void 0||m[m.length-1].route.Component!==void 0||m[m.length-1].route.lazy!==void 0,`Matched leaf route at location "${v.pathname}${v.search}${v.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let p=Gh(m&&m.map(y=>Object.assign({},y,{params:Object.assign({},s,y.params),pathname:sr([l,n.encodeLocation?n.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?l:sr([l,n.encodeLocation?n.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),i,r,a);return e&&p?_.createElement(pn.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...v},navigationType:"POP"}},p):p}function qh(){let t=Xh(),e=Lh(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,a="rgba(200,200,200, 0.5)",n={padding:"0.5rem",backgroundColor:a},i={padding:"2px 4px",backgroundColor:a},o=null;return console.error("Error handled by React Router default ErrorBoundary:",t),o=_.createElement(_.Fragment,null,_.createElement("p",null,"💿 Hey developer 👋"),_.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",_.createElement("code",{style:i},"ErrorBoundary")," or"," ",_.createElement("code",{style:i},"errorElement")," prop on your route.")),_.createElement(_.Fragment,null,_.createElement("h2",null,"Unexpected Application Error!"),_.createElement("h3",{style:{fontStyle:"italic"}},e),r?_.createElement("pre",{style:n},r):null,o)}var _h=_.createElement(qh,null),$h=class extends _.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?_.createElement(Jt.Provider,{value:this.props.routeContext},_.createElement(iu.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Wh({routeContext:t,match:e,children:r}){let a=_.useContext(Aa);return a&&a.static&&a.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=e.route.id),_.createElement(Jt.Provider,{value:t},r)}function Gh(t,e=[],r=null,a=null){if(t==null){if(!r)return null;if(r.errors)t=r.matches;else if(e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let n=t,i=r==null?void 0:r.errors;if(i!=null){let u=n.findIndex(l=>l.route.id&&(i==null?void 0:i[l.route.id])!==void 0);He(u>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(i).join(",")}`),n=n.slice(0,Math.min(n.length,u+1))}let o=!1,s=-1;if(r)for(let u=0;u<n.length;u++){let l=n[u];if((l.route.HydrateFallback||l.route.hydrateFallbackElement)&&(s=u),l.route.id){let{loaderData:c,errors:f}=r,v=l.route.loader&&!c.hasOwnProperty(l.route.id)&&(!f||f[l.route.id]===void 0);if(l.route.lazy||v){o=!0,s>=0?n=n.slice(0,s+1):n=[n[0]];break}}}return n.reduceRight((u,l,c)=>{let f,v=!1,h=null,d=null;r&&(f=i&&l.route.id?i[l.route.id]:void 0,h=l.route.errorElement||_h,o&&(s<0&&c===0?(qf("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),v=!0,d=null):s===c&&(v=!0,d=l.route.hydrateFallbackElement||null)));let m=e.concat(n.slice(0,c+1)),p=()=>{let g;return f?g=h:v?g=d:l.route.Component?g=_.createElement(l.route.Component,null):l.route.element?g=l.route.element:g=u,_.createElement(Wh,{match:l,routeContext:{outlet:u,matches:m,isDataRoute:r!=null},children:g})};return r&&(l.route.ErrorBoundary||l.route.errorElement||c===0)?_.createElement($h,{location:r.location,revalidation:r.revalidation,component:h,error:f,children:p(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):p()},null)}function ou(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Uh(t){let e=_.useContext(Aa);return He(e,ou(t)),e}function Hh(t){let e=_.useContext(Ai);return He(e,ou(t)),e}function Kh(t){let e=_.useContext(Jt);return He(e,ou(t)),e}function su(t){let e=Kh(t),r=e.matches[e.matches.length-1];return He(r.route.id,`${t} can only be used on routes that contain a unique "id"`),r.route.id}function Yh(){return su("useRouteId")}function Xh(){var a;let t=_.useContext(iu),e=Hh("useRouteError"),r=su("useRouteError");return t!==void 0?t:(a=e.errors)==null?void 0:a[r]}function Zh(){let{router:t}=Uh("useNavigate"),e=su("useNavigate"),r=_.useRef(!1);return Ff(()=>{r.current=!0}),_.useCallback(async(n,i={})=>{$t(r.current,Nf),r.current&&(typeof n=="number"?t.navigate(n):await t.navigate(n,{fromRouteId:e,...i}))},[t,e])}var Wu={};function qf(t,e,r){!e&&!Wu[t]&&(Wu[t]=!0,$t(!1,r))}_.memo(Qh);function Qh({routes:t,future:e,state:r}){return Vf(t,void 0,r,e)}function ti(t){He(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function jh({basename:t="/",children:e=null,location:r,navigationType:a="POP",navigator:n,static:i=!1}){He(!gn(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=t.replace(/^\/*/,"/"),s=_.useMemo(()=>({basename:o,navigator:n,static:i,future:{}}),[o,n,i]);typeof r=="string"&&(r=ta(r));let{pathname:u="/",search:l="",hash:c="",state:f=null,key:v="default"}=r,h=_.useMemo(()=>{let d=lr(u,o);return d==null?null:{location:{pathname:d,search:l,hash:c,state:f,key:v},navigationType:a}},[o,u,l,c,f,v,a]);return $t(h!=null,`<Router basename="${o}"> is not able to match the URL "${u}${l}${c}" because it does not start with the basename, so the <Router> won't render anything.`),h==null?null:_.createElement(jt.Provider,{value:s},_.createElement(pn.Provider,{children:e,value:h}))}function Jh({children:t,location:e}){return Vh(Os(t),e)}function Os(t,e=[]){let r=[];return _.Children.forEach(t,(a,n)=>{if(!_.isValidElement(a))return;let i=[...e,n];if(a.type===_.Fragment){r.push.apply(r,Os(a.props.children,i));return}He(a.type===ti,`[${typeof a.type=="string"?a.type:a.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),He(!a.props.index||!a.props.children,"An index route cannot have child routes.");let o={id:a.props.id||i.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,loader:a.props.loader,action:a.props.action,hydrateFallbackElement:a.props.hydrateFallbackElement,HydrateFallback:a.props.HydrateFallback,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.hasErrorBoundary===!0||a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(o.children=Os(a.props.children,i)),r.push(o)}),r}var ri="get",ai="application/x-www-form-urlencoded";function Li(t){return t!=null&&typeof t.tagName=="string"}function ep(t){return Li(t)&&t.tagName.toLowerCase()==="button"}function tp(t){return Li(t)&&t.tagName.toLowerCase()==="form"}function rp(t){return Li(t)&&t.tagName.toLowerCase()==="input"}function ap(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function np(t,e){return t.button===0&&(!e||e==="_self")&&!ap(t)}var In=null;function ip(){if(In===null)try{new FormData(document.createElement("form"),0),In=!1}catch{In=!0}return In}var op=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function eo(t){return t!=null&&!op.has(t)?($t(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${ai}"`),null):t}function sp(t,e){let r,a,n,i,o;if(tp(t)){let s=t.getAttribute("action");a=s?lr(s,e):null,r=t.getAttribute("method")||ri,n=eo(t.getAttribute("enctype"))||ai,i=new FormData(t)}else if(ep(t)||rp(t)&&(t.type==="submit"||t.type==="image")){let s=t.form;if(s==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let u=t.getAttribute("formaction")||s.getAttribute("action");if(a=u?lr(u,e):null,r=t.getAttribute("formmethod")||s.getAttribute("method")||ri,n=eo(t.getAttribute("formenctype"))||eo(s.getAttribute("enctype"))||ai,i=new FormData(s,t),!ip()){let{name:l,type:c,value:f}=t;if(c==="image"){let v=l?`${l}.`:"";i.append(`${v}x`,"0"),i.append(`${v}y`,"0")}else l&&i.append(l,f)}}else{if(Li(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=ri,a=null,n=ai,o=t}return i&&n==="text/plain"&&(o=i,i=void 0),{action:a,method:r.toLowerCase(),encType:n,formData:i,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function uu(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function up(t,e,r){let a=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return a.pathname==="/"?a.pathname=`_root.${r}`:e&&lr(a.pathname,e)==="/"?a.pathname=`${e.replace(/\/$/,"")}/_root.${r}`:a.pathname=`${a.pathname.replace(/\/$/,"")}.${r}`,a}async function lp(t,e){if(t.id in e)return e[t.id];try{let r=await import(t.module);return e[t.id]=r,r}catch(r){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function cp(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function fp(t,e,r){let a=await Promise.all(t.map(async n=>{let i=e.routes[n.route.id];if(i){let o=await lp(i,r);return o.links?o.links():[]}return[]}));return pp(a.flat(1).filter(cp).filter(n=>n.rel==="stylesheet"||n.rel==="preload").map(n=>n.rel==="stylesheet"?{...n,rel:"prefetch",as:"style"}:{...n,rel:"prefetch"}))}function Gu(t,e,r,a,n,i){let o=(u,l)=>r[l]?u.route.id!==r[l].route.id:!0,s=(u,l)=>{var c;return r[l].pathname!==u.pathname||((c=r[l].route.path)==null?void 0:c.endsWith("*"))&&r[l].params["*"]!==u.params["*"]};return i==="assets"?e.filter((u,l)=>o(u,l)||s(u,l)):i==="data"?e.filter((u,l)=>{var f;let c=a.routes[u.route.id];if(!c||!c.hasLoader)return!1;if(o(u,l)||s(u,l))return!0;if(u.route.shouldRevalidate){let v=u.route.shouldRevalidate({currentUrl:new URL(n.pathname+n.search+n.hash,window.origin),currentParams:((f=r[0])==null?void 0:f.params)||{},nextUrl:new URL(t,window.origin),nextParams:u.params,defaultShouldRevalidate:!0});if(typeof v=="boolean")return v}return!0}):[]}function vp(t,e,{includeHydrateFallback:r}={}){return dp(t.map(a=>{let n=e.routes[a.route.id];if(!n)return[];let i=[n.module];return n.clientActionModule&&(i=i.concat(n.clientActionModule)),n.clientLoaderModule&&(i=i.concat(n.clientLoaderModule)),r&&n.hydrateFallbackModule&&(i=i.concat(n.hydrateFallbackModule)),n.imports&&(i=i.concat(n.imports)),i}).flat(1))}function dp(t){return[...new Set(t)]}function hp(t){let e={},r=Object.keys(t).sort();for(let a of r)e[a]=t[a];return e}function pp(t,e){let r=new Set;return new Set(e),t.reduce((a,n)=>{let i=JSON.stringify(hp(n));return r.has(i)||(r.add(i),a.push({key:i,link:n})),a},[])}function _f(){let t=_.useContext(Aa);return uu(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function gp(){let t=_.useContext(Ai);return uu(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var lu=_.createContext(void 0);lu.displayName="FrameworkContext";function $f(){let t=_.useContext(lu);return uu(t,"You must render this element inside a <HydratedRouter> element"),t}function mp(t,e){let r=_.useContext(lu),[a,n]=_.useState(!1),[i,o]=_.useState(!1),{onFocus:s,onBlur:u,onMouseEnter:l,onMouseLeave:c,onTouchStart:f}=e,v=_.useRef(null);_.useEffect(()=>{if(t==="render"&&o(!0),t==="viewport"){let m=g=>{g.forEach(y=>{o(y.isIntersecting)})},p=new IntersectionObserver(m,{threshold:.5});return v.current&&p.observe(v.current),()=>{p.disconnect()}}},[t]),_.useEffect(()=>{if(a){let m=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(m)}}},[a]);let h=()=>{n(!0)},d=()=>{n(!1),o(!1)};return r?t!=="intent"?[i,v,{}]:[i,v,{onFocus:qa(s,h),onBlur:qa(u,d),onMouseEnter:qa(l,h),onMouseLeave:qa(c,d),onTouchStart:qa(f,h)}]:[!1,v,{}]}function qa(t,e){return r=>{t&&t(r),r.defaultPrevented||e(r)}}function yp({page:t,...e}){let{router:r}=_f(),a=_.useMemo(()=>Df(r.routes,t,r.basename),[r.routes,t,r.basename]);return a?_.createElement(wp,{page:t,matches:a,...e}):null}function bp(t){let{manifest:e,routeModules:r}=$f(),[a,n]=_.useState([]);return _.useEffect(()=>{let i=!1;return fp(t,e,r).then(o=>{i||n(o)}),()=>{i=!0}},[t,e,r]),a}function wp({page:t,matches:e,...r}){let a=ra(),{manifest:n,routeModules:i}=$f(),{basename:o}=_f(),{loaderData:s,matches:u}=gp(),l=_.useMemo(()=>Gu(t,e,u,n,a,"data"),[t,e,u,n,a]),c=_.useMemo(()=>Gu(t,e,u,n,a,"assets"),[t,e,u,n,a]),f=_.useMemo(()=>{if(t===a.pathname+a.search+a.hash)return[];let d=new Set,m=!1;if(e.forEach(g=>{var b;let y=n.routes[g.route.id];!y||!y.hasLoader||(!l.some(w=>w.route.id===g.route.id)&&g.route.id in s&&((b=i[g.route.id])!=null&&b.shouldRevalidate)||y.hasClientLoader?m=!0:d.add(g.route.id))}),d.size===0)return[];let p=up(t,o,"data");return m&&d.size>0&&p.searchParams.set("_routes",e.filter(g=>d.has(g.route.id)).map(g=>g.route.id).join(",")),[p.pathname+p.search]},[o,s,a,n,l,e,t,i]),v=_.useMemo(()=>vp(c,n),[c,n]),h=bp(c);return _.createElement(_.Fragment,null,f.map(d=>_.createElement("link",{key:d,rel:"prefetch",as:"fetch",href:d,...r})),v.map(d=>_.createElement("link",{key:d,rel:"modulepreload",href:d,...r})),h.map(({key:d,link:m})=>_.createElement("link",{key:d,...m})))}function xp(...t){return e=>{t.forEach(r=>{typeof r=="function"?r(e):r!=null&&(r.current=e)})}}var Wf=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Wf&&(window.__reactRouterVersion="7.7.1")}catch{}function Ep({basename:t,children:e,window:r}){let a=_.useRef();a.current==null&&(a.current=lh({window:r,v5Compat:!0}));let n=a.current,[i,o]=_.useState({action:n.action,location:n.location}),s=_.useCallback(u=>{_.startTransition(()=>o(u))},[o]);return _.useLayoutEffect(()=>n.listen(s),[n,s]),_.createElement(jh,{basename:t,children:e,location:i.location,navigationType:i.action,navigator:n})}var Gf=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Uf=_.forwardRef(function({onClick:e,discover:r="render",prefetch:a="none",relative:n,reloadDocument:i,replace:o,state:s,target:u,to:l,preventScrollReset:c,viewTransition:f,...v},h){let{basename:d}=_.useContext(jt),m=typeof l=="string"&&Gf.test(l),p,g=!1;if(typeof l=="string"&&m&&(p=l,Wf))try{let S=new URL(window.location.href),P=l.startsWith("//")?new URL(S.protocol+l):new URL(l),k=lr(P.pathname,d);P.origin===S.origin&&k!=null?l=k+P.search+P.hash:g=!0}catch{$t(!1,`<Link to="${l}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let y=Nh(l,{relative:n}),[b,w,E]=mp(a,v),C=Rp(l,{replace:o,state:s,target:u,preventScrollReset:c,relative:n,viewTransition:f});function x(S){e&&e(S),S.defaultPrevented||C(S)}let R=_.createElement("a",{...v,...E,href:p||y,onClick:g||i?e:x,ref:xp(h,w),target:u,"data-discover":!m&&r==="render"?"true":void 0});return b&&!m?_.createElement(_.Fragment,null,R,_.createElement(yp,{page:y})):R});Uf.displayName="Link";var Cp=_.forwardRef(function({"aria-current":e="page",caseSensitive:r=!1,className:a="",end:n=!1,style:i,to:o,viewTransition:s,children:u,...l},c){let f=mn(o,{relative:l.relative}),v=ra(),h=_.useContext(Ai),{navigator:d,basename:m}=_.useContext(jt),p=h!=null&&Ap(f)&&s===!0,g=d.encodeLocation?d.encodeLocation(f).pathname:f.pathname,y=v.pathname,b=h&&h.navigation&&h.navigation.location?h.navigation.location.pathname:null;r||(y=y.toLowerCase(),b=b?b.toLowerCase():null,g=g.toLowerCase()),b&&m&&(b=lr(b,m)||b);const w=g!=="/"&&g.endsWith("/")?g.length-1:g.length;let E=y===g||!n&&y.startsWith(g)&&y.charAt(w)==="/",C=b!=null&&(b===g||!n&&b.startsWith(g)&&b.charAt(g.length)==="/"),x={isActive:E,isPending:C,isTransitioning:p},R=E?e:void 0,S;typeof a=="function"?S=a(x):S=[a,E?"active":null,C?"pending":null,p?"transitioning":null].filter(Boolean).join(" ");let P=typeof i=="function"?i(x):i;return _.createElement(Uf,{...l,"aria-current":R,className:S,ref:c,style:P,to:o,viewTransition:s},typeof u=="function"?u(x):u)});Cp.displayName="NavLink";var Tp=_.forwardRef(({discover:t="render",fetcherKey:e,navigate:r,reloadDocument:a,replace:n,state:i,method:o=ri,action:s,onSubmit:u,relative:l,preventScrollReset:c,viewTransition:f,...v},h)=>{let d=Dp(),m=Bp(s,{relative:l}),p=o.toLowerCase()==="get"?"get":"post",g=typeof s=="string"&&Gf.test(s),y=b=>{if(u&&u(b),b.defaultPrevented)return;b.preventDefault();let w=b.nativeEvent.submitter,E=(w==null?void 0:w.getAttribute("formmethod"))||o;d(w||b.currentTarget,{fetcherKey:e,method:E,navigate:r,replace:n,state:i,relative:l,preventScrollReset:c,viewTransition:f})};return _.createElement("form",{ref:h,method:p,action:m,onSubmit:a?u:y,...v,"data-discover":!g&&t==="render"?"true":void 0})});Tp.displayName="Form";function Sp(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Hf(t){let e=_.useContext(Aa);return He(e,Sp(t)),e}function Rp(t,{target:e,replace:r,state:a,preventScrollReset:n,relative:i,viewTransition:o}={}){let s=zf(),u=ra(),l=mn(t,{relative:i});return _.useCallback(c=>{if(np(c,e)){c.preventDefault();let f=r!==void 0?r:an(u)===an(l);s(t,{replace:f,state:a,preventScrollReset:n,relative:i,viewTransition:o})}},[u,s,l,r,a,e,t,n,i,o])}var Pp=0,kp=()=>`__${String(++Pp)}__`;function Dp(){let{router:t}=Hf("useSubmit"),{basename:e}=_.useContext(jt),r=Yh();return _.useCallback(async(a,n={})=>{let{action:i,method:o,encType:s,formData:u,body:l}=sp(a,e);if(n.navigate===!1){let c=n.fetcherKey||kp();await t.fetch(c,r,n.action||i,{preventScrollReset:n.preventScrollReset,formData:u,body:l,formMethod:n.method||o,formEncType:n.encType||s,flushSync:n.flushSync})}else await t.navigate(n.action||i,{preventScrollReset:n.preventScrollReset,formData:u,body:l,formMethod:n.method||o,formEncType:n.encType||s,replace:n.replace,state:n.state,fromRouteId:r,flushSync:n.flushSync,viewTransition:n.viewTransition})},[t,e,r])}function Bp(t,{relative:e}={}){let{basename:r}=_.useContext(jt),a=_.useContext(Jt);He(a,"useFormAction must be used inside a RouteContext");let[n]=a.matches.slice(-1),i={...mn(t||".",{relative:e})},o=ra();if(t==null){i.search=o.search;let s=new URLSearchParams(i.search),u=s.getAll("index");if(u.some(c=>c==="")){s.delete("index"),u.filter(f=>f).forEach(f=>s.append("index",f));let c=s.toString();i.search=c?`?${c}`:""}}return(!t||t===".")&&n.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(i.pathname=i.pathname==="/"?r:sr([r,i.pathname])),an(i)}function Ap(t,{relative:e}={}){let r=_.useContext(Of);He(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:a}=Hf("useViewTransitionState"),n=mn(t,{relative:e});if(!r.isTransitioning)return!1;let i=lr(r.currentLocation.pathname,a)||r.currentLocation.pathname,o=lr(r.nextLocation.pathname,a)||r.nextLocation.pathname;return gi(n.pathname,o)!=null||gi(n.pathname,i)!=null}var Lp=Yd();const On=Tf(Lp);var to={exports:{}},ro,Uu;function Mp(){if(Uu)return ro;Uu=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return ro=t,ro}var ao,Hu;function Ip(){if(Hu)return ao;Hu=1;var t=Mp();function e(){}function r(){}return r.resetWarningCache=e,ao=function(){function a(o,s,u,l,c,f){if(f!==t){var v=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw v.name="Invariant Violation",v}}a.isRequired=a;function n(){return a}var i={array:a,bigint:a,bool:a,func:a,number:a,object:a,string:a,symbol:a,any:a,arrayOf:n,element:a,elementType:a,instanceOf:n,node:a,objectOf:n,oneOf:n,oneOfType:n,shape:n,exact:n,checkPropTypes:r,resetWarningCache:e};return i.PropTypes=i,i},ao}var Ku;function Op(){return Ku||(Ku=1,to.exports=Ip()()),to.exports}var Np=Op();const Fp=Tf(Np);function zp(t,e){var r,a,n;return _.isValidElement(t)&&e.indexOf(t.type.muiName??((n=(a=(r=t.type)==null?void 0:r._payload)==null?void 0:a.value)==null?void 0:n.muiName))!==-1}function Vp(t){const{controlled:e,default:r}=t,{current:a}=_.useRef(e!==void 0),[n,i]=_.useState(r),o=a?e:n,s=_.useCallback(u=>{a||i(u)},[]);return[o,s]}const Yu={disabled:!1};var qp=function(e){return e.scrollTop},Za="unmounted",qr="exited",_r="entering",ga="entered",Ns="exiting",gr=function(t){Xd(e,t);function e(a,n){var i;i=t.call(this,a,n)||this;var o=n,s=o&&!o.isMounting?a.enter:a.appear,u;return i.appearStatus=null,a.in?s?(u=qr,i.appearStatus=_r):u=ga:a.unmountOnExit||a.mountOnEnter?u=Za:u=qr,i.state={status:u},i.nextCallback=null,i}e.getDerivedStateFromProps=function(n,i){var o=n.in;return o&&i.status===Za?{status:qr}:null};var r=e.prototype;return r.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},r.componentDidUpdate=function(n){var i=null;if(n!==this.props){var o=this.state.status;this.props.in?o!==_r&&o!==ga&&(i=_r):(o===_r||o===ga)&&(i=Ns)}this.updateStatus(!1,i)},r.componentWillUnmount=function(){this.cancelNextCallback()},r.getTimeouts=function(){var n=this.props.timeout,i,o,s;return i=o=s=n,n!=null&&typeof n!="number"&&(i=n.exit,o=n.enter,s=n.appear!==void 0?n.appear:o),{exit:i,enter:o,appear:s}},r.updateStatus=function(n,i){if(n===void 0&&(n=!1),i!==null)if(this.cancelNextCallback(),i===_r){if(this.props.unmountOnExit||this.props.mountOnEnter){var o=this.props.nodeRef?this.props.nodeRef.current:On.findDOMNode(this);o&&qp(o)}this.performEnter(n)}else this.performExit();else this.props.unmountOnExit&&this.state.status===qr&&this.setState({status:Za})},r.performEnter=function(n){var i=this,o=this.props.enter,s=this.context?this.context.isMounting:n,u=this.props.nodeRef?[s]:[On.findDOMNode(this),s],l=u[0],c=u[1],f=this.getTimeouts(),v=s?f.appear:f.enter;if(!n&&!o||Yu.disabled){this.safeSetState({status:ga},function(){i.props.onEntered(l)});return}this.props.onEnter(l,c),this.safeSetState({status:_r},function(){i.props.onEntering(l,c),i.onTransitionEnd(v,function(){i.safeSetState({status:ga},function(){i.props.onEntered(l,c)})})})},r.performExit=function(){var n=this,i=this.props.exit,o=this.getTimeouts(),s=this.props.nodeRef?void 0:On.findDOMNode(this);if(!i||Yu.disabled){this.safeSetState({status:qr},function(){n.props.onExited(s)});return}this.props.onExit(s),this.safeSetState({status:Ns},function(){n.props.onExiting(s),n.onTransitionEnd(o.exit,function(){n.safeSetState({status:qr},function(){n.props.onExited(s)})})})},r.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},r.safeSetState=function(n,i){i=this.setNextCallback(i),this.setState(n,i)},r.setNextCallback=function(n){var i=this,o=!0;return this.nextCallback=function(s){o&&(o=!1,i.nextCallback=null,n(s))},this.nextCallback.cancel=function(){o=!1},this.nextCallback},r.onTransitionEnd=function(n,i){this.setNextCallback(i);var o=this.props.nodeRef?this.props.nodeRef.current:On.findDOMNode(this),s=n==null&&!this.props.addEndListener;if(!o||s){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var u=this.props.nodeRef?[this.nextCallback]:[o,this.nextCallback],l=u[0],c=u[1];this.props.addEndListener(l,c)}n!=null&&setTimeout(this.nextCallback,n)},r.render=function(){var n=this.state.status;if(n===Za)return null;var i=this.props,o=i.children;i.in,i.mountOnEnter,i.unmountOnExit,i.appear,i.enter,i.exit,i.timeout,i.addEndListener,i.onEnter,i.onEntering,i.onEntered,i.onExit,i.onExiting,i.onExited,i.nodeRef;var s=Zd(i,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return Kr.createElement(Sf.Provider,{value:null},typeof o=="function"?o(n,s):Kr.cloneElement(Kr.Children.only(o),s))},e}(Kr.Component);gr.contextType=Sf;gr.propTypes={};function oa(){}gr.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:oa,onEntering:oa,onEntered:oa,onExit:oa,onExiting:oa,onExited:oa};gr.UNMOUNTED=Za;gr.EXITED=qr;gr.ENTERING=_r;gr.ENTERED=ga;gr.EXITING=Ns;function Xu(t,e){const{timeout:r,easing:a,style:n={}}=t;return{duration:n.transitionDuration??(typeof r=="number"?r:r[e.mode]||0),easing:n.transitionTimingFunction??(typeof a=="object"?a[e.mode]:a),delay:n.transitionDelay}}function _p(t){return vr("MuiCollapse",t)}dr("MuiCollapse",["root","horizontal","vertical","entered","hidden","wrapper","wrapperInner"]);const $p=t=>{const{orientation:e,classes:r}=t,a={root:["root",`${e}`],entered:["entered"],hidden:["hidden"],wrapper:["wrapper",`${e}`],wrapperInner:["wrapperInner",`${e}`]};return pr(a,_p,r)},Wp=xt("div",{name:"MuiCollapse",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:r}=t;return[e.root,e[r.orientation],r.state==="entered"&&e.entered,r.state==="exited"&&!r.in&&r.collapsedSize==="0px"&&e.hidden]}})(ur(({theme:t})=>({height:0,overflow:"hidden",transition:t.transitions.create("height"),variants:[{props:{orientation:"horizontal"},style:{height:"auto",width:0,transition:t.transitions.create("width")}},{props:{state:"entered"},style:{height:"auto",overflow:"visible"}},{props:{state:"entered",orientation:"horizontal"},style:{width:"auto"}},{props:({ownerState:e})=>e.state==="exited"&&!e.in&&e.collapsedSize==="0px",style:{visibility:"hidden"}}]}))),Gp=xt("div",{name:"MuiCollapse",slot:"Wrapper"})({display:"flex",width:"100%",variants:[{props:{orientation:"horizontal"},style:{width:"auto",height:"100%"}}]}),Up=xt("div",{name:"MuiCollapse",slot:"WrapperInner"})({width:"100%",variants:[{props:{orientation:"horizontal"},style:{width:"auto",height:"100%"}}]}),Fs=_.forwardRef(function(e,r){const a=hr({props:e,name:"MuiCollapse"}),{addEndListener:n,children:i,className:o,collapsedSize:s="0px",component:u,easing:l,in:c,onEnter:f,onEntered:v,onEntering:h,onExit:d,onExited:m,onExiting:p,orientation:g="vertical",style:y,timeout:b=Qd.standard,TransitionComponent:w=gr,...E}=a,C={...a,orientation:g,collapsedSize:s},x=$p(C),R=jd(),S=Jd(),P=_.useRef(null),k=_.useRef(),B=typeof s=="number"?`${s}px`:s,D=g==="horizontal",A=D?"width":"height",L=_.useRef(null),I=nu(r,L),M=G=>Z=>{if(G){const ae=L.current;Z===void 0?G(ae):G(ae,Z)}},O=()=>P.current?P.current[D?"clientWidth":"clientHeight"]:0,V=M((G,Z)=>{P.current&&D&&(P.current.style.position="absolute"),G.style[A]=B,f&&f(G,Z)}),W=M((G,Z)=>{const ae=O();P.current&&D&&(P.current.style.position="");const{duration:Q,easing:F}=Xu({style:y,timeout:b,easing:l},{mode:"enter"});if(b==="auto"){const q=R.transitions.getAutoHeightDuration(ae);G.style.transitionDuration=`${q}ms`,k.current=q}else G.style.transitionDuration=typeof Q=="string"?Q:`${Q}ms`;G.style[A]=`${ae}px`,G.style.transitionTimingFunction=F,h&&h(G,Z)}),N=M((G,Z)=>{G.style[A]="auto",v&&v(G,Z)}),z=M(G=>{G.style[A]=`${O()}px`,d&&d(G)}),X=M(m),j=M(G=>{const Z=O(),{duration:ae,easing:Q}=Xu({style:y,timeout:b,easing:l},{mode:"exit"});if(b==="auto"){const F=R.transitions.getAutoHeightDuration(Z);G.style.transitionDuration=`${F}ms`,k.current=F}else G.style.transitionDuration=typeof ae=="string"?ae:`${ae}ms`;G.style[A]=B,G.style.transitionTimingFunction=Q,p&&p(G)}),J=G=>{b==="auto"&&S.start(k.current||0,G),n&&n(L.current,G)};return ne.jsx(w,{in:c,onEnter:V,onEntered:N,onEntering:W,onExit:z,onExited:X,onExiting:j,addEndListener:J,nodeRef:L,timeout:b==="auto"?null:b,...E,children:(G,{ownerState:Z,...ae})=>ne.jsx(Wp,{as:u,className:Ot(x.root,o,{entered:x.entered,exited:!c&&B==="0px"&&x.hidden}[G]),style:{[D?"minWidth":"minHeight"]:B,...y},ref:I,ownerState:{...C,state:G},...ae,children:ne.jsx(Gp,{ownerState:{...C,state:G},className:x.wrapper,ref:P,children:ne.jsx(Up,{ownerState:{...C,state:G},className:x.wrapperInner,children:i})})})})});Fs&&(Fs.muiSupportAuto=!0);const Kf=_.createContext({});function Hp(t){return vr("MuiAccordion",t)}const Nn=dr("MuiAccordion",["root","heading","rounded","expanded","disabled","gutters","region"]),Kp=t=>{const{classes:e,square:r,expanded:a,disabled:n,disableGutters:i}=t;return pr({root:["root",!r&&"rounded",a&&"expanded",n&&"disabled",!i&&"gutters"],heading:["heading"],region:["region"]},Hp,e)},Yp=xt(eh,{name:"MuiAccordion",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:r}=t;return[{[`& .${Nn.region}`]:e.region},e.root,!r.square&&e.rounded,!r.disableGutters&&e.gutters]}})(ur(({theme:t})=>{const e={duration:t.transitions.duration.shortest};return{position:"relative",transition:t.transitions.create(["margin"],e),overflowAnchor:"none","&::before":{position:"absolute",left:0,top:-1,right:0,height:1,content:'""',opacity:1,backgroundColor:(t.vars||t).palette.divider,transition:t.transitions.create(["opacity","background-color"],e)},"&:first-of-type":{"&::before":{display:"none"}},[`&.${Nn.expanded}`]:{"&::before":{opacity:0},"&:first-of-type":{marginTop:0},"&:last-of-type":{marginBottom:0},"& + &":{"&::before":{display:"none"}}},[`&.${Nn.disabled}`]:{backgroundColor:(t.vars||t).palette.action.disabledBackground}}}),ur(({theme:t})=>({variants:[{props:e=>!e.square,style:{borderRadius:0,"&:first-of-type":{borderTopLeftRadius:(t.vars||t).shape.borderRadius,borderTopRightRadius:(t.vars||t).shape.borderRadius},"&:last-of-type":{borderBottomLeftRadius:(t.vars||t).shape.borderRadius,borderBottomRightRadius:(t.vars||t).shape.borderRadius,"@supports (-ms-ime-align: auto)":{borderBottomLeftRadius:0,borderBottomRightRadius:0}}}},{props:e=>!e.disableGutters,style:{[`&.${Nn.expanded}`]:{margin:"16px 0"}}}]}))),Xp=xt("h3",{name:"MuiAccordion",slot:"Heading"})({all:"unset"}),Zp=_.forwardRef(function(e,r){const a=hr({props:e,name:"MuiAccordion"}),{children:n,className:i,defaultExpanded:o=!1,disabled:s=!1,disableGutters:u=!1,expanded:l,onChange:c,square:f=!1,slots:v={},slotProps:h={},TransitionComponent:d,TransitionProps:m,...p}=a,[g,y]=Vp({controlled:l,default:o}),b=_.useCallback(O=>{y(!g),c&&c(O,!g)},[g,c,y]),[w,...E]=_.Children.toArray(n),C=_.useMemo(()=>({expanded:g,disabled:s,disableGutters:u,toggle:b}),[g,s,u,b]),x={...a,square:f,disabled:s,disableGutters:u,expanded:g},R=Kp(x),S={transition:d,...v},P={transition:m,...h},k={slots:S,slotProps:P},[B,D]=or("root",{elementType:Yp,externalForwardedProps:{...k,...p},className:Ot(R.root,i),shouldForwardComponentProp:!0,ownerState:x,ref:r,additionalProps:{square:f}}),[A,L]=or("heading",{elementType:Xp,externalForwardedProps:k,className:R.heading,ownerState:x}),[I,M]=or("transition",{elementType:Fs,externalForwardedProps:k,ownerState:x});return ne.jsxs(B,{...D,children:[ne.jsx(A,{...L,children:ne.jsx(Kf.Provider,{value:C,children:w})}),ne.jsx(I,{in:g,timeout:"auto",...M,children:ne.jsx("div",{"aria-labelledby":w.props.id,id:w.props["aria-controls"],role:"region",className:R.region,children:E})})]})});function Qp(t){return vr("MuiAccordionDetails",t)}dr("MuiAccordionDetails",["root"]);const jp=t=>{const{classes:e}=t;return pr({root:["root"]},Qp,e)},Jp=xt("div",{name:"MuiAccordionDetails",slot:"Root"})(ur(({theme:t})=>({padding:t.spacing(1,2,2)}))),eg=_.forwardRef(function(e,r){const a=hr({props:e,name:"MuiAccordionDetails"}),{className:n,...i}=a,o=a,s=jp(o);return ne.jsx(Jp,{className:Ot(s.root,n),ref:r,ownerState:o,...i})});function tg(t){return vr("MuiAccordionSummary",t)}const ba=dr("MuiAccordionSummary",["root","expanded","focusVisible","disabled","gutters","contentGutters","content","expandIconWrapper"]),rg=t=>{const{classes:e,expanded:r,disabled:a,disableGutters:n}=t;return pr({root:["root",r&&"expanded",a&&"disabled",!n&&"gutters"],focusVisible:["focusVisible"],content:["content",r&&"expanded",!n&&"contentGutters"],expandIconWrapper:["expandIconWrapper",r&&"expanded"]},tg,e)},ag=xt(Rf,{name:"MuiAccordionSummary",slot:"Root"})(ur(({theme:t})=>{const e={duration:t.transitions.duration.shortest};return{display:"flex",width:"100%",minHeight:48,padding:t.spacing(0,2),transition:t.transitions.create(["min-height","background-color"],e),[`&.${ba.focusVisible}`]:{backgroundColor:(t.vars||t).palette.action.focus},[`&.${ba.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity},[`&:hover:not(.${ba.disabled})`]:{cursor:"pointer"},variants:[{props:r=>!r.disableGutters,style:{[`&.${ba.expanded}`]:{minHeight:64}}}]}})),ng=xt("span",{name:"MuiAccordionSummary",slot:"Content"})(ur(({theme:t})=>({display:"flex",textAlign:"start",flexGrow:1,margin:"12px 0",variants:[{props:e=>!e.disableGutters,style:{transition:t.transitions.create(["margin"],{duration:t.transitions.duration.shortest}),[`&.${ba.expanded}`]:{margin:"20px 0"}}}]}))),ig=xt("span",{name:"MuiAccordionSummary",slot:"ExpandIconWrapper"})(ur(({theme:t})=>({display:"flex",color:(t.vars||t).palette.action.active,transform:"rotate(0deg)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shortest}),[`&.${ba.expanded}`]:{transform:"rotate(180deg)"}}))),og=_.forwardRef(function(e,r){const a=hr({props:e,name:"MuiAccordionSummary"}),{children:n,className:i,expandIcon:o,focusVisibleClassName:s,onClick:u,slots:l,slotProps:c,...f}=a,{disabled:v=!1,disableGutters:h,expanded:d,toggle:m}=_.useContext(Kf),p=P=>{m&&m(P),u&&u(P)},g={...a,expanded:d,disabled:v,disableGutters:h},y=rg(g),b={slots:l,slotProps:c},[w,E]=or("root",{ref:r,shouldForwardComponentProp:!0,className:Ot(y.root,i),elementType:ag,externalForwardedProps:{...b,...f},ownerState:g,additionalProps:{focusRipple:!1,disableRipple:!0,disabled:v,"aria-expanded":d,focusVisibleClassName:Ot(y.focusVisible,s)},getSlotProps:P=>({...P,onClick:k=>{var B;(B=P.onClick)==null||B.call(P,k),p(k)}})}),[C,x]=or("content",{className:y.content,elementType:ng,externalForwardedProps:b,ownerState:g}),[R,S]=or("expandIconWrapper",{className:y.expandIconWrapper,elementType:ig,externalForwardedProps:b,ownerState:g});return ne.jsxs(w,{...E,children:[ne.jsx(C,{...x,children:n}),o&&ne.jsx(R,{...S,children:o})]})});function Zu(t){return typeof t=="string"}const Cr=_.createContext({});function sg(t){return vr("MuiList",t)}dr("MuiList",["root","padding","dense","subheader"]);const ug=t=>{const{classes:e,disablePadding:r,dense:a,subheader:n}=t;return pr({root:["root",!r&&"padding",a&&"dense",n&&"subheader"]},sg,e)},lg=xt("ul",{name:"MuiList",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:r}=t;return[e.root,!r.disablePadding&&e.padding,r.dense&&e.dense,r.subheader&&e.subheader]}})({listStyle:"none",margin:0,padding:0,position:"relative",variants:[{props:({ownerState:t})=>!t.disablePadding,style:{paddingTop:8,paddingBottom:8}},{props:({ownerState:t})=>t.subheader,style:{paddingTop:0}}]}),cg=_.forwardRef(function(e,r){const a=hr({props:e,name:"MuiList"}),{children:n,className:i,component:o="ul",dense:s=!1,disablePadding:u=!1,subheader:l,...c}=a,f=_.useMemo(()=>({dense:s}),[s]),v={...a,component:o,dense:s,disablePadding:u},h=ug(v);return ne.jsx(Cr.Provider,{value:f,children:ne.jsxs(lg,{as:o,className:Ot(h.root,i),ref:r,ownerState:v,...c,children:[l,n]})})});function fg(t){return vr("MuiListItem",t)}dr("MuiListItem",["root","container","dense","alignItemsFlexStart","divider","gutters","padding","secondaryAction"]);function vg(t){return vr("MuiListItemButton",t)}const ma=dr("MuiListItemButton",["root","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","selected"]),dg=(t,e)=>{const{ownerState:r}=t;return[e.root,r.dense&&e.dense,r.alignItems==="flex-start"&&e.alignItemsFlexStart,r.divider&&e.divider,!r.disableGutters&&e.gutters]},hg=t=>{const{alignItems:e,classes:r,dense:a,disabled:n,disableGutters:i,divider:o,selected:s}=t,l=pr({root:["root",a&&"dense",!i&&"gutters",o&&"divider",n&&"disabled",e==="flex-start"&&"alignItemsFlexStart",s&&"selected"]},vg,r);return{...r,...l}},pg=xt(Rf,{shouldForwardProp:t=>rh(t)||t==="classes",name:"MuiListItemButton",slot:"Root",overridesResolver:dg})(ur(({theme:t})=>({display:"flex",flexGrow:1,justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minWidth:0,boxSizing:"border-box",textAlign:"left",paddingTop:8,paddingBottom:8,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${ma.selected}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:Mn(t.palette.primary.main,t.palette.action.selectedOpacity),[`&.${ma.focusVisible}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.focusOpacity}))`:Mn(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)}},[`&.${ma.selected}:hover`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.hoverOpacity}))`:Mn(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:Mn(t.palette.primary.main,t.palette.action.selectedOpacity)}},[`&.${ma.focusVisible}`]:{backgroundColor:(t.vars||t).palette.action.focus},[`&.${ma.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity},variants:[{props:({ownerState:e})=>e.divider,style:{borderBottom:`1px solid ${(t.vars||t).palette.divider}`,backgroundClip:"padding-box"}},{props:{alignItems:"flex-start"},style:{alignItems:"flex-start"}},{props:({ownerState:e})=>!e.disableGutters,style:{paddingLeft:16,paddingRight:16}},{props:({ownerState:e})=>e.dense,style:{paddingTop:4,paddingBottom:4}}]}))),gg=_.forwardRef(function(e,r){const a=hr({props:e,name:"MuiListItemButton"}),{alignItems:n="center",autoFocus:i=!1,component:o="div",children:s,dense:u=!1,disableGutters:l=!1,divider:c=!1,focusVisibleClassName:f,selected:v=!1,className:h,...d}=a,m=_.useContext(Cr),p=_.useMemo(()=>({dense:u||m.dense||!1,alignItems:n,disableGutters:l}),[n,m.dense,u,l]),g=_.useRef(null);th(()=>{i&&g.current&&g.current.focus()},[i]);const y={...a,alignItems:n,dense:p.dense,disableGutters:l,divider:c,selected:v},b=hg(y),w=nu(g,r);return ne.jsx(Cr.Provider,{value:p,children:ne.jsx(pg,{ref:w,href:d.href||d.to,component:(d.href||d.to)&&o==="div"?"button":o,focusVisibleClassName:Ot(b.focusVisible,f),ownerState:y,className:Ot(b.root,h),...d,classes:b,children:s})})});function mg(t){return vr("MuiListItemSecondaryAction",t)}dr("MuiListItemSecondaryAction",["root","disableGutters"]);const yg=t=>{const{disableGutters:e,classes:r}=t;return pr({root:["root",e&&"disableGutters"]},mg,r)},bg=xt("div",{name:"MuiListItemSecondaryAction",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:r}=t;return[e.root,r.disableGutters&&e.disableGutters]}})({position:"absolute",right:16,top:"50%",transform:"translateY(-50%)",variants:[{props:({ownerState:t})=>t.disableGutters,style:{right:0}}]}),Yf=_.forwardRef(function(e,r){const a=hr({props:e,name:"MuiListItemSecondaryAction"}),{className:n,...i}=a,o=_.useContext(Cr),s={...a,disableGutters:o.disableGutters},u=yg(s);return ne.jsx(bg,{className:Ot(u.root,n),ownerState:s,ref:r,...i})});Yf.muiName="ListItemSecondaryAction";const wg=(t,e)=>{const{ownerState:r}=t;return[e.root,r.dense&&e.dense,r.alignItems==="flex-start"&&e.alignItemsFlexStart,r.divider&&e.divider,!r.disableGutters&&e.gutters,!r.disablePadding&&e.padding,r.hasSecondaryAction&&e.secondaryAction]},xg=t=>{const{alignItems:e,classes:r,dense:a,disableGutters:n,disablePadding:i,divider:o,hasSecondaryAction:s}=t;return pr({root:["root",a&&"dense",!n&&"gutters",!i&&"padding",o&&"divider",e==="flex-start"&&"alignItemsFlexStart",s&&"secondaryAction"],container:["container"]},fg,r)},Eg=xt("div",{name:"MuiListItem",slot:"Root",overridesResolver:wg})(ur(({theme:t})=>({display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",width:"100%",boxSizing:"border-box",textAlign:"left",variants:[{props:({ownerState:e})=>!e.disablePadding,style:{paddingTop:8,paddingBottom:8}},{props:({ownerState:e})=>!e.disablePadding&&e.dense,style:{paddingTop:4,paddingBottom:4}},{props:({ownerState:e})=>!e.disablePadding&&!e.disableGutters,style:{paddingLeft:16,paddingRight:16}},{props:({ownerState:e})=>!e.disablePadding&&!!e.secondaryAction,style:{paddingRight:48}},{props:({ownerState:e})=>!!e.secondaryAction,style:{[`& > .${ma.root}`]:{paddingRight:48}}},{props:{alignItems:"flex-start"},style:{alignItems:"flex-start"}},{props:({ownerState:e})=>e.divider,style:{borderBottom:`1px solid ${(t.vars||t).palette.divider}`,backgroundClip:"padding-box"}},{props:({ownerState:e})=>e.button,style:{transition:t.transitions.create("background-color",{duration:t.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}}}},{props:({ownerState:e})=>e.hasSecondaryAction,style:{paddingRight:48}}]}))),Cg=xt("li",{name:"MuiListItem",slot:"Container"})({position:"relative"}),Tg=_.forwardRef(function(e,r){const a=hr({props:e,name:"MuiListItem"}),{alignItems:n="center",children:i,className:o,component:s,components:u={},componentsProps:l={},ContainerComponent:c="li",ContainerProps:{className:f,...v}={},dense:h=!1,disableGutters:d=!1,disablePadding:m=!1,divider:p=!1,secondaryAction:g,slotProps:y={},slots:b={},...w}=a,E=_.useContext(Cr),C=_.useMemo(()=>({dense:h||E.dense||!1,alignItems:n,disableGutters:d}),[n,E.dense,h,d]),x=_.useRef(null),R=_.Children.toArray(i),S=R.length&&zp(R[R.length-1],["ListItemSecondaryAction"]),P={...a,alignItems:n,dense:C.dense,disableGutters:d,disablePadding:m,divider:p,hasSecondaryAction:S},k=xg(P),B=nu(x,r),D=b.root||u.Root||Eg,A=y.root||l.root||{},L={className:Ot(k.root,A.className,o),...w};let I=s||"li";return S?(I=!L.component&&!s?"div":I,c==="li"&&(I==="li"?I="div":L.component==="li"&&(L.component="div")),ne.jsx(Cr.Provider,{value:C,children:ne.jsxs(Cg,{as:c,className:Ot(k.container,f),ref:B,ownerState:P,...v,children:[ne.jsx(D,{...A,...!Zu(D)&&{as:I,ownerState:{...P,...A.ownerState}},...L,children:R}),R.pop()]})})):ne.jsx(Cr.Provider,{value:C,children:ne.jsxs(D,{...A,as:I,ref:B,...!Zu(D)&&{ownerState:{...P,...A.ownerState}},...L,children:[R,g&&ne.jsx(Yf,{children:g})]})})});function Sg(t){return vr("MuiListItemText",t)}const Fn=dr("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]),Rg=t=>{const{classes:e,inset:r,primary:a,secondary:n,dense:i}=t;return pr({root:["root",r&&"inset",i&&"dense",a&&n&&"multiline"],primary:["primary"],secondary:["secondary"]},Sg,e)},Pg=xt("div",{name:"MuiListItemText",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:r}=t;return[{[`& .${Fn.primary}`]:e.primary},{[`& .${Fn.secondary}`]:e.secondary},e.root,r.inset&&e.inset,r.primary&&r.secondary&&e.multiline,r.dense&&e.dense]}})({flex:"1 1 auto",minWidth:0,marginTop:4,marginBottom:4,[`.${Vu.root}:where(& .${Fn.primary})`]:{display:"block"},[`.${Vu.root}:where(& .${Fn.secondary})`]:{display:"block"},variants:[{props:({ownerState:t})=>t.primary&&t.secondary,style:{marginTop:6,marginBottom:6}},{props:({ownerState:t})=>t.inset,style:{paddingLeft:56}}]}),kg=_.forwardRef(function(e,r){const a=hr({props:e,name:"MuiListItemText"}),{children:n,className:i,disableTypography:o=!1,inset:s=!1,primary:u,primaryTypographyProps:l,secondary:c,secondaryTypographyProps:f,slots:v={},slotProps:h={},...d}=a,{dense:m}=_.useContext(Cr);let p=u??n,g=c;const y={...a,disableTypography:o,inset:s,primary:!!p,secondary:!!g,dense:m},b=Rg(y),w={slots:v,slotProps:{primary:l,secondary:f,...h}},[E,C]=or("root",{className:Ot(b.root,i),elementType:Pg,externalForwardedProps:{...w,...d},ownerState:y,ref:r}),[x,R]=or("primary",{className:b.primary,elementType:Xt,externalForwardedProps:w,ownerState:y}),[S,P]=or("secondary",{className:b.secondary,elementType:Xt,externalForwardedProps:w,ownerState:y});return p!=null&&p.type!==Xt&&!o&&(p=ne.jsx(x,{variant:m?"body2":"body1",component:R!=null&&R.variant?void 0:"span",...R,children:p})),g!=null&&g.type!==Xt&&!o&&(g=ne.jsx(S,{variant:"body2",color:"textSecondary",...P,children:g})),ne.jsxs(E,{...C,children:[p,g]})}),Dg=ah(ne.jsx("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"}));function Bg({term:t,groups:e,onTermClick:r}){return ne.jsxs("div",{children:[ne.jsxs(Xt,{variant:"h6",gutterBottom:!0,children:["📌 「",t,"」的語意關係："]}),e.map((a,n)=>ne.jsxs(Zp,{defaultExpanded:n===0,children:[ne.jsx(og,{expandIcon:ne.jsx(Dg,{}),children:ne.jsx(Xt,{variant:"subtitle1",fontWeight:600,children:a.relation})}),ne.jsx(eg,{children:ne.jsx(cg,{dense:!0,children:a.items.map((i,o)=>{const s=i.source===t?i.target:i.source;return ne.jsx(Tg,{disablePadding:!0,children:ne.jsx(gg,{onClick:()=>r(s),children:ne.jsx(kg,{primary:s})})},o)})})})]},n))]})}function Ag({text:t,keywords:e,onClick:r}){const a=o=>o.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),n=e.map(a).join("|"),i=t.split(new RegExp(`(${n})`,"gi"));return ne.jsx(Xt,{variant:"body1",sx:{lineHeight:1.8},children:i.map((o,s)=>e.some(l=>l.toLowerCase()===o.toLowerCase())?ne.jsx("button",{onClick:()=>r(o),style:{backgroundColor:"#e3f2fd",border:"none",borderRadius:"4px",padding:"0.1rem 0.4rem",margin:"0 2px",cursor:"pointer",fontWeight:"bold",color:"#0d47a1"},children:o},s):ne.jsx("span",{children:o},s))})}function zs(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,a=Array(e);r<e;r++)a[r]=t[r];return a}function Lg(t){if(Array.isArray(t))return t}function Mg(t){if(Array.isArray(t))return zs(t)}function Lr(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ig(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,Zf(a.key),a)}}function Mr(t,e,r){return e&&Ig(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function kt(t,e){var r=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=cu(t))||e){r&&(t=r);var a=0,n=function(){};return{s:n,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(u){throw u},f:n}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i,o=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var u=r.next();return o=u.done,u},e:function(u){s=!0,i=u},f:function(){try{o||r.return==null||r.return()}finally{if(s)throw i}}}}function Xf(t,e,r){return(e=Zf(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Og(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Ng(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var a,n,i,o,s=[],u=!0,l=!1;try{if(i=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;u=!1}else for(;!(u=(a=i.call(r)).done)&&(s.push(a.value),s.length!==e);u=!0);}catch(c){l=!0,n=c}finally{try{if(!u&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(l)throw n}}return s}}function Fg(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zg(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rt(t,e){return Lg(t)||Ng(t,e)||cu(t,e)||Fg()}function mi(t){return Mg(t)||Og(t)||cu(t)||zg()}function Vg(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var a=r.call(t,e);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function Zf(t){var e=Vg(t,"string");return typeof e=="symbol"?e:e+""}function nt(t){"@babel/helpers - typeof";return nt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nt(t)}function cu(t,e){if(t){if(typeof t=="string")return zs(t,e);var r={}.toString.call(t).slice(8,-1);return r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set"?Array.from(t):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?zs(t,e):void 0}}var tt=typeof window>"u"?null:window,Qu=tt?tt.navigator:null;tt&&tt.document;var qg=nt(""),Qf=nt({}),_g=nt(function(){}),$g=typeof HTMLElement>"u"?"undefined":nt(HTMLElement),yn=function(e){return e&&e.instanceString&&Ke(e.instanceString)?e.instanceString():null},de=function(e){return e!=null&&nt(e)==qg},Ke=function(e){return e!=null&&nt(e)===_g},qe=function(e){return!At(e)&&(Array.isArray?Array.isArray(e):e!=null&&e instanceof Array)},Ae=function(e){return e!=null&&nt(e)===Qf&&!qe(e)&&e.constructor===Object},Wg=function(e){return e!=null&&nt(e)===Qf},ie=function(e){return e!=null&&nt(e)===nt(1)&&!isNaN(e)},Gg=function(e){return ie(e)&&Math.floor(e)===e},yi=function(e){if($g!=="undefined")return e!=null&&e instanceof HTMLElement},At=function(e){return bn(e)||jf(e)},bn=function(e){return yn(e)==="collection"&&e._private.single},jf=function(e){return yn(e)==="collection"&&!e._private.single},fu=function(e){return yn(e)==="core"},Jf=function(e){return yn(e)==="stylesheet"},Ug=function(e){return yn(e)==="event"},Rr=function(e){return e==null?!0:!!(e===""||e.match(/^\s+$/))},Hg=function(e){return typeof HTMLElement>"u"?!1:e instanceof HTMLElement},Kg=function(e){return Ae(e)&&ie(e.x1)&&ie(e.x2)&&ie(e.y1)&&ie(e.y2)},Yg=function(e){return Wg(e)&&Ke(e.then)},Xg=function(){return Qu&&Qu.userAgent.match(/msie|trident|edge/i)},Pa=function(e,r){r||(r=function(){if(arguments.length===1)return arguments[0];if(arguments.length===0)return"undefined";for(var i=[],o=0;o<arguments.length;o++)i.push(arguments[o]);return i.join("$")});var a=function(){var i=this,o=arguments,s,u=r.apply(i,o),l=a.cache;return(s=l[u])||(s=l[u]=e.apply(i,o)),s};return a.cache={},a},vu=Pa(function(t){return t.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})}),Mi=Pa(function(t){return t.replace(/(-\w)/g,function(e){return e[1].toUpperCase()})}),ev=Pa(function(t,e){return t+e[0].toUpperCase()+e.substring(1)},function(t,e){return t+"$"+e}),ju=function(e){return Rr(e)?e:e.charAt(0).toUpperCase()+e.substring(1)},at="(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))",Zg="rgb[a]?\\(("+at+"[%]?)\\s*,\\s*("+at+"[%]?)\\s*,\\s*("+at+"[%]?)(?:\\s*,\\s*("+at+"))?\\)",Qg="rgb[a]?\\((?:"+at+"[%]?)\\s*,\\s*(?:"+at+"[%]?)\\s*,\\s*(?:"+at+"[%]?)(?:\\s*,\\s*(?:"+at+"))?\\)",jg="hsl[a]?\\(("+at+")\\s*,\\s*("+at+"[%])\\s*,\\s*("+at+"[%])(?:\\s*,\\s*("+at+"))?\\)",Jg="hsl[a]?\\((?:"+at+")\\s*,\\s*(?:"+at+"[%])\\s*,\\s*(?:"+at+"[%])(?:\\s*,\\s*(?:"+at+"))?\\)",em="\\#[0-9a-fA-F]{3}",tm="\\#[0-9a-fA-F]{6}",tv=function(e,r){return e<r?-1:e>r?1:0},rm=function(e,r){return-1*tv(e,r)},ge=Object.assign!=null?Object.assign.bind(Object):function(t){for(var e=arguments,r=1;r<e.length;r++){var a=e[r];if(a!=null)for(var n=Object.keys(a),i=0;i<n.length;i++){var o=n[i];t[o]=a[o]}}return t},am=function(e){if(!(!(e.length===4||e.length===7)||e[0]!=="#")){var r=e.length===4,a,n,i,o=16;return r?(a=parseInt(e[1]+e[1],o),n=parseInt(e[2]+e[2],o),i=parseInt(e[3]+e[3],o)):(a=parseInt(e[1]+e[2],o),n=parseInt(e[3]+e[4],o),i=parseInt(e[5]+e[6],o)),[a,n,i]}},nm=function(e){var r,a,n,i,o,s,u,l;function c(d,m,p){return p<0&&(p+=1),p>1&&(p-=1),p<1/6?d+(m-d)*6*p:p<1/2?m:p<2/3?d+(m-d)*(2/3-p)*6:d}var f=new RegExp("^"+jg+"$").exec(e);if(f){if(a=parseInt(f[1]),a<0?a=(360- -1*a%360)%360:a>360&&(a=a%360),a/=360,n=parseFloat(f[2]),n<0||n>100||(n=n/100,i=parseFloat(f[3]),i<0||i>100)||(i=i/100,o=f[4],o!==void 0&&(o=parseFloat(o),o<0||o>1)))return;if(n===0)s=u=l=Math.round(i*255);else{var v=i<.5?i*(1+n):i+n-i*n,h=2*i-v;s=Math.round(255*c(h,v,a+1/3)),u=Math.round(255*c(h,v,a)),l=Math.round(255*c(h,v,a-1/3))}r=[s,u,l,o]}return r},im=function(e){var r,a=new RegExp("^"+Zg+"$").exec(e);if(a){r=[];for(var n=[],i=1;i<=3;i++){var o=a[i];if(o[o.length-1]==="%"&&(n[i]=!0),o=parseFloat(o),n[i]&&(o=o/100*255),o<0||o>255)return;r.push(Math.floor(o))}var s=n[1]||n[2]||n[3],u=n[1]&&n[2]&&n[3];if(s&&!u)return;var l=a[4];if(l!==void 0){if(l=parseFloat(l),l<0||l>1)return;r.push(l)}}return r},om=function(e){return sm[e.toLowerCase()]},rv=function(e){return(qe(e)?e:null)||om(e)||am(e)||im(e)||nm(e)},sm={transparent:[0,0,0,0],aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},av=function(e){for(var r=e.map,a=e.keys,n=a.length,i=0;i<n;i++){var o=a[i];if(Ae(o))throw Error("Tried to set map with object key");i<a.length-1?(r[o]==null&&(r[o]={}),r=r[o]):r[o]=e.value}},nv=function(e){for(var r=e.map,a=e.keys,n=a.length,i=0;i<n;i++){var o=a[i];if(Ae(o))throw Error("Tried to get map with object key");if(r=r[o],r==null)return r}return r},zn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function wn(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var no,Ju;function xn(){if(Ju)return no;Ju=1;function t(e){var r=typeof e;return e!=null&&(r=="object"||r=="function")}return no=t,no}var io,el;function um(){if(el)return io;el=1;var t=typeof zn=="object"&&zn&&zn.Object===Object&&zn;return io=t,io}var oo,tl;function Ii(){if(tl)return oo;tl=1;var t=um(),e=typeof self=="object"&&self&&self.Object===Object&&self,r=t||e||Function("return this")();return oo=r,oo}var so,rl;function lm(){if(rl)return so;rl=1;var t=Ii(),e=function(){return t.Date.now()};return so=e,so}var uo,al;function cm(){if(al)return uo;al=1;var t=/\s/;function e(r){for(var a=r.length;a--&&t.test(r.charAt(a)););return a}return uo=e,uo}var lo,nl;function fm(){if(nl)return lo;nl=1;var t=cm(),e=/^\s+/;function r(a){return a&&a.slice(0,t(a)+1).replace(e,"")}return lo=r,lo}var co,il;function du(){if(il)return co;il=1;var t=Ii(),e=t.Symbol;return co=e,co}var fo,ol;function vm(){if(ol)return fo;ol=1;var t=du(),e=Object.prototype,r=e.hasOwnProperty,a=e.toString,n=t?t.toStringTag:void 0;function i(o){var s=r.call(o,n),u=o[n];try{o[n]=void 0;var l=!0}catch{}var c=a.call(o);return l&&(s?o[n]=u:delete o[n]),c}return fo=i,fo}var vo,sl;function dm(){if(sl)return vo;sl=1;var t=Object.prototype,e=t.toString;function r(a){return e.call(a)}return vo=r,vo}var ho,ul;function iv(){if(ul)return ho;ul=1;var t=du(),e=vm(),r=dm(),a="[object Null]",n="[object Undefined]",i=t?t.toStringTag:void 0;function o(s){return s==null?s===void 0?n:a:i&&i in Object(s)?e(s):r(s)}return ho=o,ho}var po,ll;function hm(){if(ll)return po;ll=1;function t(e){return e!=null&&typeof e=="object"}return po=t,po}var go,cl;function En(){if(cl)return go;cl=1;var t=iv(),e=hm(),r="[object Symbol]";function a(n){return typeof n=="symbol"||e(n)&&t(n)==r}return go=a,go}var mo,fl;function pm(){if(fl)return mo;fl=1;var t=fm(),e=xn(),r=En(),a=NaN,n=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,o=/^0o[0-7]+$/i,s=parseInt;function u(l){if(typeof l=="number")return l;if(r(l))return a;if(e(l)){var c=typeof l.valueOf=="function"?l.valueOf():l;l=e(c)?c+"":c}if(typeof l!="string")return l===0?l:+l;l=t(l);var f=i.test(l);return f||o.test(l)?s(l.slice(2),f?2:8):n.test(l)?a:+l}return mo=u,mo}var yo,vl;function gm(){if(vl)return yo;vl=1;var t=xn(),e=lm(),r=pm(),a="Expected a function",n=Math.max,i=Math.min;function o(s,u,l){var c,f,v,h,d,m,p=0,g=!1,y=!1,b=!0;if(typeof s!="function")throw new TypeError(a);u=r(u)||0,t(l)&&(g=!!l.leading,y="maxWait"in l,v=y?n(r(l.maxWait)||0,u):v,b="trailing"in l?!!l.trailing:b);function w(D){var A=c,L=f;return c=f=void 0,p=D,h=s.apply(L,A),h}function E(D){return p=D,d=setTimeout(R,u),g?w(D):h}function C(D){var A=D-m,L=D-p,I=u-A;return y?i(I,v-L):I}function x(D){var A=D-m,L=D-p;return m===void 0||A>=u||A<0||y&&L>=v}function R(){var D=e();if(x(D))return S(D);d=setTimeout(R,C(D))}function S(D){return d=void 0,b&&c?w(D):(c=f=void 0,h)}function P(){d!==void 0&&clearTimeout(d),p=0,c=m=f=d=void 0}function k(){return d===void 0?h:S(e())}function B(){var D=e(),A=x(D);if(c=arguments,f=this,m=D,A){if(d===void 0)return E(m);if(y)return clearTimeout(d),d=setTimeout(R,u),w(m)}return d===void 0&&(d=setTimeout(R,u)),h}return B.cancel=P,B.flush=k,B}return yo=o,yo}var mm=gm(),Cn=wn(mm),bo=tt?tt.performance:null,ov=bo&&bo.now?function(){return bo.now()}:function(){return Date.now()},ym=function(){if(tt){if(tt.requestAnimationFrame)return function(t){tt.requestAnimationFrame(t)};if(tt.mozRequestAnimationFrame)return function(t){tt.mozRequestAnimationFrame(t)};if(tt.webkitRequestAnimationFrame)return function(t){tt.webkitRequestAnimationFrame(t)};if(tt.msRequestAnimationFrame)return function(t){tt.msRequestAnimationFrame(t)}}return function(t){t&&setTimeout(function(){t(ov())},1e3/60)}}(),bi=function(e){return ym(e)},cr=ov,Ur=9261,sv=65599,ya=5381,uv=function(e){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ur,a=r,n;n=e.next(),!n.done;)a=a*sv+n.value|0;return a},nn=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ur;return r*sv+e|0},on=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ya;return(r<<5)+r+e|0},bm=function(e,r){return e*2097152+r},wr=function(e){return e[0]*2097152+e[1]},Vn=function(e,r){return[nn(e[0],r[0]),on(e[1],r[1])]},dl=function(e,r){var a={value:0,done:!1},n=0,i=e.length,o={next:function(){return n<i?a.value=e[n++]:a.done=!0,a}};return uv(o,r)},Xr=function(e,r){var a={value:0,done:!1},n=0,i=e.length,o={next:function(){return n<i?a.value=e.charCodeAt(n++):a.done=!0,a}};return uv(o,r)},lv=function(){return wm(arguments)},wm=function(e){for(var r,a=0;a<e.length;a++){var n=e[a];a===0?r=Xr(n):r=Xr(n,r)}return r},hl=!0,xm=console.warn!=null,Em=console.trace!=null,hu=Number.MAX_SAFE_INTEGER||9007199254740991,cv=function(){return!0},wi=function(){return!1},pl=function(){return 0},pu=function(){},Ue=function(e){throw new Error(e)},fv=function(e){if(e!==void 0)hl=!!e;else return hl},Oe=function(e){fv()&&(xm?console.warn(e):(console.log(e),Em&&console.trace()))},Cm=function(e){return ge({},e)},Zt=function(e){return e==null?e:qe(e)?e.slice():Ae(e)?Cm(e):e},Tm=function(e){return e.slice()},vv=function(e,r){for(r=e="";e++<36;r+=e*51&52?(e^15?8^Math.random()*(e^20?16:4):4).toString(16):"-");return r},Sm={},dv=function(){return Sm},ht=function(e){var r=Object.keys(e);return function(a){for(var n={},i=0;i<r.length;i++){var o=r[i],s=a==null?void 0:a[o];n[o]=s===void 0?e[o]:s}return n}},Pr=function(e,r,a){for(var n=e.length-1;n>=0;n--)e[n]===r&&e.splice(n,1)},gu=function(e){e.splice(0,e.length)},Rm=function(e,r){for(var a=0;a<r.length;a++){var n=r[a];e.push(n)}},Rt=function(e,r,a){return a&&(r=ev(a,r)),e[r]},nr=function(e,r,a,n){a&&(r=ev(a,r)),e[r]=n},Pm=function(){function t(){Lr(this,t),this._obj={}}return Mr(t,[{key:"set",value:function(r,a){return this._obj[r]=a,this}},{key:"delete",value:function(r){return this._obj[r]=void 0,this}},{key:"clear",value:function(){this._obj={}}},{key:"has",value:function(r){return this._obj[r]!==void 0}},{key:"get",value:function(r){return this._obj[r]}}])}(),ir=typeof Map<"u"?Map:Pm,km="undefined",Dm=function(){function t(e){if(Lr(this,t),this._obj=Object.create(null),this.size=0,e!=null){var r;e.instanceString!=null&&e.instanceString()===this.instanceString()?r=e.toArray():r=e;for(var a=0;a<r.length;a++)this.add(r[a])}}return Mr(t,[{key:"instanceString",value:function(){return"set"}},{key:"add",value:function(r){var a=this._obj;a[r]!==1&&(a[r]=1,this.size++)}},{key:"delete",value:function(r){var a=this._obj;a[r]===1&&(a[r]=0,this.size--)}},{key:"clear",value:function(){this._obj=Object.create(null)}},{key:"has",value:function(r){return this._obj[r]===1}},{key:"toArray",value:function(){var r=this;return Object.keys(this._obj).filter(function(a){return r.has(a)})}},{key:"forEach",value:function(r,a){return this.toArray().forEach(r,a)}}])}(),La=(typeof Set>"u"?"undefined":nt(Set))!==km?Set:Dm,Oi=function(e,r){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(e===void 0||r===void 0||!fu(e)){Ue("An element must have a core reference and parameters set");return}var n=r.group;if(n==null&&(r.data&&r.data.source!=null&&r.data.target!=null?n="edges":n="nodes"),n!=="nodes"&&n!=="edges"){Ue("An element must be of type `nodes` or `edges`; you specified `"+n+"`");return}this.length=1,this[0]=this;var i=this._private={cy:e,single:!0,data:r.data||{},position:r.position||{x:0,y:0},autoWidth:void 0,autoHeight:void 0,autoPadding:void 0,compoundBoundsClean:!1,listeners:[],group:n,style:{},rstyle:{},styleCxts:[],styleKeys:{},removed:!0,selected:!!r.selected,selectable:r.selectable===void 0?!0:!!r.selectable,locked:!!r.locked,grabbed:!1,grabbable:r.grabbable===void 0?!0:!!r.grabbable,pannable:r.pannable===void 0?n==="edges":!!r.pannable,active:!1,classes:new La,animation:{current:[],queue:[]},rscratch:{},scratch:r.scratch||{},edges:[],children:[],parent:r.parent&&r.parent.isNode()?r.parent:null,traversalCache:{},backgrounding:!1,bbCache:null,bbCacheShift:{x:0,y:0},bodyBounds:null,overlayBounds:null,labelBounds:{all:null,source:null,target:null,main:null},arrowBounds:{source:null,target:null,"mid-source":null,"mid-target":null}};if(i.position.x==null&&(i.position.x=0),i.position.y==null&&(i.position.y=0),r.renderedPosition){var o=r.renderedPosition,s=e.pan(),u=e.zoom();i.position={x:(o.x-s.x)/u,y:(o.y-s.y)/u}}var l=[];qe(r.classes)?l=r.classes:de(r.classes)&&(l=r.classes.split(/\s+/));for(var c=0,f=l.length;c<f;c++){var v=l[c];!v||v===""||i.classes.add(v)}this.createEmitter(),(a===void 0||a)&&this.restore();var h=r.style||r.css;h&&(Oe("Setting a `style` bypass at element creation should be done only when absolutely necessary.  Try to use the stylesheet instead."),this.style(h))},gl=function(e){return e={bfs:e.bfs||!e.dfs,dfs:e.dfs||!e.bfs},function(a,n,i){var o;Ae(a)&&!At(a)&&(o=a,a=o.roots||o.root,n=o.visit,i=o.directed),i=arguments.length===2&&!Ke(n)?n:i,n=Ke(n)?n:function(){};for(var s=this._private.cy,u=a=de(a)?this.filter(a):a,l=[],c=[],f={},v={},h={},d=0,m,p=this.byGroup(),g=p.nodes,y=p.edges,b=0;b<u.length;b++){var w=u[b],E=w.id();w.isNode()&&(l.unshift(w),e.bfs&&(h[E]=!0,c.push(w)),v[E]=0)}for(var C=function(){var D=e.bfs?l.shift():l.pop(),A=D.id();if(e.dfs){if(h[A])return 0;h[A]=!0,c.push(D)}var L=v[A],I=f[A],M=I!=null?I.source():null,O=I!=null?I.target():null,V=I==null?void 0:D.same(M)?O[0]:M[0],W;if(W=n(D,I,V,d++,L),W===!0)return m=D,1;if(W===!1)return 1;for(var N=D.connectedEdges().filter(function(G){return(!i||G.source().same(D))&&y.has(G)}),z=0;z<N.length;z++){var X=N[z],j=X.connectedNodes().filter(function(G){return!G.same(D)&&g.has(G)}),J=j.id();j.length!==0&&!h[J]&&(j=j[0],l.push(j),e.bfs&&(h[J]=!0,c.push(j)),f[J]=X,v[J]=v[A]+1)}},x;l.length!==0&&(x=C(),!(x!==0&&x===1)););for(var R=s.collection(),S=0;S<c.length;S++){var P=c[S],k=f[P.id()];k!=null&&R.push(k),R.push(P)}return{path:s.collection(R),found:s.collection(m)}}},sn={breadthFirstSearch:gl({bfs:!0}),depthFirstSearch:gl({dfs:!0})};sn.bfs=sn.breadthFirstSearch;sn.dfs=sn.depthFirstSearch;var ni={exports:{}},Bm=ni.exports,ml;function Am(){return ml||(ml=1,function(t,e){(function(){var r,a,n,i,o,s,u,l,c,f,v,h,d,m,p;n=Math.floor,f=Math.min,a=function(g,y){return g<y?-1:g>y?1:0},c=function(g,y,b,w,E){var C;if(b==null&&(b=0),E==null&&(E=a),b<0)throw new Error("lo must be non-negative");for(w==null&&(w=g.length);b<w;)C=n((b+w)/2),E(y,g[C])<0?w=C:b=C+1;return[].splice.apply(g,[b,b-b].concat(y)),y},s=function(g,y,b){return b==null&&(b=a),g.push(y),m(g,0,g.length-1,b)},o=function(g,y){var b,w;return y==null&&(y=a),b=g.pop(),g.length?(w=g[0],g[0]=b,p(g,0,y)):w=b,w},l=function(g,y,b){var w;return b==null&&(b=a),w=g[0],g[0]=y,p(g,0,b),w},u=function(g,y,b){var w;return b==null&&(b=a),g.length&&b(g[0],y)<0&&(w=[g[0],y],y=w[0],g[0]=w[1],p(g,0,b)),y},i=function(g,y){var b,w,E,C,x,R;for(y==null&&(y=a),C=(function(){R=[];for(var S=0,P=n(g.length/2);0<=P?S<P:S>P;0<=P?S++:S--)R.push(S);return R}).apply(this).reverse(),x=[],w=0,E=C.length;w<E;w++)b=C[w],x.push(p(g,b,y));return x},d=function(g,y,b){var w;if(b==null&&(b=a),w=g.indexOf(y),w!==-1)return m(g,0,w,b),p(g,w,b)},v=function(g,y,b){var w,E,C,x,R;if(b==null&&(b=a),E=g.slice(0,y),!E.length)return E;for(i(E,b),R=g.slice(y),C=0,x=R.length;C<x;C++)w=R[C],u(E,w,b);return E.sort(b).reverse()},h=function(g,y,b){var w,E,C,x,R,S,P,k,B;if(b==null&&(b=a),y*10<=g.length){if(C=g.slice(0,y).sort(b),!C.length)return C;for(E=C[C.length-1],P=g.slice(y),x=0,S=P.length;x<S;x++)w=P[x],b(w,E)<0&&(c(C,w,0,null,b),C.pop(),E=C[C.length-1]);return C}for(i(g,b),B=[],R=0,k=f(y,g.length);0<=k?R<k:R>k;0<=k?++R:--R)B.push(o(g,b));return B},m=function(g,y,b,w){var E,C,x;for(w==null&&(w=a),E=g[b];b>y;){if(x=b-1>>1,C=g[x],w(E,C)<0){g[b]=C,b=x;continue}break}return g[b]=E},p=function(g,y,b){var w,E,C,x,R;for(b==null&&(b=a),E=g.length,R=y,C=g[y],w=2*y+1;w<E;)x=w+1,x<E&&!(b(g[w],g[x])<0)&&(w=x),g[y]=g[w],y=w,w=2*y+1;return g[y]=C,m(g,R,y,b)},r=function(){g.push=s,g.pop=o,g.replace=l,g.pushpop=u,g.heapify=i,g.updateItem=d,g.nlargest=v,g.nsmallest=h;function g(y){this.cmp=y??a,this.nodes=[]}return g.prototype.push=function(y){return s(this.nodes,y,this.cmp)},g.prototype.pop=function(){return o(this.nodes,this.cmp)},g.prototype.peek=function(){return this.nodes[0]},g.prototype.contains=function(y){return this.nodes.indexOf(y)!==-1},g.prototype.replace=function(y){return l(this.nodes,y,this.cmp)},g.prototype.pushpop=function(y){return u(this.nodes,y,this.cmp)},g.prototype.heapify=function(){return i(this.nodes,this.cmp)},g.prototype.updateItem=function(y){return d(this.nodes,y,this.cmp)},g.prototype.clear=function(){return this.nodes=[]},g.prototype.empty=function(){return this.nodes.length===0},g.prototype.size=function(){return this.nodes.length},g.prototype.clone=function(){var y;return y=new g,y.nodes=this.nodes.slice(0),y},g.prototype.toArray=function(){return this.nodes.slice(0)},g.prototype.insert=g.prototype.push,g.prototype.top=g.prototype.peek,g.prototype.front=g.prototype.peek,g.prototype.has=g.prototype.contains,g.prototype.copy=g.prototype.clone,g}(),function(g,y){return t.exports=y()}(this,function(){return r})}).call(Bm)}(ni)),ni.exports}var wo,yl;function Lm(){return yl||(yl=1,wo=Am()),wo}var Mm=Lm(),Tn=wn(Mm),Im=ht({root:null,weight:function(e){return 1},directed:!1}),Om={dijkstra:function(e){if(!Ae(e)){var r=arguments;e={root:r[0],weight:r[1],directed:r[2]}}var a=Im(e),n=a.root,i=a.weight,o=a.directed,s=this,u=i,l=de(n)?this.filter(n)[0]:n[0],c={},f={},v={},h=this.byGroup(),d=h.nodes,m=h.edges;m.unmergeBy(function(L){return L.isLoop()});for(var p=function(I){return c[I.id()]},g=function(I,M){c[I.id()]=M,y.updateItem(I)},y=new Tn(function(L,I){return p(L)-p(I)}),b=0;b<d.length;b++){var w=d[b];c[w.id()]=w.same(l)?0:1/0,y.push(w)}for(var E=function(I,M){for(var O=(o?I.edgesTo(M):I.edgesWith(M)).intersect(m),V=1/0,W,N=0;N<O.length;N++){var z=O[N],X=u(z);(X<V||!W)&&(V=X,W=z)}return{edge:W,dist:V}};y.size()>0;){var C=y.pop(),x=p(C),R=C.id();if(v[R]=x,x!==1/0)for(var S=C.neighborhood().intersect(d),P=0;P<S.length;P++){var k=S[P],B=k.id(),D=E(C,k),A=x+D.dist;A<p(k)&&(g(k,A),f[B]={node:C,edge:D.edge})}}return{distanceTo:function(I){var M=de(I)?d.filter(I)[0]:I[0];return v[M.id()]},pathTo:function(I){var M=de(I)?d.filter(I)[0]:I[0],O=[],V=M,W=V.id();if(M.length>0)for(O.unshift(M);f[W];){var N=f[W];O.unshift(N.edge),O.unshift(N.node),V=N.node,W=V.id()}return s.spawn(O)}}}},Nm={kruskal:function(e){e=e||function(b){return 1};for(var r=this.byGroup(),a=r.nodes,n=r.edges,i=a.length,o=new Array(i),s=a,u=function(w){for(var E=0;E<o.length;E++){var C=o[E];if(C.has(w))return E}},l=0;l<i;l++)o[l]=this.spawn(a[l]);for(var c=n.sort(function(b,w){return e(b)-e(w)}),f=0;f<c.length;f++){var v=c[f],h=v.source()[0],d=v.target()[0],m=u(h),p=u(d),g=o[m],y=o[p];m!==p&&(s.merge(v),g.merge(y),o.splice(p,1))}return s}},Fm=ht({root:null,goal:null,weight:function(e){return 1},heuristic:function(e){return 0},directed:!1}),zm={aStar:function(e){var r=this.cy(),a=Fm(e),n=a.root,i=a.goal,o=a.heuristic,s=a.directed,u=a.weight;n=r.collection(n)[0],i=r.collection(i)[0];var l=n.id(),c=i.id(),f={},v={},h={},d=new Tn(function(W,N){return v[W.id()]-v[N.id()]}),m=new La,p={},g={},y=function(N,z){d.push(N),m.add(z)},b,w,E=function(){b=d.pop(),w=b.id(),m.delete(w)},C=function(N){return m.has(N)};y(n,l),f[l]=0,v[l]=o(n);for(var x=0;d.size()>0;){if(E(),x++,w===c){for(var R=[],S=i,P=c,k=g[P];R.unshift(S),k!=null&&R.unshift(k),S=p[P],S!=null;)P=S.id(),k=g[P];return{found:!0,distance:f[w],path:this.spawn(R),steps:x}}h[w]=!0;for(var B=b._private.edges,D=0;D<B.length;D++){var A=B[D];if(this.hasElementWithId(A.id())&&!(s&&A.data("source")!==w)){var L=A.source(),I=A.target(),M=L.id()!==w?L:I,O=M.id();if(this.hasElementWithId(O)&&!h[O]){var V=f[w]+u(A);if(!C(O)){f[O]=V,v[O]=V+o(M),y(M,O),p[O]=b,g[O]=A;continue}V<f[O]&&(f[O]=V,v[O]=V+o(M),p[O]=b,g[O]=A)}}}}return{found:!1,distance:void 0,path:void 0,steps:x}}},Vm=ht({weight:function(e){return 1},directed:!1}),qm={floydWarshall:function(e){for(var r=this.cy(),a=Vm(e),n=a.weight,i=a.directed,o=n,s=this.byGroup(),u=s.nodes,l=s.edges,c=u.length,f=c*c,v=function(X){return u.indexOf(X)},h=function(X){return u[X]},d=new Array(f),m=0;m<f;m++){var p=m%c,g=(m-p)/c;g===p?d[m]=0:d[m]=1/0}for(var y=new Array(f),b=new Array(f),w=0;w<l.length;w++){var E=l[w],C=E.source()[0],x=E.target()[0];if(C!==x){var R=v(C),S=v(x),P=R*c+S,k=o(E);if(d[P]>k&&(d[P]=k,y[P]=S,b[P]=E),!i){var B=S*c+R;!i&&d[B]>k&&(d[B]=k,y[B]=R,b[B]=E)}}}for(var D=0;D<c;D++)for(var A=0;A<c;A++)for(var L=A*c+D,I=0;I<c;I++){var M=A*c+I,O=D*c+I;d[L]+d[O]<d[M]&&(d[M]=d[L]+d[O],y[M]=y[L])}var V=function(X){return(de(X)?r.filter(X):X)[0]},W=function(X){return v(V(X))},N={distance:function(X,j){var J=W(X),G=W(j);return d[J*c+G]},path:function(X,j){var J=W(X),G=W(j),Z=h(J);if(J===G)return Z.collection();if(y[J*c+G]==null)return r.collection();var ae=r.collection(),Q=J,F;for(ae.merge(Z);J!==G;)Q=J,J=y[J*c+G],F=b[Q*c+J],ae.merge(F),ae.merge(h(J));return ae}};return N}},_m=ht({weight:function(e){return 1},directed:!1,root:null}),$m={bellmanFord:function(e){var r=this,a=_m(e),n=a.weight,i=a.directed,o=a.root,s=n,u=this,l=this.cy(),c=this.byGroup(),f=c.edges,v=c.nodes,h=v.length,d=new ir,m=!1,p=[];o=l.collection(o)[0],f.unmergeBy(function(Ne){return Ne.isLoop()});for(var g=f.length,y=function(ue){var le=d.get(ue.id());return le||(le={},d.set(ue.id(),le)),le},b=function(ue){return(de(ue)?l.$(ue):ue)[0]},w=function(ue){return y(b(ue)).dist},E=function(ue){for(var le=arguments.length>1&&arguments[1]!==void 0?arguments[1]:o,he=b(ue),me=[],pe=he;;){if(pe==null)return r.spawn();var be=y(pe),Ee=be.edge,ke=be.pred;if(me.unshift(pe[0]),pe.same(le)&&me.length>0)break;Ee!=null&&me.unshift(Ee),pe=ke}return u.spawn(me)},C=0;C<h;C++){var x=v[C],R=y(x);x.same(o)?R.dist=0:R.dist=1/0,R.pred=null,R.edge=null}for(var S=!1,P=function(ue,le,he,me,pe,be){var Ee=me.dist+be;Ee<pe.dist&&!he.same(me.edge)&&(pe.dist=Ee,pe.pred=ue,pe.edge=he,S=!0)},k=1;k<h;k++){S=!1;for(var B=0;B<g;B++){var D=f[B],A=D.source(),L=D.target(),I=s(D),M=y(A),O=y(L);P(A,L,D,M,O,I),i||P(L,A,D,O,M,I)}if(!S)break}if(S)for(var V=[],W=0;W<g;W++){var N=f[W],z=N.source(),X=N.target(),j=s(N),J=y(z).dist,G=y(X).dist;if(J+j<G||!i&&G+j<J)if(m||(Oe("Graph contains a negative weight cycle for Bellman-Ford"),m=!0),e.findNegativeWeightCycles!==!1){var Z=[];J+j<G&&Z.push(z),!i&&G+j<J&&Z.push(X);for(var ae=Z.length,Q=0;Q<ae;Q++){var F=Z[Q],q=[F];q.push(y(F).edge);for(var U=y(F).pred;q.indexOf(U)===-1;)q.push(U),q.push(y(U).edge),U=y(U).pred;q=q.slice(q.indexOf(U));for(var re=q[0].id(),oe=0,xe=2;xe<q.length;xe+=2)q[xe].id()<re&&(re=q[xe].id(),oe=xe);q=q.slice(oe).concat(q.slice(0,oe)),q.push(q[0]);var We=q.map(function(Ne){return Ne.id()}).join(",");V.indexOf(We)===-1&&(p.push(u.spawn(q)),V.push(We))}}else break}return{distanceTo:w,pathTo:E,hasNegativeWeightCycle:m,negativeWeightCycles:p}}},Wm=Math.sqrt(2),Gm=function(e,r,a){a.length===0&&Ue("Karger-Stein must be run on a connected (sub)graph");for(var n=a[e],i=n[1],o=n[2],s=r[i],u=r[o],l=a,c=l.length-1;c>=0;c--){var f=l[c],v=f[1],h=f[2];(r[v]===s&&r[h]===u||r[v]===u&&r[h]===s)&&l.splice(c,1)}for(var d=0;d<l.length;d++){var m=l[d];m[1]===u?(l[d]=m.slice(),l[d][1]=s):m[2]===u&&(l[d]=m.slice(),l[d][2]=s)}for(var p=0;p<r.length;p++)r[p]===u&&(r[p]=s);return l},xo=function(e,r,a,n){for(;a>n;){var i=Math.floor(Math.random()*r.length);r=Gm(i,e,r),a--}return r},Um={kargerStein:function(){var e=this,r=this.byGroup(),a=r.nodes,n=r.edges;n.unmergeBy(function(O){return O.isLoop()});var i=a.length,o=n.length,s=Math.ceil(Math.pow(Math.log(i)/Math.LN2,2)),u=Math.floor(i/Wm);if(i<2){Ue("At least 2 nodes are required for Karger-Stein algorithm");return}for(var l=[],c=0;c<o;c++){var f=n[c];l.push([c,a.indexOf(f.source()),a.indexOf(f.target())])}for(var v=1/0,h=[],d=new Array(i),m=new Array(i),p=new Array(i),g=function(V,W){for(var N=0;N<i;N++)W[N]=V[N]},y=0;y<=s;y++){for(var b=0;b<i;b++)m[b]=b;var w=xo(m,l.slice(),i,u),E=w.slice();g(m,p);var C=xo(m,w,u,2),x=xo(p,E,u,2);C.length<=x.length&&C.length<v?(v=C.length,h=C,g(m,d)):x.length<=C.length&&x.length<v&&(v=x.length,h=x,g(p,d))}for(var R=this.spawn(h.map(function(O){return n[O[0]]})),S=this.spawn(),P=this.spawn(),k=d[0],B=0;B<d.length;B++){var D=d[B],A=a[B];D===k?S.merge(A):P.merge(A)}var L=function(V){var W=e.spawn();return V.forEach(function(N){W.merge(N),N.connectedEdges().forEach(function(z){e.contains(z)&&!R.contains(z)&&W.merge(z)})}),W},I=[L(S),L(P)],M={cut:R,components:I,partition1:S,partition2:P};return M}},Hm=function(e){return{x:e.x,y:e.y}},Ni=function(e,r,a){return{x:e.x*r+a.x,y:e.y*r+a.y}},hv=function(e,r,a){return{x:(e.x-a.x)/r,y:(e.y-a.y)/r}},wa=function(e){return{x:e[0],y:e[1]}},Km=function(e){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,n=1/0,i=r;i<a;i++){var o=e[i];isFinite(o)&&(n=Math.min(o,n))}return n},Ym=function(e){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,n=-1/0,i=r;i<a;i++){var o=e[i];isFinite(o)&&(n=Math.max(o,n))}return n},Xm=function(e){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,n=0,i=0,o=r;o<a;o++){var s=e[o];isFinite(s)&&(n+=s,i++)}return n/i},Zm=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0;n?e=e.slice(r,a):(a<e.length&&e.splice(a,e.length-a),r>0&&e.splice(0,r));for(var s=0,u=e.length-1;u>=0;u--){var l=e[u];o?isFinite(l)||(e[u]=-1/0,s++):e.splice(u,1)}i&&e.sort(function(v,h){return v-h});var c=e.length,f=Math.floor(c/2);return c%2!==0?e[f+1+s]:(e[f-1+s]+e[f+s])/2},Qm=function(e){return Math.PI*e/180},qn=function(e,r){return Math.atan2(r,e)-Math.PI/2},mu=Math.log2||function(t){return Math.log(t)/Math.log(2)},yu=function(e){return e>0?1:e<0?-1:0},Zr=function(e,r){return Math.sqrt($r(e,r))},$r=function(e,r){var a=r.x-e.x,n=r.y-e.y;return a*a+n*n},jm=function(e){for(var r=e.length,a=0,n=0;n<r;n++)a+=e[n];for(var i=0;i<r;i++)e[i]=e[i]/a;return e},st=function(e,r,a,n){return(1-n)*(1-n)*e+2*(1-n)*n*r+n*n*a},Ca=function(e,r,a,n){return{x:st(e.x,r.x,a.x,n),y:st(e.y,r.y,a.y,n)}},Jm=function(e,r,a,n){var i={x:r.x-e.x,y:r.y-e.y},o=Zr(e,r),s={x:i.x/o,y:i.y/o};return a=a??0,n=n??a*o,{x:e.x+s.x*n,y:e.y+s.y*n}},un=function(e,r,a){return Math.max(e,Math.min(a,r))},Dt=function(e){if(e==null)return{x1:1/0,y1:1/0,x2:-1/0,y2:-1/0,w:0,h:0};if(e.x1!=null&&e.y1!=null){if(e.x2!=null&&e.y2!=null&&e.x2>=e.x1&&e.y2>=e.y1)return{x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,w:e.x2-e.x1,h:e.y2-e.y1};if(e.w!=null&&e.h!=null&&e.w>=0&&e.h>=0)return{x1:e.x1,y1:e.y1,x2:e.x1+e.w,y2:e.y1+e.h,w:e.w,h:e.h}}},ey=function(e){return{x1:e.x1,x2:e.x2,w:e.w,y1:e.y1,y2:e.y2,h:e.h}},ty=function(e){e.x1=1/0,e.y1=1/0,e.x2=-1/0,e.y2=-1/0,e.w=0,e.h=0},ry=function(e,r,a){return{x1:e.x1+r,x2:e.x2+r,y1:e.y1+a,y2:e.y2+a,w:e.w,h:e.h}},pv=function(e,r){e.x1=Math.min(e.x1,r.x1),e.x2=Math.max(e.x2,r.x2),e.w=e.x2-e.x1,e.y1=Math.min(e.y1,r.y1),e.y2=Math.max(e.y2,r.y2),e.h=e.y2-e.y1},ay=function(e,r,a){e.x1=Math.min(e.x1,r),e.x2=Math.max(e.x2,r),e.w=e.x2-e.x1,e.y1=Math.min(e.y1,a),e.y2=Math.max(e.y2,a),e.h=e.y2-e.y1},ii=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return e.x1-=r,e.x2+=r,e.y1-=r,e.y2+=r,e.w=e.x2-e.x1,e.h=e.y2-e.y1,e},oi=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0],a,n,i,o;if(r.length===1)a=n=i=o=r[0];else if(r.length===2)a=i=r[0],o=n=r[1];else if(r.length===4){var s=rt(r,4);a=s[0],n=s[1],i=s[2],o=s[3]}return e.x1-=o,e.x2+=n,e.y1-=a,e.y2+=i,e.w=e.x2-e.x1,e.h=e.y2-e.y1,e},bl=function(e,r){e.x1=r.x1,e.y1=r.y1,e.x2=r.x2,e.y2=r.y2,e.w=e.x2-e.x1,e.h=e.y2-e.y1},bu=function(e,r){return!(e.x1>r.x2||r.x1>e.x2||e.x2<r.x1||r.x2<e.x1||e.y2<r.y1||r.y2<e.y1||e.y1>r.y2||r.y1>e.y2)},ka=function(e,r,a){return e.x1<=r&&r<=e.x2&&e.y1<=a&&a<=e.y2},ny=function(e,r){return ka(e,r.x,r.y)},iy=function(e,r){return ka(e,r.x1,r.y1)&&ka(e,r.x2,r.y2)},gv=function(e,r,a,n,i,o,s){var u=arguments.length>7&&arguments[7]!==void 0?arguments[7]:"auto",l=u==="auto"?kr(i,o):u,c=i/2,f=o/2;l=Math.min(l,c,f);var v=l!==c,h=l!==f,d;if(v){var m=a-c+l-s,p=n-f-s,g=a+c-l+s,y=p;if(d=Er(e,r,a,n,m,p,g,y,!1),d.length>0)return d}if(h){var b=a+c+s,w=n-f+l-s,E=b,C=n+f-l+s;if(d=Er(e,r,a,n,b,w,E,C,!1),d.length>0)return d}if(v){var x=a-c+l-s,R=n+f+s,S=a+c-l+s,P=R;if(d=Er(e,r,a,n,x,R,S,P,!1),d.length>0)return d}if(h){var k=a-c-s,B=n-f+l-s,D=k,A=n+f-l+s;if(d=Er(e,r,a,n,k,B,D,A,!1),d.length>0)return d}var L;{var I=a-c+l,M=n-f+l;if(L=Qa(e,r,a,n,I,M,l+s),L.length>0&&L[0]<=I&&L[1]<=M)return[L[0],L[1]]}{var O=a+c-l,V=n-f+l;if(L=Qa(e,r,a,n,O,V,l+s),L.length>0&&L[0]>=O&&L[1]<=V)return[L[0],L[1]]}{var W=a+c-l,N=n+f-l;if(L=Qa(e,r,a,n,W,N,l+s),L.length>0&&L[0]>=W&&L[1]>=N)return[L[0],L[1]]}{var z=a-c+l,X=n+f-l;if(L=Qa(e,r,a,n,z,X,l+s),L.length>0&&L[0]<=z&&L[1]>=X)return[L[0],L[1]]}return[]},oy=function(e,r,a,n,i,o,s){var u=s,l=Math.min(a,i),c=Math.max(a,i),f=Math.min(n,o),v=Math.max(n,o);return l-u<=e&&e<=c+u&&f-u<=r&&r<=v+u},sy=function(e,r,a,n,i,o,s,u,l){var c={x1:Math.min(a,s,i)-l,x2:Math.max(a,s,i)+l,y1:Math.min(n,u,o)-l,y2:Math.max(n,u,o)+l};return!(e<c.x1||e>c.x2||r<c.y1||r>c.y2)},uy=function(e,r,a,n){a-=n;var i=r*r-4*e*a;if(i<0)return[];var o=Math.sqrt(i),s=2*e,u=(-r+o)/s,l=(-r-o)/s;return[u,l]},ly=function(e,r,a,n,i){var o=1e-5;e===0&&(e=o),r/=e,a/=e,n/=e;var s,u,l,c,f,v,h,d;if(u=(3*a-r*r)/9,l=-(27*n)+r*(9*a-2*(r*r)),l/=54,s=u*u*u+l*l,i[1]=0,h=r/3,s>0){f=l+Math.sqrt(s),f=f<0?-Math.pow(-f,1/3):Math.pow(f,1/3),v=l-Math.sqrt(s),v=v<0?-Math.pow(-v,1/3):Math.pow(v,1/3),i[0]=-h+f+v,h+=(f+v)/2,i[4]=i[2]=-h,h=Math.sqrt(3)*(-v+f)/2,i[3]=h,i[5]=-h;return}if(i[5]=i[3]=0,s===0){d=l<0?-Math.pow(-l,1/3):Math.pow(l,1/3),i[0]=-h+2*d,i[4]=i[2]=-(d+h);return}u=-u,c=u*u*u,c=Math.acos(l/Math.sqrt(c)),d=2*Math.sqrt(u),i[0]=-h+d*Math.cos(c/3),i[2]=-h+d*Math.cos((c+2*Math.PI)/3),i[4]=-h+d*Math.cos((c+4*Math.PI)/3)},cy=function(e,r,a,n,i,o,s,u){var l=1*a*a-4*a*i+2*a*s+4*i*i-4*i*s+s*s+n*n-4*n*o+2*n*u+4*o*o-4*o*u+u*u,c=1*9*a*i-3*a*a-3*a*s-6*i*i+3*i*s+9*n*o-3*n*n-3*n*u-6*o*o+3*o*u,f=1*3*a*a-6*a*i+a*s-a*e+2*i*i+2*i*e-s*e+3*n*n-6*n*o+n*u-n*r+2*o*o+2*o*r-u*r,v=1*a*i-a*a+a*e-i*e+n*o-n*n+n*r-o*r,h=[];ly(l,c,f,v,h);for(var d=1e-7,m=[],p=0;p<6;p+=2)Math.abs(h[p+1])<d&&h[p]>=0&&h[p]<=1&&m.push(h[p]);m.push(1),m.push(0);for(var g=-1,y,b,w,E=0;E<m.length;E++)y=Math.pow(1-m[E],2)*a+2*(1-m[E])*m[E]*i+m[E]*m[E]*s,b=Math.pow(1-m[E],2)*n+2*(1-m[E])*m[E]*o+m[E]*m[E]*u,w=Math.pow(y-e,2)+Math.pow(b-r,2),g>=0?w<g&&(g=w):g=w;return g},fy=function(e,r,a,n,i,o){var s=[e-a,r-n],u=[i-a,o-n],l=u[0]*u[0]+u[1]*u[1],c=s[0]*s[0]+s[1]*s[1],f=s[0]*u[0]+s[1]*u[1],v=f*f/l;return f<0?c:v>l?(e-i)*(e-i)+(r-o)*(r-o):c-v},Pt=function(e,r,a){for(var n,i,o,s,u,l=0,c=0;c<a.length/2;c++)if(n=a[c*2],i=a[c*2+1],c+1<a.length/2?(o=a[(c+1)*2],s=a[(c+1)*2+1]):(o=a[(c+1-a.length/2)*2],s=a[(c+1-a.length/2)*2+1]),!(n==e&&o==e))if(n>=e&&e>=o||n<=e&&e<=o)u=(e-n)/(o-n)*(s-i)+i,u>r&&l++;else continue;return l%2!==0},fr=function(e,r,a,n,i,o,s,u,l){var c=new Array(a.length),f;u[0]!=null?(f=Math.atan(u[1]/u[0]),u[0]<0?f=f+Math.PI/2:f=-f-Math.PI/2):f=u;for(var v=Math.cos(-f),h=Math.sin(-f),d=0;d<c.length/2;d++)c[d*2]=o/2*(a[d*2]*v-a[d*2+1]*h),c[d*2+1]=s/2*(a[d*2+1]*v+a[d*2]*h),c[d*2]+=n,c[d*2+1]+=i;var m;if(l>0){var p=Ei(c,-l);m=xi(p)}else m=c;return Pt(e,r,m)},vy=function(e,r,a,n,i,o,s,u){for(var l=new Array(a.length*2),c=0;c<u.length;c++){var f=u[c];l[c*4+0]=f.startX,l[c*4+1]=f.startY,l[c*4+2]=f.stopX,l[c*4+3]=f.stopY;var v=Math.pow(f.cx-e,2)+Math.pow(f.cy-r,2);if(v<=Math.pow(f.radius,2))return!0}return Pt(e,r,l)},xi=function(e){for(var r=new Array(e.length/2),a,n,i,o,s,u,l,c,f=0;f<e.length/4;f++){a=e[f*4],n=e[f*4+1],i=e[f*4+2],o=e[f*4+3],f<e.length/4-1?(s=e[(f+1)*4],u=e[(f+1)*4+1],l=e[(f+1)*4+2],c=e[(f+1)*4+3]):(s=e[0],u=e[1],l=e[2],c=e[3]);var v=Er(a,n,i,o,s,u,l,c,!0);r[f*2]=v[0],r[f*2+1]=v[1]}return r},Ei=function(e,r){for(var a=new Array(e.length*2),n,i,o,s,u=0;u<e.length/2;u++){n=e[u*2],i=e[u*2+1],u<e.length/2-1?(o=e[(u+1)*2],s=e[(u+1)*2+1]):(o=e[0],s=e[1]);var l=s-i,c=-(o-n),f=Math.sqrt(l*l+c*c),v=l/f,h=c/f;a[u*4]=n+v*r,a[u*4+1]=i+h*r,a[u*4+2]=o+v*r,a[u*4+3]=s+h*r}return a},dy=function(e,r,a,n,i,o){var s=a-e,u=n-r;s/=i,u/=o;var l=Math.sqrt(s*s+u*u),c=l-1;if(c<0)return[];var f=c/l;return[(a-e)*f+e,(n-r)*f+r]},Yr=function(e,r,a,n,i,o,s){return e-=i,r-=o,e/=a/2+s,r/=n/2+s,e*e+r*r<=1},Qa=function(e,r,a,n,i,o,s){var u=[a-e,n-r],l=[e-i,r-o],c=u[0]*u[0]+u[1]*u[1],f=2*(l[0]*u[0]+l[1]*u[1]),v=l[0]*l[0]+l[1]*l[1]-s*s,h=f*f-4*c*v;if(h<0)return[];var d=(-f+Math.sqrt(h))/(2*c),m=(-f-Math.sqrt(h))/(2*c),p=Math.min(d,m),g=Math.max(d,m),y=[];if(p>=0&&p<=1&&y.push(p),g>=0&&g<=1&&y.push(g),y.length===0)return[];var b=y[0]*u[0]+e,w=y[0]*u[1]+r;if(y.length>1){if(y[0]==y[1])return[b,w];var E=y[1]*u[0]+e,C=y[1]*u[1]+r;return[b,w,E,C]}else return[b,w]},Eo=function(e,r,a){return r<=e&&e<=a||a<=e&&e<=r?e:e<=r&&r<=a||a<=r&&r<=e?r:a},Er=function(e,r,a,n,i,o,s,u,l){var c=e-i,f=a-e,v=s-i,h=r-o,d=n-r,m=u-o,p=v*h-m*c,g=f*h-d*c,y=m*f-v*d;if(y!==0){var b=p/y,w=g/y,E=.001,C=0-E,x=1+E;return C<=b&&b<=x&&C<=w&&w<=x?[e+b*f,r+b*d]:l?[e+b*f,r+b*d]:[]}else return p===0||g===0?Eo(e,a,s)===s?[s,u]:Eo(e,a,i)===i?[i,o]:Eo(i,s,a)===a?[a,n]:[]:[]},ln=function(e,r,a,n,i,o,s,u){var l=[],c,f=new Array(a.length),v=!0;o==null&&(v=!1);var h;if(v){for(var d=0;d<f.length/2;d++)f[d*2]=a[d*2]*o+n,f[d*2+1]=a[d*2+1]*s+i;if(u>0){var m=Ei(f,-u);h=xi(m)}else h=f}else h=a;for(var p,g,y,b,w=0;w<h.length/2;w++)p=h[w*2],g=h[w*2+1],w<h.length/2-1?(y=h[(w+1)*2],b=h[(w+1)*2+1]):(y=h[0],b=h[1]),c=Er(e,r,n,i,p,g,y,b),c.length!==0&&l.push(c[0],c[1]);return l},hy=function(e,r,a,n,i,o,s,u,l){var c=[],f,v=new Array(a.length*2);l.forEach(function(y,b){b===0?(v[v.length-2]=y.startX,v[v.length-1]=y.startY):(v[b*4-2]=y.startX,v[b*4-1]=y.startY),v[b*4]=y.stopX,v[b*4+1]=y.stopY,f=Qa(e,r,n,i,y.cx,y.cy,y.radius),f.length!==0&&c.push(f[0],f[1])});for(var h=0;h<v.length/4;h++)f=Er(e,r,n,i,v[h*4],v[h*4+1],v[h*4+2],v[h*4+3],!1),f.length!==0&&c.push(f[0],f[1]);if(c.length>2){for(var d=[c[0],c[1]],m=Math.pow(d[0]-e,2)+Math.pow(d[1]-r,2),p=1;p<c.length/2;p++){var g=Math.pow(c[p*2]-e,2)+Math.pow(c[p*2+1]-r,2);g<=m&&(d[0]=c[p*2],d[1]=c[p*2+1],m=g)}return d}return c},_n=function(e,r,a){var n=[e[0]-r[0],e[1]-r[1]],i=Math.sqrt(n[0]*n[0]+n[1]*n[1]),o=(i-a)/i;return o<0&&(o=1e-5),[r[0]+o*n[0],r[1]+o*n[1]]},wt=function(e,r){var a=Vs(e,r);return a=mv(a),a},mv=function(e){for(var r,a,n=e.length/2,i=1/0,o=1/0,s=-1/0,u=-1/0,l=0;l<n;l++)r=e[2*l],a=e[2*l+1],i=Math.min(i,r),s=Math.max(s,r),o=Math.min(o,a),u=Math.max(u,a);for(var c=2/(s-i),f=2/(u-o),v=0;v<n;v++)r=e[2*v]=e[2*v]*c,a=e[2*v+1]=e[2*v+1]*f,i=Math.min(i,r),s=Math.max(s,r),o=Math.min(o,a),u=Math.max(u,a);if(o<-1)for(var h=0;h<n;h++)a=e[2*h+1]=e[2*h+1]+(-1-o);return e},Vs=function(e,r){var a=1/e*2*Math.PI,n=e%2===0?Math.PI/2+a/2:Math.PI/2;n+=r;for(var i=new Array(e*2),o,s=0;s<e;s++)o=s*a+n,i[2*s]=Math.cos(o),i[2*s+1]=Math.sin(-o);return i},kr=function(e,r){return Math.min(e/4,r/4,8)},yv=function(e,r){return Math.min(e/10,r/10,8)},wu=function(){return 8},py=function(e,r,a){return[e-2*r+a,2*(r-e),e]},qs=function(e,r){return{heightOffset:Math.min(15,.05*r),widthOffset:Math.min(100,.25*e),ctrlPtOffsetPct:.05}};function gy(t,e){function r(f){for(var v=[],h=0;h<f.length;h++){var d=f[h],m=f[(h+1)%f.length],p={x:m.x-d.x,y:m.y-d.y},g={x:-p.y,y:p.x},y=Math.sqrt(g.x*g.x+g.y*g.y);v.push({x:g.x/y,y:g.y/y})}return v}function a(f,v){var h=1/0,d=-1/0,m=kt(f),p;try{for(m.s();!(p=m.n()).done;){var g=p.value,y=g.x*v.x+g.y*v.y;h=Math.min(h,y),d=Math.max(d,y)}}catch(b){m.e(b)}finally{m.f()}return{min:h,max:d}}function n(f,v){return!(f.max<v.min||v.max<f.min)}var i=[].concat(mi(r(t)),mi(r(e))),o=kt(i),s;try{for(o.s();!(s=o.n()).done;){var u=s.value,l=a(t,u),c=a(e,u);if(!n(l,c))return!1}}catch(f){o.e(f)}finally{o.f()}return!0}var my=ht({dampingFactor:.8,precision:1e-6,iterations:200,weight:function(e){return 1}}),yy={pageRank:function(e){for(var r=my(e),a=r.dampingFactor,n=r.precision,i=r.iterations,o=r.weight,s=this._private.cy,u=this.byGroup(),l=u.nodes,c=u.edges,f=l.length,v=f*f,h=c.length,d=new Array(v),m=new Array(f),p=(1-a)/f,g=0;g<f;g++){for(var y=0;y<f;y++){var b=g*f+y;d[b]=0}m[g]=0}for(var w=0;w<h;w++){var E=c[w],C=E.data("source"),x=E.data("target");if(C!==x){var R=l.indexOfId(C),S=l.indexOfId(x),P=o(E),k=S*f+R;d[k]+=P,m[R]+=P}}for(var B=1/f+p,D=0;D<f;D++)if(m[D]===0)for(var A=0;A<f;A++){var L=A*f+D;d[L]=B}else for(var I=0;I<f;I++){var M=I*f+D;d[M]=d[M]/m[D]+p}for(var O=new Array(f),V=new Array(f),W,N=0;N<f;N++)O[N]=1;for(var z=0;z<i;z++){for(var X=0;X<f;X++)V[X]=0;for(var j=0;j<f;j++)for(var J=0;J<f;J++){var G=j*f+J;V[j]+=d[G]*O[J]}jm(V),W=O,O=V,V=W;for(var Z=0,ae=0;ae<f;ae++){var Q=W[ae]-O[ae];Z+=Q*Q}if(Z<n)break}var F={rank:function(U){return U=s.collection(U)[0],O[l.indexOf(U)]}};return F}},wl=ht({root:null,weight:function(e){return 1},directed:!1,alpha:0}),Ta={degreeCentralityNormalized:function(e){e=wl(e);var r=this.cy(),a=this.nodes(),n=a.length;if(e.directed){for(var c={},f={},v=0,h=0,d=0;d<n;d++){var m=a[d],p=m.id();e.root=m;var g=this.degreeCentrality(e);v<g.indegree&&(v=g.indegree),h<g.outdegree&&(h=g.outdegree),c[p]=g.indegree,f[p]=g.outdegree}return{indegree:function(b){return v==0?0:(de(b)&&(b=r.filter(b)),c[b.id()]/v)},outdegree:function(b){return h===0?0:(de(b)&&(b=r.filter(b)),f[b.id()]/h)}}}else{for(var i={},o=0,s=0;s<n;s++){var u=a[s];e.root=u;var l=this.degreeCentrality(e);o<l.degree&&(o=l.degree),i[u.id()]=l.degree}return{degree:function(b){return o===0?0:(de(b)&&(b=r.filter(b)),i[b.id()]/o)}}}},degreeCentrality:function(e){e=wl(e);var r=this.cy(),a=this,n=e,i=n.root,o=n.weight,s=n.directed,u=n.alpha;if(i=r.collection(i)[0],s){for(var h=i.connectedEdges(),d=h.filter(function(C){return C.target().same(i)&&a.has(C)}),m=h.filter(function(C){return C.source().same(i)&&a.has(C)}),p=d.length,g=m.length,y=0,b=0,w=0;w<d.length;w++)y+=o(d[w]);for(var E=0;E<m.length;E++)b+=o(m[E]);return{indegree:Math.pow(p,1-u)*Math.pow(y,u),outdegree:Math.pow(g,1-u)*Math.pow(b,u)}}else{for(var l=i.connectedEdges().intersection(a),c=l.length,f=0,v=0;v<l.length;v++)f+=o(l[v]);return{degree:Math.pow(c,1-u)*Math.pow(f,u)}}}};Ta.dc=Ta.degreeCentrality;Ta.dcn=Ta.degreeCentralityNormalised=Ta.degreeCentralityNormalized;var xl=ht({harmonic:!0,weight:function(){return 1},directed:!1,root:null}),Sa={closenessCentralityNormalized:function(e){for(var r=xl(e),a=r.harmonic,n=r.weight,i=r.directed,o=this.cy(),s={},u=0,l=this.nodes(),c=this.floydWarshall({weight:n,directed:i}),f=0;f<l.length;f++){for(var v=0,h=l[f],d=0;d<l.length;d++)if(f!==d){var m=c.distance(h,l[d]);a?v+=1/m:v+=m}a||(v=1/v),u<v&&(u=v),s[h.id()]=v}return{closeness:function(g){return u==0?0:(de(g)?g=o.filter(g)[0].id():g=g.id(),s[g]/u)}}},closenessCentrality:function(e){var r=xl(e),a=r.root,n=r.weight,i=r.directed,o=r.harmonic;a=this.filter(a)[0];for(var s=this.dijkstra({root:a,weight:n,directed:i}),u=0,l=this.nodes(),c=0;c<l.length;c++){var f=l[c];if(!f.same(a)){var v=s.distanceTo(f);o?u+=1/v:u+=v}}return o?u:1/u}};Sa.cc=Sa.closenessCentrality;Sa.ccn=Sa.closenessCentralityNormalised=Sa.closenessCentralityNormalized;var by=ht({weight:null,directed:!1}),_s={betweennessCentrality:function(e){for(var r=by(e),a=r.directed,n=r.weight,i=n!=null,o=this.cy(),s=this.nodes(),u={},l={},c=0,f={set:function(b,w){l[b]=w,w>c&&(c=w)},get:function(b){return l[b]}},v=0;v<s.length;v++){var h=s[v],d=h.id();a?u[d]=h.outgoers().nodes():u[d]=h.openNeighborhood().nodes(),f.set(d,0)}for(var m=function(){for(var b=s[p].id(),w=[],E={},C={},x={},R=new Tn(function(j,J){return x[j]-x[J]}),S=0;S<s.length;S++){var P=s[S].id();E[P]=[],C[P]=0,x[P]=1/0}for(C[b]=1,x[b]=0,R.push(b);!R.empty();){var k=R.pop();if(w.push(k),i)for(var B=0;B<u[k].length;B++){var D=u[k][B],A=o.getElementById(k),L=void 0;A.edgesTo(D).length>0?L=A.edgesTo(D)[0]:L=D.edgesTo(A)[0];var I=n(L);D=D.id(),x[D]>x[k]+I&&(x[D]=x[k]+I,R.nodes.indexOf(D)<0?R.push(D):R.updateItem(D),C[D]=0,E[D]=[]),x[D]==x[k]+I&&(C[D]=C[D]+C[k],E[D].push(k))}else for(var M=0;M<u[k].length;M++){var O=u[k][M].id();x[O]==1/0&&(R.push(O),x[O]=x[k]+1),x[O]==x[k]+1&&(C[O]=C[O]+C[k],E[O].push(k))}}for(var V={},W=0;W<s.length;W++)V[s[W].id()]=0;for(;w.length>0;){for(var N=w.pop(),z=0;z<E[N].length;z++){var X=E[N][z];V[X]=V[X]+C[X]/C[N]*(1+V[N])}N!=s[p].id()&&f.set(N,f.get(N)+V[N])}},p=0;p<s.length;p++)m();var g={betweenness:function(b){var w=o.collection(b).id();return f.get(w)},betweennessNormalized:function(b){if(c==0)return 0;var w=o.collection(b).id();return f.get(w)/c}};return g.betweennessNormalised=g.betweennessNormalized,g}};_s.bc=_s.betweennessCentrality;var wy=ht({expandFactor:2,inflateFactor:2,multFactor:1,maxIterations:20,attributes:[function(t){return 1}]}),xy=function(e){return wy(e)},Ey=function(e,r){for(var a=0,n=0;n<r.length;n++)a+=r[n](e);return a},Cy=function(e,r,a){for(var n=0;n<r;n++)e[n*r+n]=a},bv=function(e,r){for(var a,n=0;n<r;n++){a=0;for(var i=0;i<r;i++)a+=e[i*r+n];for(var o=0;o<r;o++)e[o*r+n]=e[o*r+n]/a}},Ty=function(e,r,a){for(var n=new Array(a*a),i=0;i<a;i++){for(var o=0;o<a;o++)n[i*a+o]=0;for(var s=0;s<a;s++)for(var u=0;u<a;u++)n[i*a+u]+=e[i*a+s]*r[s*a+u]}return n},Sy=function(e,r,a){for(var n=e.slice(0),i=1;i<a;i++)e=Ty(e,n,r);return e},Ry=function(e,r,a){for(var n=new Array(r*r),i=0;i<r*r;i++)n[i]=Math.pow(e[i],a);return bv(n,r),n},Py=function(e,r,a,n){for(var i=0;i<a;i++){var o=Math.round(e[i]*Math.pow(10,n))/Math.pow(10,n),s=Math.round(r[i]*Math.pow(10,n))/Math.pow(10,n);if(o!==s)return!1}return!0},ky=function(e,r,a,n){for(var i=[],o=0;o<r;o++){for(var s=[],u=0;u<r;u++)Math.round(e[o*r+u]*1e3)/1e3>0&&s.push(a[u]);s.length!==0&&i.push(n.collection(s))}return i},Dy=function(e,r){for(var a=0;a<e.length;a++)if(!r[a]||e[a].id()!==r[a].id())return!1;return!0},By=function(e){for(var r=0;r<e.length;r++)for(var a=0;a<e.length;a++)r!=a&&Dy(e[r],e[a])&&e.splice(a,1);return e},El=function(e){for(var r=this.nodes(),a=this.edges(),n=this.cy(),i=xy(e),o={},s=0;s<r.length;s++)o[r[s].id()]=s;for(var u=r.length,l=u*u,c=new Array(l),f,v=0;v<l;v++)c[v]=0;for(var h=0;h<a.length;h++){var d=a[h],m=o[d.source().id()],p=o[d.target().id()],g=Ey(d,i.attributes);c[m*u+p]+=g,c[p*u+m]+=g}Cy(c,u,i.multFactor),bv(c,u);for(var y=!0,b=0;y&&b<i.maxIterations;)y=!1,f=Sy(c,u,i.expandFactor),c=Ry(f,u,i.inflateFactor),Py(c,f,l,4)||(y=!0),b++;var w=ky(c,u,r,n);return w=By(w),w},Ay={markovClustering:El,mcl:El},Ly=function(e){return e},wv=function(e,r){return Math.abs(r-e)},Cl=function(e,r,a){return e+wv(r,a)},Tl=function(e,r,a){return e+Math.pow(a-r,2)},My=function(e){return Math.sqrt(e)},Iy=function(e,r,a){return Math.max(e,wv(r,a))},_a=function(e,r,a,n,i){for(var o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:Ly,s=n,u,l,c=0;c<e;c++)u=r(c),l=a(c),s=i(s,u,l);return o(s)},Da={euclidean:function(e,r,a){return e>=2?_a(e,r,a,0,Tl,My):_a(e,r,a,0,Cl)},squaredEuclidean:function(e,r,a){return _a(e,r,a,0,Tl)},manhattan:function(e,r,a){return _a(e,r,a,0,Cl)},max:function(e,r,a){return _a(e,r,a,-1/0,Iy)}};Da["squared-euclidean"]=Da.squaredEuclidean;Da.squaredeuclidean=Da.squaredEuclidean;function Fi(t,e,r,a,n,i){var o;return Ke(t)?o=t:o=Da[t]||Da.euclidean,e===0&&Ke(t)?o(n,i):o(e,r,a,n,i)}var Oy=ht({k:2,m:2,sensitivityThreshold:1e-4,distance:"euclidean",maxIterations:10,attributes:[],testMode:!1,testCentroids:null}),xu=function(e){return Oy(e)},Ci=function(e,r,a,n,i){var o=i!=="kMedoids",s=o?function(f){return a[f]}:function(f){return n[f](a)},u=function(v){return n[v](r)},l=a,c=r;return Fi(e,n.length,s,u,l,c)},Co=function(e,r,a){for(var n=a.length,i=new Array(n),o=new Array(n),s=new Array(r),u=null,l=0;l<n;l++)i[l]=e.min(a[l]).value,o[l]=e.max(a[l]).value;for(var c=0;c<r;c++){u=[];for(var f=0;f<n;f++)u[f]=Math.random()*(o[f]-i[f])+i[f];s[c]=u}return s},xv=function(e,r,a,n,i){for(var o=1/0,s=0,u=0;u<r.length;u++){var l=Ci(a,e,r[u],n,i);l<o&&(o=l,s=u)}return s},Ev=function(e,r,a){for(var n=[],i=null,o=0;o<r.length;o++)i=r[o],a[i.id()]===e&&n.push(i);return n},Ny=function(e,r,a){return Math.abs(r-e)<=a},Fy=function(e,r,a){for(var n=0;n<e.length;n++)for(var i=0;i<e[n].length;i++){var o=Math.abs(e[n][i]-r[n][i]);if(o>a)return!1}return!0},zy=function(e,r,a){for(var n=0;n<a;n++)if(e===r[n])return!0;return!1},Sl=function(e,r){var a=new Array(r);if(e.length<50)for(var n=0;n<r;n++){for(var i=e[Math.floor(Math.random()*e.length)];zy(i,a,n);)i=e[Math.floor(Math.random()*e.length)];a[n]=i}else for(var o=0;o<r;o++)a[o]=e[Math.floor(Math.random()*e.length)];return a},Rl=function(e,r,a){for(var n=0,i=0;i<r.length;i++)n+=Ci("manhattan",r[i],e,a,"kMedoids");return n},Vy=function(e){var r=this.cy(),a=this.nodes(),n=null,i=xu(e),o=new Array(i.k),s={},u;i.testMode?typeof i.testCentroids=="number"?(i.testCentroids,u=Co(a,i.k,i.attributes)):nt(i.testCentroids)==="object"?u=i.testCentroids:u=Co(a,i.k,i.attributes):u=Co(a,i.k,i.attributes);for(var l=!0,c=0;l&&c<i.maxIterations;){for(var f=0;f<a.length;f++)n=a[f],s[n.id()]=xv(n,u,i.distance,i.attributes,"kMeans");l=!1;for(var v=0;v<i.k;v++){var h=Ev(v,a,s);if(h.length!==0){for(var d=i.attributes.length,m=u[v],p=new Array(d),g=new Array(d),y=0;y<d;y++){g[y]=0;for(var b=0;b<h.length;b++)n=h[b],g[y]+=i.attributes[y](n);p[y]=g[y]/h.length,Ny(p[y],m[y],i.sensitivityThreshold)||(l=!0)}u[v]=p,o[v]=r.collection(h)}}c++}return o},qy=function(e){var r=this.cy(),a=this.nodes(),n=null,i=xu(e),o=new Array(i.k),s,u={},l,c=new Array(i.k);i.testMode?typeof i.testCentroids=="number"||(nt(i.testCentroids)==="object"?s=i.testCentroids:s=Sl(a,i.k)):s=Sl(a,i.k);for(var f=!0,v=0;f&&v<i.maxIterations;){for(var h=0;h<a.length;h++)n=a[h],u[n.id()]=xv(n,s,i.distance,i.attributes,"kMedoids");f=!1;for(var d=0;d<s.length;d++){var m=Ev(d,a,u);if(m.length!==0){c[d]=Rl(s[d],m,i.attributes);for(var p=0;p<m.length;p++)l=Rl(m[p],m,i.attributes),l<c[d]&&(c[d]=l,s[d]=m[p],f=!0);o[d]=r.collection(m)}}v++}return o},_y=function(e,r,a,n,i){for(var o,s,u=0;u<r.length;u++)for(var l=0;l<e.length;l++)n[u][l]=Math.pow(a[u][l],i.m);for(var c=0;c<e.length;c++)for(var f=0;f<i.attributes.length;f++){o=0,s=0;for(var v=0;v<r.length;v++)o+=n[v][c]*i.attributes[f](r[v]),s+=n[v][c];e[c][f]=o/s}},$y=function(e,r,a,n,i){for(var o=0;o<e.length;o++)r[o]=e[o].slice();for(var s,u,l,c=2/(i.m-1),f=0;f<a.length;f++)for(var v=0;v<n.length;v++){s=0;for(var h=0;h<a.length;h++)u=Ci(i.distance,n[v],a[f],i.attributes,"cmeans"),l=Ci(i.distance,n[v],a[h],i.attributes,"cmeans"),s+=Math.pow(u/l,c);e[v][f]=1/s}},Wy=function(e,r,a,n){for(var i=new Array(a.k),o=0;o<i.length;o++)i[o]=[];for(var s,u,l=0;l<r.length;l++){s=-1/0,u=-1;for(var c=0;c<r[0].length;c++)r[l][c]>s&&(s=r[l][c],u=c);i[u].push(e[l])}for(var f=0;f<i.length;f++)i[f]=n.collection(i[f]);return i},Pl=function(e){var r=this.cy(),a=this.nodes(),n=xu(e),i,o,s,u,l;u=new Array(a.length);for(var c=0;c<a.length;c++)u[c]=new Array(n.k);s=new Array(a.length);for(var f=0;f<a.length;f++)s[f]=new Array(n.k);for(var v=0;v<a.length;v++){for(var h=0,d=0;d<n.k;d++)s[v][d]=Math.random(),h+=s[v][d];for(var m=0;m<n.k;m++)s[v][m]=s[v][m]/h}o=new Array(n.k);for(var p=0;p<n.k;p++)o[p]=new Array(n.attributes.length);l=new Array(a.length);for(var g=0;g<a.length;g++)l[g]=new Array(n.k);for(var y=!0,b=0;y&&b<n.maxIterations;)y=!1,_y(o,a,s,l,n),$y(s,u,o,a,n),Fy(s,u,n.sensitivityThreshold)||(y=!0),b++;return i=Wy(a,s,n,r),{clusters:i,degreeOfMembership:s}},Gy={kMeans:Vy,kMedoids:qy,fuzzyCMeans:Pl,fcm:Pl},Uy=ht({distance:"euclidean",linkage:"min",mode:"threshold",threshold:1/0,addDendrogram:!1,dendrogramDepth:0,attributes:[]}),Hy={single:"min",complete:"max"},Ky=function(e){var r=Uy(e),a=Hy[r.linkage];return a!=null&&(r.linkage=a),r},kl=function(e,r,a,n,i){for(var o=0,s=1/0,u,l=i.attributes,c=function(S,P){return Fi(i.distance,l.length,function(k){return l[k](S)},function(k){return l[k](P)},S,P)},f=0;f<e.length;f++){var v=e[f].key,h=a[v][n[v]];h<s&&(o=v,s=h)}if(i.mode==="threshold"&&s>=i.threshold||i.mode==="dendrogram"&&e.length===1)return!1;var d=r[o],m=r[n[o]],p;i.mode==="dendrogram"?p={left:d,right:m,key:d.key}:p={value:d.value.concat(m.value),key:d.key},e[d.index]=p,e.splice(m.index,1),r[d.key]=p;for(var g=0;g<e.length;g++){var y=e[g];d.key===y.key?u=1/0:i.linkage==="min"?(u=a[d.key][y.key],a[d.key][y.key]>a[m.key][y.key]&&(u=a[m.key][y.key])):i.linkage==="max"?(u=a[d.key][y.key],a[d.key][y.key]<a[m.key][y.key]&&(u=a[m.key][y.key])):i.linkage==="mean"?u=(a[d.key][y.key]*d.size+a[m.key][y.key]*m.size)/(d.size+m.size):i.mode==="dendrogram"?u=c(y.value,d.value):u=c(y.value[0],d.value[0]),a[d.key][y.key]=a[y.key][d.key]=u}for(var b=0;b<e.length;b++){var w=e[b].key;if(n[w]===d.key||n[w]===m.key){for(var E=w,C=0;C<e.length;C++){var x=e[C].key;a[w][x]<a[w][E]&&(E=x)}n[w]=E}e[b].index=b}return d.key=m.key=d.index=m.index=null,!0},xa=function(e,r,a){e&&(e.value?r.push(e.value):(e.left&&xa(e.left,r),e.right&&xa(e.right,r)))},$s=function(e,r){if(!e)return"";if(e.left&&e.right){var a=$s(e.left,r),n=$s(e.right,r),i=r.add({group:"nodes",data:{id:a+","+n}});return r.add({group:"edges",data:{source:a,target:i.id()}}),r.add({group:"edges",data:{source:n,target:i.id()}}),i.id()}else if(e.value)return e.value.id()},Ws=function(e,r,a){if(!e)return[];var n=[],i=[],o=[];return r===0?(e.left&&xa(e.left,n),e.right&&xa(e.right,i),o=n.concat(i),[a.collection(o)]):r===1?e.value?[a.collection(e.value)]:(e.left&&xa(e.left,n),e.right&&xa(e.right,i),[a.collection(n),a.collection(i)]):e.value?[a.collection(e.value)]:(e.left&&(n=Ws(e.left,r-1,a)),e.right&&(i=Ws(e.right,r-1,a)),n.concat(i))},Dl=function(e){for(var r=this.cy(),a=this.nodes(),n=Ky(e),i=n.attributes,o=function(b,w){return Fi(n.distance,i.length,function(E){return i[E](b)},function(E){return i[E](w)},b,w)},s=[],u=[],l=[],c=[],f=0;f<a.length;f++){var v={value:n.mode==="dendrogram"?a[f]:[a[f]],key:f,index:f};s[f]=v,c[f]=v,u[f]=[],l[f]=0}for(var h=0;h<s.length;h++)for(var d=0;d<=h;d++){var m=void 0;n.mode==="dendrogram"?m=h===d?1/0:o(s[h].value,s[d].value):m=h===d?1/0:o(s[h].value[0],s[d].value[0]),u[h][d]=m,u[d][h]=m,m<u[h][l[h]]&&(l[h]=d)}for(var p=kl(s,c,u,l,n);p;)p=kl(s,c,u,l,n);var g;return n.mode==="dendrogram"?(g=Ws(s[0],n.dendrogramDepth,r),n.addDendrogram&&$s(s[0],r)):(g=new Array(s.length),s.forEach(function(y,b){y.key=y.index=null,g[b]=r.collection(y.value)})),g},Yy={hierarchicalClustering:Dl,hca:Dl},Xy=ht({distance:"euclidean",preference:"median",damping:.8,maxIterations:1e3,minIterations:100,attributes:[]}),Zy=function(e){var r=e.damping,a=e.preference;.5<=r&&r<1||Ue("Damping must range on [0.5, 1).  Got: ".concat(r));var n=["median","mean","min","max"];return n.some(function(i){return i===a})||ie(a)||Ue("Preference must be one of [".concat(n.map(function(i){return"'".concat(i,"'")}).join(", "),"] or a number.  Got: ").concat(a)),Xy(e)},Qy=function(e,r,a,n){var i=function(s,u){return n[u](s)};return-Fi(e,n.length,function(o){return i(r,o)},function(o){return i(a,o)},r,a)},jy=function(e,r){var a=null;return r==="median"?a=Zm(e):r==="mean"?a=Xm(e):r==="min"?a=Km(e):r==="max"?a=Ym(e):a=r,a},Jy=function(e,r,a){for(var n=[],i=0;i<e;i++)r[i*e+i]+a[i*e+i]>0&&n.push(i);return n},Bl=function(e,r,a){for(var n=[],i=0;i<e;i++){for(var o=-1,s=-1/0,u=0;u<a.length;u++){var l=a[u];r[i*e+l]>s&&(o=l,s=r[i*e+l])}o>0&&n.push(o)}for(var c=0;c<a.length;c++)n[a[c]]=a[c];return n},e0=function(e,r,a){for(var n=Bl(e,r,a),i=0;i<a.length;i++){for(var o=[],s=0;s<n.length;s++)n[s]===a[i]&&o.push(s);for(var u=-1,l=-1/0,c=0;c<o.length;c++){for(var f=0,v=0;v<o.length;v++)f+=r[o[v]*e+o[c]];f>l&&(u=c,l=f)}a[i]=o[u]}return n=Bl(e,r,a),n},Al=function(e){for(var r=this.cy(),a=this.nodes(),n=Zy(e),i={},o=0;o<a.length;o++)i[a[o].id()]=o;var s,u,l,c,f,v;s=a.length,u=s*s,l=new Array(u);for(var h=0;h<u;h++)l[h]=-1/0;for(var d=0;d<s;d++)for(var m=0;m<s;m++)d!==m&&(l[d*s+m]=Qy(n.distance,a[d],a[m],n.attributes));c=jy(l,n.preference);for(var p=0;p<s;p++)l[p*s+p]=c;f=new Array(u);for(var g=0;g<u;g++)f[g]=0;v=new Array(u);for(var y=0;y<u;y++)v[y]=0;for(var b=new Array(s),w=new Array(s),E=new Array(s),C=0;C<s;C++)b[C]=0,w[C]=0,E[C]=0;for(var x=new Array(s*n.minIterations),R=0;R<x.length;R++)x[R]=0;var S;for(S=0;S<n.maxIterations;S++){for(var P=0;P<s;P++){for(var k=-1/0,B=-1/0,D=-1,A=0,L=0;L<s;L++)b[L]=f[P*s+L],A=v[P*s+L]+l[P*s+L],A>=k?(B=k,k=A,D=L):A>B&&(B=A);for(var I=0;I<s;I++)f[P*s+I]=(1-n.damping)*(l[P*s+I]-k)+n.damping*b[I];f[P*s+D]=(1-n.damping)*(l[P*s+D]-B)+n.damping*b[D]}for(var M=0;M<s;M++){for(var O=0,V=0;V<s;V++)b[V]=v[V*s+M],w[V]=Math.max(0,f[V*s+M]),O+=w[V];O-=w[M],w[M]=f[M*s+M],O+=w[M];for(var W=0;W<s;W++)v[W*s+M]=(1-n.damping)*Math.min(0,O-w[W])+n.damping*b[W];v[M*s+M]=(1-n.damping)*(O-w[M])+n.damping*b[M]}for(var N=0,z=0;z<s;z++){var X=v[z*s+z]+f[z*s+z]>0?1:0;x[S%n.minIterations*s+z]=X,N+=X}if(N>0&&(S>=n.minIterations-1||S==n.maxIterations-1)){for(var j=0,J=0;J<s;J++){E[J]=0;for(var G=0;G<n.minIterations;G++)E[J]+=x[G*s+J];(E[J]===0||E[J]===n.minIterations)&&j++}if(j===s)break}}for(var Z=Jy(s,f,v),ae=e0(s,l,Z),Q={},F=0;F<Z.length;F++)Q[Z[F]]=[];for(var q=0;q<a.length;q++){var U=i[a[q].id()],re=ae[U];re!=null&&Q[re].push(a[q])}for(var oe=new Array(Z.length),xe=0;xe<Z.length;xe++)oe[xe]=r.collection(Q[Z[xe]]);return oe},t0={affinityPropagation:Al,ap:Al},r0=ht({root:void 0,directed:!1}),a0={hierholzer:function(e){if(!Ae(e)){var r=arguments;e={root:r[0],directed:r[1]}}var a=r0(e),n=a.root,i=a.directed,o=this,s=!1,u,l,c;n&&(c=de(n)?this.filter(n)[0].id():n[0].id());var f={},v={};i?o.forEach(function(y){var b=y.id();if(y.isNode()){var w=y.indegree(!0),E=y.outdegree(!0),C=w-E,x=E-w;C==1?u?s=!0:u=b:x==1?l?s=!0:l=b:(x>1||C>1)&&(s=!0),f[b]=[],y.outgoers().forEach(function(R){R.isEdge()&&f[b].push(R.id())})}else v[b]=[void 0,y.target().id()]}):o.forEach(function(y){var b=y.id();if(y.isNode()){var w=y.degree(!0);w%2&&(u?l?s=!0:l=b:u=b),f[b]=[],y.connectedEdges().forEach(function(E){return f[b].push(E.id())})}else v[b]=[y.source().id(),y.target().id()]});var h={found:!1,trail:void 0};if(s)return h;if(l&&u)if(i){if(c&&l!=c)return h;c=l}else{if(c&&l!=c&&u!=c)return h;c||(c=l)}else c||(c=o[0].id());var d=function(b){for(var w=b,E=[b],C,x,R;f[w].length;)C=f[w].shift(),x=v[C][0],R=v[C][1],w!=R?(f[R]=f[R].filter(function(S){return S!=C}),w=R):!i&&w!=x&&(f[x]=f[x].filter(function(S){return S!=C}),w=x),E.unshift(C),E.unshift(w);return E},m=[],p=[];for(p=d(c);p.length!=1;)f[p[0]].length==0?(m.unshift(o.getElementById(p.shift())),m.unshift(o.getElementById(p.shift()))):p=d(p.shift()).concat(p);m.unshift(o.getElementById(p.shift()));for(var g in f)if(f[g].length)return h;return h.found=!0,h.trail=this.spawn(m,!0),h}},$n=function(){var e=this,r={},a=0,n=0,i=[],o=[],s={},u=function(v,h){for(var d=o.length-1,m=[],p=e.spawn();o[d].x!=v||o[d].y!=h;)m.push(o.pop().edge),d--;m.push(o.pop().edge),m.forEach(function(g){var y=g.connectedNodes().intersection(e);p.merge(g),y.forEach(function(b){var w=b.id(),E=b.connectedEdges().intersection(e);p.merge(b),r[w].cutVertex?p.merge(E.filter(function(C){return C.isLoop()})):p.merge(E)})}),i.push(p)},l=function(v,h,d){v===d&&(n+=1),r[h]={id:a,low:a++,cutVertex:!1};var m=e.getElementById(h).connectedEdges().intersection(e);if(m.size()===0)i.push(e.spawn(e.getElementById(h)));else{var p,g,y,b;m.forEach(function(w){p=w.source().id(),g=w.target().id(),y=p===h?g:p,y!==d&&(b=w.id(),s[b]||(s[b]=!0,o.push({x:h,y,edge:w})),y in r?r[h].low=Math.min(r[h].low,r[y].id):(l(v,y,h),r[h].low=Math.min(r[h].low,r[y].low),r[h].id<=r[y].low&&(r[h].cutVertex=!0,u(h,y))))})}};e.forEach(function(f){if(f.isNode()){var v=f.id();v in r||(n=0,l(v,v),r[v].cutVertex=n>1)}});var c=Object.keys(r).filter(function(f){return r[f].cutVertex}).map(function(f){return e.getElementById(f)});return{cut:e.spawn(c),components:i}},n0={hopcroftTarjanBiconnected:$n,htbc:$n,htb:$n,hopcroftTarjanBiconnectedComponents:$n},Wn=function(){var e=this,r={},a=0,n=[],i=[],o=e.spawn(e),s=function(l){i.push(l),r[l]={index:a,low:a++,explored:!1};var c=e.getElementById(l).connectedEdges().intersection(e);if(c.forEach(function(m){var p=m.target().id();p!==l&&(p in r||s(p),r[p].explored||(r[l].low=Math.min(r[l].low,r[p].low)))}),r[l].index===r[l].low){for(var f=e.spawn();;){var v=i.pop();if(f.merge(e.getElementById(v)),r[v].low=r[l].index,r[v].explored=!0,v===l)break}var h=f.edgesWith(f),d=f.merge(h);n.push(d),o=o.difference(d)}};return e.forEach(function(u){if(u.isNode()){var l=u.id();l in r||s(l)}}),{cut:o,components:n}},i0={tarjanStronglyConnected:Wn,tsc:Wn,tscc:Wn,tarjanStronglyConnectedComponents:Wn},Cv={};[sn,Om,Nm,zm,qm,$m,Um,yy,Ta,Sa,_s,Ay,Gy,Yy,t0,a0,n0,i0].forEach(function(t){ge(Cv,t)});/*!
Embeddable Minimum Strictly-Compliant Promises/A+ 1.1.1 Thenable
Copyright (c) 2013-2014 Ralf S. Engelschall (http://engelschall.com)
Licensed under The MIT License (http://opensource.org/licenses/MIT)
*/var Tv=0,Sv=1,Rv=2,Wt=function(e){if(!(this instanceof Wt))return new Wt(e);this.id="Thenable/1.0.7",this.state=Tv,this.fulfillValue=void 0,this.rejectReason=void 0,this.onFulfilled=[],this.onRejected=[],this.proxy={then:this.then.bind(this)},typeof e=="function"&&e.call(this,this.fulfill.bind(this),this.reject.bind(this))};Wt.prototype={fulfill:function(e){return Ll(this,Sv,"fulfillValue",e)},reject:function(e){return Ll(this,Rv,"rejectReason",e)},then:function(e,r){var a=this,n=new Wt;return a.onFulfilled.push(Il(e,n,"fulfill")),a.onRejected.push(Il(r,n,"reject")),Pv(a),n.proxy}};var Ll=function(e,r,a,n){return e.state===Tv&&(e.state=r,e[a]=n,Pv(e)),e},Pv=function(e){e.state===Sv?Ml(e,"onFulfilled",e.fulfillValue):e.state===Rv&&Ml(e,"onRejected",e.rejectReason)},Ml=function(e,r,a){if(e[r].length!==0){var n=e[r];e[r]=[];var i=function(){for(var s=0;s<n.length;s++)n[s](a)};typeof setImmediate=="function"?setImmediate(i):setTimeout(i,0)}},Il=function(e,r,a){return function(n){if(typeof e!="function")r[a].call(r,n);else{var i;try{i=e(n)}catch(o){r.reject(o);return}kv(r,i)}}},kv=function(e,r){if(e===r||e.proxy===r){e.reject(new TypeError("cannot resolve promise with itself"));return}var a;if(nt(r)==="object"&&r!==null||typeof r=="function")try{a=r.then}catch(i){e.reject(i);return}if(typeof a=="function"){var n=!1;try{a.call(r,function(i){n||(n=!0,i===r?e.reject(new TypeError("circular thenable chain")):kv(e,i))},function(i){n||(n=!0,e.reject(i))})}catch(i){n||e.reject(i)}return}e.fulfill(r)};Wt.all=function(t){return new Wt(function(e,r){for(var a=new Array(t.length),n=0,i=function(u,l){a[u]=l,n++,n===t.length&&e(a)},o=0;o<t.length;o++)(function(s){var u=t[s],l=u!=null&&u.then!=null;if(l)u.then(function(f){i(s,f)},function(f){r(f)});else{var c=u;i(s,c)}})(o)})};Wt.resolve=function(t){return new Wt(function(e,r){e(t)})};Wt.reject=function(t){return new Wt(function(e,r){r(t)})};var Ma=typeof Promise<"u"?Promise:Wt,Gs=function(e,r,a){var n=fu(e),i=!n,o=this._private=ge({duration:1e3},r,a);if(o.target=e,o.style=o.style||o.css,o.started=!1,o.playing=!1,o.hooked=!1,o.applying=!1,o.progress=0,o.completes=[],o.frames=[],o.complete&&Ke(o.complete)&&o.completes.push(o.complete),i){var s=e.position();o.startPosition=o.startPosition||{x:s.x,y:s.y},o.startStyle=o.startStyle||e.cy().style().getAnimationStartStyle(e,o.style)}if(n){var u=e.pan();o.startPan={x:u.x,y:u.y},o.startZoom=e.zoom()}this.length=1,this[0]=this},Qr=Gs.prototype;ge(Qr,{instanceString:function(){return"animation"},hook:function(){var e=this._private;if(!e.hooked){var r,a=e.target._private.animation;e.queue?r=a.queue:r=a.current,r.push(this),At(e.target)&&e.target.cy().addToAnimationPool(e.target),e.hooked=!0}return this},play:function(){var e=this._private;return e.progress===1&&(e.progress=0),e.playing=!0,e.started=!1,e.stopped=!1,this.hook(),this},playing:function(){return this._private.playing},apply:function(){var e=this._private;return e.applying=!0,e.started=!1,e.stopped=!1,this.hook(),this},applying:function(){return this._private.applying},pause:function(){var e=this._private;return e.playing=!1,e.started=!1,this},stop:function(){var e=this._private;return e.playing=!1,e.started=!1,e.stopped=!0,this},rewind:function(){return this.progress(0)},fastforward:function(){return this.progress(1)},time:function(e){var r=this._private;return e===void 0?r.progress*r.duration:this.progress(e/r.duration)},progress:function(e){var r=this._private,a=r.playing;return e===void 0?r.progress:(a&&this.pause(),r.progress=e,r.started=!1,a&&this.play(),this)},completed:function(){return this._private.progress===1},reverse:function(){var e=this._private,r=e.playing;r&&this.pause(),e.progress=1-e.progress,e.started=!1;var a=function(l,c){var f=e[l];f!=null&&(e[l]=e[c],e[c]=f)};if(a("zoom","startZoom"),a("pan","startPan"),a("position","startPosition"),e.style)for(var n=0;n<e.style.length;n++){var i=e.style[n],o=i.name,s=e.startStyle[o];e.startStyle[o]=i,e.style[n]=s}return r&&this.play(),this},promise:function(e){var r=this._private,a;switch(e){case"frame":a=r.frames;break;default:case"complete":case"completed":a=r.completes}return new Ma(function(n,i){a.push(function(){n()})})}});Qr.complete=Qr.completed;Qr.run=Qr.play;Qr.running=Qr.playing;var o0={animated:function(){return function(){var r=this,a=r.length!==void 0,n=a?r:[r],i=this._private.cy||this;if(!i.styleEnabled())return!1;var o=n[0];if(o)return o._private.animation.current.length>0}},clearQueue:function(){return function(){var r=this,a=r.length!==void 0,n=a?r:[r],i=this._private.cy||this;if(!i.styleEnabled())return this;for(var o=0;o<n.length;o++){var s=n[o];s._private.animation.queue=[]}return this}},delay:function(){return function(r,a){var n=this._private.cy||this;return n.styleEnabled()?this.animate({delay:r,duration:r,complete:a}):this}},delayAnimation:function(){return function(r,a){var n=this._private.cy||this;return n.styleEnabled()?this.animation({delay:r,duration:r,complete:a}):this}},animation:function(){return function(r,a){var n=this,i=n.length!==void 0,o=i?n:[n],s=this._private.cy||this,u=!i,l=!u;if(!s.styleEnabled())return this;var c=s.style();r=ge({},r,a);var f=Object.keys(r).length===0;if(f)return new Gs(o[0],r);switch(r.duration===void 0&&(r.duration=400),r.duration){case"slow":r.duration=600;break;case"fast":r.duration=200;break}if(l&&(r.style=c.getPropsList(r.style||r.css),r.css=void 0),l&&r.renderedPosition!=null){var v=r.renderedPosition,h=s.pan(),d=s.zoom();r.position=hv(v,d,h)}if(u&&r.panBy!=null){var m=r.panBy,p=s.pan();r.pan={x:p.x+m.x,y:p.y+m.y}}var g=r.center||r.centre;if(u&&g!=null){var y=s.getCenterPan(g.eles,r.zoom);y!=null&&(r.pan=y)}if(u&&r.fit!=null){var b=r.fit,w=s.getFitViewport(b.eles||b.boundingBox,b.padding);w!=null&&(r.pan=w.pan,r.zoom=w.zoom)}if(u&&Ae(r.zoom)){var E=s.getZoomedViewport(r.zoom);E!=null?(E.zoomed&&(r.zoom=E.zoom),E.panned&&(r.pan=E.pan)):r.zoom=null}return new Gs(o[0],r)}},animate:function(){return function(r,a){var n=this,i=n.length!==void 0,o=i?n:[n],s=this._private.cy||this;if(!s.styleEnabled())return this;a&&(r=ge({},r,a));for(var u=0;u<o.length;u++){var l=o[u],c=l.animated()&&(r.queue===void 0||r.queue),f=l.animation(r,c?{queue:!0}:void 0);f.play()}return this}},stop:function(){return function(r,a){var n=this,i=n.length!==void 0,o=i?n:[n],s=this._private.cy||this;if(!s.styleEnabled())return this;for(var u=0;u<o.length;u++){for(var l=o[u],c=l._private,f=c.animation.current,v=0;v<f.length;v++){var h=f[v],d=h._private;a&&(d.duration=0)}r&&(c.animation.queue=[]),a||(c.animation.current=[])}return s.notify("draw"),this}}},To,Ol;function zi(){if(Ol)return To;Ol=1;var t=Array.isArray;return To=t,To}var So,Nl;function s0(){if(Nl)return So;Nl=1;var t=zi(),e=En(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;function n(i,o){if(t(i))return!1;var s=typeof i;return s=="number"||s=="symbol"||s=="boolean"||i==null||e(i)?!0:a.test(i)||!r.test(i)||o!=null&&i in Object(o)}return So=n,So}var Ro,Fl;function u0(){if(Fl)return Ro;Fl=1;var t=iv(),e=xn(),r="[object AsyncFunction]",a="[object Function]",n="[object GeneratorFunction]",i="[object Proxy]";function o(s){if(!e(s))return!1;var u=t(s);return u==a||u==n||u==r||u==i}return Ro=o,Ro}var Po,zl;function l0(){if(zl)return Po;zl=1;var t=Ii(),e=t["__core-js_shared__"];return Po=e,Po}var ko,Vl;function c0(){if(Vl)return ko;Vl=1;var t=l0(),e=function(){var a=/[^.]+$/.exec(t&&t.keys&&t.keys.IE_PROTO||"");return a?"Symbol(src)_1."+a:""}();function r(a){return!!e&&e in a}return ko=r,ko}var Do,ql;function f0(){if(ql)return Do;ql=1;var t=Function.prototype,e=t.toString;function r(a){if(a!=null){try{return e.call(a)}catch{}try{return a+""}catch{}}return""}return Do=r,Do}var Bo,_l;function v0(){if(_l)return Bo;_l=1;var t=u0(),e=c0(),r=xn(),a=f0(),n=/[\\^$.*+?()[\]{}|]/g,i=/^\[object .+?Constructor\]$/,o=Function.prototype,s=Object.prototype,u=o.toString,l=s.hasOwnProperty,c=RegExp("^"+u.call(l).replace(n,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function f(v){if(!r(v)||e(v))return!1;var h=t(v)?c:i;return h.test(a(v))}return Bo=f,Bo}var Ao,$l;function d0(){if($l)return Ao;$l=1;function t(e,r){return e==null?void 0:e[r]}return Ao=t,Ao}var Lo,Wl;function Eu(){if(Wl)return Lo;Wl=1;var t=v0(),e=d0();function r(a,n){var i=e(a,n);return t(i)?i:void 0}return Lo=r,Lo}var Mo,Gl;function Vi(){if(Gl)return Mo;Gl=1;var t=Eu(),e=t(Object,"create");return Mo=e,Mo}var Io,Ul;function h0(){if(Ul)return Io;Ul=1;var t=Vi();function e(){this.__data__=t?t(null):{},this.size=0}return Io=e,Io}var Oo,Hl;function p0(){if(Hl)return Oo;Hl=1;function t(e){var r=this.has(e)&&delete this.__data__[e];return this.size-=r?1:0,r}return Oo=t,Oo}var No,Kl;function g0(){if(Kl)return No;Kl=1;var t=Vi(),e="__lodash_hash_undefined__",r=Object.prototype,a=r.hasOwnProperty;function n(i){var o=this.__data__;if(t){var s=o[i];return s===e?void 0:s}return a.call(o,i)?o[i]:void 0}return No=n,No}var Fo,Yl;function m0(){if(Yl)return Fo;Yl=1;var t=Vi(),e=Object.prototype,r=e.hasOwnProperty;function a(n){var i=this.__data__;return t?i[n]!==void 0:r.call(i,n)}return Fo=a,Fo}var zo,Xl;function y0(){if(Xl)return zo;Xl=1;var t=Vi(),e="__lodash_hash_undefined__";function r(a,n){var i=this.__data__;return this.size+=this.has(a)?0:1,i[a]=t&&n===void 0?e:n,this}return zo=r,zo}var Vo,Zl;function b0(){if(Zl)return Vo;Zl=1;var t=h0(),e=p0(),r=g0(),a=m0(),n=y0();function i(o){var s=-1,u=o==null?0:o.length;for(this.clear();++s<u;){var l=o[s];this.set(l[0],l[1])}}return i.prototype.clear=t,i.prototype.delete=e,i.prototype.get=r,i.prototype.has=a,i.prototype.set=n,Vo=i,Vo}var qo,Ql;function w0(){if(Ql)return qo;Ql=1;function t(){this.__data__=[],this.size=0}return qo=t,qo}var _o,jl;function Dv(){if(jl)return _o;jl=1;function t(e,r){return e===r||e!==e&&r!==r}return _o=t,_o}var $o,Jl;function qi(){if(Jl)return $o;Jl=1;var t=Dv();function e(r,a){for(var n=r.length;n--;)if(t(r[n][0],a))return n;return-1}return $o=e,$o}var Wo,ec;function x0(){if(ec)return Wo;ec=1;var t=qi(),e=Array.prototype,r=e.splice;function a(n){var i=this.__data__,o=t(i,n);if(o<0)return!1;var s=i.length-1;return o==s?i.pop():r.call(i,o,1),--this.size,!0}return Wo=a,Wo}var Go,tc;function E0(){if(tc)return Go;tc=1;var t=qi();function e(r){var a=this.__data__,n=t(a,r);return n<0?void 0:a[n][1]}return Go=e,Go}var Uo,rc;function C0(){if(rc)return Uo;rc=1;var t=qi();function e(r){return t(this.__data__,r)>-1}return Uo=e,Uo}var Ho,ac;function T0(){if(ac)return Ho;ac=1;var t=qi();function e(r,a){var n=this.__data__,i=t(n,r);return i<0?(++this.size,n.push([r,a])):n[i][1]=a,this}return Ho=e,Ho}var Ko,nc;function S0(){if(nc)return Ko;nc=1;var t=w0(),e=x0(),r=E0(),a=C0(),n=T0();function i(o){var s=-1,u=o==null?0:o.length;for(this.clear();++s<u;){var l=o[s];this.set(l[0],l[1])}}return i.prototype.clear=t,i.prototype.delete=e,i.prototype.get=r,i.prototype.has=a,i.prototype.set=n,Ko=i,Ko}var Yo,ic;function R0(){if(ic)return Yo;ic=1;var t=Eu(),e=Ii(),r=t(e,"Map");return Yo=r,Yo}var Xo,oc;function P0(){if(oc)return Xo;oc=1;var t=b0(),e=S0(),r=R0();function a(){this.size=0,this.__data__={hash:new t,map:new(r||e),string:new t}}return Xo=a,Xo}var Zo,sc;function k0(){if(sc)return Zo;sc=1;function t(e){var r=typeof e;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?e!=="__proto__":e===null}return Zo=t,Zo}var Qo,uc;function _i(){if(uc)return Qo;uc=1;var t=k0();function e(r,a){var n=r.__data__;return t(a)?n[typeof a=="string"?"string":"hash"]:n.map}return Qo=e,Qo}var jo,lc;function D0(){if(lc)return jo;lc=1;var t=_i();function e(r){var a=t(this,r).delete(r);return this.size-=a?1:0,a}return jo=e,jo}var Jo,cc;function B0(){if(cc)return Jo;cc=1;var t=_i();function e(r){return t(this,r).get(r)}return Jo=e,Jo}var es,fc;function A0(){if(fc)return es;fc=1;var t=_i();function e(r){return t(this,r).has(r)}return es=e,es}var ts,vc;function L0(){if(vc)return ts;vc=1;var t=_i();function e(r,a){var n=t(this,r),i=n.size;return n.set(r,a),this.size+=n.size==i?0:1,this}return ts=e,ts}var rs,dc;function M0(){if(dc)return rs;dc=1;var t=P0(),e=D0(),r=B0(),a=A0(),n=L0();function i(o){var s=-1,u=o==null?0:o.length;for(this.clear();++s<u;){var l=o[s];this.set(l[0],l[1])}}return i.prototype.clear=t,i.prototype.delete=e,i.prototype.get=r,i.prototype.has=a,i.prototype.set=n,rs=i,rs}var as,hc;function I0(){if(hc)return as;hc=1;var t=M0(),e="Expected a function";function r(a,n){if(typeof a!="function"||n!=null&&typeof n!="function")throw new TypeError(e);var i=function(){var o=arguments,s=n?n.apply(this,o):o[0],u=i.cache;if(u.has(s))return u.get(s);var l=a.apply(this,o);return i.cache=u.set(s,l)||u,l};return i.cache=new(r.Cache||t),i}return r.Cache=t,as=r,as}var ns,pc;function O0(){if(pc)return ns;pc=1;var t=I0(),e=500;function r(a){var n=t(a,function(o){return i.size===e&&i.clear(),o}),i=n.cache;return n}return ns=r,ns}var is,gc;function Bv(){if(gc)return is;gc=1;var t=O0(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,r=/\\(\\)?/g,a=t(function(n){var i=[];return n.charCodeAt(0)===46&&i.push(""),n.replace(e,function(o,s,u,l){i.push(u?l.replace(r,"$1"):s||o)}),i});return is=a,is}var os,mc;function Av(){if(mc)return os;mc=1;function t(e,r){for(var a=-1,n=e==null?0:e.length,i=Array(n);++a<n;)i[a]=r(e[a],a,e);return i}return os=t,os}var ss,yc;function N0(){if(yc)return ss;yc=1;var t=du(),e=Av(),r=zi(),a=En(),n=t?t.prototype:void 0,i=n?n.toString:void 0;function o(s){if(typeof s=="string")return s;if(r(s))return e(s,o)+"";if(a(s))return i?i.call(s):"";var u=s+"";return u=="0"&&1/s==-1/0?"-0":u}return ss=o,ss}var us,bc;function Lv(){if(bc)return us;bc=1;var t=N0();function e(r){return r==null?"":t(r)}return us=e,us}var ls,wc;function Mv(){if(wc)return ls;wc=1;var t=zi(),e=s0(),r=Bv(),a=Lv();function n(i,o){return t(i)?i:e(i,o)?[i]:r(a(i))}return ls=n,ls}var cs,xc;function Cu(){if(xc)return cs;xc=1;var t=En();function e(r){if(typeof r=="string"||t(r))return r;var a=r+"";return a=="0"&&1/r==-1/0?"-0":a}return cs=e,cs}var fs,Ec;function F0(){if(Ec)return fs;Ec=1;var t=Mv(),e=Cu();function r(a,n){n=t(n,a);for(var i=0,o=n.length;a!=null&&i<o;)a=a[e(n[i++])];return i&&i==o?a:void 0}return fs=r,fs}var vs,Cc;function z0(){if(Cc)return vs;Cc=1;var t=F0();function e(r,a,n){var i=r==null?void 0:t(r,a);return i===void 0?n:i}return vs=e,vs}var V0=z0(),q0=wn(V0),ds,Tc;function _0(){if(Tc)return ds;Tc=1;var t=Eu(),e=function(){try{var r=t(Object,"defineProperty");return r({},"",{}),r}catch{}}();return ds=e,ds}var hs,Sc;function $0(){if(Sc)return hs;Sc=1;var t=_0();function e(r,a,n){a=="__proto__"&&t?t(r,a,{configurable:!0,enumerable:!0,value:n,writable:!0}):r[a]=n}return hs=e,hs}var ps,Rc;function W0(){if(Rc)return ps;Rc=1;var t=$0(),e=Dv(),r=Object.prototype,a=r.hasOwnProperty;function n(i,o,s){var u=i[o];(!(a.call(i,o)&&e(u,s))||s===void 0&&!(o in i))&&t(i,o,s)}return ps=n,ps}var gs,Pc;function G0(){if(Pc)return gs;Pc=1;var t=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function r(a,n){var i=typeof a;return n=n??t,!!n&&(i=="number"||i!="symbol"&&e.test(a))&&a>-1&&a%1==0&&a<n}return gs=r,gs}var ms,kc;function U0(){if(kc)return ms;kc=1;var t=W0(),e=Mv(),r=G0(),a=xn(),n=Cu();function i(o,s,u,l){if(!a(o))return o;s=e(s,o);for(var c=-1,f=s.length,v=f-1,h=o;h!=null&&++c<f;){var d=n(s[c]),m=u;if(d==="__proto__"||d==="constructor"||d==="prototype")return o;if(c!=v){var p=h[d];m=l?l(p,d,h):void 0,m===void 0&&(m=a(p)?p:r(s[c+1])?[]:{})}t(h,d,m),h=h[d]}return o}return ms=i,ms}var ys,Dc;function H0(){if(Dc)return ys;Dc=1;var t=U0();function e(r,a,n){return r==null?r:t(r,a,n)}return ys=e,ys}var K0=H0(),Y0=wn(K0),bs,Bc;function X0(){if(Bc)return bs;Bc=1;function t(e,r){var a=-1,n=e.length;for(r||(r=Array(n));++a<n;)r[a]=e[a];return r}return bs=t,bs}var ws,Ac;function Z0(){if(Ac)return ws;Ac=1;var t=Av(),e=X0(),r=zi(),a=En(),n=Bv(),i=Cu(),o=Lv();function s(u){return r(u)?t(u,i):a(u)?[u]:e(n(o(u)))}return ws=s,ws}var Q0=Z0(),j0=wn(Q0),J0={data:function(e){var r={field:"data",bindingEvent:"data",allowBinding:!1,allowSetting:!1,allowGetting:!1,settingEvent:"data",settingTriggersEvent:!1,triggerFnName:"trigger",immutableKeys:{},updateStyle:!1,beforeGet:function(n){},beforeSet:function(n,i){},onSet:function(n){},canSet:function(n){return!0}};return e=ge({},r,e),function(n,i){var o=e,s=this,u=s.length!==void 0,l=u?s:[s],c=u?s[0]:s;if(de(n)){var f=n.indexOf(".")!==-1,v=f&&j0(n);if(o.allowGetting&&i===void 0){var h;return c&&(o.beforeGet(c),v&&c._private[o.field][n]===void 0?h=q0(c._private[o.field],v):h=c._private[o.field][n]),h}else if(o.allowSetting&&i!==void 0){var d=!o.immutableKeys[n];if(d){var m=Xf({},n,i);o.beforeSet(s,m);for(var p=0,g=l.length;p<g;p++){var y=l[p];o.canSet(y)&&(v&&c._private[o.field][n]===void 0?Y0(y._private[o.field],v,i):y._private[o.field][n]=i)}o.updateStyle&&s.updateStyle(),o.onSet(s),o.settingTriggersEvent&&s[o.triggerFnName](o.settingEvent)}}}else if(o.allowSetting&&Ae(n)){var b=n,w,E,C=Object.keys(b);o.beforeSet(s,b);for(var x=0;x<C.length;x++){w=C[x],E=b[w];var R=!o.immutableKeys[w];if(R)for(var S=0;S<l.length;S++){var P=l[S];o.canSet(P)&&(P._private[o.field][w]=E)}}o.updateStyle&&s.updateStyle(),o.onSet(s),o.settingTriggersEvent&&s[o.triggerFnName](o.settingEvent)}else if(o.allowBinding&&Ke(n)){var k=n;s.on(o.bindingEvent,k)}else if(o.allowGetting&&n===void 0){var B;return c&&(o.beforeGet(c),B=c._private[o.field]),B}return s}},removeData:function(e){var r={field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!1,immutableKeys:{}};return e=ge({},r,e),function(n){var i=e,o=this,s=o.length!==void 0,u=s?o:[o];if(de(n)){for(var l=n.split(/\s+/),c=l.length,f=0;f<c;f++){var v=l[f];if(!Rr(v)){var h=!i.immutableKeys[v];if(h)for(var d=0,m=u.length;d<m;d++)u[d]._private[i.field][v]=void 0}}i.triggerEvent&&o[i.triggerFnName](i.event)}else if(n===void 0){for(var p=0,g=u.length;p<g;p++)for(var y=u[p]._private[i.field],b=Object.keys(y),w=0;w<b.length;w++){var E=b[w],C=!i.immutableKeys[E];C&&(y[E]=void 0)}i.triggerEvent&&o[i.triggerFnName](i.event)}return o}}},eb={eventAliasesOn:function(e){var r=e;r.addListener=r.listen=r.bind=r.on,r.unlisten=r.unbind=r.off=r.removeListener,r.trigger=r.emit,r.pon=r.promiseOn=function(a,n){var i=this,o=Array.prototype.slice.call(arguments,0);return new Ma(function(s,u){var l=function(h){i.off.apply(i,f),s(h)},c=o.concat([l]),f=c.concat([]);i.on.apply(i,c)})}}},Ie={};[o0,J0,eb].forEach(function(t){ge(Ie,t)});var tb={animate:Ie.animate(),animation:Ie.animation(),animated:Ie.animated(),clearQueue:Ie.clearQueue(),delay:Ie.delay(),delayAnimation:Ie.delayAnimation(),stop:Ie.stop()},si={classes:function(e){var r=this;if(e===void 0){var a=[];return r[0]._private.classes.forEach(function(d){return a.push(d)}),a}else qe(e)||(e=(e||"").match(/\S+/g)||[]);for(var n=[],i=new La(e),o=0;o<r.length;o++){for(var s=r[o],u=s._private,l=u.classes,c=!1,f=0;f<e.length;f++){var v=e[f],h=l.has(v);if(!h){c=!0;break}}c||(c=l.size!==e.length),c&&(u.classes=i,n.push(s))}return n.length>0&&this.spawn(n).updateStyle().emit("class"),r},addClass:function(e){return this.toggleClass(e,!0)},hasClass:function(e){var r=this[0];return r!=null&&r._private.classes.has(e)},toggleClass:function(e,r){qe(e)||(e=e.match(/\S+/g)||[]);for(var a=this,n=r===void 0,i=[],o=0,s=a.length;o<s;o++)for(var u=a[o],l=u._private.classes,c=!1,f=0;f<e.length;f++){var v=e[f],h=l.has(v),d=!1;r||n&&!h?(l.add(v),d=!0):(!r||n&&h)&&(l.delete(v),d=!0),!c&&d&&(i.push(u),c=!0)}return i.length>0&&this.spawn(i).updateStyle().emit("class"),a},removeClass:function(e){return this.toggleClass(e,!1)},flashClass:function(e,r){var a=this;if(r==null)r=250;else if(r===0)return a;return a.addClass(e),setTimeout(function(){a.removeClass(e)},r),a}};si.className=si.classNames=si.classes;var Be={metaChar:"[\\!\\\"\\#\\$\\%\\&\\'\\(\\)\\*\\+\\,\\.\\/\\:\\;\\<\\=\\>\\?\\@\\[\\]\\^\\`\\{\\|\\}\\~]",comparatorOp:"=|\\!=|>|>=|<|<=|\\$=|\\^=|\\*=",boolOp:"\\?|\\!|\\^",string:`"(?:\\\\"|[^"])*"|'(?:\\\\'|[^'])*'`,number:at,meta:"degree|indegree|outdegree",separator:"\\s*,\\s*",descendant:"\\s+",child:"\\s+>\\s+",subject:"\\$",group:"node|edge|\\*",directedEdge:"\\s+->\\s+",undirectedEdge:"\\s+<->\\s+"};Be.variable="(?:[\\w-.]|(?:\\\\"+Be.metaChar+"))+";Be.className="(?:[\\w-]|(?:\\\\"+Be.metaChar+"))+";Be.value=Be.string+"|"+Be.number;Be.id=Be.variable;(function(){var t,e,r;for(t=Be.comparatorOp.split("|"),r=0;r<t.length;r++)e=t[r],Be.comparatorOp+="|@"+e;for(t=Be.comparatorOp.split("|"),r=0;r<t.length;r++)e=t[r],!(e.indexOf("!")>=0)&&e!=="="&&(Be.comparatorOp+="|\\!"+e)})();var ze=function(){return{checks:[]}},se={GROUP:0,COLLECTION:1,FILTER:2,DATA_COMPARE:3,DATA_EXIST:4,DATA_BOOL:5,META_COMPARE:6,STATE:7,ID:8,CLASS:9,UNDIRECTED_EDGE:10,DIRECTED_EDGE:11,NODE_SOURCE:12,NODE_TARGET:13,NODE_NEIGHBOR:14,CHILD:15,DESCENDANT:16,PARENT:17,ANCESTOR:18,COMPOUND_SPLIT:19,TRUE:20},Us=[{selector:":selected",matches:function(e){return e.selected()}},{selector:":unselected",matches:function(e){return!e.selected()}},{selector:":selectable",matches:function(e){return e.selectable()}},{selector:":unselectable",matches:function(e){return!e.selectable()}},{selector:":locked",matches:function(e){return e.locked()}},{selector:":unlocked",matches:function(e){return!e.locked()}},{selector:":visible",matches:function(e){return e.visible()}},{selector:":hidden",matches:function(e){return!e.visible()}},{selector:":transparent",matches:function(e){return e.transparent()}},{selector:":grabbed",matches:function(e){return e.grabbed()}},{selector:":free",matches:function(e){return!e.grabbed()}},{selector:":removed",matches:function(e){return e.removed()}},{selector:":inside",matches:function(e){return!e.removed()}},{selector:":grabbable",matches:function(e){return e.grabbable()}},{selector:":ungrabbable",matches:function(e){return!e.grabbable()}},{selector:":animated",matches:function(e){return e.animated()}},{selector:":unanimated",matches:function(e){return!e.animated()}},{selector:":parent",matches:function(e){return e.isParent()}},{selector:":childless",matches:function(e){return e.isChildless()}},{selector:":child",matches:function(e){return e.isChild()}},{selector:":orphan",matches:function(e){return e.isOrphan()}},{selector:":nonorphan",matches:function(e){return e.isChild()}},{selector:":compound",matches:function(e){return e.isNode()?e.isParent():e.source().isParent()||e.target().isParent()}},{selector:":loop",matches:function(e){return e.isLoop()}},{selector:":simple",matches:function(e){return e.isSimple()}},{selector:":active",matches:function(e){return e.active()}},{selector:":inactive",matches:function(e){return!e.active()}},{selector:":backgrounding",matches:function(e){return e.backgrounding()}},{selector:":nonbackgrounding",matches:function(e){return!e.backgrounding()}}].sort(function(t,e){return rm(t.selector,e.selector)}),rb=function(){for(var t={},e,r=0;r<Us.length;r++)e=Us[r],t[e.selector]=e.matches;return t}(),ab=function(e,r){return rb[e](r)},nb="("+Us.map(function(t){return t.selector}).join("|")+")",sa=function(e){return e.replace(new RegExp("\\\\("+Be.metaChar+")","g"),function(r,a){return a})},xr=function(e,r,a){e[e.length-1]=a},Hs=[{name:"group",query:!0,regex:"("+Be.group+")",populate:function(e,r,a){var n=rt(a,1),i=n[0];r.checks.push({type:se.GROUP,value:i==="*"?i:i+"s"})}},{name:"state",query:!0,regex:nb,populate:function(e,r,a){var n=rt(a,1),i=n[0];r.checks.push({type:se.STATE,value:i})}},{name:"id",query:!0,regex:"\\#("+Be.id+")",populate:function(e,r,a){var n=rt(a,1),i=n[0];r.checks.push({type:se.ID,value:sa(i)})}},{name:"className",query:!0,regex:"\\.("+Be.className+")",populate:function(e,r,a){var n=rt(a,1),i=n[0];r.checks.push({type:se.CLASS,value:sa(i)})}},{name:"dataExists",query:!0,regex:"\\[\\s*("+Be.variable+")\\s*\\]",populate:function(e,r,a){var n=rt(a,1),i=n[0];r.checks.push({type:se.DATA_EXIST,field:sa(i)})}},{name:"dataCompare",query:!0,regex:"\\[\\s*("+Be.variable+")\\s*("+Be.comparatorOp+")\\s*("+Be.value+")\\s*\\]",populate:function(e,r,a){var n=rt(a,3),i=n[0],o=n[1],s=n[2],u=new RegExp("^"+Be.string+"$").exec(s)!=null;u?s=s.substring(1,s.length-1):s=parseFloat(s),r.checks.push({type:se.DATA_COMPARE,field:sa(i),operator:o,value:s})}},{name:"dataBool",query:!0,regex:"\\[\\s*("+Be.boolOp+")\\s*("+Be.variable+")\\s*\\]",populate:function(e,r,a){var n=rt(a,2),i=n[0],o=n[1];r.checks.push({type:se.DATA_BOOL,field:sa(o),operator:i})}},{name:"metaCompare",query:!0,regex:"\\[\\[\\s*("+Be.meta+")\\s*("+Be.comparatorOp+")\\s*("+Be.number+")\\s*\\]\\]",populate:function(e,r,a){var n=rt(a,3),i=n[0],o=n[1],s=n[2];r.checks.push({type:se.META_COMPARE,field:sa(i),operator:o,value:parseFloat(s)})}},{name:"nextQuery",separator:!0,regex:Be.separator,populate:function(e,r){var a=e.currentSubject,n=e.edgeCount,i=e.compoundCount,o=e[e.length-1];a!=null&&(o.subject=a,e.currentSubject=null),o.edgeCount=n,o.compoundCount=i,e.edgeCount=0,e.compoundCount=0;var s=e[e.length++]=ze();return s}},{name:"directedEdge",separator:!0,regex:Be.directedEdge,populate:function(e,r){if(e.currentSubject==null){var a=ze(),n=r,i=ze();return a.checks.push({type:se.DIRECTED_EDGE,source:n,target:i}),xr(e,r,a),e.edgeCount++,i}else{var o=ze(),s=r,u=ze();return o.checks.push({type:se.NODE_SOURCE,source:s,target:u}),xr(e,r,o),e.edgeCount++,u}}},{name:"undirectedEdge",separator:!0,regex:Be.undirectedEdge,populate:function(e,r){if(e.currentSubject==null){var a=ze(),n=r,i=ze();return a.checks.push({type:se.UNDIRECTED_EDGE,nodes:[n,i]}),xr(e,r,a),e.edgeCount++,i}else{var o=ze(),s=r,u=ze();return o.checks.push({type:se.NODE_NEIGHBOR,node:s,neighbor:u}),xr(e,r,o),u}}},{name:"child",separator:!0,regex:Be.child,populate:function(e,r){if(e.currentSubject==null){var a=ze(),n=ze(),i=e[e.length-1];return a.checks.push({type:se.CHILD,parent:i,child:n}),xr(e,r,a),e.compoundCount++,n}else if(e.currentSubject===r){var o=ze(),s=e[e.length-1],u=ze(),l=ze(),c=ze(),f=ze();return o.checks.push({type:se.COMPOUND_SPLIT,left:s,right:u,subject:l}),l.checks=r.checks,r.checks=[{type:se.TRUE}],f.checks.push({type:se.TRUE}),u.checks.push({type:se.PARENT,parent:f,child:c}),xr(e,s,o),e.currentSubject=l,e.compoundCount++,c}else{var v=ze(),h=ze(),d=[{type:se.PARENT,parent:v,child:h}];return v.checks=r.checks,r.checks=d,e.compoundCount++,h}}},{name:"descendant",separator:!0,regex:Be.descendant,populate:function(e,r){if(e.currentSubject==null){var a=ze(),n=ze(),i=e[e.length-1];return a.checks.push({type:se.DESCENDANT,ancestor:i,descendant:n}),xr(e,r,a),e.compoundCount++,n}else if(e.currentSubject===r){var o=ze(),s=e[e.length-1],u=ze(),l=ze(),c=ze(),f=ze();return o.checks.push({type:se.COMPOUND_SPLIT,left:s,right:u,subject:l}),l.checks=r.checks,r.checks=[{type:se.TRUE}],f.checks.push({type:se.TRUE}),u.checks.push({type:se.ANCESTOR,ancestor:f,descendant:c}),xr(e,s,o),e.currentSubject=l,e.compoundCount++,c}else{var v=ze(),h=ze(),d=[{type:se.ANCESTOR,ancestor:v,descendant:h}];return v.checks=r.checks,r.checks=d,e.compoundCount++,h}}},{name:"subject",modifier:!0,regex:Be.subject,populate:function(e,r){if(e.currentSubject!=null&&e.currentSubject!==r)return Oe("Redefinition of subject in selector `"+e.toString()+"`"),!1;e.currentSubject=r;var a=e[e.length-1],n=a.checks[0],i=n==null?null:n.type;i===se.DIRECTED_EDGE?n.type=se.NODE_TARGET:i===se.UNDIRECTED_EDGE&&(n.type=se.NODE_NEIGHBOR,n.node=n.nodes[1],n.neighbor=n.nodes[0],n.nodes=null)}}];Hs.forEach(function(t){return t.regexObj=new RegExp("^"+t.regex)});var ib=function(e){for(var r,a,n,i=0;i<Hs.length;i++){var o=Hs[i],s=o.name,u=e.match(o.regexObj);if(u!=null){a=u,r=o,n=s;var l=u[0];e=e.substring(l.length);break}}return{expr:r,match:a,name:n,remaining:e}},ob=function(e){var r=e.match(/^\s+/);if(r){var a=r[0];e=e.substring(a.length)}return e},sb=function(e){var r=this,a=r.inputText=e,n=r[0]=ze();for(r.length=1,a=ob(a);;){var i=ib(a);if(i.expr==null)return Oe("The selector `"+e+"`is invalid"),!1;var o=i.match.slice(1),s=i.expr.populate(r,n,o);if(s===!1)return!1;if(s!=null&&(n=s),a=i.remaining,a.match(/^\s*$/))break}var u=r[r.length-1];r.currentSubject!=null&&(u.subject=r.currentSubject),u.edgeCount=r.edgeCount,u.compoundCount=r.compoundCount;for(var l=0;l<r.length;l++){var c=r[l];if(c.compoundCount>0&&c.edgeCount>0)return Oe("The selector `"+e+"` is invalid because it uses both a compound selector and an edge selector"),!1;if(c.edgeCount>1)return Oe("The selector `"+e+"` is invalid because it uses multiple edge selectors"),!1;c.edgeCount===1&&Oe("The selector `"+e+"` is deprecated.  Edge selectors do not take effect on changes to source and target nodes after an edge is added, for performance reasons.  Use a class or data selector on edges instead, updating the class or data of an edge when your app detects a change in source or target nodes.")}return!0},ub=function(){if(this.toStringCache!=null)return this.toStringCache;for(var e=function(c){return c??""},r=function(c){return de(c)?'"'+c+'"':e(c)},a=function(c){return" "+c+" "},n=function(c,f){var v=c.type,h=c.value;switch(v){case se.GROUP:{var d=e(h);return d.substring(0,d.length-1)}case se.DATA_COMPARE:{var m=c.field,p=c.operator;return"["+m+a(e(p))+r(h)+"]"}case se.DATA_BOOL:{var g=c.operator,y=c.field;return"["+e(g)+y+"]"}case se.DATA_EXIST:{var b=c.field;return"["+b+"]"}case se.META_COMPARE:{var w=c.operator,E=c.field;return"[["+E+a(e(w))+r(h)+"]]"}case se.STATE:return h;case se.ID:return"#"+h;case se.CLASS:return"."+h;case se.PARENT:case se.CHILD:return i(c.parent,f)+a(">")+i(c.child,f);case se.ANCESTOR:case se.DESCENDANT:return i(c.ancestor,f)+" "+i(c.descendant,f);case se.COMPOUND_SPLIT:{var C=i(c.left,f),x=i(c.subject,f),R=i(c.right,f);return C+(C.length>0?" ":"")+x+R}case se.TRUE:return""}},i=function(c,f){return c.checks.reduce(function(v,h,d){return v+(f===c&&d===0?"$":"")+n(h,f)},"")},o="",s=0;s<this.length;s++){var u=this[s];o+=i(u,u.subject),this.length>1&&s<this.length-1&&(o+=", ")}return this.toStringCache=o,o},lb={parse:sb,toString:ub},Iv=function(e,r,a){var n,i=de(e),o=ie(e),s=de(a),u,l,c=!1,f=!1,v=!1;switch(r.indexOf("!")>=0&&(r=r.replace("!",""),f=!0),r.indexOf("@")>=0&&(r=r.replace("@",""),c=!0),(i||s||c)&&(u=!i&&!o?"":""+e,l=""+a),c&&(e=u=u.toLowerCase(),a=l=l.toLowerCase()),r){case"*=":n=u.indexOf(l)>=0;break;case"$=":n=u.indexOf(l,u.length-l.length)>=0;break;case"^=":n=u.indexOf(l)===0;break;case"=":n=e===a;break;case">":v=!0,n=e>a;break;case">=":v=!0,n=e>=a;break;case"<":v=!0,n=e<a;break;case"<=":v=!0,n=e<=a;break;default:n=!1;break}return f&&(e!=null||!v)&&(n=!n),n},cb=function(e,r){switch(r){case"?":return!!e;case"!":return!e;case"^":return e===void 0}},fb=function(e){return e!==void 0},Tu=function(e,r){return e.data(r)},vb=function(e,r){return e[r]()},Xe=[],Ge=function(e,r){return e.checks.every(function(a){return Xe[a.type](a,r)})};Xe[se.GROUP]=function(t,e){var r=t.value;return r==="*"||r===e.group()};Xe[se.STATE]=function(t,e){var r=t.value;return ab(r,e)};Xe[se.ID]=function(t,e){var r=t.value;return e.id()===r};Xe[se.CLASS]=function(t,e){var r=t.value;return e.hasClass(r)};Xe[se.META_COMPARE]=function(t,e){var r=t.field,a=t.operator,n=t.value;return Iv(vb(e,r),a,n)};Xe[se.DATA_COMPARE]=function(t,e){var r=t.field,a=t.operator,n=t.value;return Iv(Tu(e,r),a,n)};Xe[se.DATA_BOOL]=function(t,e){var r=t.field,a=t.operator;return cb(Tu(e,r),a)};Xe[se.DATA_EXIST]=function(t,e){var r=t.field;return t.operator,fb(Tu(e,r))};Xe[se.UNDIRECTED_EDGE]=function(t,e){var r=t.nodes[0],a=t.nodes[1],n=e.source(),i=e.target();return Ge(r,n)&&Ge(a,i)||Ge(a,n)&&Ge(r,i)};Xe[se.NODE_NEIGHBOR]=function(t,e){return Ge(t.node,e)&&e.neighborhood().some(function(r){return r.isNode()&&Ge(t.neighbor,r)})};Xe[se.DIRECTED_EDGE]=function(t,e){return Ge(t.source,e.source())&&Ge(t.target,e.target())};Xe[se.NODE_SOURCE]=function(t,e){return Ge(t.source,e)&&e.outgoers().some(function(r){return r.isNode()&&Ge(t.target,r)})};Xe[se.NODE_TARGET]=function(t,e){return Ge(t.target,e)&&e.incomers().some(function(r){return r.isNode()&&Ge(t.source,r)})};Xe[se.CHILD]=function(t,e){return Ge(t.child,e)&&Ge(t.parent,e.parent())};Xe[se.PARENT]=function(t,e){return Ge(t.parent,e)&&e.children().some(function(r){return Ge(t.child,r)})};Xe[se.DESCENDANT]=function(t,e){return Ge(t.descendant,e)&&e.ancestors().some(function(r){return Ge(t.ancestor,r)})};Xe[se.ANCESTOR]=function(t,e){return Ge(t.ancestor,e)&&e.descendants().some(function(r){return Ge(t.descendant,r)})};Xe[se.COMPOUND_SPLIT]=function(t,e){return Ge(t.subject,e)&&Ge(t.left,e)&&Ge(t.right,e)};Xe[se.TRUE]=function(){return!0};Xe[se.COLLECTION]=function(t,e){var r=t.value;return r.has(e)};Xe[se.FILTER]=function(t,e){var r=t.value;return r(e)};var db=function(e){var r=this;if(r.length===1&&r[0].checks.length===1&&r[0].checks[0].type===se.ID)return e.getElementById(r[0].checks[0].value).collection();var a=function(i){for(var o=0;o<r.length;o++){var s=r[o];if(Ge(s,i))return!0}return!1};return r.text()==null&&(a=function(){return!0}),e.filter(a)},hb=function(e){for(var r=this,a=0;a<r.length;a++){var n=r[a];if(Ge(n,e))return!0}return!1},pb={matches:hb,filter:db},Dr=function(e){this.inputText=e,this.currentSubject=null,this.compoundCount=0,this.edgeCount=0,this.length=0,e==null||de(e)&&e.match(/^\s*$/)||(At(e)?this.addQuery({checks:[{type:se.COLLECTION,value:e.collection()}]}):Ke(e)?this.addQuery({checks:[{type:se.FILTER,value:e}]}):de(e)?this.parse(e)||(this.invalid=!0):Ue("A selector must be created from a string; found "))},Br=Dr.prototype;[lb,pb].forEach(function(t){return ge(Br,t)});Br.text=function(){return this.inputText};Br.size=function(){return this.length};Br.eq=function(t){return this[t]};Br.sameText=function(t){return!this.invalid&&!t.invalid&&this.text()===t.text()};Br.addQuery=function(t){this[this.length++]=t};Br.selector=Br.toString;var Tr={allAre:function(e){var r=new Dr(e);return this.every(function(a){return r.matches(a)})},is:function(e){var r=new Dr(e);return this.some(function(a){return r.matches(a)})},some:function(e,r){for(var a=0;a<this.length;a++){var n=r?e.apply(r,[this[a],a,this]):e(this[a],a,this);if(n)return!0}return!1},every:function(e,r){for(var a=0;a<this.length;a++){var n=r?e.apply(r,[this[a],a,this]):e(this[a],a,this);if(!n)return!1}return!0},same:function(e){if(this===e)return!0;e=this.cy().collection(e);var r=this.length,a=e.length;return r!==a?!1:r===1?this[0]===e[0]:this.every(function(n){return e.hasElementWithId(n.id())})},anySame:function(e){return e=this.cy().collection(e),this.some(function(r){return e.hasElementWithId(r.id())})},allAreNeighbors:function(e){e=this.cy().collection(e);var r=this.neighborhood();return e.every(function(a){return r.hasElementWithId(a.id())})},contains:function(e){e=this.cy().collection(e);var r=this;return e.every(function(a){return r.hasElementWithId(a.id())})}};Tr.allAreNeighbours=Tr.allAreNeighbors;Tr.has=Tr.contains;Tr.equal=Tr.equals=Tr.same;var It=function(e,r){return function(n,i,o,s){var u=n,l=this,c;if(u==null?c="":At(u)&&u.length===1&&(c=u.id()),l.length===1&&c){var f=l[0]._private,v=f.traversalCache=f.traversalCache||{},h=v[r]=v[r]||[],d=Xr(c),m=h[d];return m||(h[d]=e.call(l,n,i,o,s))}else return e.call(l,n,i,o,s)}},Ba={parent:function(e){var r=[];if(this.length===1){var a=this[0]._private.parent;if(a)return a}for(var n=0;n<this.length;n++){var i=this[n],o=i._private.parent;o&&r.push(o)}return this.spawn(r,!0).filter(e)},parents:function(e){for(var r=[],a=this.parent();a.nonempty();){for(var n=0;n<a.length;n++){var i=a[n];r.push(i)}a=a.parent()}return this.spawn(r,!0).filter(e)},commonAncestors:function(e){for(var r,a=0;a<this.length;a++){var n=this[a],i=n.parents();r=r||i,r=r.intersect(i)}return r.filter(e)},orphans:function(e){return this.stdFilter(function(r){return r.isOrphan()}).filter(e)},nonorphans:function(e){return this.stdFilter(function(r){return r.isChild()}).filter(e)},children:It(function(t){for(var e=[],r=0;r<this.length;r++)for(var a=this[r],n=a._private.children,i=0;i<n.length;i++)e.push(n[i]);return this.spawn(e,!0).filter(t)},"children"),siblings:function(e){return this.parent().children().not(this).filter(e)},isParent:function(){var e=this[0];if(e)return e.isNode()&&e._private.children.length!==0},isChildless:function(){var e=this[0];if(e)return e.isNode()&&e._private.children.length===0},isChild:function(){var e=this[0];if(e)return e.isNode()&&e._private.parent!=null},isOrphan:function(){var e=this[0];if(e)return e.isNode()&&e._private.parent==null},descendants:function(e){var r=[];function a(n){for(var i=0;i<n.length;i++){var o=n[i];r.push(o),o.children().nonempty()&&a(o.children())}}return a(this.children()),this.spawn(r,!0).filter(e)}};function Su(t,e,r,a){for(var n=[],i=new La,o=t.cy(),s=o.hasCompoundNodes(),u=0;u<t.length;u++){var l=t[u];r?n.push(l):s&&a(n,i,l)}for(;n.length>0;){var c=n.shift();e(c),i.add(c.id()),s&&a(n,i,c)}return t}function Ov(t,e,r){if(r.isParent())for(var a=r._private.children,n=0;n<a.length;n++){var i=a[n];e.has(i.id())||t.push(i)}}Ba.forEachDown=function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return Su(this,t,e,Ov)};function Nv(t,e,r){if(r.isChild()){var a=r._private.parent;e.has(a.id())||t.push(a)}}Ba.forEachUp=function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return Su(this,t,e,Nv)};function gb(t,e,r){Nv(t,e,r),Ov(t,e,r)}Ba.forEachUpAndDown=function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return Su(this,t,e,gb)};Ba.ancestors=Ba.parents;var cn,Fv;cn=Fv={data:Ie.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),removeData:Ie.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),scratch:Ie.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:Ie.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),rscratch:Ie.data({field:"rscratch",allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!0}),removeRscratch:Ie.removeData({field:"rscratch",triggerEvent:!1}),id:function(){var e=this[0];if(e)return e._private.data.id}};cn.attr=cn.data;cn.removeAttr=cn.removeData;var mb=Fv,$i={};function xs(t){return function(e){var r=this;if(e===void 0&&(e=!0),r.length!==0)if(r.isNode()&&!r.removed()){for(var a=0,n=r[0],i=n._private.edges,o=0;o<i.length;o++){var s=i[o];!e&&s.isLoop()||(a+=t(n,s))}return a}else return}}ge($i,{degree:xs(function(t,e){return e.source().same(e.target())?2:1}),indegree:xs(function(t,e){return e.target().same(t)?1:0}),outdegree:xs(function(t,e){return e.source().same(t)?1:0})});function ua(t,e){return function(r){for(var a,n=this.nodes(),i=0;i<n.length;i++){var o=n[i],s=o[t](r);s!==void 0&&(a===void 0||e(s,a))&&(a=s)}return a}}ge($i,{minDegree:ua("degree",function(t,e){return t<e}),maxDegree:ua("degree",function(t,e){return t>e}),minIndegree:ua("indegree",function(t,e){return t<e}),maxIndegree:ua("indegree",function(t,e){return t>e}),minOutdegree:ua("outdegree",function(t,e){return t<e}),maxOutdegree:ua("outdegree",function(t,e){return t>e})});ge($i,{totalDegree:function(e){for(var r=0,a=this.nodes(),n=0;n<a.length;n++)r+=a[n].degree(e);return r}});var _t,zv,Vv=function(e,r,a){for(var n=0;n<e.length;n++){var i=e[n];if(!i.locked()){var o=i._private.position,s={x:r.x!=null?r.x-o.x:0,y:r.y!=null?r.y-o.y:0};i.isParent()&&!(s.x===0&&s.y===0)&&i.children().shift(s,a),i.dirtyBoundingBoxCache()}}},Lc={field:"position",bindingEvent:"position",allowBinding:!0,allowSetting:!0,settingEvent:"position",settingTriggersEvent:!0,triggerFnName:"emitAndNotify",allowGetting:!0,validKeys:["x","y"],beforeGet:function(e){e.updateCompoundBounds()},beforeSet:function(e,r){Vv(e,r,!1)},onSet:function(e){e.dirtyCompoundBoundsCache()},canSet:function(e){return!e.locked()}};_t=zv={position:Ie.data(Lc),silentPosition:Ie.data(ge({},Lc,{allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!1,beforeSet:function(e,r){Vv(e,r,!0)},onSet:function(e){e.dirtyCompoundBoundsCache()}})),positions:function(e,r){if(Ae(e))r?this.silentPosition(e):this.position(e);else if(Ke(e)){var a=e,n=this.cy();n.startBatch();for(var i=0;i<this.length;i++){var o=this[i],s=void 0;(s=a(o,i))&&(r?o.silentPosition(s):o.position(s))}n.endBatch()}return this},silentPositions:function(e){return this.positions(e,!0)},shift:function(e,r,a){var n;if(Ae(e)?(n={x:ie(e.x)?e.x:0,y:ie(e.y)?e.y:0},a=r):de(e)&&ie(r)&&(n={x:0,y:0},n[e]=r),n!=null){var i=this.cy();i.startBatch();for(var o=0;o<this.length;o++){var s=this[o];if(!(i.hasCompoundNodes()&&s.isChild()&&s.ancestors().anySame(this))){var u=s.position(),l={x:u.x+n.x,y:u.y+n.y};a?s.silentPosition(l):s.position(l)}}i.endBatch()}return this},silentShift:function(e,r){return Ae(e)?this.shift(e,!0):de(e)&&ie(r)&&this.shift(e,r,!0),this},renderedPosition:function(e,r){var a=this[0],n=this.cy(),i=n.zoom(),o=n.pan(),s=Ae(e)?e:void 0,u=s!==void 0||r!==void 0&&de(e);if(a&&a.isNode())if(u)for(var l=0;l<this.length;l++){var c=this[l];r!==void 0?c.position(e,(r-o[e])/i):s!==void 0&&c.position(hv(s,i,o))}else{var f=a.position();return s=Ni(f,i,o),e===void 0?s:s[e]}else if(!u)return;return this},relativePosition:function(e,r){var a=this[0],n=this.cy(),i=Ae(e)?e:void 0,o=i!==void 0||r!==void 0&&de(e),s=n.hasCompoundNodes();if(a&&a.isNode())if(o)for(var u=0;u<this.length;u++){var l=this[u],c=s?l.parent():null,f=c&&c.length>0,v=f;f&&(c=c[0]);var h=v?c.position():{x:0,y:0};r!==void 0?l.position(e,r+h[e]):i!==void 0&&l.position({x:i.x+h.x,y:i.y+h.y})}else{var d=a.position(),m=s?a.parent():null,p=m&&m.length>0,g=p;p&&(m=m[0]);var y=g?m.position():{x:0,y:0};return i={x:d.x-y.x,y:d.y-y.y},e===void 0?i:i[e]}else if(!o)return;return this}};_t.modelPosition=_t.point=_t.position;_t.modelPositions=_t.points=_t.positions;_t.renderedPoint=_t.renderedPosition;_t.relativePoint=_t.relativePosition;var yb=zv,Ra,Ir;Ra=Ir={};Ir.renderedBoundingBox=function(t){var e=this.boundingBox(t),r=this.cy(),a=r.zoom(),n=r.pan(),i=e.x1*a+n.x,o=e.x2*a+n.x,s=e.y1*a+n.y,u=e.y2*a+n.y;return{x1:i,x2:o,y1:s,y2:u,w:o-i,h:u-s}};Ir.dirtyCompoundBoundsCache=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,e=this.cy();return!e.styleEnabled()||!e.hasCompoundNodes()?this:(this.forEachUp(function(r){if(r.isParent()){var a=r._private;a.compoundBoundsClean=!1,a.bbCache=null,t||r.emitAndNotify("bounds")}}),this)};Ir.updateCompoundBounds=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,e=this.cy();if(!e.styleEnabled()||!e.hasCompoundNodes())return this;if(!t&&e.batching())return this;function r(o){if(!o.isParent())return;var s=o._private,u=o.children(),l=o.pstyle("compound-sizing-wrt-labels").value==="include",c={width:{val:o.pstyle("min-width").pfValue,left:o.pstyle("min-width-bias-left"),right:o.pstyle("min-width-bias-right")},height:{val:o.pstyle("min-height").pfValue,top:o.pstyle("min-height-bias-top"),bottom:o.pstyle("min-height-bias-bottom")}},f=u.boundingBox({includeLabels:l,includeOverlays:!1,useCache:!1}),v=s.position;(f.w===0||f.h===0)&&(f={w:o.pstyle("width").pfValue,h:o.pstyle("height").pfValue},f.x1=v.x-f.w/2,f.x2=v.x+f.w/2,f.y1=v.y-f.h/2,f.y2=v.y+f.h/2);function h(S,P,k){var B=0,D=0,A=P+k;return S>0&&A>0&&(B=P/A*S,D=k/A*S),{biasDiff:B,biasComplementDiff:D}}function d(S,P,k,B){if(k.units==="%")switch(B){case"width":return S>0?k.pfValue*S:0;case"height":return P>0?k.pfValue*P:0;case"average":return S>0&&P>0?k.pfValue*(S+P)/2:0;case"min":return S>0&&P>0?S>P?k.pfValue*P:k.pfValue*S:0;case"max":return S>0&&P>0?S>P?k.pfValue*S:k.pfValue*P:0;default:return 0}else return k.units==="px"?k.pfValue:0}var m=c.width.left.value;c.width.left.units==="px"&&c.width.val>0&&(m=m*100/c.width.val);var p=c.width.right.value;c.width.right.units==="px"&&c.width.val>0&&(p=p*100/c.width.val);var g=c.height.top.value;c.height.top.units==="px"&&c.height.val>0&&(g=g*100/c.height.val);var y=c.height.bottom.value;c.height.bottom.units==="px"&&c.height.val>0&&(y=y*100/c.height.val);var b=h(c.width.val-f.w,m,p),w=b.biasDiff,E=b.biasComplementDiff,C=h(c.height.val-f.h,g,y),x=C.biasDiff,R=C.biasComplementDiff;s.autoPadding=d(f.w,f.h,o.pstyle("padding"),o.pstyle("padding-relative-to").value),s.autoWidth=Math.max(f.w,c.width.val),v.x=(-w+f.x1+f.x2+E)/2,s.autoHeight=Math.max(f.h,c.height.val),v.y=(-x+f.y1+f.y2+R)/2}for(var a=0;a<this.length;a++){var n=this[a],i=n._private;(!i.compoundBoundsClean||t)&&(r(n),e.batching()||(i.compoundBoundsClean=!0))}return this};var Mt=function(e){return e===1/0||e===-1/0?0:e},qt=function(e,r,a,n,i){n-r===0||i-a===0||r==null||a==null||n==null||i==null||(e.x1=r<e.x1?r:e.x1,e.x2=n>e.x2?n:e.x2,e.y1=a<e.y1?a:e.y1,e.y2=i>e.y2?i:e.y2,e.w=e.x2-e.x1,e.h=e.y2-e.y1)},Wr=function(e,r){return r==null?e:qt(e,r.x1,r.y1,r.x2,r.y2)},$a=function(e,r,a){return Rt(e,r,a)},Gn=function(e,r,a){if(!r.cy().headless()){var n=r._private,i=n.rstyle,o=i.arrowWidth/2,s=r.pstyle(a+"-arrow-shape").value,u,l;if(s!=="none"){a==="source"?(u=i.srcX,l=i.srcY):a==="target"?(u=i.tgtX,l=i.tgtY):(u=i.midX,l=i.midY);var c=n.arrowBounds=n.arrowBounds||{},f=c[a]=c[a]||{};f.x1=u-o,f.y1=l-o,f.x2=u+o,f.y2=l+o,f.w=f.x2-f.x1,f.h=f.y2-f.y1,ii(f,1),qt(e,f.x1,f.y1,f.x2,f.y2)}}},Es=function(e,r,a){if(!r.cy().headless()){var n;a?n=a+"-":n="";var i=r._private,o=i.rstyle,s=r.pstyle(n+"label").strValue;if(s){var u=r.pstyle("text-halign"),l=r.pstyle("text-valign"),c=$a(o,"labelWidth",a),f=$a(o,"labelHeight",a),v=$a(o,"labelX",a),h=$a(o,"labelY",a),d=r.pstyle(n+"text-margin-x").pfValue,m=r.pstyle(n+"text-margin-y").pfValue,p=r.isEdge(),g=r.pstyle(n+"text-rotation"),y=r.pstyle("text-outline-width").pfValue,b=r.pstyle("text-border-width").pfValue,w=b/2,E=r.pstyle("text-background-padding").pfValue,C=2,x=f,R=c,S=R/2,P=x/2,k,B,D,A;if(p)k=v-S,B=v+S,D=h-P,A=h+P;else{switch(u.value){case"left":k=v-R,B=v;break;case"center":k=v-S,B=v+S;break;case"right":k=v,B=v+R;break}switch(l.value){case"top":D=h-x,A=h;break;case"center":D=h-P,A=h+P;break;case"bottom":D=h,A=h+x;break}}var L=d-Math.max(y,w)-E-C,I=d+Math.max(y,w)+E+C,M=m-Math.max(y,w)-E-C,O=m+Math.max(y,w)+E+C;k+=L,B+=I,D+=M,A+=O;var V=a||"main",W=i.labelBounds,N=W[V]=W[V]||{};N.x1=k,N.y1=D,N.x2=B,N.y2=A,N.w=B-k,N.h=A-D,N.leftPad=L,N.rightPad=I,N.topPad=M,N.botPad=O;var z=p&&g.strValue==="autorotate",X=g.pfValue!=null&&g.pfValue!==0;if(z||X){var j=z?$a(i.rstyle,"labelAngle",a):g.pfValue,J=Math.cos(j),G=Math.sin(j),Z=(k+B)/2,ae=(D+A)/2;if(!p){switch(u.value){case"left":Z=B;break;case"right":Z=k;break}switch(l.value){case"top":ae=A;break;case"bottom":ae=D;break}}var Q=function(Ne,ue){return Ne=Ne-Z,ue=ue-ae,{x:Ne*J-ue*G+Z,y:Ne*G+ue*J+ae}},F=Q(k,D),q=Q(k,A),U=Q(B,D),re=Q(B,A);k=Math.min(F.x,q.x,U.x,re.x),B=Math.max(F.x,q.x,U.x,re.x),D=Math.min(F.y,q.y,U.y,re.y),A=Math.max(F.y,q.y,U.y,re.y)}var oe=V+"Rot",xe=W[oe]=W[oe]||{};xe.x1=k,xe.y1=D,xe.x2=B,xe.y2=A,xe.w=B-k,xe.h=A-D,qt(e,k,D,B,A),qt(i.labelBounds.all,k,D,B,A)}return e}},bb=function(e,r){if(!r.cy().headless()){var a=r.pstyle("outline-opacity").value,n=r.pstyle("outline-width").value;if(a>0&&n>0){var i=r.pstyle("outline-offset").value,o=r.pstyle("shape").value,s=n+i,u=(e.w+s*2)/e.w,l=(e.h+s*2)/e.h,c=0,f=0;["diamond","pentagon","round-triangle"].includes(o)?(u=(e.w+s*2.4)/e.w,f=-s/3.6):["concave-hexagon","rhomboid","right-rhomboid"].includes(o)?u=(e.w+s*2.4)/e.w:o==="star"?(u=(e.w+s*2.8)/e.w,l=(e.h+s*2.6)/e.h,f=-s/3.8):o==="triangle"?(u=(e.w+s*2.8)/e.w,l=(e.h+s*2.4)/e.h,f=-s/1.4):o==="vee"&&(u=(e.w+s*4.4)/e.w,l=(e.h+s*3.8)/e.h,f=-s*.5);var v=e.h*l-e.h,h=e.w*u-e.w;if(oi(e,[Math.ceil(v/2),Math.ceil(h/2)]),c!=0||f!==0){var d=ry(e,c,f);pv(e,d)}}}},wb=function(e,r){var a=e._private.cy,n=a.styleEnabled(),i=a.headless(),o=Dt(),s=e._private,u=e.isNode(),l=e.isEdge(),c,f,v,h,d,m,p=s.rstyle,g=u&&n?e.pstyle("bounds-expansion").pfValue:[0],y=function(We){return We.pstyle("display").value!=="none"},b=!n||y(e)&&(!l||y(e.source())&&y(e.target()));if(b){var w=0,E=0;n&&r.includeOverlays&&(w=e.pstyle("overlay-opacity").value,w!==0&&(E=e.pstyle("overlay-padding").value));var C=0,x=0;n&&r.includeUnderlays&&(C=e.pstyle("underlay-opacity").value,C!==0&&(x=e.pstyle("underlay-padding").value));var R=Math.max(E,x),S=0,P=0;if(n&&(S=e.pstyle("width").pfValue,P=S/2),u&&r.includeNodes){var k=e.position();d=k.x,m=k.y;var B=e.outerWidth(),D=B/2,A=e.outerHeight(),L=A/2;c=d-D,f=d+D,v=m-L,h=m+L,qt(o,c,v,f,h),n&&r.includeOutlines&&bb(o,e)}else if(l&&r.includeEdges)if(n&&!i){var I=e.pstyle("curve-style").strValue;if(c=Math.min(p.srcX,p.midX,p.tgtX),f=Math.max(p.srcX,p.midX,p.tgtX),v=Math.min(p.srcY,p.midY,p.tgtY),h=Math.max(p.srcY,p.midY,p.tgtY),c-=P,f+=P,v-=P,h+=P,qt(o,c,v,f,h),I==="haystack"){var M=p.haystackPts;if(M&&M.length===2){if(c=M[0].x,v=M[0].y,f=M[1].x,h=M[1].y,c>f){var O=c;c=f,f=O}if(v>h){var V=v;v=h,h=V}qt(o,c-P,v-P,f+P,h+P)}}else if(I==="bezier"||I==="unbundled-bezier"||I.endsWith("segments")||I.endsWith("taxi")){var W;switch(I){case"bezier":case"unbundled-bezier":W=p.bezierPts;break;case"segments":case"taxi":case"round-segments":case"round-taxi":W=p.linePts;break}if(W!=null)for(var N=0;N<W.length;N++){var z=W[N];c=z.x-P,f=z.x+P,v=z.y-P,h=z.y+P,qt(o,c,v,f,h)}}}else{var X=e.source(),j=X.position(),J=e.target(),G=J.position();if(c=j.x,f=G.x,v=j.y,h=G.y,c>f){var Z=c;c=f,f=Z}if(v>h){var ae=v;v=h,h=ae}c-=P,f+=P,v-=P,h+=P,qt(o,c,v,f,h)}if(n&&r.includeEdges&&l&&(Gn(o,e,"mid-source"),Gn(o,e,"mid-target"),Gn(o,e,"source"),Gn(o,e,"target")),n){var Q=e.pstyle("ghost").value==="yes";if(Q){var F=e.pstyle("ghost-offset-x").pfValue,q=e.pstyle("ghost-offset-y").pfValue;qt(o,o.x1+F,o.y1+q,o.x2+F,o.y2+q)}}var U=s.bodyBounds=s.bodyBounds||{};bl(U,o),oi(U,g),ii(U,1),n&&(c=o.x1,f=o.x2,v=o.y1,h=o.y2,qt(o,c-R,v-R,f+R,h+R));var re=s.overlayBounds=s.overlayBounds||{};bl(re,o),oi(re,g),ii(re,1);var oe=s.labelBounds=s.labelBounds||{};oe.all!=null?ty(oe.all):oe.all=Dt(),n&&r.includeLabels&&(r.includeMainLabels&&Es(o,e,null),l&&(r.includeSourceLabels&&Es(o,e,"source"),r.includeTargetLabels&&Es(o,e,"target")))}return o.x1=Mt(o.x1),o.y1=Mt(o.y1),o.x2=Mt(o.x2),o.y2=Mt(o.y2),o.w=Mt(o.x2-o.x1),o.h=Mt(o.y2-o.y1),o.w>0&&o.h>0&&b&&(oi(o,g),ii(o,1)),o},qv=function(e){var r=0,a=function(o){return(o?1:0)<<r++},n=0;return n+=a(e.incudeNodes),n+=a(e.includeEdges),n+=a(e.includeLabels),n+=a(e.includeMainLabels),n+=a(e.includeSourceLabels),n+=a(e.includeTargetLabels),n+=a(e.includeOverlays),n+=a(e.includeOutlines),n},_v=function(e){var r=function(s){return Math.round(s)};if(e.isEdge()){var a=e.source().position(),n=e.target().position();return dl([r(a.x),r(a.y),r(n.x),r(n.y)])}else{var i=e.position();return dl([r(i.x),r(i.y)])}},Mc=function(e,r){var a=e._private,n,i=e.isEdge(),o=r==null?Ic:qv(r),s=o===Ic;if(a.bbCache==null?(n=wb(e,fn),a.bbCache=n,a.bbCachePosKey=_v(e)):n=a.bbCache,!s){var u=e.isNode();n=Dt(),(r.includeNodes&&u||r.includeEdges&&!u)&&(r.includeOverlays?Wr(n,a.overlayBounds):Wr(n,a.bodyBounds)),r.includeLabels&&(r.includeMainLabels&&(!i||r.includeSourceLabels&&r.includeTargetLabels)?Wr(n,a.labelBounds.all):(r.includeMainLabels&&Wr(n,a.labelBounds.mainRot),r.includeSourceLabels&&Wr(n,a.labelBounds.sourceRot),r.includeTargetLabels&&Wr(n,a.labelBounds.targetRot))),n.w=n.x2-n.x1,n.h=n.y2-n.y1}return n},fn={includeNodes:!0,includeEdges:!0,includeLabels:!0,includeMainLabels:!0,includeSourceLabels:!0,includeTargetLabels:!0,includeOverlays:!0,includeUnderlays:!0,includeOutlines:!0,useCache:!0},Ic=qv(fn),Oc=ht(fn);Ir.boundingBox=function(t){var e,r=t===void 0||t.useCache===void 0||t.useCache===!0,a=Pa(function(c){var f=c._private;return f.bbCache==null||f.styleDirty||f.bbCachePosKey!==_v(c)},function(c){return c.id()});if(r&&this.length===1&&!a(this[0]))t===void 0?t=fn:t=Oc(t),e=Mc(this[0],t);else{e=Dt(),t=t||fn;var n=Oc(t),i=this,o=i.cy(),s=o.styleEnabled();this.edges().forEach(a),this.nodes().forEach(a),s&&this.recalculateRenderedStyle(r),this.updateCompoundBounds(!r);for(var u=0;u<i.length;u++){var l=i[u];a(l)&&l.dirtyBoundingBoxCache(),Wr(e,Mc(l,n))}}return e.x1=Mt(e.x1),e.y1=Mt(e.y1),e.x2=Mt(e.x2),e.y2=Mt(e.y2),e.w=Mt(e.x2-e.x1),e.h=Mt(e.y2-e.y1),e};Ir.dirtyBoundingBoxCache=function(){for(var t=0;t<this.length;t++){var e=this[t]._private;e.bbCache=null,e.bbCachePosKey=null,e.bodyBounds=null,e.overlayBounds=null,e.labelBounds.all=null,e.labelBounds.source=null,e.labelBounds.target=null,e.labelBounds.main=null,e.labelBounds.sourceRot=null,e.labelBounds.targetRot=null,e.labelBounds.mainRot=null,e.arrowBounds.source=null,e.arrowBounds.target=null,e.arrowBounds["mid-source"]=null,e.arrowBounds["mid-target"]=null}return this.emitAndNotify("bounds"),this};Ir.boundingBoxAt=function(t){var e=this.nodes(),r=this.cy(),a=r.hasCompoundNodes(),n=r.collection();if(a&&(n=e.filter(function(l){return l.isParent()}),e=e.not(n)),Ae(t)){var i=t;t=function(){return i}}var o=function(c,f){return c._private.bbAtOldPos=t(c,f)},s=function(c){return c._private.bbAtOldPos};r.startBatch(),e.forEach(o).silentPositions(t),a&&(n.dirtyCompoundBoundsCache(),n.dirtyBoundingBoxCache(),n.updateCompoundBounds(!0));var u=ey(this.boundingBox({useCache:!1}));return e.silentPositions(s),a&&(n.dirtyCompoundBoundsCache(),n.dirtyBoundingBoxCache(),n.updateCompoundBounds(!0)),r.endBatch(),u};Ra.boundingbox=Ra.bb=Ra.boundingBox;Ra.renderedBoundingbox=Ra.renderedBoundingBox;var xb=Ir,ja,Sn;ja=Sn={};var $v=function(e){e.uppercaseName=ju(e.name),e.autoName="auto"+e.uppercaseName,e.labelName="label"+e.uppercaseName,e.outerName="outer"+e.uppercaseName,e.uppercaseOuterName=ju(e.outerName),ja[e.name]=function(){var a=this[0],n=a._private,i=n.cy,o=i._private.styleEnabled;if(a)if(o){if(a.isParent())return a.updateCompoundBounds(),n[e.autoName]||0;var s=a.pstyle(e.name);switch(s.strValue){case"label":return a.recalculateRenderedStyle(),n.rstyle[e.labelName]||0;default:return s.pfValue}}else return 1},ja["outer"+e.uppercaseName]=function(){var a=this[0],n=a._private,i=n.cy,o=i._private.styleEnabled;if(a)if(o){var s=a[e.name](),u=a.pstyle("border-position").value,l;u==="center"?l=a.pstyle("border-width").pfValue:u==="outside"?l=2*a.pstyle("border-width").pfValue:l=0;var c=2*a.padding();return s+l+c}else return 1},ja["rendered"+e.uppercaseName]=function(){var a=this[0];if(a){var n=a[e.name]();return n*this.cy().zoom()}},ja["rendered"+e.uppercaseOuterName]=function(){var a=this[0];if(a){var n=a[e.outerName]();return n*this.cy().zoom()}}};$v({name:"width"});$v({name:"height"});Sn.padding=function(){var t=this[0],e=t._private;return t.isParent()?(t.updateCompoundBounds(),e.autoPadding!==void 0?e.autoPadding:t.pstyle("padding").pfValue):t.pstyle("padding").pfValue};Sn.paddedHeight=function(){var t=this[0];return t.height()+2*t.padding()};Sn.paddedWidth=function(){var t=this[0];return t.width()+2*t.padding()};var Eb=Sn,Cb=function(e,r){if(e.isEdge()&&e.takesUpSpace())return r(e)},Tb=function(e,r){if(e.isEdge()&&e.takesUpSpace()){var a=e.cy();return Ni(r(e),a.zoom(),a.pan())}},Sb=function(e,r){if(e.isEdge()&&e.takesUpSpace()){var a=e.cy(),n=a.pan(),i=a.zoom();return r(e).map(function(o){return Ni(o,i,n)})}},Rb=function(e){return e.renderer().getControlPoints(e)},Pb=function(e){return e.renderer().getSegmentPoints(e)},kb=function(e){return e.renderer().getSourceEndpoint(e)},Db=function(e){return e.renderer().getTargetEndpoint(e)},Bb=function(e){return e.renderer().getEdgeMidpoint(e)},Nc={controlPoints:{get:Rb,mult:!0},segmentPoints:{get:Pb,mult:!0},sourceEndpoint:{get:kb},targetEndpoint:{get:Db},midpoint:{get:Bb}},Ab=function(e){return"rendered"+e[0].toUpperCase()+e.substr(1)},Lb=Object.keys(Nc).reduce(function(t,e){var r=Nc[e],a=Ab(e);return t[e]=function(){return Cb(this,r.get)},r.mult?t[a]=function(){return Sb(this,r.get)}:t[a]=function(){return Tb(this,r.get)},t},{}),Mb=ge({},yb,xb,Eb,Lb);/*!
Event object based on jQuery events, MIT license

https://jquery.org/license/
https://tldrlegal.com/license/mit-license
https://github.com/jquery/jquery/blob/master/src/event.js
*/var Wv=function(e,r){this.recycle(e,r)};function Wa(){return!1}function Un(){return!0}Wv.prototype={instanceString:function(){return"event"},recycle:function(e,r){if(this.isImmediatePropagationStopped=this.isPropagationStopped=this.isDefaultPrevented=Wa,e!=null&&e.preventDefault?(this.type=e.type,this.isDefaultPrevented=e.defaultPrevented?Un:Wa):e!=null&&e.type?r=e:this.type=e,r!=null&&(this.originalEvent=r.originalEvent,this.type=r.type!=null?r.type:this.type,this.cy=r.cy,this.target=r.target,this.position=r.position,this.renderedPosition=r.renderedPosition,this.namespace=r.namespace,this.layout=r.layout),this.cy!=null&&this.position!=null&&this.renderedPosition==null){var a=this.position,n=this.cy.zoom(),i=this.cy.pan();this.renderedPosition={x:a.x*n+i.x,y:a.y*n+i.y}}this.timeStamp=e&&e.timeStamp||Date.now()},preventDefault:function(){this.isDefaultPrevented=Un;var e=this.originalEvent;e&&e.preventDefault&&e.preventDefault()},stopPropagation:function(){this.isPropagationStopped=Un;var e=this.originalEvent;e&&e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=Un,this.stopPropagation()},isDefaultPrevented:Wa,isPropagationStopped:Wa,isImmediatePropagationStopped:Wa};var Gv=/^([^.]+)(\.(?:[^.]+))?$/,Ib=".*",Uv={qualifierCompare:function(e,r){return e===r},eventMatches:function(){return!0},addEventFields:function(){},callbackContext:function(e){return e},beforeEmit:function(){},afterEmit:function(){},bubble:function(){return!1},parent:function(){return null},context:null},Fc=Object.keys(Uv),Ob={};function Wi(){for(var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Ob,e=arguments.length>1?arguments[1]:void 0,r=0;r<Fc.length;r++){var a=Fc[r];this[a]=t[a]||Uv[a]}this.context=e||this.context,this.listeners=[],this.emitting=0}var Ar=Wi.prototype,Hv=function(e,r,a,n,i,o,s){Ke(n)&&(i=n,n=null),s&&(o==null?o=s:o=ge({},o,s));for(var u=qe(a)?a:a.split(/\s+/),l=0;l<u.length;l++){var c=u[l];if(!Rr(c)){var f=c.match(Gv);if(f){var v=f[1],h=f[2]?f[2]:null,d=r(e,c,v,h,n,i,o);if(d===!1)break}}}},zc=function(e,r){return e.addEventFields(e.context,r),new Wv(r.type,r)},Nb=function(e,r,a){if(Ug(a)){r(e,a);return}else if(Ae(a)){r(e,zc(e,a));return}for(var n=qe(a)?a:a.split(/\s+/),i=0;i<n.length;i++){var o=n[i];if(!Rr(o)){var s=o.match(Gv);if(s){var u=s[1],l=s[2]?s[2]:null,c=zc(e,{type:u,namespace:l,target:e.context});r(e,c)}}}};Ar.on=Ar.addListener=function(t,e,r,a,n){return Hv(this,function(i,o,s,u,l,c,f){Ke(c)&&i.listeners.push({event:o,callback:c,type:s,namespace:u,qualifier:l,conf:f})},t,e,r,a,n),this};Ar.one=function(t,e,r,a){return this.on(t,e,r,a,{one:!0})};Ar.removeListener=Ar.off=function(t,e,r,a){var n=this;this.emitting!==0&&(this.listeners=Tm(this.listeners));for(var i=this.listeners,o=function(l){var c=i[l];Hv(n,function(f,v,h,d,m,p){if((c.type===h||t==="*")&&(!d&&c.namespace!==".*"||c.namespace===d)&&(!m||f.qualifierCompare(c.qualifier,m))&&(!p||c.callback===p))return i.splice(l,1),!1},t,e,r,a)},s=i.length-1;s>=0;s--)o(s);return this};Ar.removeAllListeners=function(){return this.removeListener("*")};Ar.emit=Ar.trigger=function(t,e,r){var a=this.listeners,n=a.length;return this.emitting++,qe(e)||(e=[e]),Nb(this,function(i,o){r!=null&&(a=[{event:o.event,type:o.type,namespace:o.namespace,callback:r}],n=a.length);for(var s=function(){var c=a[u];if(c.type===o.type&&(!c.namespace||c.namespace===o.namespace||c.namespace===Ib)&&i.eventMatches(i.context,c,o)){var f=[o];e!=null&&Rm(f,e),i.beforeEmit(i.context,c,o),c.conf&&c.conf.one&&(i.listeners=i.listeners.filter(function(d){return d!==c}));var v=i.callbackContext(i.context,c,o),h=c.callback.apply(v,f);i.afterEmit(i.context,c,o),h===!1&&(o.stopPropagation(),o.preventDefault())}},u=0;u<n;u++)s();i.bubble(i.context)&&!o.isPropagationStopped()&&i.parent(i.context).emit(o,e)},t),this.emitting--,this};var Fb={qualifierCompare:function(e,r){return e==null||r==null?e==null&&r==null:e.sameText(r)},eventMatches:function(e,r,a){var n=r.qualifier;return n!=null?e!==a.target&&bn(a.target)&&n.matches(a.target):!0},addEventFields:function(e,r){r.cy=e.cy(),r.target=e},callbackContext:function(e,r,a){return r.qualifier!=null?a.target:e},beforeEmit:function(e,r){r.conf&&r.conf.once&&r.conf.onceCollection.removeListener(r.event,r.qualifier,r.callback)},bubble:function(){return!0},parent:function(e){return e.isChild()?e.parent():e.cy()}},Hn=function(e){return de(e)?new Dr(e):e},Kv={createEmitter:function(){for(var e=0;e<this.length;e++){var r=this[e],a=r._private;a.emitter||(a.emitter=new Wi(Fb,r))}return this},emitter:function(){return this._private.emitter},on:function(e,r,a){for(var n=Hn(r),i=0;i<this.length;i++){var o=this[i];o.emitter().on(e,n,a)}return this},removeListener:function(e,r,a){for(var n=Hn(r),i=0;i<this.length;i++){var o=this[i];o.emitter().removeListener(e,n,a)}return this},removeAllListeners:function(){for(var e=0;e<this.length;e++){var r=this[e];r.emitter().removeAllListeners()}return this},one:function(e,r,a){for(var n=Hn(r),i=0;i<this.length;i++){var o=this[i];o.emitter().one(e,n,a)}return this},once:function(e,r,a){for(var n=Hn(r),i=0;i<this.length;i++){var o=this[i];o.emitter().on(e,n,a,{once:!0,onceCollection:this})}},emit:function(e,r){for(var a=0;a<this.length;a++){var n=this[a];n.emitter().emit(e,r)}return this},emitAndNotify:function(e,r){if(this.length!==0)return this.cy().notify(e,this),this.emit(e,r),this}};Ie.eventAliasesOn(Kv);var Yv={nodes:function(e){return this.filter(function(r){return r.isNode()}).filter(e)},edges:function(e){return this.filter(function(r){return r.isEdge()}).filter(e)},byGroup:function(){for(var e=this.spawn(),r=this.spawn(),a=0;a<this.length;a++){var n=this[a];n.isNode()?e.push(n):r.push(n)}return{nodes:e,edges:r}},filter:function(e,r){if(e===void 0)return this;if(de(e)||At(e))return new Dr(e).filter(this);if(Ke(e)){for(var a=this.spawn(),n=this,i=0;i<n.length;i++){var o=n[i],s=r?e.apply(r,[o,i,n]):e(o,i,n);s&&a.push(o)}return a}return this.spawn()},not:function(e){if(e){de(e)&&(e=this.filter(e));for(var r=this.spawn(),a=0;a<this.length;a++){var n=this[a],i=e.has(n);i||r.push(n)}return r}else return this},absoluteComplement:function(){var e=this.cy();return e.mutableElements().not(this)},intersect:function(e){if(de(e)){var r=e;return this.filter(r)}for(var a=this.spawn(),n=this,i=e,o=this.length<e.length,s=o?n:i,u=o?i:n,l=0;l<s.length;l++){var c=s[l];u.has(c)&&a.push(c)}return a},xor:function(e){var r=this._private.cy;de(e)&&(e=r.$(e));var a=this.spawn(),n=this,i=e,o=function(u,l){for(var c=0;c<u.length;c++){var f=u[c],v=f._private.data.id,h=l.hasElementWithId(v);h||a.push(f)}};return o(n,i),o(i,n),a},diff:function(e){var r=this._private.cy;de(e)&&(e=r.$(e));var a=this.spawn(),n=this.spawn(),i=this.spawn(),o=this,s=e,u=function(c,f,v){for(var h=0;h<c.length;h++){var d=c[h],m=d._private.data.id,p=f.hasElementWithId(m);p?i.merge(d):v.push(d)}};return u(o,s,a),u(s,o,n),{left:a,right:n,both:i}},add:function(e){var r=this._private.cy;if(!e)return this;if(de(e)){var a=e;e=r.mutableElements().filter(a)}for(var n=this.spawnSelf(),i=0;i<e.length;i++){var o=e[i],s=!this.has(o);s&&n.push(o)}return n},merge:function(e){var r=this._private,a=r.cy;if(!e)return this;if(e&&de(e)){var n=e;e=a.mutableElements().filter(n)}for(var i=r.map,o=0;o<e.length;o++){var s=e[o],u=s._private.data.id,l=!i.has(u);if(l){var c=this.length++;this[c]=s,i.set(u,{ele:s,index:c})}}return this},unmergeAt:function(e){var r=this[e],a=r.id(),n=this._private,i=n.map;this[e]=void 0,i.delete(a);var o=e===this.length-1;if(this.length>1&&!o){var s=this.length-1,u=this[s],l=u._private.data.id;this[s]=void 0,this[e]=u,i.set(l,{ele:u,index:e})}return this.length--,this},unmergeOne:function(e){e=e[0];var r=this._private,a=e._private.data.id,n=r.map,i=n.get(a);if(!i)return this;var o=i.index;return this.unmergeAt(o),this},unmerge:function(e){var r=this._private.cy;if(!e)return this;if(e&&de(e)){var a=e;e=r.mutableElements().filter(a)}for(var n=0;n<e.length;n++)this.unmergeOne(e[n]);return this},unmergeBy:function(e){for(var r=this.length-1;r>=0;r--){var a=this[r];e(a)&&this.unmergeAt(r)}return this},map:function(e,r){for(var a=[],n=this,i=0;i<n.length;i++){var o=n[i],s=r?e.apply(r,[o,i,n]):e(o,i,n);a.push(s)}return a},reduce:function(e,r){for(var a=r,n=this,i=0;i<n.length;i++)a=e(a,n[i],i,n);return a},max:function(e,r){for(var a=-1/0,n,i=this,o=0;o<i.length;o++){var s=i[o],u=r?e.apply(r,[s,o,i]):e(s,o,i);u>a&&(a=u,n=s)}return{value:a,ele:n}},min:function(e,r){for(var a=1/0,n,i=this,o=0;o<i.length;o++){var s=i[o],u=r?e.apply(r,[s,o,i]):e(s,o,i);u<a&&(a=u,n=s)}return{value:a,ele:n}}},Me=Yv;Me.u=Me["|"]=Me["+"]=Me.union=Me.or=Me.add;Me["\\"]=Me["!"]=Me["-"]=Me.difference=Me.relativeComplement=Me.subtract=Me.not;Me.n=Me["&"]=Me["."]=Me.and=Me.intersection=Me.intersect;Me["^"]=Me["(+)"]=Me["(-)"]=Me.symmetricDifference=Me.symdiff=Me.xor;Me.fnFilter=Me.filterFn=Me.stdFilter=Me.filter;Me.complement=Me.abscomp=Me.absoluteComplement;var zb={isNode:function(){return this.group()==="nodes"},isEdge:function(){return this.group()==="edges"},isLoop:function(){return this.isEdge()&&this.source()[0]===this.target()[0]},isSimple:function(){return this.isEdge()&&this.source()[0]!==this.target()[0]},group:function(){var e=this[0];if(e)return e._private.group}},Xv=function(e,r){var a=e.cy(),n=a.hasCompoundNodes();function i(c){var f=c.pstyle("z-compound-depth");return f.value==="auto"?n?c.zDepth():0:f.value==="bottom"?-1:f.value==="top"?hu:0}var o=i(e)-i(r);if(o!==0)return o;function s(c){var f=c.pstyle("z-index-compare");return f.value==="auto"&&c.isNode()?1:0}var u=s(e)-s(r);if(u!==0)return u;var l=e.pstyle("z-index").value-r.pstyle("z-index").value;return l!==0?l:e.poolIndex()-r.poolIndex()},Ti={forEach:function(e,r){if(Ke(e))for(var a=this.length,n=0;n<a;n++){var i=this[n],o=r?e.apply(r,[i,n,this]):e(i,n,this);if(o===!1)break}return this},toArray:function(){for(var e=[],r=0;r<this.length;r++)e.push(this[r]);return e},slice:function(e,r){var a=[],n=this.length;r==null&&(r=n),e==null&&(e=0),e<0&&(e=n+e),r<0&&(r=n+r);for(var i=e;i>=0&&i<r&&i<n;i++)a.push(this[i]);return this.spawn(a)},size:function(){return this.length},eq:function(e){return this[e]||this.spawn()},first:function(){return this[0]||this.spawn()},last:function(){return this[this.length-1]||this.spawn()},empty:function(){return this.length===0},nonempty:function(){return!this.empty()},sort:function(e){if(!Ke(e))return this;var r=this.toArray().sort(e);return this.spawn(r)},sortByZIndex:function(){return this.sort(Xv)},zDepth:function(){var e=this[0];if(e){var r=e._private,a=r.group;if(a==="nodes"){var n=r.data.parent?e.parents().size():0;return e.isParent()?n:hu-1}else{var i=r.source,o=r.target,s=i.zDepth(),u=o.zDepth();return Math.max(s,u,0)}}}};Ti.each=Ti.forEach;var Vb=function(){var e="undefined",r=(typeof Symbol>"u"?"undefined":nt(Symbol))!=e&&nt(Symbol.iterator)!=e;r&&(Ti[Symbol.iterator]=function(){var a=this,n={value:void 0,done:!1},i=0,o=this.length;return Xf({next:function(){return i<o?n.value=a[i++]:(n.value=void 0,n.done=!0),n}},Symbol.iterator,function(){return this})})};Vb();var qb=ht({nodeDimensionsIncludeLabels:!1}),ui={layoutDimensions:function(e){e=qb(e);var r;if(!this.takesUpSpace())r={w:0,h:0};else if(e.nodeDimensionsIncludeLabels){var a=this.boundingBox();r={w:a.w,h:a.h}}else r={w:this.outerWidth(),h:this.outerHeight()};return(r.w===0||r.h===0)&&(r.w=r.h=1),r},layoutPositions:function(e,r,a){var n=this.nodes().filter(function(E){return!E.isParent()}),i=this.cy(),o=r.eles,s=function(C){return C.id()},u=Pa(a,s);e.emit({type:"layoutstart",layout:e}),e.animations=[];var l=function(C,x,R){var S={x:x.x1+x.w/2,y:x.y1+x.h/2},P={x:(R.x-S.x)*C,y:(R.y-S.y)*C};return{x:S.x+P.x,y:S.y+P.y}},c=r.spacingFactor&&r.spacingFactor!==1,f=function(){if(!c)return null;for(var C=Dt(),x=0;x<n.length;x++){var R=n[x],S=u(R,x);ay(C,S.x,S.y)}return C},v=f(),h=Pa(function(E,C){var x=u(E,C);if(c){var R=Math.abs(r.spacingFactor);x=l(R,v,x)}return r.transform!=null&&(x=r.transform(E,x)),x},s);if(r.animate){for(var d=0;d<n.length;d++){var m=n[d],p=h(m,d),g=r.animateFilter==null||r.animateFilter(m,d);if(g){var y=m.animation({position:p,duration:r.animationDuration,easing:r.animationEasing});e.animations.push(y)}else m.position(p)}if(r.fit){var b=i.animation({fit:{boundingBox:o.boundingBoxAt(h),padding:r.padding},duration:r.animationDuration,easing:r.animationEasing});e.animations.push(b)}else if(r.zoom!==void 0&&r.pan!==void 0){var w=i.animation({zoom:r.zoom,pan:r.pan,duration:r.animationDuration,easing:r.animationEasing});e.animations.push(w)}e.animations.forEach(function(E){return E.play()}),e.one("layoutready",r.ready),e.emit({type:"layoutready",layout:e}),Ma.all(e.animations.map(function(E){return E.promise()})).then(function(){e.one("layoutstop",r.stop),e.emit({type:"layoutstop",layout:e})})}else n.positions(h),r.fit&&i.fit(r.eles,r.padding),r.zoom!=null&&i.zoom(r.zoom),r.pan&&i.pan(r.pan),e.one("layoutready",r.ready),e.emit({type:"layoutready",layout:e}),e.one("layoutstop",r.stop),e.emit({type:"layoutstop",layout:e});return this},layout:function(e){var r=this.cy();return r.makeLayout(ge({},e,{eles:this}))}};ui.createLayout=ui.makeLayout=ui.layout;function Zv(t,e,r){var a=r._private,n=a.styleCache=a.styleCache||[],i;return(i=n[t])!=null||(i=n[t]=e(r)),i}function Gi(t,e){return t=Xr(t),function(a){return Zv(t,e,a)}}function Ui(t,e){t=Xr(t);var r=function(n){return e.call(n)};return function(){var n=this[0];if(n)return Zv(t,r,n)}}var vt={recalculateRenderedStyle:function(e){var r=this.cy(),a=r.renderer(),n=r.styleEnabled();return a&&n&&a.recalculateRenderedStyle(this,e),this},dirtyStyleCache:function(){var e=this.cy(),r=function(i){return i._private.styleCache=null};if(e.hasCompoundNodes()){var a;a=this.spawnSelf().merge(this.descendants()).merge(this.parents()),a.merge(a.connectedEdges()),a.forEach(r)}else this.forEach(function(n){r(n),n.connectedEdges().forEach(r)});return this},updateStyle:function(e){var r=this._private.cy;if(!r.styleEnabled())return this;if(r.batching()){var a=r._private.batchStyleEles;return a.merge(this),this}var n=r.hasCompoundNodes(),i=this;e=!!(e||e===void 0),n&&(i=this.spawnSelf().merge(this.descendants()).merge(this.parents()));var o=i;return e?o.emitAndNotify("style"):o.emit("style"),i.forEach(function(s){return s._private.styleDirty=!0}),this},cleanStyle:function(){var e=this.cy();if(e.styleEnabled())for(var r=0;r<this.length;r++){var a=this[r];a._private.styleDirty&&(a._private.styleDirty=!1,e.style().apply(a))}},parsedStyle:function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,a=this[0],n=a.cy();if(n.styleEnabled()&&a){a._private.styleDirty&&(a._private.styleDirty=!1,n.style().apply(a));var i=a._private.style[e];return i??(r?n.style().getDefaultProperty(e):null)}},numericStyle:function(e){var r=this[0];if(r.cy().styleEnabled()&&r){var a=r.pstyle(e);return a.pfValue!==void 0?a.pfValue:a.value}},numericStyleUnits:function(e){var r=this[0];if(r.cy().styleEnabled()&&r)return r.pstyle(e).units},renderedStyle:function(e){var r=this.cy();if(!r.styleEnabled())return this;var a=this[0];if(a)return r.style().getRenderedStyle(a,e)},style:function(e,r){var a=this.cy();if(!a.styleEnabled())return this;var n=!1,i=a.style();if(Ae(e)){var o=e;i.applyBypass(this,o,n),this.emitAndNotify("style")}else if(de(e))if(r===void 0){var s=this[0];return s?i.getStylePropertyValue(s,e):void 0}else i.applyBypass(this,e,r,n),this.emitAndNotify("style");else if(e===void 0){var u=this[0];return u?i.getRawStyle(u):void 0}return this},removeStyle:function(e){var r=this.cy();if(!r.styleEnabled())return this;var a=!1,n=r.style(),i=this;if(e===void 0)for(var o=0;o<i.length;o++){var s=i[o];n.removeAllBypasses(s,a)}else{e=e.split(/\s+/);for(var u=0;u<i.length;u++){var l=i[u];n.removeBypasses(l,e,a)}}return this.emitAndNotify("style"),this},show:function(){return this.css("display","element"),this},hide:function(){return this.css("display","none"),this},effectiveOpacity:function(){var e=this.cy();if(!e.styleEnabled())return 1;var r=e.hasCompoundNodes(),a=this[0];if(a){var n=a._private,i=a.pstyle("opacity").value;if(!r)return i;var o=n.data.parent?a.parents():null;if(o)for(var s=0;s<o.length;s++){var u=o[s],l=u.pstyle("opacity").value;i=l*i}return i}},transparent:function(){var e=this.cy();if(!e.styleEnabled())return!1;var r=this[0],a=r.cy().hasCompoundNodes();if(r)return a?r.effectiveOpacity()===0:r.pstyle("opacity").value===0},backgrounding:function(){var e=this.cy();if(!e.styleEnabled())return!1;var r=this[0];return!!r._private.backgrounding}};function Cs(t,e){var r=t._private,a=r.data.parent?t.parents():null;if(a)for(var n=0;n<a.length;n++){var i=a[n];if(!e(i))return!1}return!0}function Ru(t){var e=t.ok,r=t.edgeOkViaNode||t.ok,a=t.parentOk||t.ok;return function(){var n=this.cy();if(!n.styleEnabled())return!0;var i=this[0],o=n.hasCompoundNodes();if(i){var s=i._private;if(!e(i))return!1;if(i.isNode())return!o||Cs(i,a);var u=s.source,l=s.target;return r(u)&&(!o||Cs(u,r))&&(u===l||r(l)&&(!o||Cs(l,r)))}}}var Ia=Gi("eleTakesUpSpace",function(t){return t.pstyle("display").value==="element"&&t.width()!==0&&(t.isNode()?t.height()!==0:!0)});vt.takesUpSpace=Ui("takesUpSpace",Ru({ok:Ia}));var _b=Gi("eleInteractive",function(t){return t.pstyle("events").value==="yes"&&t.pstyle("visibility").value==="visible"&&Ia(t)}),$b=Gi("parentInteractive",function(t){return t.pstyle("visibility").value==="visible"&&Ia(t)});vt.interactive=Ui("interactive",Ru({ok:_b,parentOk:$b,edgeOkViaNode:Ia}));vt.noninteractive=function(){var t=this[0];if(t)return!t.interactive()};var Wb=Gi("eleVisible",function(t){return t.pstyle("visibility").value==="visible"&&t.pstyle("opacity").pfValue!==0&&Ia(t)}),Gb=Ia;vt.visible=Ui("visible",Ru({ok:Wb,edgeOkViaNode:Gb}));vt.hidden=function(){var t=this[0];if(t)return!t.visible()};vt.isBundledBezier=Ui("isBundledBezier",function(){return this.cy().styleEnabled()?!this.removed()&&this.pstyle("curve-style").value==="bezier"&&this.takesUpSpace():!1});vt.bypass=vt.css=vt.style;vt.renderedCss=vt.renderedStyle;vt.removeBypass=vt.removeCss=vt.removeStyle;vt.pstyle=vt.parsedStyle;var Sr={};function Vc(t){return function(){var e=arguments,r=[];if(e.length===2){var a=e[0],n=e[1];this.on(t.event,a,n)}else if(e.length===1&&Ke(e[0])){var i=e[0];this.on(t.event,i)}else if(e.length===0||e.length===1&&qe(e[0])){for(var o=e.length===1?e[0]:null,s=0;s<this.length;s++){var u=this[s],l=!t.ableField||u._private[t.ableField],c=u._private[t.field]!=t.value;if(t.overrideAble){var f=t.overrideAble(u);if(f!==void 0&&(l=f,!f))return this}l&&(u._private[t.field]=t.value,c&&r.push(u))}var v=this.spawn(r);v.updateStyle(),v.emit(t.event),o&&v.emit(o)}return this}}function Oa(t){Sr[t.field]=function(){var e=this[0];if(e){if(t.overrideField){var r=t.overrideField(e);if(r!==void 0)return r}return e._private[t.field]}},Sr[t.on]=Vc({event:t.on,field:t.field,ableField:t.ableField,overrideAble:t.overrideAble,value:!0}),Sr[t.off]=Vc({event:t.off,field:t.field,ableField:t.ableField,overrideAble:t.overrideAble,value:!1})}Oa({field:"locked",overrideField:function(e){return e.cy().autolock()?!0:void 0},on:"lock",off:"unlock"});Oa({field:"grabbable",overrideField:function(e){return e.cy().autoungrabify()||e.pannable()?!1:void 0},on:"grabify",off:"ungrabify"});Oa({field:"selected",ableField:"selectable",overrideAble:function(e){return e.cy().autounselectify()?!1:void 0},on:"select",off:"unselect"});Oa({field:"selectable",overrideField:function(e){return e.cy().autounselectify()?!1:void 0},on:"selectify",off:"unselectify"});Sr.deselect=Sr.unselect;Sr.grabbed=function(){var t=this[0];if(t)return t._private.grabbed};Oa({field:"active",on:"activate",off:"unactivate"});Oa({field:"pannable",on:"panify",off:"unpanify"});Sr.inactive=function(){var t=this[0];if(t)return!t._private.active};var mt={},qc=function(e){return function(a){for(var n=this,i=[],o=0;o<n.length;o++){var s=n[o];if(s.isNode()){for(var u=!1,l=s.connectedEdges(),c=0;c<l.length;c++){var f=l[c],v=f.source(),h=f.target();if(e.noIncomingEdges&&h===s&&v!==s||e.noOutgoingEdges&&v===s&&h!==s){u=!0;break}}u||i.push(s)}}return this.spawn(i,!0).filter(a)}},_c=function(e){return function(r){for(var a=this,n=[],i=0;i<a.length;i++){var o=a[i];if(o.isNode())for(var s=o.connectedEdges(),u=0;u<s.length;u++){var l=s[u],c=l.source(),f=l.target();e.outgoing&&c===o?(n.push(l),n.push(f)):e.incoming&&f===o&&(n.push(l),n.push(c))}}return this.spawn(n,!0).filter(r)}},$c=function(e){return function(r){for(var a=this,n=[],i={};;){var o=e.outgoing?a.outgoers():a.incomers();if(o.length===0)break;for(var s=!1,u=0;u<o.length;u++){var l=o[u],c=l.id();i[c]||(i[c]=!0,n.push(l),s=!0)}if(!s)break;a=o}return this.spawn(n,!0).filter(r)}};mt.clearTraversalCache=function(){for(var t=0;t<this.length;t++)this[t]._private.traversalCache=null};ge(mt,{roots:qc({noIncomingEdges:!0}),leaves:qc({noOutgoingEdges:!0}),outgoers:It(_c({outgoing:!0}),"outgoers"),successors:$c({outgoing:!0}),incomers:It(_c({incoming:!0}),"incomers"),predecessors:$c({})});ge(mt,{neighborhood:It(function(t){for(var e=[],r=this.nodes(),a=0;a<r.length;a++)for(var n=r[a],i=n.connectedEdges(),o=0;o<i.length;o++){var s=i[o],u=s.source(),l=s.target(),c=n===u?l:u;c.length>0&&e.push(c[0]),e.push(s[0])}return this.spawn(e,!0).filter(t)},"neighborhood"),closedNeighborhood:function(e){return this.neighborhood().add(this).filter(e)},openNeighborhood:function(e){return this.neighborhood(e)}});mt.neighbourhood=mt.neighborhood;mt.closedNeighbourhood=mt.closedNeighborhood;mt.openNeighbourhood=mt.openNeighborhood;ge(mt,{source:It(function(e){var r=this[0],a;return r&&(a=r._private.source||r.cy().collection()),a&&e?a.filter(e):a},"source"),target:It(function(e){var r=this[0],a;return r&&(a=r._private.target||r.cy().collection()),a&&e?a.filter(e):a},"target"),sources:Wc({attr:"source"}),targets:Wc({attr:"target"})});function Wc(t){return function(r){for(var a=[],n=0;n<this.length;n++){var i=this[n],o=i._private[t.attr];o&&a.push(o)}return this.spawn(a,!0).filter(r)}}ge(mt,{edgesWith:It(Gc(),"edgesWith"),edgesTo:It(Gc({thisIsSrc:!0}),"edgesTo")});function Gc(t){return function(r){var a=[],n=this._private.cy,i=t||{};de(r)&&(r=n.$(r));for(var o=0;o<r.length;o++)for(var s=r[o]._private.edges,u=0;u<s.length;u++){var l=s[u],c=l._private.data,f=this.hasElementWithId(c.source)&&r.hasElementWithId(c.target),v=r.hasElementWithId(c.source)&&this.hasElementWithId(c.target),h=f||v;h&&((i.thisIsSrc||i.thisIsTgt)&&(i.thisIsSrc&&!f||i.thisIsTgt&&!v)||a.push(l))}return this.spawn(a,!0)}}ge(mt,{connectedEdges:It(function(t){for(var e=[],r=this,a=0;a<r.length;a++){var n=r[a];if(n.isNode())for(var i=n._private.edges,o=0;o<i.length;o++){var s=i[o];e.push(s)}}return this.spawn(e,!0).filter(t)},"connectedEdges"),connectedNodes:It(function(t){for(var e=[],r=this,a=0;a<r.length;a++){var n=r[a];n.isEdge()&&(e.push(n.source()[0]),e.push(n.target()[0]))}return this.spawn(e,!0).filter(t)},"connectedNodes"),parallelEdges:It(Uc(),"parallelEdges"),codirectedEdges:It(Uc({codirected:!0}),"codirectedEdges")});function Uc(t){var e={codirected:!1};return t=ge({},e,t),function(a){for(var n=[],i=this.edges(),o=t,s=0;s<i.length;s++)for(var u=i[s],l=u._private,c=l.source,f=c._private.data.id,v=l.data.target,h=c._private.edges,d=0;d<h.length;d++){var m=h[d],p=m._private.data,g=p.target,y=p.source,b=g===v&&y===f,w=f===g&&v===y;(o.codirected&&b||!o.codirected&&(b||w))&&n.push(m)}return this.spawn(n,!0).filter(a)}}ge(mt,{components:function(e){var r=this,a=r.cy(),n=a.collection(),i=e==null?r.nodes():e.nodes(),o=[];e!=null&&i.empty()&&(i=e.sources());var s=function(c,f){n.merge(c),i.unmerge(c),f.merge(c)};if(i.empty())return r.spawn();var u=function(){var c=a.collection();o.push(c);var f=i[0];s(f,c),r.bfs({directed:!1,roots:f,visit:function(h){return s(h,c)}}),c.forEach(function(v){v.connectedEdges().forEach(function(h){r.has(h)&&c.has(h.source())&&c.has(h.target())&&c.merge(h)})})};do u();while(i.length>0);return o},component:function(){var e=this[0];return e.cy().mutableElements().components(e)[0]}});mt.componentsOf=mt.components;var dt=function(e,r){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(e===void 0){Ue("A collection must have a reference to the core");return}var i=new ir,o=!1;if(!r)r=[];else if(r.length>0&&Ae(r[0])&&!bn(r[0])){o=!0;for(var s=[],u=new La,l=0,c=r.length;l<c;l++){var f=r[l];f.data==null&&(f.data={});var v=f.data;if(v.id==null)v.id=vv();else if(e.hasElementWithId(v.id)||u.has(v.id))continue;var h=new Oi(e,f,!1);s.push(h),u.add(v.id)}r=s}this.length=0;for(var d=0,m=r.length;d<m;d++){var p=r[d][0];if(p!=null){var g=p._private.data.id;(!a||!i.has(g))&&(a&&i.set(g,{index:this.length,ele:p}),this[this.length]=p,this.length++)}}this._private={eles:this,cy:e,get map(){return this.lazyMap==null&&this.rebuildMap(),this.lazyMap},set map(y){this.lazyMap=y},rebuildMap:function(){for(var b=this.lazyMap=new ir,w=this.eles,E=0;E<w.length;E++){var C=w[E];b.set(C.id(),{index:E,ele:C})}}},a&&(this._private.map=i),o&&!n&&this.restore()},$e=Oi.prototype=dt.prototype=Object.create(Array.prototype);$e.instanceString=function(){return"collection"};$e.spawn=function(t,e){return new dt(this.cy(),t,e)};$e.spawnSelf=function(){return this.spawn(this)};$e.cy=function(){return this._private.cy};$e.renderer=function(){return this._private.cy.renderer()};$e.element=function(){return this[0]};$e.collection=function(){return jf(this)?this:new dt(this._private.cy,[this])};$e.unique=function(){return new dt(this._private.cy,this,!0)};$e.hasElementWithId=function(t){return t=""+t,this._private.map.has(t)};$e.getElementById=function(t){t=""+t;var e=this._private.cy,r=this._private.map.get(t);return r?r.ele:new dt(e)};$e.$id=$e.getElementById;$e.poolIndex=function(){var t=this._private.cy,e=t._private.elements,r=this[0]._private.data.id;return e._private.map.get(r).index};$e.indexOf=function(t){var e=t[0]._private.data.id;return this._private.map.get(e).index};$e.indexOfId=function(t){return t=""+t,this._private.map.get(t).index};$e.json=function(t){var e=this.element(),r=this.cy();if(e==null&&t)return this;if(e!=null){var a=e._private;if(Ae(t)){if(r.startBatch(),t.data){e.data(t.data);var n=a.data;if(e.isEdge()){var i=!1,o={},s=t.data.source,u=t.data.target;s!=null&&s!=n.source&&(o.source=""+s,i=!0),u!=null&&u!=n.target&&(o.target=""+u,i=!0),i&&(e=e.move(o))}else{var l="parent"in t.data,c=t.data.parent;l&&(c!=null||n.parent!=null)&&c!=n.parent&&(c===void 0&&(c=null),c!=null&&(c=""+c),e=e.move({parent:c}))}}t.position&&e.position(t.position);var f=function(m,p,g){var y=t[m];y!=null&&y!==a[m]&&(y?e[p]():e[g]())};return f("removed","remove","restore"),f("selected","select","unselect"),f("selectable","selectify","unselectify"),f("locked","lock","unlock"),f("grabbable","grabify","ungrabify"),f("pannable","panify","unpanify"),t.classes!=null&&e.classes(t.classes),r.endBatch(),this}else if(t===void 0){var v={data:Zt(a.data),position:Zt(a.position),group:a.group,removed:a.removed,selected:a.selected,selectable:a.selectable,locked:a.locked,grabbable:a.grabbable,pannable:a.pannable,classes:null};v.classes="";var h=0;return a.classes.forEach(function(d){return v.classes+=h++===0?d:" "+d}),v}}};$e.jsons=function(){for(var t=[],e=0;e<this.length;e++){var r=this[e],a=r.json();t.push(a)}return t};$e.clone=function(){for(var t=this.cy(),e=[],r=0;r<this.length;r++){var a=this[r],n=a.json(),i=new Oi(t,n,!1);e.push(i)}return new dt(t,e)};$e.copy=$e.clone;$e.restore=function(){for(var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,r=this,a=r.cy(),n=a._private,i=[],o=[],s,u=0,l=r.length;u<l;u++){var c=r[u];e&&!c.removed()||(c.isNode()?i.push(c):o.push(c))}s=i.concat(o);var f,v=function(){s.splice(f,1),f--};for(f=0;f<s.length;f++){var h=s[f],d=h._private,m=d.data;if(h.clearTraversalCache(),!(!e&&!d.removed)){if(m.id===void 0)m.id=vv();else if(ie(m.id))m.id=""+m.id;else if(Rr(m.id)||!de(m.id)){Ue("Can not create element with invalid string ID `"+m.id+"`"),v();continue}else if(a.hasElementWithId(m.id)){Ue("Can not create second element with ID `"+m.id+"`"),v();continue}}var p=m.id;if(h.isNode()){var g=d.position;g.x==null&&(g.x=0),g.y==null&&(g.y=0)}if(h.isEdge()){for(var y=h,b=["source","target"],w=b.length,E=!1,C=0;C<w;C++){var x=b[C],R=m[x];ie(R)&&(R=m[x]=""+m[x]),R==null||R===""?(Ue("Can not create edge `"+p+"` with unspecified "+x),E=!0):a.hasElementWithId(R)||(Ue("Can not create edge `"+p+"` with nonexistant "+x+" `"+R+"`"),E=!0)}if(E){v();continue}var S=a.getElementById(m.source),P=a.getElementById(m.target);S.same(P)?S._private.edges.push(y):(S._private.edges.push(y),P._private.edges.push(y)),y._private.source=S,y._private.target=P}d.map=new ir,d.map.set(p,{ele:h,index:0}),d.removed=!1,e&&a.addToPool(h)}for(var k=0;k<i.length;k++){var B=i[k],D=B._private.data;ie(D.parent)&&(D.parent=""+D.parent);var A=D.parent,L=A!=null;if(L||B._private.parent){var I=B._private.parent?a.collection().merge(B._private.parent):a.getElementById(A);if(I.empty())D.parent=void 0;else if(I[0].removed())Oe("Node added with missing parent, reference to parent removed"),D.parent=void 0,B._private.parent=null;else{for(var M=!1,O=I;!O.empty();){if(B.same(O)){M=!0,D.parent=void 0;break}O=O.parent()}M||(I[0]._private.children.push(B),B._private.parent=I[0],n.hasCompoundNodes=!0)}}}if(s.length>0){for(var V=s.length===r.length?r:new dt(a,s),W=0;W<V.length;W++){var N=V[W];N.isNode()||(N.parallelEdges().clearTraversalCache(),N.source().clearTraversalCache(),N.target().clearTraversalCache())}var z;n.hasCompoundNodes?z=a.collection().merge(V).merge(V.connectedNodes()).merge(V.parent()):z=V,z.dirtyCompoundBoundsCache().dirtyBoundingBoxCache().updateStyle(t),t?V.emitAndNotify("add"):e&&V.emit("add")}return r};$e.removed=function(){var t=this[0];return t&&t._private.removed};$e.inside=function(){var t=this[0];return t&&!t._private.removed};$e.remove=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,r=this,a=[],n={},i=r._private.cy;function o(A){for(var L=A._private.edges,I=0;I<L.length;I++)u(L[I])}function s(A){for(var L=A._private.children,I=0;I<L.length;I++)u(L[I])}function u(A){var L=n[A.id()];e&&A.removed()||L||(n[A.id()]=!0,A.isNode()?(a.push(A),o(A),s(A)):a.unshift(A))}for(var l=0,c=r.length;l<c;l++){var f=r[l];u(f)}function v(A,L){var I=A._private.edges;Pr(I,L),A.clearTraversalCache()}function h(A){A.clearTraversalCache()}var d=[];d.ids={};function m(A,L){L=L[0],A=A[0];var I=A._private.children,M=A.id();Pr(I,L),L._private.parent=null,d.ids[M]||(d.ids[M]=!0,d.push(A))}r.dirtyCompoundBoundsCache(),e&&i.removeFromPool(a);for(var p=0;p<a.length;p++){var g=a[p];if(g.isEdge()){var y=g.source()[0],b=g.target()[0];v(y,g),v(b,g);for(var w=g.parallelEdges(),E=0;E<w.length;E++){var C=w[E];h(C),C.isBundledBezier()&&C.dirtyBoundingBoxCache()}}else{var x=g.parent();x.length!==0&&m(x,g)}e&&(g._private.removed=!0)}var R=i._private.elements;i._private.hasCompoundNodes=!1;for(var S=0;S<R.length;S++){var P=R[S];if(P.isParent()){i._private.hasCompoundNodes=!0;break}}var k=new dt(this.cy(),a);k.size()>0&&(t?k.emitAndNotify("remove"):e&&k.emit("remove"));for(var B=0;B<d.length;B++){var D=d[B];(!e||!D.removed())&&D.updateStyle()}return k};$e.move=function(t){var e=this._private.cy,r=this,a=!1,n=!1,i=function(d){return d==null?d:""+d};if(t.source!==void 0||t.target!==void 0){var o=i(t.source),s=i(t.target),u=o!=null&&e.hasElementWithId(o),l=s!=null&&e.hasElementWithId(s);(u||l)&&(e.batch(function(){r.remove(a,n),r.emitAndNotify("moveout");for(var h=0;h<r.length;h++){var d=r[h],m=d._private.data;d.isEdge()&&(u&&(m.source=o),l&&(m.target=s))}r.restore(a,n)}),r.emitAndNotify("move"))}else if(t.parent!==void 0){var c=i(t.parent),f=c===null||e.hasElementWithId(c);if(f){var v=c===null?void 0:c;e.batch(function(){var h=r.remove(a,n);h.emitAndNotify("moveout");for(var d=0;d<r.length;d++){var m=r[d],p=m._private.data;m.isNode()&&(p.parent=v)}h.restore(a,n)}),r.emitAndNotify("move")}}return this};[Cv,tb,si,Tr,Ba,mb,$i,Mb,Kv,Yv,zb,Ti,ui,vt,Sr,mt].forEach(function(t){ge($e,t)});var Ub={add:function(e){var r,a=this;if(At(e)){var n=e;if(n._private.cy===a)r=n.restore();else{for(var i=[],o=0;o<n.length;o++){var s=n[o];i.push(s.json())}r=new dt(a,i)}}else if(qe(e)){var u=e;r=new dt(a,u)}else if(Ae(e)&&(qe(e.nodes)||qe(e.edges))){for(var l=e,c=[],f=["nodes","edges"],v=0,h=f.length;v<h;v++){var d=f[v],m=l[d];if(qe(m))for(var p=0,g=m.length;p<g;p++){var y=ge({group:d},m[p]);c.push(y)}}r=new dt(a,c)}else{var b=e;r=new Oi(a,b).collection()}return r},remove:function(e){if(!At(e)){if(de(e)){var r=e;e=this.$(r)}}return e.remove()}};/*! Bezier curve function generator. Copyright Gaetan Renaudeau. MIT License: http://en.wikipedia.org/wiki/MIT_License */function Hb(t,e,r,a){var n=4,i=.001,o=1e-7,s=10,u=11,l=1/(u-1),c=typeof Float32Array<"u";if(arguments.length!==4)return!1;for(var f=0;f<4;++f)if(typeof arguments[f]!="number"||isNaN(arguments[f])||!isFinite(arguments[f]))return!1;t=Math.min(t,1),r=Math.min(r,1),t=Math.max(t,0),r=Math.max(r,0);var v=c?new Float32Array(u):new Array(u);function h(P,k){return 1-3*k+3*P}function d(P,k){return 3*k-6*P}function m(P){return 3*P}function p(P,k,B){return((h(k,B)*P+d(k,B))*P+m(k))*P}function g(P,k,B){return 3*h(k,B)*P*P+2*d(k,B)*P+m(k)}function y(P,k){for(var B=0;B<n;++B){var D=g(k,t,r);if(D===0)return k;var A=p(k,t,r)-P;k-=A/D}return k}function b(){for(var P=0;P<u;++P)v[P]=p(P*l,t,r)}function w(P,k,B){var D,A,L=0;do A=k+(B-k)/2,D=p(A,t,r)-P,D>0?B=A:k=A;while(Math.abs(D)>o&&++L<s);return A}function E(P){for(var k=0,B=1,D=u-1;B!==D&&v[B]<=P;++B)k+=l;--B;var A=(P-v[B])/(v[B+1]-v[B]),L=k+A*l,I=g(L,t,r);return I>=i?y(P,L):I===0?L:w(P,k,k+l)}var C=!1;function x(){C=!0,(t!==e||r!==a)&&b()}var R=function(k){return C||x(),t===e&&r===a?k:k===0?0:k===1?1:p(E(k),e,a)};R.getControlPoints=function(){return[{x:t,y:e},{x:r,y:a}]};var S="generateBezier("+[t,e,r,a]+")";return R.toString=function(){return S},R}/*! Runge-Kutta spring physics function generator. Adapted from Framer.js, copyright Koen Bok. MIT License: http://en.wikipedia.org/wiki/MIT_License */var Kb=function(){function t(a){return-a.tension*a.x-a.friction*a.v}function e(a,n,i){var o={x:a.x+i.dx*n,v:a.v+i.dv*n,tension:a.tension,friction:a.friction};return{dx:o.v,dv:t(o)}}function r(a,n){var i={dx:a.v,dv:t(a)},o=e(a,n*.5,i),s=e(a,n*.5,o),u=e(a,n,s),l=1/6*(i.dx+2*(o.dx+s.dx)+u.dx),c=1/6*(i.dv+2*(o.dv+s.dv)+u.dv);return a.x=a.x+l*n,a.v=a.v+c*n,a}return function a(n,i,o){var s={x:-1,v:0,tension:null,friction:null},u=[0],l=0,c=1/1e4,f=16/1e3,v,h,d;for(n=parseFloat(n)||500,i=parseFloat(i)||20,o=o||null,s.tension=n,s.friction=i,v=o!==null,v?(l=a(n,i),h=l/o*f):h=f;d=r(d||s,h),u.push(1+d.x),l+=16,Math.abs(d.x)>c&&Math.abs(d.v)>c;);return v?function(m){return u[m*(u.length-1)|0]}:l}}(),_e=function(e,r,a,n){var i=Hb(e,r,a,n);return function(o,s,u){return o+(s-o)*i(u)}},li={linear:function(e,r,a){return e+(r-e)*a},ease:_e(.25,.1,.25,1),"ease-in":_e(.42,0,1,1),"ease-out":_e(0,0,.58,1),"ease-in-out":_e(.42,0,.58,1),"ease-in-sine":_e(.47,0,.745,.715),"ease-out-sine":_e(.39,.575,.565,1),"ease-in-out-sine":_e(.445,.05,.55,.95),"ease-in-quad":_e(.55,.085,.68,.53),"ease-out-quad":_e(.25,.46,.45,.94),"ease-in-out-quad":_e(.455,.03,.515,.955),"ease-in-cubic":_e(.55,.055,.675,.19),"ease-out-cubic":_e(.215,.61,.355,1),"ease-in-out-cubic":_e(.645,.045,.355,1),"ease-in-quart":_e(.895,.03,.685,.22),"ease-out-quart":_e(.165,.84,.44,1),"ease-in-out-quart":_e(.77,0,.175,1),"ease-in-quint":_e(.755,.05,.855,.06),"ease-out-quint":_e(.23,1,.32,1),"ease-in-out-quint":_e(.86,0,.07,1),"ease-in-expo":_e(.95,.05,.795,.035),"ease-out-expo":_e(.19,1,.22,1),"ease-in-out-expo":_e(1,0,0,1),"ease-in-circ":_e(.6,.04,.98,.335),"ease-out-circ":_e(.075,.82,.165,1),"ease-in-out-circ":_e(.785,.135,.15,.86),spring:function(e,r,a){if(a===0)return li.linear;var n=Kb(e,r,a);return function(i,o,s){return i+(o-i)*n(s)}},"cubic-bezier":_e};function Hc(t,e,r,a,n){if(a===1||e===r)return r;var i=n(e,r,a);return t==null||((t.roundValue||t.color)&&(i=Math.round(i)),t.min!==void 0&&(i=Math.max(i,t.min)),t.max!==void 0&&(i=Math.min(i,t.max))),i}function Kc(t,e){return t.pfValue!=null||t.value!=null?t.pfValue!=null&&(e==null||e.type.units!=="%")?t.pfValue:t.value:t}function la(t,e,r,a,n){var i=n!=null?n.type:null;r<0?r=0:r>1&&(r=1);var o=Kc(t,n),s=Kc(e,n);if(ie(o)&&ie(s))return Hc(i,o,s,r,a);if(qe(o)&&qe(s)){for(var u=[],l=0;l<s.length;l++){var c=o[l],f=s[l];if(c!=null&&f!=null){var v=Hc(i,c,f,r,a);u.push(v)}else u.push(f)}return u}}function Yb(t,e,r,a){var n=!a,i=t._private,o=e._private,s=o.easing,u=o.startTime,l=a?t:t.cy(),c=l.style();if(!o.easingImpl)if(s==null)o.easingImpl=li.linear;else{var f;if(de(s)){var v=c.parse("transition-timing-function",s);f=v.value}else f=s;var h,d;de(f)?(h=f,d=[]):(h=f[1],d=f.slice(2).map(function(V){return+V})),d.length>0?(h==="spring"&&d.push(o.duration),o.easingImpl=li[h].apply(null,d)):o.easingImpl=li[h]}var m=o.easingImpl,p;if(o.duration===0?p=1:p=(r-u)/o.duration,o.applying&&(p=o.progress),p<0?p=0:p>1&&(p=1),o.delay==null){var g=o.startPosition,y=o.position;if(y&&n&&!t.locked()){var b={};Ga(g.x,y.x)&&(b.x=la(g.x,y.x,p,m)),Ga(g.y,y.y)&&(b.y=la(g.y,y.y,p,m)),t.position(b)}var w=o.startPan,E=o.pan,C=i.pan,x=E!=null&&a;x&&(Ga(w.x,E.x)&&(C.x=la(w.x,E.x,p,m)),Ga(w.y,E.y)&&(C.y=la(w.y,E.y,p,m)),t.emit("pan"));var R=o.startZoom,S=o.zoom,P=S!=null&&a;P&&(Ga(R,S)&&(i.zoom=un(i.minZoom,la(R,S,p,m),i.maxZoom)),t.emit("zoom")),(x||P)&&t.emit("viewport");var k=o.style;if(k&&k.length>0&&n){for(var B=0;B<k.length;B++){var D=k[B],A=D.name,L=D,I=o.startStyle[A],M=c.properties[I.name],O=la(I,L,p,m,M);c.overrideBypass(t,A,O)}t.emit("style")}}return o.progress=p,p}function Ga(t,e){return t==null||e==null?!1:ie(t)&&ie(e)?!0:!!(t&&e)}function Xb(t,e,r,a){var n=e._private;n.started=!0,n.startTime=r-n.progress*n.duration}function Yc(t,e){var r=e._private.aniEles,a=[];function n(c,f){var v=c._private,h=v.animation.current,d=v.animation.queue,m=!1;if(h.length===0){var p=d.shift();p&&h.push(p)}for(var g=function(C){for(var x=C.length-1;x>=0;x--){var R=C[x];R()}C.splice(0,C.length)},y=h.length-1;y>=0;y--){var b=h[y],w=b._private;if(w.stopped){h.splice(y,1),w.hooked=!1,w.playing=!1,w.started=!1,g(w.frames);continue}!w.playing&&!w.applying||(w.playing&&w.applying&&(w.applying=!1),w.started||Xb(c,b,t),Yb(c,b,t,f),w.applying&&(w.applying=!1),g(w.frames),w.step!=null&&w.step(t),b.completed()&&(h.splice(y,1),w.hooked=!1,w.playing=!1,w.started=!1,g(w.completes)),m=!0)}return!f&&h.length===0&&d.length===0&&a.push(c),m}for(var i=!1,o=0;o<r.length;o++){var s=r[o],u=n(s);i=i||u}var l=n(e,!0);(i||l)&&(r.length>0?e.notify("draw",r):e.notify("draw")),r.unmerge(a),e.emit("step")}var Zb={animate:Ie.animate(),animation:Ie.animation(),animated:Ie.animated(),clearQueue:Ie.clearQueue(),delay:Ie.delay(),delayAnimation:Ie.delayAnimation(),stop:Ie.stop(),addToAnimationPool:function(e){var r=this;r.styleEnabled()&&r._private.aniEles.merge(e)},stopAnimationLoop:function(){this._private.animationsRunning=!1},startAnimationLoop:function(){var e=this;if(e._private.animationsRunning=!0,!e.styleEnabled())return;function r(){e._private.animationsRunning&&bi(function(i){Yc(i,e),r()})}var a=e.renderer();a&&a.beforeRender?a.beforeRender(function(i,o){Yc(o,e)},a.beforeRenderPriorities.animations):r()}},Qb={qualifierCompare:function(e,r){return e==null||r==null?e==null&&r==null:e.sameText(r)},eventMatches:function(e,r,a){var n=r.qualifier;return n!=null?e!==a.target&&bn(a.target)&&n.matches(a.target):!0},addEventFields:function(e,r){r.cy=e,r.target=e},callbackContext:function(e,r,a){return r.qualifier!=null?a.target:e}},Kn=function(e){return de(e)?new Dr(e):e},Qv={createEmitter:function(){var e=this._private;return e.emitter||(e.emitter=new Wi(Qb,this)),this},emitter:function(){return this._private.emitter},on:function(e,r,a){return this.emitter().on(e,Kn(r),a),this},removeListener:function(e,r,a){return this.emitter().removeListener(e,Kn(r),a),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},one:function(e,r,a){return this.emitter().one(e,Kn(r),a),this},once:function(e,r,a){return this.emitter().one(e,Kn(r),a),this},emit:function(e,r){return this.emitter().emit(e,r),this},emitAndNotify:function(e,r){return this.emit(e),this.notify(e,r),this}};Ie.eventAliasesOn(Qv);var Ks={png:function(e){var r=this._private.renderer;return e=e||{},r.png(e)},jpg:function(e){var r=this._private.renderer;return e=e||{},e.bg=e.bg||"#fff",r.jpg(e)}};Ks.jpeg=Ks.jpg;var ci={layout:function(e){var r=this;if(e==null){Ue("Layout options must be specified to make a layout");return}if(e.name==null){Ue("A `name` must be specified to make a layout");return}var a=e.name,n=r.extension("layout",a);if(n==null){Ue("No such layout `"+a+"` found.  Did you forget to import it and `cytoscape.use()` it?");return}var i;de(e.eles)?i=r.$(e.eles):i=e.eles!=null?e.eles:r.$();var o=new n(ge({},e,{cy:r,eles:i}));return o}};ci.createLayout=ci.makeLayout=ci.layout;var jb={notify:function(e,r){var a=this._private;if(this.batching()){a.batchNotifications=a.batchNotifications||{};var n=a.batchNotifications[e]=a.batchNotifications[e]||this.collection();r!=null&&n.merge(r);return}if(a.notificationsEnabled){var i=this.renderer();this.destroyed()||!i||i.notify(e,r)}},notifications:function(e){var r=this._private;return e===void 0?r.notificationsEnabled:(r.notificationsEnabled=!!e,this)},noNotifications:function(e){this.notifications(!1),e(),this.notifications(!0)},batching:function(){return this._private.batchCount>0},startBatch:function(){var e=this._private;return e.batchCount==null&&(e.batchCount=0),e.batchCount===0&&(e.batchStyleEles=this.collection(),e.batchNotifications={}),e.batchCount++,this},endBatch:function(){var e=this._private;if(e.batchCount===0)return this;if(e.batchCount--,e.batchCount===0){e.batchStyleEles.updateStyle();var r=this.renderer();Object.keys(e.batchNotifications).forEach(function(a){var n=e.batchNotifications[a];n.empty()?r.notify(a):r.notify(a,n)})}return this},batch:function(e){return this.startBatch(),e(),this.endBatch(),this},batchData:function(e){var r=this;return this.batch(function(){for(var a=Object.keys(e),n=0;n<a.length;n++){var i=a[n],o=e[i],s=r.getElementById(i);s.data(o)}})}},Jb=ht({hideEdgesOnViewport:!1,textureOnViewport:!1,motionBlur:!1,motionBlurOpacity:.05,pixelRatio:void 0,desktopTapThreshold:4,touchTapThreshold:8,wheelSensitivity:1,debug:!1,showFps:!1,webgl:!1,webglDebug:!1,webglDebugShowAtlases:!1,webglTexSize:2048,webglTexRows:36,webglTexRowsNodes:18,webglBatchSize:2048,webglTexPerBatch:14,webglBgColor:[255,255,255]}),Ys={renderTo:function(e,r,a,n){var i=this._private.renderer;return i.renderTo(e,r,a,n),this},renderer:function(){return this._private.renderer},forceRender:function(){return this.notify("draw"),this},resize:function(){return this.invalidateSize(),this.emitAndNotify("resize"),this},initRenderer:function(e){var r=this,a=r.extension("renderer",e.name);if(a==null){Ue("Can not initialise: No such renderer `".concat(e.name,"` found. Did you forget to import it and `cytoscape.use()` it?"));return}e.wheelSensitivity!==void 0&&Oe("You have set a custom wheel sensitivity.  This will make your app zoom unnaturally when using mainstream mice.  You should change this value from the default only if you can guarantee that all your users will use the same hardware and OS configuration as your current machine.");var n=Jb(e);n.cy=r,r._private.renderer=new a(n),this.notify("init")},destroyRenderer:function(){var e=this;e.notify("destroy");var r=e.container();if(r)for(r._cyreg=null;r.childNodes.length>0;)r.removeChild(r.childNodes[0]);e._private.renderer=null,e.mutableElements().forEach(function(a){var n=a._private;n.rscratch={},n.rstyle={},n.animation.current=[],n.animation.queue=[]})},onRender:function(e){return this.on("render",e)},offRender:function(e){return this.off("render",e)}};Ys.invalidateDimensions=Ys.resize;var fi={collection:function(e,r){return de(e)?this.$(e):At(e)?e.collection():qe(e)?(r||(r={}),new dt(this,e,r.unique,r.removed)):new dt(this)},nodes:function(e){var r=this.$(function(a){return a.isNode()});return e?r.filter(e):r},edges:function(e){var r=this.$(function(a){return a.isEdge()});return e?r.filter(e):r},$:function(e){var r=this._private.elements;return e?r.filter(e):r.spawnSelf()},mutableElements:function(){return this._private.elements}};fi.elements=fi.filter=fi.$;var lt={},en="t",ew="f";lt.apply=function(t){for(var e=this,r=e._private,a=r.cy,n=a.collection(),i=0;i<t.length;i++){var o=t[i],s=e.getContextMeta(o);if(!s.empty){var u=e.getContextStyle(s),l=e.applyContextStyle(s,u,o);o._private.appliedInitStyle?e.updateTransitions(o,l.diffProps):o._private.appliedInitStyle=!0;var c=e.updateStyleHints(o);c&&n.push(o)}}return n};lt.getPropertiesDiff=function(t,e){var r=this,a=r._private.propDiffs=r._private.propDiffs||{},n=t+"-"+e,i=a[n];if(i)return i;for(var o=[],s={},u=0;u<r.length;u++){var l=r[u],c=t[u]===en,f=e[u]===en,v=c!==f,h=l.mappedProperties.length>0;if(v||f&&h){var d=void 0;v&&h||v?d=l.properties:h&&(d=l.mappedProperties);for(var m=0;m<d.length;m++){for(var p=d[m],g=p.name,y=!1,b=u+1;b<r.length;b++){var w=r[b],E=e[b]===en;if(E&&(y=w.properties[p.name]!=null,y))break}!s[g]&&!y&&(s[g]=!0,o.push(g))}}}return a[n]=o,o};lt.getContextMeta=function(t){for(var e=this,r="",a,n=t._private.styleCxtKey||"",i=0;i<e.length;i++){var o=e[i],s=o.selector&&o.selector.matches(t);s?r+=en:r+=ew}return a=e.getPropertiesDiff(n,r),t._private.styleCxtKey=r,{key:r,diffPropNames:a,empty:a.length===0}};lt.getContextStyle=function(t){var e=t.key,r=this,a=this._private.contextStyles=this._private.contextStyles||{};if(a[e])return a[e];for(var n={_private:{key:e}},i=0;i<r.length;i++){var o=r[i],s=e[i]===en;if(s)for(var u=0;u<o.properties.length;u++){var l=o.properties[u];n[l.name]=l}}return a[e]=n,n};lt.applyContextStyle=function(t,e,r){for(var a=this,n=t.diffPropNames,i={},o=a.types,s=0;s<n.length;s++){var u=n[s],l=e[u],c=r.pstyle(u);if(!l)if(c)c.bypass?l={name:u,deleteBypassed:!0}:l={name:u,delete:!0};else continue;if(c!==l){if(l.mapped===o.fn&&c!=null&&c.mapping!=null&&c.mapping.value===l.value){var f=c.mapping,v=f.fnValue=l.value(r);if(v===f.prevFnValue)continue}var h=i[u]={prev:c};a.applyParsedProperty(r,l),h.next=r.pstyle(u),h.next&&h.next.bypass&&(h.next=h.next.bypassed)}}return{diffProps:i}};lt.updateStyleHints=function(t){var e=t._private,r=this,a=r.propertyGroupNames,n=r.propertyGroupKeys,i=function(U,re,oe){return r.getPropertiesHash(U,re,oe)},o=e.styleKey;if(t.removed())return!1;var s=e.group==="nodes",u=t._private.style;a=Object.keys(u);for(var l=0;l<n.length;l++){var c=n[l];e.styleKeys[c]=[Ur,ya]}for(var f=function(U,re){return e.styleKeys[re][0]=nn(U,e.styleKeys[re][0])},v=function(U,re){return e.styleKeys[re][1]=on(U,e.styleKeys[re][1])},h=function(U,re){f(U,re),v(U,re)},d=function(U,re){for(var oe=0;oe<U.length;oe++){var xe=U.charCodeAt(oe);f(xe,re),v(xe,re)}},m=2e9,p=function(U){return-128<U&&U<128&&Math.floor(U)!==U?m-(U*1024|0):U},g=0;g<a.length;g++){var y=a[g],b=u[y];if(b!=null){var w=this.properties[y],E=w.type,C=w.groupKey,x=void 0;w.hashOverride!=null?x=w.hashOverride(t,b):b.pfValue!=null&&(x=b.pfValue);var R=w.enums==null?b.value:null,S=x!=null,P=R!=null,k=S||P,B=b.units;if(E.number&&k&&!E.multiple){var D=S?x:R;h(p(D),C),!S&&B!=null&&d(B,C)}else d(b.strValue,C)}}for(var A=[Ur,ya],L=0;L<n.length;L++){var I=n[L],M=e.styleKeys[I];A[0]=nn(M[0],A[0]),A[1]=on(M[1],A[1])}e.styleKey=bm(A[0],A[1]);var O=e.styleKeys;e.labelDimsKey=wr(O.labelDimensions);var V=i(t,["label"],O.labelDimensions);if(e.labelKey=wr(V),e.labelStyleKey=wr(Vn(O.commonLabel,V)),!s){var W=i(t,["source-label"],O.labelDimensions);e.sourceLabelKey=wr(W),e.sourceLabelStyleKey=wr(Vn(O.commonLabel,W));var N=i(t,["target-label"],O.labelDimensions);e.targetLabelKey=wr(N),e.targetLabelStyleKey=wr(Vn(O.commonLabel,N))}if(s){var z=e.styleKeys,X=z.nodeBody,j=z.nodeBorder,J=z.nodeOutline,G=z.backgroundImage,Z=z.compound,ae=z.pie,Q=z.stripe,F=[X,j,J,G,Z,ae,Q].filter(function(q){return q!=null}).reduce(Vn,[Ur,ya]);e.nodeKey=wr(F),e.hasPie=ae!=null&&ae[0]!==Ur&&ae[1]!==ya,e.hasStripe=Q!=null&&Q[0]!==Ur&&Q[1]!==ya}return o!==e.styleKey};lt.clearStyleHints=function(t){var e=t._private;e.styleCxtKey="",e.styleKeys={},e.styleKey=null,e.labelKey=null,e.labelStyleKey=null,e.sourceLabelKey=null,e.sourceLabelStyleKey=null,e.targetLabelKey=null,e.targetLabelStyleKey=null,e.nodeKey=null,e.hasPie=null,e.hasStripe=null};lt.applyParsedProperty=function(t,e){var r=this,a=e,n=t._private.style,i,o=r.types,s=r.properties[a.name].type,u=a.bypass,l=n[a.name],c=l&&l.bypass,f=t._private,v="mapping",h=function(X){return X==null?null:X.pfValue!=null?X.pfValue:X.value},d=function(){var X=h(l),j=h(a);r.checkTriggers(t,a.name,X,j)};if(e.name==="curve-style"&&t.isEdge()&&(e.value!=="bezier"&&t.isLoop()||e.value==="haystack"&&(t.source().isParent()||t.target().isParent()))&&(a=e=this.parse(e.name,"bezier",u)),a.delete)return n[a.name]=void 0,d(),!0;if(a.deleteBypassed)return l?l.bypass?(l.bypassed=void 0,d(),!0):!1:(d(),!0);if(a.deleteBypass)return l?l.bypass?(n[a.name]=l.bypassed,d(),!0):!1:(d(),!0);var m=function(){Oe("Do not assign mappings to elements without corresponding data (i.e. ele `"+t.id()+"` has no mapping for property `"+a.name+"` with data field `"+a.field+"`); try a `["+a.field+"]` selector to limit scope to elements with `"+a.field+"` defined")};switch(a.mapped){case o.mapData:{for(var p=a.field.split("."),g=f.data,y=0;y<p.length&&g;y++){var b=p[y];g=g[b]}if(g==null)return m(),!1;var w;if(ie(g)){var E=a.fieldMax-a.fieldMin;E===0?w=0:w=(g-a.fieldMin)/E}else return Oe("Do not use continuous mappers without specifying numeric data (i.e. `"+a.field+": "+g+"` for `"+t.id()+"` is non-numeric)"),!1;if(w<0?w=0:w>1&&(w=1),s.color){var C=a.valueMin[0],x=a.valueMax[0],R=a.valueMin[1],S=a.valueMax[1],P=a.valueMin[2],k=a.valueMax[2],B=a.valueMin[3]==null?1:a.valueMin[3],D=a.valueMax[3]==null?1:a.valueMax[3],A=[Math.round(C+(x-C)*w),Math.round(R+(S-R)*w),Math.round(P+(k-P)*w),Math.round(B+(D-B)*w)];i={bypass:a.bypass,name:a.name,value:A,strValue:"rgb("+A[0]+", "+A[1]+", "+A[2]+")"}}else if(s.number){var L=a.valueMin+(a.valueMax-a.valueMin)*w;i=this.parse(a.name,L,a.bypass,v)}else return!1;if(!i)return m(),!1;i.mapping=a,a=i;break}case o.data:{for(var I=a.field.split("."),M=f.data,O=0;O<I.length&&M;O++){var V=I[O];M=M[V]}if(M!=null&&(i=this.parse(a.name,M,a.bypass,v)),!i)return m(),!1;i.mapping=a,a=i;break}case o.fn:{var W=a.value,N=a.fnValue!=null?a.fnValue:W(t);if(a.prevFnValue=N,N==null)return Oe("Custom function mappers may not return null (i.e. `"+a.name+"` for ele `"+t.id()+"` is null)"),!1;if(i=this.parse(a.name,N,a.bypass,v),!i)return Oe("Custom function mappers may not return invalid values for the property type (i.e. `"+a.name+"` for ele `"+t.id()+"` is invalid)"),!1;i.mapping=Zt(a),a=i;break}case void 0:break;default:return!1}return u?(c?a.bypassed=l.bypassed:a.bypassed=l,n[a.name]=a):c?l.bypassed=a:n[a.name]=a,d(),!0};lt.cleanElements=function(t,e){for(var r=0;r<t.length;r++){var a=t[r];if(this.clearStyleHints(a),a.dirtyCompoundBoundsCache(),a.dirtyBoundingBoxCache(),!e)a._private.style={};else for(var n=a._private.style,i=Object.keys(n),o=0;o<i.length;o++){var s=i[o],u=n[s];u!=null&&(u.bypass?u.bypassed=null:n[s]=null)}}};lt.update=function(){var t=this._private.cy,e=t.mutableElements();e.updateStyle()};lt.updateTransitions=function(t,e){var r=this,a=t._private,n=t.pstyle("transition-property").value,i=t.pstyle("transition-duration").pfValue,o=t.pstyle("transition-delay").pfValue;if(n.length>0&&i>0){for(var s={},u=!1,l=0;l<n.length;l++){var c=n[l],f=t.pstyle(c),v=e[c];if(v){var h=v.prev,d=h,m=v.next!=null?v.next:f,p=!1,g=void 0,y=1e-6;d&&(ie(d.pfValue)&&ie(m.pfValue)?(p=m.pfValue-d.pfValue,g=d.pfValue+y*p):ie(d.value)&&ie(m.value)?(p=m.value-d.value,g=d.value+y*p):qe(d.value)&&qe(m.value)&&(p=d.value[0]!==m.value[0]||d.value[1]!==m.value[1]||d.value[2]!==m.value[2],g=d.strValue),p&&(s[c]=m.strValue,this.applyBypass(t,c,g),u=!0))}}if(!u)return;a.transitioning=!0,new Ma(function(b){o>0?t.delayAnimation(o).play().promise().then(b):b()}).then(function(){return t.animation({style:s,duration:i,easing:t.pstyle("transition-timing-function").value,queue:!1}).play().promise()}).then(function(){r.removeBypasses(t,n),t.emitAndNotify("style"),a.transitioning=!1})}else a.transitioning&&(this.removeBypasses(t,n),t.emitAndNotify("style"),a.transitioning=!1)};lt.checkTrigger=function(t,e,r,a,n,i){var o=this.properties[e],s=n(o);t.removed()||s!=null&&s(r,a,t)&&i(o)};lt.checkZOrderTrigger=function(t,e,r,a){var n=this;this.checkTrigger(t,e,r,a,function(i){return i.triggersZOrder},function(){n._private.cy.notify("zorder",t)})};lt.checkBoundsTrigger=function(t,e,r,a){this.checkTrigger(t,e,r,a,function(n){return n.triggersBounds},function(n){t.dirtyCompoundBoundsCache(),t.dirtyBoundingBoxCache()})};lt.checkConnectedEdgesBoundsTrigger=function(t,e,r,a){this.checkTrigger(t,e,r,a,function(n){return n.triggersBoundsOfConnectedEdges},function(n){t.connectedEdges().forEach(function(i){i.dirtyBoundingBoxCache()})})};lt.checkParallelEdgesBoundsTrigger=function(t,e,r,a){this.checkTrigger(t,e,r,a,function(n){return n.triggersBoundsOfParallelEdges},function(n){t.parallelEdges().forEach(function(i){i.dirtyBoundingBoxCache()})})};lt.checkTriggers=function(t,e,r,a){t.dirtyStyleCache(),this.checkZOrderTrigger(t,e,r,a),this.checkBoundsTrigger(t,e,r,a),this.checkConnectedEdgesBoundsTrigger(t,e,r,a),this.checkParallelEdgesBoundsTrigger(t,e,r,a)};var Rn={};Rn.applyBypass=function(t,e,r,a){var n=this,i=[],o=!0;if(e==="*"||e==="**"){if(r!==void 0)for(var s=0;s<n.properties.length;s++){var u=n.properties[s],l=u.name,c=this.parse(l,r,!0);c&&i.push(c)}}else if(de(e)){var f=this.parse(e,r,!0);f&&i.push(f)}else if(Ae(e)){var v=e;a=r;for(var h=Object.keys(v),d=0;d<h.length;d++){var m=h[d],p=v[m];if(p===void 0&&(p=v[Mi(m)]),p!==void 0){var g=this.parse(m,p,!0);g&&i.push(g)}}}else return!1;if(i.length===0)return!1;for(var y=!1,b=0;b<t.length;b++){for(var w=t[b],E={},C=void 0,x=0;x<i.length;x++){var R=i[x];if(a){var S=w.pstyle(R.name);C=E[R.name]={prev:S}}y=this.applyParsedProperty(w,Zt(R))||y,a&&(C.next=w.pstyle(R.name))}y&&this.updateStyleHints(w),a&&this.updateTransitions(w,E,o)}return y};Rn.overrideBypass=function(t,e,r){e=vu(e);for(var a=0;a<t.length;a++){var n=t[a],i=n._private.style[e],o=this.properties[e].type,s=o.color,u=o.mutiple,l=i?i.pfValue!=null?i.pfValue:i.value:null;!i||!i.bypass?this.applyBypass(n,e,r):(i.value=r,i.pfValue!=null&&(i.pfValue=r),s?i.strValue="rgb("+r.join(",")+")":u?i.strValue=r.join(" "):i.strValue=""+r,this.updateStyleHints(n)),this.checkTriggers(n,e,l,r)}};Rn.removeAllBypasses=function(t,e){return this.removeBypasses(t,this.propertyNames,e)};Rn.removeBypasses=function(t,e,r){for(var a=!0,n=0;n<t.length;n++){for(var i=t[n],o={},s=0;s<e.length;s++){var u=e[s],l=this.properties[u],c=i.pstyle(l.name);if(!(!c||!c.bypass)){var f="",v=this.parse(u,f,!0),h=o[l.name]={prev:c};this.applyParsedProperty(i,v),h.next=i.pstyle(l.name)}}this.updateStyleHints(i),r&&this.updateTransitions(i,o,a)}};var Pu={};Pu.getEmSizeInPixels=function(){var t=this.containerCss("font-size");return t!=null?parseFloat(t):1};Pu.containerCss=function(t){var e=this._private.cy,r=e.container(),a=e.window();if(a&&r&&a.getComputedStyle)return a.getComputedStyle(r).getPropertyValue(t)};var Qt={};Qt.getRenderedStyle=function(t,e){return e?this.getStylePropertyValue(t,e,!0):this.getRawStyle(t,!0)};Qt.getRawStyle=function(t,e){var r=this;if(t=t[0],t){for(var a={},n=0;n<r.properties.length;n++){var i=r.properties[n],o=r.getStylePropertyValue(t,i.name,e);o!=null&&(a[i.name]=o,a[Mi(i.name)]=o)}return a}};Qt.getIndexedStyle=function(t,e,r,a){var n=t.pstyle(e)[r][a];return n??t.cy().style().getDefaultProperty(e)[r][0]};Qt.getStylePropertyValue=function(t,e,r){var a=this;if(t=t[0],t){var n=a.properties[e];n.alias&&(n=n.pointsTo);var i=n.type,o=t.pstyle(n.name);if(o){var s=o.value,u=o.units,l=o.strValue;if(r&&i.number&&s!=null&&ie(s)){var c=t.cy().zoom(),f=function(p){return p*c},v=function(p,g){return f(p)+g},h=qe(s),d=h?u.every(function(m){return m!=null}):u!=null;return d?h?s.map(function(m,p){return v(m,u[p])}).join(" "):v(s,u):h?s.map(function(m){return de(m)?m:""+f(m)}).join(" "):""+f(s)}else if(l!=null)return l}return null}};Qt.getAnimationStartStyle=function(t,e){for(var r={},a=0;a<e.length;a++){var n=e[a],i=n.name,o=t.pstyle(i);o!==void 0&&(Ae(o)?o=this.parse(i,o.strValue):o=this.parse(i,o)),o&&(r[i]=o)}return r};Qt.getPropsList=function(t){var e=this,r=[],a=t,n=e.properties;if(a)for(var i=Object.keys(a),o=0;o<i.length;o++){var s=i[o],u=a[s],l=n[s]||n[vu(s)],c=this.parse(l.name,u);c&&r.push(c)}return r};Qt.getNonDefaultPropertiesHash=function(t,e,r){var a=r.slice(),n,i,o,s,u,l;for(u=0;u<e.length;u++)if(n=e[u],i=t.pstyle(n,!1),i!=null)if(i.pfValue!=null)a[0]=nn(s,a[0]),a[1]=on(s,a[1]);else for(o=i.strValue,l=0;l<o.length;l++)s=o.charCodeAt(l),a[0]=nn(s,a[0]),a[1]=on(s,a[1]);return a};Qt.getPropertiesHash=Qt.getNonDefaultPropertiesHash;var Hi={};Hi.appendFromJson=function(t){for(var e=this,r=0;r<t.length;r++){var a=t[r],n=a.selector,i=a.style||a.css,o=Object.keys(i);e.selector(n);for(var s=0;s<o.length;s++){var u=o[s],l=i[u];e.css(u,l)}}return e};Hi.fromJson=function(t){var e=this;return e.resetToDefault(),e.appendFromJson(t),e};Hi.json=function(){for(var t=[],e=this.defaultLength;e<this.length;e++){for(var r=this[e],a=r.selector,n=r.properties,i={},o=0;o<n.length;o++){var s=n[o];i[s.name]=s.strValue}t.push({selector:a?a.toString():"core",style:i})}return t};var ku={};ku.appendFromString=function(t){var e=this,r=this,a=""+t,n,i,o;a=a.replace(/[/][*](\s|.)+?[*][/]/g,"");function s(){a.length>n.length?a=a.substr(n.length):a=""}function u(){i.length>o.length?i=i.substr(o.length):i=""}for(;;){var l=a.match(/^\s*$/);if(l)break;var c=a.match(/^\s*((?:.|\s)+?)\s*\{((?:.|\s)+?)\}/);if(!c){Oe("Halting stylesheet parsing: String stylesheet contains more to parse but no selector and block found in: "+a);break}n=c[0];var f=c[1];if(f!=="core"){var v=new Dr(f);if(v.invalid){Oe("Skipping parsing of block: Invalid selector found in string stylesheet: "+f),s();continue}}var h=c[2],d=!1;i=h;for(var m=[];;){var p=i.match(/^\s*$/);if(p)break;var g=i.match(/^\s*(.+?)\s*:\s*(.+?)(?:\s*;|\s*$)/);if(!g){Oe("Skipping parsing of block: Invalid formatting of style property and value definitions found in:"+h),d=!0;break}o=g[0];var y=g[1],b=g[2],w=e.properties[y];if(!w){Oe("Skipping property: Invalid property name in: "+o),u();continue}var E=r.parse(y,b);if(!E){Oe("Skipping property: Invalid property definition in: "+o),u();continue}m.push({name:y,val:b}),u()}if(d){s();break}r.selector(f);for(var C=0;C<m.length;C++){var x=m[C];r.css(x.name,x.val)}s()}return r};ku.fromString=function(t){var e=this;return e.resetToDefault(),e.appendFromString(t),e};var Je={};(function(){var t=at,e=Qg,r=Jg,a=em,n=tm,i=function(q){return"^"+q+"\\s*\\(\\s*([\\w\\.]+)\\s*\\)$"},o=function(q){var U=t+"|\\w+|"+e+"|"+r+"|"+a+"|"+n;return"^"+q+"\\s*\\(([\\w\\.]+)\\s*\\,\\s*("+t+")\\s*\\,\\s*("+t+")\\s*,\\s*("+U+")\\s*\\,\\s*("+U+")\\)$"},s=[`^url\\s*\\(\\s*['"]?(.+?)['"]?\\s*\\)$`,"^(none)$","^(.+)$"];Je.types={time:{number:!0,min:0,units:"s|ms",implicitUnits:"ms"},percent:{number:!0,min:0,max:100,units:"%",implicitUnits:"%"},percentages:{number:!0,min:0,max:100,units:"%",implicitUnits:"%",multiple:!0},zeroOneNumber:{number:!0,min:0,max:1,unitless:!0},zeroOneNumbers:{number:!0,min:0,max:1,unitless:!0,multiple:!0},nOneOneNumber:{number:!0,min:-1,max:1,unitless:!0},nonNegativeInt:{number:!0,min:0,integer:!0,unitless:!0},nonNegativeNumber:{number:!0,min:0,unitless:!0},position:{enums:["parent","origin"]},nodeSize:{number:!0,min:0,enums:["label"]},number:{number:!0,unitless:!0},numbers:{number:!0,unitless:!0,multiple:!0},positiveNumber:{number:!0,unitless:!0,min:0,strictMin:!0},size:{number:!0,min:0},bidirectionalSize:{number:!0},bidirectionalSizeMaybePercent:{number:!0,allowPercent:!0},bidirectionalSizes:{number:!0,multiple:!0},sizeMaybePercent:{number:!0,min:0,allowPercent:!0},axisDirection:{enums:["horizontal","leftward","rightward","vertical","upward","downward","auto"]},axisDirectionExplicit:{enums:["leftward","rightward","upward","downward"]},axisDirectionPrimary:{enums:["horizontal","vertical"]},paddingRelativeTo:{enums:["width","height","average","min","max"]},bgWH:{number:!0,min:0,allowPercent:!0,enums:["auto"],multiple:!0},bgPos:{number:!0,allowPercent:!0,multiple:!0},bgRelativeTo:{enums:["inner","include-padding"],multiple:!0},bgRepeat:{enums:["repeat","repeat-x","repeat-y","no-repeat"],multiple:!0},bgFit:{enums:["none","contain","cover"],multiple:!0},bgCrossOrigin:{enums:["anonymous","use-credentials","null"],multiple:!0},bgClip:{enums:["none","node"],multiple:!0},bgContainment:{enums:["inside","over"],multiple:!0},color:{color:!0},colors:{color:!0,multiple:!0},fill:{enums:["solid","linear-gradient","radial-gradient"]},bool:{enums:["yes","no"]},bools:{enums:["yes","no"],multiple:!0},lineStyle:{enums:["solid","dotted","dashed"]},lineCap:{enums:["butt","round","square"]},linePosition:{enums:["center","inside","outside"]},lineJoin:{enums:["round","bevel","miter"]},borderStyle:{enums:["solid","dotted","dashed","double"]},curveStyle:{enums:["bezier","unbundled-bezier","haystack","segments","straight","straight-triangle","taxi","round-segments","round-taxi"]},radiusType:{enums:["arc-radius","influence-radius"],multiple:!0},fontFamily:{regex:'^([\\w- \\"]+(?:\\s*,\\s*[\\w- \\"]+)*)$'},fontStyle:{enums:["italic","normal","oblique"]},fontWeight:{enums:["normal","bold","bolder","lighter","100","200","300","400","500","600","800","900",100,200,300,400,500,600,700,800,900]},textDecoration:{enums:["none","underline","overline","line-through"]},textTransform:{enums:["none","uppercase","lowercase"]},textWrap:{enums:["none","wrap","ellipsis"]},textOverflowWrap:{enums:["whitespace","anywhere"]},textBackgroundShape:{enums:["rectangle","roundrectangle","round-rectangle"]},nodeShape:{enums:["rectangle","roundrectangle","round-rectangle","cutrectangle","cut-rectangle","bottomroundrectangle","bottom-round-rectangle","barrel","ellipse","triangle","round-triangle","square","pentagon","round-pentagon","hexagon","round-hexagon","concavehexagon","concave-hexagon","heptagon","round-heptagon","octagon","round-octagon","tag","round-tag","star","diamond","round-diamond","vee","rhomboid","right-rhomboid","polygon"]},overlayShape:{enums:["roundrectangle","round-rectangle","ellipse"]},cornerRadius:{number:!0,min:0,units:"px|em",implicitUnits:"px",enums:["auto"]},compoundIncludeLabels:{enums:["include","exclude"]},arrowShape:{enums:["tee","triangle","triangle-tee","circle-triangle","triangle-cross","triangle-backcurve","vee","square","circle","diamond","chevron","none"]},arrowFill:{enums:["filled","hollow"]},arrowWidth:{number:!0,units:"%|px|em",implicitUnits:"px",enums:["match-line"]},display:{enums:["element","none"]},visibility:{enums:["hidden","visible"]},zCompoundDepth:{enums:["bottom","orphan","auto","top"]},zIndexCompare:{enums:["auto","manual"]},valign:{enums:["top","center","bottom"]},halign:{enums:["left","center","right"]},justification:{enums:["left","center","right","auto"]},text:{string:!0},data:{mapping:!0,regex:i("data")},layoutData:{mapping:!0,regex:i("layoutData")},scratch:{mapping:!0,regex:i("scratch")},mapData:{mapping:!0,regex:o("mapData")},mapLayoutData:{mapping:!0,regex:o("mapLayoutData")},mapScratch:{mapping:!0,regex:o("mapScratch")},fn:{mapping:!0,fn:!0},url:{regexes:s,singleRegexMatchValue:!0},urls:{regexes:s,singleRegexMatchValue:!0,multiple:!0},propList:{propList:!0},angle:{number:!0,units:"deg|rad",implicitUnits:"rad"},textRotation:{number:!0,units:"deg|rad",implicitUnits:"rad",enums:["none","autorotate"]},polygonPointList:{number:!0,multiple:!0,evenMultiple:!0,min:-1,max:1,unitless:!0},edgeDistances:{enums:["intersection","node-position","endpoints"]},edgeEndpoint:{number:!0,multiple:!0,units:"%|px|em|deg|rad",implicitUnits:"px",enums:["inside-to-node","outside-to-node","outside-to-node-or-label","outside-to-line","outside-to-line-or-label"],singleEnum:!0,validate:function(q,U){switch(q.length){case 2:return U[0]!=="deg"&&U[0]!=="rad"&&U[1]!=="deg"&&U[1]!=="rad";case 1:return de(q[0])||U[0]==="deg"||U[0]==="rad";default:return!1}}},easing:{regexes:["^(spring)\\s*\\(\\s*("+t+")\\s*,\\s*("+t+")\\s*\\)$","^(cubic-bezier)\\s*\\(\\s*("+t+")\\s*,\\s*("+t+")\\s*,\\s*("+t+")\\s*,\\s*("+t+")\\s*\\)$"],enums:["linear","ease","ease-in","ease-out","ease-in-out","ease-in-sine","ease-out-sine","ease-in-out-sine","ease-in-quad","ease-out-quad","ease-in-out-quad","ease-in-cubic","ease-out-cubic","ease-in-out-cubic","ease-in-quart","ease-out-quart","ease-in-out-quart","ease-in-quint","ease-out-quint","ease-in-out-quint","ease-in-expo","ease-out-expo","ease-in-out-expo","ease-in-circ","ease-out-circ","ease-in-out-circ"]},gradientDirection:{enums:["to-bottom","to-top","to-left","to-right","to-bottom-right","to-bottom-left","to-top-right","to-top-left","to-right-bottom","to-left-bottom","to-right-top","to-left-top"]},boundsExpansion:{number:!0,multiple:!0,min:0,validate:function(q){var U=q.length;return U===1||U===2||U===4}}};var u={zeroNonZero:function(q,U){return(q==null||U==null)&&q!==U||q==0&&U!=0?!0:q!=0&&U==0},any:function(q,U){return q!=U},emptyNonEmpty:function(q,U){var re=Rr(q),oe=Rr(U);return re&&!oe||!re&&oe}},l=Je.types,c=[{name:"label",type:l.text,triggersBounds:u.any,triggersZOrder:u.emptyNonEmpty},{name:"text-rotation",type:l.textRotation,triggersBounds:u.any},{name:"text-margin-x",type:l.bidirectionalSize,triggersBounds:u.any},{name:"text-margin-y",type:l.bidirectionalSize,triggersBounds:u.any}],f=[{name:"source-label",type:l.text,triggersBounds:u.any},{name:"source-text-rotation",type:l.textRotation,triggersBounds:u.any},{name:"source-text-margin-x",type:l.bidirectionalSize,triggersBounds:u.any},{name:"source-text-margin-y",type:l.bidirectionalSize,triggersBounds:u.any},{name:"source-text-offset",type:l.size,triggersBounds:u.any}],v=[{name:"target-label",type:l.text,triggersBounds:u.any},{name:"target-text-rotation",type:l.textRotation,triggersBounds:u.any},{name:"target-text-margin-x",type:l.bidirectionalSize,triggersBounds:u.any},{name:"target-text-margin-y",type:l.bidirectionalSize,triggersBounds:u.any},{name:"target-text-offset",type:l.size,triggersBounds:u.any}],h=[{name:"font-family",type:l.fontFamily,triggersBounds:u.any},{name:"font-style",type:l.fontStyle,triggersBounds:u.any},{name:"font-weight",type:l.fontWeight,triggersBounds:u.any},{name:"font-size",type:l.size,triggersBounds:u.any},{name:"text-transform",type:l.textTransform,triggersBounds:u.any},{name:"text-wrap",type:l.textWrap,triggersBounds:u.any},{name:"text-overflow-wrap",type:l.textOverflowWrap,triggersBounds:u.any},{name:"text-max-width",type:l.size,triggersBounds:u.any},{name:"text-outline-width",type:l.size,triggersBounds:u.any},{name:"line-height",type:l.positiveNumber,triggersBounds:u.any}],d=[{name:"text-valign",type:l.valign,triggersBounds:u.any},{name:"text-halign",type:l.halign,triggersBounds:u.any},{name:"color",type:l.color},{name:"text-outline-color",type:l.color},{name:"text-outline-opacity",type:l.zeroOneNumber},{name:"text-background-color",type:l.color},{name:"text-background-opacity",type:l.zeroOneNumber},{name:"text-background-padding",type:l.size,triggersBounds:u.any},{name:"text-border-opacity",type:l.zeroOneNumber},{name:"text-border-color",type:l.color},{name:"text-border-width",type:l.size,triggersBounds:u.any},{name:"text-border-style",type:l.borderStyle,triggersBounds:u.any},{name:"text-background-shape",type:l.textBackgroundShape,triggersBounds:u.any},{name:"text-justification",type:l.justification},{name:"box-select-labels",type:l.bool,triggersBounds:u.any}],m=[{name:"events",type:l.bool,triggersZOrder:u.any},{name:"text-events",type:l.bool,triggersZOrder:u.any}],p=[{name:"display",type:l.display,triggersZOrder:u.any,triggersBounds:u.any,triggersBoundsOfConnectedEdges:u.any,triggersBoundsOfParallelEdges:function(q,U,re){return q===U?!1:re.pstyle("curve-style").value==="bezier"}},{name:"visibility",type:l.visibility,triggersZOrder:u.any},{name:"opacity",type:l.zeroOneNumber,triggersZOrder:u.zeroNonZero},{name:"text-opacity",type:l.zeroOneNumber},{name:"min-zoomed-font-size",type:l.size},{name:"z-compound-depth",type:l.zCompoundDepth,triggersZOrder:u.any},{name:"z-index-compare",type:l.zIndexCompare,triggersZOrder:u.any},{name:"z-index",type:l.number,triggersZOrder:u.any}],g=[{name:"overlay-padding",type:l.size,triggersBounds:u.any},{name:"overlay-color",type:l.color},{name:"overlay-opacity",type:l.zeroOneNumber,triggersBounds:u.zeroNonZero},{name:"overlay-shape",type:l.overlayShape,triggersBounds:u.any},{name:"overlay-corner-radius",type:l.cornerRadius}],y=[{name:"underlay-padding",type:l.size,triggersBounds:u.any},{name:"underlay-color",type:l.color},{name:"underlay-opacity",type:l.zeroOneNumber,triggersBounds:u.zeroNonZero},{name:"underlay-shape",type:l.overlayShape,triggersBounds:u.any},{name:"underlay-corner-radius",type:l.cornerRadius}],b=[{name:"transition-property",type:l.propList},{name:"transition-duration",type:l.time},{name:"transition-delay",type:l.time},{name:"transition-timing-function",type:l.easing}],w=function(q,U){return U.value==="label"?-q.poolIndex():U.pfValue},E=[{name:"height",type:l.nodeSize,triggersBounds:u.any,hashOverride:w},{name:"width",type:l.nodeSize,triggersBounds:u.any,hashOverride:w},{name:"shape",type:l.nodeShape,triggersBounds:u.any},{name:"shape-polygon-points",type:l.polygonPointList,triggersBounds:u.any},{name:"corner-radius",type:l.cornerRadius},{name:"background-color",type:l.color},{name:"background-fill",type:l.fill},{name:"background-opacity",type:l.zeroOneNumber},{name:"background-blacken",type:l.nOneOneNumber},{name:"background-gradient-stop-colors",type:l.colors},{name:"background-gradient-stop-positions",type:l.percentages},{name:"background-gradient-direction",type:l.gradientDirection},{name:"padding",type:l.sizeMaybePercent,triggersBounds:u.any},{name:"padding-relative-to",type:l.paddingRelativeTo,triggersBounds:u.any},{name:"bounds-expansion",type:l.boundsExpansion,triggersBounds:u.any}],C=[{name:"border-color",type:l.color},{name:"border-opacity",type:l.zeroOneNumber},{name:"border-width",type:l.size,triggersBounds:u.any},{name:"border-style",type:l.borderStyle},{name:"border-cap",type:l.lineCap},{name:"border-join",type:l.lineJoin},{name:"border-dash-pattern",type:l.numbers},{name:"border-dash-offset",type:l.number},{name:"border-position",type:l.linePosition}],x=[{name:"outline-color",type:l.color},{name:"outline-opacity",type:l.zeroOneNumber},{name:"outline-width",type:l.size,triggersBounds:u.any},{name:"outline-style",type:l.borderStyle},{name:"outline-offset",type:l.size,triggersBounds:u.any}],R=[{name:"background-image",type:l.urls},{name:"background-image-crossorigin",type:l.bgCrossOrigin},{name:"background-image-opacity",type:l.zeroOneNumbers},{name:"background-image-containment",type:l.bgContainment},{name:"background-image-smoothing",type:l.bools},{name:"background-position-x",type:l.bgPos},{name:"background-position-y",type:l.bgPos},{name:"background-width-relative-to",type:l.bgRelativeTo},{name:"background-height-relative-to",type:l.bgRelativeTo},{name:"background-repeat",type:l.bgRepeat},{name:"background-fit",type:l.bgFit},{name:"background-clip",type:l.bgClip},{name:"background-width",type:l.bgWH},{name:"background-height",type:l.bgWH},{name:"background-offset-x",type:l.bgPos},{name:"background-offset-y",type:l.bgPos}],S=[{name:"position",type:l.position,triggersBounds:u.any},{name:"compound-sizing-wrt-labels",type:l.compoundIncludeLabels,triggersBounds:u.any},{name:"min-width",type:l.size,triggersBounds:u.any},{name:"min-width-bias-left",type:l.sizeMaybePercent,triggersBounds:u.any},{name:"min-width-bias-right",type:l.sizeMaybePercent,triggersBounds:u.any},{name:"min-height",type:l.size,triggersBounds:u.any},{name:"min-height-bias-top",type:l.sizeMaybePercent,triggersBounds:u.any},{name:"min-height-bias-bottom",type:l.sizeMaybePercent,triggersBounds:u.any}],P=[{name:"line-style",type:l.lineStyle},{name:"line-color",type:l.color},{name:"line-fill",type:l.fill},{name:"line-cap",type:l.lineCap},{name:"line-opacity",type:l.zeroOneNumber},{name:"line-dash-pattern",type:l.numbers},{name:"line-dash-offset",type:l.number},{name:"line-outline-width",type:l.size},{name:"line-outline-color",type:l.color},{name:"line-gradient-stop-colors",type:l.colors},{name:"line-gradient-stop-positions",type:l.percentages},{name:"curve-style",type:l.curveStyle,triggersBounds:u.any,triggersBoundsOfParallelEdges:function(q,U){return q===U?!1:q==="bezier"||U==="bezier"}},{name:"haystack-radius",type:l.zeroOneNumber,triggersBounds:u.any},{name:"source-endpoint",type:l.edgeEndpoint,triggersBounds:u.any},{name:"target-endpoint",type:l.edgeEndpoint,triggersBounds:u.any},{name:"control-point-step-size",type:l.size,triggersBounds:u.any},{name:"control-point-distances",type:l.bidirectionalSizes,triggersBounds:u.any},{name:"control-point-weights",type:l.numbers,triggersBounds:u.any},{name:"segment-distances",type:l.bidirectionalSizes,triggersBounds:u.any},{name:"segment-weights",type:l.numbers,triggersBounds:u.any},{name:"segment-radii",type:l.numbers,triggersBounds:u.any},{name:"radius-type",type:l.radiusType,triggersBounds:u.any},{name:"taxi-turn",type:l.bidirectionalSizeMaybePercent,triggersBounds:u.any},{name:"taxi-turn-min-distance",type:l.size,triggersBounds:u.any},{name:"taxi-direction",type:l.axisDirection,triggersBounds:u.any},{name:"taxi-radius",type:l.number,triggersBounds:u.any},{name:"edge-distances",type:l.edgeDistances,triggersBounds:u.any},{name:"arrow-scale",type:l.positiveNumber,triggersBounds:u.any},{name:"loop-direction",type:l.angle,triggersBounds:u.any},{name:"loop-sweep",type:l.angle,triggersBounds:u.any},{name:"source-distance-from-node",type:l.size,triggersBounds:u.any},{name:"target-distance-from-node",type:l.size,triggersBounds:u.any}],k=[{name:"ghost",type:l.bool,triggersBounds:u.any},{name:"ghost-offset-x",type:l.bidirectionalSize,triggersBounds:u.any},{name:"ghost-offset-y",type:l.bidirectionalSize,triggersBounds:u.any},{name:"ghost-opacity",type:l.zeroOneNumber}],B=[{name:"selection-box-color",type:l.color},{name:"selection-box-opacity",type:l.zeroOneNumber},{name:"selection-box-border-color",type:l.color},{name:"selection-box-border-width",type:l.size},{name:"active-bg-color",type:l.color},{name:"active-bg-opacity",type:l.zeroOneNumber},{name:"active-bg-size",type:l.size},{name:"outside-texture-bg-color",type:l.color},{name:"outside-texture-bg-opacity",type:l.zeroOneNumber}],D=[];Je.pieBackgroundN=16,D.push({name:"pie-size",type:l.sizeMaybePercent}),D.push({name:"pie-hole",type:l.sizeMaybePercent}),D.push({name:"pie-start-angle",type:l.angle});for(var A=1;A<=Je.pieBackgroundN;A++)D.push({name:"pie-"+A+"-background-color",type:l.color}),D.push({name:"pie-"+A+"-background-size",type:l.percent}),D.push({name:"pie-"+A+"-background-opacity",type:l.zeroOneNumber});var L=[];Je.stripeBackgroundN=16,L.push({name:"stripe-size",type:l.sizeMaybePercent}),L.push({name:"stripe-direction",type:l.axisDirectionPrimary});for(var I=1;I<=Je.stripeBackgroundN;I++)L.push({name:"stripe-"+I+"-background-color",type:l.color}),L.push({name:"stripe-"+I+"-background-size",type:l.percent}),L.push({name:"stripe-"+I+"-background-opacity",type:l.zeroOneNumber});var M=[],O=Je.arrowPrefixes=["source","mid-source","target","mid-target"];[{name:"arrow-shape",type:l.arrowShape,triggersBounds:u.any},{name:"arrow-color",type:l.color},{name:"arrow-fill",type:l.arrowFill},{name:"arrow-width",type:l.arrowWidth}].forEach(function(F){O.forEach(function(q){var U=q+"-"+F.name,re=F.type,oe=F.triggersBounds;M.push({name:U,type:re,triggersBounds:oe})})},{});var V=Je.properties=[].concat(m,b,p,g,y,k,d,h,c,f,v,E,C,x,R,D,L,S,P,M,B),W=Je.propertyGroups={behavior:m,transition:b,visibility:p,overlay:g,underlay:y,ghost:k,commonLabel:d,labelDimensions:h,mainLabel:c,sourceLabel:f,targetLabel:v,nodeBody:E,nodeBorder:C,nodeOutline:x,backgroundImage:R,pie:D,stripe:L,compound:S,edgeLine:P,edgeArrow:M,core:B},N=Je.propertyGroupNames={},z=Je.propertyGroupKeys=Object.keys(W);z.forEach(function(F){N[F]=W[F].map(function(q){return q.name}),W[F].forEach(function(q){return q.groupKey=F})});var X=Je.aliases=[{name:"content",pointsTo:"label"},{name:"control-point-distance",pointsTo:"control-point-distances"},{name:"control-point-weight",pointsTo:"control-point-weights"},{name:"segment-distance",pointsTo:"segment-distances"},{name:"segment-weight",pointsTo:"segment-weights"},{name:"segment-radius",pointsTo:"segment-radii"},{name:"edge-text-rotation",pointsTo:"text-rotation"},{name:"padding-left",pointsTo:"padding"},{name:"padding-right",pointsTo:"padding"},{name:"padding-top",pointsTo:"padding"},{name:"padding-bottom",pointsTo:"padding"}];Je.propertyNames=V.map(function(F){return F.name});for(var j=0;j<V.length;j++){var J=V[j];V[J.name]=J}for(var G=0;G<X.length;G++){var Z=X[G],ae=V[Z.pointsTo],Q={name:Z.name,alias:!0,pointsTo:ae};V.push(Q),V[Z.name]=Q}})();Je.getDefaultProperty=function(t){return this.getDefaultProperties()[t]};Je.getDefaultProperties=function(){var t=this._private;if(t.defaultProperties!=null)return t.defaultProperties;for(var e=ge({"selection-box-color":"#ddd","selection-box-opacity":.65,"selection-box-border-color":"#aaa","selection-box-border-width":1,"active-bg-color":"black","active-bg-opacity":.15,"active-bg-size":30,"outside-texture-bg-color":"#000","outside-texture-bg-opacity":.125,events:"yes","text-events":"no","text-valign":"top","text-halign":"center","text-justification":"auto","line-height":1,color:"#000","text-outline-color":"#000","text-outline-width":0,"text-outline-opacity":1,"text-opacity":1,"text-decoration":"none","text-transform":"none","text-wrap":"none","text-overflow-wrap":"whitespace","text-max-width":9999,"text-background-color":"#000","text-background-opacity":0,"text-background-shape":"rectangle","text-background-padding":0,"text-border-opacity":0,"text-border-width":0,"text-border-style":"solid","text-border-color":"#000","font-family":"Helvetica Neue, Helvetica, sans-serif","font-style":"normal","font-weight":"normal","font-size":16,"min-zoomed-font-size":0,"text-rotation":"none","source-text-rotation":"none","target-text-rotation":"none",visibility:"visible",display:"element",opacity:1,"z-compound-depth":"auto","z-index-compare":"auto","z-index":0,label:"","text-margin-x":0,"text-margin-y":0,"source-label":"","source-text-offset":0,"source-text-margin-x":0,"source-text-margin-y":0,"target-label":"","target-text-offset":0,"target-text-margin-x":0,"target-text-margin-y":0,"overlay-opacity":0,"overlay-color":"#000","overlay-padding":10,"overlay-shape":"round-rectangle","overlay-corner-radius":"auto","underlay-opacity":0,"underlay-color":"#000","underlay-padding":10,"underlay-shape":"round-rectangle","underlay-corner-radius":"auto","transition-property":"none","transition-duration":0,"transition-delay":0,"transition-timing-function":"linear","box-select-labels":"no","background-blacken":0,"background-color":"#999","background-fill":"solid","background-opacity":1,"background-image":"none","background-image-crossorigin":"anonymous","background-image-opacity":1,"background-image-containment":"inside","background-image-smoothing":"yes","background-position-x":"50%","background-position-y":"50%","background-offset-x":0,"background-offset-y":0,"background-width-relative-to":"include-padding","background-height-relative-to":"include-padding","background-repeat":"no-repeat","background-fit":"none","background-clip":"node","background-width":"auto","background-height":"auto","border-color":"#000","border-opacity":1,"border-width":0,"border-style":"solid","border-dash-pattern":[4,2],"border-dash-offset":0,"border-cap":"butt","border-join":"miter","border-position":"center","outline-color":"#999","outline-opacity":1,"outline-width":0,"outline-offset":0,"outline-style":"solid",height:30,width:30,shape:"ellipse","shape-polygon-points":"-1, -1,   1, -1,   1, 1,   -1, 1","corner-radius":"auto","bounds-expansion":0,"background-gradient-direction":"to-bottom","background-gradient-stop-colors":"#999","background-gradient-stop-positions":"0%",ghost:"no","ghost-offset-y":0,"ghost-offset-x":0,"ghost-opacity":0,padding:0,"padding-relative-to":"width",position:"origin","compound-sizing-wrt-labels":"include","min-width":0,"min-width-bias-left":0,"min-width-bias-right":0,"min-height":0,"min-height-bias-top":0,"min-height-bias-bottom":0},{"pie-size":"100%","pie-hole":0,"pie-start-angle":"0deg"},[{name:"pie-{{i}}-background-color",value:"black"},{name:"pie-{{i}}-background-size",value:"0%"},{name:"pie-{{i}}-background-opacity",value:1}].reduce(function(u,l){for(var c=1;c<=Je.pieBackgroundN;c++){var f=l.name.replace("{{i}}",c),v=l.value;u[f]=v}return u},{}),{"stripe-size":"100%","stripe-direction":"horizontal"},[{name:"stripe-{{i}}-background-color",value:"black"},{name:"stripe-{{i}}-background-size",value:"0%"},{name:"stripe-{{i}}-background-opacity",value:1}].reduce(function(u,l){for(var c=1;c<=Je.stripeBackgroundN;c++){var f=l.name.replace("{{i}}",c),v=l.value;u[f]=v}return u},{}),{"line-style":"solid","line-color":"#999","line-fill":"solid","line-cap":"butt","line-opacity":1,"line-outline-width":0,"line-outline-color":"#000","line-gradient-stop-colors":"#999","line-gradient-stop-positions":"0%","control-point-step-size":40,"control-point-weights":.5,"segment-weights":.5,"segment-distances":20,"segment-radii":15,"radius-type":"arc-radius","taxi-turn":"50%","taxi-radius":15,"taxi-turn-min-distance":10,"taxi-direction":"auto","edge-distances":"intersection","curve-style":"haystack","haystack-radius":0,"arrow-scale":1,"loop-direction":"-45deg","loop-sweep":"-90deg","source-distance-from-node":0,"target-distance-from-node":0,"source-endpoint":"outside-to-node","target-endpoint":"outside-to-node","line-dash-pattern":[6,3],"line-dash-offset":0},[{name:"arrow-shape",value:"none"},{name:"arrow-color",value:"#999"},{name:"arrow-fill",value:"filled"},{name:"arrow-width",value:1}].reduce(function(u,l){return Je.arrowPrefixes.forEach(function(c){var f=c+"-"+l.name,v=l.value;u[f]=v}),u},{})),r={},a=0;a<this.properties.length;a++){var n=this.properties[a];if(!n.pointsTo){var i=n.name,o=e[i],s=this.parse(i,o);r[i]=s}}return t.defaultProperties=r,t.defaultProperties};Je.addDefaultStylesheet=function(){this.selector(":parent").css({shape:"rectangle",padding:10,"background-color":"#eee","border-color":"#ccc","border-width":1}).selector("edge").css({width:3}).selector(":loop").css({"curve-style":"bezier"}).selector("edge:compound").css({"curve-style":"bezier","source-endpoint":"outside-to-line","target-endpoint":"outside-to-line"}).selector(":selected").css({"background-color":"#0169D9","line-color":"#0169D9","source-arrow-color":"#0169D9","target-arrow-color":"#0169D9","mid-source-arrow-color":"#0169D9","mid-target-arrow-color":"#0169D9"}).selector(":parent:selected").css({"background-color":"#CCE1F9","border-color":"#aec8e5"}).selector(":active").css({"overlay-color":"black","overlay-padding":10,"overlay-opacity":.25}),this.defaultLength=this.length};var Ki={};Ki.parse=function(t,e,r,a){var n=this;if(Ke(e))return n.parseImplWarn(t,e,r,a);var i=a==="mapping"||a===!0||a===!1||a==null?"dontcare":a,o=r?"t":"f",s=""+e,u=lv(t,s,o,i),l=n.propCache=n.propCache||[],c;return(c=l[u])||(c=l[u]=n.parseImplWarn(t,e,r,a)),(r||a==="mapping")&&(c=Zt(c),c&&(c.value=Zt(c.value))),c};Ki.parseImplWarn=function(t,e,r,a){var n=this.parseImpl(t,e,r,a);return!n&&e!=null&&Oe("The style property `".concat(t,": ").concat(e,"` is invalid")),n&&(n.name==="width"||n.name==="height")&&e==="label"&&Oe("The style value of `label` is deprecated for `"+n.name+"`"),n};Ki.parseImpl=function(t,e,r,a){var n=this;t=vu(t);var i=n.properties[t],o=e,s=n.types;if(!i||e===void 0)return null;i.alias&&(i=i.pointsTo,t=i.name);var u=de(e);u&&(e=e.trim());var l=i.type;if(!l)return null;if(r&&(e===""||e===null))return{name:t,value:e,bypass:!0,deleteBypass:!0};if(Ke(e))return{name:t,value:e,strValue:"fn",mapped:s.fn,bypass:r};var c,f;if(!(!u||a||e.length<7||e[1]!=="a")){if(e.length>=7&&e[0]==="d"&&(c=new RegExp(s.data.regex).exec(e))){if(r)return!1;var v=s.data;return{name:t,value:c,strValue:""+e,mapped:v,field:c[1],bypass:r}}else if(e.length>=10&&e[0]==="m"&&(f=new RegExp(s.mapData.regex).exec(e))){if(r||l.multiple)return!1;var h=s.mapData;if(!(l.color||l.number))return!1;var d=this.parse(t,f[4]);if(!d||d.mapped)return!1;var m=this.parse(t,f[5]);if(!m||m.mapped)return!1;if(d.pfValue===m.pfValue||d.strValue===m.strValue)return Oe("`"+t+": "+e+"` is not a valid mapper because the output range is zero; converting to `"+t+": "+d.strValue+"`"),this.parse(t,d.strValue);if(l.color){var p=d.value,g=m.value,y=p[0]===g[0]&&p[1]===g[1]&&p[2]===g[2]&&(p[3]===g[3]||(p[3]==null||p[3]===1)&&(g[3]==null||g[3]===1));if(y)return!1}return{name:t,value:f,strValue:""+e,mapped:h,field:f[1],fieldMin:parseFloat(f[2]),fieldMax:parseFloat(f[3]),valueMin:d.value,valueMax:m.value,bypass:r}}}if(l.multiple&&a!=="multiple"){var b;if(u?b=e.split(/\s+/):qe(e)?b=e:b=[e],l.evenMultiple&&b.length%2!==0)return null;for(var w=[],E=[],C=[],x="",R=!1,S=0;S<b.length;S++){var P=n.parse(t,b[S],r,"multiple");R=R||de(P.value),w.push(P.value),C.push(P.pfValue!=null?P.pfValue:P.value),E.push(P.units),x+=(S>0?" ":"")+P.strValue}return l.validate&&!l.validate(w,E)?null:l.singleEnum&&R?w.length===1&&de(w[0])?{name:t,value:w[0],strValue:w[0],bypass:r}:null:{name:t,value:w,pfValue:C,strValue:x,bypass:r,units:E}}var k=function(){for(var Q=0;Q<l.enums.length;Q++){var F=l.enums[Q];if(F===e)return{name:t,value:e,strValue:""+e,bypass:r}}return null};if(l.number){var B,D="px";if(l.units&&(B=l.units),l.implicitUnits&&(D=l.implicitUnits),!l.unitless)if(u){var A="px|em"+(l.allowPercent?"|\\%":"");B&&(A=B);var L=e.match("^("+at+")("+A+")?$");L&&(e=L[1],B=L[2]||D)}else(!B||l.implicitUnits)&&(B=D);if(e=parseFloat(e),isNaN(e)&&l.enums===void 0)return null;if(isNaN(e)&&l.enums!==void 0)return e=o,k();if(l.integer&&!Gg(e)||l.min!==void 0&&(e<l.min||l.strictMin&&e===l.min)||l.max!==void 0&&(e>l.max||l.strictMax&&e===l.max))return null;var I={name:t,value:e,strValue:""+e+(B||""),units:B,bypass:r};return l.unitless||B!=="px"&&B!=="em"?I.pfValue=e:I.pfValue=B==="px"||!B?e:this.getEmSizeInPixels()*e,(B==="ms"||B==="s")&&(I.pfValue=B==="ms"?e:1e3*e),(B==="deg"||B==="rad")&&(I.pfValue=B==="rad"?e:Qm(e)),B==="%"&&(I.pfValue=e/100),I}else if(l.propList){var M=[],O=""+e;if(O!=="none"){for(var V=O.split(/\s*,\s*|\s+/),W=0;W<V.length;W++){var N=V[W].trim();n.properties[N]?M.push(N):Oe("`"+N+"` is not a valid property name")}if(M.length===0)return null}return{name:t,value:M,strValue:M.length===0?"none":M.join(" "),bypass:r}}else if(l.color){var z=rv(e);return z?{name:t,value:z,pfValue:z,strValue:"rgb("+z[0]+","+z[1]+","+z[2]+")",bypass:r}:null}else if(l.regex||l.regexes){if(l.enums){var X=k();if(X)return X}for(var j=l.regexes?l.regexes:[l.regex],J=0;J<j.length;J++){var G=new RegExp(j[J]),Z=G.exec(e);if(Z)return{name:t,value:l.singleRegexMatchValue?Z[1]:Z,strValue:""+e,bypass:r}}return null}else return l.string?{name:t,value:""+e,strValue:""+e,bypass:r}:l.enums?k():null};var ut=function(e){if(!(this instanceof ut))return new ut(e);if(!fu(e)){Ue("A style must have a core reference");return}this._private={cy:e,coreStyle:{}},this.length=0,this.resetToDefault()},yt=ut.prototype;yt.instanceString=function(){return"style"};yt.clear=function(){for(var t=this._private,e=t.cy,r=e.elements(),a=0;a<this.length;a++)this[a]=void 0;return this.length=0,t.contextStyles={},t.propDiffs={},this.cleanElements(r,!0),r.forEach(function(n){var i=n[0]._private;i.styleDirty=!0,i.appliedInitStyle=!1}),this};yt.resetToDefault=function(){return this.clear(),this.addDefaultStylesheet(),this};yt.core=function(t){return this._private.coreStyle[t]||this.getDefaultProperty(t)};yt.selector=function(t){var e=t==="core"?null:new Dr(t),r=this.length++;return this[r]={selector:e,properties:[],mappedProperties:[],index:r},this};yt.css=function(){var t=this,e=arguments;if(e.length===1)for(var r=e[0],a=0;a<t.properties.length;a++){var n=t.properties[a],i=r[n.name];i===void 0&&(i=r[Mi(n.name)]),i!==void 0&&this.cssRule(n.name,i)}else e.length===2&&this.cssRule(e[0],e[1]);return this};yt.style=yt.css;yt.cssRule=function(t,e){var r=this.parse(t,e);if(r){var a=this.length-1;this[a].properties.push(r),this[a].properties[r.name]=r,r.name.match(/pie-(\d+)-background-size/)&&r.value&&(this._private.hasPie=!0),r.name.match(/stripe-(\d+)-background-size/)&&r.value&&(this._private.hasStripe=!0),r.mapped&&this[a].mappedProperties.push(r);var n=!this[a].selector;n&&(this._private.coreStyle[r.name]=r)}return this};yt.append=function(t){return Jf(t)?t.appendToStyle(this):qe(t)?this.appendFromJson(t):de(t)&&this.appendFromString(t),this};ut.fromJson=function(t,e){var r=new ut(t);return r.fromJson(e),r};ut.fromString=function(t,e){return new ut(t).fromString(e)};[lt,Rn,Pu,Qt,Hi,ku,Je,Ki].forEach(function(t){ge(yt,t)});ut.types=yt.types;ut.properties=yt.properties;ut.propertyGroups=yt.propertyGroups;ut.propertyGroupNames=yt.propertyGroupNames;ut.propertyGroupKeys=yt.propertyGroupKeys;var tw={style:function(e){if(e){var r=this.setStyle(e);r.update()}return this._private.style},setStyle:function(e){var r=this._private;return Jf(e)?r.style=e.generateStyle(this):qe(e)?r.style=ut.fromJson(this,e):de(e)?r.style=ut.fromString(this,e):r.style=ut(this),r.style},updateStyle:function(){this.mutableElements().updateStyle()}},rw="single",jr={autolock:function(e){if(e!==void 0)this._private.autolock=!!e;else return this._private.autolock;return this},autoungrabify:function(e){if(e!==void 0)this._private.autoungrabify=!!e;else return this._private.autoungrabify;return this},autounselectify:function(e){if(e!==void 0)this._private.autounselectify=!!e;else return this._private.autounselectify;return this},selectionType:function(e){var r=this._private;if(r.selectionType==null&&(r.selectionType=rw),e!==void 0)(e==="additive"||e==="single")&&(r.selectionType=e);else return r.selectionType;return this},panningEnabled:function(e){if(e!==void 0)this._private.panningEnabled=!!e;else return this._private.panningEnabled;return this},userPanningEnabled:function(e){if(e!==void 0)this._private.userPanningEnabled=!!e;else return this._private.userPanningEnabled;return this},zoomingEnabled:function(e){if(e!==void 0)this._private.zoomingEnabled=!!e;else return this._private.zoomingEnabled;return this},userZoomingEnabled:function(e){if(e!==void 0)this._private.userZoomingEnabled=!!e;else return this._private.userZoomingEnabled;return this},boxSelectionEnabled:function(e){if(e!==void 0)this._private.boxSelectionEnabled=!!e;else return this._private.boxSelectionEnabled;return this},pan:function(){var e=arguments,r=this._private.pan,a,n,i,o,s;switch(e.length){case 0:return r;case 1:if(de(e[0]))return a=e[0],r[a];if(Ae(e[0])){if(!this._private.panningEnabled)return this;i=e[0],o=i.x,s=i.y,ie(o)&&(r.x=o),ie(s)&&(r.y=s),this.emit("pan viewport")}break;case 2:if(!this._private.panningEnabled)return this;a=e[0],n=e[1],(a==="x"||a==="y")&&ie(n)&&(r[a]=n),this.emit("pan viewport");break}return this.notify("viewport"),this},panBy:function(e,r){var a=arguments,n=this._private.pan,i,o,s,u,l;if(!this._private.panningEnabled)return this;switch(a.length){case 1:Ae(e)&&(s=a[0],u=s.x,l=s.y,ie(u)&&(n.x+=u),ie(l)&&(n.y+=l),this.emit("pan viewport"));break;case 2:i=e,o=r,(i==="x"||i==="y")&&ie(o)&&(n[i]+=o),this.emit("pan viewport");break}return this.notify("viewport"),this},gc:function(){this.notify("gc")},fit:function(e,r){var a=this.getFitViewport(e,r);if(a){var n=this._private;n.zoom=a.zoom,n.pan=a.pan,this.emit("pan zoom viewport"),this.notify("viewport")}return this},getFitViewport:function(e,r){if(ie(e)&&r===void 0&&(r=e,e=void 0),!(!this._private.panningEnabled||!this._private.zoomingEnabled)){var a;if(de(e)){var n=e;e=this.$(n)}else if(Kg(e)){var i=e;a={x1:i.x1,y1:i.y1,x2:i.x2,y2:i.y2},a.w=a.x2-a.x1,a.h=a.y2-a.y1}else At(e)||(e=this.mutableElements());if(!(At(e)&&e.empty())){a=a||e.boundingBox();var o=this.width(),s=this.height(),u;if(r=ie(r)?r:0,!isNaN(o)&&!isNaN(s)&&o>0&&s>0&&!isNaN(a.w)&&!isNaN(a.h)&&a.w>0&&a.h>0){u=Math.min((o-2*r)/a.w,(s-2*r)/a.h),u=u>this._private.maxZoom?this._private.maxZoom:u,u=u<this._private.minZoom?this._private.minZoom:u;var l={x:(o-u*(a.x1+a.x2))/2,y:(s-u*(a.y1+a.y2))/2};return{zoom:u,pan:l}}}}},zoomRange:function(e,r){var a=this._private;if(r==null){var n=e;e=n.min,r=n.max}return ie(e)&&ie(r)&&e<=r?(a.minZoom=e,a.maxZoom=r):ie(e)&&r===void 0&&e<=a.maxZoom?a.minZoom=e:ie(r)&&e===void 0&&r>=a.minZoom&&(a.maxZoom=r),this},minZoom:function(e){return e===void 0?this._private.minZoom:this.zoomRange({min:e})},maxZoom:function(e){return e===void 0?this._private.maxZoom:this.zoomRange({max:e})},getZoomedViewport:function(e){var r=this._private,a=r.pan,n=r.zoom,i,o,s=!1;if(r.zoomingEnabled||(s=!0),ie(e)?o=e:Ae(e)&&(o=e.level,e.position!=null?i=Ni(e.position,n,a):e.renderedPosition!=null&&(i=e.renderedPosition),i!=null&&!r.panningEnabled&&(s=!0)),o=o>r.maxZoom?r.maxZoom:o,o=o<r.minZoom?r.minZoom:o,s||!ie(o)||o===n||i!=null&&(!ie(i.x)||!ie(i.y)))return null;if(i!=null){var u=a,l=n,c=o,f={x:-c/l*(i.x-u.x)+i.x,y:-c/l*(i.y-u.y)+i.y};return{zoomed:!0,panned:!0,zoom:c,pan:f}}else return{zoomed:!0,panned:!1,zoom:o,pan:a}},zoom:function(e){if(e===void 0)return this._private.zoom;var r=this.getZoomedViewport(e),a=this._private;return r==null||!r.zoomed?this:(a.zoom=r.zoom,r.panned&&(a.pan.x=r.pan.x,a.pan.y=r.pan.y),this.emit("zoom"+(r.panned?" pan":"")+" viewport"),this.notify("viewport"),this)},viewport:function(e){var r=this._private,a=!0,n=!0,i=[],o=!1,s=!1;if(!e)return this;if(ie(e.zoom)||(a=!1),Ae(e.pan)||(n=!1),!a&&!n)return this;if(a){var u=e.zoom;u<r.minZoom||u>r.maxZoom||!r.zoomingEnabled?o=!0:(r.zoom=u,i.push("zoom"))}if(n&&(!o||!e.cancelOnFailedZoom)&&r.panningEnabled){var l=e.pan;ie(l.x)&&(r.pan.x=l.x,s=!1),ie(l.y)&&(r.pan.y=l.y,s=!1),s||i.push("pan")}return i.length>0&&(i.push("viewport"),this.emit(i.join(" ")),this.notify("viewport")),this},center:function(e){var r=this.getCenterPan(e);return r&&(this._private.pan=r,this.emit("pan viewport"),this.notify("viewport")),this},getCenterPan:function(e,r){if(this._private.panningEnabled){if(de(e)){var a=e;e=this.mutableElements().filter(a)}else At(e)||(e=this.mutableElements());if(e.length!==0){var n=e.boundingBox(),i=this.width(),o=this.height();r=r===void 0?this._private.zoom:r;var s={x:(i-r*(n.x1+n.x2))/2,y:(o-r*(n.y1+n.y2))/2};return s}}},reset:function(){return!this._private.panningEnabled||!this._private.zoomingEnabled?this:(this.viewport({pan:{x:0,y:0},zoom:1}),this)},invalidateSize:function(){this._private.sizeCache=null},size:function(){var e=this._private,r=e.container,a=this;return e.sizeCache=e.sizeCache||(r?function(){var n=a.window().getComputedStyle(r),i=function(s){return parseFloat(n.getPropertyValue(s))};return{width:r.clientWidth-i("padding-left")-i("padding-right"),height:r.clientHeight-i("padding-top")-i("padding-bottom")}}():{width:1,height:1})},width:function(){return this.size().width},height:function(){return this.size().height},extent:function(){var e=this._private.pan,r=this._private.zoom,a=this.renderedExtent(),n={x1:(a.x1-e.x)/r,x2:(a.x2-e.x)/r,y1:(a.y1-e.y)/r,y2:(a.y2-e.y)/r};return n.w=n.x2-n.x1,n.h=n.y2-n.y1,n},renderedExtent:function(){var e=this.width(),r=this.height();return{x1:0,y1:0,x2:e,y2:r,w:e,h:r}},multiClickDebounceTime:function(e){if(e)this._private.multiClickDebounceTime=e;else return this._private.multiClickDebounceTime;return this}};jr.centre=jr.center;jr.autolockNodes=jr.autolock;jr.autoungrabifyNodes=jr.autoungrabify;var vn={data:Ie.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeData:Ie.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),scratch:Ie.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:Ie.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0})};vn.attr=vn.data;vn.removeAttr=vn.removeData;var dn=function(e){var r=this;e=ge({},e);var a=e.container;a&&!yi(a)&&yi(a[0])&&(a=a[0]);var n=a?a._cyreg:null;n=n||{},n&&n.cy&&(n.cy.destroy(),n={});var i=n.readies=n.readies||[];a&&(a._cyreg=n),n.cy=r;var o=tt!==void 0&&a!==void 0&&!e.headless,s=e;s.layout=ge({name:o?"grid":"null"},s.layout),s.renderer=ge({name:o?"canvas":"null"},s.renderer);var u=function(d,m,p){return m!==void 0?m:p!==void 0?p:d},l=this._private={container:a,ready:!1,options:s,elements:new dt(this),listeners:[],aniEles:new dt(this),data:s.data||{},scratch:{},layout:null,renderer:null,destroyed:!1,notificationsEnabled:!0,minZoom:1e-50,maxZoom:1e50,zoomingEnabled:u(!0,s.zoomingEnabled),userZoomingEnabled:u(!0,s.userZoomingEnabled),panningEnabled:u(!0,s.panningEnabled),userPanningEnabled:u(!0,s.userPanningEnabled),boxSelectionEnabled:u(!0,s.boxSelectionEnabled),autolock:u(!1,s.autolock,s.autolockNodes),autoungrabify:u(!1,s.autoungrabify,s.autoungrabifyNodes),autounselectify:u(!1,s.autounselectify),styleEnabled:s.styleEnabled===void 0?o:s.styleEnabled,zoom:ie(s.zoom)?s.zoom:1,pan:{x:Ae(s.pan)&&ie(s.pan.x)?s.pan.x:0,y:Ae(s.pan)&&ie(s.pan.y)?s.pan.y:0},animation:{current:[],queue:[]},hasCompoundNodes:!1,multiClickDebounceTime:u(250,s.multiClickDebounceTime)};this.createEmitter(),this.selectionType(s.selectionType),this.zoomRange({min:s.minZoom,max:s.maxZoom});var c=function(d,m){var p=d.some(Yg);if(p)return Ma.all(d).then(m);m(d)};l.styleEnabled&&r.setStyle([]);var f=ge({},s,s.renderer);r.initRenderer(f);var v=function(d,m,p){r.notifications(!1);var g=r.mutableElements();g.length>0&&g.remove(),d!=null&&(Ae(d)||qe(d))&&r.add(d),r.one("layoutready",function(b){r.notifications(!0),r.emit(b),r.one("load",m),r.emitAndNotify("load")}).one("layoutstop",function(){r.one("done",p),r.emit("done")});var y=ge({},r._private.options.layout);y.eles=r.elements(),r.layout(y).run()};c([s.style,s.elements],function(h){var d=h[0],m=h[1];l.styleEnabled&&r.style().append(d),v(m,function(){r.startAnimationLoop(),l.ready=!0,Ke(s.ready)&&r.on("ready",s.ready);for(var p=0;p<i.length;p++){var g=i[p];r.on("ready",g)}n&&(n.readies=[]),r.emit("ready")},s.done)})},Si=dn.prototype;ge(Si,{instanceString:function(){return"core"},isReady:function(){return this._private.ready},destroyed:function(){return this._private.destroyed},ready:function(e){return this.isReady()?this.emitter().emit("ready",[],e):this.on("ready",e),this},destroy:function(){var e=this;if(!e.destroyed())return e.stopAnimationLoop(),e.destroyRenderer(),this.emit("destroy"),e._private.destroyed=!0,e},hasElementWithId:function(e){return this._private.elements.hasElementWithId(e)},getElementById:function(e){return this._private.elements.getElementById(e)},hasCompoundNodes:function(){return this._private.hasCompoundNodes},headless:function(){return this._private.renderer.isHeadless()},styleEnabled:function(){return this._private.styleEnabled},addToPool:function(e){return this._private.elements.merge(e),this},removeFromPool:function(e){return this._private.elements.unmerge(e),this},container:function(){return this._private.container||null},window:function(){var e=this._private.container;if(e==null)return tt;var r=this._private.container.ownerDocument;return r===void 0||r==null?tt:r.defaultView||tt},mount:function(e){if(e!=null){var r=this,a=r._private,n=a.options;return!yi(e)&&yi(e[0])&&(e=e[0]),r.stopAnimationLoop(),r.destroyRenderer(),a.container=e,a.styleEnabled=!0,r.invalidateSize(),r.initRenderer(ge({},n,n.renderer,{name:n.renderer.name==="null"?"canvas":n.renderer.name})),r.startAnimationLoop(),r.style(n.style),r.emit("mount"),r}},unmount:function(){var e=this;return e.stopAnimationLoop(),e.destroyRenderer(),e.initRenderer({name:"null"}),e.emit("unmount"),e},options:function(){return Zt(this._private.options)},json:function(e){var r=this,a=r._private,n=r.mutableElements(),i=function(w){return r.getElementById(w.id())};if(Ae(e)){if(r.startBatch(),e.elements){var o={},s=function(w,E){for(var C=[],x=[],R=0;R<w.length;R++){var S=w[R];if(!S.data.id){Oe("cy.json() cannot handle elements without an ID attribute");continue}var P=""+S.data.id,k=r.getElementById(P);o[P]=!0,k.length!==0?x.push({ele:k,json:S}):(E&&(S.group=E),C.push(S))}r.add(C);for(var B=0;B<x.length;B++){var D=x[B],A=D.ele,L=D.json;A.json(L)}};if(qe(e.elements))s(e.elements);else for(var u=["nodes","edges"],l=0;l<u.length;l++){var c=u[l],f=e.elements[c];qe(f)&&s(f,c)}var v=r.collection();n.filter(function(b){return!o[b.id()]}).forEach(function(b){b.isParent()?v.merge(b):b.remove()}),v.forEach(function(b){return b.children().move({parent:null})}),v.forEach(function(b){return i(b).remove()})}e.style&&r.style(e.style),e.zoom!=null&&e.zoom!==a.zoom&&r.zoom(e.zoom),e.pan&&(e.pan.x!==a.pan.x||e.pan.y!==a.pan.y)&&r.pan(e.pan),e.data&&r.data(e.data);for(var h=["minZoom","maxZoom","zoomingEnabled","userZoomingEnabled","panningEnabled","userPanningEnabled","boxSelectionEnabled","autolock","autoungrabify","autounselectify","multiClickDebounceTime"],d=0;d<h.length;d++){var m=h[d];e[m]!=null&&r[m](e[m])}return r.endBatch(),this}else{var p=!!e,g={};p?g.elements=this.elements().map(function(b){return b.json()}):(g.elements={},n.forEach(function(b){var w=b.group();g.elements[w]||(g.elements[w]=[]),g.elements[w].push(b.json())})),this._private.styleEnabled&&(g.style=r.style().json()),g.data=Zt(r.data());var y=a.options;return g.zoomingEnabled=a.zoomingEnabled,g.userZoomingEnabled=a.userZoomingEnabled,g.zoom=a.zoom,g.minZoom=a.minZoom,g.maxZoom=a.maxZoom,g.panningEnabled=a.panningEnabled,g.userPanningEnabled=a.userPanningEnabled,g.pan=Zt(a.pan),g.boxSelectionEnabled=a.boxSelectionEnabled,g.renderer=Zt(y.renderer),g.hideEdgesOnViewport=y.hideEdgesOnViewport,g.textureOnViewport=y.textureOnViewport,g.wheelSensitivity=y.wheelSensitivity,g.motionBlur=y.motionBlur,g.multiClickDebounceTime=y.multiClickDebounceTime,g}}});Si.$id=Si.getElementById;[Ub,Zb,Qv,Ks,ci,jb,Ys,fi,tw,jr,vn].forEach(function(t){ge(Si,t)});var aw={fit:!0,directed:!1,padding:30,circle:!1,grid:!1,spacingFactor:1.75,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,roots:void 0,depthSort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,r){return!0},ready:void 0,stop:void 0,transform:function(e,r){return r}},nw={maximal:!1,acyclic:!1},ca=function(e){return e.scratch("breadthfirst")},Xc=function(e,r){return e.scratch("breadthfirst",r)};function jv(t){this.options=ge({},aw,nw,t)}jv.prototype.run=function(){var t=this.options,e=t.cy,r=t.eles,a=r.nodes().filter(function(ue){return ue.isChildless()}),n=r,i=t.directed,o=t.acyclic||t.maximal||t.maximalAdjustments>0,s=!!t.boundingBox,u=e.extent(),l=Dt(s?t.boundingBox:{x1:u.x1,y1:u.y1,w:u.w,h:u.h}),c;if(At(t.roots))c=t.roots;else if(qe(t.roots)){for(var f=[],v=0;v<t.roots.length;v++){var h=t.roots[v],d=e.getElementById(h);f.push(d)}c=e.collection(f)}else if(de(t.roots))c=e.$(t.roots);else if(i)c=a.roots();else{var m=r.components();c=e.collection();for(var p=function(){var le=m[g],he=le.maxDegree(!1),me=le.filter(function(pe){return pe.degree(!1)===he});c=c.add(me)},g=0;g<m.length;g++)p()}var y=[],b={},w=function(le,he){y[he]==null&&(y[he]=[]);var me=y[he].length;y[he].push(le),Xc(le,{index:me,depth:he})},E=function(le,he){var me=ca(le),pe=me.depth,be=me.index;y[pe][be]=null,le.isChildless()&&w(le,he)};n.bfs({roots:c,directed:t.directed,visit:function(le,he,me,pe,be){var Ee=le[0],ke=Ee.id();Ee.isChildless()&&w(Ee,be),b[ke]=!0}});for(var C=[],x=0;x<a.length;x++){var R=a[x];b[R.id()]||C.push(R)}var S=function(le){for(var he=y[le],me=0;me<he.length;me++){var pe=he[me];if(pe==null){he.splice(me,1),me--;continue}Xc(pe,{depth:le,index:me})}},P=function(le,he){for(var me=ca(le),pe=le.incomers().filter(function(Qe){return Qe.isNode()&&r.has(Qe)}),be=-1,Ee=le.id(),ke=0;ke<pe.length;ke++){var Ve=pe[ke],Ye=ca(Ve);be=Math.max(be,Ye.depth)}if(me.depth<=be){if(!t.acyclic&&he[Ee])return null;var Le=be+1;return E(le,Le),he[Ee]=Le,!0}return!1};if(i&&o){var k=[],B={},D=function(le){return k.push(le)},A=function(){return k.shift()};for(a.forEach(function(ue){return k.push(ue)});k.length>0;){var L=A(),I=P(L,B);if(I)L.outgoers().filter(function(ue){return ue.isNode()&&r.has(ue)}).forEach(D);else if(I===null){Oe("Detected double maximal shift for node `"+L.id()+"`.  Bailing maximal adjustment due to cycle.  Use `options.maximal: true` only on DAGs.");break}}}var M=0;if(t.avoidOverlap)for(var O=0;O<a.length;O++){var V=a[O],W=V.layoutDimensions(t),N=W.w,z=W.h;M=Math.max(M,N,z)}var X={},j=function(le){if(X[le.id()])return X[le.id()];for(var he=ca(le).depth,me=le.neighborhood(),pe=0,be=0,Ee=0;Ee<me.length;Ee++){var ke=me[Ee];if(!(ke.isEdge()||ke.isParent()||!a.has(ke))){var Ve=ca(ke);if(Ve!=null){var Ye=Ve.index,Le=Ve.depth;if(!(Ye==null||Le==null)){var Qe=y[Le].length;Le<he&&(pe+=Ye/Qe,be++)}}}}return be=Math.max(1,be),pe=pe/be,be===0&&(pe=0),X[le.id()]=pe,pe},J=function(le,he){var me=j(le),pe=j(he),be=me-pe;return be===0?tv(le.id(),he.id()):be};t.depthSort!==void 0&&(J=t.depthSort);for(var G=y.length,Z=0;Z<G;Z++)y[Z].sort(J),S(Z);for(var ae=[],Q=0;Q<C.length;Q++)ae.push(C[Q]);var F=function(){for(var le=0;le<G;le++)S(le)};ae.length&&(y.unshift(ae),G=y.length,F());for(var q=0,U=0;U<G;U++)q=Math.max(y[U].length,q);var re={x:l.x1+l.w/2,y:l.y1+l.h/2},oe=a.reduce(function(ue,le){return function(he){return{w:ue.w===-1?he.w:(ue.w+he.w)/2,h:ue.h===-1?he.h:(ue.h+he.h)/2}}(le.boundingBox({includeLabels:t.nodeDimensionsIncludeLabels}))},{w:-1,h:-1}),xe=Math.max(G===1?0:s?(l.h-t.padding*2-oe.h)/(G-1):(l.h-t.padding*2-oe.h)/(G+1),M),We=y.reduce(function(ue,le){return Math.max(ue,le.length)},0),Ne=function(le){var he=ca(le),me=he.depth,pe=he.index;if(t.circle){var be=Math.min(l.w/2/G,l.h/2/G);be=Math.max(be,M);var Ee=be*me+be-(G>0&&y[0].length<=3?be/2:0),ke=2*Math.PI/y[me].length*pe;return me===0&&y[0].length===1&&(Ee=1),{x:re.x+Ee*Math.cos(ke),y:re.y+Ee*Math.sin(ke)}}else{var Ve=y[me].length,Ye=Math.max(Ve===1?0:s?(l.w-t.padding*2-oe.w)/((t.grid?We:Ve)-1):(l.w-t.padding*2-oe.w)/((t.grid?We:Ve)+1),M),Le={x:re.x+(pe+1-(Ve+1)/2)*Ye,y:re.y+(me+1-(G+1)/2)*xe};return Le}};return r.nodes().layoutPositions(this,t,Ne),this};var iw={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,radius:void 0,startAngle:3/2*Math.PI,sweep:void 0,clockwise:!0,sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,r){return!0},ready:void 0,stop:void 0,transform:function(e,r){return r}};function Jv(t){this.options=ge({},iw,t)}Jv.prototype.run=function(){var t=this.options,e=t,r=t.cy,a=e.eles,n=e.counterclockwise!==void 0?!e.counterclockwise:e.clockwise,i=a.nodes().not(":parent");e.sort&&(i=i.sort(e.sort));for(var o=Dt(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:r.width(),h:r.height()}),s={x:o.x1+o.w/2,y:o.y1+o.h/2},u=e.sweep===void 0?2*Math.PI-2*Math.PI/i.length:e.sweep,l=u/Math.max(1,i.length-1),c,f=0,v=0;v<i.length;v++){var h=i[v],d=h.layoutDimensions(e),m=d.w,p=d.h;f=Math.max(f,m,p)}if(ie(e.radius)?c=e.radius:i.length<=1?c=0:c=Math.min(o.h,o.w)/2-f,i.length>1&&e.avoidOverlap){f*=1.75;var g=Math.cos(l)-Math.cos(0),y=Math.sin(l)-Math.sin(0),b=Math.sqrt(f*f/(g*g+y*y));c=Math.max(b,c)}var w=function(C,x){var R=e.startAngle+x*l*(n?1:-1),S=c*Math.cos(R),P=c*Math.sin(R),k={x:s.x+S,y:s.y+P};return k};return a.nodes().layoutPositions(this,e,w),this};var ow={fit:!0,padding:30,startAngle:3/2*Math.PI,sweep:void 0,clockwise:!0,equidistant:!1,minNodeSpacing:10,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,height:void 0,width:void 0,spacingFactor:void 0,concentric:function(e){return e.degree()},levelWidth:function(e){return e.maxDegree()/4},animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,r){return!0},ready:void 0,stop:void 0,transform:function(e,r){return r}};function ed(t){this.options=ge({},ow,t)}ed.prototype.run=function(){for(var t=this.options,e=t,r=e.counterclockwise!==void 0?!e.counterclockwise:e.clockwise,a=t.cy,n=e.eles,i=n.nodes().not(":parent"),o=Dt(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:a.width(),h:a.height()}),s={x:o.x1+o.w/2,y:o.y1+o.h/2},u=[],l=0,c=0;c<i.length;c++){var f=i[c],v=void 0;v=e.concentric(f),u.push({value:v,node:f}),f._private.scratch.concentric=v}i.updateStyle();for(var h=0;h<i.length;h++){var d=i[h],m=d.layoutDimensions(e);l=Math.max(l,m.w,m.h)}u.sort(function(oe,xe){return xe.value-oe.value});for(var p=e.levelWidth(i),g=[[]],y=g[0],b=0;b<u.length;b++){var w=u[b];if(y.length>0){var E=Math.abs(y[0].value-w.value);E>=p&&(y=[],g.push(y))}y.push(w)}var C=l+e.minNodeSpacing;if(!e.avoidOverlap){var x=g.length>0&&g[0].length>1,R=Math.min(o.w,o.h)/2-C,S=R/(g.length+x?1:0);C=Math.min(C,S)}for(var P=0,k=0;k<g.length;k++){var B=g[k],D=e.sweep===void 0?2*Math.PI-2*Math.PI/B.length:e.sweep,A=B.dTheta=D/Math.max(1,B.length-1);if(B.length>1&&e.avoidOverlap){var L=Math.cos(A)-Math.cos(0),I=Math.sin(A)-Math.sin(0),M=Math.sqrt(C*C/(L*L+I*I));P=Math.max(M,P)}B.r=P,P+=C}if(e.equidistant){for(var O=0,V=0,W=0;W<g.length;W++){var N=g[W],z=N.r-V;O=Math.max(O,z)}V=0;for(var X=0;X<g.length;X++){var j=g[X];X===0&&(V=j.r),j.r=V,V+=O}}for(var J={},G=0;G<g.length;G++)for(var Z=g[G],ae=Z.dTheta,Q=Z.r,F=0;F<Z.length;F++){var q=Z[F],U=e.startAngle+(r?1:-1)*ae*F,re={x:s.x+Q*Math.cos(U),y:s.y+Q*Math.sin(U)};J[q.node.id()]=re}return n.nodes().layoutPositions(this,e,function(oe){var xe=oe.id();return J[xe]}),this};var Ts,sw={ready:function(){},stop:function(){},animate:!0,animationEasing:void 0,animationDuration:void 0,animateFilter:function(e,r){return!0},animationThreshold:250,refresh:20,fit:!0,padding:30,boundingBox:void 0,nodeDimensionsIncludeLabels:!1,randomize:!1,componentSpacing:40,nodeRepulsion:function(e){return 2048},nodeOverlap:4,idealEdgeLength:function(e){return 32},edgeElasticity:function(e){return 32},nestingFactor:1.2,gravity:1,numIter:1e3,initialTemp:1e3,coolingFactor:.99,minTemp:1};function Yi(t){this.options=ge({},sw,t),this.options.layout=this;var e=this.options.eles.nodes(),r=this.options.eles.edges(),a=r.filter(function(n){var i=n.source().data("id"),o=n.target().data("id"),s=e.some(function(l){return l.data("id")===i}),u=e.some(function(l){return l.data("id")===o});return!s||!u});this.options.eles=this.options.eles.not(a)}Yi.prototype.run=function(){var t=this.options,e=t.cy,r=this;r.stopped=!1,(t.animate===!0||t.animate===!1)&&r.emit({type:"layoutstart",layout:r}),t.debug===!0?Ts=!0:Ts=!1;var a=uw(e,r,t);Ts&&cw(a),t.randomize&&fw(a);var n=cr(),i=function(){vw(a,e,t),t.fit===!0&&e.fit(t.padding)},o=function(v){return!(r.stopped||v>=t.numIter||(dw(a,t),a.temperature=a.temperature*t.coolingFactor,a.temperature<t.minTemp))},s=function(){if(t.animate===!0||t.animate===!1)i(),r.one("layoutstop",t.stop),r.emit({type:"layoutstop",layout:r});else{var v=t.eles.nodes(),h=rd(a,t,v);v.layoutPositions(r,t,h)}},u=0,l=!0;if(t.animate===!0){var c=function(){for(var v=0;l&&v<t.refresh;)l=o(u),u++,v++;if(!l)Qc(a,t),s();else{var h=cr();h-n>=t.animationThreshold&&i(),bi(c)}};c()}else{for(;l;)l=o(u),u++;Qc(a,t),s()}return this};Yi.prototype.stop=function(){return this.stopped=!0,this.thread&&this.thread.stop(),this.emit("layoutstop"),this};Yi.prototype.destroy=function(){return this.thread&&this.thread.stop(),this};var uw=function(e,r,a){for(var n=a.eles.edges(),i=a.eles.nodes(),o=Dt(a.boundingBox?a.boundingBox:{x1:0,y1:0,w:e.width(),h:e.height()}),s={isCompound:e.hasCompoundNodes(),layoutNodes:[],idToIndex:{},nodeSize:i.size(),graphSet:[],indexToGraph:[],layoutEdges:[],edgeSize:n.size(),temperature:a.initialTemp,clientWidth:o.w,clientHeight:o.h,boundingBox:o},u=a.eles.components(),l={},c=0;c<u.length;c++)for(var f=u[c],v=0;v<f.length;v++){var h=f[v];l[h.id()]=c}for(var c=0;c<s.nodeSize;c++){var d=i[c],m=d.layoutDimensions(a),p={};p.isLocked=d.locked(),p.id=d.data("id"),p.parentId=d.data("parent"),p.cmptId=l[d.id()],p.children=[],p.positionX=d.position("x"),p.positionY=d.position("y"),p.offsetX=0,p.offsetY=0,p.height=m.w,p.width=m.h,p.maxX=p.positionX+p.width/2,p.minX=p.positionX-p.width/2,p.maxY=p.positionY+p.height/2,p.minY=p.positionY-p.height/2,p.padLeft=parseFloat(d.style("padding")),p.padRight=parseFloat(d.style("padding")),p.padTop=parseFloat(d.style("padding")),p.padBottom=parseFloat(d.style("padding")),p.nodeRepulsion=Ke(a.nodeRepulsion)?a.nodeRepulsion(d):a.nodeRepulsion,s.layoutNodes.push(p),s.idToIndex[p.id]=c}for(var g=[],y=0,b=-1,w=[],c=0;c<s.nodeSize;c++){var d=s.layoutNodes[c],E=d.parentId;E!=null?s.layoutNodes[s.idToIndex[E]].children.push(d.id):(g[++b]=d.id,w.push(d.id))}for(s.graphSet.push(w);y<=b;){var C=g[y++],x=s.idToIndex[C],h=s.layoutNodes[x],R=h.children;if(R.length>0){s.graphSet.push(R);for(var c=0;c<R.length;c++)g[++b]=R[c]}}for(var c=0;c<s.graphSet.length;c++)for(var S=s.graphSet[c],v=0;v<S.length;v++){var P=s.idToIndex[S[v]];s.indexToGraph[P]=c}for(var c=0;c<s.edgeSize;c++){var k=n[c],B={};B.id=k.data("id"),B.sourceId=k.data("source"),B.targetId=k.data("target");var D=Ke(a.idealEdgeLength)?a.idealEdgeLength(k):a.idealEdgeLength,A=Ke(a.edgeElasticity)?a.edgeElasticity(k):a.edgeElasticity,L=s.idToIndex[B.sourceId],I=s.idToIndex[B.targetId],M=s.indexToGraph[L],O=s.indexToGraph[I];if(M!=O){for(var V=lw(B.sourceId,B.targetId,s),W=s.graphSet[V],N=0,p=s.layoutNodes[L];W.indexOf(p.id)===-1;)p=s.layoutNodes[s.idToIndex[p.parentId]],N++;for(p=s.layoutNodes[I];W.indexOf(p.id)===-1;)p=s.layoutNodes[s.idToIndex[p.parentId]],N++;D*=N*a.nestingFactor}B.idealLength=D,B.elasticity=A,s.layoutEdges.push(B)}return s},lw=function(e,r,a){var n=td(e,r,0,a);return 2>n.count?0:n.graph},td=function(e,r,a,n){var i=n.graphSet[a];if(-1<i.indexOf(e)&&-1<i.indexOf(r))return{count:2,graph:a};for(var o=0,s=0;s<i.length;s++){var u=i[s],l=n.idToIndex[u],c=n.layoutNodes[l].children;if(c.length!==0){var f=n.indexToGraph[n.idToIndex[c[0]]],v=td(e,r,f,n);if(v.count!==0)if(v.count===1){if(o++,o===2)break}else return v}}return{count:o,graph:a}},cw,fw=function(e,r){for(var a=e.clientWidth,n=e.clientHeight,i=0;i<e.nodeSize;i++){var o=e.layoutNodes[i];o.children.length===0&&!o.isLocked&&(o.positionX=Math.random()*a,o.positionY=Math.random()*n)}},rd=function(e,r,a){var n=e.boundingBox,i={x1:1/0,x2:-1/0,y1:1/0,y2:-1/0};return r.boundingBox&&(a.forEach(function(o){var s=e.layoutNodes[e.idToIndex[o.data("id")]];i.x1=Math.min(i.x1,s.positionX),i.x2=Math.max(i.x2,s.positionX),i.y1=Math.min(i.y1,s.positionY),i.y2=Math.max(i.y2,s.positionY)}),i.w=i.x2-i.x1,i.h=i.y2-i.y1),function(o,s){var u=e.layoutNodes[e.idToIndex[o.data("id")]];if(r.boundingBox){var l=(u.positionX-i.x1)/i.w,c=(u.positionY-i.y1)/i.h;return{x:n.x1+l*n.w,y:n.y1+c*n.h}}else return{x:u.positionX,y:u.positionY}}},vw=function(e,r,a){var n=a.layout,i=a.eles.nodes(),o=rd(e,a,i);i.positions(o),e.ready!==!0&&(e.ready=!0,n.one("layoutready",a.ready),n.emit({type:"layoutready",layout:this}))},dw=function(e,r,a){hw(e,r),mw(e),yw(e,r),bw(e),ww(e)},hw=function(e,r){for(var a=0;a<e.graphSet.length;a++)for(var n=e.graphSet[a],i=n.length,o=0;o<i;o++)for(var s=e.layoutNodes[e.idToIndex[n[o]]],u=o+1;u<i;u++){var l=e.layoutNodes[e.idToIndex[n[u]]];pw(s,l,e,r)}},Zc=function(e){return-1+2*e*Math.random()},pw=function(e,r,a,n){var i=e.cmptId,o=r.cmptId;if(!(i!==o&&!a.isCompound)){var s=r.positionX-e.positionX,u=r.positionY-e.positionY,l=1;s===0&&u===0&&(s=Zc(l),u=Zc(l));var c=gw(e,r,s,u);if(c>0)var f=n.nodeOverlap*c,v=Math.sqrt(s*s+u*u),h=f*s/v,d=f*u/v;else var m=Ri(e,s,u),p=Ri(r,-1*s,-1*u),g=p.x-m.x,y=p.y-m.y,b=g*g+y*y,v=Math.sqrt(b),f=(e.nodeRepulsion+r.nodeRepulsion)/b,h=f*g/v,d=f*y/v;e.isLocked||(e.offsetX-=h,e.offsetY-=d),r.isLocked||(r.offsetX+=h,r.offsetY+=d)}},gw=function(e,r,a,n){if(a>0)var i=e.maxX-r.minX;else var i=r.maxX-e.minX;if(n>0)var o=e.maxY-r.minY;else var o=r.maxY-e.minY;return i>=0&&o>=0?Math.sqrt(i*i+o*o):0},Ri=function(e,r,a){var n=e.positionX,i=e.positionY,o=e.height||1,s=e.width||1,u=a/r,l=o/s,c={};return r===0&&0<a||r===0&&0>a?(c.x=n,c.y=i+o/2,c):0<r&&-1*l<=u&&u<=l?(c.x=n+s/2,c.y=i+s*a/2/r,c):0>r&&-1*l<=u&&u<=l?(c.x=n-s/2,c.y=i-s*a/2/r,c):0<a&&(u<=-1*l||u>=l)?(c.x=n+o*r/2/a,c.y=i+o/2,c):(0>a&&(u<=-1*l||u>=l)&&(c.x=n-o*r/2/a,c.y=i-o/2),c)},mw=function(e,r){for(var a=0;a<e.edgeSize;a++){var n=e.layoutEdges[a],i=e.idToIndex[n.sourceId],o=e.layoutNodes[i],s=e.idToIndex[n.targetId],u=e.layoutNodes[s],l=u.positionX-o.positionX,c=u.positionY-o.positionY;if(!(l===0&&c===0)){var f=Ri(o,l,c),v=Ri(u,-1*l,-1*c),h=v.x-f.x,d=v.y-f.y,m=Math.sqrt(h*h+d*d),p=Math.pow(n.idealLength-m,2)/n.elasticity;if(m!==0)var g=p*h/m,y=p*d/m;else var g=0,y=0;o.isLocked||(o.offsetX+=g,o.offsetY+=y),u.isLocked||(u.offsetX-=g,u.offsetY-=y)}}},yw=function(e,r){if(r.gravity!==0)for(var a=1,n=0;n<e.graphSet.length;n++){var i=e.graphSet[n],o=i.length;if(n===0)var s=e.clientHeight/2,u=e.clientWidth/2;else var l=e.layoutNodes[e.idToIndex[i[0]]],c=e.layoutNodes[e.idToIndex[l.parentId]],s=c.positionX,u=c.positionY;for(var f=0;f<o;f++){var v=e.layoutNodes[e.idToIndex[i[f]]];if(!v.isLocked){var h=s-v.positionX,d=u-v.positionY,m=Math.sqrt(h*h+d*d);if(m>a){var p=r.gravity*h/m,g=r.gravity*d/m;v.offsetX+=p,v.offsetY+=g}}}}},bw=function(e,r){var a=[],n=0,i=-1;for(a.push.apply(a,e.graphSet[0]),i+=e.graphSet[0].length;n<=i;){var o=a[n++],s=e.idToIndex[o],u=e.layoutNodes[s],l=u.children;if(0<l.length&&!u.isLocked){for(var c=u.offsetX,f=u.offsetY,v=0;v<l.length;v++){var h=e.layoutNodes[e.idToIndex[l[v]]];h.offsetX+=c,h.offsetY+=f,a[++i]=l[v]}u.offsetX=0,u.offsetY=0}}},ww=function(e,r){for(var a=0;a<e.nodeSize;a++){var n=e.layoutNodes[a];0<n.children.length&&(n.maxX=void 0,n.minX=void 0,n.maxY=void 0,n.minY=void 0)}for(var a=0;a<e.nodeSize;a++){var n=e.layoutNodes[a];if(!(0<n.children.length||n.isLocked)){var i=xw(n.offsetX,n.offsetY,e.temperature);n.positionX+=i.x,n.positionY+=i.y,n.offsetX=0,n.offsetY=0,n.minX=n.positionX-n.width,n.maxX=n.positionX+n.width,n.minY=n.positionY-n.height,n.maxY=n.positionY+n.height,ad(n,e)}}for(var a=0;a<e.nodeSize;a++){var n=e.layoutNodes[a];0<n.children.length&&!n.isLocked&&(n.positionX=(n.maxX+n.minX)/2,n.positionY=(n.maxY+n.minY)/2,n.width=n.maxX-n.minX,n.height=n.maxY-n.minY)}},xw=function(e,r,a){var n=Math.sqrt(e*e+r*r);if(n>a)var i={x:a*e/n,y:a*r/n};else var i={x:e,y:r};return i},ad=function(e,r){var a=e.parentId;if(a!=null){var n=r.layoutNodes[r.idToIndex[a]],i=!1;if((n.maxX==null||e.maxX+n.padRight>n.maxX)&&(n.maxX=e.maxX+n.padRight,i=!0),(n.minX==null||e.minX-n.padLeft<n.minX)&&(n.minX=e.minX-n.padLeft,i=!0),(n.maxY==null||e.maxY+n.padBottom>n.maxY)&&(n.maxY=e.maxY+n.padBottom,i=!0),(n.minY==null||e.minY-n.padTop<n.minY)&&(n.minY=e.minY-n.padTop,i=!0),i)return ad(n,r)}},Qc=function(e,r){for(var a=e.layoutNodes,n=[],i=0;i<a.length;i++){var o=a[i],s=o.cmptId,u=n[s]=n[s]||[];u.push(o)}for(var l=0,i=0;i<n.length;i++){var c=n[i];if(c){c.x1=1/0,c.x2=-1/0,c.y1=1/0,c.y2=-1/0;for(var f=0;f<c.length;f++){var v=c[f];c.x1=Math.min(c.x1,v.positionX-v.width/2),c.x2=Math.max(c.x2,v.positionX+v.width/2),c.y1=Math.min(c.y1,v.positionY-v.height/2),c.y2=Math.max(c.y2,v.positionY+v.height/2)}c.w=c.x2-c.x1,c.h=c.y2-c.y1,l+=c.w*c.h}}n.sort(function(y,b){return b.w*b.h-y.w*y.h});for(var h=0,d=0,m=0,p=0,g=Math.sqrt(l)*e.clientWidth/e.clientHeight,i=0;i<n.length;i++){var c=n[i];if(c){for(var f=0;f<c.length;f++){var v=c[f];v.isLocked||(v.positionX+=h-c.x1,v.positionY+=d-c.y1)}h+=c.w+r.componentSpacing,m+=c.w+r.componentSpacing,p=Math.max(p,c.h),m>g&&(d+=p+r.componentSpacing,h=0,m=0,p=0)}}},Ew={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,avoidOverlapPadding:10,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,condense:!1,rows:void 0,cols:void 0,position:function(e){},sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,r){return!0},ready:void 0,stop:void 0,transform:function(e,r){return r}};function nd(t){this.options=ge({},Ew,t)}nd.prototype.run=function(){var t=this.options,e=t,r=t.cy,a=e.eles,n=a.nodes().not(":parent");e.sort&&(n=n.sort(e.sort));var i=Dt(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:r.width(),h:r.height()});if(i.h===0||i.w===0)a.nodes().layoutPositions(this,e,function(X){return{x:i.x1,y:i.y1}});else{var o=n.size(),s=Math.sqrt(o*i.h/i.w),u=Math.round(s),l=Math.round(i.w/i.h*s),c=function(j){if(j==null)return Math.min(u,l);var J=Math.min(u,l);J==u?u=j:l=j},f=function(j){if(j==null)return Math.max(u,l);var J=Math.max(u,l);J==u?u=j:l=j},v=e.rows,h=e.cols!=null?e.cols:e.columns;if(v!=null&&h!=null)u=v,l=h;else if(v!=null&&h==null)u=v,l=Math.ceil(o/u);else if(v==null&&h!=null)l=h,u=Math.ceil(o/l);else if(l*u>o){var d=c(),m=f();(d-1)*m>=o?c(d-1):(m-1)*d>=o&&f(m-1)}else for(;l*u<o;){var p=c(),g=f();(g+1)*p>=o?f(g+1):c(p+1)}var y=i.w/l,b=i.h/u;if(e.condense&&(y=0,b=0),e.avoidOverlap)for(var w=0;w<n.length;w++){var E=n[w],C=E._private.position;(C.x==null||C.y==null)&&(C.x=0,C.y=0);var x=E.layoutDimensions(e),R=e.avoidOverlapPadding,S=x.w+R,P=x.h+R;y=Math.max(y,S),b=Math.max(b,P)}for(var k={},B=function(j,J){return!!k["c-"+j+"-"+J]},D=function(j,J){k["c-"+j+"-"+J]=!0},A=0,L=0,I=function(){L++,L>=l&&(L=0,A++)},M={},O=0;O<n.length;O++){var V=n[O],W=e.position(V);if(W&&(W.row!==void 0||W.col!==void 0)){var N={row:W.row,col:W.col};if(N.col===void 0)for(N.col=0;B(N.row,N.col);)N.col++;else if(N.row===void 0)for(N.row=0;B(N.row,N.col);)N.row++;M[V.id()]=N,D(N.row,N.col)}}var z=function(j,J){var G,Z;if(j.locked()||j.isParent())return!1;var ae=M[j.id()];if(ae)G=ae.col*y+y/2+i.x1,Z=ae.row*b+b/2+i.y1;else{for(;B(A,L);)I();G=L*y+y/2+i.x1,Z=A*b+b/2+i.y1,D(A,L),I()}return{x:G,y:Z}};n.layoutPositions(this,e,z)}return this};var Cw={ready:function(){},stop:function(){}};function Du(t){this.options=ge({},Cw,t)}Du.prototype.run=function(){var t=this.options,e=t.eles,r=this;return t.cy,r.emit("layoutstart"),e.nodes().positions(function(){return{x:0,y:0}}),r.one("layoutready",t.ready),r.emit("layoutready"),r.one("layoutstop",t.stop),r.emit("layoutstop"),this};Du.prototype.stop=function(){return this};var Tw={positions:void 0,zoom:void 0,pan:void 0,fit:!0,padding:30,spacingFactor:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,r){return!0},ready:void 0,stop:void 0,transform:function(e,r){return r}};function id(t){this.options=ge({},Tw,t)}id.prototype.run=function(){var t=this.options,e=t.eles,r=e.nodes(),a=Ke(t.positions);function n(i){if(t.positions==null)return Hm(i.position());if(a)return t.positions(i);var o=t.positions[i._private.data.id];return o??null}return r.layoutPositions(this,t,function(i,o){var s=n(i);return i.locked()||s==null?!1:s}),this};var Sw={fit:!0,padding:30,boundingBox:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,r){return!0},ready:void 0,stop:void 0,transform:function(e,r){return r}};function od(t){this.options=ge({},Sw,t)}od.prototype.run=function(){var t=this.options,e=t.cy,r=t.eles,a=Dt(t.boundingBox?t.boundingBox:{x1:0,y1:0,w:e.width(),h:e.height()}),n=function(o,s){return{x:a.x1+Math.round(Math.random()*a.w),y:a.y1+Math.round(Math.random()*a.h)}};return r.nodes().layoutPositions(this,t,n),this};var Rw=[{name:"breadthfirst",impl:jv},{name:"circle",impl:Jv},{name:"concentric",impl:ed},{name:"cose",impl:Yi},{name:"grid",impl:nd},{name:"null",impl:Du},{name:"preset",impl:id},{name:"random",impl:od}];function sd(t){this.options=t,this.notifications=0}var jc=function(){},Jc=function(){throw new Error("A headless instance can not render images")};sd.prototype={recalculateRenderedStyle:jc,notify:function(){this.notifications++},init:jc,isHeadless:function(){return!0},png:Jc,jpg:Jc};var Bu={};Bu.arrowShapeWidth=.3;Bu.registerArrowShapes=function(){var t=this.arrowShapes={},e=this,r=function(l,c,f,v,h,d,m){var p=h.x-f/2-m,g=h.x+f/2+m,y=h.y-f/2-m,b=h.y+f/2+m,w=p<=l&&l<=g&&y<=c&&c<=b;return w},a=function(l,c,f,v,h){var d=l*Math.cos(v)-c*Math.sin(v),m=l*Math.sin(v)+c*Math.cos(v),p=d*f,g=m*f,y=p+h.x,b=g+h.y;return{x:y,y:b}},n=function(l,c,f,v){for(var h=[],d=0;d<l.length;d+=2){var m=l[d],p=l[d+1];h.push(a(m,p,c,f,v))}return h},i=function(l){for(var c=[],f=0;f<l.length;f++){var v=l[f];c.push(v.x,v.y)}return c},o=function(l){return l.pstyle("width").pfValue*l.pstyle("arrow-scale").pfValue*2},s=function(l,c){de(c)&&(c=t[c]),t[l]=ge({name:l,points:[-.15,-.3,.15,-.3,.15,.3,-.15,.3],collide:function(v,h,d,m,p,g){var y=i(n(this.points,d+2*g,m,p)),b=Pt(v,h,y);return b},roughCollide:r,draw:function(v,h,d,m){var p=n(this.points,h,d,m);e.arrowShapeImpl("polygon")(v,p)},spacing:function(v){return 0},gap:o},c)};s("none",{collide:wi,roughCollide:wi,draw:pu,spacing:pl,gap:pl}),s("triangle",{points:[-.15,-.3,0,0,.15,-.3]}),s("arrow","triangle"),s("triangle-backcurve",{points:t.triangle.points,controlPoint:[0,-.15],roughCollide:r,draw:function(l,c,f,v,h){var d=n(this.points,c,f,v),m=this.controlPoint,p=a(m[0],m[1],c,f,v);e.arrowShapeImpl(this.name)(l,d,p)},gap:function(l){return o(l)*.8}}),s("triangle-tee",{points:[0,0,.15,-.3,-.15,-.3,0,0],pointsTee:[-.15,-.4,-.15,-.5,.15,-.5,.15,-.4],collide:function(l,c,f,v,h,d,m){var p=i(n(this.points,f+2*m,v,h)),g=i(n(this.pointsTee,f+2*m,v,h)),y=Pt(l,c,p)||Pt(l,c,g);return y},draw:function(l,c,f,v,h){var d=n(this.points,c,f,v),m=n(this.pointsTee,c,f,v);e.arrowShapeImpl(this.name)(l,d,m)}}),s("circle-triangle",{radius:.15,pointsTr:[0,-.15,.15,-.45,-.15,-.45,0,-.15],collide:function(l,c,f,v,h,d,m){var p=h,g=Math.pow(p.x-l,2)+Math.pow(p.y-c,2)<=Math.pow((f+2*m)*this.radius,2),y=i(n(this.points,f+2*m,v,h));return Pt(l,c,y)||g},draw:function(l,c,f,v,h){var d=n(this.pointsTr,c,f,v);e.arrowShapeImpl(this.name)(l,d,v.x,v.y,this.radius*c)},spacing:function(l){return e.getArrowWidth(l.pstyle("width").pfValue,l.pstyle("arrow-scale").value)*this.radius}}),s("triangle-cross",{points:[0,0,.15,-.3,-.15,-.3,0,0],baseCrossLinePts:[-.15,-.4,-.15,-.4,.15,-.4,.15,-.4],crossLinePts:function(l,c){var f=this.baseCrossLinePts.slice(),v=c/l,h=3,d=5;return f[h]=f[h]-v,f[d]=f[d]-v,f},collide:function(l,c,f,v,h,d,m){var p=i(n(this.points,f+2*m,v,h)),g=i(n(this.crossLinePts(f,d),f+2*m,v,h)),y=Pt(l,c,p)||Pt(l,c,g);return y},draw:function(l,c,f,v,h){var d=n(this.points,c,f,v),m=n(this.crossLinePts(c,h),c,f,v);e.arrowShapeImpl(this.name)(l,d,m)}}),s("vee",{points:[-.15,-.3,0,0,.15,-.3,0,-.15],gap:function(l){return o(l)*.525}}),s("circle",{radius:.15,collide:function(l,c,f,v,h,d,m){var p=h,g=Math.pow(p.x-l,2)+Math.pow(p.y-c,2)<=Math.pow((f+2*m)*this.radius,2);return g},draw:function(l,c,f,v,h){e.arrowShapeImpl(this.name)(l,v.x,v.y,this.radius*c)},spacing:function(l){return e.getArrowWidth(l.pstyle("width").pfValue,l.pstyle("arrow-scale").value)*this.radius}}),s("tee",{points:[-.15,0,-.15,-.1,.15,-.1,.15,0],spacing:function(l){return 1},gap:function(l){return 1}}),s("square",{points:[-.15,0,.15,0,.15,-.3,-.15,-.3]}),s("diamond",{points:[-.15,-.15,0,-.3,.15,-.15,0,0],gap:function(l){return l.pstyle("width").pfValue*l.pstyle("arrow-scale").value}}),s("chevron",{points:[0,0,-.15,-.15,-.1,-.2,0,-.1,.1,-.2,.15,-.15],gap:function(l){return .95*l.pstyle("width").pfValue*l.pstyle("arrow-scale").value}})};var aa={};aa.projectIntoViewport=function(t,e){var r=this.cy,a=this.findContainerClientCoords(),n=a[0],i=a[1],o=a[4],s=r.pan(),u=r.zoom(),l=((t-n)/o-s.x)/u,c=((e-i)/o-s.y)/u;return[l,c]};aa.findContainerClientCoords=function(){if(this.containerBB)return this.containerBB;var t=this.container,e=t.getBoundingClientRect(),r=this.cy.window().getComputedStyle(t),a=function(g){return parseFloat(r.getPropertyValue(g))},n={left:a("padding-left"),right:a("padding-right"),top:a("padding-top"),bottom:a("padding-bottom")},i={left:a("border-left-width"),right:a("border-right-width"),top:a("border-top-width"),bottom:a("border-bottom-width")},o=t.clientWidth,s=t.clientHeight,u=n.left+n.right,l=n.top+n.bottom,c=i.left+i.right,f=e.width/(o+c),v=o-u,h=s-l,d=e.left+n.left+i.left,m=e.top+n.top+i.top;return this.containerBB=[d,m,v,h,f]};aa.invalidateContainerClientCoordsCache=function(){this.containerBB=null};aa.findNearestElement=function(t,e,r,a){return this.findNearestElements(t,e,r,a)[0]};aa.findNearestElements=function(t,e,r,a){var n=this,i=this,o=i.getCachedZSortedEles(),s=[],u=i.cy.zoom(),l=i.cy.hasCompoundNodes(),c=(a?24:8)/u,f=(a?8:2)/u,v=(a?8:2)/u,h=1/0,d,m;r&&(o=o.interactive);function p(x,R){if(x.isNode()){if(m)return;m=x,s.push(x)}if(x.isEdge()&&(R==null||R<h))if(d){if(d.pstyle("z-compound-depth").value===x.pstyle("z-compound-depth").value&&d.pstyle("z-compound-depth").value===x.pstyle("z-compound-depth").value){for(var S=0;S<s.length;S++)if(s[S].isEdge()){s[S]=x,d=x,h=R??h;break}}}else s.push(x),d=x,h=R??h}function g(x){var R=x.outerWidth()+2*f,S=x.outerHeight()+2*f,P=R/2,k=S/2,B=x.position(),D=x.pstyle("corner-radius").value==="auto"?"auto":x.pstyle("corner-radius").pfValue,A=x._private.rscratch;if(B.x-P<=t&&t<=B.x+P&&B.y-k<=e&&e<=B.y+k){var L=i.nodeShapes[n.getNodeShape(x)];if(L.checkPoint(t,e,0,R,S,B.x,B.y,D,A))return p(x,0),!0}}function y(x){var R=x._private,S=R.rscratch,P=x.pstyle("width").pfValue,k=x.pstyle("arrow-scale").value,B=P/2+c,D=B*B,A=B*2,O=R.source,V=R.target,L;if(S.edgeType==="segments"||S.edgeType==="straight"||S.edgeType==="haystack"){for(var I=S.allpts,M=0;M+3<I.length;M+=2)if(oy(t,e,I[M],I[M+1],I[M+2],I[M+3],A)&&D>(L=fy(t,e,I[M],I[M+1],I[M+2],I[M+3])))return p(x,L),!0}else if(S.edgeType==="bezier"||S.edgeType==="multibezier"||S.edgeType==="self"||S.edgeType==="compound"){for(var I=S.allpts,M=0;M+5<S.allpts.length;M+=4)if(sy(t,e,I[M],I[M+1],I[M+2],I[M+3],I[M+4],I[M+5],A)&&D>(L=cy(t,e,I[M],I[M+1],I[M+2],I[M+3],I[M+4],I[M+5])))return p(x,L),!0}for(var O=O||R.source,V=V||R.target,W=n.getArrowWidth(P,k),N=[{name:"source",x:S.arrowStartX,y:S.arrowStartY,angle:S.srcArrowAngle},{name:"target",x:S.arrowEndX,y:S.arrowEndY,angle:S.tgtArrowAngle},{name:"mid-source",x:S.midX,y:S.midY,angle:S.midsrcArrowAngle},{name:"mid-target",x:S.midX,y:S.midY,angle:S.midtgtArrowAngle}],M=0;M<N.length;M++){var z=N[M],X=i.arrowShapes[x.pstyle(z.name+"-arrow-shape").value],j=x.pstyle("width").pfValue;if(X.roughCollide(t,e,W,z.angle,{x:z.x,y:z.y},j,c)&&X.collide(t,e,W,z.angle,{x:z.x,y:z.y},j,c))return p(x),!0}l&&s.length>0&&(g(O),g(V))}function b(x,R,S){return Rt(x,R,S)}function w(x,R){var S=x._private,P=v,k;R?k=R+"-":k="",x.boundingBox();var B=S.labelBounds[R||"main"],D=x.pstyle(k+"label").value,A=x.pstyle("text-events").strValue==="yes";if(!(!A||!D)){var L=b(S.rscratch,"labelX",R),I=b(S.rscratch,"labelY",R),M=b(S.rscratch,"labelAngle",R),O=x.pstyle(k+"text-margin-x").pfValue,V=x.pstyle(k+"text-margin-y").pfValue,W=B.x1-P-O,N=B.x2+P-O,z=B.y1-P-V,X=B.y2+P-V;if(M){var j=Math.cos(M),J=Math.sin(M),G=function(re,oe){return re=re-L,oe=oe-I,{x:re*j-oe*J+L,y:re*J+oe*j+I}},Z=G(W,z),ae=G(W,X),Q=G(N,z),F=G(N,X),q=[Z.x+O,Z.y+V,Q.x+O,Q.y+V,F.x+O,F.y+V,ae.x+O,ae.y+V];if(Pt(t,e,q))return p(x),!0}else if(ka(B,t,e))return p(x),!0}}for(var E=o.length-1;E>=0;E--){var C=o[E];C.isNode()?g(C)||w(C):y(C)||w(C)||w(C,"source")||w(C,"target")}return s};aa.getAllInBox=function(t,e,r,a){var n=this.getCachedZSortedEles().interactive,i=this.cy.zoom(),o=2/i,s=[],u=Math.min(t,r),l=Math.max(t,r),c=Math.min(e,a),f=Math.max(e,a);t=u,r=l,e=c,a=f;var v=Dt({x1:t,y1:e,x2:r,y2:a});function h(D,A,L){return Rt(D,A,L)}function d(D,A){var L=D._private,I=o,M="";D.boundingBox();var O=L.labelBounds.main,V=h(L.rscratch,"labelX",A),W=h(L.rscratch,"labelY",A),N=h(L.rscratch,"labelAngle",A),z=D.pstyle(M+"text-margin-x").pfValue,X=D.pstyle(M+"text-margin-y").pfValue,j=O.x1-I-z,J=O.x2+I-z,G=O.y1-I-X,Z=O.y2+I-X;if(N){var ae=Math.cos(N),Q=Math.sin(N),F=function(U,re){return U=U-V,re=re-W,{x:U*ae-re*Q+V,y:U*Q+re*ae+W}};return[F(j,G),F(J,G),F(J,Z),F(j,Z)]}else return[{x:j,y:G},{x:J,y:G},{x:J,y:Z},{x:j,y:Z}]}for(var m=0;m<n.length;m++){var p=n[m];if(p.isNode()){var g=p,y=g.pstyle("text-events").strValue==="yes",b=g.pstyle("box-select-labels").strValue==="yes",w=g.boundingBox({includeNodes:!0,includeEdges:!1,includeLabels:b&&y});if(bu(v,w)){var E=d(g),C=[{x:v.x1,y:v.y1},{x:v.x2,y:v.y1},{x:v.x2,y:v.y2},{x:v.x1,y:v.y2}];gy(E,C)&&s.push(g)}}else{var x=p,R=x._private,S=R.rscratch;if(S.startX!=null&&S.startY!=null&&!ka(v,S.startX,S.startY)||S.endX!=null&&S.endY!=null&&!ka(v,S.endX,S.endY))continue;if(S.edgeType==="bezier"||S.edgeType==="multibezier"||S.edgeType==="self"||S.edgeType==="compound"||S.edgeType==="segments"||S.edgeType==="haystack"){for(var P=R.rstyle.bezierPts||R.rstyle.linePts||R.rstyle.haystackPts,k=!0,B=0;B<P.length;B++)if(!ny(v,P[B])){k=!1;break}k&&s.push(x)}else(S.edgeType==="haystack"||S.edgeType==="straight")&&s.push(x)}}return s};var Pi={};Pi.calculateArrowAngles=function(t){var e=t._private.rscratch,r=e.edgeType==="haystack",a=e.edgeType==="bezier",n=e.edgeType==="multibezier",i=e.edgeType==="segments",o=e.edgeType==="compound",s=e.edgeType==="self",u,l,c,f,v,h,g,y;if(r?(c=e.haystackPts[0],f=e.haystackPts[1],v=e.haystackPts[2],h=e.haystackPts[3]):(c=e.arrowStartX,f=e.arrowStartY,v=e.arrowEndX,h=e.arrowEndY),g=e.midX,y=e.midY,i)u=c-e.segpts[0],l=f-e.segpts[1];else if(n||o||s||a){var d=e.allpts,m=st(d[0],d[2],d[4],.1),p=st(d[1],d[3],d[5],.1);u=c-m,l=f-p}else u=c-g,l=f-y;e.srcArrowAngle=qn(u,l);var g=e.midX,y=e.midY;if(r&&(g=(c+v)/2,y=(f+h)/2),u=v-c,l=h-f,i){var d=e.allpts;if(d.length/2%2===0){var b=d.length/2,w=b-2;u=d[b]-d[w],l=d[b+1]-d[w+1]}else if(e.isRound)u=e.midVector[1],l=-e.midVector[0];else{var b=d.length/2-1,w=b-2;u=d[b]-d[w],l=d[b+1]-d[w+1]}}else if(n||o||s){var d=e.allpts,E=e.ctrlpts,C,x,R,S;if(E.length/2%2===0){var P=d.length/2-1,k=P+2,B=k+2;C=st(d[P],d[k],d[B],0),x=st(d[P+1],d[k+1],d[B+1],0),R=st(d[P],d[k],d[B],1e-4),S=st(d[P+1],d[k+1],d[B+1],1e-4)}else{var k=d.length/2-1,P=k-2,B=k+2;C=st(d[P],d[k],d[B],.4999),x=st(d[P+1],d[k+1],d[B+1],.4999),R=st(d[P],d[k],d[B],.5),S=st(d[P+1],d[k+1],d[B+1],.5)}u=R-C,l=S-x}if(e.midtgtArrowAngle=qn(u,l),e.midDispX=u,e.midDispY=l,u*=-1,l*=-1,i){var d=e.allpts;if(d.length/2%2!==0){if(!e.isRound){var b=d.length/2-1,D=b+2;u=-(d[D]-d[b]),l=-(d[D+1]-d[b+1])}}}if(e.midsrcArrowAngle=qn(u,l),i)u=v-e.segpts[e.segpts.length-2],l=h-e.segpts[e.segpts.length-1];else if(n||o||s||a){var d=e.allpts,A=d.length,m=st(d[A-6],d[A-4],d[A-2],.9),p=st(d[A-5],d[A-3],d[A-1],.9);u=v-m,l=h-p}else u=v-g,l=h-y;e.tgtArrowAngle=qn(u,l)};Pi.getArrowWidth=Pi.getArrowHeight=function(t,e){var r=this.arrowWidthCache=this.arrowWidthCache||{},a=r[t+", "+e];return a||(a=Math.max(Math.pow(t*13.37,.9),29)*e,r[t+", "+e]=a,a)};var Xs,Zs,Yt={},Lt={},ef,tf,Hr,vi,ar,zr,Gr,Ht,fa,Yn,ud,ld,Qs,js,rf,af=function(e,r,a){a.x=r.x-e.x,a.y=r.y-e.y,a.len=Math.sqrt(a.x*a.x+a.y*a.y),a.nx=a.x/a.len,a.ny=a.y/a.len,a.ang=Math.atan2(a.ny,a.nx)},Pw=function(e,r){r.x=e.x*-1,r.y=e.y*-1,r.nx=e.nx*-1,r.ny=e.ny*-1,r.ang=e.ang>0?-(Math.PI-e.ang):Math.PI+e.ang},kw=function(e,r,a,n,i){if(e!==rf?af(r,e,Yt):Pw(Lt,Yt),af(r,a,Lt),ef=Yt.nx*Lt.ny-Yt.ny*Lt.nx,tf=Yt.nx*Lt.nx-Yt.ny*-Lt.ny,ar=Math.asin(Math.max(-1,Math.min(1,ef))),Math.abs(ar)<1e-6){Xs=r.x,Zs=r.y,Gr=fa=0;return}Hr=1,vi=!1,tf<0?ar<0?ar=Math.PI+ar:(ar=Math.PI-ar,Hr=-1,vi=!0):ar>0&&(Hr=-1,vi=!0),r.radius!==void 0?fa=r.radius:fa=n,zr=ar/2,Yn=Math.min(Yt.len/2,Lt.len/2),i?(Ht=Math.abs(Math.cos(zr)*fa/Math.sin(zr)),Ht>Yn?(Ht=Yn,Gr=Math.abs(Ht*Math.sin(zr)/Math.cos(zr))):Gr=fa):(Ht=Math.min(Yn,fa),Gr=Math.abs(Ht*Math.sin(zr)/Math.cos(zr))),Qs=r.x+Lt.nx*Ht,js=r.y+Lt.ny*Ht,Xs=Qs-Lt.ny*Gr*Hr,Zs=js+Lt.nx*Gr*Hr,ud=r.x+Yt.nx*Ht,ld=r.y+Yt.ny*Ht,rf=r};function cd(t,e){e.radius===0?t.lineTo(e.cx,e.cy):t.arc(e.cx,e.cy,e.radius,e.startAngle,e.endAngle,e.counterClockwise)}function Au(t,e,r,a){var n=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0;return a===0||e.radius===0?{cx:e.x,cy:e.y,radius:0,startX:e.x,startY:e.y,stopX:e.x,stopY:e.y,startAngle:void 0,endAngle:void 0,counterClockwise:void 0}:(kw(t,e,r,a,n),{cx:Xs,cy:Zs,radius:Gr,startX:ud,startY:ld,stopX:Qs,stopY:js,startAngle:Yt.ang+Math.PI/2*Hr,endAngle:Lt.ang-Math.PI/2*Hr,counterClockwise:vi})}var hn=.01,Dw=Math.sqrt(2*hn),bt={};bt.findMidptPtsEtc=function(t,e){var r=e.posPts,a=e.intersectionPts,n=e.vectorNormInverse,i,o=t.pstyle("source-endpoint"),s=t.pstyle("target-endpoint"),u=o.units!=null&&s.units!=null,l=function(E,C,x,R){var S=R-C,P=x-E,k=Math.sqrt(P*P+S*S);return{x:-S/k,y:P/k}},c=t.pstyle("edge-distances").value;switch(c){case"node-position":i=r;break;case"intersection":i=a;break;case"endpoints":{if(u){var f=this.manualEndptToPx(t.source()[0],o),v=rt(f,2),h=v[0],d=v[1],m=this.manualEndptToPx(t.target()[0],s),p=rt(m,2),g=p[0],y=p[1],b={x1:h,y1:d,x2:g,y2:y};n=l(h,d,g,y),i=b}else Oe("Edge ".concat(t.id()," has edge-distances:endpoints specified without manual endpoints specified via source-endpoint and target-endpoint.  Falling back on edge-distances:intersection (default).")),i=a;break}}return{midptPts:i,vectorNormInverse:n}};bt.findHaystackPoints=function(t){for(var e=0;e<t.length;e++){var r=t[e],a=r._private,n=a.rscratch;if(!n.haystack){var i=Math.random()*2*Math.PI;n.source={x:Math.cos(i),y:Math.sin(i)},i=Math.random()*2*Math.PI,n.target={x:Math.cos(i),y:Math.sin(i)}}var o=a.source,s=a.target,u=o.position(),l=s.position(),c=o.width(),f=s.width(),v=o.height(),h=s.height(),d=r.pstyle("haystack-radius").value,m=d/2;n.haystackPts=n.allpts=[n.source.x*c*m+u.x,n.source.y*v*m+u.y,n.target.x*f*m+l.x,n.target.y*h*m+l.y],n.midX=(n.allpts[0]+n.allpts[2])/2,n.midY=(n.allpts[1]+n.allpts[3])/2,n.edgeType="haystack",n.haystack=!0,this.storeEdgeProjections(r),this.calculateArrowAngles(r),this.recalculateEdgeLabelProjections(r),this.calculateLabelAngles(r)}};bt.findSegmentsPoints=function(t,e){var r=t._private.rscratch,a=t.pstyle("segment-weights"),n=t.pstyle("segment-distances"),i=t.pstyle("segment-radii"),o=t.pstyle("radius-type"),s=Math.min(a.pfValue.length,n.pfValue.length),u=i.pfValue[i.pfValue.length-1],l=o.pfValue[o.pfValue.length-1];r.edgeType="segments",r.segpts=[],r.radii=[],r.isArcRadius=[];for(var c=0;c<s;c++){var f=a.pfValue[c],v=n.pfValue[c],h=1-f,d=f,m=this.findMidptPtsEtc(t,e),p=m.midptPts,g=m.vectorNormInverse,y={x:p.x1*h+p.x2*d,y:p.y1*h+p.y2*d};r.segpts.push(y.x+g.x*v,y.y+g.y*v),r.radii.push(i.pfValue[c]!==void 0?i.pfValue[c]:u),r.isArcRadius.push((o.pfValue[c]!==void 0?o.pfValue[c]:l)==="arc-radius")}};bt.findLoopPoints=function(t,e,r,a){var n=t._private.rscratch,i=e.dirCounts,o=e.srcPos,s=t.pstyle("control-point-distances"),u=s?s.pfValue[0]:void 0,l=t.pstyle("loop-direction").pfValue,c=t.pstyle("loop-sweep").pfValue,f=t.pstyle("control-point-step-size").pfValue;n.edgeType="self";var v=r,h=f;a&&(v=0,h=u);var d=l-Math.PI/2,m=d-c/2,p=d+c/2,g=l+"_"+c;v=i[g]===void 0?i[g]=0:++i[g],n.ctrlpts=[o.x+Math.cos(m)*1.4*h*(v/3+1),o.y+Math.sin(m)*1.4*h*(v/3+1),o.x+Math.cos(p)*1.4*h*(v/3+1),o.y+Math.sin(p)*1.4*h*(v/3+1)]};bt.findCompoundLoopPoints=function(t,e,r,a){var n=t._private.rscratch;n.edgeType="compound";var i=e.srcPos,o=e.tgtPos,s=e.srcW,u=e.srcH,l=e.tgtW,c=e.tgtH,f=t.pstyle("control-point-step-size").pfValue,v=t.pstyle("control-point-distances"),h=v?v.pfValue[0]:void 0,d=r,m=f;a&&(d=0,m=h);var p=50,g={x:i.x-s/2,y:i.y-u/2},y={x:o.x-l/2,y:o.y-c/2},b={x:Math.min(g.x,y.x),y:Math.min(g.y,y.y)},w=.5,E=Math.max(w,Math.log(s*hn)),C=Math.max(w,Math.log(l*hn));n.ctrlpts=[b.x,b.y-(1+Math.pow(p,1.12)/100)*m*(d/3+1)*E,b.x-(1+Math.pow(p,1.12)/100)*m*(d/3+1)*C,b.y]};bt.findStraightEdgePoints=function(t){t._private.rscratch.edgeType="straight"};bt.findBezierPoints=function(t,e,r,a,n){var i=t._private.rscratch,o=t.pstyle("control-point-step-size").pfValue,s=t.pstyle("control-point-distances"),u=t.pstyle("control-point-weights"),l=s&&u?Math.min(s.value.length,u.value.length):1,c=s?s.pfValue[0]:void 0,f=u.value[0],v=a;i.edgeType=v?"multibezier":"bezier",i.ctrlpts=[];for(var h=0;h<l;h++){var d=(.5-e.eles.length/2+r)*o*(n?-1:1),m=void 0,p=yu(d);v&&(c=s?s.pfValue[h]:o,f=u.value[h]),a?m=c:m=c!==void 0?p*c:void 0;var g=m!==void 0?m:d,y=1-f,b=f,w=this.findMidptPtsEtc(t,e),E=w.midptPts,C=w.vectorNormInverse,x={x:E.x1*y+E.x2*b,y:E.y1*y+E.y2*b};i.ctrlpts.push(x.x+C.x*g,x.y+C.y*g)}};bt.findTaxiPoints=function(t,e){var r=t._private.rscratch;r.edgeType="segments";var a="vertical",n="horizontal",i="leftward",o="rightward",s="downward",u="upward",l="auto",c=e.posPts,f=e.srcW,v=e.srcH,h=e.tgtW,d=e.tgtH,m=t.pstyle("edge-distances").value,p=m!=="node-position",g=t.pstyle("taxi-direction").value,y=g,b=t.pstyle("taxi-turn"),w=b.units==="%",E=b.pfValue,C=E<0,x=t.pstyle("taxi-turn-min-distance").pfValue,R=p?(f+h)/2:0,S=p?(v+d)/2:0,P=c.x2-c.x1,k=c.y2-c.y1,B=function(T,$){return T>0?Math.max(T-$,0):Math.min(T+$,0)},D=B(P,R),A=B(k,S),L=!1;y===l?g=Math.abs(D)>Math.abs(A)?n:a:y===u||y===s?(g=a,L=!0):(y===i||y===o)&&(g=n,L=!0);var I=g===a,M=I?A:D,O=I?k:P,V=yu(O),W=!1;!(L&&(w||C))&&(y===s&&O<0||y===u&&O>0||y===i&&O>0||y===o&&O<0)&&(V*=-1,M=V*Math.abs(M),W=!0);var N;if(w){var z=E<0?1+E:E;N=z*M}else{var X=E<0?M:0;N=X+E*V}var j=function(T){return Math.abs(T)<x||Math.abs(T)>=Math.abs(M)},J=j(N),G=j(Math.abs(M)-Math.abs(N)),Z=J||G;if(Z&&!W)if(I){var ae=Math.abs(O)<=v/2,Q=Math.abs(P)<=h/2;if(ae){var F=(c.x1+c.x2)/2,q=c.y1,U=c.y2;r.segpts=[F,q,F,U]}else if(Q){var re=(c.y1+c.y2)/2,oe=c.x1,xe=c.x2;r.segpts=[oe,re,xe,re]}else r.segpts=[c.x1,c.y2]}else{var We=Math.abs(O)<=f/2,Ne=Math.abs(k)<=d/2;if(We){var ue=(c.y1+c.y2)/2,le=c.x1,he=c.x2;r.segpts=[le,ue,he,ue]}else if(Ne){var me=(c.x1+c.x2)/2,pe=c.y1,be=c.y2;r.segpts=[me,pe,me,be]}else r.segpts=[c.x2,c.y1]}else if(I){var Ee=c.y1+N+(p?v/2*V:0),ke=c.x1,Ve=c.x2;r.segpts=[ke,Ee,Ve,Ee]}else{var Ye=c.x1+N+(p?f/2*V:0),Le=c.y1,Qe=c.y2;r.segpts=[Ye,Le,Ye,Qe]}if(r.isRound){var De=t.pstyle("taxi-radius").value,fe=t.pstyle("radius-type").value[0]==="arc-radius";r.radii=new Array(r.segpts.length/2).fill(De),r.isArcRadius=new Array(r.segpts.length/2).fill(fe)}};bt.tryToCorrectInvalidPoints=function(t,e){var r=t._private.rscratch;if(r.edgeType==="bezier"){var a=e.srcPos,n=e.tgtPos,i=e.srcW,o=e.srcH,s=e.tgtW,u=e.tgtH,l=e.srcShape,c=e.tgtShape,f=e.srcCornerRadius,v=e.tgtCornerRadius,h=e.srcRs,d=e.tgtRs,m=!ie(r.startX)||!ie(r.startY),p=!ie(r.arrowStartX)||!ie(r.arrowStartY),g=!ie(r.endX)||!ie(r.endY),y=!ie(r.arrowEndX)||!ie(r.arrowEndY),b=3,w=this.getArrowWidth(t.pstyle("width").pfValue,t.pstyle("arrow-scale").value)*this.arrowShapeWidth,E=b*w,C=Zr({x:r.ctrlpts[0],y:r.ctrlpts[1]},{x:r.startX,y:r.startY}),x=C<E,R=Zr({x:r.ctrlpts[0],y:r.ctrlpts[1]},{x:r.endX,y:r.endY}),S=R<E,P=!1;if(m||p||x){P=!0;var k={x:r.ctrlpts[0]-a.x,y:r.ctrlpts[1]-a.y},B=Math.sqrt(k.x*k.x+k.y*k.y),D={x:k.x/B,y:k.y/B},A=Math.max(i,o),L={x:r.ctrlpts[0]+D.x*2*A,y:r.ctrlpts[1]+D.y*2*A},I=l.intersectLine(a.x,a.y,i,o,L.x,L.y,0,f,h);x?(r.ctrlpts[0]=r.ctrlpts[0]+D.x*(E-C),r.ctrlpts[1]=r.ctrlpts[1]+D.y*(E-C)):(r.ctrlpts[0]=I[0]+D.x*E,r.ctrlpts[1]=I[1]+D.y*E)}if(g||y||S){P=!0;var M={x:r.ctrlpts[0]-n.x,y:r.ctrlpts[1]-n.y},O=Math.sqrt(M.x*M.x+M.y*M.y),V={x:M.x/O,y:M.y/O},W=Math.max(i,o),N={x:r.ctrlpts[0]+V.x*2*W,y:r.ctrlpts[1]+V.y*2*W},z=c.intersectLine(n.x,n.y,s,u,N.x,N.y,0,v,d);S?(r.ctrlpts[0]=r.ctrlpts[0]+V.x*(E-R),r.ctrlpts[1]=r.ctrlpts[1]+V.y*(E-R)):(r.ctrlpts[0]=z[0]+V.x*E,r.ctrlpts[1]=z[1]+V.y*E)}P&&this.findEndpoints(t)}};bt.storeAllpts=function(t){var e=t._private.rscratch;if(e.edgeType==="multibezier"||e.edgeType==="bezier"||e.edgeType==="self"||e.edgeType==="compound"){e.allpts=[],e.allpts.push(e.startX,e.startY);for(var r=0;r+1<e.ctrlpts.length;r+=2)e.allpts.push(e.ctrlpts[r],e.ctrlpts[r+1]),r+3<e.ctrlpts.length&&e.allpts.push((e.ctrlpts[r]+e.ctrlpts[r+2])/2,(e.ctrlpts[r+1]+e.ctrlpts[r+3])/2);e.allpts.push(e.endX,e.endY);var a,n;e.ctrlpts.length/2%2===0?(a=e.allpts.length/2-1,e.midX=e.allpts[a],e.midY=e.allpts[a+1]):(a=e.allpts.length/2-3,n=.5,e.midX=st(e.allpts[a],e.allpts[a+2],e.allpts[a+4],n),e.midY=st(e.allpts[a+1],e.allpts[a+3],e.allpts[a+5],n))}else if(e.edgeType==="straight")e.allpts=[e.startX,e.startY,e.endX,e.endY],e.midX=(e.startX+e.endX+e.arrowStartX+e.arrowEndX)/4,e.midY=(e.startY+e.endY+e.arrowStartY+e.arrowEndY)/4;else if(e.edgeType==="segments"){if(e.allpts=[],e.allpts.push(e.startX,e.startY),e.allpts.push.apply(e.allpts,e.segpts),e.allpts.push(e.endX,e.endY),e.isRound){e.roundCorners=[];for(var i=2;i+3<e.allpts.length;i+=2){var o=e.radii[i/2-1],s=e.isArcRadius[i/2-1];e.roundCorners.push(Au({x:e.allpts[i-2],y:e.allpts[i-1]},{x:e.allpts[i],y:e.allpts[i+1],radius:o},{x:e.allpts[i+2],y:e.allpts[i+3]},o,s))}}if(e.segpts.length%4===0){var u=e.segpts.length/2,l=u-2;e.midX=(e.segpts[l]+e.segpts[u])/2,e.midY=(e.segpts[l+1]+e.segpts[u+1])/2}else{var c=e.segpts.length/2-1;if(!e.isRound)e.midX=e.segpts[c],e.midY=e.segpts[c+1];else{var f={x:e.segpts[c],y:e.segpts[c+1]},v=e.roundCorners[c/2];if(v.radius===0){var h={x:e.segpts[c+2],y:e.segpts[c+3]};e.midX=f.x,e.midY=f.y,e.midVector=[f.y-h.y,h.x-f.x]}else{var d=[f.x-v.cx,f.y-v.cy],m=v.radius/Math.sqrt(Math.pow(d[0],2)+Math.pow(d[1],2));d=d.map(function(p){return p*m}),e.midX=v.cx+d[0],e.midY=v.cy+d[1],e.midVector=d}}}}};bt.checkForInvalidEdgeWarning=function(t){var e=t[0]._private.rscratch;e.nodesOverlap||ie(e.startX)&&ie(e.startY)&&ie(e.endX)&&ie(e.endY)?e.loggedErr=!1:e.loggedErr||(e.loggedErr=!0,Oe("Edge `"+t.id()+"` has invalid endpoints and so it is impossible to draw.  Adjust your edge style (e.g. control points) accordingly or use an alternative edge type.  This is expected behaviour when the source node and the target node overlap."))};bt.findEdgeControlPoints=function(t){var e=this;if(!(!t||t.length===0)){for(var r=this,a=r.cy,n=a.hasCompoundNodes(),i=new ir,o=function(S,P){return[].concat(mi(S),[P?1:0]).join("-")},s=[],u=[],l=0;l<t.length;l++){var c=t[l],f=c._private,v=c.pstyle("curve-style").value;if(!(c.removed()||!c.takesUpSpace())){if(v==="haystack"){u.push(c);continue}var h=v==="unbundled-bezier"||v.endsWith("segments")||v==="straight"||v==="straight-triangle"||v.endsWith("taxi"),d=v==="unbundled-bezier"||v==="bezier",m=f.source,p=f.target,g=m.poolIndex(),y=p.poolIndex(),b=[g,y].sort(),w=o(b,h),E=i.get(w);E==null&&(E={eles:[]},s.push({pairId:b,edgeIsUnbundled:h}),i.set(w,E)),E.eles.push(c),h&&(E.hasUnbundled=!0),d&&(E.hasBezier=!0)}}for(var C=function(){var S=s[x],P=S.pairId,k=S.edgeIsUnbundled,B=o(P,k),D=i.get(B),A;if(!D.hasUnbundled){var L=D.eles[0].parallelEdges().filter(function(fe){return fe.isBundledBezier()});gu(D.eles),L.forEach(function(fe){return D.eles.push(fe)}),D.eles.sort(function(fe,ee){return fe.poolIndex()-ee.poolIndex()})}var I=D.eles[0],M=I.source(),O=I.target();if(M.poolIndex()>O.poolIndex()){var V=M;M=O,O=V}var W=D.srcPos=M.position(),N=D.tgtPos=O.position(),z=D.srcW=M.outerWidth(),X=D.srcH=M.outerHeight(),j=D.tgtW=O.outerWidth(),J=D.tgtH=O.outerHeight(),G=D.srcShape=r.nodeShapes[e.getNodeShape(M)],Z=D.tgtShape=r.nodeShapes[e.getNodeShape(O)],ae=D.srcCornerRadius=M.pstyle("corner-radius").value==="auto"?"auto":M.pstyle("corner-radius").pfValue,Q=D.tgtCornerRadius=O.pstyle("corner-radius").value==="auto"?"auto":O.pstyle("corner-radius").pfValue,F=D.tgtRs=O._private.rscratch,q=D.srcRs=M._private.rscratch;D.dirCounts={north:0,west:0,south:0,east:0,northwest:0,southwest:0,northeast:0,southeast:0};for(var U=0;U<D.eles.length;U++){var re=D.eles[U],oe=re[0]._private.rscratch,xe=re.pstyle("curve-style").value,We=xe==="unbundled-bezier"||xe.endsWith("segments")||xe.endsWith("taxi"),Ne=!M.same(re.source());if(!D.calculatedIntersection&&M!==O&&(D.hasBezier||D.hasUnbundled)){D.calculatedIntersection=!0;var ue=G.intersectLine(W.x,W.y,z,X,N.x,N.y,0,ae,q),le=D.srcIntn=ue,he=Z.intersectLine(N.x,N.y,j,J,W.x,W.y,0,Q,F),me=D.tgtIntn=he,pe=D.intersectionPts={x1:ue[0],x2:he[0],y1:ue[1],y2:he[1]},be=D.posPts={x1:W.x,x2:N.x,y1:W.y,y2:N.y},Ee=he[1]-ue[1],ke=he[0]-ue[0],Ve=Math.sqrt(ke*ke+Ee*Ee);ie(Ve)&&Ve>=Dw||(Ve=Math.sqrt(Math.max(ke*ke,hn)+Math.max(Ee*Ee,hn)));var Ye=D.vector={x:ke,y:Ee},Le=D.vectorNorm={x:Ye.x/Ve,y:Ye.y/Ve},Qe={x:-Le.y,y:Le.x};D.nodesOverlap=!ie(Ve)||Z.checkPoint(ue[0],ue[1],0,j,J,N.x,N.y,Q,F)||G.checkPoint(he[0],he[1],0,z,X,W.x,W.y,ae,q),D.vectorNormInverse=Qe,A={nodesOverlap:D.nodesOverlap,dirCounts:D.dirCounts,calculatedIntersection:!0,hasBezier:D.hasBezier,hasUnbundled:D.hasUnbundled,eles:D.eles,srcPos:N,srcRs:F,tgtPos:W,tgtRs:q,srcW:j,srcH:J,tgtW:z,tgtH:X,srcIntn:me,tgtIntn:le,srcShape:Z,tgtShape:G,posPts:{x1:be.x2,y1:be.y2,x2:be.x1,y2:be.y1},intersectionPts:{x1:pe.x2,y1:pe.y2,x2:pe.x1,y2:pe.y1},vector:{x:-Ye.x,y:-Ye.y},vectorNorm:{x:-Le.x,y:-Le.y},vectorNormInverse:{x:-Qe.x,y:-Qe.y}}}var De=Ne?A:D;oe.nodesOverlap=De.nodesOverlap,oe.srcIntn=De.srcIntn,oe.tgtIntn=De.tgtIntn,oe.isRound=xe.startsWith("round"),n&&(M.isParent()||M.isChild()||O.isParent()||O.isChild())&&(M.parents().anySame(O)||O.parents().anySame(M)||M.same(O)&&M.isParent())?e.findCompoundLoopPoints(re,De,U,We):M===O?e.findLoopPoints(re,De,U,We):xe.endsWith("segments")?e.findSegmentsPoints(re,De):xe.endsWith("taxi")?e.findTaxiPoints(re,De):xe==="straight"||!We&&D.eles.length%2===1&&U===Math.floor(D.eles.length/2)?e.findStraightEdgePoints(re):e.findBezierPoints(re,De,U,We,Ne),e.findEndpoints(re),e.tryToCorrectInvalidPoints(re,De),e.checkForInvalidEdgeWarning(re),e.storeAllpts(re),e.storeEdgeProjections(re),e.calculateArrowAngles(re),e.recalculateEdgeLabelProjections(re),e.calculateLabelAngles(re)}},x=0;x<s.length;x++)C();this.findHaystackPoints(u)}};function fd(t){var e=[];if(t!=null){for(var r=0;r<t.length;r+=2){var a=t[r],n=t[r+1];e.push({x:a,y:n})}return e}}bt.getSegmentPoints=function(t){var e=t[0]._private.rscratch;this.recalculateRenderedStyle(t);var r=e.edgeType;if(r==="segments")return fd(e.segpts)};bt.getControlPoints=function(t){var e=t[0]._private.rscratch;this.recalculateRenderedStyle(t);var r=e.edgeType;if(r==="bezier"||r==="multibezier"||r==="self"||r==="compound")return fd(e.ctrlpts)};bt.getEdgeMidpoint=function(t){var e=t[0]._private.rscratch;return this.recalculateRenderedStyle(t),{x:e.midX,y:e.midY}};var Pn={};Pn.manualEndptToPx=function(t,e){var r=this,a=t.position(),n=t.outerWidth(),i=t.outerHeight(),o=t._private.rscratch;if(e.value.length===2){var s=[e.pfValue[0],e.pfValue[1]];return e.units[0]==="%"&&(s[0]=s[0]*n),e.units[1]==="%"&&(s[1]=s[1]*i),s[0]+=a.x,s[1]+=a.y,s}else{var u=e.pfValue[0];u=-Math.PI/2+u;var l=2*Math.max(n,i),c=[a.x+Math.cos(u)*l,a.y+Math.sin(u)*l];return r.nodeShapes[this.getNodeShape(t)].intersectLine(a.x,a.y,n,i,c[0],c[1],0,t.pstyle("corner-radius").value==="auto"?"auto":t.pstyle("corner-radius").pfValue,o)}};Pn.findEndpoints=function(t){var e=this,r,a=t.source()[0],n=t.target()[0],i=a.position(),o=n.position(),s=t.pstyle("target-arrow-shape").value,u=t.pstyle("source-arrow-shape").value,l=t.pstyle("target-distance-from-node").pfValue,c=t.pstyle("source-distance-from-node").pfValue,f=a._private.rscratch,v=n._private.rscratch,h=t.pstyle("curve-style").value,d=t._private.rscratch,m=d.edgeType,p=h==="taxi",g=m==="self"||m==="compound",y=m==="bezier"||m==="multibezier"||g,b=m!=="bezier",w=m==="straight"||m==="segments",E=m==="segments",C=y||b||w,x=g||p,R=t.pstyle("source-endpoint"),S=x?"outside-to-node":R.value,P=a.pstyle("corner-radius").value==="auto"?"auto":a.pstyle("corner-radius").pfValue,k=t.pstyle("target-endpoint"),B=x?"outside-to-node":k.value,D=n.pstyle("corner-radius").value==="auto"?"auto":n.pstyle("corner-radius").pfValue;d.srcManEndpt=R,d.tgtManEndpt=k;var A,L,I,M;if(y){var O=[d.ctrlpts[0],d.ctrlpts[1]],V=b?[d.ctrlpts[d.ctrlpts.length-2],d.ctrlpts[d.ctrlpts.length-1]]:O;A=V,L=O}else if(w){var W=E?d.segpts.slice(0,2):[o.x,o.y],N=E?d.segpts.slice(d.segpts.length-2):[i.x,i.y];A=N,L=W}if(B==="inside-to-node")r=[o.x,o.y];else if(k.units)r=this.manualEndptToPx(n,k);else if(B==="outside-to-line")r=d.tgtIntn;else if(B==="outside-to-node"||B==="outside-to-node-or-label"?I=A:(B==="outside-to-line"||B==="outside-to-line-or-label")&&(I=[i.x,i.y]),r=e.nodeShapes[this.getNodeShape(n)].intersectLine(o.x,o.y,n.outerWidth(),n.outerHeight(),I[0],I[1],0,D,v),B==="outside-to-node-or-label"||B==="outside-to-line-or-label"){var z=n._private.rscratch,X=z.labelWidth,j=z.labelHeight,J=z.labelX,G=z.labelY,Z=X/2,ae=j/2,Q=n.pstyle("text-valign").value;Q==="top"?G-=ae:Q==="bottom"&&(G+=ae);var F=n.pstyle("text-halign").value;F==="left"?J-=Z:F==="right"&&(J+=Z);var q=ln(I[0],I[1],[J-Z,G-ae,J+Z,G-ae,J+Z,G+ae,J-Z,G+ae],o.x,o.y);if(q.length>0){var U=i,re=$r(U,wa(r)),oe=$r(U,wa(q)),xe=re;if(oe<re&&(r=q,xe=oe),q.length>2){var We=$r(U,{x:q[2],y:q[3]});We<xe&&(r=[q[2],q[3]])}}}var Ne=_n(r,A,e.arrowShapes[s].spacing(t)+l),ue=_n(r,A,e.arrowShapes[s].gap(t)+l);if(d.endX=ue[0],d.endY=ue[1],d.arrowEndX=Ne[0],d.arrowEndY=Ne[1],S==="inside-to-node")r=[i.x,i.y];else if(R.units)r=this.manualEndptToPx(a,R);else if(S==="outside-to-line")r=d.srcIntn;else if(S==="outside-to-node"||S==="outside-to-node-or-label"?M=L:(S==="outside-to-line"||S==="outside-to-line-or-label")&&(M=[o.x,o.y]),r=e.nodeShapes[this.getNodeShape(a)].intersectLine(i.x,i.y,a.outerWidth(),a.outerHeight(),M[0],M[1],0,P,f),S==="outside-to-node-or-label"||S==="outside-to-line-or-label"){var le=a._private.rscratch,he=le.labelWidth,me=le.labelHeight,pe=le.labelX,be=le.labelY,Ee=he/2,ke=me/2,Ve=a.pstyle("text-valign").value;Ve==="top"?be-=ke:Ve==="bottom"&&(be+=ke);var Ye=a.pstyle("text-halign").value;Ye==="left"?pe-=Ee:Ye==="right"&&(pe+=Ee);var Le=ln(M[0],M[1],[pe-Ee,be-ke,pe+Ee,be-ke,pe+Ee,be+ke,pe-Ee,be+ke],i.x,i.y);if(Le.length>0){var Qe=o,De=$r(Qe,wa(r)),fe=$r(Qe,wa(Le)),ee=De;if(fe<De&&(r=[Le[0],Le[1]],ee=fe),Le.length>2){var T=$r(Qe,{x:Le[2],y:Le[3]});T<ee&&(r=[Le[2],Le[3]])}}}var $=_n(r,L,e.arrowShapes[u].spacing(t)+c),H=_n(r,L,e.arrowShapes[u].gap(t)+c);d.startX=H[0],d.startY=H[1],d.arrowStartX=$[0],d.arrowStartY=$[1],C&&(!ie(d.startX)||!ie(d.startY)||!ie(d.endX)||!ie(d.endY)?d.badLine=!0:d.badLine=!1)};Pn.getSourceEndpoint=function(t){var e=t[0]._private.rscratch;switch(this.recalculateRenderedStyle(t),e.edgeType){case"haystack":return{x:e.haystackPts[0],y:e.haystackPts[1]};default:return{x:e.arrowStartX,y:e.arrowStartY}}};Pn.getTargetEndpoint=function(t){var e=t[0]._private.rscratch;switch(this.recalculateRenderedStyle(t),e.edgeType){case"haystack":return{x:e.haystackPts[2],y:e.haystackPts[3]};default:return{x:e.arrowEndX,y:e.arrowEndY}}};var Lu={};function Bw(t,e,r){for(var a=function(l,c,f,v){return st(l,c,f,v)},n=e._private,i=n.rstyle.bezierPts,o=0;o<t.bezierProjPcts.length;o++){var s=t.bezierProjPcts[o];i.push({x:a(r[0],r[2],r[4],s),y:a(r[1],r[3],r[5],s)})}}Lu.storeEdgeProjections=function(t){var e=t._private,r=e.rscratch,a=r.edgeType;if(e.rstyle.bezierPts=null,e.rstyle.linePts=null,e.rstyle.haystackPts=null,a==="multibezier"||a==="bezier"||a==="self"||a==="compound"){e.rstyle.bezierPts=[];for(var n=0;n+5<r.allpts.length;n+=4)Bw(this,t,r.allpts.slice(n,n+6))}else if(a==="segments")for(var i=e.rstyle.linePts=[],n=0;n+1<r.allpts.length;n+=2)i.push({x:r.allpts[n],y:r.allpts[n+1]});else if(a==="haystack"){var o=r.haystackPts;e.rstyle.haystackPts=[{x:o[0],y:o[1]},{x:o[2],y:o[3]}]}e.rstyle.arrowWidth=this.getArrowWidth(t.pstyle("width").pfValue,t.pstyle("arrow-scale").value)*this.arrowShapeWidth};Lu.recalculateEdgeProjections=function(t){this.findEdgeControlPoints(t)};var er={};er.recalculateNodeLabelProjection=function(t){var e=t.pstyle("label").strValue;if(!Rr(e)){var r,a,n=t._private,i=t.width(),o=t.height(),s=t.padding(),u=t.position(),l=t.pstyle("text-halign").strValue,c=t.pstyle("text-valign").strValue,f=n.rscratch,v=n.rstyle;switch(l){case"left":r=u.x-i/2-s;break;case"right":r=u.x+i/2+s;break;default:r=u.x}switch(c){case"top":a=u.y-o/2-s;break;case"bottom":a=u.y+o/2+s;break;default:a=u.y}f.labelX=r,f.labelY=a,v.labelX=r,v.labelY=a,this.calculateLabelAngles(t),this.applyLabelDimensions(t)}};var vd=function(e,r){var a=Math.atan(r/e);return e===0&&a<0&&(a=a*-1),a},dd=function(e,r){var a=r.x-e.x,n=r.y-e.y;return vd(a,n)},Aw=function(e,r,a,n){var i=un(0,n-.001,1),o=un(0,n+.001,1),s=Ca(e,r,a,i),u=Ca(e,r,a,o);return dd(s,u)};er.recalculateEdgeLabelProjections=function(t){var e,r=t._private,a=r.rscratch,n=this,i={mid:t.pstyle("label").strValue,source:t.pstyle("source-label").strValue,target:t.pstyle("target-label").strValue};if(i.mid||i.source||i.target){e={x:a.midX,y:a.midY};var o=function(f,v,h){nr(r.rscratch,f,v,h),nr(r.rstyle,f,v,h)};o("labelX",null,e.x),o("labelY",null,e.y);var s=vd(a.midDispX,a.midDispY);o("labelAutoAngle",null,s);var u=function(){if(u.cache)return u.cache;for(var f=[],v=0;v+5<a.allpts.length;v+=4){var h={x:a.allpts[v],y:a.allpts[v+1]},d={x:a.allpts[v+2],y:a.allpts[v+3]},m={x:a.allpts[v+4],y:a.allpts[v+5]};f.push({p0:h,p1:d,p2:m,startDist:0,length:0,segments:[]})}var p=r.rstyle.bezierPts,g=n.bezierProjPcts.length;function y(x,R,S,P,k){var B=Zr(R,S),D=x.segments[x.segments.length-1],A={p0:R,p1:S,t0:P,t1:k,startDist:D?D.startDist+D.length:0,length:B};x.segments.push(A),x.length+=B}for(var b=0;b<f.length;b++){var w=f[b],E=f[b-1];E&&(w.startDist=E.startDist+E.length),y(w,w.p0,p[b*g],0,n.bezierProjPcts[0]);for(var C=0;C<g-1;C++)y(w,p[b*g+C],p[b*g+C+1],n.bezierProjPcts[C],n.bezierProjPcts[C+1]);y(w,p[b*g+g-1],w.p2,n.bezierProjPcts[g-1],1)}return u.cache=f},l=function(f){var v,h=f==="source";if(i[f]){var d=t.pstyle(f+"-text-offset").pfValue;switch(a.edgeType){case"self":case"compound":case"bezier":case"multibezier":{for(var m=u(),p,g=0,y=0,b=0;b<m.length;b++){for(var w=m[h?b:m.length-1-b],E=0;E<w.segments.length;E++){var C=w.segments[h?E:w.segments.length-1-E],x=b===m.length-1&&E===w.segments.length-1;if(g=y,y+=C.length,y>=d||x){p={cp:w,segment:C};break}}if(p)break}var R=p.cp,S=p.segment,P=(d-g)/S.length,k=S.t1-S.t0,B=h?S.t0+k*P:S.t1-k*P;B=un(0,B,1),e=Ca(R.p0,R.p1,R.p2,B),v=Aw(R.p0,R.p1,R.p2,B);break}case"straight":case"segments":case"haystack":{for(var D=0,A,L,I,M,O=a.allpts.length,V=0;V+3<O&&(h?(I={x:a.allpts[V],y:a.allpts[V+1]},M={x:a.allpts[V+2],y:a.allpts[V+3]}):(I={x:a.allpts[O-2-V],y:a.allpts[O-1-V]},M={x:a.allpts[O-4-V],y:a.allpts[O-3-V]}),A=Zr(I,M),L=D,D+=A,!(D>=d));V+=2);var W=d-L,N=W/A;N=un(0,N,1),e=Jm(I,M,N),v=dd(I,M);break}}o("labelX",f,e.x),o("labelY",f,e.y),o("labelAutoAngle",f,v)}};l("source"),l("target"),this.applyLabelDimensions(t)}};er.applyLabelDimensions=function(t){this.applyPrefixedLabelDimensions(t),t.isEdge()&&(this.applyPrefixedLabelDimensions(t,"source"),this.applyPrefixedLabelDimensions(t,"target"))};er.applyPrefixedLabelDimensions=function(t,e){var r=t._private,a=this.getLabelText(t,e),n=Xr(a,t._private.labelDimsKey);if(Rt(r.rscratch,"prefixedLabelDimsKey",e)!==n){nr(r.rscratch,"prefixedLabelDimsKey",e,n);var i=this.calculateLabelDimensions(t,a),o=t.pstyle("line-height").pfValue,s=t.pstyle("text-wrap").strValue,u=Rt(r.rscratch,"labelWrapCachedLines",e)||[],l=s!=="wrap"?1:Math.max(u.length,1),c=i.height/l,f=c*o,v=i.width,h=i.height+(l-1)*(o-1)*c;nr(r.rstyle,"labelWidth",e,v),nr(r.rscratch,"labelWidth",e,v),nr(r.rstyle,"labelHeight",e,h),nr(r.rscratch,"labelHeight",e,h),nr(r.rscratch,"labelLineHeight",e,f)}};er.getLabelText=function(t,e){var r=t._private,a=e?e+"-":"",n=t.pstyle(a+"label").strValue,i=t.pstyle("text-transform").value,o=function(X,j){return j?(nr(r.rscratch,X,e,j),j):Rt(r.rscratch,X,e)};if(!n)return"";i=="none"||(i=="uppercase"?n=n.toUpperCase():i=="lowercase"&&(n=n.toLowerCase()));var s=t.pstyle("text-wrap").value;if(s==="wrap"){var u=o("labelKey");if(u!=null&&o("labelWrapKey")===u)return o("labelWrapCachedText");for(var l="​",c=n.split(`
`),f=t.pstyle("text-max-width").pfValue,v=t.pstyle("text-overflow-wrap").value,h=v==="anywhere",d=[],m=/[\s\u200b]+|$/g,p=0;p<c.length;p++){var g=c[p],y=this.calculateLabelDimensions(t,g),b=y.width;if(h){var w=g.split("").join(l);g=w}if(b>f){var E=g.matchAll(m),C="",x=0,R=kt(E),S;try{for(R.s();!(S=R.n()).done;){var P=S.value,k=P[0],B=g.substring(x,P.index);x=P.index+k.length;var D=C.length===0?B:C+B+k,A=this.calculateLabelDimensions(t,D),L=A.width;L<=f?C+=B+k:(C&&d.push(C),C=B+k)}}catch(z){R.e(z)}finally{R.f()}C.match(/^[\s\u200b]+$/)||d.push(C)}else d.push(g)}o("labelWrapCachedLines",d),n=o("labelWrapCachedText",d.join(`
`)),o("labelWrapKey",u)}else if(s==="ellipsis"){var I=t.pstyle("text-max-width").pfValue,M="",O="…",V=!1;if(this.calculateLabelDimensions(t,n).width<I)return n;for(var W=0;W<n.length;W++){var N=this.calculateLabelDimensions(t,M+n[W]+O).width;if(N>I)break;M+=n[W],W===n.length-1&&(V=!0)}return V||(M+=O),M}return n};er.getLabelJustification=function(t){var e=t.pstyle("text-justification").strValue,r=t.pstyle("text-halign").strValue;if(e==="auto")if(t.isNode())switch(r){case"left":return"right";case"right":return"left";default:return"center"}else return"center";else return e};er.calculateLabelDimensions=function(t,e){var r=this,a=r.cy.window(),n=a.document,i=0,o=t.pstyle("font-style").strValue,s=t.pstyle("font-size").pfValue,u=t.pstyle("font-family").strValue,l=t.pstyle("font-weight").strValue,c=this.labelCalcCanvas,f=this.labelCalcCanvasContext;if(!c){c=this.labelCalcCanvas=n.createElement("canvas"),f=this.labelCalcCanvasContext=c.getContext("2d");var v=c.style;v.position="absolute",v.left="-9999px",v.top="-9999px",v.zIndex="-1",v.visibility="hidden",v.pointerEvents="none"}f.font="".concat(o," ").concat(l," ").concat(s,"px ").concat(u);for(var h=0,d=0,m=e.split(`
`),p=0;p<m.length;p++){var g=m[p],y=f.measureText(g),b=Math.ceil(y.width),w=s;h=Math.max(b,h),d+=w}return h+=i,d+=i,{width:h,height:d}};er.calculateLabelAngle=function(t,e){var r=t._private,a=r.rscratch,n=t.isEdge(),i=e?e+"-":"",o=t.pstyle(i+"text-rotation"),s=o.strValue;return s==="none"?0:n&&s==="autorotate"?a.labelAutoAngle:s==="autorotate"?0:o.pfValue};er.calculateLabelAngles=function(t){var e=this,r=t.isEdge(),a=t._private,n=a.rscratch;n.labelAngle=e.calculateLabelAngle(t),r&&(n.sourceLabelAngle=e.calculateLabelAngle(t,"source"),n.targetLabelAngle=e.calculateLabelAngle(t,"target"))};var hd={},nf=28,of=!1;hd.getNodeShape=function(t){var e=this,r=t.pstyle("shape").value;if(r==="cutrectangle"&&(t.width()<nf||t.height()<nf))return of||(Oe("The `cutrectangle` node shape can not be used at small sizes so `rectangle` is used instead"),of=!0),"rectangle";if(t.isParent())return r==="rectangle"||r==="roundrectangle"||r==="round-rectangle"||r==="cutrectangle"||r==="cut-rectangle"||r==="barrel"?r:"rectangle";if(r==="polygon"){var a=t.pstyle("shape-polygon-points").value;return e.nodeShapes.makePolygon(a).name}return r};var Xi={};Xi.registerCalculationListeners=function(){var t=this.cy,e=t.collection(),r=this,a=function(o){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(e.merge(o),s)for(var u=0;u<o.length;u++){var l=o[u],c=l._private,f=c.rstyle;f.clean=!1,f.cleanConnected=!1}};r.binder(t).on("bounds.* dirty.*",function(o){var s=o.target;a(s)}).on("style.* background.*",function(o){var s=o.target;a(s,!1)});var n=function(o){if(o){var s=r.onUpdateEleCalcsFns;e.cleanStyle();for(var u=0;u<e.length;u++){var l=e[u],c=l._private.rstyle;l.isNode()&&!c.cleanConnected&&(a(l.connectedEdges()),c.cleanConnected=!0)}if(s)for(var f=0;f<s.length;f++){var v=s[f];v(o,e)}r.recalculateRenderedStyle(e),e=t.collection()}};r.flushRenderedStyleQueue=function(){n(!0)},r.beforeRender(n,r.beforeRenderPriorities.eleCalcs)};Xi.onUpdateEleCalcs=function(t){var e=this.onUpdateEleCalcsFns=this.onUpdateEleCalcsFns||[];e.push(t)};Xi.recalculateRenderedStyle=function(t,e){var r=function(w){return w._private.rstyle.cleanConnected};if(t.length!==0){var a=[],n=[];if(!this.destroyed){e===void 0&&(e=!0);for(var i=0;i<t.length;i++){var o=t[i],s=o._private,u=s.rstyle;o.isEdge()&&(!r(o.source())||!r(o.target()))&&(u.clean=!1),o.isEdge()&&o.isBundledBezier()&&o.parallelEdges().some(function(b){return!b._private.rstyle.clean&&b.isBundledBezier()})&&(u.clean=!1),!(e&&u.clean||o.removed())&&o.pstyle("display").value!=="none"&&(s.group==="nodes"?n.push(o):a.push(o),u.clean=!0)}for(var l=0;l<n.length;l++){var c=n[l],f=c._private,v=f.rstyle,h=c.position();this.recalculateNodeLabelProjection(c),v.nodeX=h.x,v.nodeY=h.y,v.nodeW=c.pstyle("width").pfValue,v.nodeH=c.pstyle("height").pfValue}this.recalculateEdgeProjections(a);for(var d=0;d<a.length;d++){var m=a[d],p=m._private,g=p.rstyle,y=p.rscratch;g.srcX=y.arrowStartX,g.srcY=y.arrowStartY,g.tgtX=y.arrowEndX,g.tgtY=y.arrowEndY,g.midX=y.midX,g.midY=y.midY,g.labelAngle=y.labelAngle,g.sourceLabelAngle=y.sourceLabelAngle,g.targetLabelAngle=y.targetLabelAngle}}}};var Zi={};Zi.updateCachedGrabbedEles=function(){var t=this.cachedZSortedEles;if(t){t.drag=[],t.nondrag=[];for(var e=[],r=0;r<t.length;r++){var a=t[r],n=a._private.rscratch;a.grabbed()&&!a.isParent()?e.push(a):n.inDragLayer?t.drag.push(a):t.nondrag.push(a)}for(var r=0;r<e.length;r++){var a=e[r];t.drag.push(a)}}};Zi.invalidateCachedZSortedEles=function(){this.cachedZSortedEles=null};Zi.getCachedZSortedEles=function(t){if(t||!this.cachedZSortedEles){var e=this.cy.mutableElements().toArray();e.sort(Xv),e.interactive=e.filter(function(r){return r.interactive()}),this.cachedZSortedEles=e,this.updateCachedGrabbedEles()}else e=this.cachedZSortedEles;return e};var pd={};[aa,Pi,bt,Pn,Lu,er,hd,Xi,Zi].forEach(function(t){ge(pd,t)});var gd={};gd.getCachedImage=function(t,e,r){var a=this,n=a.imageCache=a.imageCache||{},i=n[t];if(i)return i.image.complete||i.image.addEventListener("load",r),i.image;i=n[t]=n[t]||{};var o=i.image=new Image;o.addEventListener("load",r),o.addEventListener("error",function(){o.error=!0});var s="data:",u=t.substring(0,s.length).toLowerCase()===s;return u||(e=e==="null"?null:e,o.crossOrigin=e),o.src=t,o};var Na={};Na.registerBinding=function(t,e,r,a){var n=Array.prototype.slice.apply(arguments,[1]);if(Array.isArray(t)){for(var i=[],o=0;o<t.length;o++){var s=t[o];if(s!==void 0){var u=this.binder(s);i.push(u.on.apply(u,n))}}return i}var u=this.binder(t);return u.on.apply(u,n)};Na.binder=function(t){var e=this,r=e.cy.window(),a=t===r||t===r.document||t===r.document.body||Hg(t);if(e.supportsPassiveEvents==null){var n=!1;try{var i=Object.defineProperty({},"passive",{get:function(){return n=!0,!0}});r.addEventListener("test",null,i)}catch{}e.supportsPassiveEvents=n}var o=function(u,l,c){var f=Array.prototype.slice.call(arguments);return a&&e.supportsPassiveEvents&&(f[2]={capture:c??!1,passive:!1,once:!1}),e.bindings.push({target:t,args:f}),(t.addEventListener||t.on).apply(t,f),this};return{on:o,addEventListener:o,addListener:o,bind:o}};Na.nodeIsDraggable=function(t){return t&&t.isNode()&&!t.locked()&&t.grabbable()};Na.nodeIsGrabbable=function(t){return this.nodeIsDraggable(t)&&t.interactive()};Na.load=function(){var t=this,e=t.cy.window(),r=function(T){return T.selected()},a=function(T){var $=T.getRootNode();if($&&$.nodeType===11&&$.host!==void 0)return $},n=function(T,$,H,K){T==null&&(T=t.cy);for(var Y=0;Y<$.length;Y++){var ce=$[Y];T.emit({originalEvent:H,type:ce,position:K})}},i=function(T){return T.shiftKey||T.metaKey||T.ctrlKey},o=function(T,$){var H=!0;if(t.cy.hasCompoundNodes()&&T&&T.pannable())for(var K=0;$&&K<$.length;K++){var T=$[K];if(T.isNode()&&T.isParent()&&!T.pannable()){H=!1;break}}else H=!0;return H},s=function(T){T[0]._private.grabbed=!0},u=function(T){T[0]._private.grabbed=!1},l=function(T){T[0]._private.rscratch.inDragLayer=!0},c=function(T){T[0]._private.rscratch.inDragLayer=!1},f=function(T){T[0]._private.rscratch.isGrabTarget=!0},v=function(T){T[0]._private.rscratch.isGrabTarget=!1},h=function(T,$){var H=$.addToList,K=H.has(T);!K&&T.grabbable()&&!T.locked()&&(H.merge(T),s(T))},d=function(T,$){if(T.cy().hasCompoundNodes()&&!($.inDragLayer==null&&$.addToList==null)){var H=T.descendants();$.inDragLayer&&(H.forEach(l),H.connectedEdges().forEach(l)),$.addToList&&h(H,$)}},m=function(T,$){$=$||{};var H=T.cy().hasCompoundNodes();$.inDragLayer&&(T.forEach(l),T.neighborhood().stdFilter(function(K){return!H||K.isEdge()}).forEach(l)),$.addToList&&T.forEach(function(K){h(K,$)}),d(T,$),y(T,{inDragLayer:$.inDragLayer}),t.updateCachedGrabbedEles()},p=m,g=function(T){T&&(t.getCachedZSortedEles().forEach(function($){u($),c($),v($)}),t.updateCachedGrabbedEles())},y=function(T,$){if(!($.inDragLayer==null&&$.addToList==null)&&T.cy().hasCompoundNodes()){var H=T.ancestors().orphans();if(!H.same(T)){var K=H.descendants().spawnSelf().merge(H).unmerge(T).unmerge(T.descendants()),Y=K.connectedEdges();$.inDragLayer&&(Y.forEach(l),K.forEach(l)),$.addToList&&K.forEach(function(ce){h(ce,$)})}}},b=function(){document.activeElement!=null&&document.activeElement.blur!=null&&document.activeElement.blur()},w=typeof MutationObserver<"u",E=typeof ResizeObserver<"u";w?(t.removeObserver=new MutationObserver(function(ee){for(var T=0;T<ee.length;T++){var $=ee[T],H=$.removedNodes;if(H)for(var K=0;K<H.length;K++){var Y=H[K];if(Y===t.container){t.destroy();break}}}}),t.container.parentNode&&t.removeObserver.observe(t.container.parentNode,{childList:!0})):t.registerBinding(t.container,"DOMNodeRemoved",function(ee){t.destroy()});var C=Cn(function(){t.cy.resize()},100);w&&(t.styleObserver=new MutationObserver(C),t.styleObserver.observe(t.container,{attributes:!0})),t.registerBinding(e,"resize",C),E&&(t.resizeObserver=new ResizeObserver(C),t.resizeObserver.observe(t.container));var x=function(T,$){for(;T!=null;)$(T),T=T.parentNode},R=function(){t.invalidateContainerClientCoordsCache()};x(t.container,function(ee){t.registerBinding(ee,"transitionend",R),t.registerBinding(ee,"animationend",R),t.registerBinding(ee,"scroll",R)}),t.registerBinding(t.container,"contextmenu",function(ee){ee.preventDefault()});var S=function(){return t.selection[4]!==0},P=function(T){for(var $=t.findContainerClientCoords(),H=$[0],K=$[1],Y=$[2],ce=$[3],te=T.touches?T.touches:[T],ve=!1,Te=0;Te<te.length;Te++){var Pe=te[Te];if(H<=Pe.clientX&&Pe.clientX<=H+Y&&K<=Pe.clientY&&Pe.clientY<=K+ce){ve=!0;break}}if(!ve)return!1;for(var ye=t.container,Se=T.target,we=Se.parentNode,Ce=!1;we;){if(we===ye){Ce=!0;break}we=we.parentNode}return!!Ce};t.registerBinding(t.container,"mousedown",function(T){if(P(T)&&!(t.hoverData.which===1&&T.which!==1)){T.preventDefault(),b(),t.hoverData.capture=!0,t.hoverData.which=T.which;var $=t.cy,H=[T.clientX,T.clientY],K=t.projectIntoViewport(H[0],H[1]),Y=t.selection,ce=t.findNearestElements(K[0],K[1],!0,!1),te=ce[0],ve=t.dragData.possibleDragElements;t.hoverData.mdownPos=K,t.hoverData.mdownGPos=H;var Te=function(){t.hoverData.tapholdCancelled=!1,clearTimeout(t.hoverData.tapholdTimeout),t.hoverData.tapholdTimeout=setTimeout(function(){if(!t.hoverData.tapholdCancelled){var Fe=t.hoverData.down;Fe?Fe.emit({originalEvent:T,type:"taphold",position:{x:K[0],y:K[1]}}):$.emit({originalEvent:T,type:"taphold",position:{x:K[0],y:K[1]}})}},t.tapholdDuration)};if(T.which==3){t.hoverData.cxtStarted=!0;var Pe={originalEvent:T,type:"cxttapstart",position:{x:K[0],y:K[1]}};te?(te.activate(),te.emit(Pe),t.hoverData.down=te):$.emit(Pe),t.hoverData.downTime=new Date().getTime(),t.hoverData.cxtDragged=!1}else if(T.which==1){te&&te.activate();{if(te!=null&&t.nodeIsGrabbable(te)){var ye=function(Fe){return{originalEvent:T,type:Fe,position:{x:K[0],y:K[1]}}},Se=function(Fe){Fe.emit(ye("grab"))};if(f(te),!te.selected())ve=t.dragData.possibleDragElements=$.collection(),p(te,{addToList:ve}),te.emit(ye("grabon")).emit(ye("grab"));else{ve=t.dragData.possibleDragElements=$.collection();var we=$.$(function(Ce){return Ce.isNode()&&Ce.selected()&&t.nodeIsGrabbable(Ce)});m(we,{addToList:ve}),te.emit(ye("grabon")),we.forEach(Se)}t.redrawHint("eles",!0),t.redrawHint("drag",!0)}t.hoverData.down=te,t.hoverData.downs=ce,t.hoverData.downTime=new Date().getTime()}n(te,["mousedown","tapstart","vmousedown"],T,{x:K[0],y:K[1]}),te==null?(Y[4]=1,t.data.bgActivePosistion={x:K[0],y:K[1]},t.redrawHint("select",!0),t.redraw()):te.pannable()&&(Y[4]=1),Te()}Y[0]=Y[2]=K[0],Y[1]=Y[3]=K[1]}},!1);var k=a(t.container);t.registerBinding([e,k],"mousemove",function(T){var $=t.hoverData.capture;if(!(!$&&!P(T))){var H=!1,K=t.cy,Y=K.zoom(),ce=[T.clientX,T.clientY],te=t.projectIntoViewport(ce[0],ce[1]),ve=t.hoverData.mdownPos,Te=t.hoverData.mdownGPos,Pe=t.selection,ye=null;!t.hoverData.draggingEles&&!t.hoverData.dragging&&!t.hoverData.selecting&&(ye=t.findNearestElement(te[0],te[1],!0,!1));var Se=t.hoverData.last,we=t.hoverData.down,Ce=[te[0]-Pe[2],te[1]-Pe[3]],Fe=t.dragData.possibleDragElements,je;if(Te){var ct=ce[0]-Te[0],ot=ct*ct,Ze=ce[1]-Te[1],ft=Ze*Ze,et=ot+ft;t.hoverData.isOverThresholdDrag=je=et>=t.desktopTapThreshold2}var Ct=i(T);je&&(t.hoverData.tapholdCancelled=!0);var Gt=function(){var Ut=t.hoverData.dragDelta=t.hoverData.dragDelta||[];Ut.length===0?(Ut.push(Ce[0]),Ut.push(Ce[1])):(Ut[0]+=Ce[0],Ut[1]+=Ce[1])};H=!0,n(ye,["mousemove","vmousemove","tapdrag"],T,{x:te[0],y:te[1]});var br=function(){t.data.bgActivePosistion=void 0,t.hoverData.selecting||K.emit({originalEvent:T,type:"boxstart",position:{x:te[0],y:te[1]}}),Pe[4]=1,t.hoverData.selecting=!0,t.redrawHint("select",!0),t.redraw()};if(t.hoverData.which===3){if(je){var rr={originalEvent:T,type:"cxtdrag",position:{x:te[0],y:te[1]}};we?we.emit(rr):K.emit(rr),t.hoverData.cxtDragged=!0,(!t.hoverData.cxtOver||ye!==t.hoverData.cxtOver)&&(t.hoverData.cxtOver&&t.hoverData.cxtOver.emit({originalEvent:T,type:"cxtdragout",position:{x:te[0],y:te[1]}}),t.hoverData.cxtOver=ye,ye&&ye.emit({originalEvent:T,type:"cxtdragover",position:{x:te[0],y:te[1]}}))}}else if(t.hoverData.dragging){if(H=!0,K.panningEnabled()&&K.userPanningEnabled()){var ia;if(t.hoverData.justStartedPan){var Bn=t.hoverData.mdownPos;ia={x:(te[0]-Bn[0])*Y,y:(te[1]-Bn[1])*Y},t.hoverData.justStartedPan=!1}else ia={x:Ce[0]*Y,y:Ce[1]*Y};K.panBy(ia),K.emit("dragpan"),t.hoverData.dragged=!0}te=t.projectIntoViewport(T.clientX,T.clientY)}else if(Pe[4]==1&&(we==null||we.pannable())){if(je){if(!t.hoverData.dragging&&K.boxSelectionEnabled()&&(Ct||!K.panningEnabled()||!K.userPanningEnabled()))br();else if(!t.hoverData.selecting&&K.panningEnabled()&&K.userPanningEnabled()){var Fr=o(we,t.hoverData.downs);Fr&&(t.hoverData.dragging=!0,t.hoverData.justStartedPan=!0,Pe[4]=0,t.data.bgActivePosistion=wa(ve),t.redrawHint("select",!0),t.redraw())}we&&we.pannable()&&we.active()&&we.unactivate()}}else{if(we&&we.pannable()&&we.active()&&we.unactivate(),(!we||!we.grabbed())&&ye!=Se&&(Se&&n(Se,["mouseout","tapdragout"],T,{x:te[0],y:te[1]}),ye&&n(ye,["mouseover","tapdragover"],T,{x:te[0],y:te[1]}),t.hoverData.last=ye),we)if(je){if(K.boxSelectionEnabled()&&Ct)we&&we.grabbed()&&(g(Fe),we.emit("freeon"),Fe.emit("free"),t.dragData.didDrag&&(we.emit("dragfreeon"),Fe.emit("dragfree"))),br();else if(we&&we.grabbed()&&t.nodeIsDraggable(we)){var Tt=!t.dragData.didDrag;Tt&&t.redrawHint("eles",!0),t.dragData.didDrag=!0,t.hoverData.draggingEles||m(Fe,{inDragLayer:!0});var gt={x:0,y:0};if(ie(Ce[0])&&ie(Ce[1])&&(gt.x+=Ce[0],gt.y+=Ce[1],Tt)){var St=t.hoverData.dragDelta;St&&ie(St[0])&&ie(St[1])&&(gt.x+=St[0],gt.y+=St[1])}t.hoverData.draggingEles=!0,Fe.silentShift(gt).emit("position drag"),t.redrawHint("drag",!0),t.redraw()}}else Gt();H=!0}if(Pe[2]=te[0],Pe[3]=te[1],H)return T.stopPropagation&&T.stopPropagation(),T.preventDefault&&T.preventDefault(),!1}},!1);var B,D,A;t.registerBinding(e,"mouseup",function(T){if(!(t.hoverData.which===1&&T.which!==1&&t.hoverData.capture)){var $=t.hoverData.capture;if($){t.hoverData.capture=!1;var H=t.cy,K=t.projectIntoViewport(T.clientX,T.clientY),Y=t.selection,ce=t.findNearestElement(K[0],K[1],!0,!1),te=t.dragData.possibleDragElements,ve=t.hoverData.down,Te=i(T);if(t.data.bgActivePosistion&&(t.redrawHint("select",!0),t.redraw()),t.hoverData.tapholdCancelled=!0,t.data.bgActivePosistion=void 0,ve&&ve.unactivate(),t.hoverData.which===3){var Pe={originalEvent:T,type:"cxttapend",position:{x:K[0],y:K[1]}};if(ve?ve.emit(Pe):H.emit(Pe),!t.hoverData.cxtDragged){var ye={originalEvent:T,type:"cxttap",position:{x:K[0],y:K[1]}};ve?ve.emit(ye):H.emit(ye)}t.hoverData.cxtDragged=!1,t.hoverData.which=null}else if(t.hoverData.which===1){if(n(ce,["mouseup","tapend","vmouseup"],T,{x:K[0],y:K[1]}),!t.dragData.didDrag&&!t.hoverData.dragged&&!t.hoverData.selecting&&!t.hoverData.isOverThresholdDrag&&(n(ve,["click","tap","vclick"],T,{x:K[0],y:K[1]}),D=!1,T.timeStamp-A<=H.multiClickDebounceTime()?(B&&clearTimeout(B),D=!0,A=null,n(ve,["dblclick","dbltap","vdblclick"],T,{x:K[0],y:K[1]})):(B=setTimeout(function(){D||n(ve,["oneclick","onetap","voneclick"],T,{x:K[0],y:K[1]})},H.multiClickDebounceTime()),A=T.timeStamp)),ve==null&&!t.dragData.didDrag&&!t.hoverData.selecting&&!t.hoverData.dragged&&!i(T)&&(H.$(r).unselect(["tapunselect"]),te.length>0&&t.redrawHint("eles",!0),t.dragData.possibleDragElements=te=H.collection()),ce==ve&&!t.dragData.didDrag&&!t.hoverData.selecting&&ce!=null&&ce._private.selectable&&(t.hoverData.dragging||(H.selectionType()==="additive"||Te?ce.selected()?ce.unselect(["tapunselect"]):ce.select(["tapselect"]):Te||(H.$(r).unmerge(ce).unselect(["tapunselect"]),ce.select(["tapselect"]))),t.redrawHint("eles",!0)),t.hoverData.selecting){var Se=H.collection(t.getAllInBox(Y[0],Y[1],Y[2],Y[3]));t.redrawHint("select",!0),Se.length>0&&t.redrawHint("eles",!0),H.emit({type:"boxend",originalEvent:T,position:{x:K[0],y:K[1]}});var we=function(je){return je.selectable()&&!je.selected()};H.selectionType()==="additive"||Te||H.$(r).unmerge(Se).unselect(),Se.emit("box").stdFilter(we).select().emit("boxselect"),t.redraw()}if(t.hoverData.dragging&&(t.hoverData.dragging=!1,t.redrawHint("select",!0),t.redrawHint("eles",!0),t.redraw()),!Y[4]){t.redrawHint("drag",!0),t.redrawHint("eles",!0);var Ce=ve&&ve.grabbed();g(te),Ce&&(ve.emit("freeon"),te.emit("free"),t.dragData.didDrag&&(ve.emit("dragfreeon"),te.emit("dragfree")))}}Y[4]=0,t.hoverData.down=null,t.hoverData.cxtStarted=!1,t.hoverData.draggingEles=!1,t.hoverData.selecting=!1,t.hoverData.isOverThresholdDrag=!1,t.dragData.didDrag=!1,t.hoverData.dragged=!1,t.hoverData.dragDelta=[],t.hoverData.mdownPos=null,t.hoverData.mdownGPos=null,t.hoverData.which=null}}},!1);var L=[],I=4,M,O=1e5,V=function(T,$){for(var H=0;H<T.length;H++)if(T[H]%$!==0)return!1;return!0},W=function(T){for(var $=Math.abs(T[0]),H=1;H<T.length;H++)if(Math.abs(T[H])!==$)return!1;return!0},N=function(T){var $=!1,H=T.deltaY;if(H==null&&(T.wheelDeltaY!=null?H=T.wheelDeltaY/4:T.wheelDelta!=null&&(H=T.wheelDelta/4)),M==null)if(L.length>=I){var K=L;if(M=V(K,5),!M){var Y=Math.abs(K[0]);M=W(K)&&Y>5}if(M)for(var ce=0;ce<K.length;ce++)O=Math.min(Math.abs(K[ce]),O)}else L.push(H),$=!0;else M&&(O=Math.min(Math.abs(H),O));if(!t.scrollingPage){var te=t.cy,ve=te.zoom(),Te=te.pan(),Pe=t.projectIntoViewport(T.clientX,T.clientY),ye=[Pe[0]*ve+Te.x,Pe[1]*ve+Te.y];if(t.hoverData.draggingEles||t.hoverData.dragging||t.hoverData.cxtStarted||S()){T.preventDefault();return}if(te.panningEnabled()&&te.userPanningEnabled()&&te.zoomingEnabled()&&te.userZoomingEnabled()){T.preventDefault(),t.data.wheelZooming=!0,clearTimeout(t.data.wheelTimeout),t.data.wheelTimeout=setTimeout(function(){t.data.wheelZooming=!1,t.redrawHint("eles",!0),t.redraw()},150);var Se;$&&Math.abs(H)>5&&(H=yu(H)*5),Se=H/-250,M&&(Se/=O,Se*=3),Se=Se*t.wheelSensitivity;var we=T.deltaMode===1;we&&(Se*=33);var Ce=te.zoom()*Math.pow(10,Se);T.type==="gesturechange"&&(Ce=t.gestureStartZoom*T.scale),te.zoom({level:Ce,renderedPosition:{x:ye[0],y:ye[1]}}),te.emit(T.type==="gesturechange"?"pinchzoom":"scrollzoom")}}};t.registerBinding(t.container,"wheel",N,!0),t.registerBinding(e,"scroll",function(T){t.scrollingPage=!0,clearTimeout(t.scrollingPageTimeout),t.scrollingPageTimeout=setTimeout(function(){t.scrollingPage=!1},250)},!0),t.registerBinding(t.container,"gesturestart",function(T){t.gestureStartZoom=t.cy.zoom(),t.hasTouchStarted||T.preventDefault()},!0),t.registerBinding(t.container,"gesturechange",function(ee){t.hasTouchStarted||N(ee)},!0),t.registerBinding(t.container,"mouseout",function(T){var $=t.projectIntoViewport(T.clientX,T.clientY);t.cy.emit({originalEvent:T,type:"mouseout",position:{x:$[0],y:$[1]}})},!1),t.registerBinding(t.container,"mouseover",function(T){var $=t.projectIntoViewport(T.clientX,T.clientY);t.cy.emit({originalEvent:T,type:"mouseover",position:{x:$[0],y:$[1]}})},!1);var z,X,j,J,G,Z,ae,Q,F,q,U,re,oe,xe=function(T,$,H,K){return Math.sqrt((H-T)*(H-T)+(K-$)*(K-$))},We=function(T,$,H,K){return(H-T)*(H-T)+(K-$)*(K-$)},Ne;t.registerBinding(t.container,"touchstart",Ne=function(T){if(t.hasTouchStarted=!0,!!P(T)){b(),t.touchData.capture=!0,t.data.bgActivePosistion=void 0;var $=t.cy,H=t.touchData.now,K=t.touchData.earlier;if(T.touches[0]){var Y=t.projectIntoViewport(T.touches[0].clientX,T.touches[0].clientY);H[0]=Y[0],H[1]=Y[1]}if(T.touches[1]){var Y=t.projectIntoViewport(T.touches[1].clientX,T.touches[1].clientY);H[2]=Y[0],H[3]=Y[1]}if(T.touches[2]){var Y=t.projectIntoViewport(T.touches[2].clientX,T.touches[2].clientY);H[4]=Y[0],H[5]=Y[1]}if(T.touches[1]){t.touchData.singleTouchMoved=!0,g(t.dragData.touchDragEles);var ce=t.findContainerClientCoords();F=ce[0],q=ce[1],U=ce[2],re=ce[3],z=T.touches[0].clientX-F,X=T.touches[0].clientY-q,j=T.touches[1].clientX-F,J=T.touches[1].clientY-q,oe=0<=z&&z<=U&&0<=j&&j<=U&&0<=X&&X<=re&&0<=J&&J<=re;var te=$.pan(),ve=$.zoom();G=xe(z,X,j,J),Z=We(z,X,j,J),ae=[(z+j)/2,(X+J)/2],Q=[(ae[0]-te.x)/ve,(ae[1]-te.y)/ve];var Te=200,Pe=Te*Te;if(Z<Pe&&!T.touches[2]){var ye=t.findNearestElement(H[0],H[1],!0,!0),Se=t.findNearestElement(H[2],H[3],!0,!0);ye&&ye.isNode()?(ye.activate().emit({originalEvent:T,type:"cxttapstart",position:{x:H[0],y:H[1]}}),t.touchData.start=ye):Se&&Se.isNode()?(Se.activate().emit({originalEvent:T,type:"cxttapstart",position:{x:H[0],y:H[1]}}),t.touchData.start=Se):$.emit({originalEvent:T,type:"cxttapstart",position:{x:H[0],y:H[1]}}),t.touchData.start&&(t.touchData.start._private.grabbed=!1),t.touchData.cxt=!0,t.touchData.cxtDragged=!1,t.data.bgActivePosistion=void 0,t.redraw();return}}if(T.touches[2])$.boxSelectionEnabled()&&T.preventDefault();else if(!T.touches[1]){if(T.touches[0]){var we=t.findNearestElements(H[0],H[1],!0,!0),Ce=we[0];if(Ce!=null&&(Ce.activate(),t.touchData.start=Ce,t.touchData.starts=we,t.nodeIsGrabbable(Ce))){var Fe=t.dragData.touchDragEles=$.collection(),je=null;t.redrawHint("eles",!0),t.redrawHint("drag",!0),Ce.selected()?(je=$.$(function(et){return et.selected()&&t.nodeIsGrabbable(et)}),m(je,{addToList:Fe})):p(Ce,{addToList:Fe}),f(Ce);var ct=function(Ct){return{originalEvent:T,type:Ct,position:{x:H[0],y:H[1]}}};Ce.emit(ct("grabon")),je?je.forEach(function(et){et.emit(ct("grab"))}):Ce.emit(ct("grab"))}n(Ce,["touchstart","tapstart","vmousedown"],T,{x:H[0],y:H[1]}),Ce==null&&(t.data.bgActivePosistion={x:Y[0],y:Y[1]},t.redrawHint("select",!0),t.redraw()),t.touchData.singleTouchMoved=!1,t.touchData.singleTouchStartTime=+new Date,clearTimeout(t.touchData.tapholdTimeout),t.touchData.tapholdTimeout=setTimeout(function(){t.touchData.singleTouchMoved===!1&&!t.pinching&&!t.touchData.selecting&&n(t.touchData.start,["taphold"],T,{x:H[0],y:H[1]})},t.tapholdDuration)}}if(T.touches.length>=1){for(var ot=t.touchData.startPosition=[null,null,null,null,null,null],Ze=0;Ze<H.length;Ze++)ot[Ze]=K[Ze]=H[Ze];var ft=T.touches[0];t.touchData.startGPosition=[ft.clientX,ft.clientY]}}},!1);var ue;t.registerBinding(e,"touchmove",ue=function(T){var $=t.touchData.capture;if(!(!$&&!P(T))){var H=t.selection,K=t.cy,Y=t.touchData.now,ce=t.touchData.earlier,te=K.zoom();if(T.touches[0]){var ve=t.projectIntoViewport(T.touches[0].clientX,T.touches[0].clientY);Y[0]=ve[0],Y[1]=ve[1]}if(T.touches[1]){var ve=t.projectIntoViewport(T.touches[1].clientX,T.touches[1].clientY);Y[2]=ve[0],Y[3]=ve[1]}if(T.touches[2]){var ve=t.projectIntoViewport(T.touches[2].clientX,T.touches[2].clientY);Y[4]=ve[0],Y[5]=ve[1]}var Te=t.touchData.startGPosition,Pe;if($&&T.touches[0]&&Te){for(var ye=[],Se=0;Se<Y.length;Se++)ye[Se]=Y[Se]-ce[Se];var we=T.touches[0].clientX-Te[0],Ce=we*we,Fe=T.touches[0].clientY-Te[1],je=Fe*Fe,ct=Ce+je;Pe=ct>=t.touchTapThreshold2}if($&&t.touchData.cxt){T.preventDefault();var ot=T.touches[0].clientX-F,Ze=T.touches[0].clientY-q,ft=T.touches[1].clientX-F,et=T.touches[1].clientY-q,Ct=We(ot,Ze,ft,et),Gt=Ct/Z,br=150,rr=br*br,ia=1.5,Bn=ia*ia;if(Gt>=Bn||Ct>=rr){t.touchData.cxt=!1,t.data.bgActivePosistion=void 0,t.redrawHint("select",!0);var Fr={originalEvent:T,type:"cxttapend",position:{x:Y[0],y:Y[1]}};t.touchData.start?(t.touchData.start.unactivate().emit(Fr),t.touchData.start=null):K.emit(Fr)}}if($&&t.touchData.cxt){var Fr={originalEvent:T,type:"cxtdrag",position:{x:Y[0],y:Y[1]}};t.data.bgActivePosistion=void 0,t.redrawHint("select",!0),t.touchData.start?t.touchData.start.emit(Fr):K.emit(Fr),t.touchData.start&&(t.touchData.start._private.grabbed=!1),t.touchData.cxtDragged=!0;var Tt=t.findNearestElement(Y[0],Y[1],!0,!0);(!t.touchData.cxtOver||Tt!==t.touchData.cxtOver)&&(t.touchData.cxtOver&&t.touchData.cxtOver.emit({originalEvent:T,type:"cxtdragout",position:{x:Y[0],y:Y[1]}}),t.touchData.cxtOver=Tt,Tt&&Tt.emit({originalEvent:T,type:"cxtdragover",position:{x:Y[0],y:Y[1]}}))}else if($&&T.touches[2]&&K.boxSelectionEnabled())T.preventDefault(),t.data.bgActivePosistion=void 0,this.lastThreeTouch=+new Date,t.touchData.selecting||K.emit({originalEvent:T,type:"boxstart",position:{x:Y[0],y:Y[1]}}),t.touchData.selecting=!0,t.touchData.didSelect=!0,H[4]=1,!H||H.length===0||H[0]===void 0?(H[0]=(Y[0]+Y[2]+Y[4])/3,H[1]=(Y[1]+Y[3]+Y[5])/3,H[2]=(Y[0]+Y[2]+Y[4])/3+1,H[3]=(Y[1]+Y[3]+Y[5])/3+1):(H[2]=(Y[0]+Y[2]+Y[4])/3,H[3]=(Y[1]+Y[3]+Y[5])/3),t.redrawHint("select",!0),t.redraw();else if($&&T.touches[1]&&!t.touchData.didSelect&&K.zoomingEnabled()&&K.panningEnabled()&&K.userZoomingEnabled()&&K.userPanningEnabled()){T.preventDefault(),t.data.bgActivePosistion=void 0,t.redrawHint("select",!0);var gt=t.dragData.touchDragEles;if(gt){t.redrawHint("drag",!0);for(var St=0;St<gt.length;St++){var An=gt[St]._private;An.grabbed=!1,An.rscratch.inDragLayer=!1}}var Ut=t.touchData.start,ot=T.touches[0].clientX-F,Ze=T.touches[0].clientY-q,ft=T.touches[1].clientX-F,et=T.touches[1].clientY-q,Ou=xe(ot,Ze,ft,et),Vd=Ou/G;if(oe){var qd=ot-z,_d=Ze-X,$d=ft-j,Wd=et-J,Gd=(qd+$d)/2,Ud=(_d+Wd)/2,za=K.zoom(),Qi=za*Vd,Ln=K.pan(),Nu=Q[0]*za+Ln.x,Fu=Q[1]*za+Ln.y,Hd={x:-Qi/za*(Nu-Ln.x-Gd)+Nu,y:-Qi/za*(Fu-Ln.y-Ud)+Fu};if(Ut&&Ut.active()){var gt=t.dragData.touchDragEles;g(gt),t.redrawHint("drag",!0),t.redrawHint("eles",!0),Ut.unactivate().emit("freeon"),gt.emit("free"),t.dragData.didDrag&&(Ut.emit("dragfreeon"),gt.emit("dragfree"))}K.viewport({zoom:Qi,pan:Hd,cancelOnFailedZoom:!0}),K.emit("pinchzoom"),G=Ou,z=ot,X=Ze,j=ft,J=et,t.pinching=!0}if(T.touches[0]){var ve=t.projectIntoViewport(T.touches[0].clientX,T.touches[0].clientY);Y[0]=ve[0],Y[1]=ve[1]}if(T.touches[1]){var ve=t.projectIntoViewport(T.touches[1].clientX,T.touches[1].clientY);Y[2]=ve[0],Y[3]=ve[1]}if(T.touches[2]){var ve=t.projectIntoViewport(T.touches[2].clientX,T.touches[2].clientY);Y[4]=ve[0],Y[5]=ve[1]}}else if(T.touches[0]&&!t.touchData.didSelect){var Nt=t.touchData.start,ji=t.touchData.last,Tt;if(!t.hoverData.draggingEles&&!t.swipePanning&&(Tt=t.findNearestElement(Y[0],Y[1],!0,!0)),$&&Nt!=null&&T.preventDefault(),$&&Nt!=null&&t.nodeIsDraggable(Nt))if(Pe){var gt=t.dragData.touchDragEles,zu=!t.dragData.didDrag;zu&&m(gt,{inDragLayer:!0}),t.dragData.didDrag=!0;var Va={x:0,y:0};if(ie(ye[0])&&ie(ye[1])&&(Va.x+=ye[0],Va.y+=ye[1],zu)){t.redrawHint("eles",!0);var Ft=t.touchData.dragDelta;Ft&&ie(Ft[0])&&ie(Ft[1])&&(Va.x+=Ft[0],Va.y+=Ft[1])}t.hoverData.draggingEles=!0,gt.silentShift(Va).emit("position drag"),t.redrawHint("drag",!0),t.touchData.startPosition[0]==ce[0]&&t.touchData.startPosition[1]==ce[1]&&t.redrawHint("eles",!0),t.redraw()}else{var Ft=t.touchData.dragDelta=t.touchData.dragDelta||[];Ft.length===0?(Ft.push(ye[0]),Ft.push(ye[1])):(Ft[0]+=ye[0],Ft[1]+=ye[1])}if(n(Nt||Tt,["touchmove","tapdrag","vmousemove"],T,{x:Y[0],y:Y[1]}),(!Nt||!Nt.grabbed())&&Tt!=ji&&(ji&&ji.emit({originalEvent:T,type:"tapdragout",position:{x:Y[0],y:Y[1]}}),Tt&&Tt.emit({originalEvent:T,type:"tapdragover",position:{x:Y[0],y:Y[1]}})),t.touchData.last=Tt,$)for(var St=0;St<Y.length;St++)Y[St]&&t.touchData.startPosition[St]&&Pe&&(t.touchData.singleTouchMoved=!0);if($&&(Nt==null||Nt.pannable())&&K.panningEnabled()&&K.userPanningEnabled()){var Kd=o(Nt,t.touchData.starts);Kd&&(T.preventDefault(),t.data.bgActivePosistion||(t.data.bgActivePosistion=wa(t.touchData.startPosition)),t.swipePanning?(K.panBy({x:ye[0]*te,y:ye[1]*te}),K.emit("dragpan")):Pe&&(t.swipePanning=!0,K.panBy({x:we*te,y:Fe*te}),K.emit("dragpan"),Nt&&(Nt.unactivate(),t.redrawHint("select",!0),t.touchData.start=null)));var ve=t.projectIntoViewport(T.touches[0].clientX,T.touches[0].clientY);Y[0]=ve[0],Y[1]=ve[1]}}for(var Se=0;Se<Y.length;Se++)ce[Se]=Y[Se];$&&T.touches.length>0&&!t.hoverData.draggingEles&&!t.swipePanning&&t.data.bgActivePosistion!=null&&(t.data.bgActivePosistion=void 0,t.redrawHint("select",!0),t.redraw())}},!1);var le;t.registerBinding(e,"touchcancel",le=function(T){var $=t.touchData.start;t.touchData.capture=!1,$&&$.unactivate()});var he,me,pe,be;if(t.registerBinding(e,"touchend",he=function(T){var $=t.touchData.start,H=t.touchData.capture;if(H)T.touches.length===0&&(t.touchData.capture=!1),T.preventDefault();else return;var K=t.selection;t.swipePanning=!1,t.hoverData.draggingEles=!1;var Y=t.cy,ce=Y.zoom(),te=t.touchData.now,ve=t.touchData.earlier;if(T.touches[0]){var Te=t.projectIntoViewport(T.touches[0].clientX,T.touches[0].clientY);te[0]=Te[0],te[1]=Te[1]}if(T.touches[1]){var Te=t.projectIntoViewport(T.touches[1].clientX,T.touches[1].clientY);te[2]=Te[0],te[3]=Te[1]}if(T.touches[2]){var Te=t.projectIntoViewport(T.touches[2].clientX,T.touches[2].clientY);te[4]=Te[0],te[5]=Te[1]}$&&$.unactivate();var Pe;if(t.touchData.cxt){if(Pe={originalEvent:T,type:"cxttapend",position:{x:te[0],y:te[1]}},$?$.emit(Pe):Y.emit(Pe),!t.touchData.cxtDragged){var ye={originalEvent:T,type:"cxttap",position:{x:te[0],y:te[1]}};$?$.emit(ye):Y.emit(ye)}t.touchData.start&&(t.touchData.start._private.grabbed=!1),t.touchData.cxt=!1,t.touchData.start=null,t.redraw();return}if(!T.touches[2]&&Y.boxSelectionEnabled()&&t.touchData.selecting){t.touchData.selecting=!1;var Se=Y.collection(t.getAllInBox(K[0],K[1],K[2],K[3]));K[0]=void 0,K[1]=void 0,K[2]=void 0,K[3]=void 0,K[4]=0,t.redrawHint("select",!0),Y.emit({type:"boxend",originalEvent:T,position:{x:te[0],y:te[1]}});var we=function(rr){return rr.selectable()&&!rr.selected()};Se.emit("box").stdFilter(we).select().emit("boxselect"),Se.nonempty()&&t.redrawHint("eles",!0),t.redraw()}if($!=null&&$.unactivate(),T.touches[2])t.data.bgActivePosistion=void 0,t.redrawHint("select",!0);else if(!T.touches[1]){if(!T.touches[0]){if(!T.touches[0]){t.data.bgActivePosistion=void 0,t.redrawHint("select",!0);var Ce=t.dragData.touchDragEles;if($!=null){var Fe=$._private.grabbed;g(Ce),t.redrawHint("drag",!0),t.redrawHint("eles",!0),Fe&&($.emit("freeon"),Ce.emit("free"),t.dragData.didDrag&&($.emit("dragfreeon"),Ce.emit("dragfree"))),n($,["touchend","tapend","vmouseup","tapdragout"],T,{x:te[0],y:te[1]}),$.unactivate(),t.touchData.start=null}else{var je=t.findNearestElement(te[0],te[1],!0,!0);n(je,["touchend","tapend","vmouseup","tapdragout"],T,{x:te[0],y:te[1]})}var ct=t.touchData.startPosition[0]-te[0],ot=ct*ct,Ze=t.touchData.startPosition[1]-te[1],ft=Ze*Ze,et=ot+ft,Ct=et*ce*ce;t.touchData.singleTouchMoved||($||Y.$(":selected").unselect(["tapunselect"]),n($,["tap","vclick"],T,{x:te[0],y:te[1]}),me=!1,T.timeStamp-be<=Y.multiClickDebounceTime()?(pe&&clearTimeout(pe),me=!0,be=null,n($,["dbltap","vdblclick"],T,{x:te[0],y:te[1]})):(pe=setTimeout(function(){me||n($,["onetap","voneclick"],T,{x:te[0],y:te[1]})},Y.multiClickDebounceTime()),be=T.timeStamp)),$!=null&&!t.dragData.didDrag&&$._private.selectable&&Ct<t.touchTapThreshold2&&!t.pinching&&(Y.selectionType()==="single"?(Y.$(r).unmerge($).unselect(["tapunselect"]),$.select(["tapselect"])):$.selected()?$.unselect(["tapunselect"]):$.select(["tapselect"]),t.redrawHint("eles",!0)),t.touchData.singleTouchMoved=!0}}}for(var Gt=0;Gt<te.length;Gt++)ve[Gt]=te[Gt];t.dragData.didDrag=!1,T.touches.length===0&&(t.touchData.dragDelta=[],t.touchData.startPosition=[null,null,null,null,null,null],t.touchData.startGPosition=null,t.touchData.didSelect=!1),T.touches.length<2&&(T.touches.length===1&&(t.touchData.startGPosition=[T.touches[0].clientX,T.touches[0].clientY]),t.pinching=!1,t.redrawHint("eles",!0),t.redraw())},!1),typeof TouchEvent>"u"){var Ee=[],ke=function(T){return{clientX:T.clientX,clientY:T.clientY,force:1,identifier:T.pointerId,pageX:T.pageX,pageY:T.pageY,radiusX:T.width/2,radiusY:T.height/2,screenX:T.screenX,screenY:T.screenY,target:T.target}},Ve=function(T){return{event:T,touch:ke(T)}},Ye=function(T){Ee.push(Ve(T))},Le=function(T){for(var $=0;$<Ee.length;$++){var H=Ee[$];if(H.event.pointerId===T.pointerId){Ee.splice($,1);return}}},Qe=function(T){var $=Ee.filter(function(H){return H.event.pointerId===T.pointerId})[0];$.event=T,$.touch=ke(T)},De=function(T){T.touches=Ee.map(function($){return $.touch})},fe=function(T){return T.pointerType==="mouse"||T.pointerType===4};t.registerBinding(t.container,"pointerdown",function(ee){fe(ee)||(ee.preventDefault(),Ye(ee),De(ee),Ne(ee))}),t.registerBinding(t.container,"pointerup",function(ee){fe(ee)||(Le(ee),De(ee),he(ee))}),t.registerBinding(t.container,"pointercancel",function(ee){fe(ee)||(Le(ee),De(ee),le(ee))}),t.registerBinding(t.container,"pointermove",function(ee){fe(ee)||(ee.preventDefault(),Qe(ee),De(ee),ue(ee))})}};var mr={};mr.generatePolygon=function(t,e){return this.nodeShapes[t]={renderer:this,name:t,points:e,draw:function(a,n,i,o,s,u){this.renderer.nodeShapeImpl("polygon",a,n,i,o,s,this.points)},intersectLine:function(a,n,i,o,s,u,l,c){return ln(s,u,this.points,a,n,i/2,o/2,l)},checkPoint:function(a,n,i,o,s,u,l,c){return fr(a,n,this.points,u,l,o,s,[0,-1],i)}}};mr.generateEllipse=function(){return this.nodeShapes.ellipse={renderer:this,name:"ellipse",draw:function(e,r,a,n,i,o){this.renderer.nodeShapeImpl(this.name,e,r,a,n,i)},intersectLine:function(e,r,a,n,i,o,s,u){return dy(i,o,e,r,a/2+s,n/2+s)},checkPoint:function(e,r,a,n,i,o,s,u){return Yr(e,r,n,i,o,s,a)}}};mr.generateRoundPolygon=function(t,e){return this.nodeShapes[t]={renderer:this,name:t,points:e,getOrCreateCorners:function(a,n,i,o,s,u,l){if(u[l]!==void 0&&u[l+"-cx"]===a&&u[l+"-cy"]===n)return u[l];u[l]=new Array(e.length/2),u[l+"-cx"]=a,u[l+"-cy"]=n;var c=i/2,f=o/2;s=s==="auto"?yv(i,o):s;for(var v=new Array(e.length/2),h=0;h<e.length/2;h++)v[h]={x:a+c*e[h*2],y:n+f*e[h*2+1]};var d,m,p,g,y=v.length;for(m=v[y-1],d=0;d<y;d++)p=v[d%y],g=v[(d+1)%y],u[l][d]=Au(m,p,g,s),m=p,p=g;return u[l]},draw:function(a,n,i,o,s,u,l){this.renderer.nodeShapeImpl("round-polygon",a,n,i,o,s,this.points,this.getOrCreateCorners(n,i,o,s,u,l,"drawCorners"))},intersectLine:function(a,n,i,o,s,u,l,c,f){return hy(s,u,this.points,a,n,i,o,l,this.getOrCreateCorners(a,n,i,o,c,f,"corners"))},checkPoint:function(a,n,i,o,s,u,l,c,f){return vy(a,n,this.points,u,l,o,s,this.getOrCreateCorners(u,l,o,s,c,f,"corners"))}}};mr.generateRoundRectangle=function(){return this.nodeShapes["round-rectangle"]=this.nodeShapes.roundrectangle={renderer:this,name:"round-rectangle",points:wt(4,0),draw:function(e,r,a,n,i,o){this.renderer.nodeShapeImpl(this.name,e,r,a,n,i,this.points,o)},intersectLine:function(e,r,a,n,i,o,s,u){return gv(i,o,e,r,a,n,s,u)},checkPoint:function(e,r,a,n,i,o,s,u){var l=n/2,c=i/2;u=u==="auto"?kr(n,i):u,u=Math.min(l,c,u);var f=u*2;return!!(fr(e,r,this.points,o,s,n,i-f,[0,-1],a)||fr(e,r,this.points,o,s,n-f,i,[0,-1],a)||Yr(e,r,f,f,o-l+u,s-c+u,a)||Yr(e,r,f,f,o+l-u,s-c+u,a)||Yr(e,r,f,f,o+l-u,s+c-u,a)||Yr(e,r,f,f,o-l+u,s+c-u,a))}}};mr.generateCutRectangle=function(){return this.nodeShapes["cut-rectangle"]=this.nodeShapes.cutrectangle={renderer:this,name:"cut-rectangle",cornerLength:wu(),points:wt(4,0),draw:function(e,r,a,n,i,o){this.renderer.nodeShapeImpl(this.name,e,r,a,n,i,null,o)},generateCutTrianglePts:function(e,r,a,n,i){var o=i==="auto"?this.cornerLength:i,s=r/2,u=e/2,l=a-u,c=a+u,f=n-s,v=n+s;return{topLeft:[l,f+o,l+o,f,l+o,f+o],topRight:[c-o,f,c,f+o,c-o,f+o],bottomRight:[c,v-o,c-o,v,c-o,v-o],bottomLeft:[l+o,v,l,v-o,l+o,v-o]}},intersectLine:function(e,r,a,n,i,o,s,u){var l=this.generateCutTrianglePts(a+2*s,n+2*s,e,r,u),c=[].concat.apply([],[l.topLeft.splice(0,4),l.topRight.splice(0,4),l.bottomRight.splice(0,4),l.bottomLeft.splice(0,4)]);return ln(i,o,c,e,r)},checkPoint:function(e,r,a,n,i,o,s,u){var l=u==="auto"?this.cornerLength:u;if(fr(e,r,this.points,o,s,n,i-2*l,[0,-1],a)||fr(e,r,this.points,o,s,n-2*l,i,[0,-1],a))return!0;var c=this.generateCutTrianglePts(n,i,o,s);return Pt(e,r,c.topLeft)||Pt(e,r,c.topRight)||Pt(e,r,c.bottomRight)||Pt(e,r,c.bottomLeft)}}};mr.generateBarrel=function(){return this.nodeShapes.barrel={renderer:this,name:"barrel",points:wt(4,0),draw:function(e,r,a,n,i,o){this.renderer.nodeShapeImpl(this.name,e,r,a,n,i)},intersectLine:function(e,r,a,n,i,o,s,u){var l=.15,c=.5,f=.85,v=this.generateBarrelBezierPts(a+2*s,n+2*s,e,r),h=function(p){var g=Ca({x:p[0],y:p[1]},{x:p[2],y:p[3]},{x:p[4],y:p[5]},l),y=Ca({x:p[0],y:p[1]},{x:p[2],y:p[3]},{x:p[4],y:p[5]},c),b=Ca({x:p[0],y:p[1]},{x:p[2],y:p[3]},{x:p[4],y:p[5]},f);return[p[0],p[1],g.x,g.y,y.x,y.y,b.x,b.y,p[4],p[5]]},d=[].concat(h(v.topLeft),h(v.topRight),h(v.bottomRight),h(v.bottomLeft));return ln(i,o,d,e,r)},generateBarrelBezierPts:function(e,r,a,n){var i=r/2,o=e/2,s=a-o,u=a+o,l=n-i,c=n+i,f=qs(e,r),v=f.heightOffset,h=f.widthOffset,d=f.ctrlPtOffsetPct*e,m={topLeft:[s,l+v,s+d,l,s+h,l],topRight:[u-h,l,u-d,l,u,l+v],bottomRight:[u,c-v,u-d,c,u-h,c],bottomLeft:[s+h,c,s+d,c,s,c-v]};return m.topLeft.isTop=!0,m.topRight.isTop=!0,m.bottomLeft.isBottom=!0,m.bottomRight.isBottom=!0,m},checkPoint:function(e,r,a,n,i,o,s,u){var l=qs(n,i),c=l.heightOffset,f=l.widthOffset;if(fr(e,r,this.points,o,s,n,i-2*c,[0,-1],a)||fr(e,r,this.points,o,s,n-2*f,i,[0,-1],a))return!0;for(var v=this.generateBarrelBezierPts(n,i,o,s),h=function(R,S,P){var k=P[4],B=P[2],D=P[0],A=P[5],L=P[1],I=Math.min(k,D),M=Math.max(k,D),O=Math.min(A,L),V=Math.max(A,L);if(I<=R&&R<=M&&O<=S&&S<=V){var W=py(k,B,D),N=uy(W[0],W[1],W[2],R),z=N.filter(function(X){return 0<=X&&X<=1});if(z.length>0)return z[0]}return null},d=Object.keys(v),m=0;m<d.length;m++){var p=d[m],g=v[p],y=h(e,r,g);if(y!=null){var b=g[5],w=g[3],E=g[1],C=st(b,w,E,y);if(g.isTop&&C<=r||g.isBottom&&r<=C)return!0}}return!1}}};mr.generateBottomRoundrectangle=function(){return this.nodeShapes["bottom-round-rectangle"]=this.nodeShapes.bottomroundrectangle={renderer:this,name:"bottom-round-rectangle",points:wt(4,0),draw:function(e,r,a,n,i,o){this.renderer.nodeShapeImpl(this.name,e,r,a,n,i,this.points,o)},intersectLine:function(e,r,a,n,i,o,s,u){var l=e-(a/2+s),c=r-(n/2+s),f=c,v=e+(a/2+s),h=Er(i,o,e,r,l,c,v,f,!1);return h.length>0?h:gv(i,o,e,r,a,n,s,u)},checkPoint:function(e,r,a,n,i,o,s,u){u=u==="auto"?kr(n,i):u;var l=2*u;if(fr(e,r,this.points,o,s,n,i-l,[0,-1],a)||fr(e,r,this.points,o,s,n-l,i,[0,-1],a))return!0;var c=n/2+2*a,f=i/2+2*a,v=[o-c,s-f,o-c,s,o+c,s,o+c,s-f];return!!(Pt(e,r,v)||Yr(e,r,l,l,o+n/2-u,s+i/2-u,a)||Yr(e,r,l,l,o-n/2+u,s+i/2-u,a))}}};mr.registerNodeShapes=function(){var t=this.nodeShapes={},e=this;this.generateEllipse(),this.generatePolygon("triangle",wt(3,0)),this.generateRoundPolygon("round-triangle",wt(3,0)),this.generatePolygon("rectangle",wt(4,0)),t.square=t.rectangle,this.generateRoundRectangle(),this.generateCutRectangle(),this.generateBarrel(),this.generateBottomRoundrectangle();{var r=[0,1,1,0,0,-1,-1,0];this.generatePolygon("diamond",r),this.generateRoundPolygon("round-diamond",r)}this.generatePolygon("pentagon",wt(5,0)),this.generateRoundPolygon("round-pentagon",wt(5,0)),this.generatePolygon("hexagon",wt(6,0)),this.generateRoundPolygon("round-hexagon",wt(6,0)),this.generatePolygon("heptagon",wt(7,0)),this.generateRoundPolygon("round-heptagon",wt(7,0)),this.generatePolygon("octagon",wt(8,0)),this.generateRoundPolygon("round-octagon",wt(8,0));var a=new Array(20);{var n=Vs(5,0),i=Vs(5,Math.PI/5),o=.5*(3-Math.sqrt(5));o*=1.57;for(var s=0;s<i.length/2;s++)i[s*2]*=o,i[s*2+1]*=o;for(var s=0;s<20/4;s++)a[s*4]=n[s*2],a[s*4+1]=n[s*2+1],a[s*4+2]=i[s*2],a[s*4+3]=i[s*2+1]}a=mv(a),this.generatePolygon("star",a),this.generatePolygon("vee",[-1,-1,0,-.333,1,-1,0,1]),this.generatePolygon("rhomboid",[-1,-1,.333,-1,1,1,-.333,1]),this.generatePolygon("right-rhomboid",[-.333,-1,1,-1,.333,1,-1,1]),this.nodeShapes.concavehexagon=this.generatePolygon("concave-hexagon",[-1,-.95,-.75,0,-1,.95,1,.95,.75,0,1,-.95]);{var u=[-1,-1,.25,-1,1,0,.25,1,-1,1];this.generatePolygon("tag",u),this.generateRoundPolygon("round-tag",u)}t.makePolygon=function(l){var c=l.join("$"),f="polygon-"+c,v;return(v=this[f])?v:e.generatePolygon(f,l)}};var kn={};kn.timeToRender=function(){return this.redrawTotalTime/this.redrawCount};kn.redraw=function(t){t=t||dv();var e=this;e.averageRedrawTime===void 0&&(e.averageRedrawTime=0),e.lastRedrawTime===void 0&&(e.lastRedrawTime=0),e.lastDrawTime===void 0&&(e.lastDrawTime=0),e.requestedFrame=!0,e.renderOptions=t};kn.beforeRender=function(t,e){if(!this.destroyed){e==null&&Ue("Priority is not optional for beforeRender");var r=this.beforeRenderCallbacks;r.push({fn:t,priority:e}),r.sort(function(a,n){return n.priority-a.priority})}};var sf=function(e,r,a){for(var n=e.beforeRenderCallbacks,i=0;i<n.length;i++)n[i].fn(r,a)};kn.startRenderLoop=function(){var t=this,e=t.cy;if(!t.renderLoopStarted){t.renderLoopStarted=!0;var r=function(n){if(!t.destroyed){if(!e.batching())if(t.requestedFrame&&!t.skipFrame){sf(t,!0,n);var i=cr();t.render(t.renderOptions);var o=t.lastDrawTime=cr();t.averageRedrawTime===void 0&&(t.averageRedrawTime=o-i),t.redrawCount===void 0&&(t.redrawCount=0),t.redrawCount++,t.redrawTotalTime===void 0&&(t.redrawTotalTime=0);var s=o-i;t.redrawTotalTime+=s,t.lastRedrawTime=s,t.averageRedrawTime=t.averageRedrawTime/2+s/2,t.requestedFrame=!1}else sf(t,!1,n);t.skipFrame=!1,bi(r)}};bi(r)}};var Lw=function(e){this.init(e)},md=Lw,Fa=md.prototype;Fa.clientFunctions=["redrawHint","render","renderTo","matchCanvasSize","nodeShapeImpl","arrowShapeImpl"];Fa.init=function(t){var e=this;e.options=t,e.cy=t.cy;var r=e.container=t.cy.container(),a=e.cy.window();if(a){var n=a.document,i=n.head,o="__________cytoscape_stylesheet",s="__________cytoscape_container",u=n.getElementById(o)!=null;if(r.className.indexOf(s)<0&&(r.className=(r.className||"")+" "+s),!u){var l=n.createElement("style");l.id=o,l.textContent="."+s+" { position: relative; }",i.insertBefore(l,i.children[0])}var c=a.getComputedStyle(r),f=c.getPropertyValue("position");f==="static"&&Oe("A Cytoscape container has style position:static and so can not use UI extensions properly")}e.selection=[void 0,void 0,void 0,void 0,0],e.bezierProjPcts=[.05,.225,.4,.5,.6,.775,.95],e.hoverData={down:null,last:null,downTime:null,triggerMode:null,dragging:!1,initialPan:[null,null],capture:!1},e.dragData={possibleDragElements:[]},e.touchData={start:null,capture:!1,startPosition:[null,null,null,null,null,null],singleTouchStartTime:null,singleTouchMoved:!0,now:[null,null,null,null,null,null],earlier:[null,null,null,null,null,null]},e.redraws=0,e.showFps=t.showFps,e.debug=t.debug,e.webgl=t.webgl,e.hideEdgesOnViewport=t.hideEdgesOnViewport,e.textureOnViewport=t.textureOnViewport,e.wheelSensitivity=t.wheelSensitivity,e.motionBlurEnabled=t.motionBlur,e.forcedPixelRatio=ie(t.pixelRatio)?t.pixelRatio:null,e.motionBlur=t.motionBlur,e.motionBlurOpacity=t.motionBlurOpacity,e.motionBlurTransparency=1-e.motionBlurOpacity,e.motionBlurPxRatio=1,e.mbPxRBlurry=1,e.minMbLowQualFrames=4,e.fullQualityMb=!1,e.clearedForMotionBlur=[],e.desktopTapThreshold=t.desktopTapThreshold,e.desktopTapThreshold2=t.desktopTapThreshold*t.desktopTapThreshold,e.touchTapThreshold=t.touchTapThreshold,e.touchTapThreshold2=t.touchTapThreshold*t.touchTapThreshold,e.tapholdDuration=500,e.bindings=[],e.beforeRenderCallbacks=[],e.beforeRenderPriorities={animations:400,eleCalcs:300,eleTxrDeq:200,lyrTxrDeq:150,lyrTxrSkip:100},e.registerNodeShapes(),e.registerArrowShapes(),e.registerCalculationListeners()};Fa.notify=function(t,e){var r=this,a=r.cy;if(!this.destroyed){if(t==="init"){r.load();return}if(t==="destroy"){r.destroy();return}(t==="add"||t==="remove"||t==="move"&&a.hasCompoundNodes()||t==="load"||t==="zorder"||t==="mount")&&r.invalidateCachedZSortedEles(),t==="viewport"&&r.redrawHint("select",!0),t==="gc"&&r.redrawHint("gc",!0),(t==="load"||t==="resize"||t==="mount")&&(r.invalidateContainerClientCoordsCache(),r.matchCanvasSize(r.container)),r.redrawHint("eles",!0),r.redrawHint("drag",!0),this.startRenderLoop(),this.redraw()}};Fa.destroy=function(){var t=this;t.destroyed=!0,t.cy.stopAnimationLoop();for(var e=0;e<t.bindings.length;e++){var r=t.bindings[e],a=r,n=a.target;(n.off||n.removeEventListener).apply(n,a.args)}if(t.bindings=[],t.beforeRenderCallbacks=[],t.onUpdateEleCalcsFns=[],t.removeObserver&&t.removeObserver.disconnect(),t.styleObserver&&t.styleObserver.disconnect(),t.resizeObserver&&t.resizeObserver.disconnect(),t.labelCalcDiv)try{document.body.removeChild(t.labelCalcDiv)}catch{}};Fa.isHeadless=function(){return!1};[Bu,pd,gd,Na,mr,kn].forEach(function(t){ge(Fa,t)});var Ss=1e3/60,yd={setupDequeueing:function(e){return function(){var a=this,n=this.renderer;if(!a.dequeueingSetup){a.dequeueingSetup=!0;var i=Cn(function(){n.redrawHint("eles",!0),n.redrawHint("drag",!0),n.redraw()},e.deqRedrawThreshold),o=function(l,c){var f=cr(),v=n.averageRedrawTime,h=n.lastRedrawTime,d=[],m=n.cy.extent(),p=n.getPixelRatio();for(l||n.flushRenderedStyleQueue();;){var g=cr(),y=g-f,b=g-c;if(h<Ss){var w=Ss-(l?v:0);if(b>=e.deqFastCost*w)break}else if(l){if(y>=e.deqCost*h||y>=e.deqAvgCost*v)break}else if(b>=e.deqNoDrawCost*Ss)break;var E=e.deq(a,p,m);if(E.length>0)for(var C=0;C<E.length;C++)d.push(E[C]);else break}d.length>0&&(e.onDeqd(a,d),!l&&e.shouldRedraw(a,d,p,m)&&i())},s=e.priority||pu;n.beforeRender(o,s(a))}}}},Mw=function(){function t(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:wi;Lr(this,t),this.idsByKey=new ir,this.keyForId=new ir,this.cachesByLvl=new ir,this.lvls=[],this.getKey=e,this.doesEleInvalidateKey=r}return Mr(t,[{key:"getIdsFor",value:function(r){r==null&&Ue("Can not get id list for null key");var a=this.idsByKey,n=this.idsByKey.get(r);return n||(n=new La,a.set(r,n)),n}},{key:"addIdForKey",value:function(r,a){r!=null&&this.getIdsFor(r).add(a)}},{key:"deleteIdForKey",value:function(r,a){r!=null&&this.getIdsFor(r).delete(a)}},{key:"getNumberOfIdsForKey",value:function(r){return r==null?0:this.getIdsFor(r).size}},{key:"updateKeyMappingFor",value:function(r){var a=r.id(),n=this.keyForId.get(a),i=this.getKey(r);this.deleteIdForKey(n,a),this.addIdForKey(i,a),this.keyForId.set(a,i)}},{key:"deleteKeyMappingFor",value:function(r){var a=r.id(),n=this.keyForId.get(a);this.deleteIdForKey(n,a),this.keyForId.delete(a)}},{key:"keyHasChangedFor",value:function(r){var a=r.id(),n=this.keyForId.get(a),i=this.getKey(r);return n!==i}},{key:"isInvalid",value:function(r){return this.keyHasChangedFor(r)||this.doesEleInvalidateKey(r)}},{key:"getCachesAt",value:function(r){var a=this.cachesByLvl,n=this.lvls,i=a.get(r);return i||(i=new ir,a.set(r,i),n.push(r)),i}},{key:"getCache",value:function(r,a){return this.getCachesAt(a).get(r)}},{key:"get",value:function(r,a){var n=this.getKey(r),i=this.getCache(n,a);return i!=null&&this.updateKeyMappingFor(r),i}},{key:"getForCachedKey",value:function(r,a){var n=this.keyForId.get(r.id()),i=this.getCache(n,a);return i}},{key:"hasCache",value:function(r,a){return this.getCachesAt(a).has(r)}},{key:"has",value:function(r,a){var n=this.getKey(r);return this.hasCache(n,a)}},{key:"setCache",value:function(r,a,n){n.key=r,this.getCachesAt(a).set(r,n)}},{key:"set",value:function(r,a,n){var i=this.getKey(r);this.setCache(i,a,n),this.updateKeyMappingFor(r)}},{key:"deleteCache",value:function(r,a){this.getCachesAt(a).delete(r)}},{key:"delete",value:function(r,a){var n=this.getKey(r);this.deleteCache(n,a)}},{key:"invalidateKey",value:function(r){var a=this;this.lvls.forEach(function(n){return a.deleteCache(r,n)})}},{key:"invalidate",value:function(r){var a=r.id(),n=this.keyForId.get(a);this.deleteKeyMappingFor(r);var i=this.doesEleInvalidateKey(r);return i&&this.invalidateKey(n),i||this.getNumberOfIdsForKey(n)===0}}])}(),uf=25,Xn=50,di=-4,Js=3,bd=7.99,Iw=8,Ow=1024,Nw=1024,Fw=1024,zw=.2,Vw=.8,qw=10,_w=.15,$w=.1,Ww=.9,Gw=.9,Uw=100,Hw=1,Ea={dequeue:"dequeue",downscale:"downscale",highQuality:"highQuality"},Kw=ht({getKey:null,doesEleInvalidateKey:wi,drawElement:null,getBoundingBox:null,getRotationPoint:null,getRotationOffset:null,isVisible:cv,allowEdgeTxrCaching:!0,allowParentTxrCaching:!0}),Ja=function(e,r){var a=this;a.renderer=e,a.onDequeues=[];var n=Kw(r);ge(a,n),a.lookup=new Mw(n.getKey,n.doesEleInvalidateKey),a.setupDequeueing()},it=Ja.prototype;it.reasons=Ea;it.getTextureQueue=function(t){var e=this;return e.eleImgCaches=e.eleImgCaches||{},e.eleImgCaches[t]=e.eleImgCaches[t]||[]};it.getRetiredTextureQueue=function(t){var e=this,r=e.eleImgCaches.retired=e.eleImgCaches.retired||{},a=r[t]=r[t]||[];return a};it.getElementQueue=function(){var t=this,e=t.eleCacheQueue=t.eleCacheQueue||new Tn(function(r,a){return a.reqs-r.reqs});return e};it.getElementKeyToQueue=function(){var t=this,e=t.eleKeyToCacheQueue=t.eleKeyToCacheQueue||{};return e};it.getElement=function(t,e,r,a,n){var i=this,o=this.renderer,s=o.cy.zoom(),u=this.lookup;if(!e||e.w===0||e.h===0||isNaN(e.w)||isNaN(e.h)||!t.visible()||t.removed()||!i.allowEdgeTxrCaching&&t.isEdge()||!i.allowParentTxrCaching&&t.isParent())return null;if(a==null&&(a=Math.ceil(mu(s*r))),a<di)a=di;else if(s>=bd||a>Js)return null;var l=Math.pow(2,a),c=e.h*l,f=e.w*l,v=o.eleTextBiggerThanMin(t,l);if(!this.isVisible(t,v))return null;var h=u.get(t,a);if(h&&h.invalidated&&(h.invalidated=!1,h.texture.invalidatedWidth-=h.width),h)return h;var d;if(c<=uf?d=uf:c<=Xn?d=Xn:d=Math.ceil(c/Xn)*Xn,c>Fw||f>Nw)return null;var m=i.getTextureQueue(d),p=m[m.length-2],g=function(){return i.recycleTexture(d,f)||i.addTexture(d,f)};p||(p=m[m.length-1]),p||(p=g()),p.width-p.usedWidth<f&&(p=g());for(var y=function(I){return I&&I.scaledLabelShown===v},b=n&&n===Ea.dequeue,w=n&&n===Ea.highQuality,E=n&&n===Ea.downscale,C,x=a+1;x<=Js;x++){var R=u.get(t,x);if(R){C=R;break}}var S=C&&C.level===a+1?C:null,P=function(){p.context.drawImage(S.texture.canvas,S.x,0,S.width,S.height,p.usedWidth,0,f,c)};if(p.context.setTransform(1,0,0,1,0,0),p.context.clearRect(p.usedWidth,0,f,d),y(S))P();else if(y(C))if(w){for(var k=C.level;k>a;k--)S=i.getElement(t,e,r,k,Ea.downscale);P()}else return i.queueElement(t,C.level-1),C;else{var B;if(!b&&!w&&!E)for(var D=a-1;D>=di;D--){var A=u.get(t,D);if(A){B=A;break}}if(y(B))return i.queueElement(t,a),B;p.context.translate(p.usedWidth,0),p.context.scale(l,l),this.drawElement(p.context,t,e,v,!1),p.context.scale(1/l,1/l),p.context.translate(-p.usedWidth,0)}return h={x:p.usedWidth,texture:p,level:a,scale:l,width:f,height:c,scaledLabelShown:v},p.usedWidth+=Math.ceil(f+Iw),p.eleCaches.push(h),u.set(t,a,h),i.checkTextureFullness(p),h};it.invalidateElements=function(t){for(var e=0;e<t.length;e++)this.invalidateElement(t[e])};it.invalidateElement=function(t){var e=this,r=e.lookup,a=[],n=r.isInvalid(t);if(n){for(var i=di;i<=Js;i++){var o=r.getForCachedKey(t,i);o&&a.push(o)}var s=r.invalidate(t);if(s)for(var u=0;u<a.length;u++){var l=a[u],c=l.texture;c.invalidatedWidth+=l.width,l.invalidated=!0,e.checkTextureUtility(c)}e.removeFromQueue(t)}};it.checkTextureUtility=function(t){t.invalidatedWidth>=zw*t.width&&this.retireTexture(t)};it.checkTextureFullness=function(t){var e=this,r=e.getTextureQueue(t.height);t.usedWidth/t.width>Vw&&t.fullnessChecks>=qw?Pr(r,t):t.fullnessChecks++};it.retireTexture=function(t){var e=this,r=t.height,a=e.getTextureQueue(r),n=this.lookup;Pr(a,t),t.retired=!0;for(var i=t.eleCaches,o=0;o<i.length;o++){var s=i[o];n.deleteCache(s.key,s.level)}gu(i);var u=e.getRetiredTextureQueue(r);u.push(t)};it.addTexture=function(t,e){var r=this,a=r.getTextureQueue(t),n={};return a.push(n),n.eleCaches=[],n.height=t,n.width=Math.max(Ow,e),n.usedWidth=0,n.invalidatedWidth=0,n.fullnessChecks=0,n.canvas=r.renderer.makeOffscreenCanvas(n.width,n.height),n.context=n.canvas.getContext("2d"),n};it.recycleTexture=function(t,e){for(var r=this,a=r.getTextureQueue(t),n=r.getRetiredTextureQueue(t),i=0;i<n.length;i++){var o=n[i];if(o.width>=e)return o.retired=!1,o.usedWidth=0,o.invalidatedWidth=0,o.fullnessChecks=0,gu(o.eleCaches),o.context.setTransform(1,0,0,1,0,0),o.context.clearRect(0,0,o.width,o.height),Pr(n,o),a.push(o),o}};it.queueElement=function(t,e){var r=this,a=r.getElementQueue(),n=r.getElementKeyToQueue(),i=this.getKey(t),o=n[i];if(o)o.level=Math.max(o.level,e),o.eles.merge(t),o.reqs++,a.updateItem(o);else{var s={eles:t.spawn().merge(t),level:e,reqs:1,key:i};a.push(s),n[i]=s}};it.dequeue=function(t){for(var e=this,r=e.getElementQueue(),a=e.getElementKeyToQueue(),n=[],i=e.lookup,o=0;o<Hw&&r.size()>0;o++){var s=r.pop(),u=s.key,l=s.eles[0],c=i.hasCache(l,s.level);if(a[u]=null,c)continue;n.push(s);var f=e.getBoundingBox(l);e.getElement(l,f,t,s.level,Ea.dequeue)}return n};it.removeFromQueue=function(t){var e=this,r=e.getElementQueue(),a=e.getElementKeyToQueue(),n=this.getKey(t),i=a[n];i!=null&&(i.eles.length===1?(i.reqs=hu,r.updateItem(i),r.pop(),a[n]=null):i.eles.unmerge(t))};it.onDequeue=function(t){this.onDequeues.push(t)};it.offDequeue=function(t){Pr(this.onDequeues,t)};it.setupDequeueing=yd.setupDequeueing({deqRedrawThreshold:Uw,deqCost:_w,deqAvgCost:$w,deqNoDrawCost:Ww,deqFastCost:Gw,deq:function(e,r,a){return e.dequeue(r,a)},onDeqd:function(e,r){for(var a=0;a<e.onDequeues.length;a++){var n=e.onDequeues[a];n(r)}},shouldRedraw:function(e,r,a,n){for(var i=0;i<r.length;i++)for(var o=r[i].eles,s=0;s<o.length;s++){var u=o[s].boundingBox();if(bu(u,n))return!0}return!1},priority:function(e){return e.renderer.beforeRenderPriorities.eleTxrDeq}});var Yw=1,tn=-4,ki=2,Xw=3.99,Zw=50,Qw=50,jw=.15,Jw=.1,ex=.9,tx=.9,rx=1,lf=250,ax=4e3*4e3,cf=32767,nx=!0,wd=function(e){var r=this,a=r.renderer=e,n=a.cy;r.layersByLevel={},r.firstGet=!0,r.lastInvalidationTime=cr()-2*lf,r.skipping=!1,r.eleTxrDeqs=n.collection(),r.scheduleElementRefinement=Cn(function(){r.refineElementTextures(r.eleTxrDeqs),r.eleTxrDeqs.unmerge(r.eleTxrDeqs)},Qw),a.beforeRender(function(o,s){s-r.lastInvalidationTime<=lf?r.skipping=!0:r.skipping=!1},a.beforeRenderPriorities.lyrTxrSkip);var i=function(s,u){return u.reqs-s.reqs};r.layersQueue=new Tn(i),r.setupDequeueing()},pt=wd.prototype,ff=0,ix=Math.pow(2,53)-1;pt.makeLayer=function(t,e){var r=Math.pow(2,e),a=Math.ceil(t.w*r),n=Math.ceil(t.h*r),i=this.renderer.makeOffscreenCanvas(a,n),o={id:ff=++ff%ix,bb:t,level:e,width:a,height:n,canvas:i,context:i.getContext("2d"),eles:[],elesQueue:[],reqs:0},s=o.context,u=-o.bb.x1,l=-o.bb.y1;return s.scale(r,r),s.translate(u,l),o};pt.getLayers=function(t,e,r){var a=this,n=a.renderer,i=n.cy,o=i.zoom(),s=a.firstGet;if(a.firstGet=!1,r==null){if(r=Math.ceil(mu(o*e)),r<tn)r=tn;else if(o>=Xw||r>ki)return null}a.validateLayersElesOrdering(r,t);var u=a.layersByLevel,l=Math.pow(2,r),c=u[r]=u[r]||[],f,v=a.levelIsComplete(r,t),h,d=function(){var P=function(L){if(a.validateLayersElesOrdering(L,t),a.levelIsComplete(L,t))return h=u[L],!0},k=function(L){if(!h)for(var I=r+L;tn<=I&&I<=ki&&!P(I);I+=L);};k(1),k(-1);for(var B=c.length-1;B>=0;B--){var D=c[B];D.invalid&&Pr(c,D)}};if(!v)d();else return c;var m=function(){if(!f){f=Dt();for(var P=0;P<t.length;P++)pv(f,t[P].boundingBox())}return f},p=function(P){P=P||{};var k=P.after;m();var B=Math.ceil(f.w*l),D=Math.ceil(f.h*l);if(B>cf||D>cf)return null;var A=B*D;if(A>ax)return null;var L=a.makeLayer(f,r);if(k!=null){var I=c.indexOf(k)+1;c.splice(I,0,L)}else(P.insert===void 0||P.insert)&&c.unshift(L);return L};if(a.skipping&&!s)return null;for(var g=null,y=t.length/Yw,b=!s,w=0;w<t.length;w++){var E=t[w],C=E._private.rscratch,x=C.imgLayerCaches=C.imgLayerCaches||{},R=x[r];if(R){g=R;continue}if((!g||g.eles.length>=y||!iy(g.bb,E.boundingBox()))&&(g=p({insert:!0,after:g}),!g))return null;h||b?a.queueLayer(g,E):a.drawEleInLayer(g,E,r,e),g.eles.push(E),x[r]=g}return h||(b?null:c)};pt.getEleLevelForLayerLevel=function(t,e){return t};pt.drawEleInLayer=function(t,e,r,a){var n=this,i=this.renderer,o=t.context,s=e.boundingBox();s.w===0||s.h===0||!e.visible()||(r=n.getEleLevelForLayerLevel(r,a),i.setImgSmoothing(o,!1),i.drawCachedElement(o,e,null,null,r,nx),i.setImgSmoothing(o,!0))};pt.levelIsComplete=function(t,e){var r=this,a=r.layersByLevel[t];if(!a||a.length===0)return!1;for(var n=0,i=0;i<a.length;i++){var o=a[i];if(o.reqs>0||o.invalid)return!1;n+=o.eles.length}return n===e.length};pt.validateLayersElesOrdering=function(t,e){var r=this.layersByLevel[t];if(r)for(var a=0;a<r.length;a++){for(var n=r[a],i=-1,o=0;o<e.length;o++)if(n.eles[0]===e[o]){i=o;break}if(i<0){this.invalidateLayer(n);continue}for(var s=i,o=0;o<n.eles.length;o++)if(n.eles[o]!==e[s+o]){this.invalidateLayer(n);break}}};pt.updateElementsInLayers=function(t,e){for(var r=this,a=bn(t[0]),n=0;n<t.length;n++)for(var i=a?null:t[n],o=a?t[n]:t[n].ele,s=o._private.rscratch,u=s.imgLayerCaches=s.imgLayerCaches||{},l=tn;l<=ki;l++){var c=u[l];c&&(i&&r.getEleLevelForLayerLevel(c.level)!==i.level||e(c,o,i))}};pt.haveLayers=function(){for(var t=this,e=!1,r=tn;r<=ki;r++){var a=t.layersByLevel[r];if(a&&a.length>0){e=!0;break}}return e};pt.invalidateElements=function(t){var e=this;t.length!==0&&(e.lastInvalidationTime=cr(),!(t.length===0||!e.haveLayers())&&e.updateElementsInLayers(t,function(a,n,i){e.invalidateLayer(a)}))};pt.invalidateLayer=function(t){if(this.lastInvalidationTime=cr(),!t.invalid){var e=t.level,r=t.eles,a=this.layersByLevel[e];Pr(a,t),t.elesQueue=[],t.invalid=!0,t.replacement&&(t.replacement.invalid=!0);for(var n=0;n<r.length;n++){var i=r[n]._private.rscratch.imgLayerCaches;i&&(i[e]=null)}}};pt.refineElementTextures=function(t){var e=this;e.updateElementsInLayers(t,function(a,n,i){var o=a.replacement;if(o||(o=a.replacement=e.makeLayer(a.bb,a.level),o.replaces=a,o.eles=a.eles),!o.reqs)for(var s=0;s<o.eles.length;s++)e.queueLayer(o,o.eles[s])})};pt.enqueueElementRefinement=function(t){this.eleTxrDeqs.merge(t),this.scheduleElementRefinement()};pt.queueLayer=function(t,e){var r=this,a=r.layersQueue,n=t.elesQueue,i=n.hasId=n.hasId||{};if(!t.replacement){if(e){if(i[e.id()])return;n.push(e),i[e.id()]=!0}t.reqs?(t.reqs++,a.updateItem(t)):(t.reqs=1,a.push(t))}};pt.dequeue=function(t){for(var e=this,r=e.layersQueue,a=[],n=0;n<rx&&r.size()!==0;){var i=r.peek();if(i.replacement){r.pop();continue}if(i.replaces&&i!==i.replaces.replacement){r.pop();continue}if(i.invalid){r.pop();continue}var o=i.elesQueue.shift();o&&(e.drawEleInLayer(i,o,i.level,t),n++),a.length===0&&a.push(!0),i.elesQueue.length===0&&(r.pop(),i.reqs=0,i.replaces&&e.applyLayerReplacement(i),e.requestRedraw())}return a};pt.applyLayerReplacement=function(t){var e=this,r=e.layersByLevel[t.level],a=t.replaces,n=r.indexOf(a);if(!(n<0||a.invalid)){r[n]=t;for(var i=0;i<t.eles.length;i++){var o=t.eles[i]._private,s=o.imgLayerCaches=o.imgLayerCaches||{};s&&(s[t.level]=t)}e.requestRedraw()}};pt.requestRedraw=Cn(function(){var t=this.renderer;t.redrawHint("eles",!0),t.redrawHint("drag",!0),t.redraw()},100);pt.setupDequeueing=yd.setupDequeueing({deqRedrawThreshold:Zw,deqCost:jw,deqAvgCost:Jw,deqNoDrawCost:ex,deqFastCost:tx,deq:function(e,r){return e.dequeue(r)},onDeqd:pu,shouldRedraw:cv,priority:function(e){return e.renderer.beforeRenderPriorities.lyrTxrDeq}});var xd={},vf;function ox(t,e){for(var r=0;r<e.length;r++){var a=e[r];t.lineTo(a.x,a.y)}}function sx(t,e,r){for(var a,n=0;n<e.length;n++){var i=e[n];n===0&&(a=i),t.lineTo(i.x,i.y)}t.quadraticCurveTo(r.x,r.y,a.x,a.y)}function df(t,e,r){t.beginPath&&t.beginPath();for(var a=e,n=0;n<a.length;n++){var i=a[n];t.lineTo(i.x,i.y)}var o=r,s=r[0];t.moveTo(s.x,s.y);for(var n=1;n<o.length;n++){var i=o[n];t.lineTo(i.x,i.y)}t.closePath&&t.closePath()}function ux(t,e,r,a,n){t.beginPath&&t.beginPath(),t.arc(r,a,n,0,Math.PI*2,!1);var i=e,o=i[0];t.moveTo(o.x,o.y);for(var s=0;s<i.length;s++){var u=i[s];t.lineTo(u.x,u.y)}t.closePath&&t.closePath()}function lx(t,e,r,a){t.arc(e,r,a,0,Math.PI*2,!1)}xd.arrowShapeImpl=function(t){return(vf||(vf={polygon:ox,"triangle-backcurve":sx,"triangle-tee":df,"circle-triangle":ux,"triangle-cross":df,circle:lx}))[t]};var tr={};tr.drawElement=function(t,e,r,a,n,i){var o=this;e.isNode()?o.drawNode(t,e,r,a,n,i):o.drawEdge(t,e,r,a,n,i)};tr.drawElementOverlay=function(t,e){var r=this;e.isNode()?r.drawNodeOverlay(t,e):r.drawEdgeOverlay(t,e)};tr.drawElementUnderlay=function(t,e){var r=this;e.isNode()?r.drawNodeUnderlay(t,e):r.drawEdgeUnderlay(t,e)};tr.drawCachedElementPortion=function(t,e,r,a,n,i,o,s){var u=this,l=r.getBoundingBox(e);if(!(l.w===0||l.h===0)){var c=r.getElement(e,l,a,n,i);if(c!=null){var f=s(u,e);if(f===0)return;var v=o(u,e),h=l.x1,d=l.y1,m=l.w,p=l.h,g,y,b,w,E;if(v!==0){var C=r.getRotationPoint(e);b=C.x,w=C.y,t.translate(b,w),t.rotate(v),E=u.getImgSmoothing(t),E||u.setImgSmoothing(t,!0);var x=r.getRotationOffset(e);g=x.x,y=x.y}else g=h,y=d;var R;f!==1&&(R=t.globalAlpha,t.globalAlpha=R*f),t.drawImage(c.texture.canvas,c.x,0,c.width,c.height,g,y,m,p),f!==1&&(t.globalAlpha=R),v!==0&&(t.rotate(-v),t.translate(-b,-w),E||u.setImgSmoothing(t,!1))}else r.drawElement(t,e)}};var cx=function(){return 0},fx=function(e,r){return e.getTextAngle(r,null)},vx=function(e,r){return e.getTextAngle(r,"source")},dx=function(e,r){return e.getTextAngle(r,"target")},hx=function(e,r){return r.effectiveOpacity()},Rs=function(e,r){return r.pstyle("text-opacity").pfValue*r.effectiveOpacity()};tr.drawCachedElement=function(t,e,r,a,n,i){var o=this,s=o.data,u=s.eleTxrCache,l=s.lblTxrCache,c=s.slbTxrCache,f=s.tlbTxrCache,v=e.boundingBox(),h=i===!0?u.reasons.highQuality:null;if(!(v.w===0||v.h===0||!e.visible())&&(!a||bu(v,a))){var d=e.isEdge(),m=e.element()._private.rscratch.badLine;o.drawElementUnderlay(t,e),o.drawCachedElementPortion(t,e,u,r,n,h,cx,hx),(!d||!m)&&o.drawCachedElementPortion(t,e,l,r,n,h,fx,Rs),d&&!m&&(o.drawCachedElementPortion(t,e,c,r,n,h,vx,Rs),o.drawCachedElementPortion(t,e,f,r,n,h,dx,Rs)),o.drawElementOverlay(t,e)}};tr.drawElements=function(t,e){for(var r=this,a=0;a<e.length;a++){var n=e[a];r.drawElement(t,n)}};tr.drawCachedElements=function(t,e,r,a){for(var n=this,i=0;i<e.length;i++){var o=e[i];n.drawCachedElement(t,o,r,a)}};tr.drawCachedNodes=function(t,e,r,a){for(var n=this,i=0;i<e.length;i++){var o=e[i];o.isNode()&&n.drawCachedElement(t,o,r,a)}};tr.drawLayeredElements=function(t,e,r,a){var n=this,i=n.data.lyrTxrCache.getLayers(e,r);if(i)for(var o=0;o<i.length;o++){var s=i[o],u=s.bb;u.w===0||u.h===0||t.drawImage(s.canvas,u.x1,u.y1,u.w,u.h)}else n.drawCachedElements(t,e,r,a)};var yr={};yr.drawEdge=function(t,e,r){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,n=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,i=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,o=this,s=e._private.rscratch;if(!(i&&!e.visible())&&!(s.badLine||s.allpts==null||isNaN(s.allpts[0]))){var u;r&&(u=r,t.translate(-u.x1,-u.y1));var l=i?e.pstyle("opacity").value:1,c=i?e.pstyle("line-opacity").value:1,f=e.pstyle("curve-style").value,v=e.pstyle("line-style").value,h=e.pstyle("width").pfValue,d=e.pstyle("line-cap").value,m=e.pstyle("line-outline-width").value,p=e.pstyle("line-outline-color").value,g=l*c,y=l*c,b=function(){var L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:g;f==="straight-triangle"?(o.eleStrokeStyle(t,e,L),o.drawEdgeTrianglePath(e,t,s.allpts)):(t.lineWidth=h,t.lineCap=d,o.eleStrokeStyle(t,e,L),o.drawEdgePath(e,t,s.allpts,v),t.lineCap="butt")},w=function(){var L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:g;if(t.lineWidth=h+m,t.lineCap=d,m>0)o.colorStrokeStyle(t,p[0],p[1],p[2],L);else{t.lineCap="butt";return}f==="straight-triangle"?o.drawEdgeTrianglePath(e,t,s.allpts):(o.drawEdgePath(e,t,s.allpts,v),t.lineCap="butt")},E=function(){n&&o.drawEdgeOverlay(t,e)},C=function(){n&&o.drawEdgeUnderlay(t,e)},x=function(){var L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:y;o.drawArrowheads(t,e,L)},R=function(){o.drawElementText(t,e,null,a)};t.lineJoin="round";var S=e.pstyle("ghost").value==="yes";if(S){var P=e.pstyle("ghost-offset-x").pfValue,k=e.pstyle("ghost-offset-y").pfValue,B=e.pstyle("ghost-opacity").value,D=g*B;t.translate(P,k),b(D),x(D),t.translate(-P,-k)}else w();C(),b(),x(),E(),R(),r&&t.translate(u.x1,u.y1)}};var Ed=function(e){if(!["overlay","underlay"].includes(e))throw new Error("Invalid state");return function(r,a){if(a.visible()){var n=a.pstyle("".concat(e,"-opacity")).value;if(n!==0){var i=this,o=i.usePaths(),s=a._private.rscratch,u=a.pstyle("".concat(e,"-padding")).pfValue,l=2*u,c=a.pstyle("".concat(e,"-color")).value;r.lineWidth=l,s.edgeType==="self"&&!o?r.lineCap="butt":r.lineCap="round",i.colorStrokeStyle(r,c[0],c[1],c[2],n),i.drawEdgePath(a,r,s.allpts,"solid")}}}};yr.drawEdgeOverlay=Ed("overlay");yr.drawEdgeUnderlay=Ed("underlay");yr.drawEdgePath=function(t,e,r,a){var n=t._private.rscratch,i=e,o,s=!1,u=this.usePaths(),l=t.pstyle("line-dash-pattern").pfValue,c=t.pstyle("line-dash-offset").pfValue;if(u){var f=r.join("$"),v=n.pathCacheKey&&n.pathCacheKey===f;v?(o=e=n.pathCache,s=!0):(o=e=new Path2D,n.pathCacheKey=f,n.pathCache=o)}if(i.setLineDash)switch(a){case"dotted":i.setLineDash([1,1]);break;case"dashed":i.setLineDash(l),i.lineDashOffset=c;break;case"solid":i.setLineDash([]);break}if(!s&&!n.badLine)switch(e.beginPath&&e.beginPath(),e.moveTo(r[0],r[1]),n.edgeType){case"bezier":case"self":case"compound":case"multibezier":for(var h=2;h+3<r.length;h+=4)e.quadraticCurveTo(r[h],r[h+1],r[h+2],r[h+3]);break;case"straight":case"haystack":for(var d=2;d+1<r.length;d+=2)e.lineTo(r[d],r[d+1]);break;case"segments":if(n.isRound){var m=kt(n.roundCorners),p;try{for(m.s();!(p=m.n()).done;){var g=p.value;cd(e,g)}}catch(b){m.e(b)}finally{m.f()}e.lineTo(r[r.length-2],r[r.length-1])}else for(var y=2;y+1<r.length;y+=2)e.lineTo(r[y],r[y+1]);break}e=i,u?e.stroke(o):e.stroke(),e.setLineDash&&e.setLineDash([])};yr.drawEdgeTrianglePath=function(t,e,r){e.fillStyle=e.strokeStyle;for(var a=t.pstyle("width").pfValue,n=0;n+1<r.length;n+=2){var i=[r[n+2]-r[n],r[n+3]-r[n+1]],o=Math.sqrt(i[0]*i[0]+i[1]*i[1]),s=[i[1]/o,-i[0]/o],u=[s[0]*a/2,s[1]*a/2];e.beginPath(),e.moveTo(r[n]-u[0],r[n+1]-u[1]),e.lineTo(r[n]+u[0],r[n+1]+u[1]),e.lineTo(r[n+2],r[n+3]),e.closePath(),e.fill()}};yr.drawArrowheads=function(t,e,r){var a=e._private.rscratch,n=a.edgeType==="haystack";n||this.drawArrowhead(t,e,"source",a.arrowStartX,a.arrowStartY,a.srcArrowAngle,r),this.drawArrowhead(t,e,"mid-target",a.midX,a.midY,a.midtgtArrowAngle,r),this.drawArrowhead(t,e,"mid-source",a.midX,a.midY,a.midsrcArrowAngle,r),n||this.drawArrowhead(t,e,"target",a.arrowEndX,a.arrowEndY,a.tgtArrowAngle,r)};yr.drawArrowhead=function(t,e,r,a,n,i,o){if(!(isNaN(a)||a==null||isNaN(n)||n==null||isNaN(i)||i==null)){var s=this,u=e.pstyle(r+"-arrow-shape").value;if(u!=="none"){var l=e.pstyle(r+"-arrow-fill").value==="hollow"?"both":"filled",c=e.pstyle(r+"-arrow-fill").value,f=e.pstyle("width").pfValue,v=e.pstyle(r+"-arrow-width"),h=v.value==="match-line"?f:v.pfValue;v.units==="%"&&(h*=f);var d=e.pstyle("opacity").value;o===void 0&&(o=d);var m=t.globalCompositeOperation;(o!==1||c==="hollow")&&(t.globalCompositeOperation="destination-out",s.colorFillStyle(t,255,255,255,1),s.colorStrokeStyle(t,255,255,255,1),s.drawArrowShape(e,t,l,f,u,h,a,n,i),t.globalCompositeOperation=m);var p=e.pstyle(r+"-arrow-color").value;s.colorFillStyle(t,p[0],p[1],p[2],o),s.colorStrokeStyle(t,p[0],p[1],p[2],o),s.drawArrowShape(e,t,c,f,u,h,a,n,i)}}};yr.drawArrowShape=function(t,e,r,a,n,i,o,s,u){var l=this,c=this.usePaths()&&n!=="triangle-cross",f=!1,v,h=e,d={x:o,y:s},m=t.pstyle("arrow-scale").value,p=this.getArrowWidth(a,m),g=l.arrowShapes[n];if(c){var y=l.arrowPathCache=l.arrowPathCache||[],b=Xr(n),w=y[b];w!=null?(v=e=w,f=!0):(v=e=new Path2D,y[b]=v)}f||(e.beginPath&&e.beginPath(),c?g.draw(e,1,0,{x:0,y:0},1):g.draw(e,p,u,d,a),e.closePath&&e.closePath()),e=h,c&&(e.translate(o,s),e.rotate(u),e.scale(p,p)),(r==="filled"||r==="both")&&(c?e.fill(v):e.fill()),(r==="hollow"||r==="both")&&(e.lineWidth=i/(c?p:1),e.lineJoin="miter",c?e.stroke(v):e.stroke()),c&&(e.scale(1/p,1/p),e.rotate(-u),e.translate(-o,-s))};var Mu={};Mu.safeDrawImage=function(t,e,r,a,n,i,o,s,u,l){if(!(n<=0||i<=0||u<=0||l<=0))try{t.drawImage(e,r,a,n,i,o,s,u,l)}catch(c){Oe(c)}};Mu.drawInscribedImage=function(t,e,r,a,n){var i=this,o=r.position(),s=o.x,u=o.y,l=r.cy().style(),c=l.getIndexedStyle.bind(l),f=c(r,"background-fit","value",a),v=c(r,"background-repeat","value",a),h=r.width(),d=r.height(),m=r.padding()*2,p=h+(c(r,"background-width-relative-to","value",a)==="inner"?0:m),g=d+(c(r,"background-height-relative-to","value",a)==="inner"?0:m),y=r._private.rscratch,b=c(r,"background-clip","value",a),w=b==="node",E=c(r,"background-image-opacity","value",a)*n,C=c(r,"background-image-smoothing","value",a),x=r.pstyle("corner-radius").value;x!=="auto"&&(x=r.pstyle("corner-radius").pfValue);var R=e.width||e.cachedW,S=e.height||e.cachedH;(R==null||S==null)&&(document.body.appendChild(e),R=e.cachedW=e.width||e.offsetWidth,S=e.cachedH=e.height||e.offsetHeight,document.body.removeChild(e));var P=R,k=S;if(c(r,"background-width","value",a)!=="auto"&&(c(r,"background-width","units",a)==="%"?P=c(r,"background-width","pfValue",a)*p:P=c(r,"background-width","pfValue",a)),c(r,"background-height","value",a)!=="auto"&&(c(r,"background-height","units",a)==="%"?k=c(r,"background-height","pfValue",a)*g:k=c(r,"background-height","pfValue",a)),!(P===0||k===0)){if(f==="contain"){var B=Math.min(p/P,g/k);P*=B,k*=B}else if(f==="cover"){var B=Math.max(p/P,g/k);P*=B,k*=B}var D=s-p/2,A=c(r,"background-position-x","units",a),L=c(r,"background-position-x","pfValue",a);A==="%"?D+=(p-P)*L:D+=L;var I=c(r,"background-offset-x","units",a),M=c(r,"background-offset-x","pfValue",a);I==="%"?D+=(p-P)*M:D+=M;var O=u-g/2,V=c(r,"background-position-y","units",a),W=c(r,"background-position-y","pfValue",a);V==="%"?O+=(g-k)*W:O+=W;var N=c(r,"background-offset-y","units",a),z=c(r,"background-offset-y","pfValue",a);N==="%"?O+=(g-k)*z:O+=z,y.pathCache&&(D-=s,O-=u,s=0,u=0);var X=t.globalAlpha;t.globalAlpha=E;var j=i.getImgSmoothing(t),J=!1;if(C==="no"&&j?(i.setImgSmoothing(t,!1),J=!0):C==="yes"&&!j&&(i.setImgSmoothing(t,!0),J=!0),v==="no-repeat")w&&(t.save(),y.pathCache?t.clip(y.pathCache):(i.nodeShapes[i.getNodeShape(r)].draw(t,s,u,p,g,x,y),t.clip())),i.safeDrawImage(t,e,0,0,R,S,D,O,P,k),w&&t.restore();else{var G=t.createPattern(e,v);t.fillStyle=G,i.nodeShapes[i.getNodeShape(r)].draw(t,s,u,p,g,x,y),t.translate(D,O),t.fill(),t.translate(-D,-O)}t.globalAlpha=X,J&&i.setImgSmoothing(t,j)}};var na={};na.eleTextBiggerThanMin=function(t,e){if(!e){var r=t.cy().zoom(),a=this.getPixelRatio(),n=Math.ceil(mu(r*a));e=Math.pow(2,n)}var i=t.pstyle("font-size").pfValue*e,o=t.pstyle("min-zoomed-font-size").pfValue;return!(i<o)};na.drawElementText=function(t,e,r,a,n){var i=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,o=this;if(a==null){if(i&&!o.eleTextBiggerThanMin(e))return}else if(a===!1)return;if(e.isNode()){var s=e.pstyle("label");if(!s||!s.value)return;var u=o.getLabelJustification(e);t.textAlign=u,t.textBaseline="bottom"}else{var l=e.element()._private.rscratch.badLine,c=e.pstyle("label"),f=e.pstyle("source-label"),v=e.pstyle("target-label");if(l||(!c||!c.value)&&(!f||!f.value)&&(!v||!v.value))return;t.textAlign="center",t.textBaseline="bottom"}var h=!r,d;r&&(d=r,t.translate(-d.x1,-d.y1)),n==null?(o.drawText(t,e,null,h,i),e.isEdge()&&(o.drawText(t,e,"source",h,i),o.drawText(t,e,"target",h,i))):o.drawText(t,e,n,h,i),r&&t.translate(d.x1,d.y1)};na.getFontCache=function(t){var e;this.fontCaches=this.fontCaches||[];for(var r=0;r<this.fontCaches.length;r++)if(e=this.fontCaches[r],e.context===t)return e;return e={context:t},this.fontCaches.push(e),e};na.setupTextStyle=function(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,a=e.pstyle("font-style").strValue,n=e.pstyle("font-size").pfValue+"px",i=e.pstyle("font-family").strValue,o=e.pstyle("font-weight").strValue,s=r?e.effectiveOpacity()*e.pstyle("text-opacity").value:1,u=e.pstyle("text-outline-opacity").value*s,l=e.pstyle("color").value,c=e.pstyle("text-outline-color").value;t.font=a+" "+o+" "+n+" "+i,t.lineJoin="round",this.colorFillStyle(t,l[0],l[1],l[2],s),this.colorStrokeStyle(t,c[0],c[1],c[2],u)};function Ps(t,e,r,a,n){var i=arguments.length>5&&arguments[5]!==void 0?arguments[5]:5,o=arguments.length>6?arguments[6]:void 0;t.beginPath(),t.moveTo(e+i,r),t.lineTo(e+a-i,r),t.quadraticCurveTo(e+a,r,e+a,r+i),t.lineTo(e+a,r+n-i),t.quadraticCurveTo(e+a,r+n,e+a-i,r+n),t.lineTo(e+i,r+n),t.quadraticCurveTo(e,r+n,e,r+n-i),t.lineTo(e,r+i),t.quadraticCurveTo(e,r,e+i,r),t.closePath(),o?t.stroke():t.fill()}na.getTextAngle=function(t,e){var r,a=t._private,n=a.rscratch,i=e?e+"-":"",o=t.pstyle(i+"text-rotation");if(o.strValue==="autorotate"){var s=Rt(n,"labelAngle",e);r=t.isEdge()?s:0}else o.strValue==="none"?r=0:r=o.pfValue;return r};na.drawText=function(t,e,r){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,n=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,i=e._private,o=i.rscratch,s=n?e.effectiveOpacity():1;if(!(n&&(s===0||e.pstyle("text-opacity").value===0))){r==="main"&&(r=null);var u=Rt(o,"labelX",r),l=Rt(o,"labelY",r),c,f,v=this.getLabelText(e,r);if(v!=null&&v!==""&&!isNaN(u)&&!isNaN(l)){this.setupTextStyle(t,e,n);var h=r?r+"-":"",d=Rt(o,"labelWidth",r),m=Rt(o,"labelHeight",r),p=e.pstyle(h+"text-margin-x").pfValue,g=e.pstyle(h+"text-margin-y").pfValue,y=e.isEdge(),b=e.pstyle("text-halign").value,w=e.pstyle("text-valign").value;y&&(b="center",w="center"),u+=p,l+=g;var E;switch(a?E=this.getTextAngle(e,r):E=0,E!==0&&(c=u,f=l,t.translate(c,f),t.rotate(E),u=0,l=0),w){case"top":break;case"center":l+=m/2;break;case"bottom":l+=m;break}var C=e.pstyle("text-background-opacity").value,x=e.pstyle("text-border-opacity").value,R=e.pstyle("text-border-width").pfValue,S=e.pstyle("text-background-padding").pfValue,P=e.pstyle("text-background-shape").strValue,k=P.indexOf("round")===0,B=2;if(C>0||R>0&&x>0){var D=u-S;switch(b){case"left":D-=d;break;case"center":D-=d/2;break}var A=l-m-S,L=d+2*S,I=m+2*S;if(C>0){var M=t.fillStyle,O=e.pstyle("text-background-color").value;t.fillStyle="rgba("+O[0]+","+O[1]+","+O[2]+","+C*s+")",k?Ps(t,D,A,L,I,B):t.fillRect(D,A,L,I),t.fillStyle=M}if(R>0&&x>0){var V=t.strokeStyle,W=t.lineWidth,N=e.pstyle("text-border-color").value,z=e.pstyle("text-border-style").value;if(t.strokeStyle="rgba("+N[0]+","+N[1]+","+N[2]+","+x*s+")",t.lineWidth=R,t.setLineDash)switch(z){case"dotted":t.setLineDash([1,1]);break;case"dashed":t.setLineDash([4,2]);break;case"double":t.lineWidth=R/4,t.setLineDash([]);break;case"solid":t.setLineDash([]);break}if(k?Ps(t,D,A,L,I,B,"stroke"):t.strokeRect(D,A,L,I),z==="double"){var X=R/2;k?Ps(t,D+X,A+X,L-X*2,I-X*2,B,"stroke"):t.strokeRect(D+X,A+X,L-X*2,I-X*2)}t.setLineDash&&t.setLineDash([]),t.lineWidth=W,t.strokeStyle=V}}var j=2*e.pstyle("text-outline-width").pfValue;if(j>0&&(t.lineWidth=j),e.pstyle("text-wrap").value==="wrap"){var J=Rt(o,"labelWrapCachedLines",r),G=Rt(o,"labelLineHeight",r),Z=d/2,ae=this.getLabelJustification(e);switch(ae==="auto"||(b==="left"?ae==="left"?u+=-d:ae==="center"&&(u+=-Z):b==="center"?ae==="left"?u+=-Z:ae==="right"&&(u+=Z):b==="right"&&(ae==="center"?u+=Z:ae==="right"&&(u+=d))),w){case"top":l-=(J.length-1)*G;break;case"center":case"bottom":l-=(J.length-1)*G;break}for(var Q=0;Q<J.length;Q++)j>0&&t.strokeText(J[Q],u,l),t.fillText(J[Q],u,l),l+=G}else j>0&&t.strokeText(v,u,l),t.fillText(v,u,l);E!==0&&(t.rotate(-E),t.translate(-c,-f))}}};var Or={};Or.drawNode=function(t,e,r){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,n=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,i=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,o=this,s,u,l=e._private,c=l.rscratch,f=e.position();if(!(!ie(f.x)||!ie(f.y))&&!(i&&!e.visible())){var v=i?e.effectiveOpacity():1,h=o.usePaths(),d,m=!1,p=e.padding();s=e.width()+2*p,u=e.height()+2*p;var g;r&&(g=r,t.translate(-g.x1,-g.y1));for(var y=e.pstyle("background-image"),b=y.value,w=new Array(b.length),E=new Array(b.length),C=0,x=0;x<b.length;x++){var R=b[x],S=w[x]=R!=null&&R!=="none";if(S){var P=e.cy().style().getIndexedStyle(e,"background-image-crossorigin","value",x);C++,E[x]=o.getCachedImage(R,P,function(){l.backgroundTimestamp=Date.now(),e.emitAndNotify("background")})}}var k=e.pstyle("background-blacken").value,B=e.pstyle("border-width").pfValue,D=e.pstyle("background-opacity").value*v,A=e.pstyle("border-color").value,L=e.pstyle("border-style").value,I=e.pstyle("border-join").value,M=e.pstyle("border-cap").value,O=e.pstyle("border-position").value,V=e.pstyle("border-dash-pattern").pfValue,W=e.pstyle("border-dash-offset").pfValue,N=e.pstyle("border-opacity").value*v,z=e.pstyle("outline-width").pfValue,X=e.pstyle("outline-color").value,j=e.pstyle("outline-style").value,J=e.pstyle("outline-opacity").value*v,G=e.pstyle("outline-offset").value,Z=e.pstyle("corner-radius").value;Z!=="auto"&&(Z=e.pstyle("corner-radius").pfValue);var ae=function(){var fe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:D;o.eleFillStyle(t,e,fe)},Q=function(){var fe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:N;o.colorStrokeStyle(t,A[0],A[1],A[2],fe)},F=function(){var fe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:J;o.colorStrokeStyle(t,X[0],X[1],X[2],fe)},q=function(fe,ee,T,$){var H=o.nodePathCache=o.nodePathCache||[],K=lv(T==="polygon"?T+","+$.join(","):T,""+ee,""+fe,""+Z),Y=H[K],ce,te=!1;return Y!=null?(ce=Y,te=!0,c.pathCache=ce):(ce=new Path2D,H[K]=c.pathCache=ce),{path:ce,cacheHit:te}},U=e.pstyle("shape").strValue,re=e.pstyle("shape-polygon-points").pfValue;if(h){t.translate(f.x,f.y);var oe=q(s,u,U,re);d=oe.path,m=oe.cacheHit}var xe=function(){if(!m){var fe=f;h&&(fe={x:0,y:0}),o.nodeShapes[o.getNodeShape(e)].draw(d||t,fe.x,fe.y,s,u,Z,c)}h?t.fill(d):t.fill()},We=function(){for(var fe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:v,ee=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,T=l.backgrounding,$=0,H=0;H<E.length;H++){var K=e.cy().style().getIndexedStyle(e,"background-image-containment","value",H);if(ee&&K==="over"||!ee&&K==="inside"){$++;continue}w[H]&&E[H].complete&&!E[H].error&&($++,o.drawInscribedImage(t,E[H],e,H,fe))}l.backgrounding=$!==C,T!==l.backgrounding&&e.updateStyle(!1)},Ne=function(){var fe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,ee=arguments.length>1&&arguments[1]!==void 0?arguments[1]:v;o.hasPie(e)&&(o.drawPie(t,e,ee),fe&&(h||o.nodeShapes[o.getNodeShape(e)].draw(t,f.x,f.y,s,u,Z,c)))},ue=function(){var fe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,ee=arguments.length>1&&arguments[1]!==void 0?arguments[1]:v;o.hasStripe(e)&&(t.save(),h?t.clip(c.pathCache):(o.nodeShapes[o.getNodeShape(e)].draw(t,f.x,f.y,s,u,Z,c),t.clip()),o.drawStripe(t,e,ee),t.restore(),fe&&(h||o.nodeShapes[o.getNodeShape(e)].draw(t,f.x,f.y,s,u,Z,c)))},le=function(){var fe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:v,ee=(k>0?k:-k)*fe,T=k>0?0:255;k!==0&&(o.colorFillStyle(t,T,T,T,ee),h?t.fill(d):t.fill())},he=function(){if(B>0){if(t.lineWidth=B,t.lineCap=M,t.lineJoin=I,t.setLineDash)switch(L){case"dotted":t.setLineDash([1,1]);break;case"dashed":t.setLineDash(V),t.lineDashOffset=W;break;case"solid":case"double":t.setLineDash([]);break}if(O!=="center"){if(t.save(),t.lineWidth*=2,O==="inside")h?t.clip(d):t.clip();else{var fe=new Path2D;fe.rect(-s/2-B,-u/2-B,s+2*B,u+2*B),fe.addPath(d),t.clip(fe,"evenodd")}h?t.stroke(d):t.stroke(),t.restore()}else h?t.stroke(d):t.stroke();if(L==="double"){t.lineWidth=B/3;var ee=t.globalCompositeOperation;t.globalCompositeOperation="destination-out",h?t.stroke(d):t.stroke(),t.globalCompositeOperation=ee}t.setLineDash&&t.setLineDash([])}},me=function(){if(z>0){if(t.lineWidth=z,t.lineCap="butt",t.setLineDash)switch(j){case"dotted":t.setLineDash([1,1]);break;case"dashed":t.setLineDash([4,2]);break;case"solid":case"double":t.setLineDash([]);break}var fe=f;h&&(fe={x:0,y:0});var ee=o.getNodeShape(e),T=B;O==="inside"&&(T=0),O==="outside"&&(T*=2);var $=(s+T+(z+G))/s,H=(u+T+(z+G))/u,K=s*$,Y=u*H,ce=o.nodeShapes[ee].points,te;if(h){var ve=q(K,Y,ee,ce);te=ve.path}if(ee==="ellipse")o.drawEllipsePath(te||t,fe.x,fe.y,K,Y);else if(["round-diamond","round-heptagon","round-hexagon","round-octagon","round-pentagon","round-polygon","round-triangle","round-tag"].includes(ee)){var Te=0,Pe=0,ye=0;ee==="round-diamond"?Te=(T+G+z)*1.4:ee==="round-heptagon"?(Te=(T+G+z)*1.075,ye=-(T/2+G+z)/35):ee==="round-hexagon"?Te=(T+G+z)*1.12:ee==="round-pentagon"?(Te=(T+G+z)*1.13,ye=-(T/2+G+z)/15):ee==="round-tag"?(Te=(T+G+z)*1.12,Pe=(T/2+z+G)*.07):ee==="round-triangle"&&(Te=(T+G+z)*(Math.PI/2),ye=-(T+G/2+z)/Math.PI),Te!==0&&($=(s+Te)/s,K=s*$,["round-hexagon","round-tag"].includes(ee)||(H=(u+Te)/u,Y=u*H)),Z=Z==="auto"?yv(K,Y):Z;for(var Se=K/2,we=Y/2,Ce=Z+(T+z+G)/2,Fe=new Array(ce.length/2),je=new Array(ce.length/2),ct=0;ct<ce.length/2;ct++)Fe[ct]={x:fe.x+Pe+Se*ce[ct*2],y:fe.y+ye+we*ce[ct*2+1]};var ot,Ze,ft,et,Ct=Fe.length;for(Ze=Fe[Ct-1],ot=0;ot<Ct;ot++)ft=Fe[ot%Ct],et=Fe[(ot+1)%Ct],je[ot]=Au(Ze,ft,et,Ce),Ze=ft,ft=et;o.drawRoundPolygonPath(te||t,fe.x+Pe,fe.y+ye,s*$,u*H,ce,je)}else if(["roundrectangle","round-rectangle"].includes(ee))Z=Z==="auto"?kr(K,Y):Z,o.drawRoundRectanglePath(te||t,fe.x,fe.y,K,Y,Z+(T+z+G)/2);else if(["cutrectangle","cut-rectangle"].includes(ee))Z=Z==="auto"?wu():Z,o.drawCutRectanglePath(te||t,fe.x,fe.y,K,Y,null,Z+(T+z+G)/4);else if(["bottomroundrectangle","bottom-round-rectangle"].includes(ee))Z=Z==="auto"?kr(K,Y):Z,o.drawBottomRoundRectanglePath(te||t,fe.x,fe.y,K,Y,Z+(T+z+G)/2);else if(ee==="barrel")o.drawBarrelPath(te||t,fe.x,fe.y,K,Y);else if(ee.startsWith("polygon")||["rhomboid","right-rhomboid","round-tag","tag","vee"].includes(ee)){var Gt=(T+z+G)/s;ce=xi(Ei(ce,Gt)),o.drawPolygonPath(te||t,fe.x,fe.y,s,u,ce)}else{var br=(T+z+G)/s;ce=xi(Ei(ce,-br)),o.drawPolygonPath(te||t,fe.x,fe.y,s,u,ce)}if(h?t.stroke(te):t.stroke(),j==="double"){t.lineWidth=T/3;var rr=t.globalCompositeOperation;t.globalCompositeOperation="destination-out",h?t.stroke(te):t.stroke(),t.globalCompositeOperation=rr}t.setLineDash&&t.setLineDash([])}},pe=function(){n&&o.drawNodeOverlay(t,e,f,s,u)},be=function(){n&&o.drawNodeUnderlay(t,e,f,s,u)},Ee=function(){o.drawElementText(t,e,null,a)},ke=e.pstyle("ghost").value==="yes";if(ke){var Ve=e.pstyle("ghost-offset-x").pfValue,Ye=e.pstyle("ghost-offset-y").pfValue,Le=e.pstyle("ghost-opacity").value,Qe=Le*v;t.translate(Ve,Ye),F(),me(),ae(Le*D),xe(),We(Qe,!0),Q(Le*N),he(),Ne(k!==0||B!==0),ue(k!==0||B!==0),We(Qe,!1),le(Qe),t.translate(-Ve,-Ye)}h&&t.translate(-f.x,-f.y),be(),h&&t.translate(f.x,f.y),F(),me(),ae(),xe(),We(v,!0),Q(),he(),Ne(k!==0||B!==0),ue(k!==0||B!==0),We(v,!1),le(),h&&t.translate(-f.x,-f.y),Ee(),pe(),r&&t.translate(g.x1,g.y1)}};var Cd=function(e){if(!["overlay","underlay"].includes(e))throw new Error("Invalid state");return function(r,a,n,i,o){var s=this;if(a.visible()){var u=a.pstyle("".concat(e,"-padding")).pfValue,l=a.pstyle("".concat(e,"-opacity")).value,c=a.pstyle("".concat(e,"-color")).value,f=a.pstyle("".concat(e,"-shape")).value,v=a.pstyle("".concat(e,"-corner-radius")).value;if(l>0){if(n=n||a.position(),i==null||o==null){var h=a.padding();i=a.width()+2*h,o=a.height()+2*h}s.colorFillStyle(r,c[0],c[1],c[2],l),s.nodeShapes[f].draw(r,n.x,n.y,i+u*2,o+u*2,v),r.fill()}}}};Or.drawNodeOverlay=Cd("overlay");Or.drawNodeUnderlay=Cd("underlay");Or.hasPie=function(t){return t=t[0],t._private.hasPie};Or.hasStripe=function(t){return t=t[0],t._private.hasStripe};Or.drawPie=function(t,e,r,a){e=e[0],a=a||e.position();var n=e.cy().style(),i=e.pstyle("pie-size"),o=e.pstyle("pie-hole"),s=e.pstyle("pie-start-angle").pfValue,u=a.x,l=a.y,c=e.width(),f=e.height(),v=Math.min(c,f)/2,h,d=0,m=this.usePaths();if(m&&(u=0,l=0),i.units==="%"?v=v*i.pfValue:i.pfValue!==void 0&&(v=i.pfValue/2),o.units==="%"?h=v*o.pfValue:o.pfValue!==void 0&&(h=o.pfValue/2),!(h>=v))for(var p=1;p<=n.pieBackgroundN;p++){var g=e.pstyle("pie-"+p+"-background-size").value,y=e.pstyle("pie-"+p+"-background-color").value,b=e.pstyle("pie-"+p+"-background-opacity").value*r,w=g/100;w+d>1&&(w=1-d);var E=1.5*Math.PI+2*Math.PI*d;E+=s;var C=2*Math.PI*w,x=E+C;g===0||d>=1||d+w>1||(h===0?(t.beginPath(),t.moveTo(u,l),t.arc(u,l,v,E,x),t.closePath()):(t.beginPath(),t.arc(u,l,v,E,x),t.arc(u,l,h,x,E,!0),t.closePath()),this.colorFillStyle(t,y[0],y[1],y[2],b),t.fill(),d+=w)}};Or.drawStripe=function(t,e,r,a){e=e[0],a=a||e.position();var n=e.cy().style(),i=a.x,o=a.y,s=e.width(),u=e.height(),l=0,c=this.usePaths();t.save();var f=e.pstyle("stripe-direction").value,v=e.pstyle("stripe-size");switch(f){case"vertical":break;case"righward":t.rotate(-Math.PI/2);break}var h=s,d=u;v.units==="%"?(h=h*v.pfValue,d=d*v.pfValue):v.pfValue!==void 0&&(h=v.pfValue,d=v.pfValue),c&&(i=0,o=0),o-=h/2,i-=d/2;for(var m=1;m<=n.stripeBackgroundN;m++){var p=e.pstyle("stripe-"+m+"-background-size").value,g=e.pstyle("stripe-"+m+"-background-color").value,y=e.pstyle("stripe-"+m+"-background-opacity").value*r,b=p/100;b+l>1&&(b=1-l),!(p===0||l>=1||l+b>1)&&(t.beginPath(),t.rect(i,o+d*l,h,d*b),t.closePath(),this.colorFillStyle(t,g[0],g[1],g[2],y),t.fill(),l+=b)}t.restore()};var Et={},px=100;Et.getPixelRatio=function(){var t=this.data.contexts[0];if(this.forcedPixelRatio!=null)return this.forcedPixelRatio;var e=this.cy.window(),r=t.backingStorePixelRatio||t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1;return(e.devicePixelRatio||1)/r};Et.paintCache=function(t){for(var e=this.paintCaches=this.paintCaches||[],r=!0,a,n=0;n<e.length;n++)if(a=e[n],a.context===t){r=!1;break}return r&&(a={context:t},e.push(a)),a};Et.createGradientStyleFor=function(t,e,r,a,n){var i,o=this.usePaths(),s=r.pstyle(e+"-gradient-stop-colors").value,u=r.pstyle(e+"-gradient-stop-positions").pfValue;if(a==="radial-gradient")if(r.isEdge()){var l=r.sourceEndpoint(),c=r.targetEndpoint(),f=r.midpoint(),v=Zr(l,f),h=Zr(c,f);i=t.createRadialGradient(f.x,f.y,0,f.x,f.y,Math.max(v,h))}else{var d=o?{x:0,y:0}:r.position(),m=r.paddedWidth(),p=r.paddedHeight();i=t.createRadialGradient(d.x,d.y,0,d.x,d.y,Math.max(m,p))}else if(r.isEdge()){var g=r.sourceEndpoint(),y=r.targetEndpoint();i=t.createLinearGradient(g.x,g.y,y.x,y.y)}else{var b=o?{x:0,y:0}:r.position(),w=r.paddedWidth(),E=r.paddedHeight(),C=w/2,x=E/2,R=r.pstyle("background-gradient-direction").value;switch(R){case"to-bottom":i=t.createLinearGradient(b.x,b.y-x,b.x,b.y+x);break;case"to-top":i=t.createLinearGradient(b.x,b.y+x,b.x,b.y-x);break;case"to-left":i=t.createLinearGradient(b.x+C,b.y,b.x-C,b.y);break;case"to-right":i=t.createLinearGradient(b.x-C,b.y,b.x+C,b.y);break;case"to-bottom-right":case"to-right-bottom":i=t.createLinearGradient(b.x-C,b.y-x,b.x+C,b.y+x);break;case"to-top-right":case"to-right-top":i=t.createLinearGradient(b.x-C,b.y+x,b.x+C,b.y-x);break;case"to-bottom-left":case"to-left-bottom":i=t.createLinearGradient(b.x+C,b.y-x,b.x-C,b.y+x);break;case"to-top-left":case"to-left-top":i=t.createLinearGradient(b.x+C,b.y+x,b.x-C,b.y-x);break}}if(!i)return null;for(var S=u.length===s.length,P=s.length,k=0;k<P;k++)i.addColorStop(S?u[k]:k/(P-1),"rgba("+s[k][0]+","+s[k][1]+","+s[k][2]+","+n+")");return i};Et.gradientFillStyle=function(t,e,r,a){var n=this.createGradientStyleFor(t,"background",e,r,a);if(!n)return null;t.fillStyle=n};Et.colorFillStyle=function(t,e,r,a,n){t.fillStyle="rgba("+e+","+r+","+a+","+n+")"};Et.eleFillStyle=function(t,e,r){var a=e.pstyle("background-fill").value;if(a==="linear-gradient"||a==="radial-gradient")this.gradientFillStyle(t,e,a,r);else{var n=e.pstyle("background-color").value;this.colorFillStyle(t,n[0],n[1],n[2],r)}};Et.gradientStrokeStyle=function(t,e,r,a){var n=this.createGradientStyleFor(t,"line",e,r,a);if(!n)return null;t.strokeStyle=n};Et.colorStrokeStyle=function(t,e,r,a,n){t.strokeStyle="rgba("+e+","+r+","+a+","+n+")"};Et.eleStrokeStyle=function(t,e,r){var a=e.pstyle("line-fill").value;if(a==="linear-gradient"||a==="radial-gradient")this.gradientStrokeStyle(t,e,a,r);else{var n=e.pstyle("line-color").value;this.colorStrokeStyle(t,n[0],n[1],n[2],r)}};Et.matchCanvasSize=function(t){var e=this,r=e.data,a=e.findContainerClientCoords(),n=a[2],i=a[3],o=e.getPixelRatio(),s=e.motionBlurPxRatio;(t===e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_NODE]||t===e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_DRAG])&&(o=s);var u=n*o,l=i*o,c;if(!(u===e.canvasWidth&&l===e.canvasHeight)){e.fontCaches=null;var f=r.canvasContainer;f.style.width=n+"px",f.style.height=i+"px";for(var v=0;v<e.CANVAS_LAYERS;v++)c=r.canvases[v],c.width=u,c.height=l,c.style.width=n+"px",c.style.height=i+"px";for(var v=0;v<e.BUFFER_COUNT;v++)c=r.bufferCanvases[v],c.width=u,c.height=l,c.style.width=n+"px",c.style.height=i+"px";e.textureMult=1,o<=1&&(c=r.bufferCanvases[e.TEXTURE_BUFFER],e.textureMult=2,c.width=u*e.textureMult,c.height=l*e.textureMult),e.canvasWidth=u,e.canvasHeight=l,e.pixelRatio=o}};Et.renderTo=function(t,e,r,a){this.render({forcedContext:t,forcedZoom:e,forcedPan:r,drawAllLayers:!0,forcedPxRatio:a})};Et.clearCanvas=function(){var t=this,e=t.data;function r(a){a.clearRect(0,0,t.canvasWidth,t.canvasHeight)}r(e.contexts[t.NODE]),r(e.contexts[t.DRAG])};Et.render=function(t){var e=this;t=t||dv();var r=e.cy,a=t.forcedContext,n=t.drawAllLayers,i=t.drawOnlyNodeLayer,o=t.forcedZoom,s=t.forcedPan,u=t.forcedPxRatio===void 0?this.getPixelRatio():t.forcedPxRatio,l=e.data,c=l.canvasNeedsRedraw,f=e.textureOnViewport&&!a&&(e.pinching||e.hoverData.dragging||e.swipePanning||e.data.wheelZooming),v=t.motionBlur!==void 0?t.motionBlur:e.motionBlur,h=e.motionBlurPxRatio,d=r.hasCompoundNodes(),m=e.hoverData.draggingEles,p=!!(e.hoverData.selecting||e.touchData.selecting);v=v&&!a&&e.motionBlurEnabled&&!p;var g=v;a||(e.prevPxRatio!==u&&(e.invalidateContainerClientCoordsCache(),e.matchCanvasSize(e.container),e.redrawHint("eles",!0),e.redrawHint("drag",!0)),e.prevPxRatio=u),!a&&e.motionBlurTimeout&&clearTimeout(e.motionBlurTimeout),v&&(e.mbFrames==null&&(e.mbFrames=0),e.mbFrames++,e.mbFrames<3&&(g=!1),e.mbFrames>e.minMbLowQualFrames&&(e.motionBlurPxRatio=e.mbPxRBlurry)),e.clearingMotionBlur&&(e.motionBlurPxRatio=1),e.textureDrawLastFrame&&!f&&(c[e.NODE]=!0,c[e.SELECT_BOX]=!0);var y=r.style(),b=r.zoom(),w=o!==void 0?o:b,E=r.pan(),C={x:E.x,y:E.y},x={zoom:b,pan:{x:E.x,y:E.y}},R=e.prevViewport,S=R===void 0||x.zoom!==R.zoom||x.pan.x!==R.pan.x||x.pan.y!==R.pan.y;!S&&!(m&&!d)&&(e.motionBlurPxRatio=1),s&&(C=s),w*=u,C.x*=u,C.y*=u;var P=e.getCachedZSortedEles();function k(Q,F,q,U,re){var oe=Q.globalCompositeOperation;Q.globalCompositeOperation="destination-out",e.colorFillStyle(Q,255,255,255,e.motionBlurTransparency),Q.fillRect(F,q,U,re),Q.globalCompositeOperation=oe}function B(Q,F){var q,U,re,oe;!e.clearingMotionBlur&&(Q===l.bufferContexts[e.MOTIONBLUR_BUFFER_NODE]||Q===l.bufferContexts[e.MOTIONBLUR_BUFFER_DRAG])?(q={x:E.x*h,y:E.y*h},U=b*h,re=e.canvasWidth*h,oe=e.canvasHeight*h):(q=C,U=w,re=e.canvasWidth,oe=e.canvasHeight),Q.setTransform(1,0,0,1,0,0),F==="motionBlur"?k(Q,0,0,re,oe):!a&&(F===void 0||F)&&Q.clearRect(0,0,re,oe),n||(Q.translate(q.x,q.y),Q.scale(U,U)),s&&Q.translate(s.x,s.y),o&&Q.scale(o,o)}if(f||(e.textureDrawLastFrame=!1),f){if(e.textureDrawLastFrame=!0,!e.textureCache){e.textureCache={},e.textureCache.bb=r.mutableElements().boundingBox(),e.textureCache.texture=e.data.bufferCanvases[e.TEXTURE_BUFFER];var D=e.data.bufferContexts[e.TEXTURE_BUFFER];D.setTransform(1,0,0,1,0,0),D.clearRect(0,0,e.canvasWidth*e.textureMult,e.canvasHeight*e.textureMult),e.render({forcedContext:D,drawOnlyNodeLayer:!0,forcedPxRatio:u*e.textureMult});var x=e.textureCache.viewport={zoom:r.zoom(),pan:r.pan(),width:e.canvasWidth,height:e.canvasHeight};x.mpan={x:(0-x.pan.x)/x.zoom,y:(0-x.pan.y)/x.zoom}}c[e.DRAG]=!1,c[e.NODE]=!1;var A=l.contexts[e.NODE],L=e.textureCache.texture,x=e.textureCache.viewport;A.setTransform(1,0,0,1,0,0),v?k(A,0,0,x.width,x.height):A.clearRect(0,0,x.width,x.height);var I=y.core("outside-texture-bg-color").value,M=y.core("outside-texture-bg-opacity").value;e.colorFillStyle(A,I[0],I[1],I[2],M),A.fillRect(0,0,x.width,x.height);var b=r.zoom();B(A,!1),A.clearRect(x.mpan.x,x.mpan.y,x.width/x.zoom/u,x.height/x.zoom/u),A.drawImage(L,x.mpan.x,x.mpan.y,x.width/x.zoom/u,x.height/x.zoom/u)}else e.textureOnViewport&&!a&&(e.textureCache=null);var O=r.extent(),V=e.pinching||e.hoverData.dragging||e.swipePanning||e.data.wheelZooming||e.hoverData.draggingEles||e.cy.animated(),W=e.hideEdgesOnViewport&&V,N=[];if(N[e.NODE]=!c[e.NODE]&&v&&!e.clearedForMotionBlur[e.NODE]||e.clearingMotionBlur,N[e.NODE]&&(e.clearedForMotionBlur[e.NODE]=!0),N[e.DRAG]=!c[e.DRAG]&&v&&!e.clearedForMotionBlur[e.DRAG]||e.clearingMotionBlur,N[e.DRAG]&&(e.clearedForMotionBlur[e.DRAG]=!0),c[e.NODE]||n||i||N[e.NODE]){var z=v&&!N[e.NODE]&&h!==1,A=a||(z?e.data.bufferContexts[e.MOTIONBLUR_BUFFER_NODE]:l.contexts[e.NODE]),X=v&&!z?"motionBlur":void 0;B(A,X),W?e.drawCachedNodes(A,P.nondrag,u,O):e.drawLayeredElements(A,P.nondrag,u,O),e.debug&&e.drawDebugPoints(A,P.nondrag),!n&&!v&&(c[e.NODE]=!1)}if(!i&&(c[e.DRAG]||n||N[e.DRAG])){var z=v&&!N[e.DRAG]&&h!==1,A=a||(z?e.data.bufferContexts[e.MOTIONBLUR_BUFFER_DRAG]:l.contexts[e.DRAG]);B(A,v&&!z?"motionBlur":void 0),W?e.drawCachedNodes(A,P.drag,u,O):e.drawCachedElements(A,P.drag,u,O),e.debug&&e.drawDebugPoints(A,P.drag),!n&&!v&&(c[e.DRAG]=!1)}if(this.drawSelectionRectangle(t,B),v&&h!==1){var j=l.contexts[e.NODE],J=e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_NODE],G=l.contexts[e.DRAG],Z=e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_DRAG],ae=function(F,q,U){F.setTransform(1,0,0,1,0,0),U||!g?F.clearRect(0,0,e.canvasWidth,e.canvasHeight):k(F,0,0,e.canvasWidth,e.canvasHeight);var re=h;F.drawImage(q,0,0,e.canvasWidth*re,e.canvasHeight*re,0,0,e.canvasWidth,e.canvasHeight)};(c[e.NODE]||N[e.NODE])&&(ae(j,J,N[e.NODE]),c[e.NODE]=!1),(c[e.DRAG]||N[e.DRAG])&&(ae(G,Z,N[e.DRAG]),c[e.DRAG]=!1)}e.prevViewport=x,e.clearingMotionBlur&&(e.clearingMotionBlur=!1,e.motionBlurCleared=!0,e.motionBlur=!0),v&&(e.motionBlurTimeout=setTimeout(function(){e.motionBlurTimeout=null,e.clearedForMotionBlur[e.NODE]=!1,e.clearedForMotionBlur[e.DRAG]=!1,e.motionBlur=!1,e.clearingMotionBlur=!f,e.mbFrames=0,c[e.NODE]=!0,c[e.DRAG]=!0,e.redraw()},px)),a||r.emit("render")};var Ua;Et.drawSelectionRectangle=function(t,e){var r=this,a=r.cy,n=r.data,i=a.style(),o=t.drawOnlyNodeLayer,s=t.drawAllLayers,u=n.canvasNeedsRedraw,l=t.forcedContext;if(r.showFps||!o&&u[r.SELECT_BOX]&&!s){var c=l||n.contexts[r.SELECT_BOX];if(e(c),r.selection[4]==1&&(r.hoverData.selecting||r.touchData.selecting)){var f=r.cy.zoom(),v=i.core("selection-box-border-width").value/f;c.lineWidth=v,c.fillStyle="rgba("+i.core("selection-box-color").value[0]+","+i.core("selection-box-color").value[1]+","+i.core("selection-box-color").value[2]+","+i.core("selection-box-opacity").value+")",c.fillRect(r.selection[0],r.selection[1],r.selection[2]-r.selection[0],r.selection[3]-r.selection[1]),v>0&&(c.strokeStyle="rgba("+i.core("selection-box-border-color").value[0]+","+i.core("selection-box-border-color").value[1]+","+i.core("selection-box-border-color").value[2]+","+i.core("selection-box-opacity").value+")",c.strokeRect(r.selection[0],r.selection[1],r.selection[2]-r.selection[0],r.selection[3]-r.selection[1]))}if(n.bgActivePosistion&&!r.hoverData.selecting){var f=r.cy.zoom(),h=n.bgActivePosistion;c.fillStyle="rgba("+i.core("active-bg-color").value[0]+","+i.core("active-bg-color").value[1]+","+i.core("active-bg-color").value[2]+","+i.core("active-bg-opacity").value+")",c.beginPath(),c.arc(h.x,h.y,i.core("active-bg-size").pfValue/f,0,2*Math.PI),c.fill()}var d=r.lastRedrawTime;if(r.showFps&&d){d=Math.round(d);var m=Math.round(1e3/d),p="1 frame = "+d+" ms = "+m+" fps";if(c.setTransform(1,0,0,1,0,0),c.fillStyle="rgba(255, 0, 0, 0.75)",c.strokeStyle="rgba(255, 0, 0, 0.75)",c.font="30px Arial",!Ua){var g=c.measureText(p);Ua=g.actualBoundingBoxAscent}c.fillText(p,0,Ua);var y=60;c.strokeRect(0,Ua+10,250,20),c.fillRect(0,Ua+10,250*Math.min(m/y,1),20)}s||(u[r.SELECT_BOX]=!1)}};function hf(t,e,r){var a=t.createShader(e);if(t.shaderSource(a,r),t.compileShader(a),!t.getShaderParameter(a,t.COMPILE_STATUS))throw new Error(t.getShaderInfoLog(a));return a}function gx(t,e,r){var a=hf(t,t.VERTEX_SHADER,e),n=hf(t,t.FRAGMENT_SHADER,r),i=t.createProgram();if(t.attachShader(i,a),t.attachShader(i,n),t.linkProgram(i),!t.getProgramParameter(i,t.LINK_STATUS))throw new Error("Could not initialize shaders");return i}function mx(t,e,r){r===void 0&&(r=e);var a=t.makeOffscreenCanvas(e,r),n=a.context=a.getContext("2d");return a.clear=function(){return n.clearRect(0,0,a.width,a.height)},a.clear(),a}function Iu(t){var e=t.pixelRatio,r=t.cy.zoom(),a=t.cy.pan();return{zoom:r*e,pan:{x:a.x*e,y:a.y*e}}}function yx(t){var e=t.pixelRatio,r=t.cy.zoom();return r*e}function bx(t,e,r,a,n){var i=a*r+e.x,o=n*r+e.y;return o=Math.round(t.canvasHeight-o),[i,o]}function wx(t){return t.pstyle("background-fill").value!=="solid"||t.pstyle("background-image").strValue!=="none"?!1:t.pstyle("border-width").value===0||t.pstyle("border-opacity").value===0?!0:t.pstyle("border-style").value==="solid"}function xx(t,e){if(t.length!==e.length)return!1;for(var r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}function Vr(t,e,r){var a=t[0]/255,n=t[1]/255,i=t[2]/255,o=e,s=r||new Array(4);return s[0]=a*o,s[1]=n*o,s[2]=i*o,s[3]=o,s}function va(t,e){var r=e||new Array(4);return r[0]=(t>>0&255)/255,r[1]=(t>>8&255)/255,r[2]=(t>>16&255)/255,r[3]=(t>>24&255)/255,r}function Ex(t){return t[0]+(t[1]<<8)+(t[2]<<16)+(t[3]<<24)}function Cx(t,e){var r=t.createTexture();return r.buffer=function(a){t.bindTexture(t.TEXTURE_2D,r),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR_MIPMAP_NEAREST),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,a),t.generateMipmap(t.TEXTURE_2D),t.bindTexture(t.TEXTURE_2D,null)},r.deleteTexture=function(){t.deleteTexture(r)},r}function Td(t,e){switch(e){case"float":return[1,t.FLOAT,4];case"vec2":return[2,t.FLOAT,4];case"vec3":return[3,t.FLOAT,4];case"vec4":return[4,t.FLOAT,4];case"int":return[1,t.INT,4];case"ivec2":return[2,t.INT,4]}}function Sd(t,e,r){switch(e){case t.FLOAT:return new Float32Array(r);case t.INT:return new Int32Array(r)}}function Tx(t,e,r,a,n,i){switch(e){case t.FLOAT:return new Float32Array(r.buffer,i*a,n);case t.INT:return new Int32Array(r.buffer,i*a,n)}}function Sx(t,e,r,a){var n=Td(t,e),i=rt(n,2),o=i[0],s=i[1],u=Sd(t,s,a),l=t.createBuffer();return t.bindBuffer(t.ARRAY_BUFFER,l),t.bufferData(t.ARRAY_BUFFER,u,t.STATIC_DRAW),s===t.FLOAT?t.vertexAttribPointer(r,o,s,!1,0,0):s===t.INT&&t.vertexAttribIPointer(r,o,s,0,0),t.enableVertexAttribArray(r),t.bindBuffer(t.ARRAY_BUFFER,null),l}function Kt(t,e,r,a){var n=Td(t,r),i=rt(n,3),o=i[0],s=i[1],u=i[2],l=Sd(t,s,e*o),c=o*u,f=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,f),t.bufferData(t.ARRAY_BUFFER,e*c,t.DYNAMIC_DRAW),t.enableVertexAttribArray(a),s===t.FLOAT?t.vertexAttribPointer(a,o,s,!1,c,0):s===t.INT&&t.vertexAttribIPointer(a,o,s,c,0),t.vertexAttribDivisor(a,1),t.bindBuffer(t.ARRAY_BUFFER,null);for(var v=new Array(e),h=0;h<e;h++)v[h]=Tx(t,s,l,c,o,h);return f.dataArray=l,f.stride=c,f.size=o,f.getView=function(d){return v[d]},f.setPoint=function(d,m,p){var g=v[d];g[0]=m,g[1]=p},f.bufferSubData=function(d){t.bindBuffer(t.ARRAY_BUFFER,f),d?t.bufferSubData(t.ARRAY_BUFFER,0,l,0,d*o):t.bufferSubData(t.ARRAY_BUFFER,0,l)},f}function Rx(t,e,r){for(var a=9,n=new Float32Array(e*a),i=new Array(e),o=0;o<e;o++){var s=o*a*4;i[o]=new Float32Array(n.buffer,s,a)}var u=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,u),t.bufferData(t.ARRAY_BUFFER,n.byteLength,t.DYNAMIC_DRAW);for(var l=0;l<3;l++){var c=r+l;t.enableVertexAttribArray(c),t.vertexAttribPointer(c,3,t.FLOAT,!1,3*12,l*12),t.vertexAttribDivisor(c,1)}return t.bindBuffer(t.ARRAY_BUFFER,null),u.getMatrixView=function(f){return i[f]},u.setData=function(f,v){i[v].set(f,0)},u.bufferSubData=function(){t.bindBuffer(t.ARRAY_BUFFER,u),t.bufferSubData(t.ARRAY_BUFFER,0,n)},u}function Px(t){var e=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,e);var r=t.createTexture();return t.bindTexture(t.TEXTURE_2D,r),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,r,0),t.bindFramebuffer(t.FRAMEBUFFER,null),e.setFramebufferAttachmentSizes=function(a,n){t.bindTexture(t.TEXTURE_2D,r),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,a,n,0,t.RGBA,t.UNSIGNED_BYTE,null)},e}var pf=typeof Float32Array<"u"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});function ks(){var t=new pf(9);return pf!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function gf(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function kx(t,e,r){var a=e[0],n=e[1],i=e[2],o=e[3],s=e[4],u=e[5],l=e[6],c=e[7],f=e[8],v=r[0],h=r[1],d=r[2],m=r[3],p=r[4],g=r[5],y=r[6],b=r[7],w=r[8];return t[0]=v*a+h*o+d*l,t[1]=v*n+h*s+d*c,t[2]=v*i+h*u+d*f,t[3]=m*a+p*o+g*l,t[4]=m*n+p*s+g*c,t[5]=m*i+p*u+g*f,t[6]=y*a+b*o+w*l,t[7]=y*n+b*s+w*c,t[8]=y*i+b*u+w*f,t}function hi(t,e,r){var a=e[0],n=e[1],i=e[2],o=e[3],s=e[4],u=e[5],l=e[6],c=e[7],f=e[8],v=r[0],h=r[1];return t[0]=a,t[1]=n,t[2]=i,t[3]=o,t[4]=s,t[5]=u,t[6]=v*a+h*o+l,t[7]=v*n+h*s+c,t[8]=v*i+h*u+f,t}function mf(t,e,r){var a=e[0],n=e[1],i=e[2],o=e[3],s=e[4],u=e[5],l=e[6],c=e[7],f=e[8],v=Math.sin(r),h=Math.cos(r);return t[0]=h*a+v*o,t[1]=h*n+v*s,t[2]=h*i+v*u,t[3]=h*o-v*a,t[4]=h*s-v*n,t[5]=h*u-v*i,t[6]=l,t[7]=c,t[8]=f,t}function eu(t,e,r){var a=r[0],n=r[1];return t[0]=a*e[0],t[1]=a*e[1],t[2]=a*e[2],t[3]=n*e[3],t[4]=n*e[4],t[5]=n*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function Dx(t,e,r){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/r,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t}var Bx=function(){function t(e,r,a,n){Lr(this,t),this.debugID=Math.floor(Math.random()*1e4),this.r=e,this.texSize=r,this.texRows=a,this.texHeight=Math.floor(r/a),this.enableWrapping=!0,this.locked=!1,this.texture=null,this.needsBuffer=!0,this.freePointer={x:0,row:0},this.keyToLocation=new Map,this.canvas=n(e,r,r),this.scratch=n(e,r,this.texHeight,"scratch")}return Mr(t,[{key:"lock",value:function(){this.locked=!0}},{key:"getKeys",value:function(){return new Set(this.keyToLocation.keys())}},{key:"getScale",value:function(r){var a=r.w,n=r.h,i=this.texHeight,o=this.texSize,s=i/n,u=a*s,l=n*s;return u>o&&(s=o/a,u=a*s,l=n*s),{scale:s,texW:u,texH:l}}},{key:"draw",value:function(r,a,n){var i=this;if(this.locked)throw new Error("can't draw, atlas is locked");var o=this.texSize,s=this.texRows,u=this.texHeight,l=this.getScale(a),c=l.scale,f=l.texW,v=l.texH,h=function(b,w){if(n&&w){var E=w.context,C=b.x,x=b.row,R=C,S=u*x;E.save(),E.translate(R,S),E.scale(c,c),n(E,a),E.restore()}},d=[null,null],m=function(){h(i.freePointer,i.canvas),d[0]={x:i.freePointer.x,y:i.freePointer.row*u,w:f,h:v},d[1]={x:i.freePointer.x+f,y:i.freePointer.row*u,w:0,h:v},i.freePointer.x+=f,i.freePointer.x==o&&(i.freePointer.x=0,i.freePointer.row++)},p=function(){var b=i.scratch,w=i.canvas;b.clear(),h({x:0,row:0},b);var E=o-i.freePointer.x,C=f-E,x=u;{var R=i.freePointer.x,S=i.freePointer.row*u,P=E;w.context.drawImage(b,0,0,P,x,R,S,P,x),d[0]={x:R,y:S,w:P,h:v}}{var k=E,B=(i.freePointer.row+1)*u,D=C;w&&w.context.drawImage(b,k,0,D,x,0,B,D,x),d[1]={x:0,y:B,w:D,h:v}}i.freePointer.x=C,i.freePointer.row++},g=function(){i.freePointer.x=0,i.freePointer.row++};if(this.freePointer.x+f<=o)m();else{if(this.freePointer.row>=s-1)return!1;this.freePointer.x===o?(g(),m()):this.enableWrapping?p():(g(),m())}return this.keyToLocation.set(r,d),this.needsBuffer=!0,d}},{key:"getOffsets",value:function(r){return this.keyToLocation.get(r)}},{key:"isEmpty",value:function(){return this.freePointer.x===0&&this.freePointer.row===0}},{key:"canFit",value:function(r){if(this.locked)return!1;var a=this.texSize,n=this.texRows,i=this.getScale(r),o=i.texW;return this.freePointer.x+o>a?this.freePointer.row<n-1:!0}},{key:"bufferIfNeeded",value:function(r){this.texture||(this.texture=Cx(r,this.debugID)),this.needsBuffer&&(this.texture.buffer(this.canvas),this.needsBuffer=!1,this.locked&&(this.canvas=null,this.scratch=null))}},{key:"dispose",value:function(){this.texture&&(this.texture.deleteTexture(),this.texture=null),this.canvas=null,this.scratch=null,this.locked=!0}}])}(),Ax=function(){function t(e,r,a,n){Lr(this,t),this.r=e,this.texSize=r,this.texRows=a,this.createTextureCanvas=n,this.atlases=[],this.styleKeyToAtlas=new Map,this.markedKeys=new Set}return Mr(t,[{key:"getKeys",value:function(){return new Set(this.styleKeyToAtlas.keys())}},{key:"_createAtlas",value:function(){var r=this.r,a=this.texSize,n=this.texRows,i=this.createTextureCanvas;return new Bx(r,a,n,i)}},{key:"_getScratchCanvas",value:function(){if(!this.scratch){var r=this.r,a=this.texSize,n=this.texRows,i=this.createTextureCanvas,o=Math.floor(a/n);this.scratch=i(r,a,o,"scratch")}return this.scratch}},{key:"draw",value:function(r,a,n){var i=this.styleKeyToAtlas.get(r);return i||(i=this.atlases[this.atlases.length-1],(!i||!i.canFit(a))&&(i&&i.lock(),i=this._createAtlas(),this.atlases.push(i)),i.draw(r,a,n),this.styleKeyToAtlas.set(r,i)),i}},{key:"getAtlas",value:function(r){return this.styleKeyToAtlas.get(r)}},{key:"hasAtlas",value:function(r){return this.styleKeyToAtlas.has(r)}},{key:"markKeyForGC",value:function(r){this.markedKeys.add(r)}},{key:"gc",value:function(){var r=this,a=this.markedKeys;if(a.size===0){console.log("nothing to garbage collect");return}var n=[],i=new Map,o=null,s=kt(this.atlases),u;try{var l=function(){var f=u.value,v=f.getKeys(),h=Lx(a,v);if(h.size===0)return n.push(f),v.forEach(function(E){return i.set(E,f)}),1;o||(o=r._createAtlas(),n.push(o));var d=kt(v),m;try{for(d.s();!(m=d.n()).done;){var p=m.value;if(!h.has(p)){var g=f.getOffsets(p),y=rt(g,2),b=y[0],w=y[1];o.canFit({w:b.w+w.w,h:b.h})||(o.lock(),o=r._createAtlas(),n.push(o)),f.canvas&&(r._copyTextureToNewAtlas(p,f,o),i.set(p,o))}}}catch(E){d.e(E)}finally{d.f()}f.dispose()};for(s.s();!(u=s.n()).done;)l()}catch(c){s.e(c)}finally{s.f()}this.atlases=n,this.styleKeyToAtlas=i,this.markedKeys=new Set}},{key:"_copyTextureToNewAtlas",value:function(r,a,n){var i=a.getOffsets(r),o=rt(i,2),s=o[0],u=o[1];if(u.w===0)n.draw(r,s,function(v){v.drawImage(a.canvas,s.x,s.y,s.w,s.h,0,0,s.w,s.h)});else{var l=this._getScratchCanvas();l.clear(),l.context.drawImage(a.canvas,s.x,s.y,s.w,s.h,0,0,s.w,s.h),l.context.drawImage(a.canvas,u.x,u.y,u.w,u.h,s.w,0,u.w,u.h);var c=s.w+u.w,f=s.h;n.draw(r,{w:c,h:f},function(v){v.drawImage(l,0,0,c,f,0,0,c,f)})}}},{key:"getCounts",value:function(){return{keyCount:this.styleKeyToAtlas.size,atlasCount:new Set(this.styleKeyToAtlas.values()).size}}}])}();function Lx(t,e){return t.intersection?t.intersection(e):new Set(mi(t).filter(function(r){return e.has(r)}))}var Mx=function(){function t(e,r){Lr(this,t),this.r=e,this.globalOptions=r,this.atlasSize=r.webglTexSize,this.maxAtlasesPerBatch=r.webglTexPerBatch,this.renderTypes=new Map,this.collections=new Map,this.typeAndIdToKey=new Map}return Mr(t,[{key:"getAtlasSize",value:function(){return this.atlasSize}},{key:"addAtlasCollection",value:function(r,a){var n=this.globalOptions,i=n.webglTexSize,o=n.createTextureCanvas,s=a.texRows,u=this._cacheScratchCanvas(o),l=new Ax(this.r,i,s,u);this.collections.set(r,l)}},{key:"addRenderType",value:function(r,a){var n=a.collection;if(!this.collections.has(n))throw new Error("invalid atlas collection name '".concat(n,"'"));var i=this.collections.get(n),o=ge({type:r,atlasCollection:i},a);this.renderTypes.set(r,o)}},{key:"getRenderTypeOpts",value:function(r){return this.renderTypes.get(r)}},{key:"getAtlasCollection",value:function(r){return this.collections.get(r)}},{key:"_cacheScratchCanvas",value:function(r){var a=-1,n=-1,i=null;return function(o,s,u,l){return l?((!i||s!=a||u!=n)&&(a=s,n=u,i=r(o,s,u)),i):r(o,s,u)}}},{key:"_key",value:function(r,a){return"".concat(r,"-").concat(a)}},{key:"invalidate",value:function(r){var a=this,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=n.forceRedraw,o=i===void 0?!1:i,s=n.filterEle,u=s===void 0?function(){return!0}:s,l=n.filterType,c=l===void 0?function(){return!0}:l,f=!1,v=!1,h=kt(r),d;try{for(h.s();!(d=h.n()).done;){var m=d.value;if(u(m)){var p=kt(this.renderTypes.values()),g;try{var y=function(){var w=g.value,E=w.type;if(c(E)){var C=a.collections.get(w.collection),x=w.getKey(m),R=Array.isArray(x)?x:[x];if(o)R.forEach(function(B){return C.markKeyForGC(B)}),v=!0;else{var S=w.getID?w.getID(m):m.id(),P=a._key(E,S),k=a.typeAndIdToKey.get(P);k!==void 0&&!xx(R,k)&&(f=!0,a.typeAndIdToKey.delete(P),k.forEach(function(B){return C.markKeyForGC(B)}))}}};for(p.s();!(g=p.n()).done;)y()}catch(b){p.e(b)}finally{p.f()}}}}catch(b){h.e(b)}finally{h.f()}return v&&(this.gc(),f=!1),f}},{key:"gc",value:function(){var r=kt(this.collections.values()),a;try{for(r.s();!(a=r.n()).done;){var n=a.value;n.gc()}}catch(i){r.e(i)}finally{r.f()}}},{key:"getOrCreateAtlas",value:function(r,a,n,i){var o=this.renderTypes.get(a),s=this.collections.get(o.collection),u=!1,l=s.draw(i,n,function(v){o.drawClipped?(v.save(),v.beginPath(),v.rect(0,0,n.w,n.h),v.clip(),o.drawElement(v,r,n,!0,!0),v.restore()):o.drawElement(v,r,n,!0,!0),u=!0});if(u){var c=o.getID?o.getID(r):r.id(),f=this._key(a,c);this.typeAndIdToKey.has(f)?this.typeAndIdToKey.get(f).push(i):this.typeAndIdToKey.set(f,[i])}return l}},{key:"getAtlasInfo",value:function(r,a){var n=this,i=this.renderTypes.get(a),o=i.getKey(r),s=Array.isArray(o)?o:[o];return s.map(function(u){var l=i.getBoundingBox(r,u),c=n.getOrCreateAtlas(r,a,l,u),f=c.getOffsets(u),v=rt(f,2),h=v[0],d=v[1];return{atlas:c,tex:h,tex1:h,tex2:d,bb:l}})}},{key:"getDebugInfo",value:function(){var r=[],a=kt(this.collections),n;try{for(a.s();!(n=a.n()).done;){var i=rt(n.value,2),o=i[0],s=i[1],u=s.getCounts(),l=u.keyCount,c=u.atlasCount;r.push({type:o,keyCount:l,atlasCount:c})}}catch(f){a.e(f)}finally{a.f()}return r}}])}(),Ix=function(){function t(e){Lr(this,t),this.globalOptions=e,this.atlasSize=e.webglTexSize,this.maxAtlasesPerBatch=e.webglTexPerBatch,this.batchAtlases=[]}return Mr(t,[{key:"getMaxAtlasesPerBatch",value:function(){return this.maxAtlasesPerBatch}},{key:"getAtlasSize",value:function(){return this.atlasSize}},{key:"getIndexArray",value:function(){return Array.from({length:this.maxAtlasesPerBatch},function(r,a){return a})}},{key:"startBatch",value:function(){this.batchAtlases=[]}},{key:"getAtlasCount",value:function(){return this.batchAtlases.length}},{key:"getAtlases",value:function(){return this.batchAtlases}},{key:"canAddToCurrentBatch",value:function(r){return this.batchAtlases.length===this.maxAtlasesPerBatch?this.batchAtlases.includes(r):!0}},{key:"getAtlasIndexForBatch",value:function(r){var a=this.batchAtlases.indexOf(r);if(a<0){if(this.batchAtlases.length===this.maxAtlasesPerBatch)throw new Error("cannot add more atlases to batch");this.batchAtlases.push(r),a=this.batchAtlases.length-1}return a}}])}(),Ox=`
  float circleSD(vec2 p, float r) {
    return distance(vec2(0), p) - r; // signed distance
  }
`,Nx=`
  float rectangleSD(vec2 p, vec2 b) {
    vec2 d = abs(p)-b;
    return distance(vec2(0),max(d,0.0)) + min(max(d.x,d.y),0.0);
  }
`,Fx=`
  float roundRectangleSD(vec2 p, vec2 b, vec4 cr) {
    cr.xy = (p.x > 0.0) ? cr.xy : cr.zw;
    cr.x  = (p.y > 0.0) ? cr.x  : cr.y;
    vec2 q = abs(p) - b + cr.x;
    return min(max(q.x, q.y), 0.0) + distance(vec2(0), max(q, 0.0)) - cr.x;
  }
`,zx=`
  float ellipseSD(vec2 p, vec2 ab) {
    p = abs( p ); // symmetry

    // find root with Newton solver
    vec2 q = ab*(p-ab);
    float w = (q.x<q.y)? 1.570796327 : 0.0;
    for( int i=0; i<5; i++ ) {
      vec2 cs = vec2(cos(w),sin(w));
      vec2 u = ab*vec2( cs.x,cs.y);
      vec2 v = ab*vec2(-cs.y,cs.x);
      w = w + dot(p-u,v)/(dot(p-u,u)+dot(v,v));
    }
    
    // compute final point and distance
    float d = length(p-ab*vec2(cos(w),sin(w)));
    
    // return signed distance
    return (dot(p/ab,p/ab)>1.0) ? d : -d;
  }
`,rn={SCREEN:{name:"screen",screen:!0},PICKING:{name:"picking",picking:!0}},Di={IGNORE:1,USE_BB:2},Ds=0,yf=1,bf=2,Bs=3,da=4,Zn=5,Ha=6,Ka=7,Vx=function(){function t(e,r,a){Lr(this,t),this.r=e,this.gl=r,this.maxInstances=a.webglBatchSize,this.atlasSize=a.webglTexSize,this.bgColor=a.bgColor,this.debug=a.webglDebug,this.batchDebugInfo=[],a.enableWrapping=!0,a.createTextureCanvas=mx,this.atlasManager=new Mx(e,a),this.batchManager=new Ix(a),this.simpleShapeOptions=new Map,this.program=this._createShaderProgram(rn.SCREEN),this.pickingProgram=this._createShaderProgram(rn.PICKING),this.vao=this._createVAO()}return Mr(t,[{key:"addAtlasCollection",value:function(r,a){this.atlasManager.addAtlasCollection(r,a)}},{key:"addTextureAtlasRenderType",value:function(r,a){this.atlasManager.addRenderType(r,a)}},{key:"addSimpleShapeRenderType",value:function(r,a){this.simpleShapeOptions.set(r,a)}},{key:"invalidate",value:function(r){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=a.type,i=this.atlasManager;return n?i.invalidate(r,{filterType:function(s){return s===n},forceRedraw:!0}):i.invalidate(r)}},{key:"gc",value:function(){this.atlasManager.gc()}},{key:"_createShaderProgram",value:function(r){var a=this.gl,n=`#version 300 es
      precision highp float;

      uniform mat3 uPanZoomMatrix;
      uniform int  uAtlasSize;
      
      // instanced
      in vec2 aPosition; // a vertex from the unit square
      
      in mat3 aTransform; // used to transform verticies, eg into a bounding box
      in int aVertType; // the type of thing we are rendering

      // the z-index that is output when using picking mode
      in vec4 aIndex;
      
      // For textures
      in int aAtlasId; // which shader unit/atlas to use
      in vec4 aTex; // x/y/w/h of texture in atlas

      // for edges
      in vec4 aPointAPointB;
      in vec4 aPointCPointD;
      in vec2 aLineWidth; // also used for node border width

      // simple shapes
      in vec4 aCornerRadius; // for round-rectangle [top-right, bottom-right, top-left, bottom-left]
      in vec4 aColor; // also used for edges
      in vec4 aBorderColor; // aLineWidth is used for border width

      // output values passed to the fragment shader
      out vec2 vTexCoord;
      out vec4 vColor;
      out vec2 vPosition;
      // flat values are not interpolated
      flat out int vAtlasId; 
      flat out int vVertType;
      flat out vec2 vTopRight;
      flat out vec2 vBotLeft;
      flat out vec4 vCornerRadius;
      flat out vec4 vBorderColor;
      flat out vec2 vBorderWidth;
      flat out vec4 vIndex;
      
      void main(void) {
        int vid = gl_VertexID;
        vec2 position = aPosition; // TODO make this a vec3, simplifies some code below

        if(aVertType == `.concat(Ds,`) {
          float texX = aTex.x; // texture coordinates
          float texY = aTex.y;
          float texW = aTex.z;
          float texH = aTex.w;

          if(vid == 1 || vid == 2 || vid == 4) {
            texX += texW;
          }
          if(vid == 2 || vid == 4 || vid == 5) {
            texY += texH;
          }

          float d = float(uAtlasSize);
          vTexCoord = vec2(texX / d, texY / d); // tex coords must be between 0 and 1

          gl_Position = vec4(uPanZoomMatrix * aTransform * vec3(position, 1.0), 1.0);
        }
        else if(aVertType == `).concat(da," || aVertType == ").concat(Ka,` 
             || aVertType == `).concat(Zn," || aVertType == ").concat(Ha,`) { // simple shapes

          // the bounding box is needed by the fragment shader
          vBotLeft  = (aTransform * vec3(0, 0, 1)).xy; // flat
          vTopRight = (aTransform * vec3(1, 1, 1)).xy; // flat
          vPosition = (aTransform * vec3(position, 1)).xy; // will be interpolated

          // calculations are done in the fragment shader, just pass these along
          vColor = aColor;
          vCornerRadius = aCornerRadius;
          vBorderColor = aBorderColor;
          vBorderWidth = aLineWidth;

          gl_Position = vec4(uPanZoomMatrix * aTransform * vec3(position, 1.0), 1.0);
        }
        else if(aVertType == `).concat(yf,`) {
          vec2 source = aPointAPointB.xy;
          vec2 target = aPointAPointB.zw;

          // adjust the geometry so that the line is centered on the edge
          position.y = position.y - 0.5;

          // stretch the unit square into a long skinny rectangle
          vec2 xBasis = target - source;
          vec2 yBasis = normalize(vec2(-xBasis.y, xBasis.x));
          vec2 point = source + xBasis * position.x + yBasis * aLineWidth[0] * position.y;

          gl_Position = vec4(uPanZoomMatrix * vec3(point, 1.0), 1.0);
          vColor = aColor;
        } 
        else if(aVertType == `).concat(bf,`) {
          vec2 pointA = aPointAPointB.xy;
          vec2 pointB = aPointAPointB.zw;
          vec2 pointC = aPointCPointD.xy;
          vec2 pointD = aPointCPointD.zw;

          // adjust the geometry so that the line is centered on the edge
          position.y = position.y - 0.5;

          vec2 p0, p1, p2, pos;
          if(position.x == 0.0) { // The left side of the unit square
            p0 = pointA;
            p1 = pointB;
            p2 = pointC;
            pos = position;
          } else { // The right side of the unit square, use same approach but flip the geometry upside down
            p0 = pointD;
            p1 = pointC;
            p2 = pointB;
            pos = vec2(0.0, -position.y);
          }

          vec2 p01 = p1 - p0;
          vec2 p12 = p2 - p1;
          vec2 p21 = p1 - p2;

          // Find the normal vector.
          vec2 tangent = normalize(normalize(p12) + normalize(p01));
          vec2 normal = vec2(-tangent.y, tangent.x);

          // Find the vector perpendicular to p0 -> p1.
          vec2 p01Norm = normalize(vec2(-p01.y, p01.x));

          // Determine the bend direction.
          float sigma = sign(dot(p01 + p21, normal));
          float width = aLineWidth[0];

          if(sign(pos.y) == -sigma) {
            // This is an intersecting vertex. Adjust the position so that there's no overlap.
            vec2 point = 0.5 * width * normal * -sigma / dot(normal, p01Norm);
            gl_Position = vec4(uPanZoomMatrix * vec3(p1 + point, 1.0), 1.0);
          } else {
            // This is a non-intersecting vertex. Treat it like a mitre join.
            vec2 point = 0.5 * width * normal * sigma * dot(normal, p01Norm);
            gl_Position = vec4(uPanZoomMatrix * vec3(p1 + point, 1.0), 1.0);
          }

          vColor = aColor;
        } 
        else if(aVertType == `).concat(Bs,` && vid < 3) {
          // massage the first triangle into an edge arrow
          if(vid == 0)
            position = vec2(-0.15, -0.3);
          if(vid == 1)
            position = vec2(  0.0,  0.0);
          if(vid == 2)
            position = vec2( 0.15, -0.3);

          gl_Position = vec4(uPanZoomMatrix * aTransform * vec3(position, 1.0), 1.0);
          vColor = aColor;
        }
        else {
          gl_Position = vec4(2.0, 0.0, 0.0, 1.0); // discard vertex by putting it outside webgl clip space
        }

        vAtlasId = aAtlasId;
        vVertType = aVertType;
        vIndex = aIndex;
      }
    `),i=this.batchManager.getIndexArray(),o=`#version 300 es
      precision highp float;

      // declare texture unit for each texture atlas in the batch
      `.concat(i.map(function(l){return"uniform sampler2D uTexture".concat(l,";")}).join(`
	`),`

      uniform vec4 uBGColor;
      uniform float uZoom;

      in vec2 vTexCoord;
      in vec4 vColor;
      in vec2 vPosition; // model coordinates

      flat in int vAtlasId;
      flat in vec4 vIndex;
      flat in int vVertType;
      flat in vec2 vTopRight;
      flat in vec2 vBotLeft;
      flat in vec4 vCornerRadius;
      flat in vec4 vBorderColor;
      flat in vec2 vBorderWidth;

      out vec4 outColor;

      `).concat(Ox,`
      `).concat(Nx,`
      `).concat(Fx,`
      `).concat(zx,`

      vec4 blend(vec4 top, vec4 bot) { // blend colors with premultiplied alpha
        return vec4( 
          top.rgb + (bot.rgb * (1.0 - top.a)),
          top.a   + (bot.a   * (1.0 - top.a)) 
        );
      }

      vec4 distInterp(vec4 cA, vec4 cB, float d) { // interpolate color using Signed Distance
        // scale to the zoom level so that borders don't look blurry when zoomed in
        // note 1.5 is an aribitrary value chosen because it looks good
        return mix(cA, cB, 1.0 - smoothstep(0.0, 1.5 / uZoom, abs(d))); 
      }

      void main(void) {
        if(vVertType == `).concat(Ds,`) {
          // look up the texel from the texture unit
          `).concat(i.map(function(l){return"if(vAtlasId == ".concat(l,") outColor = texture(uTexture").concat(l,", vTexCoord);")}).join(`
	else `),`
        } 
        else if(vVertType == `).concat(Bs,`) {
          // mimics how canvas renderer uses context.globalCompositeOperation = 'destination-out';
          outColor = blend(vColor, uBGColor);
          outColor.a = 1.0; // make opaque, masks out line under arrow
        }
        else if(vVertType == `).concat(da,` && vBorderWidth == vec2(0.0)) { // simple rectangle with no border
          outColor = vColor; // unit square is already transformed to the rectangle, nothing else needs to be done
        }
        else if(vVertType == `).concat(da," || vVertType == ").concat(Ka,` 
          || vVertType == `).concat(Zn," || vVertType == ").concat(Ha,`) { // use SDF

          float outerBorder = vBorderWidth[0];
          float innerBorder = vBorderWidth[1];
          float borderPadding = outerBorder * 2.0;
          float w = vTopRight.x - vBotLeft.x - borderPadding;
          float h = vTopRight.y - vBotLeft.y - borderPadding;
          vec2 b = vec2(w/2.0, h/2.0); // half width, half height
          vec2 p = vPosition - vec2(vTopRight.x - b[0] - outerBorder, vTopRight.y - b[1] - outerBorder); // translate to center

          float d; // signed distance
          if(vVertType == `).concat(da,`) {
            d = rectangleSD(p, b);
          } else if(vVertType == `).concat(Ka,` && w == h) {
            d = circleSD(p, b.x); // faster than ellipse
          } else if(vVertType == `).concat(Ka,`) {
            d = ellipseSD(p, b);
          } else {
            d = roundRectangleSD(p, b, vCornerRadius.wzyx);
          }

          // use the distance to interpolate a color to smooth the edges of the shape, doesn't need multisampling
          // we must smooth colors inwards, because we can't change pixels outside the shape's bounding box
          if(d > 0.0) {
            if(d > outerBorder) {
              discard;
            } else {
              outColor = distInterp(vBorderColor, vec4(0), d - outerBorder);
            }
          } else {
            if(d > innerBorder) {
              vec4 outerColor = outerBorder == 0.0 ? vec4(0) : vBorderColor;
              vec4 innerBorderColor = blend(vBorderColor, vColor);
              outColor = distInterp(innerBorderColor, outerColor, d);
            } 
            else {
              vec4 outerColor;
              if(innerBorder == 0.0 && outerBorder == 0.0) {
                outerColor = vec4(0);
              } else if(innerBorder == 0.0) {
                outerColor = vBorderColor;
              } else {
                outerColor = blend(vBorderColor, vColor);
              }
              outColor = distInterp(vColor, outerColor, d - innerBorder);
            }
          }
        }
        else {
          outColor = vColor;
        }

        `).concat(r.picking?`if(outColor.a == 0.0) discard;
             else outColor = vIndex;`:"",`
      }
    `),s=gx(a,n,o);s.aPosition=a.getAttribLocation(s,"aPosition"),s.aIndex=a.getAttribLocation(s,"aIndex"),s.aVertType=a.getAttribLocation(s,"aVertType"),s.aTransform=a.getAttribLocation(s,"aTransform"),s.aAtlasId=a.getAttribLocation(s,"aAtlasId"),s.aTex=a.getAttribLocation(s,"aTex"),s.aPointAPointB=a.getAttribLocation(s,"aPointAPointB"),s.aPointCPointD=a.getAttribLocation(s,"aPointCPointD"),s.aLineWidth=a.getAttribLocation(s,"aLineWidth"),s.aColor=a.getAttribLocation(s,"aColor"),s.aCornerRadius=a.getAttribLocation(s,"aCornerRadius"),s.aBorderColor=a.getAttribLocation(s,"aBorderColor"),s.uPanZoomMatrix=a.getUniformLocation(s,"uPanZoomMatrix"),s.uAtlasSize=a.getUniformLocation(s,"uAtlasSize"),s.uBGColor=a.getUniformLocation(s,"uBGColor"),s.uZoom=a.getUniformLocation(s,"uZoom"),s.uTextures=[];for(var u=0;u<this.batchManager.getMaxAtlasesPerBatch();u++)s.uTextures.push(a.getUniformLocation(s,"uTexture".concat(u)));return s}},{key:"_createVAO",value:function(){var r=[0,0,1,0,1,1,0,0,1,1,0,1];this.vertexCount=r.length/2;var a=this.maxInstances,n=this.gl,i=this.program,o=n.createVertexArray();return n.bindVertexArray(o),Sx(n,"vec2",i.aPosition,r),this.transformBuffer=Rx(n,a,i.aTransform),this.indexBuffer=Kt(n,a,"vec4",i.aIndex),this.vertTypeBuffer=Kt(n,a,"int",i.aVertType),this.atlasIdBuffer=Kt(n,a,"int",i.aAtlasId),this.texBuffer=Kt(n,a,"vec4",i.aTex),this.pointAPointBBuffer=Kt(n,a,"vec4",i.aPointAPointB),this.pointCPointDBuffer=Kt(n,a,"vec4",i.aPointCPointD),this.lineWidthBuffer=Kt(n,a,"vec2",i.aLineWidth),this.colorBuffer=Kt(n,a,"vec4",i.aColor),this.cornerRadiusBuffer=Kt(n,a,"vec4",i.aCornerRadius),this.borderColorBuffer=Kt(n,a,"vec4",i.aBorderColor),n.bindVertexArray(null),o}},{key:"buffers",get:function(){var r=this;return this._buffers||(this._buffers=Object.keys(this).filter(function(a){return a.endsWith("Buffer")}).map(function(a){return r[a]})),this._buffers}},{key:"startFrame",value:function(r){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:rn.SCREEN;this.panZoomMatrix=r,this.renderTarget=a,this.batchDebugInfo=[],this.wrappedCount=0,this.simpleCount=0,this.startBatch()}},{key:"startBatch",value:function(){this.instanceCount=0,this.batchManager.startBatch()}},{key:"endFrame",value:function(){this.endBatch()}},{key:"_isVisible",value:function(r,a){return r.visible()?a&&a.isVisible?a.isVisible(r):!0:!1}},{key:"drawTexture",value:function(r,a,n){var i=this.atlasManager,o=this.batchManager,s=i.getRenderTypeOpts(n);if(this._isVisible(r,s)){if(this.renderTarget.picking&&s.getTexPickingMode){var u=s.getTexPickingMode(r);if(u===Di.IGNORE)return;if(u==Di.USE_BB){this.drawPickingRectangle(r,a,n);return}}var l=i.getAtlasInfo(r,n),c=kt(l),f;try{for(c.s();!(f=c.n()).done;){var v=f.value,h=v.atlas,d=v.tex1,m=v.tex2;o.canAddToCurrentBatch(h)||this.endBatch();for(var p=o.getAtlasIndexForBatch(h),g=0,y=[[d,!0],[m,!1]];g<y.length;g++){var b=rt(y[g],2),w=b[0],E=b[1];if(w.w!=0){var C=this.instanceCount;this.vertTypeBuffer.getView(C)[0]=Ds;var x=this.indexBuffer.getView(C);va(a,x);var R=this.atlasIdBuffer.getView(C);R[0]=p;var S=this.texBuffer.getView(C);S[0]=w.x,S[1]=w.y,S[2]=w.w,S[3]=w.h;var P=this.transformBuffer.getMatrixView(C);this.setTransformMatrix(r,P,s,v,E),this.instanceCount++,E||this.wrappedCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}}}catch(k){c.e(k)}finally{c.f()}}}},{key:"setTransformMatrix",value:function(r,a,n,i){var o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,s=0;if(n.shapeProps&&n.shapeProps.padding&&(s=r.pstyle(n.shapeProps.padding).pfValue),i){var u=i.bb,l=i.tex1,c=i.tex2,f=l.w/(l.w+c.w);o||(f=1-f);var v=this._getAdjustedBB(u,s,o,f);this._applyTransformMatrix(a,v,n,r)}else{var h=n.getBoundingBox(r),d=this._getAdjustedBB(h,s,!0,1);this._applyTransformMatrix(a,d,n,r)}}},{key:"_applyTransformMatrix",value:function(r,a,n,i){var o,s;gf(r);var u=n.getRotation?n.getRotation(i):0;if(u!==0){var l=n.getRotationPoint(i),c=l.x,f=l.y;hi(r,r,[c,f]),mf(r,r,u);var v=n.getRotationOffset(i);o=v.x+(a.xOffset||0),s=v.y+(a.yOffset||0)}else o=a.x1,s=a.y1;hi(r,r,[o,s]),eu(r,r,[a.w,a.h])}},{key:"_getAdjustedBB",value:function(r,a,n,i){var o=r.x1,s=r.y1,u=r.w,l=r.h,c=r.yOffset;a&&(o-=a,s-=a,u+=2*a,l+=2*a);var f=0,v=u*i;return n&&i<1?u=v:!n&&i<1&&(f=u-v,o+=f,u=v),{x1:o,y1:s,w:u,h:l,xOffset:f,yOffset:c}}},{key:"drawPickingRectangle",value:function(r,a,n){var i=this.atlasManager.getRenderTypeOpts(n),o=this.instanceCount;this.vertTypeBuffer.getView(o)[0]=da;var s=this.indexBuffer.getView(o);va(a,s);var u=this.colorBuffer.getView(o);Vr([0,0,0],1,u);var l=this.transformBuffer.getMatrixView(o);this.setTransformMatrix(r,l,i),this.simpleCount++,this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}},{key:"drawNode",value:function(r,a,n){var i=this.simpleShapeOptions.get(n);if(this._isVisible(r,i)){var o=i.shapeProps,s=this._getVertTypeForShape(r,o.shape);if(s===void 0||i.isSimple&&!i.isSimple(r)){this.drawTexture(r,a,n);return}var u=this.instanceCount;if(this.vertTypeBuffer.getView(u)[0]=s,s===Zn||s===Ha){var l=i.getBoundingBox(r),c=this._getCornerRadius(r,o.radius,l),f=this.cornerRadiusBuffer.getView(u);f[0]=c,f[1]=c,f[2]=c,f[3]=c,s===Ha&&(f[0]=0,f[2]=0)}var v=this.indexBuffer.getView(u);va(a,v);var h=r.pstyle(o.color).value,d=r.pstyle(o.opacity).value,m=this.colorBuffer.getView(u);Vr(h,d,m);var p=this.lineWidthBuffer.getView(u);if(p[0]=0,p[1]=0,o.border){var g=r.pstyle("border-width").value;if(g>0){var y=r.pstyle("border-color").value,b=r.pstyle("border-opacity").value,w=this.borderColorBuffer.getView(u);Vr(y,b,w);var E=r.pstyle("border-position").value;if(E==="inside")p[0]=0,p[1]=-g;else if(E==="outside")p[0]=g,p[1]=0;else{var C=g/2;p[0]=C,p[1]=-C}}}var x=this.transformBuffer.getMatrixView(u);this.setTransformMatrix(r,x,i),this.simpleCount++,this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}},{key:"_getVertTypeForShape",value:function(r,a){var n=r.pstyle(a).value;switch(n){case"rectangle":return da;case"ellipse":return Ka;case"roundrectangle":case"round-rectangle":return Zn;case"bottom-round-rectangle":return Ha;default:return}}},{key:"_getCornerRadius",value:function(r,a,n){var i=n.w,o=n.h;if(r.pstyle(a).value==="auto")return kr(i,o);var s=r.pstyle(a).pfValue,u=i/2,l=o/2;return Math.min(s,l,u)}},{key:"drawEdgeArrow",value:function(r,a,n){if(r.visible()){var i=r._private.rscratch,o,s,u;if(n==="source"?(o=i.arrowStartX,s=i.arrowStartY,u=i.srcArrowAngle):(o=i.arrowEndX,s=i.arrowEndY,u=i.tgtArrowAngle),!(isNaN(o)||o==null||isNaN(s)||s==null||isNaN(u)||u==null)){var l=r.pstyle(n+"-arrow-shape").value;if(l!=="none"){var c=r.pstyle(n+"-arrow-color").value,f=r.pstyle("opacity").value,v=r.pstyle("line-opacity").value,h=f*v,d=r.pstyle("width").pfValue,m=r.pstyle("arrow-scale").value,p=this.r.getArrowWidth(d,m),g=this.instanceCount,y=this.transformBuffer.getMatrixView(g);gf(y),hi(y,y,[o,s]),eu(y,y,[p,p]),mf(y,y,u),this.vertTypeBuffer.getView(g)[0]=Bs;var b=this.indexBuffer.getView(g);va(a,b);var w=this.colorBuffer.getView(g);Vr(c,h,w),this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}}}},{key:"drawEdgeLine",value:function(r,a){if(r.visible()){var n=this._getEdgePoints(r);if(n){var i=r.pstyle("opacity").value,o=r.pstyle("line-opacity").value,s=r.pstyle("width").pfValue,u=r.pstyle("line-color").value,l=i*o;if(n.length/2+this.instanceCount>this.maxInstances&&this.endBatch(),n.length==4){var c=this.instanceCount;this.vertTypeBuffer.getView(c)[0]=yf;var f=this.indexBuffer.getView(c);va(a,f);var v=this.colorBuffer.getView(c);Vr(u,l,v);var h=this.lineWidthBuffer.getView(c);h[0]=s;var d=this.pointAPointBBuffer.getView(c);d[0]=n[0],d[1]=n[1],d[2]=n[2],d[3]=n[3],this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}else for(var m=0;m<n.length-2;m+=2){var p=this.instanceCount;this.vertTypeBuffer.getView(p)[0]=bf;var g=this.indexBuffer.getView(p);va(a,g);var y=this.colorBuffer.getView(p);Vr(u,l,y);var b=this.lineWidthBuffer.getView(p);b[0]=s;var w=n[m-2],E=n[m-1],C=n[m],x=n[m+1],R=n[m+2],S=n[m+3],P=n[m+4],k=n[m+5];m==0&&(w=2*C-R+.001,E=2*x-S+.001),m==n.length-4&&(P=2*R-C+.001,k=2*S-x+.001);var B=this.pointAPointBBuffer.getView(p);B[0]=w,B[1]=E,B[2]=C,B[3]=x;var D=this.pointCPointDBuffer.getView(p);D[0]=R,D[1]=S,D[2]=P,D[3]=k,this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}}}},{key:"_getEdgePoints",value:function(r){var a=r._private.rscratch;if(!(a.badLine||a.allpts==null||isNaN(a.allpts[0]))){var n=a.allpts;if(n.length==4)return n;var i=this._getNumSegments(r);return this._getCurveSegmentPoints(n,i)}}},{key:"_getNumSegments",value:function(r){var a=15;return Math.min(Math.max(a,5),this.maxInstances)}},{key:"_getCurveSegmentPoints",value:function(r,a){if(r.length==4)return r;for(var n=Array((a+1)*2),i=0;i<=a;i++)if(i==0)n[0]=r[0],n[1]=r[1];else if(i==a)n[i*2]=r[r.length-2],n[i*2+1]=r[r.length-1];else{var o=i/a;this._setCurvePoint(r,o,n,i*2)}return n}},{key:"_setCurvePoint",value:function(r,a,n,i){if(r.length<=2)n[i]=r[0],n[i+1]=r[1];else{for(var o=Array(r.length-2),s=0;s<o.length;s+=2){var u=(1-a)*r[s]+a*r[s+2],l=(1-a)*r[s+1]+a*r[s+3];o[s]=u,o[s+1]=l}return this._setCurvePoint(o,a,n,i)}}},{key:"endBatch",value:function(){var r=this.gl,a=this.vao,n=this.vertexCount,i=this.instanceCount;if(i!==0){var o=this.renderTarget.picking?this.pickingProgram:this.program;r.useProgram(o),r.bindVertexArray(a);var s=kt(this.buffers),u;try{for(s.s();!(u=s.n()).done;){var l=u.value;l.bufferSubData(i)}}catch(d){s.e(d)}finally{s.f()}for(var c=this.batchManager.getAtlases(),f=0;f<c.length;f++)c[f].bufferIfNeeded(r);for(var v=0;v<c.length;v++)r.activeTexture(r.TEXTURE0+v),r.bindTexture(r.TEXTURE_2D,c[v].texture),r.uniform1i(o.uTextures[v],v);r.uniform1f(o.uZoom,yx(this.r)),r.uniformMatrix3fv(o.uPanZoomMatrix,!1,this.panZoomMatrix),r.uniform1i(o.uAtlasSize,this.batchManager.getAtlasSize());var h=Vr(this.bgColor,1);r.uniform4fv(o.uBGColor,h),r.drawArraysInstanced(r.TRIANGLES,0,n,i),r.bindVertexArray(null),r.bindTexture(r.TEXTURE_2D,null),this.debug&&this.batchDebugInfo.push({count:i,atlasCount:c.length}),this.startBatch()}}},{key:"getDebugInfo",value:function(){var r=this.atlasManager.getDebugInfo(),a=r.reduce(function(o,s){return o+s.atlasCount},0),n=this.batchDebugInfo,i=n.reduce(function(o,s){return o+s.count},0);return{atlasInfo:r,totalAtlases:a,wrappedCount:this.wrappedCount,simpleCount:this.simpleCount,batchCount:n.length,batchInfo:n,totalInstances:i}}}])}(),Rd={};Rd.initWebgl=function(t,e){var r=this,a=r.data.contexts[r.WEBGL];t.bgColor=qx(r),t.webglTexSize=Math.min(t.webglTexSize,a.getParameter(a.MAX_TEXTURE_SIZE)),t.webglTexRows=Math.min(t.webglTexRows,54),t.webglTexRowsNodes=Math.min(t.webglTexRowsNodes,54),t.webglBatchSize=Math.min(t.webglBatchSize,16384),t.webglTexPerBatch=Math.min(t.webglTexPerBatch,a.getParameter(a.MAX_TEXTURE_IMAGE_UNITS)),r.webglDebug=t.webglDebug,r.webglDebugShowAtlases=t.webglDebugShowAtlases,r.pickingFrameBuffer=Px(a),r.pickingFrameBuffer.needsDraw=!0,r.drawing=new Vx(r,a,t);var n=function(f){return function(v){return r.getTextAngle(v,f)}},i=function(f){return function(v){var h=v.pstyle(f);return h&&h.value}},o=function(f){return function(v){return v.pstyle("".concat(f,"-opacity")).value>0}},s=function(f){var v=f.pstyle("text-events").strValue==="yes";return v?Di.USE_BB:Di.IGNORE},u=function(f){var v=f.position(),h=v.x,d=v.y,m=f.outerWidth(),p=f.outerHeight();return{w:m,h:p,x1:h-m/2,y1:d-p/2}};r.drawing.addAtlasCollection("node",{texRows:t.webglTexRowsNodes}),r.drawing.addAtlasCollection("label",{texRows:t.webglTexRows}),r.drawing.addTextureAtlasRenderType("node-body",{collection:"node",getKey:e.getStyleKey,getBoundingBox:e.getElementBox,drawElement:e.drawElement}),r.drawing.addSimpleShapeRenderType("node-body",{getBoundingBox:u,isSimple:wx,shapeProps:{shape:"shape",color:"background-color",opacity:"background-opacity",radius:"corner-radius",border:!0}}),r.drawing.addSimpleShapeRenderType("node-overlay",{getBoundingBox:u,isVisible:o("overlay"),shapeProps:{shape:"overlay-shape",color:"overlay-color",opacity:"overlay-opacity",padding:"overlay-padding",radius:"overlay-corner-radius"}}),r.drawing.addSimpleShapeRenderType("node-underlay",{getBoundingBox:u,isVisible:o("underlay"),shapeProps:{shape:"underlay-shape",color:"underlay-color",opacity:"underlay-opacity",padding:"underlay-padding",radius:"underlay-corner-radius"}}),r.drawing.addTextureAtlasRenderType("label",{collection:"label",getTexPickingMode:s,getKey:As(e.getLabelKey,null),getBoundingBox:Ls(e.getLabelBox,null),drawClipped:!0,drawElement:e.drawLabel,getRotation:n(null),getRotationPoint:e.getLabelRotationPoint,getRotationOffset:e.getLabelRotationOffset,isVisible:i("label")}),r.drawing.addTextureAtlasRenderType("edge-source-label",{collection:"label",getTexPickingMode:s,getKey:As(e.getSourceLabelKey,"source"),getBoundingBox:Ls(e.getSourceLabelBox,"source"),drawClipped:!0,drawElement:e.drawSourceLabel,getRotation:n("source"),getRotationPoint:e.getSourceLabelRotationPoint,getRotationOffset:e.getSourceLabelRotationOffset,isVisible:i("source-label")}),r.drawing.addTextureAtlasRenderType("edge-target-label",{collection:"label",getTexPickingMode:s,getKey:As(e.getTargetLabelKey,"target"),getBoundingBox:Ls(e.getTargetLabelBox,"target"),drawClipped:!0,drawElement:e.drawTargetLabel,getRotation:n("target"),getRotationPoint:e.getTargetLabelRotationPoint,getRotationOffset:e.getTargetLabelRotationOffset,isVisible:i("target-label")});var l=Cn(function(){console.log("garbage collect flag set"),r.data.gc=!0},1e4);r.onUpdateEleCalcs(function(c,f){var v=!1;f&&f.length>0&&(v|=r.drawing.invalidate(f)),v&&l()}),_x(r)};function qx(t){var e=t.cy.container(),r=e&&e.style&&e.style.backgroundColor||"white";return rv(r)}function Pd(t,e){var r=t._private.rscratch;return Rt(r,"labelWrapCachedLines",e)||[]}var As=function(e,r){return function(a){var n=e(a),i=Pd(a,r);return i.length>1?i.map(function(o,s){return"".concat(n,"_").concat(s)}):n}},Ls=function(e,r){return function(a,n){var i=e(a);if(typeof n=="string"){var o=n.indexOf("_");if(o>0){var s=Number(n.substring(o+1)),u=Pd(a,r),l=i.h/u.length,c=l*s,f=i.y1+c;return{x1:i.x1,w:i.w,y1:f,h:l,yOffset:c}}}return i}};function _x(t){{var e=t.render;t.render=function(i){i=i||{};var o=t.cy;t.webgl&&(o.zoom()>bd?($x(t),e.call(t,i)):(Wx(t),Dd(t,i,rn.SCREEN)))}}{var r=t.matchCanvasSize;t.matchCanvasSize=function(i){r.call(t,i),t.pickingFrameBuffer.setFramebufferAttachmentSizes(t.canvasWidth,t.canvasHeight),t.pickingFrameBuffer.needsDraw=!0}}t.findNearestElements=function(i,o,s,u){return Xx(t,i,o)};{var a=t.invalidateCachedZSortedEles;t.invalidateCachedZSortedEles=function(){a.call(t),t.pickingFrameBuffer.needsDraw=!0}}{var n=t.notify;t.notify=function(i,o){n.call(t,i,o),i==="viewport"||i==="bounds"?t.pickingFrameBuffer.needsDraw=!0:i==="background"&&t.drawing.invalidate(o,{type:"node-body"})}}}function $x(t){var e=t.data.contexts[t.WEBGL];e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT)}function Wx(t){var e=function(a){a.save(),a.setTransform(1,0,0,1,0,0),a.clearRect(0,0,t.canvasWidth,t.canvasHeight),a.restore()};e(t.data.contexts[t.NODE]),e(t.data.contexts[t.DRAG])}function Gx(t){var e=t.canvasWidth,r=t.canvasHeight,a=Iu(t),n=a.pan,i=a.zoom,o=ks();hi(o,o,[n.x,n.y]),eu(o,o,[i,i]);var s=ks();Dx(s,e,r);var u=ks();return kx(u,s,o),u}function kd(t,e){var r=t.canvasWidth,a=t.canvasHeight,n=Iu(t),i=n.pan,o=n.zoom;e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,r,a),e.translate(i.x,i.y),e.scale(o,o)}function Ux(t,e){t.drawSelectionRectangle(e,function(r){return kd(t,r)})}function Hx(t){var e=t.data.contexts[t.NODE];e.save(),kd(t,e),e.strokeStyle="rgba(0, 0, 0, 0.3)",e.beginPath(),e.moveTo(-1e3,0),e.lineTo(1e3,0),e.stroke(),e.beginPath(),e.moveTo(0,-1e3),e.lineTo(0,1e3),e.stroke(),e.restore()}function Kx(t){var e=function(n,i,o){for(var s=n.atlasManager.getAtlasCollection(i),u=t.data.contexts[t.NODE],l=s.atlases,c=0;c<l.length;c++){var f=l[c],v=f.canvas;if(v){var h=v.width,d=v.height,m=h*c,p=v.height*o,g=.4;u.save(),u.scale(g,g),u.drawImage(v,m,p),u.strokeStyle="black",u.rect(m,p,h,d),u.stroke(),u.restore()}}},r=0;e(t.drawing,"node",r++),e(t.drawing,"label",r++)}function Yx(t,e,r,a,n){var i,o,s,u,l=Iu(t),c=l.pan,f=l.zoom;{var v=bx(t,c,f,e,r),h=rt(v,2),d=h[0],m=h[1],p=6;i=d-p/2,o=m-p/2,s=p,u=p}if(s===0||u===0)return[];var g=t.data.contexts[t.WEBGL];g.bindFramebuffer(g.FRAMEBUFFER,t.pickingFrameBuffer),t.pickingFrameBuffer.needsDraw&&(g.viewport(0,0,g.canvas.width,g.canvas.height),Dd(t,null,rn.PICKING),t.pickingFrameBuffer.needsDraw=!1);var y=s*u,b=new Uint8Array(y*4);g.readPixels(i,o,s,u,g.RGBA,g.UNSIGNED_BYTE,b),g.bindFramebuffer(g.FRAMEBUFFER,null);for(var w=new Set,E=0;E<y;E++){var C=b.slice(E*4,E*4+4),x=Ex(C)-1;x>=0&&w.add(x)}return w}function Xx(t,e,r){var a=Yx(t,e,r),n=t.getCachedZSortedEles(),i,o,s=kt(a),u;try{for(s.s();!(u=s.n()).done;){var l=u.value,c=n[l];if(!i&&c.isNode()&&(i=c),!o&&c.isEdge()&&(o=c),i&&o)break}}catch(f){s.e(f)}finally{s.f()}return[i,o].filter(Boolean)}function Ms(t,e,r){var a=t.drawing;e+=1,r.isNode()?(a.drawNode(r,e,"node-underlay"),a.drawNode(r,e,"node-body"),a.drawTexture(r,e,"label"),a.drawNode(r,e,"node-overlay")):(a.drawEdgeLine(r,e),a.drawEdgeArrow(r,e,"source"),a.drawEdgeArrow(r,e,"target"),a.drawTexture(r,e,"label"),a.drawTexture(r,e,"edge-source-label"),a.drawTexture(r,e,"edge-target-label"))}function Dd(t,e,r){var a;t.webglDebug&&(a=performance.now());var n=t.drawing,i=0;if(r.screen&&t.data.canvasNeedsRedraw[t.SELECT_BOX]&&Ux(t,e),t.data.canvasNeedsRedraw[t.NODE]||r.picking){var o=t.data.contexts[t.WEBGL];r.screen?(o.clearColor(0,0,0,0),o.enable(o.BLEND),o.blendFunc(o.ONE,o.ONE_MINUS_SRC_ALPHA)):o.disable(o.BLEND),o.clear(o.COLOR_BUFFER_BIT|o.DEPTH_BUFFER_BIT),o.viewport(0,0,o.canvas.width,o.canvas.height);var s=Gx(t),u=t.getCachedZSortedEles();if(i=u.length,n.startFrame(s,r),r.screen){for(var l=0;l<u.nondrag.length;l++)Ms(t,l,u.nondrag[l]);for(var c=0;c<u.drag.length;c++)Ms(t,c,u.drag[c])}else if(r.picking)for(var f=0;f<u.length;f++)Ms(t,f,u[f]);n.endFrame(),r.screen&&t.webglDebugShowAtlases&&(Hx(t),Kx(t)),t.data.canvasNeedsRedraw[t.NODE]=!1,t.data.canvasNeedsRedraw[t.DRAG]=!1}if(t.webglDebug){var v=performance.now(),h=!1,d=Math.ceil(v-a),m=n.getDebugInfo(),p=["".concat(i," elements"),"".concat(m.totalInstances," instances"),"".concat(m.batchCount," batches"),"".concat(m.totalAtlases," atlases"),"".concat(m.wrappedCount," wrapped textures"),"".concat(m.simpleCount," simple shapes")].join(", ");if(h)console.log("WebGL (".concat(r.name,") - time ").concat(d,"ms, ").concat(p));else{console.log("WebGL (".concat(r.name,") - frame time ").concat(d,"ms")),console.log("Totals:"),console.log("  ".concat(p)),console.log("Texture Atlases Used:");var g=m.atlasInfo,y=kt(g),b;try{for(y.s();!(b=y.n()).done;){var w=b.value;console.log("  ".concat(w.type,": ").concat(w.keyCount," keys, ").concat(w.atlasCount," atlases"))}}catch(E){y.e(E)}finally{y.f()}console.log("")}}t.data.gc&&(console.log("Garbage Collect!"),t.data.gc=!1,n.gc())}var Nr={};Nr.drawPolygonPath=function(t,e,r,a,n,i){var o=a/2,s=n/2;t.beginPath&&t.beginPath(),t.moveTo(e+o*i[0],r+s*i[1]);for(var u=1;u<i.length/2;u++)t.lineTo(e+o*i[u*2],r+s*i[u*2+1]);t.closePath()};Nr.drawRoundPolygonPath=function(t,e,r,a,n,i,o){o.forEach(function(s){return cd(t,s)}),t.closePath()};Nr.drawRoundRectanglePath=function(t,e,r,a,n,i){var o=a/2,s=n/2,u=i==="auto"?kr(a,n):Math.min(i,s,o);t.beginPath&&t.beginPath(),t.moveTo(e,r-s),t.arcTo(e+o,r-s,e+o,r,u),t.arcTo(e+o,r+s,e,r+s,u),t.arcTo(e-o,r+s,e-o,r,u),t.arcTo(e-o,r-s,e,r-s,u),t.lineTo(e,r-s),t.closePath()};Nr.drawBottomRoundRectanglePath=function(t,e,r,a,n,i){var o=a/2,s=n/2,u=i==="auto"?kr(a,n):i;t.beginPath&&t.beginPath(),t.moveTo(e,r-s),t.lineTo(e+o,r-s),t.lineTo(e+o,r),t.arcTo(e+o,r+s,e,r+s,u),t.arcTo(e-o,r+s,e-o,r,u),t.lineTo(e-o,r-s),t.lineTo(e,r-s),t.closePath()};Nr.drawCutRectanglePath=function(t,e,r,a,n,i,o){var s=a/2,u=n/2,l=o==="auto"?wu():o;t.beginPath&&t.beginPath(),t.moveTo(e-s+l,r-u),t.lineTo(e+s-l,r-u),t.lineTo(e+s,r-u+l),t.lineTo(e+s,r+u-l),t.lineTo(e+s-l,r+u),t.lineTo(e-s+l,r+u),t.lineTo(e-s,r+u-l),t.lineTo(e-s,r-u+l),t.closePath()};Nr.drawBarrelPath=function(t,e,r,a,n){var i=a/2,o=n/2,s=e-i,u=e+i,l=r-o,c=r+o,f=qs(a,n),v=f.widthOffset,h=f.heightOffset,d=f.ctrlPtOffsetPct*v;t.beginPath&&t.beginPath(),t.moveTo(s,l+h),t.lineTo(s,c-h),t.quadraticCurveTo(s+d,c,s+v,c),t.lineTo(u-v,c),t.quadraticCurveTo(u-d,c,u,c-h),t.lineTo(u,l+h),t.quadraticCurveTo(u-d,l,u-v,l),t.lineTo(s+v,l),t.quadraticCurveTo(s+d,l,s,l+h),t.closePath()};var wf=Math.sin(0),xf=Math.cos(0),tu={},ru={},Bd=Math.PI/40;for(var ha=0*Math.PI;ha<2*Math.PI;ha+=Bd)tu[ha]=Math.sin(ha),ru[ha]=Math.cos(ha);Nr.drawEllipsePath=function(t,e,r,a,n){if(t.beginPath&&t.beginPath(),t.ellipse)t.ellipse(e,r,a/2,n/2,0,0,2*Math.PI);else for(var i,o,s=a/2,u=n/2,l=0*Math.PI;l<2*Math.PI;l+=Bd)i=e-s*tu[l]*wf+s*ru[l]*xf,o=r+u*ru[l]*wf+u*tu[l]*xf,l===0?t.moveTo(i,o):t.lineTo(i,o);t.closePath()};var Dn={};Dn.createBuffer=function(t,e){var r=document.createElement("canvas");return r.width=t,r.height=e,[r,r.getContext("2d")]};Dn.bufferCanvasImage=function(t){var e=this.cy,r=e.mutableElements(),a=r.boundingBox(),n=this.findContainerClientCoords(),i=t.full?Math.ceil(a.w):n[2],o=t.full?Math.ceil(a.h):n[3],s=ie(t.maxWidth)||ie(t.maxHeight),u=this.getPixelRatio(),l=1;if(t.scale!==void 0)i*=t.scale,o*=t.scale,l=t.scale;else if(s){var c=1/0,f=1/0;ie(t.maxWidth)&&(c=l*t.maxWidth/i),ie(t.maxHeight)&&(f=l*t.maxHeight/o),l=Math.min(c,f),i*=l,o*=l}s||(i*=u,o*=u,l*=u);var v=document.createElement("canvas");v.width=i,v.height=o,v.style.width=i+"px",v.style.height=o+"px";var h=v.getContext("2d");if(i>0&&o>0){h.clearRect(0,0,i,o),h.globalCompositeOperation="source-over";var d=this.getCachedZSortedEles();if(t.full)h.translate(-a.x1*l,-a.y1*l),h.scale(l,l),this.drawElements(h,d),h.scale(1/l,1/l),h.translate(a.x1*l,a.y1*l);else{var m=e.pan(),p={x:m.x*l,y:m.y*l};l*=e.zoom(),h.translate(p.x,p.y),h.scale(l,l),this.drawElements(h,d),h.scale(1/l,1/l),h.translate(-p.x,-p.y)}t.bg&&(h.globalCompositeOperation="destination-over",h.fillStyle=t.bg,h.rect(0,0,i,o),h.fill())}return v};function Zx(t,e){for(var r=atob(t),a=new ArrayBuffer(r.length),n=new Uint8Array(a),i=0;i<r.length;i++)n[i]=r.charCodeAt(i);return new Blob([a],{type:e})}function Ef(t){var e=t.indexOf(",");return t.substr(e+1)}function Ad(t,e,r){var a=function(){return e.toDataURL(r,t.quality)};switch(t.output){case"blob-promise":return new Ma(function(n,i){try{e.toBlob(function(o){o!=null?n(o):i(new Error("`canvas.toBlob()` sent a null value in its callback"))},r,t.quality)}catch(o){i(o)}});case"blob":return Zx(Ef(a()),r);case"base64":return Ef(a());case"base64uri":default:return a()}}Dn.png=function(t){return Ad(t,this.bufferCanvasImage(t),"image/png")};Dn.jpg=function(t){return Ad(t,this.bufferCanvasImage(t),"image/jpeg")};var Ld={};Ld.nodeShapeImpl=function(t,e,r,a,n,i,o,s){switch(t){case"ellipse":return this.drawEllipsePath(e,r,a,n,i);case"polygon":return this.drawPolygonPath(e,r,a,n,i,o);case"round-polygon":return this.drawRoundPolygonPath(e,r,a,n,i,o,s);case"roundrectangle":case"round-rectangle":return this.drawRoundRectanglePath(e,r,a,n,i,s);case"cutrectangle":case"cut-rectangle":return this.drawCutRectanglePath(e,r,a,n,i,o,s);case"bottomroundrectangle":case"bottom-round-rectangle":return this.drawBottomRoundRectanglePath(e,r,a,n,i,s);case"barrel":return this.drawBarrelPath(e,r,a,n,i)}};var Qx=Md,Re=Md.prototype;Re.CANVAS_LAYERS=3;Re.SELECT_BOX=0;Re.DRAG=1;Re.NODE=2;Re.WEBGL=3;Re.CANVAS_TYPES=["2d","2d","2d","webgl2"];Re.BUFFER_COUNT=3;Re.TEXTURE_BUFFER=0;Re.MOTIONBLUR_BUFFER_NODE=1;Re.MOTIONBLUR_BUFFER_DRAG=2;function Md(t){var e=this,r=e.cy.window(),a=r.document;t.webgl&&(Re.CANVAS_LAYERS=e.CANVAS_LAYERS=4,console.log("webgl rendering enabled")),e.data={canvases:new Array(Re.CANVAS_LAYERS),contexts:new Array(Re.CANVAS_LAYERS),canvasNeedsRedraw:new Array(Re.CANVAS_LAYERS),bufferCanvases:new Array(Re.BUFFER_COUNT),bufferContexts:new Array(Re.CANVAS_LAYERS)};var n="-webkit-tap-highlight-color",i="rgba(0,0,0,0)";e.data.canvasContainer=a.createElement("div");var o=e.data.canvasContainer.style;e.data.canvasContainer.style[n]=i,o.position="relative",o.zIndex="0",o.overflow="hidden";var s=t.cy.container();s.appendChild(e.data.canvasContainer),s.style[n]=i;var u={"-webkit-user-select":"none","-moz-user-select":"-moz-none","user-select":"none","-webkit-tap-highlight-color":"rgba(0,0,0,0)","outline-style":"none"};Xg()&&(u["-ms-touch-action"]="none",u["touch-action"]="none");for(var l=0;l<Re.CANVAS_LAYERS;l++){var c=e.data.canvases[l]=a.createElement("canvas"),f=Re.CANVAS_TYPES[l];e.data.contexts[l]=c.getContext(f),e.data.contexts[l]||Ue("Could not create canvas of type "+f),Object.keys(u).forEach(function(Q){c.style[Q]=u[Q]}),c.style.position="absolute",c.setAttribute("data-id","layer"+l),c.style.zIndex=String(Re.CANVAS_LAYERS-l),e.data.canvasContainer.appendChild(c),e.data.canvasNeedsRedraw[l]=!1}e.data.topCanvas=e.data.canvases[0],e.data.canvases[Re.NODE].setAttribute("data-id","layer"+Re.NODE+"-node"),e.data.canvases[Re.SELECT_BOX].setAttribute("data-id","layer"+Re.SELECT_BOX+"-selectbox"),e.data.canvases[Re.DRAG].setAttribute("data-id","layer"+Re.DRAG+"-drag"),e.data.canvases[Re.WEBGL]&&e.data.canvases[Re.WEBGL].setAttribute("data-id","layer"+Re.WEBGL+"-webgl");for(var l=0;l<Re.BUFFER_COUNT;l++)e.data.bufferCanvases[l]=a.createElement("canvas"),e.data.bufferContexts[l]=e.data.bufferCanvases[l].getContext("2d"),e.data.bufferCanvases[l].style.position="absolute",e.data.bufferCanvases[l].setAttribute("data-id","buffer"+l),e.data.bufferCanvases[l].style.zIndex=String(-l-1),e.data.bufferCanvases[l].style.visibility="hidden";e.pathsEnabled=!0;var v=Dt(),h=function(F){return{x:(F.x1+F.x2)/2,y:(F.y1+F.y2)/2}},d=function(F){return{x:-F.w/2,y:-F.h/2}},m=function(F){var q=F[0]._private,U=q.oldBackgroundTimestamp===q.backgroundTimestamp;return!U},p=function(F){return F[0]._private.nodeKey},g=function(F){return F[0]._private.labelStyleKey},y=function(F){return F[0]._private.sourceLabelStyleKey},b=function(F){return F[0]._private.targetLabelStyleKey},w=function(F,q,U,re,oe){return e.drawElement(F,q,U,!1,!1,oe)},E=function(F,q,U,re,oe){return e.drawElementText(F,q,U,re,"main",oe)},C=function(F,q,U,re,oe){return e.drawElementText(F,q,U,re,"source",oe)},x=function(F,q,U,re,oe){return e.drawElementText(F,q,U,re,"target",oe)},R=function(F){return F.boundingBox(),F[0]._private.bodyBounds},S=function(F){return F.boundingBox(),F[0]._private.labelBounds.main||v},P=function(F){return F.boundingBox(),F[0]._private.labelBounds.source||v},k=function(F){return F.boundingBox(),F[0]._private.labelBounds.target||v},B=function(F,q){return q},D=function(F){return h(R(F))},A=function(F,q,U){var re=F?F+"-":"";return{x:q.x+U.pstyle(re+"text-margin-x").pfValue,y:q.y+U.pstyle(re+"text-margin-y").pfValue}},L=function(F,q,U){var re=F[0]._private.rscratch;return{x:re[q],y:re[U]}},I=function(F){return A("",L(F,"labelX","labelY"),F)},M=function(F){return A("source",L(F,"sourceLabelX","sourceLabelY"),F)},O=function(F){return A("target",L(F,"targetLabelX","targetLabelY"),F)},V=function(F){return d(R(F))},W=function(F){return d(P(F))},N=function(F){return d(k(F))},z=function(F){var q=S(F),U=d(S(F));if(F.isNode()){switch(F.pstyle("text-halign").value){case"left":U.x=-q.w-(q.leftPad||0);break;case"right":U.x=-(q.rightPad||0);break}switch(F.pstyle("text-valign").value){case"top":U.y=-q.h-(q.topPad||0);break;case"bottom":U.y=-(q.botPad||0);break}}return U},X=e.data.eleTxrCache=new Ja(e,{getKey:p,doesEleInvalidateKey:m,drawElement:w,getBoundingBox:R,getRotationPoint:D,getRotationOffset:V,allowEdgeTxrCaching:!1,allowParentTxrCaching:!1}),j=e.data.lblTxrCache=new Ja(e,{getKey:g,drawElement:E,getBoundingBox:S,getRotationPoint:I,getRotationOffset:z,isVisible:B}),J=e.data.slbTxrCache=new Ja(e,{getKey:y,drawElement:C,getBoundingBox:P,getRotationPoint:M,getRotationOffset:W,isVisible:B}),G=e.data.tlbTxrCache=new Ja(e,{getKey:b,drawElement:x,getBoundingBox:k,getRotationPoint:O,getRotationOffset:N,isVisible:B}),Z=e.data.lyrTxrCache=new wd(e);e.onUpdateEleCalcs(function(F,q){X.invalidateElements(q),j.invalidateElements(q),J.invalidateElements(q),G.invalidateElements(q),Z.invalidateElements(q);for(var U=0;U<q.length;U++){var re=q[U]._private;re.oldBackgroundTimestamp=re.backgroundTimestamp}});var ae=function(F){for(var q=0;q<F.length;q++)Z.enqueueElementRefinement(F[q].ele)};X.onDequeue(ae),j.onDequeue(ae),J.onDequeue(ae),G.onDequeue(ae),t.webgl&&e.initWebgl(t,{getStyleKey:p,getLabelKey:g,getSourceLabelKey:y,getTargetLabelKey:b,drawElement:w,drawLabel:E,drawSourceLabel:C,drawTargetLabel:x,getElementBox:R,getLabelBox:S,getSourceLabelBox:P,getTargetLabelBox:k,getElementRotationPoint:D,getElementRotationOffset:V,getLabelRotationPoint:I,getSourceLabelRotationPoint:M,getTargetLabelRotationPoint:O,getLabelRotationOffset:z,getSourceLabelRotationOffset:W,getTargetLabelRotationOffset:N})}Re.redrawHint=function(t,e){var r=this;switch(t){case"eles":r.data.canvasNeedsRedraw[Re.NODE]=e;break;case"drag":r.data.canvasNeedsRedraw[Re.DRAG]=e;break;case"select":r.data.canvasNeedsRedraw[Re.SELECT_BOX]=e;break;case"gc":r.data.gc=!0;break}};var jx=typeof Path2D<"u";Re.path2dEnabled=function(t){if(t===void 0)return this.pathsEnabled;this.pathsEnabled=!!t};Re.usePaths=function(){return jx&&this.pathsEnabled};Re.setImgSmoothing=function(t,e){t.imageSmoothingEnabled!=null?t.imageSmoothingEnabled=e:(t.webkitImageSmoothingEnabled=e,t.mozImageSmoothingEnabled=e,t.msImageSmoothingEnabled=e)};Re.getImgSmoothing=function(t){return t.imageSmoothingEnabled!=null?t.imageSmoothingEnabled:t.webkitImageSmoothingEnabled||t.mozImageSmoothingEnabled||t.msImageSmoothingEnabled};Re.makeOffscreenCanvas=function(t,e){var r;if((typeof OffscreenCanvas>"u"?"undefined":nt(OffscreenCanvas))!=="undefined")r=new OffscreenCanvas(t,e);else{var a=this.cy.window(),n=a.document;r=n.createElement("canvas"),r.width=t,r.height=e}return r};[xd,tr,yr,Mu,na,Or,Et,Rd,Nr,Dn,Ld].forEach(function(t){ge(Re,t)});var Jx=[{name:"null",impl:sd},{name:"base",impl:md},{name:"canvas",impl:Qx}],e1=[{type:"layout",extensions:Rw},{type:"renderer",extensions:Jx}],Id={},Od={};function Nd(t,e,r){var a=r,n=function(R){Oe("Can not register `"+e+"` for `"+t+"` since `"+R+"` already exists in the prototype and can not be overridden")};if(t==="core"){if(dn.prototype[e])return n(e);dn.prototype[e]=r}else if(t==="collection"){if(dt.prototype[e])return n(e);dt.prototype[e]=r}else if(t==="layout"){for(var i=function(R){this.options=R,r.call(this,R),Ae(this._private)||(this._private={}),this._private.cy=R.cy,this._private.listeners=[],this.createEmitter()},o=i.prototype=Object.create(r.prototype),s=[],u=0;u<s.length;u++){var l=s[u];o[l]=o[l]||function(){return this}}o.start&&!o.run?o.run=function(){return this.start(),this}:!o.start&&o.run&&(o.start=function(){return this.run(),this});var c=r.prototype.stop;o.stop=function(){var x=this.options;if(x&&x.animate){var R=this.animations;if(R)for(var S=0;S<R.length;S++)R[S].stop()}return c?c.call(this):this.emit("layoutstop"),this},o.destroy||(o.destroy=function(){return this}),o.cy=function(){return this._private.cy};var f=function(R){return R._private.cy},v={addEventFields:function(R,S){S.layout=R,S.cy=f(R),S.target=R},bubble:function(){return!0},parent:function(R){return f(R)}};ge(o,{createEmitter:function(){return this._private.emitter=new Wi(v,this),this},emitter:function(){return this._private.emitter},on:function(R,S){return this.emitter().on(R,S),this},one:function(R,S){return this.emitter().one(R,S),this},once:function(R,S){return this.emitter().one(R,S),this},removeListener:function(R,S){return this.emitter().removeListener(R,S),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},emit:function(R,S){return this.emitter().emit(R,S),this}}),Ie.eventAliasesOn(o),a=i}else if(t==="renderer"&&e!=="null"&&e!=="base"){var h=Fd("renderer","base"),d=h.prototype,m=r,p=r.prototype,g=function(){h.apply(this,arguments),m.apply(this,arguments)},y=g.prototype;for(var b in d){var w=d[b],E=p[b]!=null;if(E)return n(b);y[b]=w}for(var C in p)y[C]=p[C];d.clientFunctions.forEach(function(x){y[x]=y[x]||function(){Ue("Renderer does not implement `renderer."+x+"()` on its prototype")}}),a=g}else if(t==="__proto__"||t==="constructor"||t==="prototype")return Ue(t+" is an illegal type to be registered, possibly lead to prototype pollutions");return av({map:Id,keys:[t,e],value:a})}function Fd(t,e){return nv({map:Id,keys:[t,e]})}function t1(t,e,r,a,n){return av({map:Od,keys:[t,e,r,a],value:n})}function r1(t,e,r,a){return nv({map:Od,keys:[t,e,r,a]})}var au=function(){if(arguments.length===2)return Fd.apply(null,arguments);if(arguments.length===3)return Nd.apply(null,arguments);if(arguments.length===4)return r1.apply(null,arguments);if(arguments.length===5)return t1.apply(null,arguments);Ue("Invalid extension access syntax")};dn.prototype.extension=au;e1.forEach(function(t){t.extensions.forEach(function(e){Nd(t.type,e.name,e.impl)})});var Bi=function(){if(!(this instanceof Bi))return new Bi;this.length=0},Jr=Bi.prototype;Jr.instanceString=function(){return"stylesheet"};Jr.selector=function(t){var e=this.length++;return this[e]={selector:t,properties:[]},this};Jr.css=function(t,e){var r=this.length-1;if(de(t))this[r].properties.push({name:t,value:e});else if(Ae(t))for(var a=t,n=Object.keys(a),i=0;i<n.length;i++){var o=n[i],s=a[o];if(s!=null){var u=ut.properties[o]||ut.properties[Mi(o)];if(u!=null){var l=u.name,c=s;this[r].properties.push({name:l,value:c})}}}return this};Jr.style=Jr.css;Jr.generateStyle=function(t){var e=new ut(t);return this.appendToStyle(e)};Jr.appendToStyle=function(t){for(var e=0;e<this.length;e++){var r=this[e],a=r.selector,n=r.properties;t.selector(a);for(var i=0;i<n.length;i++){var o=n[i];t.css(o.name,o.value)}}return t};var a1="3.32.0",ea=function(e){if(e===void 0&&(e={}),Ae(e))return new dn(e);if(de(e))return au.apply(au,arguments)};ea.use=function(t){var e=Array.prototype.slice.call(arguments,1);return e.unshift(ea),t.apply(null,e),this};ea.warnings=function(t){return fv(t)};ea.version=a1;ea.stylesheet=ea.Stylesheet=Bi;const{string:Qn,array:Cf,object:jn,number:Ya,bool:Bt,oneOfType:pa,any:Jn,func:Xa}=Fp,n1={id:Qn,className:Qn,style:pa([Qn,jn]),elements:pa([Cf,Jn]),stylesheet:pa([Cf,Jn]),layout:pa([jn,Jn]),pan:pa([jn,Jn]),zoom:Ya,panningEnabled:Bt,userPanningEnabled:Bt,minZoom:Ya,maxZoom:Ya,zoomingEnabled:Bt,userZoomingEnabled:Bt,boxSelectionEnabled:Bt,autoungrabify:Bt,autolock:Bt,autounselectify:Bt,get:Xa,toJson:Xa,diff:Xa,forEach:Xa,cy:Xa,headless:Bt,styleEnabled:Bt,hideEdgesOnViewport:Bt,textureOnViewport:Bt,motionBlur:Bt,motionBlurOpacity:Ya,wheelSensitivity:Ya,pixelRatio:pa([Qn,jn])},zd=(t,e)=>{if(((i,o)=>i==null||o==null)(t,e)&&(t!=null||e!=null))return!0;if(t===e)return!1;if(typeof t!="object"||typeof e!="object")return t!==e;const r=Object.keys(t),a=Object.keys(e),n=i=>t[i]!==e[i];return r.length!==a.length||!(!r.some(n)&&!a.some(n))},Vt=(t,e)=>t!=null?t[e]:null,i1={diff:zd,get:Vt,toJson:t=>t,forEach:(t,e)=>t.forEach(e),elements:[{data:{id:"a",label:"Example node A"}},{data:{id:"b",label:"Example node B"}},{data:{id:"e",source:"a",target:"b"}}],stylesheet:[{selector:"node",style:{label:"data(label)"}}],zoom:1,pan:{x:0,y:0}},ei=(t,e,r,a)=>r(Vt(t,a),Vt(e,a)),o1=(t,e,r,a,n,i,o)=>{t.batch(()=>{(a===zd||ei(e,r,a,"elements"))&&c1(t,Vt(e,"elements"),Vt(r,"elements"),n,i,o,a),ei(e,r,a,"stylesheet")&&l1(t,Vt(e,"stylesheet"),Vt(r,"stylesheet"),n),["zoom","minZoom","maxZoom","zoomingEnabled","userZoomingEnabled","pan","panningEnabled","userPanningEnabled","boxSelectionEnabled","autoungrabify","autolock","autounselectify"].forEach(s=>{ei(e,r,a,s)&&s1(t,s,Vt(e,s),Vt(r,s),n)})}),ei(e,r,a,"layout")&&u1(t,Vt(e,"layout"),Vt(r,"layout"),n)},s1=(t,e,r,a,n)=>{t[e](n(a))},u1=(t,e,r,a)=>{const n=a(r);n!=null&&t.layout(n).run()},l1=(t,e,r,a)=>{const n=t.style();n!=null&&n.fromJson(a(r)).update()},c1=(t,e,r,a,n,i,o)=>{const s=[],u=t.collection(),l=[],c={},f={},v=h=>n(n(h,"data"),"id");i(r,h=>{const d=v(h);f[d]=h}),e!=null&&i(e,h=>{const d=v(h);c[d]=h,(m=>f[m]!=null)(d)||u.merge(t.getElementById(d))}),i(r,h=>{const d=v(h),m=(p=>c[p])(d);(p=>c[p]!=null)(d)?l.push({ele1:m,ele2:h}):s.push(a(h))}),u.length>0&&t.remove(u),s.length>0&&t.add(s),l.forEach(({ele1:h,ele2:d})=>f1(t,h,d,a,n,o))},f1=(t,e,r,a,n,i)=>{const o=n(n(r,"data"),"id"),s=t.getElementById(o),u={};["data","position","selected","selectable","locked","grabbable","classes"].forEach(c=>{const f=n(r,c);i(f,n(e,c))&&(u[c]=a(f))});const l=n(r,"scratch");i(l,n(e,"scratch"))&&s.scratch(a(l)),Object.keys(u).length>0&&s.json(u)};class v1 extends Kr.Component{static get propTypes(){return n1}static get defaultProps(){return i1}static normalizeElements(e){if(e.length!=null)return e;{let{nodes:r,edges:a}=e;return r==null&&(r=[]),a==null&&(a=[]),r.concat(a)}}constructor(e){super(e),this.displayName="CytoscapeComponent",this.containerRef=Kr.createRef()}componentDidMount(){const e=this.containerRef.current,{global:r,headless:a,styleEnabled:n,hideEdgesOnViewport:i,textureOnViewport:o,motionBlur:s,motionBlurOpacity:u,wheelSensitivity:l,pixelRatio:c}=this.props,f=this._cy=new ea({container:e,headless:a,styleEnabled:n,hideEdgesOnViewport:i,textureOnViewport:o,motionBlur:s,motionBlurOpacity:u,wheelSensitivity:l,pixelRatio:c});r&&(window[r]=f),this.updateCytoscape(null,this.props)}updateCytoscape(e,r){const a=this._cy,{diff:n,toJson:i,get:o,forEach:s}=r;o1(a,e,r,n,i,o,s),r.cy!=null&&r.cy(a)}componentDidUpdate(e){this.updateCytoscape(e,this.props)}componentWillUnmount(){this._cy.destroy()}render(){const{id:e,className:r,style:a}=this.props;return Kr.createElement("div",{ref:this.containerRef,id:e,className:r,style:a})}}function d1({term:t}){const[e,r]=_.useState(null);if(_.useEffect(()=>{t&&fetch(`${pi}/api/graph?term=${t}`).then(n=>n.json()).then(n=>{if(console.log("後端回傳的 graph 資料:",n),!n||!Array.isArray(n))return r({nodes:[],edges:[]});const i=new Set,o=[],s=[];n.forEach(u=>{u.items.forEach(l=>{[l.source,l.target].forEach(c=>{i.has(c)||(i.add(c),o.push({data:{id:c,label:c}}))}),s.push({data:{source:l.source,target:l.target,label:u.relation}})})}),r({nodes:o,edges:s})}).catch(n=>{console.error("Failed to fetch graph data",n),r(null)})},[t]),!e)return null;const a=[...e.nodes.map(n=>({data:{id:n.data.id,label:n.data.label}})),...e.edges.map(n=>({data:{source:n.data.source,target:n.data.target,label:n.data.label||""}}))];return ne.jsx("div",{style:{width:"100%",height:"100%",marginTop:"1rem",border:"2px solid #ccc",borderRadius:"8px",overflow:"hidden"},children:ne.jsx(v1,{elements:a,style:{width:"100%",height:"100%"},layout:{name:"cose",idealEdgeLength:()=>100,nodeOverlap:20,componentSpacing:120,nodeRepulsion:()=>4e5,edgeElasticity:()=>100,nestingFactor:5,gravity:80,numIter:1e3,initialTemp:200,coolingFactor:.95,minTemp:1},stylesheet:[{selector:"node",style:{label:"data(label)",backgroundColor:n=>n.data("label")===t?"#ff6f61":"#1976d2",color:"#222",textValign:"center",textHalign:"center",fontSize:n=>n.data("label")===t?14:11,fontWeight:n=>n.data("label")===t?"bold":"normal"}},{selector:"edge",style:{width:2,lineColor:"#ccc",targetArrowColor:"#ccc",targetArrowShape:"triangle",curveStyle:"bezier",label:"data(label)",fontSize:9,color:"#333",textRotation:"autorotate",textMarginY:-4}}]})})}function h1(){const[t,e]=_.useState(""),[r,a]=_.useState([]),[n,i]=_.useState(null),[o,s]=_.useState([]),[u,l]=_.useState(null),[c,f]=_.useState(!1);_.useEffect(()=>{let h="";if(window.location.search)h=new URLSearchParams(window.location.search).get("text")||"";else if(window.location.hash){const d=window.location.hash,m=d.includes("?")?d.substring(d.indexOf("?")+1):"";h=new URLSearchParams(m).get("text")||""}if(console.log("解析出來的 text:",h),h){const d=decodeURIComponent(h);e(d),f(!0),fetch(`${pi}/api/keywords?text=${encodeURIComponent(d)}`).then(m=>m.json()).then(m=>{a(m.keywords),l(null)}).catch(()=>l("❌ 擷取關鍵詞失敗")).finally(()=>f(!1))}},[]);const v=h=>{i(h),s([]),f(!0),fetch(`${pi}/api/related_terms?term=${h}`).then(d=>d.json()).then(d=>{s(d.groups),l(null)}).catch(()=>l("❌ 查詢語意關係失敗")).finally(()=>f(!1))};return ne.jsxs(zt,{sx:{width:"100vw",minHeight:"100vh",p:4,boxSizing:"border-box"},children:[ne.jsxs(zt,{sx:{maxWidth:"1000px",mx:"auto",mb:4},children:[ne.jsx(Xt,{variant:"h5",gutterBottom:!0,textAlign:"center",children:"🔍 選取文字："}),ne.jsx(zt,{sx:{bgcolor:"#f3f3f3",p:2,borderRadius:2},children:ne.jsx(Ag,{text:t,keywords:r,onClick:v})})]}),c&&ne.jsx(zt,{sx:{display:"flex",justifyContent:"center",my:2},children:ne.jsx(Pf,{})}),u&&ne.jsx(zt,{sx:{maxWidth:800,mx:"auto",mb:2},children:ne.jsx(kf,{severity:"error",children:u})}),n&&ne.jsxs(zt,{sx:{display:"flex",flexDirection:{xs:"column",md:"row"},justifyContent:"center",gap:4,maxWidth:"1200px",mx:"auto"},children:[ne.jsx(zt,{sx:{flex:1,minWidth:0},children:o.length>0&&ne.jsx(Bg,{term:n,groups:o,onTermClick:v})}),ne.jsx(zt,{sx:{flex:3,minWidth:0},children:o.length>0&&ne.jsxs(ne.Fragment,{children:[ne.jsx(Xt,{variant:"h6",gutterBottom:!0,children:"📈 知識圖譜視覺化："}),ne.jsx(d1,{term:n})]})})]})]})}function p1(){const t=zf();return ne.jsxs(zt,{sx:{p:2},children:[ne.jsx(nh,{onClick:()=>t("/"),variant:"outlined",sx:{mb:2},children:"← 返回首頁"}),ne.jsx(ih,{})]})}function g1(){const e=zh().pdfId,[r,a]=_.useState(0);return e?ne.jsxs(zt,{sx:{maxWidth:900,mx:"auto",mt:4,p:2},children:[ne.jsx(Xt,{variant:"h5",gutterBottom:!0,children:"PDF 預覽"}),ne.jsx(oh,{file:`${pi}/api/pdf_download/${e}`,onLoadSuccess:({numPages:n})=>a(n),loading:ne.jsx(zt,{sx:{py:4},children:ne.jsx(Pf,{})}),children:[...Array(r).keys()].map(n=>ne.jsx(sh,{pageNumber:n+1,width:800,renderTextLayer:!0},n))})]}):ne.jsx(kf,{severity:"error",children:"PDF ID 不存在"})}function m1(){return ne.jsxs(Jh,{children:[ne.jsx(ti,{path:"/",element:ne.jsx(h1,{})}),ne.jsx(ti,{path:"/pdf-uploader",element:ne.jsx(p1,{})}),ne.jsx(ti,{path:"/pdfview/:pdfId",element:ne.jsx(g1,{})})]})}uh.createRoot(document.getElementById("root")).render(ne.jsx(_.StrictMode,{children:ne.jsx(Ep,{children:ne.jsx(m1,{})})}));
