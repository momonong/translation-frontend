var dA=Object.defineProperty;var im=i=>{throw TypeError(i)};var fA=(i,t,e)=>t in i?dA(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e;var U=(i,t,e)=>fA(i,typeof t!="symbol"?t+"":t,e),Zd=(i,t,e)=>t.has(i)||im("Cannot "+e);var a=(i,t,e)=>(Zd(i,t,"read from private field"),e?e.call(i):t.get(i)),b=(i,t,e)=>t.has(i)?im("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(i):t.set(i,e),m=(i,t,e,n)=>(Zd(i,t,"write to private field"),n?n.call(i,e):t.set(i,e),e),v=(i,t,e)=>(Zd(i,t,"access private method"),e);var He=(i,t,e,n)=>({set _(s){m(i,t,s,e)},get _(){return a(i,t,n)}});function pA(i,t){for(var e=0;e<t.length;e++){const n=t[e];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in i)){const r=Object.getOwnPropertyDescriptor(n,s);r&&Object.defineProperty(i,s,r.get?r:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function e(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(s){if(s.ep)return;s.ep=!0;const r=e(s);fetch(s.href,r)}})();function bg(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var tf={exports:{}},xl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rm;function gA(){if(rm)return xl;rm=1;var i=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(n,s,r){var o=null;if(r!==void 0&&(o=""+r),s.key!==void 0&&(o=""+s.key),"key"in s){r={};for(var l in s)l!=="key"&&(r[l]=s[l])}else r=s;return s=r.ref,{$$typeof:i,type:n,key:o,ref:s!==void 0?s:null,props:r}}return xl.Fragment=t,xl.jsx=e,xl.jsxs=e,xl}var om;function mA(){return om||(om=1,tf.exports=gA()),tf.exports}var G=mA(),ef={exports:{}},ft={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var am;function yA(){if(am)return ft;am=1;var i=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),r=Symbol.for("react.consumer"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),u=Symbol.for("react.lazy"),d=Symbol.iterator;function f(C){return C===null||typeof C!="object"?null:(C=d&&C[d]||C["@@iterator"],typeof C=="function"?C:null)}var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},y=Object.assign,p={};function A(C,k,$){this.props=C,this.context=k,this.refs=p,this.updater=$||g}A.prototype.isReactComponent={},A.prototype.setState=function(C,k){if(typeof C!="object"&&typeof C!="function"&&C!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,C,k,"setState")},A.prototype.forceUpdate=function(C){this.updater.enqueueForceUpdate(this,C,"forceUpdate")};function w(){}w.prototype=A.prototype;function T(C,k,$){this.props=C,this.context=k,this.refs=p,this.updater=$||g}var x=T.prototype=new w;x.constructor=T,y(x,A.prototype),x.isPureReactComponent=!0;var _=Array.isArray,E={H:null,A:null,T:null,S:null,V:null},R=Object.prototype.hasOwnProperty;function P(C,k,$,N,V,nt){return $=nt.ref,{$$typeof:i,type:C,key:k,ref:$!==void 0?$:null,props:nt}}function L(C,k){return P(C.type,k,void 0,void 0,void 0,C.props)}function O(C){return typeof C=="object"&&C!==null&&C.$$typeof===i}function S(C){var k={"=":"=0",":":"=2"};return"$"+C.replace(/[=:]/g,function($){return k[$]})}var I=/\/+/g;function B(C,k){return typeof C=="object"&&C!==null&&C.key!=null?S(""+C.key):k.toString(36)}function H(){}function W(C){switch(C.status){case"fulfilled":return C.value;case"rejected":throw C.reason;default:switch(typeof C.status=="string"?C.then(H,H):(C.status="pending",C.then(function(k){C.status==="pending"&&(C.status="fulfilled",C.value=k)},function(k){C.status==="pending"&&(C.status="rejected",C.reason=k)})),C.status){case"fulfilled":return C.value;case"rejected":throw C.reason}}throw C}function X(C,k,$,N,V){var nt=typeof C;(nt==="undefined"||nt==="boolean")&&(C=null);var Y=!1;if(C===null)Y=!0;else switch(nt){case"bigint":case"string":case"number":Y=!0;break;case"object":switch(C.$$typeof){case i:case t:Y=!0;break;case u:return Y=C._init,X(Y(C._payload),k,$,N,V)}}if(Y)return V=V(C),Y=N===""?"."+B(C,0):N,_(V)?($="",Y!=null&&($=Y.replace(I,"$&/")+"/"),X(V,k,$,"",function(st){return st})):V!=null&&(O(V)&&(V=L(V,$+(V.key==null||C&&C.key===V.key?"":(""+V.key).replace(I,"$&/")+"/")+Y)),k.push(V)),1;Y=0;var it=N===""?".":N+":";if(_(C))for(var ot=0;ot<C.length;ot++)N=C[ot],nt=it+B(N,ot),Y+=X(N,k,$,nt,V);else if(ot=f(C),typeof ot=="function")for(C=ot.call(C),ot=0;!(N=C.next()).done;)N=N.value,nt=it+B(N,ot++),Y+=X(N,k,$,nt,V);else if(nt==="object"){if(typeof C.then=="function")return X(W(C),k,$,N,V);throw k=String(C),Error("Objects are not valid as a React child (found: "+(k==="[object Object]"?"object with keys {"+Object.keys(C).join(", ")+"}":k)+"). If you meant to render a collection of children, use an array instead.")}return Y}function j(C,k,$){if(C==null)return C;var N=[],V=0;return X(C,N,"","",function(nt){return k.call($,nt,V++)}),N}function z(C){if(C._status===-1){var k=C._result;k=k(),k.then(function($){(C._status===0||C._status===-1)&&(C._status=1,C._result=$)},function($){(C._status===0||C._status===-1)&&(C._status=2,C._result=$)}),C._status===-1&&(C._status=0,C._result=k)}if(C._status===1)return C._result.default;throw C._result}var ct=typeof reportError=="function"?reportError:function(C){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var k=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof C=="object"&&C!==null&&typeof C.message=="string"?String(C.message):String(C),error:C});if(!window.dispatchEvent(k))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",C);return}console.error(C)};function D(){}return ft.Children={map:j,forEach:function(C,k,$){j(C,function(){k.apply(this,arguments)},$)},count:function(C){var k=0;return j(C,function(){k++}),k},toArray:function(C){return j(C,function(k){return k})||[]},only:function(C){if(!O(C))throw Error("React.Children.only expected to receive a single React element child.");return C}},ft.Component=A,ft.Fragment=e,ft.Profiler=s,ft.PureComponent=T,ft.StrictMode=n,ft.Suspense=c,ft.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=E,ft.__COMPILER_RUNTIME={__proto__:null,c:function(C){return E.H.useMemoCache(C)}},ft.cache=function(C){return function(){return C.apply(null,arguments)}},ft.cloneElement=function(C,k,$){if(C==null)throw Error("The argument must be a React element, but you passed "+C+".");var N=y({},C.props),V=C.key,nt=void 0;if(k!=null)for(Y in k.ref!==void 0&&(nt=void 0),k.key!==void 0&&(V=""+k.key),k)!R.call(k,Y)||Y==="key"||Y==="__self"||Y==="__source"||Y==="ref"&&k.ref===void 0||(N[Y]=k[Y]);var Y=arguments.length-2;if(Y===1)N.children=$;else if(1<Y){for(var it=Array(Y),ot=0;ot<Y;ot++)it[ot]=arguments[ot+2];N.children=it}return P(C.type,V,void 0,void 0,nt,N)},ft.createContext=function(C){return C={$$typeof:o,_currentValue:C,_currentValue2:C,_threadCount:0,Provider:null,Consumer:null},C.Provider=C,C.Consumer={$$typeof:r,_context:C},C},ft.createElement=function(C,k,$){var N,V={},nt=null;if(k!=null)for(N in k.key!==void 0&&(nt=""+k.key),k)R.call(k,N)&&N!=="key"&&N!=="__self"&&N!=="__source"&&(V[N]=k[N]);var Y=arguments.length-2;if(Y===1)V.children=$;else if(1<Y){for(var it=Array(Y),ot=0;ot<Y;ot++)it[ot]=arguments[ot+2];V.children=it}if(C&&C.defaultProps)for(N in Y=C.defaultProps,Y)V[N]===void 0&&(V[N]=Y[N]);return P(C,nt,void 0,void 0,null,V)},ft.createRef=function(){return{current:null}},ft.forwardRef=function(C){return{$$typeof:l,render:C}},ft.isValidElement=O,ft.lazy=function(C){return{$$typeof:u,_payload:{_status:-1,_result:C},_init:z}},ft.memo=function(C,k){return{$$typeof:h,type:C,compare:k===void 0?null:k}},ft.startTransition=function(C){var k=E.T,$={};E.T=$;try{var N=C(),V=E.S;V!==null&&V($,N),typeof N=="object"&&N!==null&&typeof N.then=="function"&&N.then(D,ct)}catch(nt){ct(nt)}finally{E.T=k}},ft.unstable_useCacheRefresh=function(){return E.H.useCacheRefresh()},ft.use=function(C){return E.H.use(C)},ft.useActionState=function(C,k,$){return E.H.useActionState(C,k,$)},ft.useCallback=function(C,k){return E.H.useCallback(C,k)},ft.useContext=function(C){return E.H.useContext(C)},ft.useDebugValue=function(){},ft.useDeferredValue=function(C,k){return E.H.useDeferredValue(C,k)},ft.useEffect=function(C,k,$){var N=E.H;if(typeof $=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return N.useEffect(C,k)},ft.useId=function(){return E.H.useId()},ft.useImperativeHandle=function(C,k,$){return E.H.useImperativeHandle(C,k,$)},ft.useInsertionEffect=function(C,k){return E.H.useInsertionEffect(C,k)},ft.useLayoutEffect=function(C,k){return E.H.useLayoutEffect(C,k)},ft.useMemo=function(C,k){return E.H.useMemo(C,k)},ft.useOptimistic=function(C,k){return E.H.useOptimistic(C,k)},ft.useReducer=function(C,k,$){return E.H.useReducer(C,k,$)},ft.useRef=function(C){return E.H.useRef(C)},ft.useState=function(C){return E.H.useState(C)},ft.useSyncExternalStore=function(C,k,$){return E.H.useSyncExternalStore(C,k,$)},ft.useTransition=function(){return E.H.useTransition()},ft.version="19.1.0",ft}var lm;function bA(){return lm||(lm=1,ef.exports=yA()),ef.exports}var M=bA();const ia=bg(M),Hf=pA({__proto__:null,default:ia},[M]),nc={black:"#000",white:"#fff"},Uo={300:"#e57373",400:"#ef5350",500:"#f44336",700:"#d32f2f",800:"#c62828"},Wo={50:"#f3e5f5",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",700:"#7b1fa2"},Vo={50:"#e3f2fd",200:"#90caf9",400:"#42a5f5",700:"#1976d2",800:"#1565c0"},qo={300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",700:"#0288d1",900:"#01579b"},Xo={300:"#81c784",400:"#66bb6a",500:"#4caf50",700:"#388e3c",800:"#2e7d32",900:"#1b5e20"},Cl={300:"#ffb74d",400:"#ffa726",500:"#ff9800",700:"#f57c00",900:"#e65100"},vA={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"};function Do(i,...t){const e=new URL(`https://mui.com/production-error/?code=${i}`);return t.forEach(n=>e.searchParams.append("args[]",n)),`Minified MUI error #${i}; visit ${e} for the full message.`}const vg="$$material";function Ku(){return Ku=Object.assign?Object.assign.bind():function(i){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var n in e)({}).hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},Ku.apply(null,arguments)}function AA(i){if(i.sheet)return i.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===i)return document.styleSheets[t]}function wA(i){var t=document.createElement("style");return t.setAttribute("data-emotion",i.key),i.nonce!==void 0&&t.setAttribute("nonce",i.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var SA=function(){function i(e){var n=this;this._insertTag=function(s){var r;n.tags.length===0?n.insertionPoint?r=n.insertionPoint.nextSibling:n.prepend?r=n.container.firstChild:r=n.before:r=n.tags[n.tags.length-1].nextSibling,n.container.insertBefore(s,r),n.tags.push(s)},this.isSpeedy=e.speedy===void 0?!0:e.speedy,this.tags=[],this.ctr=0,this.nonce=e.nonce,this.key=e.key,this.container=e.container,this.prepend=e.prepend,this.insertionPoint=e.insertionPoint,this.before=null}var t=i.prototype;return t.hydrate=function(n){n.forEach(this._insertTag)},t.insert=function(n){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(wA(this));var s=this.tags[this.tags.length-1];if(this.isSpeedy){var r=AA(s);try{r.insertRule(n,r.cssRules.length)}catch{}}else s.appendChild(document.createTextNode(n));this.ctr++},t.flush=function(){this.tags.forEach(function(n){var s;return(s=n.parentNode)==null?void 0:s.removeChild(n)}),this.tags=[],this.ctr=0},i}(),Ie="-ms-",Ju="-moz-",St="-webkit-",Yy="comm",Ag="rule",wg="decl",EA="@import",Ky="@keyframes",_A="@layer",xA=Math.abs,Rd=String.fromCharCode,CA=Object.assign;function TA(i,t){return Pe(i,0)^45?(((t<<2^Pe(i,0))<<2^Pe(i,1))<<2^Pe(i,2))<<2^Pe(i,3):0}function Jy(i){return i.trim()}function RA(i,t){return(i=t.exec(i))?i[0]:i}function _t(i,t,e){return i.replace(t,e)}function zf(i,t){return i.indexOf(t)}function Pe(i,t){return i.charCodeAt(t)|0}function sc(i,t,e){return i.slice(t,e)}function Cs(i){return i.length}function Sg(i){return i.length}function ru(i,t){return t.push(i),i}function PA(i,t){return i.map(t).join("")}var Pd=1,Al=1,Qy=0,sn=0,le=0,El="";function kd(i,t,e,n,s,r,o){return{value:i,root:t,parent:e,type:n,props:s,children:r,line:Pd,column:Al,length:o,return:""}}function Tl(i,t){return CA(kd("",null,null,"",null,null,0),i,{length:-i.length},t)}function kA(){return le}function IA(){return le=sn>0?Pe(El,--sn):0,Al--,le===10&&(Al=1,Pd--),le}function En(){return le=sn<Qy?Pe(El,sn++):0,Al++,le===10&&(Al=1,Pd++),le}function Ls(){return Pe(El,sn)}function gu(){return sn}function Gh(i,t){return sc(El,i,t)}function ic(i){switch(i){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function Zy(i){return Pd=Al=1,Qy=Cs(El=i),sn=0,[]}function tb(i){return El="",i}function mu(i){return Jy(Gh(sn-1,Gf(i===91?i+2:i===40?i+1:i)))}function LA(i){for(;(le=Ls())&&le<33;)En();return ic(i)>2||ic(le)>3?"":" "}function MA(i,t){for(;--t&&En()&&!(le<48||le>102||le>57&&le<65||le>70&&le<97););return Gh(i,gu()+(t<6&&Ls()==32&&En()==32))}function Gf(i){for(;En();)switch(le){case i:return sn;case 34:case 39:i!==34&&i!==39&&Gf(le);break;case 40:i===41&&Gf(i);break;case 92:En();break}return sn}function OA(i,t){for(;En()&&i+le!==57;)if(i+le===84&&Ls()===47)break;return"/*"+Gh(t,sn-1)+"*"+Rd(i===47?i:En())}function DA(i){for(;!ic(Ls());)En();return Gh(i,sn)}function NA(i){return tb(yu("",null,null,null,[""],i=Zy(i),0,[0],i))}function yu(i,t,e,n,s,r,o,l,c){for(var h=0,u=0,d=o,f=0,g=0,y=0,p=1,A=1,w=1,T=0,x="",_=s,E=r,R=n,P=x;A;)switch(y=T,T=En()){case 40:if(y!=108&&Pe(P,d-1)==58){zf(P+=_t(mu(T),"&","&\f"),"&\f")!=-1&&(w=-1);break}case 34:case 39:case 91:P+=mu(T);break;case 9:case 10:case 13:case 32:P+=LA(y);break;case 92:P+=MA(gu()-1,7);continue;case 47:switch(Ls()){case 42:case 47:ru(FA(OA(En(),gu()),t,e),c);break;default:P+="/"}break;case 123*p:l[h++]=Cs(P)*w;case 125*p:case 59:case 0:switch(T){case 0:case 125:A=0;case 59+u:w==-1&&(P=_t(P,/\f/g,"")),g>0&&Cs(P)-d&&ru(g>32?hm(P+";",n,e,d-1):hm(_t(P," ","")+";",n,e,d-2),c);break;case 59:P+=";";default:if(ru(R=cm(P,t,e,h,u,s,l,x,_=[],E=[],d),r),T===123)if(u===0)yu(P,t,R,R,_,r,d,l,E);else switch(f===99&&Pe(P,3)===110?100:f){case 100:case 108:case 109:case 115:yu(i,R,R,n&&ru(cm(i,R,R,0,0,s,l,x,s,_=[],d),E),s,E,d,l,n?_:E);break;default:yu(P,R,R,R,[""],E,0,l,E)}}h=u=g=0,p=w=1,x=P="",d=o;break;case 58:d=1+Cs(P),g=y;default:if(p<1){if(T==123)--p;else if(T==125&&p++==0&&IA()==125)continue}switch(P+=Rd(T),T*p){case 38:w=u>0?1:(P+="\f",-1);break;case 44:l[h++]=(Cs(P)-1)*w,w=1;break;case 64:Ls()===45&&(P+=mu(En())),f=Ls(),u=d=Cs(x=P+=DA(gu())),T++;break;case 45:y===45&&Cs(P)==2&&(p=0)}}return r}function cm(i,t,e,n,s,r,o,l,c,h,u){for(var d=s-1,f=s===0?r:[""],g=Sg(f),y=0,p=0,A=0;y<n;++y)for(var w=0,T=sc(i,d+1,d=xA(p=o[y])),x=i;w<g;++w)(x=Jy(p>0?f[w]+" "+T:_t(T,/&\f/g,f[w])))&&(c[A++]=x);return kd(i,t,e,s===0?Ag:l,c,h,u)}function FA(i,t,e){return kd(i,t,e,Yy,Rd(kA()),sc(i,2,-2),0)}function hm(i,t,e,n){return kd(i,t,e,wg,sc(i,0,n),sc(i,n+1,-1),n)}function la(i,t){for(var e="",n=Sg(i),s=0;s<n;s++)e+=t(i[s],s,i,t)||"";return e}function $A(i,t,e,n){switch(i.type){case _A:if(i.children.length)break;case EA:case wg:return i.return=i.return||i.value;case Yy:return"";case Ky:return i.return=i.value+"{"+la(i.children,n)+"}";case Ag:i.value=i.props.join(",")}return Cs(e=la(i.children,n))?i.return=i.value+"{"+e+"}":""}function BA(i){var t=Sg(i);return function(e,n,s,r){for(var o="",l=0;l<t;l++)o+=i[l](e,n,s,r)||"";return o}}function jA(i){return function(t){t.root||(t=t.return)&&i(t)}}function eb(i){var t=Object.create(null);return function(e){return t[e]===void 0&&(t[e]=i(e)),t[e]}}var HA=function(t,e,n){for(var s=0,r=0;s=r,r=Ls(),s===38&&r===12&&(e[n]=1),!ic(r);)En();return Gh(t,sn)},zA=function(t,e){var n=-1,s=44;do switch(ic(s)){case 0:s===38&&Ls()===12&&(e[n]=1),t[n]+=HA(sn-1,e,n);break;case 2:t[n]+=mu(s);break;case 4:if(s===44){t[++n]=Ls()===58?"&\f":"",e[n]=t[n].length;break}default:t[n]+=Rd(s)}while(s=En());return t},GA=function(t,e){return tb(zA(Zy(t),e))},um=new WeakMap,UA=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var e=t.value,n=t.parent,s=t.column===n.column&&t.line===n.line;n.type!=="rule";)if(n=n.parent,!n)return;if(!(t.props.length===1&&e.charCodeAt(0)!==58&&!um.get(n))&&!s){um.set(t,!0);for(var r=[],o=GA(e,r),l=n.props,c=0,h=0;c<o.length;c++)for(var u=0;u<l.length;u++,h++)t.props[h]=r[c]?o[c].replace(/&\f/g,l[u]):l[u]+" "+o[c]}}},WA=function(t){if(t.type==="decl"){var e=t.value;e.charCodeAt(0)===108&&e.charCodeAt(2)===98&&(t.return="",t.value="")}};function nb(i,t){switch(TA(i,t)){case 5103:return St+"print-"+i+i;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return St+i+i;case 5349:case 4246:case 4810:case 6968:case 2756:return St+i+Ju+i+Ie+i+i;case 6828:case 4268:return St+i+Ie+i+i;case 6165:return St+i+Ie+"flex-"+i+i;case 5187:return St+i+_t(i,/(\w+).+(:[^]+)/,St+"box-$1$2"+Ie+"flex-$1$2")+i;case 5443:return St+i+Ie+"flex-item-"+_t(i,/flex-|-self/,"")+i;case 4675:return St+i+Ie+"flex-line-pack"+_t(i,/align-content|flex-|-self/,"")+i;case 5548:return St+i+Ie+_t(i,"shrink","negative")+i;case 5292:return St+i+Ie+_t(i,"basis","preferred-size")+i;case 6060:return St+"box-"+_t(i,"-grow","")+St+i+Ie+_t(i,"grow","positive")+i;case 4554:return St+_t(i,/([^-])(transform)/g,"$1"+St+"$2")+i;case 6187:return _t(_t(_t(i,/(zoom-|grab)/,St+"$1"),/(image-set)/,St+"$1"),i,"")+i;case 5495:case 3959:return _t(i,/(image-set\([^]*)/,St+"$1$`$1");case 4968:return _t(_t(i,/(.+:)(flex-)?(.*)/,St+"box-pack:$3"+Ie+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+St+i+i;case 4095:case 3583:case 4068:case 2532:return _t(i,/(.+)-inline(.+)/,St+"$1$2")+i;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Cs(i)-1-t>6)switch(Pe(i,t+1)){case 109:if(Pe(i,t+4)!==45)break;case 102:return _t(i,/(.+:)(.+)-([^]+)/,"$1"+St+"$2-$3$1"+Ju+(Pe(i,t+3)==108?"$3":"$2-$3"))+i;case 115:return~zf(i,"stretch")?nb(_t(i,"stretch","fill-available"),t)+i:i}break;case 4949:if(Pe(i,t+1)!==115)break;case 6444:switch(Pe(i,Cs(i)-3-(~zf(i,"!important")&&10))){case 107:return _t(i,":",":"+St)+i;case 101:return _t(i,/(.+:)([^;!]+)(;|!.+)?/,"$1"+St+(Pe(i,14)===45?"inline-":"")+"box$3$1"+St+"$2$3$1"+Ie+"$2box$3")+i}break;case 5936:switch(Pe(i,t+11)){case 114:return St+i+Ie+_t(i,/[svh]\w+-[tblr]{2}/,"tb")+i;case 108:return St+i+Ie+_t(i,/[svh]\w+-[tblr]{2}/,"tb-rl")+i;case 45:return St+i+Ie+_t(i,/[svh]\w+-[tblr]{2}/,"lr")+i}return St+i+Ie+i+i}return i}var VA=function(t,e,n,s){if(t.length>-1&&!t.return)switch(t.type){case wg:t.return=nb(t.value,t.length);break;case Ky:return la([Tl(t,{value:_t(t.value,"@","@"+St)})],s);case Ag:if(t.length)return PA(t.props,function(r){switch(RA(r,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return la([Tl(t,{props:[_t(r,/:(read-\w+)/,":"+Ju+"$1")]})],s);case"::placeholder":return la([Tl(t,{props:[_t(r,/:(plac\w+)/,":"+St+"input-$1")]}),Tl(t,{props:[_t(r,/:(plac\w+)/,":"+Ju+"$1")]}),Tl(t,{props:[_t(r,/:(plac\w+)/,Ie+"input-$1")]})],s)}return""})}},qA=[VA],XA=function(t){var e=t.key;if(e==="css"){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,function(p){var A=p.getAttribute("data-emotion");A.indexOf(" ")!==-1&&(document.head.appendChild(p),p.setAttribute("data-s",""))})}var s=t.stylisPlugins||qA,r={},o,l=[];o=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+e+' "]'),function(p){for(var A=p.getAttribute("data-emotion").split(" "),w=1;w<A.length;w++)r[A[w]]=!0;l.push(p)});var c,h=[UA,WA];{var u,d=[$A,jA(function(p){u.insert(p)})],f=BA(h.concat(s,d)),g=function(A){return la(NA(A),f)};c=function(A,w,T,x){u=T,g(A?A+"{"+w.styles+"}":w.styles),x&&(y.inserted[w.name]=!0)}}var y={key:e,sheet:new SA({key:e,container:o,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:r,registered:{},insert:c};return y.sheet.hydrate(l),y},nf={exports:{}},Ct={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dm;function YA(){if(dm)return Ct;dm=1;var i=typeof Symbol=="function"&&Symbol.for,t=i?Symbol.for("react.element"):60103,e=i?Symbol.for("react.portal"):60106,n=i?Symbol.for("react.fragment"):60107,s=i?Symbol.for("react.strict_mode"):60108,r=i?Symbol.for("react.profiler"):60114,o=i?Symbol.for("react.provider"):60109,l=i?Symbol.for("react.context"):60110,c=i?Symbol.for("react.async_mode"):60111,h=i?Symbol.for("react.concurrent_mode"):60111,u=i?Symbol.for("react.forward_ref"):60112,d=i?Symbol.for("react.suspense"):60113,f=i?Symbol.for("react.suspense_list"):60120,g=i?Symbol.for("react.memo"):60115,y=i?Symbol.for("react.lazy"):60116,p=i?Symbol.for("react.block"):60121,A=i?Symbol.for("react.fundamental"):60117,w=i?Symbol.for("react.responder"):60118,T=i?Symbol.for("react.scope"):60119;function x(E){if(typeof E=="object"&&E!==null){var R=E.$$typeof;switch(R){case t:switch(E=E.type,E){case c:case h:case n:case r:case s:case d:return E;default:switch(E=E&&E.$$typeof,E){case l:case u:case y:case g:case o:return E;default:return R}}case e:return R}}}function _(E){return x(E)===h}return Ct.AsyncMode=c,Ct.ConcurrentMode=h,Ct.ContextConsumer=l,Ct.ContextProvider=o,Ct.Element=t,Ct.ForwardRef=u,Ct.Fragment=n,Ct.Lazy=y,Ct.Memo=g,Ct.Portal=e,Ct.Profiler=r,Ct.StrictMode=s,Ct.Suspense=d,Ct.isAsyncMode=function(E){return _(E)||x(E)===c},Ct.isConcurrentMode=_,Ct.isContextConsumer=function(E){return x(E)===l},Ct.isContextProvider=function(E){return x(E)===o},Ct.isElement=function(E){return typeof E=="object"&&E!==null&&E.$$typeof===t},Ct.isForwardRef=function(E){return x(E)===u},Ct.isFragment=function(E){return x(E)===n},Ct.isLazy=function(E){return x(E)===y},Ct.isMemo=function(E){return x(E)===g},Ct.isPortal=function(E){return x(E)===e},Ct.isProfiler=function(E){return x(E)===r},Ct.isStrictMode=function(E){return x(E)===s},Ct.isSuspense=function(E){return x(E)===d},Ct.isValidElementType=function(E){return typeof E=="string"||typeof E=="function"||E===n||E===h||E===r||E===s||E===d||E===f||typeof E=="object"&&E!==null&&(E.$$typeof===y||E.$$typeof===g||E.$$typeof===o||E.$$typeof===l||E.$$typeof===u||E.$$typeof===A||E.$$typeof===w||E.$$typeof===T||E.$$typeof===p)},Ct.typeOf=x,Ct}var fm;function KA(){return fm||(fm=1,nf.exports=YA()),nf.exports}var sf,pm;function JA(){if(pm)return sf;pm=1;var i=KA(),t={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},e={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},n={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},r={};r[i.ForwardRef]=n,r[i.Memo]=s;function o(y){return i.isMemo(y)?s:r[y.$$typeof]||t}var l=Object.defineProperty,c=Object.getOwnPropertyNames,h=Object.getOwnPropertySymbols,u=Object.getOwnPropertyDescriptor,d=Object.getPrototypeOf,f=Object.prototype;function g(y,p,A){if(typeof p!="string"){if(f){var w=d(p);w&&w!==f&&g(y,w,A)}var T=c(p);h&&(T=T.concat(h(p)));for(var x=o(y),_=o(p),E=0;E<T.length;++E){var R=T[E];if(!e[R]&&!(A&&A[R])&&!(_&&_[R])&&!(x&&x[R])){var P=u(p,R);try{l(y,R,P)}catch{}}}}return y}return sf=g,sf}JA();var QA=!0;function sb(i,t,e){var n="";return e.split(" ").forEach(function(s){i[s]!==void 0?t.push(i[s]+";"):s&&(n+=s+" ")}),n}var Eg=function(t,e,n){var s=t.key+"-"+e.name;(n===!1||QA===!1)&&t.registered[s]===void 0&&(t.registered[s]=e.styles)},ib=function(t,e,n){Eg(t,e,n);var s=t.key+"-"+e.name;if(t.inserted[e.name]===void 0){var r=e;do t.insert(e===r?"."+s:"",r,t.sheet,!0),r=r.next;while(r!==void 0)}};function ZA(i){for(var t=0,e,n=0,s=i.length;s>=4;++n,s-=4)e=i.charCodeAt(n)&255|(i.charCodeAt(++n)&255)<<8|(i.charCodeAt(++n)&255)<<16|(i.charCodeAt(++n)&255)<<24,e=(e&65535)*1540483477+((e>>>16)*59797<<16),e^=e>>>24,t=(e&65535)*1540483477+((e>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(s){case 3:t^=(i.charCodeAt(n+2)&255)<<16;case 2:t^=(i.charCodeAt(n+1)&255)<<8;case 1:t^=i.charCodeAt(n)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var tw={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},ew=/[A-Z]|^ms/g,nw=/_EMO_([^_]+?)_([^]*?)_EMO_/g,rb=function(t){return t.charCodeAt(1)===45},gm=function(t){return t!=null&&typeof t!="boolean"},rf=eb(function(i){return rb(i)?i:i.replace(ew,"-$&").toLowerCase()}),mm=function(t,e){switch(t){case"animation":case"animationName":if(typeof e=="string")return e.replace(nw,function(n,s,r){return Ts={name:s,styles:r,next:Ts},s})}return tw[t]!==1&&!rb(t)&&typeof e=="number"&&e!==0?e+"px":e};function rc(i,t,e){if(e==null)return"";var n=e;if(n.__emotion_styles!==void 0)return n;switch(typeof e){case"boolean":return"";case"object":{var s=e;if(s.anim===1)return Ts={name:s.name,styles:s.styles,next:Ts},s.name;var r=e;if(r.styles!==void 0){var o=r.next;if(o!==void 0)for(;o!==void 0;)Ts={name:o.name,styles:o.styles,next:Ts},o=o.next;var l=r.styles+";";return l}return sw(i,t,e)}case"function":{if(i!==void 0){var c=Ts,h=e(i);return Ts=c,rc(i,t,h)}break}}var u=e;if(t==null)return u;var d=t[u];return d!==void 0?d:u}function sw(i,t,e){var n="";if(Array.isArray(e))for(var s=0;s<e.length;s++)n+=rc(i,t,e[s])+";";else for(var r in e){var o=e[r];if(typeof o!="object"){var l=o;t!=null&&t[l]!==void 0?n+=r+"{"+t[l]+"}":gm(l)&&(n+=rf(r)+":"+mm(r,l)+";")}else if(Array.isArray(o)&&typeof o[0]=="string"&&(t==null||t[o[0]]===void 0))for(var c=0;c<o.length;c++)gm(o[c])&&(n+=rf(r)+":"+mm(r,o[c])+";");else{var h=rc(i,t,o);switch(r){case"animation":case"animationName":{n+=rf(r)+":"+h+";";break}default:n+=r+"{"+h+"}"}}}return n}var ym=/label:\s*([^\s;{]+)\s*(;|$)/g,Ts;function Id(i,t,e){if(i.length===1&&typeof i[0]=="object"&&i[0]!==null&&i[0].styles!==void 0)return i[0];var n=!0,s="";Ts=void 0;var r=i[0];if(r==null||r.raw===void 0)n=!1,s+=rc(e,t,r);else{var o=r;s+=o[0]}for(var l=1;l<i.length;l++)if(s+=rc(e,t,i[l]),n){var c=r;s+=c[l]}ym.lastIndex=0;for(var h="",u;(u=ym.exec(s))!==null;)h+="-"+u[1];var d=ZA(s)+h;return{name:d,styles:s,next:Ts}}var iw=function(t){return t()},rw=Hf.useInsertionEffect?Hf.useInsertionEffect:!1,ob=rw||iw,ab=M.createContext(typeof HTMLElement<"u"?XA({key:"css"}):null);ab.Provider;var lb=function(t){return M.forwardRef(function(e,n){var s=M.useContext(ab);return t(e,s,n)})},_g=M.createContext({}),xg={}.hasOwnProperty,Uf="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",ow=function(t,e){var n={};for(var s in e)xg.call(e,s)&&(n[s]=e[s]);return n[Uf]=t,n},aw=function(t){var e=t.cache,n=t.serialized,s=t.isStringTag;return Eg(e,n,s),ob(function(){return ib(e,n,s)}),null},lw=lb(function(i,t,e){var n=i.css;typeof n=="string"&&t.registered[n]!==void 0&&(n=t.registered[n]);var s=i[Uf],r=[n],o="";typeof i.className=="string"?o=sb(t.registered,r,i.className):i.className!=null&&(o=i.className+" ");var l=Id(r,void 0,M.useContext(_g));o+=t.key+"-"+l.name;var c={};for(var h in i)xg.call(i,h)&&h!=="css"&&h!==Uf&&(c[h]=i[h]);return c.className=o,e&&(c.ref=e),M.createElement(M.Fragment,null,M.createElement(aw,{cache:t,serialized:l,isStringTag:typeof s=="string"}),M.createElement(s,c))}),cw=lw,bm=function(t,e){var n=arguments;if(e==null||!xg.call(e,"css"))return M.createElement.apply(void 0,n);var s=n.length,r=new Array(s);r[0]=cw,r[1]=ow(t,e);for(var o=2;o<s;o++)r[o]=n[o];return M.createElement.apply(null,r)};(function(i){var t;t||(t=i.JSX||(i.JSX={}))})(bm||(bm={}));function Cg(){for(var i=arguments.length,t=new Array(i),e=0;e<i;e++)t[e]=arguments[e];return Id(t)}function Uh(){var i=Cg.apply(void 0,arguments),t="animation-"+i.name;return{name:t,styles:"@keyframes "+t+"{"+i.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}var hw=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,uw=eb(function(i){return hw.test(i)||i.charCodeAt(0)===111&&i.charCodeAt(1)===110&&i.charCodeAt(2)<91}),dw=uw,fw=function(t){return t!=="theme"},vm=function(t){return typeof t=="string"&&t.charCodeAt(0)>96?dw:fw},Am=function(t,e,n){var s;if(e){var r=e.shouldForwardProp;s=t.__emotion_forwardProp&&r?function(o){return t.__emotion_forwardProp(o)&&r(o)}:r}return typeof s!="function"&&n&&(s=t.__emotion_forwardProp),s},pw=function(t){var e=t.cache,n=t.serialized,s=t.isStringTag;return Eg(e,n,s),ob(function(){return ib(e,n,s)}),null},gw=function i(t,e){var n=t.__emotion_real===t,s=n&&t.__emotion_base||t,r,o;e!==void 0&&(r=e.label,o=e.target);var l=Am(t,e,n),c=l||vm(s),h=!c("as");return function(){var u=arguments,d=n&&t.__emotion_styles!==void 0?t.__emotion_styles.slice(0):[];if(r!==void 0&&d.push("label:"+r+";"),u[0]==null||u[0].raw===void 0)d.push.apply(d,u);else{var f=u[0];d.push(f[0]);for(var g=u.length,y=1;y<g;y++)d.push(u[y],f[y])}var p=lb(function(A,w,T){var x=h&&A.as||s,_="",E=[],R=A;if(A.theme==null){R={};for(var P in A)R[P]=A[P];R.theme=M.useContext(_g)}typeof A.className=="string"?_=sb(w.registered,E,A.className):A.className!=null&&(_=A.className+" ");var L=Id(d.concat(E),w.registered,R);_+=w.key+"-"+L.name,o!==void 0&&(_+=" "+o);var O=h&&l===void 0?vm(x):c,S={};for(var I in A)h&&I==="as"||O(I)&&(S[I]=A[I]);return S.className=_,T&&(S.ref=T),M.createElement(M.Fragment,null,M.createElement(pw,{cache:w,serialized:L,isStringTag:typeof x=="string"}),M.createElement(x,S))});return p.displayName=r!==void 0?r:"Styled("+(typeof s=="string"?s:s.displayName||s.name||"Component")+")",p.defaultProps=t.defaultProps,p.__emotion_real=p,p.__emotion_base=s,p.__emotion_styles=d,p.__emotion_forwardProp=l,Object.defineProperty(p,"toString",{value:function(){return"."+o}}),p.withComponent=function(A,w){var T=i(A,Ku({},e,w,{shouldForwardProp:Am(p,w,!0)}));return T.apply(void 0,d)},p}},mw=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],Wf=gw.bind(null);mw.forEach(function(i){Wf[i]=Wf(i)});function cb(i,t){return Wf(i,t)}function yw(i,t){Array.isArray(i.__emotion_styles)&&(i.__emotion_styles=t(i.__emotion_styles))}const wm=[];function Sm(i){return wm[0]=i,Id(wm)}var of={exports:{}},Pt={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Em;function bw(){if(Em)return Pt;Em=1;var i=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),r=Symbol.for("react.consumer"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),h=Symbol.for("react.suspense_list"),u=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.for("react.view_transition"),g=Symbol.for("react.client.reference");function y(p){if(typeof p=="object"&&p!==null){var A=p.$$typeof;switch(A){case i:switch(p=p.type,p){case e:case s:case n:case c:case h:case f:return p;default:switch(p=p&&p.$$typeof,p){case o:case l:case d:case u:return p;case r:return p;default:return A}}case t:return A}}}return Pt.ContextConsumer=r,Pt.ContextProvider=o,Pt.Element=i,Pt.ForwardRef=l,Pt.Fragment=e,Pt.Lazy=d,Pt.Memo=u,Pt.Portal=t,Pt.Profiler=s,Pt.StrictMode=n,Pt.Suspense=c,Pt.SuspenseList=h,Pt.isContextConsumer=function(p){return y(p)===r},Pt.isContextProvider=function(p){return y(p)===o},Pt.isElement=function(p){return typeof p=="object"&&p!==null&&p.$$typeof===i},Pt.isForwardRef=function(p){return y(p)===l},Pt.isFragment=function(p){return y(p)===e},Pt.isLazy=function(p){return y(p)===d},Pt.isMemo=function(p){return y(p)===u},Pt.isPortal=function(p){return y(p)===t},Pt.isProfiler=function(p){return y(p)===s},Pt.isStrictMode=function(p){return y(p)===n},Pt.isSuspense=function(p){return y(p)===c},Pt.isSuspenseList=function(p){return y(p)===h},Pt.isValidElementType=function(p){return typeof p=="string"||typeof p=="function"||p===e||p===s||p===n||p===c||p===h||typeof p=="object"&&p!==null&&(p.$$typeof===d||p.$$typeof===u||p.$$typeof===o||p.$$typeof===r||p.$$typeof===l||p.$$typeof===g||p.getModuleId!==void 0)},Pt.typeOf=y,Pt}var _m;function vw(){return _m||(_m=1,of.exports=bw()),of.exports}var hb=vw();function Rs(i){if(typeof i!="object"||i===null)return!1;const t=Object.getPrototypeOf(i);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in i)&&!(Symbol.iterator in i)}function ub(i){if(M.isValidElement(i)||hb.isValidElementType(i)||!Rs(i))return i;const t={};return Object.keys(i).forEach(e=>{t[e]=ub(i[e])}),t}function Ye(i,t,e={clone:!0}){const n=e.clone?{...i}:i;return Rs(i)&&Rs(t)&&Object.keys(t).forEach(s=>{M.isValidElement(t[s])||hb.isValidElementType(t[s])?n[s]=t[s]:Rs(t[s])&&Object.prototype.hasOwnProperty.call(i,s)&&Rs(i[s])?n[s]=Ye(i[s],t[s],e):e.clone?n[s]=Rs(t[s])?ub(t[s]):t[s]:n[s]=t[s]}),n}const Aw=i=>{const t=Object.keys(i).map(e=>({key:e,val:i[e]}))||[];return t.sort((e,n)=>e.val-n.val),t.reduce((e,n)=>({...e,[n.key]:n.val}),{})};function ww(i){const{values:t={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:e="px",step:n=5,...s}=i,r=Aw(t),o=Object.keys(r);function l(f){return`@media (min-width:${typeof t[f]=="number"?t[f]:f}${e})`}function c(f){return`@media (max-width:${(typeof t[f]=="number"?t[f]:f)-n/100}${e})`}function h(f,g){const y=o.indexOf(g);return`@media (min-width:${typeof t[f]=="number"?t[f]:f}${e}) and (max-width:${(y!==-1&&typeof t[o[y]]=="number"?t[o[y]]:g)-n/100}${e})`}function u(f){return o.indexOf(f)+1<o.length?h(f,o[o.indexOf(f)+1]):l(f)}function d(f){const g=o.indexOf(f);return g===0?l(o[1]):g===o.length-1?c(o[g]):h(f,o[o.indexOf(f)+1]).replace("@media","@media not all and")}return{keys:o,values:r,up:l,down:c,between:h,only:u,not:d,unit:e,...s}}function Sw(i,t){if(!i.containerQueries)return t;const e=Object.keys(t).filter(n=>n.startsWith("@container")).sort((n,s)=>{var o,l;const r=/min-width:\s*([0-9.]+)/;return+(((o=n.match(r))==null?void 0:o[1])||0)-+(((l=s.match(r))==null?void 0:l[1])||0)});return e.length?e.reduce((n,s)=>{const r=t[s];return delete n[s],n[s]=r,n},{...t}):t}function Ew(i,t){return t==="@"||t.startsWith("@")&&(i.some(e=>t.startsWith(`@${e}`))||!!t.match(/^@\d/))}function _w(i,t){const e=t.match(/^@([^/]+)?\/?(.+)?$/);if(!e)return null;const[,n,s]=e,r=Number.isNaN(+n)?n||0:+n;return i.containerQueries(s).up(r)}function xw(i){const t=(r,o)=>r.replace("@media",o?`@container ${o}`:"@container");function e(r,o){r.up=(...l)=>t(i.breakpoints.up(...l),o),r.down=(...l)=>t(i.breakpoints.down(...l),o),r.between=(...l)=>t(i.breakpoints.between(...l),o),r.only=(...l)=>t(i.breakpoints.only(...l),o),r.not=(...l)=>{const c=t(i.breakpoints.not(...l),o);return c.includes("not all and")?c.replace("not all and ","").replace("min-width:","width<").replace("max-width:","width>").replace("and","or"):c}}const n={},s=r=>(e(n,r),n);return e(s),{...i,containerQueries:s}}const Cw={borderRadius:4};function tc(i,t){return t?Ye(i,t,{clone:!1}):i}const Ld={xs:0,sm:600,md:900,lg:1200,xl:1536},xm={keys:["xs","sm","md","lg","xl"],up:i=>`@media (min-width:${Ld[i]}px)`},Tw={containerQueries:i=>({up:t=>{let e=typeof t=="number"?t:Ld[t]||t;return typeof e=="number"&&(e=`${e}px`),i?`@container ${i} (min-width:${e})`:`@container (min-width:${e})`}})};function ss(i,t,e){const n=i.theme||{};if(Array.isArray(t)){const r=n.breakpoints||xm;return t.reduce((o,l,c)=>(o[r.up(r.keys[c])]=e(t[c]),o),{})}if(typeof t=="object"){const r=n.breakpoints||xm;return Object.keys(t).reduce((o,l)=>{if(Ew(r.keys,l)){const c=_w(n.containerQueries?n:Tw,l);c&&(o[c]=e(t[l],l))}else if(Object.keys(r.values||Ld).includes(l)){const c=r.up(l);o[c]=e(t[l],l)}else{const c=l;o[c]=t[c]}return o},{})}return e(t)}function db(i={}){var e;return((e=i.keys)==null?void 0:e.reduce((n,s)=>{const r=i.up(s);return n[r]={},n},{}))||{}}function fb(i,t){return i.reduce((e,n)=>{const s=e[n];return(!s||Object.keys(s).length===0)&&delete e[n],e},t)}function Rw(i,...t){const e=db(i),n=[e,...t].reduce((s,r)=>Ye(s,r),{});return fb(Object.keys(e),n)}function Pw(i,t){if(typeof i!="object")return{};const e={},n=Object.keys(t);return Array.isArray(i)?n.forEach((s,r)=>{r<i.length&&(e[s]=!0)}):n.forEach(s=>{i[s]!=null&&(e[s]=!0)}),e}function af({values:i,breakpoints:t,base:e}){const n=e||Pw(i,t),s=Object.keys(n);if(s.length===0)return i;let r;return s.reduce((o,l,c)=>(Array.isArray(i)?(o[l]=i[c]!=null?i[c]:i[r],r=c):typeof i=="object"?(o[l]=i[l]!=null?i[l]:i[r],r=l):o[l]=i,o),{})}function vt(i){if(typeof i!="string")throw new Error(Do(7));return i.charAt(0).toUpperCase()+i.slice(1)}function Md(i,t,e=!0){if(!t||typeof t!="string")return null;if(i&&i.vars&&e){const n=`vars.${t}`.split(".").reduce((s,r)=>s&&s[r]?s[r]:null,i);if(n!=null)return n}return t.split(".").reduce((n,s)=>n&&n[s]!=null?n[s]:null,i)}function Qu(i,t,e,n=e){let s;return typeof i=="function"?s=i(e):Array.isArray(i)?s=i[e]||n:s=Md(i,e)||n,t&&(s=t(s,n,i)),s}function re(i){const{prop:t,cssProperty:e=i.prop,themeKey:n,transform:s}=i,r=o=>{if(o[t]==null)return null;const l=o[t],c=o.theme,h=Md(c,n)||{};return ss(o,l,d=>{let f=Qu(h,s,d);return d===f&&typeof d=="string"&&(f=Qu(h,s,`${t}${d==="default"?"":vt(d)}`,d)),e===!1?f:{[e]:f}})};return r.propTypes={},r.filterProps=[t],r}function kw(i){const t={};return e=>(t[e]===void 0&&(t[e]=i(e)),t[e])}const Iw={m:"margin",p:"padding"},Lw={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},Cm={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},Mw=kw(i=>{if(i.length>2)if(Cm[i])i=Cm[i];else return[i];const[t,e]=i.split(""),n=Iw[t],s=Lw[e]||"";return Array.isArray(s)?s.map(r=>n+r):[n+s]}),Tg=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],Rg=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...Tg,...Rg];function Wh(i,t,e,n){const s=Md(i,t,!0)??e;return typeof s=="number"||typeof s=="string"?r=>typeof r=="string"?r:typeof s=="string"?s.startsWith("var(")&&r===0?0:s.startsWith("var(")&&r===1?s:`calc(${r} * ${s})`:s*r:Array.isArray(s)?r=>{if(typeof r=="string")return r;const o=Math.abs(r),l=s[o];return r>=0?l:typeof l=="number"?-l:typeof l=="string"&&l.startsWith("var(")?`calc(-1 * ${l})`:`-${l}`}:typeof s=="function"?s:()=>{}}function Od(i){return Wh(i,"spacing",8)}function No(i,t){return typeof t=="string"||t==null?t:i(t)}function Ow(i,t){return e=>i.reduce((n,s)=>(n[s]=No(t,e),n),{})}function Dw(i,t,e,n){if(!t.includes(e))return null;const s=Mw(e),r=Ow(s,n),o=i[e];return ss(i,o,r)}function pb(i,t){const e=Od(i.theme);return Object.keys(i).map(n=>Dw(i,t,n,e)).reduce(tc,{})}function Yt(i){return pb(i,Tg)}Yt.propTypes={};Yt.filterProps=Tg;function Kt(i){return pb(i,Rg)}Kt.propTypes={};Kt.filterProps=Rg;function gb(i=8,t=Od({spacing:i})){if(i.mui)return i;const e=(...n)=>(n.length===0?[1]:n).map(r=>{const o=t(r);return typeof o=="number"?`${o}px`:o}).join(" ");return e.mui=!0,e}function Dd(...i){const t=i.reduce((n,s)=>(s.filterProps.forEach(r=>{n[r]=s}),n),{}),e=n=>Object.keys(n).reduce((s,r)=>t[r]?tc(s,t[r](n)):s,{});return e.propTypes={},e.filterProps=i.reduce((n,s)=>n.concat(s.filterProps),[]),e}function Nn(i){return typeof i!="number"?i:`${i}px solid`}function Hn(i,t){return re({prop:i,themeKey:"borders",transform:t})}const Nw=Hn("border",Nn),Fw=Hn("borderTop",Nn),$w=Hn("borderRight",Nn),Bw=Hn("borderBottom",Nn),jw=Hn("borderLeft",Nn),Hw=Hn("borderColor"),zw=Hn("borderTopColor"),Gw=Hn("borderRightColor"),Uw=Hn("borderBottomColor"),Ww=Hn("borderLeftColor"),Vw=Hn("outline",Nn),qw=Hn("outlineColor"),Nd=i=>{if(i.borderRadius!==void 0&&i.borderRadius!==null){const t=Wh(i.theme,"shape.borderRadius",4),e=n=>({borderRadius:No(t,n)});return ss(i,i.borderRadius,e)}return null};Nd.propTypes={};Nd.filterProps=["borderRadius"];Dd(Nw,Fw,$w,Bw,jw,Hw,zw,Gw,Uw,Ww,Nd,Vw,qw);const Fd=i=>{if(i.gap!==void 0&&i.gap!==null){const t=Wh(i.theme,"spacing",8),e=n=>({gap:No(t,n)});return ss(i,i.gap,e)}return null};Fd.propTypes={};Fd.filterProps=["gap"];const $d=i=>{if(i.columnGap!==void 0&&i.columnGap!==null){const t=Wh(i.theme,"spacing",8),e=n=>({columnGap:No(t,n)});return ss(i,i.columnGap,e)}return null};$d.propTypes={};$d.filterProps=["columnGap"];const Bd=i=>{if(i.rowGap!==void 0&&i.rowGap!==null){const t=Wh(i.theme,"spacing",8),e=n=>({rowGap:No(t,n)});return ss(i,i.rowGap,e)}return null};Bd.propTypes={};Bd.filterProps=["rowGap"];const Xw=re({prop:"gridColumn"}),Yw=re({prop:"gridRow"}),Kw=re({prop:"gridAutoFlow"}),Jw=re({prop:"gridAutoColumns"}),Qw=re({prop:"gridAutoRows"}),Zw=re({prop:"gridTemplateColumns"}),tS=re({prop:"gridTemplateRows"}),eS=re({prop:"gridTemplateAreas"}),nS=re({prop:"gridArea"});Dd(Fd,$d,Bd,Xw,Yw,Kw,Jw,Qw,Zw,tS,eS,nS);function ca(i,t){return t==="grey"?t:i}const sS=re({prop:"color",themeKey:"palette",transform:ca}),iS=re({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:ca}),rS=re({prop:"backgroundColor",themeKey:"palette",transform:ca});Dd(sS,iS,rS);function Sn(i){return i<=1&&i!==0?`${i*100}%`:i}const oS=re({prop:"width",transform:Sn}),Pg=i=>{if(i.maxWidth!==void 0&&i.maxWidth!==null){const t=e=>{var s,r,o,l,c;const n=((o=(r=(s=i.theme)==null?void 0:s.breakpoints)==null?void 0:r.values)==null?void 0:o[e])||Ld[e];return n?((c=(l=i.theme)==null?void 0:l.breakpoints)==null?void 0:c.unit)!=="px"?{maxWidth:`${n}${i.theme.breakpoints.unit}`}:{maxWidth:n}:{maxWidth:Sn(e)}};return ss(i,i.maxWidth,t)}return null};Pg.filterProps=["maxWidth"];const aS=re({prop:"minWidth",transform:Sn}),lS=re({prop:"height",transform:Sn}),cS=re({prop:"maxHeight",transform:Sn}),hS=re({prop:"minHeight",transform:Sn});re({prop:"size",cssProperty:"width",transform:Sn});re({prop:"size",cssProperty:"height",transform:Sn});const uS=re({prop:"boxSizing"});Dd(oS,Pg,aS,lS,cS,hS,uS);const Vh={border:{themeKey:"borders",transform:Nn},borderTop:{themeKey:"borders",transform:Nn},borderRight:{themeKey:"borders",transform:Nn},borderBottom:{themeKey:"borders",transform:Nn},borderLeft:{themeKey:"borders",transform:Nn},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:Nn},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:Nd},color:{themeKey:"palette",transform:ca},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:ca},backgroundColor:{themeKey:"palette",transform:ca},p:{style:Kt},pt:{style:Kt},pr:{style:Kt},pb:{style:Kt},pl:{style:Kt},px:{style:Kt},py:{style:Kt},padding:{style:Kt},paddingTop:{style:Kt},paddingRight:{style:Kt},paddingBottom:{style:Kt},paddingLeft:{style:Kt},paddingX:{style:Kt},paddingY:{style:Kt},paddingInline:{style:Kt},paddingInlineStart:{style:Kt},paddingInlineEnd:{style:Kt},paddingBlock:{style:Kt},paddingBlockStart:{style:Kt},paddingBlockEnd:{style:Kt},m:{style:Yt},mt:{style:Yt},mr:{style:Yt},mb:{style:Yt},ml:{style:Yt},mx:{style:Yt},my:{style:Yt},margin:{style:Yt},marginTop:{style:Yt},marginRight:{style:Yt},marginBottom:{style:Yt},marginLeft:{style:Yt},marginX:{style:Yt},marginY:{style:Yt},marginInline:{style:Yt},marginInlineStart:{style:Yt},marginInlineEnd:{style:Yt},marginBlock:{style:Yt},marginBlockStart:{style:Yt},marginBlockEnd:{style:Yt},displayPrint:{cssProperty:!1,transform:i=>({"@media print":{display:i}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:Fd},rowGap:{style:Bd},columnGap:{style:$d},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:Sn},maxWidth:{style:Pg},minWidth:{transform:Sn},height:{transform:Sn},maxHeight:{transform:Sn},minHeight:{transform:Sn},boxSizing:{},font:{themeKey:"font"},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}};function dS(...i){const t=i.reduce((n,s)=>n.concat(Object.keys(s)),[]),e=new Set(t);return i.every(n=>e.size===Object.keys(n).length)}function fS(i,t){return typeof i=="function"?i(t):i}function pS(){function i(e,n,s,r){const o={[e]:n,theme:s},l=r[e];if(!l)return{[e]:n};const{cssProperty:c=e,themeKey:h,transform:u,style:d}=l;if(n==null)return null;if(h==="typography"&&n==="inherit")return{[e]:n};const f=Md(s,h)||{};return d?d(o):ss(o,n,y=>{let p=Qu(f,u,y);return y===p&&typeof y=="string"&&(p=Qu(f,u,`${e}${y==="default"?"":vt(y)}`,y)),c===!1?p:{[c]:p}})}function t(e){const{sx:n,theme:s={}}=e||{};if(!n)return null;const r=s.unstable_sxConfig??Vh;function o(l){let c=l;if(typeof l=="function")c=l(s);else if(typeof l!="object")return l;if(!c)return null;const h=db(s.breakpoints),u=Object.keys(h);let d=h;return Object.keys(c).forEach(f=>{const g=fS(c[f],s);if(g!=null)if(typeof g=="object")if(r[f])d=tc(d,i(f,g,s,r));else{const y=ss({theme:s},g,p=>({[f]:p}));dS(y,g)?d[f]=t({sx:g,theme:s}):d=tc(d,y)}else d=tc(d,i(f,g,s,r))}),Sw(s,fb(u,d))}return Array.isArray(n)?n.map(o):o(n)}return t}const Fo=pS();Fo.filterProps=["sx"];function gS(i,t){var n;const e=this;if(e.vars){if(!((n=e.colorSchemes)!=null&&n[i])||typeof e.getColorSchemeSelector!="function")return{};let s=e.getColorSchemeSelector(i);return s==="&"?t:((s.includes("data-")||s.includes("."))&&(s=`*:where(${s.replace(/\s*&$/,"")}) &`),{[s]:t})}return e.palette.mode===i?t:{}}function jd(i={},...t){const{breakpoints:e={},palette:n={},spacing:s,shape:r={},...o}=i,l=ww(e),c=gb(s);let h=Ye({breakpoints:l,direction:"ltr",components:{},palette:{mode:"light",...n},spacing:c,shape:{...Cw,...r}},o);return h=xw(h),h.applyStyles=gS,h=t.reduce((u,d)=>Ye(u,d),h),h.unstable_sxConfig={...Vh,...o==null?void 0:o.unstable_sxConfig},h.unstable_sx=function(d){return Fo({sx:d,theme:this})},h}function mS(i){return Object.keys(i).length===0}function yS(i=null){const t=M.useContext(_g);return!t||mS(t)?i:t}const bS=jd();function kg(i=bS){return yS(i)}const vS=i=>{var n;const t={systemProps:{},otherProps:{}},e=((n=i==null?void 0:i.theme)==null?void 0:n.unstable_sxConfig)??Vh;return Object.keys(i).forEach(s=>{e[s]?t.systemProps[s]=i[s]:t.otherProps[s]=i[s]}),t};function Ig(i){const{sx:t,...e}=i,{systemProps:n,otherProps:s}=vS(e);let r;return Array.isArray(t)?r=[n,...t]:typeof t=="function"?r=(...o)=>{const l=t(...o);return Rs(l)?{...n,...l}:n}:r={...n,...t},{...s,sx:r}}const Tm=i=>i,AS=()=>{let i=Tm;return{configure(t){i=t},generate(t){return i(t)},reset(){i=Tm}}},mb=AS();function yb(i){var t,e,n="";if(typeof i=="string"||typeof i=="number")n+=i;else if(typeof i=="object")if(Array.isArray(i)){var s=i.length;for(t=0;t<s;t++)i[t]&&(e=yb(i[t]))&&(n&&(n+=" "),n+=e)}else for(e in i)i[e]&&(n&&(n+=" "),n+=e);return n}function Bt(){for(var i,t,e=0,n="",s=arguments.length;e<s;e++)(i=arguments[e])&&(t=yb(i))&&(n&&(n+=" "),n+=t);return n}function wS(i={}){const{themeId:t,defaultTheme:e,defaultClassName:n="MuiBox-root",generateClassName:s}=i,r=cb("div",{shouldForwardProp:l=>l!=="theme"&&l!=="sx"&&l!=="as"})(Fo);return M.forwardRef(function(c,h){const u=kg(e),{className:d,component:f="div",...g}=Ig(c);return G.jsx(r,{as:f,ref:h,className:Bt(d,s?s(n):n),theme:t&&u[t]||u,...g})})}const SS={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function Os(i,t,e="Mui"){const n=SS[t];return n?`${e}-${n}`:`${mb.generate(i)}-${t}`}function Ds(i,t,e="Mui"){const n={};return t.forEach(s=>{n[s]=Os(i,s,e)}),n}function bb(i){const{variants:t,...e}=i,n={variants:t,style:Sm(e),isProcessed:!0};return n.style===e||t&&t.forEach(s=>{typeof s.style!="function"&&(s.style=Sm(s.style))}),n}const ES=jd();function lf(i){return i!=="ownerState"&&i!=="theme"&&i!=="sx"&&i!=="as"}function _S(i){return i?(t,e)=>e[i]:null}function xS(i,t,e){i.theme=TS(i.theme)?e:i.theme[t]||i.theme}function bu(i,t){const e=typeof t=="function"?t(i):t;if(Array.isArray(e))return e.flatMap(n=>bu(i,n));if(Array.isArray(e==null?void 0:e.variants)){let n;if(e.isProcessed)n=e.style;else{const{variants:s,...r}=e;n=r}return vb(i,e.variants,[n])}return e!=null&&e.isProcessed?e.style:e}function vb(i,t,e=[]){var s;let n;t:for(let r=0;r<t.length;r+=1){const o=t[r];if(typeof o.props=="function"){if(n??(n={...i,...i.ownerState,ownerState:i.ownerState}),!o.props(n))continue}else for(const l in o.props)if(i[l]!==o.props[l]&&((s=i.ownerState)==null?void 0:s[l])!==o.props[l])continue t;typeof o.style=="function"?(n??(n={...i,...i.ownerState,ownerState:i.ownerState}),e.push(o.style(n))):e.push(o.style)}return e}function Ab(i={}){const{themeId:t,defaultTheme:e=ES,rootShouldForwardProp:n=lf,slotShouldForwardProp:s=lf}=i;function r(l){xS(l,t,e)}return(l,c={})=>{yw(l,E=>E.filter(R=>R!==Fo));const{name:h,slot:u,skipVariantsResolver:d,skipSx:f,overridesResolver:g=_S(PS(u)),...y}=c,p=d!==void 0?d:u&&u!=="Root"&&u!=="root"||!1,A=f||!1;let w=lf;u==="Root"||u==="root"?w=n:u?w=s:RS(l)&&(w=void 0);const T=cb(l,{shouldForwardProp:w,label:CS(),...y}),x=E=>{if(E.__emotion_real===E)return E;if(typeof E=="function")return function(P){return bu(P,E)};if(Rs(E)){const R=bb(E);return R.variants?function(L){return bu(L,R)}:R.style}return E},_=(...E)=>{const R=[],P=E.map(x),L=[];if(R.push(r),h&&g&&L.push(function(B){var j,z;const W=(z=(j=B.theme.components)==null?void 0:j[h])==null?void 0:z.styleOverrides;if(!W)return null;const X={};for(const ct in W)X[ct]=bu(B,W[ct]);return g(B,X)}),h&&!p&&L.push(function(B){var X,j;const H=B.theme,W=(j=(X=H==null?void 0:H.components)==null?void 0:X[h])==null?void 0:j.variants;return W?vb(B,W):null}),A||L.push(Fo),Array.isArray(P[0])){const I=P.shift(),B=new Array(R.length).fill(""),H=new Array(L.length).fill("");let W;W=[...B,...I,...H],W.raw=[...B,...I.raw,...H],R.unshift(W)}const O=[...R,...P,...L],S=T(...O);return l.muiName&&(S.muiName=l.muiName),S};return T.withConfig&&(_.withConfig=T.withConfig),_}}function CS(i,t){return void 0}function TS(i){for(const t in i)return!1;return!0}function RS(i){return typeof i=="string"&&i.charCodeAt(0)>96}function PS(i){return i&&i.charAt(0).toLowerCase()+i.slice(1)}const kS=Ab();function oc(i,t){const e={...t};for(const n in i)if(Object.prototype.hasOwnProperty.call(i,n)){const s=n;if(s==="components"||s==="slots")e[s]={...i[s],...e[s]};else if(s==="componentsProps"||s==="slotProps"){const r=i[s],o=t[s];if(!o)e[s]=r||{};else if(!r)e[s]=o;else{e[s]={...o};for(const l in r)if(Object.prototype.hasOwnProperty.call(r,l)){const c=l;e[s][c]=oc(r[c],o[c])}}}else e[s]===void 0&&(e[s]=i[s])}return e}function IS(i){const{theme:t,name:e,props:n}=i;return!t||!t.components||!t.components[e]||!t.components[e].defaultProps?n:oc(t.components[e].defaultProps,n)}function LS({props:i,name:t,defaultTheme:e,themeId:n}){let s=kg(e);return n&&(s=s[n]||s),IS({theme:s,name:t,props:i})}const MS=typeof window<"u"?M.useLayoutEffect:M.useEffect;function OS(i,t=Number.MIN_SAFE_INTEGER,e=Number.MAX_SAFE_INTEGER){return Math.max(t,Math.min(i,e))}function Lg(i,t=0,e=1){return OS(i,t,e)}function DS(i){i=i.slice(1);const t=new RegExp(`.{1,${i.length>=6?2:1}}`,"g");let e=i.match(t);return e&&e[0].length===1&&(e=e.map(n=>n+n)),e?`rgb${e.length===4?"a":""}(${e.map((n,s)=>s<3?parseInt(n,16):Math.round(parseInt(n,16)/255*1e3)/1e3).join(", ")})`:""}function dr(i){if(i.type)return i;if(i.charAt(0)==="#")return dr(DS(i));const t=i.indexOf("("),e=i.substring(0,t);if(!["rgb","rgba","hsl","hsla","color"].includes(e))throw new Error(Do(9,i));let n=i.substring(t+1,i.length-1),s;if(e==="color"){if(n=n.split(" "),s=n.shift(),n.length===4&&n[3].charAt(0)==="/"&&(n[3]=n[3].slice(1)),!["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].includes(s))throw new Error(Do(10,s))}else n=n.split(",");return n=n.map(r=>parseFloat(r)),{type:e,values:n,colorSpace:s}}const NS=i=>{const t=dr(i);return t.values.slice(0,3).map((e,n)=>t.type.includes("hsl")&&n!==0?`${e}%`:e).join(" ")},Ml=(i,t)=>{try{return NS(i)}catch{return i}};function Hd(i){const{type:t,colorSpace:e}=i;let{values:n}=i;return t.includes("rgb")?n=n.map((s,r)=>r<3?parseInt(s,10):s):t.includes("hsl")&&(n[1]=`${n[1]}%`,n[2]=`${n[2]}%`),t.includes("color")?n=`${e} ${n.join(" ")}`:n=`${n.join(", ")}`,`${t}(${n})`}function wb(i){i=dr(i);const{values:t}=i,e=t[0],n=t[1]/100,s=t[2]/100,r=n*Math.min(s,1-s),o=(h,u=(h+e/30)%12)=>s-r*Math.max(Math.min(u-3,9-u,1),-1);let l="rgb";const c=[Math.round(o(0)*255),Math.round(o(8)*255),Math.round(o(4)*255)];return i.type==="hsla"&&(l+="a",c.push(t[3])),Hd({type:l,values:c})}function Vf(i){i=dr(i);let t=i.type==="hsl"||i.type==="hsla"?dr(wb(i)).values:i.values;return t=t.map(e=>(i.type!=="color"&&(e/=255),e<=.03928?e/12.92:((e+.055)/1.055)**2.4)),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function FS(i,t){const e=Vf(i),n=Vf(t);return(Math.max(e,n)+.05)/(Math.min(e,n)+.05)}function Ps(i,t){return i=dr(i),t=Lg(t),(i.type==="rgb"||i.type==="hsl")&&(i.type+="a"),i.type==="color"?i.values[3]=`/${t}`:i.values[3]=t,Hd(i)}function ou(i,t,e){try{return Ps(i,t)}catch{return i}}function ac(i,t){if(i=dr(i),t=Lg(t),i.type.includes("hsl"))i.values[2]*=1-t;else if(i.type.includes("rgb")||i.type.includes("color"))for(let e=0;e<3;e+=1)i.values[e]*=1-t;return Hd(i)}function Dt(i,t,e){try{return ac(i,t)}catch{return i}}function lc(i,t){if(i=dr(i),t=Lg(t),i.type.includes("hsl"))i.values[2]+=(100-i.values[2])*t;else if(i.type.includes("rgb"))for(let e=0;e<3;e+=1)i.values[e]+=(255-i.values[e])*t;else if(i.type.includes("color"))for(let e=0;e<3;e+=1)i.values[e]+=(1-i.values[e])*t;return Hd(i)}function Nt(i,t,e){try{return lc(i,t)}catch{return i}}function $S(i,t=.15){return Vf(i)>.5?ac(i,t):lc(i,t)}function au(i,t,e){try{return $S(i,t)}catch{return i}}const BS=M.createContext(void 0);function jS(i){const{theme:t,name:e,props:n}=i;if(!t||!t.components||!t.components[e])return n;const s=t.components[e];return s.defaultProps?oc(s.defaultProps,n):!s.styleOverrides&&!s.variants?oc(s,n):n}function HS({props:i,name:t}){const e=M.useContext(BS);return jS({props:i,name:t,theme:{components:e}})}const Rm={theme:void 0};function zS(i){let t,e;return function(s){let r=t;return(r===void 0||s.theme!==e)&&(Rm.theme=s.theme,r=bb(i(Rm)),t=r,e=s.theme),r}}function GS(i=""){function t(...n){if(!n.length)return"";const s=n[0];return typeof s=="string"&&!s.match(/(#|\(|\)|(-?(\d*\.)?\d+)(px|em|%|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc))|^(-?(\d*\.)?\d+)$|(\d+ \d+ \d+)/)?`, var(--${i?`${i}-`:""}${s}${t(...n.slice(1))})`:`, ${s}`}return(n,...s)=>`var(--${i?`${i}-`:""}${n}${t(...s)})`}const Pm=(i,t,e,n=[])=>{let s=i;t.forEach((r,o)=>{o===t.length-1?Array.isArray(s)?s[Number(r)]=e:s&&typeof s=="object"&&(s[r]=e):s&&typeof s=="object"&&(s[r]||(s[r]=n.includes(r)?[]:{}),s=s[r])})},US=(i,t,e)=>{function n(s,r=[],o=[]){Object.entries(s).forEach(([l,c])=>{(!e||e&&!e([...r,l]))&&c!=null&&(typeof c=="object"&&Object.keys(c).length>0?n(c,[...r,l],Array.isArray(c)?[...o,l]:o):t([...r,l],c,o))})}n(i)},WS=(i,t)=>typeof t=="number"?["lineHeight","fontWeight","opacity","zIndex"].some(n=>i.includes(n))||i[i.length-1].toLowerCase().includes("opacity")?t:`${t}px`:t;function cf(i,t){const{prefix:e,shouldSkipGeneratingVar:n}=t||{},s={},r={},o={};return US(i,(l,c,h)=>{if((typeof c=="string"||typeof c=="number")&&(!n||!n(l,c))){const u=`--${e?`${e}-`:""}${l.join("-")}`,d=WS(l,c);Object.assign(s,{[u]:d}),Pm(r,l,`var(${u})`,h),Pm(o,l,`var(${u}, ${d})`,h)}},l=>l[0]==="vars"),{css:s,vars:r,varsWithDefaults:o}}function VS(i,t={}){const{getSelector:e=A,disableCssColorScheme:n,colorSchemeSelector:s}=t,{colorSchemes:r={},components:o,defaultColorScheme:l="light",...c}=i,{vars:h,css:u,varsWithDefaults:d}=cf(c,t);let f=d;const g={},{[l]:y,...p}=r;if(Object.entries(p||{}).forEach(([x,_])=>{const{vars:E,css:R,varsWithDefaults:P}=cf(_,t);f=Ye(f,P),g[x]={css:R,vars:E}}),y){const{css:x,vars:_,varsWithDefaults:E}=cf(y,t);f=Ye(f,E),g[l]={css:x,vars:_}}function A(x,_){var R,P;let E=s;if(s==="class"&&(E=".%s"),s==="data"&&(E="[data-%s]"),s!=null&&s.startsWith("data-")&&!s.includes("%s")&&(E=`[${s}="%s"]`),x){if(E==="media")return i.defaultColorScheme===x?":root":{[`@media (prefers-color-scheme: ${((P=(R=r[x])==null?void 0:R.palette)==null?void 0:P.mode)||x})`]:{":root":_}};if(E)return i.defaultColorScheme===x?`:root, ${E.replace("%s",String(x))}`:E.replace("%s",String(x))}return":root"}return{vars:f,generateThemeVars:()=>{let x={...h};return Object.entries(g).forEach(([,{vars:_}])=>{x=Ye(x,_)}),x},generateStyleSheets:()=>{var L,O;const x=[],_=i.defaultColorScheme||"light";function E(S,I){Object.keys(I).length&&x.push(typeof S=="string"?{[S]:{...I}}:S)}E(e(void 0,{...u}),u);const{[_]:R,...P}=g;if(R){const{css:S}=R,I=(O=(L=r[_])==null?void 0:L.palette)==null?void 0:O.mode,B=!n&&I?{colorScheme:I,...S}:{...S};E(e(_,{...B}),B)}return Object.entries(P).forEach(([S,{css:I}])=>{var W,X;const B=(X=(W=r[S])==null?void 0:W.palette)==null?void 0:X.mode,H=!n&&B?{colorScheme:B,...I}:{...I};E(e(S,{...H}),H)}),x}}}function qS(i){return function(e){return i==="media"?`@media (prefers-color-scheme: ${e})`:i?i.startsWith("data-")&&!i.includes("%s")?`[${i}="${e}"] &`:i==="class"?`.${e} &`:i==="data"?`[data-${e}] &`:`${i.replace("%s",e)} &`:"&"}}function xi(i,t,e=void 0){const n={};for(const s in i){const r=i[s];let o="",l=!0;for(let c=0;c<r.length;c+=1){const h=r[c];h&&(o+=(l===!0?"":" ")+t(h),l=!1,e&&e[h]&&(o+=" "+e[h]))}n[s]=o}return n}const XS=jd(),YS=kS("div",{name:"MuiStack",slot:"Root"});function KS(i){return LS({props:i,name:"MuiStack",defaultTheme:XS})}function JS(i,t){const e=M.Children.toArray(i).filter(Boolean);return e.reduce((n,s,r)=>(n.push(s),r<e.length-1&&n.push(M.cloneElement(t,{key:`separator-${r}`})),n),[])}const QS=i=>({row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"})[i],ZS=({ownerState:i,theme:t})=>{let e={display:"flex",flexDirection:"column",...ss({theme:t},af({values:i.direction,breakpoints:t.breakpoints.values}),n=>({flexDirection:n}))};if(i.spacing){const n=Od(t),s=Object.keys(t.breakpoints.values).reduce((c,h)=>((typeof i.spacing=="object"&&i.spacing[h]!=null||typeof i.direction=="object"&&i.direction[h]!=null)&&(c[h]=!0),c),{}),r=af({values:i.direction,base:s}),o=af({values:i.spacing,base:s});typeof r=="object"&&Object.keys(r).forEach((c,h,u)=>{if(!r[c]){const f=h>0?r[u[h-1]]:"column";r[c]=f}}),e=Ye(e,ss({theme:t},o,(c,h)=>i.useFlexGap?{gap:No(n,c)}:{"& > :not(style):not(style)":{margin:0},"& > :not(style) ~ :not(style)":{[`margin${QS(h?r[h]:i.direction)}`]:No(n,c)}}))}return e=Rw(t.breakpoints,e),e};function tE(i={}){const{createStyledComponent:t=YS,useThemeProps:e=KS,componentName:n="MuiStack"}=i,s=()=>xi({root:["root"]},c=>Os(n,c),{}),r=t(ZS);return M.forwardRef(function(c,h){const u=e(c),d=Ig(u),{component:f="div",direction:g="column",spacing:y=0,divider:p,children:A,className:w,useFlexGap:T=!1,...x}=d,_={direction:g,spacing:y,useFlexGap:T},E=s();return G.jsx(r,{as:f,ownerState:_,ref:h,className:Bt(E.root,w),...x,children:p?JS(A,p):A})})}function Sb(){return{text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:nc.white,default:nc.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}}}const eE=Sb();function Eb(){return{text:{primary:nc.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:nc.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}}}const km=Eb();function Im(i,t,e,n){const s=n.light||n,r=n.dark||n*1.5;i[t]||(i.hasOwnProperty(e)?i[t]=i[e]:t==="light"?i.light=lc(i.main,s):t==="dark"&&(i.dark=ac(i.main,r)))}function nE(i="light"){return i==="dark"?{main:Vo[200],light:Vo[50],dark:Vo[400]}:{main:Vo[700],light:Vo[400],dark:Vo[800]}}function sE(i="light"){return i==="dark"?{main:Wo[200],light:Wo[50],dark:Wo[400]}:{main:Wo[500],light:Wo[300],dark:Wo[700]}}function iE(i="light"){return i==="dark"?{main:Uo[500],light:Uo[300],dark:Uo[700]}:{main:Uo[700],light:Uo[400],dark:Uo[800]}}function rE(i="light"){return i==="dark"?{main:qo[400],light:qo[300],dark:qo[700]}:{main:qo[700],light:qo[500],dark:qo[900]}}function oE(i="light"){return i==="dark"?{main:Xo[400],light:Xo[300],dark:Xo[700]}:{main:Xo[800],light:Xo[500],dark:Xo[900]}}function aE(i="light"){return i==="dark"?{main:Cl[400],light:Cl[300],dark:Cl[700]}:{main:"#ed6c02",light:Cl[500],dark:Cl[900]}}function Mg(i){const{mode:t="light",contrastThreshold:e=3,tonalOffset:n=.2,...s}=i,r=i.primary||nE(t),o=i.secondary||sE(t),l=i.error||iE(t),c=i.info||rE(t),h=i.success||oE(t),u=i.warning||aE(t);function d(p){return FS(p,km.text.primary)>=e?km.text.primary:eE.text.primary}const f=({color:p,name:A,mainShade:w=500,lightShade:T=300,darkShade:x=700})=>{if(p={...p},!p.main&&p[w]&&(p.main=p[w]),!p.hasOwnProperty("main"))throw new Error(Do(11,A?` (${A})`:"",w));if(typeof p.main!="string")throw new Error(Do(12,A?` (${A})`:"",JSON.stringify(p.main)));return Im(p,"light",T,n),Im(p,"dark",x,n),p.contrastText||(p.contrastText=d(p.main)),p};let g;return t==="light"?g=Sb():t==="dark"&&(g=Eb()),Ye({common:{...nc},mode:t,primary:f({color:r,name:"primary"}),secondary:f({color:o,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:f({color:l,name:"error"}),warning:f({color:u,name:"warning"}),info:f({color:c,name:"info"}),success:f({color:h,name:"success"}),grey:vA,contrastThreshold:e,getContrastText:d,augmentColor:f,tonalOffset:n,...g},s)}function lE(i){const t={};return Object.entries(i).forEach(n=>{const[s,r]=n;typeof r=="object"&&(t[s]=`${r.fontStyle?`${r.fontStyle} `:""}${r.fontVariant?`${r.fontVariant} `:""}${r.fontWeight?`${r.fontWeight} `:""}${r.fontStretch?`${r.fontStretch} `:""}${r.fontSize||""}${r.lineHeight?`/${r.lineHeight} `:""}${r.fontFamily||""}`)}),t}function cE(i,t){return{toolbar:{minHeight:56,[i.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[i.up("sm")]:{minHeight:64}},...t}}function hE(i){return Math.round(i*1e5)/1e5}const Lm={textTransform:"uppercase"},Mm='"Roboto", "Helvetica", "Arial", sans-serif';function uE(i,t){const{fontFamily:e=Mm,fontSize:n=14,fontWeightLight:s=300,fontWeightRegular:r=400,fontWeightMedium:o=500,fontWeightBold:l=700,htmlFontSize:c=16,allVariants:h,pxToRem:u,...d}=typeof t=="function"?t(i):t,f=n/14,g=u||(A=>`${A/c*f}rem`),y=(A,w,T,x,_)=>({fontFamily:e,fontWeight:A,fontSize:g(w),lineHeight:T,...e===Mm?{letterSpacing:`${hE(x/w)}em`}:{},..._,...h}),p={h1:y(s,96,1.167,-1.5),h2:y(s,60,1.2,-.5),h3:y(r,48,1.167,0),h4:y(r,34,1.235,.25),h5:y(r,24,1.334,0),h6:y(o,20,1.6,.15),subtitle1:y(r,16,1.75,.15),subtitle2:y(o,14,1.57,.1),body1:y(r,16,1.5,.15),body2:y(r,14,1.43,.15),button:y(o,14,1.75,.4,Lm),caption:y(r,12,1.66,.4),overline:y(r,12,2.66,1,Lm),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return Ye({htmlFontSize:c,pxToRem:g,fontFamily:e,fontSize:n,fontWeightLight:s,fontWeightRegular:r,fontWeightMedium:o,fontWeightBold:l,...p},d,{clone:!1})}const dE=.2,fE=.14,pE=.12;function Gt(...i){return[`${i[0]}px ${i[1]}px ${i[2]}px ${i[3]}px rgba(0,0,0,${dE})`,`${i[4]}px ${i[5]}px ${i[6]}px ${i[7]}px rgba(0,0,0,${fE})`,`${i[8]}px ${i[9]}px ${i[10]}px ${i[11]}px rgba(0,0,0,${pE})`].join(",")}const gE=["none",Gt(0,2,1,-1,0,1,1,0,0,1,3,0),Gt(0,3,1,-2,0,2,2,0,0,1,5,0),Gt(0,3,3,-2,0,3,4,0,0,1,8,0),Gt(0,2,4,-1,0,4,5,0,0,1,10,0),Gt(0,3,5,-1,0,5,8,0,0,1,14,0),Gt(0,3,5,-1,0,6,10,0,0,1,18,0),Gt(0,4,5,-2,0,7,10,1,0,2,16,1),Gt(0,5,5,-3,0,8,10,1,0,3,14,2),Gt(0,5,6,-3,0,9,12,1,0,3,16,2),Gt(0,6,6,-3,0,10,14,1,0,4,18,3),Gt(0,6,7,-4,0,11,15,1,0,4,20,3),Gt(0,7,8,-4,0,12,17,2,0,5,22,4),Gt(0,7,8,-4,0,13,19,2,0,5,24,4),Gt(0,7,9,-4,0,14,21,2,0,5,26,4),Gt(0,8,9,-5,0,15,22,2,0,6,28,5),Gt(0,8,10,-5,0,16,24,2,0,6,30,5),Gt(0,8,11,-5,0,17,26,2,0,6,32,5),Gt(0,9,11,-5,0,18,28,2,0,7,34,6),Gt(0,9,12,-6,0,19,29,2,0,7,36,6),Gt(0,10,13,-6,0,20,31,3,0,8,38,7),Gt(0,10,13,-6,0,21,33,3,0,8,40,7),Gt(0,10,14,-6,0,22,35,3,0,8,42,7),Gt(0,11,14,-7,0,23,36,3,0,9,44,8),Gt(0,11,15,-7,0,24,38,3,0,9,46,8)],mE={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},yE={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function Om(i){return`${Math.round(i)}ms`}function bE(i){if(!i)return 0;const t=i/36;return Math.min(Math.round((4+15*t**.25+t/5)*10),3e3)}function vE(i){const t={...mE,...i.easing},e={...yE,...i.duration};return{getAutoHeightDuration:bE,create:(s=["all"],r={})=>{const{duration:o=e.standard,easing:l=t.easeInOut,delay:c=0,...h}=r;return(Array.isArray(s)?s:[s]).map(u=>`${u} ${typeof o=="string"?o:Om(o)} ${l} ${typeof c=="string"?c:Om(c)}`).join(",")},...i,easing:t,duration:e}}const AE={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};function wE(i){return Rs(i)||typeof i>"u"||typeof i=="string"||typeof i=="boolean"||typeof i=="number"||Array.isArray(i)}function _b(i={}){const t={...i};function e(n){const s=Object.entries(n);for(let r=0;r<s.length;r++){const[o,l]=s[r];!wE(l)||o.startsWith("unstable_")?delete n[o]:Rs(l)&&(n[o]={...l},e(n[o]))}}return e(t),`import { unstable_createBreakpoints as createBreakpoints, createTransitions } from '@mui/material/styles';

const theme = ${JSON.stringify(t,null,2)};

theme.breakpoints = createBreakpoints(theme.breakpoints || {});
theme.transitions = createTransitions(theme.transitions || {});

export default theme;`}function qf(i={},...t){const{breakpoints:e,mixins:n={},spacing:s,palette:r={},transitions:o={},typography:l={},shape:c,...h}=i;if(i.vars&&i.generateThemeVars===void 0)throw new Error(Do(20));const u=Mg(r),d=jd(i);let f=Ye(d,{mixins:cE(d.breakpoints,n),palette:u,shadows:gE.slice(),typography:uE(u,l),transitions:vE(o),zIndex:{...AE}});return f=Ye(f,h),f=t.reduce((g,y)=>Ye(g,y),f),f.unstable_sxConfig={...Vh,...h==null?void 0:h.unstable_sxConfig},f.unstable_sx=function(y){return Fo({sx:y,theme:this})},f.toRuntimeSource=_b,f}function Xf(i){let t;return i<1?t=5.11916*i**2:t=4.5*Math.log(i+1)+2,Math.round(t*10)/1e3}const SE=[...Array(25)].map((i,t)=>{if(t===0)return"none";const e=Xf(t);return`linear-gradient(rgba(255 255 255 / ${e}), rgba(255 255 255 / ${e}))`});function xb(i){return{inputPlaceholder:i==="dark"?.5:.42,inputUnderline:i==="dark"?.7:.42,switchTrackDisabled:i==="dark"?.2:.12,switchTrack:i==="dark"?.3:.38}}function Cb(i){return i==="dark"?SE:[]}function EE(i){const{palette:t={mode:"light"},opacity:e,overlays:n,...s}=i,r=Mg(t);return{palette:r,opacity:{...xb(r.mode),...e},overlays:n||Cb(r.mode),...s}}function _E(i){var t;return!!i[0].match(/(cssVarPrefix|colorSchemeSelector|rootSelector|typography|mixins|breakpoints|direction|transitions)/)||!!i[0].match(/sxConfig$/)||i[0]==="palette"&&!!((t=i[1])!=null&&t.match(/(mode|contrastThreshold|tonalOffset)/))}const xE=i=>[...[...Array(25)].map((t,e)=>`--${i?`${i}-`:""}overlays-${e}`),`--${i?`${i}-`:""}palette-AppBar-darkBg`,`--${i?`${i}-`:""}palette-AppBar-darkColor`],CE=i=>(t,e)=>{const n=i.rootSelector||":root",s=i.colorSchemeSelector;let r=s;if(s==="class"&&(r=".%s"),s==="data"&&(r="[data-%s]"),s!=null&&s.startsWith("data-")&&!s.includes("%s")&&(r=`[${s}="%s"]`),i.defaultColorScheme===t){if(t==="dark"){const o={};return xE(i.cssVarPrefix).forEach(l=>{o[l]=e[l],delete e[l]}),r==="media"?{[n]:e,"@media (prefers-color-scheme: dark)":{[n]:o}}:r?{[r.replace("%s",t)]:o,[`${n}, ${r.replace("%s",t)}`]:e}:{[n]:{...e,...o}}}if(r&&r!=="media")return`${n}, ${r.replace("%s",String(t))}`}else if(t){if(r==="media")return{[`@media (prefers-color-scheme: ${String(t)})`]:{[n]:e}};if(r)return r.replace("%s",String(t))}return n};function TE(i,t){t.forEach(e=>{i[e]||(i[e]={})})}function F(i,t,e){!i[t]&&e&&(i[t]=e)}function Ol(i){return typeof i!="string"||!i.startsWith("hsl")?i:wb(i)}function Fs(i,t){`${t}Channel`in i||(i[`${t}Channel`]=Ml(Ol(i[t])))}function RE(i){return typeof i=="number"?`${i}px`:typeof i=="string"||typeof i=="function"||Array.isArray(i)?i:"8px"}const os=i=>{try{return i()}catch{}},PE=(i="mui")=>GS(i);function hf(i,t,e,n){if(!t)return;t=t===!0?{}:t;const s=n==="dark"?"dark":"light";if(!e){i[n]=EE({...t,palette:{mode:s,...t==null?void 0:t.palette}});return}const{palette:r,...o}=qf({...e,palette:{mode:s,...t==null?void 0:t.palette}});return i[n]={...t,palette:r,opacity:{...xb(s),...t==null?void 0:t.opacity},overlays:(t==null?void 0:t.overlays)||Cb(s)},o}function kE(i={},...t){const{colorSchemes:e={light:!0},defaultColorScheme:n,disableCssColorScheme:s=!1,cssVarPrefix:r="mui",shouldSkipGeneratingVar:o=_E,colorSchemeSelector:l=e.light&&e.dark?"media":void 0,rootSelector:c=":root",...h}=i,u=Object.keys(e)[0],d=n||(e.light&&u!=="light"?"light":u),f=PE(r),{[d]:g,light:y,dark:p,...A}=e,w={...A};let T=g;if((d==="dark"&&!("dark"in e)||d==="light"&&!("light"in e))&&(T=!0),!T)throw new Error(Do(21,d));const x=hf(w,T,h,d);y&&!w.light&&hf(w,y,void 0,"light"),p&&!w.dark&&hf(w,p,void 0,"dark");let _={defaultColorScheme:d,...x,cssVarPrefix:r,colorSchemeSelector:l,rootSelector:c,getCssVar:f,colorSchemes:w,font:{...lE(x.typography),...x.font},spacing:RE(h.spacing)};Object.keys(_.colorSchemes).forEach(O=>{const S=_.colorSchemes[O].palette,I=B=>{const H=B.split("-"),W=H[1],X=H[2];return f(B,S[W][X])};if(S.mode==="light"&&(F(S.common,"background","#fff"),F(S.common,"onBackground","#000")),S.mode==="dark"&&(F(S.common,"background","#000"),F(S.common,"onBackground","#fff")),TE(S,["Alert","AppBar","Avatar","Button","Chip","FilledInput","LinearProgress","Skeleton","Slider","SnackbarContent","SpeedDialAction","StepConnector","StepContent","Switch","TableCell","Tooltip"]),S.mode==="light"){F(S.Alert,"errorColor",Dt(S.error.light,.6)),F(S.Alert,"infoColor",Dt(S.info.light,.6)),F(S.Alert,"successColor",Dt(S.success.light,.6)),F(S.Alert,"warningColor",Dt(S.warning.light,.6)),F(S.Alert,"errorFilledBg",I("palette-error-main")),F(S.Alert,"infoFilledBg",I("palette-info-main")),F(S.Alert,"successFilledBg",I("palette-success-main")),F(S.Alert,"warningFilledBg",I("palette-warning-main")),F(S.Alert,"errorFilledColor",os(()=>S.getContrastText(S.error.main))),F(S.Alert,"infoFilledColor",os(()=>S.getContrastText(S.info.main))),F(S.Alert,"successFilledColor",os(()=>S.getContrastText(S.success.main))),F(S.Alert,"warningFilledColor",os(()=>S.getContrastText(S.warning.main))),F(S.Alert,"errorStandardBg",Nt(S.error.light,.9)),F(S.Alert,"infoStandardBg",Nt(S.info.light,.9)),F(S.Alert,"successStandardBg",Nt(S.success.light,.9)),F(S.Alert,"warningStandardBg",Nt(S.warning.light,.9)),F(S.Alert,"errorIconColor",I("palette-error-main")),F(S.Alert,"infoIconColor",I("palette-info-main")),F(S.Alert,"successIconColor",I("palette-success-main")),F(S.Alert,"warningIconColor",I("palette-warning-main")),F(S.AppBar,"defaultBg",I("palette-grey-100")),F(S.Avatar,"defaultBg",I("palette-grey-400")),F(S.Button,"inheritContainedBg",I("palette-grey-300")),F(S.Button,"inheritContainedHoverBg",I("palette-grey-A100")),F(S.Chip,"defaultBorder",I("palette-grey-400")),F(S.Chip,"defaultAvatarColor",I("palette-grey-700")),F(S.Chip,"defaultIconColor",I("palette-grey-700")),F(S.FilledInput,"bg","rgba(0, 0, 0, 0.06)"),F(S.FilledInput,"hoverBg","rgba(0, 0, 0, 0.09)"),F(S.FilledInput,"disabledBg","rgba(0, 0, 0, 0.12)"),F(S.LinearProgress,"primaryBg",Nt(S.primary.main,.62)),F(S.LinearProgress,"secondaryBg",Nt(S.secondary.main,.62)),F(S.LinearProgress,"errorBg",Nt(S.error.main,.62)),F(S.LinearProgress,"infoBg",Nt(S.info.main,.62)),F(S.LinearProgress,"successBg",Nt(S.success.main,.62)),F(S.LinearProgress,"warningBg",Nt(S.warning.main,.62)),F(S.Skeleton,"bg",`rgba(${I("palette-text-primaryChannel")} / 0.11)`),F(S.Slider,"primaryTrack",Nt(S.primary.main,.62)),F(S.Slider,"secondaryTrack",Nt(S.secondary.main,.62)),F(S.Slider,"errorTrack",Nt(S.error.main,.62)),F(S.Slider,"infoTrack",Nt(S.info.main,.62)),F(S.Slider,"successTrack",Nt(S.success.main,.62)),F(S.Slider,"warningTrack",Nt(S.warning.main,.62));const B=au(S.background.default,.8);F(S.SnackbarContent,"bg",B),F(S.SnackbarContent,"color",os(()=>S.getContrastText(B))),F(S.SpeedDialAction,"fabHoverBg",au(S.background.paper,.15)),F(S.StepConnector,"border",I("palette-grey-400")),F(S.StepContent,"border",I("palette-grey-400")),F(S.Switch,"defaultColor",I("palette-common-white")),F(S.Switch,"defaultDisabledColor",I("palette-grey-100")),F(S.Switch,"primaryDisabledColor",Nt(S.primary.main,.62)),F(S.Switch,"secondaryDisabledColor",Nt(S.secondary.main,.62)),F(S.Switch,"errorDisabledColor",Nt(S.error.main,.62)),F(S.Switch,"infoDisabledColor",Nt(S.info.main,.62)),F(S.Switch,"successDisabledColor",Nt(S.success.main,.62)),F(S.Switch,"warningDisabledColor",Nt(S.warning.main,.62)),F(S.TableCell,"border",Nt(ou(S.divider,1),.88)),F(S.Tooltip,"bg",ou(S.grey[700],.92))}if(S.mode==="dark"){F(S.Alert,"errorColor",Nt(S.error.light,.6)),F(S.Alert,"infoColor",Nt(S.info.light,.6)),F(S.Alert,"successColor",Nt(S.success.light,.6)),F(S.Alert,"warningColor",Nt(S.warning.light,.6)),F(S.Alert,"errorFilledBg",I("palette-error-dark")),F(S.Alert,"infoFilledBg",I("palette-info-dark")),F(S.Alert,"successFilledBg",I("palette-success-dark")),F(S.Alert,"warningFilledBg",I("palette-warning-dark")),F(S.Alert,"errorFilledColor",os(()=>S.getContrastText(S.error.dark))),F(S.Alert,"infoFilledColor",os(()=>S.getContrastText(S.info.dark))),F(S.Alert,"successFilledColor",os(()=>S.getContrastText(S.success.dark))),F(S.Alert,"warningFilledColor",os(()=>S.getContrastText(S.warning.dark))),F(S.Alert,"errorStandardBg",Dt(S.error.light,.9)),F(S.Alert,"infoStandardBg",Dt(S.info.light,.9)),F(S.Alert,"successStandardBg",Dt(S.success.light,.9)),F(S.Alert,"warningStandardBg",Dt(S.warning.light,.9)),F(S.Alert,"errorIconColor",I("palette-error-main")),F(S.Alert,"infoIconColor",I("palette-info-main")),F(S.Alert,"successIconColor",I("palette-success-main")),F(S.Alert,"warningIconColor",I("palette-warning-main")),F(S.AppBar,"defaultBg",I("palette-grey-900")),F(S.AppBar,"darkBg",I("palette-background-paper")),F(S.AppBar,"darkColor",I("palette-text-primary")),F(S.Avatar,"defaultBg",I("palette-grey-600")),F(S.Button,"inheritContainedBg",I("palette-grey-800")),F(S.Button,"inheritContainedHoverBg",I("palette-grey-700")),F(S.Chip,"defaultBorder",I("palette-grey-700")),F(S.Chip,"defaultAvatarColor",I("palette-grey-300")),F(S.Chip,"defaultIconColor",I("palette-grey-300")),F(S.FilledInput,"bg","rgba(255, 255, 255, 0.09)"),F(S.FilledInput,"hoverBg","rgba(255, 255, 255, 0.13)"),F(S.FilledInput,"disabledBg","rgba(255, 255, 255, 0.12)"),F(S.LinearProgress,"primaryBg",Dt(S.primary.main,.5)),F(S.LinearProgress,"secondaryBg",Dt(S.secondary.main,.5)),F(S.LinearProgress,"errorBg",Dt(S.error.main,.5)),F(S.LinearProgress,"infoBg",Dt(S.info.main,.5)),F(S.LinearProgress,"successBg",Dt(S.success.main,.5)),F(S.LinearProgress,"warningBg",Dt(S.warning.main,.5)),F(S.Skeleton,"bg",`rgba(${I("palette-text-primaryChannel")} / 0.13)`),F(S.Slider,"primaryTrack",Dt(S.primary.main,.5)),F(S.Slider,"secondaryTrack",Dt(S.secondary.main,.5)),F(S.Slider,"errorTrack",Dt(S.error.main,.5)),F(S.Slider,"infoTrack",Dt(S.info.main,.5)),F(S.Slider,"successTrack",Dt(S.success.main,.5)),F(S.Slider,"warningTrack",Dt(S.warning.main,.5));const B=au(S.background.default,.98);F(S.SnackbarContent,"bg",B),F(S.SnackbarContent,"color",os(()=>S.getContrastText(B))),F(S.SpeedDialAction,"fabHoverBg",au(S.background.paper,.15)),F(S.StepConnector,"border",I("palette-grey-600")),F(S.StepContent,"border",I("palette-grey-600")),F(S.Switch,"defaultColor",I("palette-grey-300")),F(S.Switch,"defaultDisabledColor",I("palette-grey-600")),F(S.Switch,"primaryDisabledColor",Dt(S.primary.main,.55)),F(S.Switch,"secondaryDisabledColor",Dt(S.secondary.main,.55)),F(S.Switch,"errorDisabledColor",Dt(S.error.main,.55)),F(S.Switch,"infoDisabledColor",Dt(S.info.main,.55)),F(S.Switch,"successDisabledColor",Dt(S.success.main,.55)),F(S.Switch,"warningDisabledColor",Dt(S.warning.main,.55)),F(S.TableCell,"border",Dt(ou(S.divider,1),.68)),F(S.Tooltip,"bg",ou(S.grey[700],.92))}Fs(S.background,"default"),Fs(S.background,"paper"),Fs(S.common,"background"),Fs(S.common,"onBackground"),Fs(S,"divider"),Object.keys(S).forEach(B=>{const H=S[B];B!=="tonalOffset"&&H&&typeof H=="object"&&(H.main&&F(S[B],"mainChannel",Ml(Ol(H.main))),H.light&&F(S[B],"lightChannel",Ml(Ol(H.light))),H.dark&&F(S[B],"darkChannel",Ml(Ol(H.dark))),H.contrastText&&F(S[B],"contrastTextChannel",Ml(Ol(H.contrastText))),B==="text"&&(Fs(S[B],"primary"),Fs(S[B],"secondary")),B==="action"&&(H.active&&Fs(S[B],"active"),H.selected&&Fs(S[B],"selected")))})}),_=t.reduce((O,S)=>Ye(O,S),_);const E={prefix:r,disableCssColorScheme:s,shouldSkipGeneratingVar:o,getSelector:CE(_)},{vars:R,generateThemeVars:P,generateStyleSheets:L}=VS(_,E);return _.vars=R,Object.entries(_.colorSchemes[_.defaultColorScheme]).forEach(([O,S])=>{_[O]=S}),_.generateThemeVars=P,_.generateStyleSheets=L,_.generateSpacing=function(){return gb(h.spacing,Od(this))},_.getColorSchemeSelector=qS(l),_.spacing=_.generateSpacing(),_.shouldSkipGeneratingVar=o,_.unstable_sxConfig={...Vh,...h==null?void 0:h.unstable_sxConfig},_.unstable_sx=function(S){return Fo({sx:S,theme:this})},_.toRuntimeSource=_b,_}function Dm(i,t,e){i.colorSchemes&&e&&(i.colorSchemes[t]={...e!==!0&&e,palette:Mg({...e===!0?{}:e.palette,mode:t})})}function Tb(i={},...t){const{palette:e,cssVariables:n=!1,colorSchemes:s=e?void 0:{light:!0},defaultColorScheme:r=e==null?void 0:e.mode,...o}=i,l=r||"light",c=s==null?void 0:s[l],h={...s,...e?{[l]:{...typeof c!="boolean"&&c,palette:e}}:void 0};if(n===!1){if(!("colorSchemes"in i))return qf(i,...t);let u=e;"palette"in i||h[l]&&(h[l]!==!0?u=h[l].palette:l==="dark"&&(u={mode:"dark"}));const d=qf({...i,palette:u},...t);return d.defaultColorScheme=l,d.colorSchemes=h,d.palette.mode==="light"&&(d.colorSchemes.light={...h.light!==!0&&h.light,palette:d.palette},Dm(d,"dark",h.dark)),d.palette.mode==="dark"&&(d.colorSchemes.dark={...h.dark!==!0&&h.dark,palette:d.palette},Dm(d,"light",h.light)),d}return!e&&!("light"in h)&&l==="light"&&(h.light=!0),kE({...o,colorSchemes:h,defaultColorScheme:l,...typeof n!="boolean"&&n},...t)}const Rb=Tb();function IE(){const i=kg(Rb);return i[vg]||i}function LE(i){return i!=="ownerState"&&i!=="theme"&&i!=="sx"&&i!=="as"}const Pb=i=>LE(i)&&i!=="classes",oe=Ab({themeId:vg,defaultTheme:Rb,rootShouldForwardProp:Pb});function ME(){return Ig}const wi=zS;function Ns(i){return HS(i)}function OE(i){return Os("MuiSvgIcon",i)}Ds("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const DE=i=>{const{color:t,fontSize:e,classes:n}=i,s={root:["root",t!=="inherit"&&`color${vt(t)}`,`fontSize${vt(e)}`]};return xi(s,OE,n)},NE=oe("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(i,t)=>{const{ownerState:e}=i;return[t.root,e.color!=="inherit"&&t[`color${vt(e.color)}`],t[`fontSize${vt(e.fontSize)}`]]}})(wi(({theme:i})=>{var t,e,n,s,r,o,l,c,h,u,d,f,g,y;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",flexShrink:0,transition:(s=(t=i.transitions)==null?void 0:t.create)==null?void 0:s.call(t,"fill",{duration:(n=(e=(i.vars??i).transitions)==null?void 0:e.duration)==null?void 0:n.shorter}),variants:[{props:p=>!p.hasSvgAsChild,style:{fill:"currentColor"}},{props:{fontSize:"inherit"},style:{fontSize:"inherit"}},{props:{fontSize:"small"},style:{fontSize:((o=(r=i.typography)==null?void 0:r.pxToRem)==null?void 0:o.call(r,20))||"1.25rem"}},{props:{fontSize:"medium"},style:{fontSize:((c=(l=i.typography)==null?void 0:l.pxToRem)==null?void 0:c.call(l,24))||"1.5rem"}},{props:{fontSize:"large"},style:{fontSize:((u=(h=i.typography)==null?void 0:h.pxToRem)==null?void 0:u.call(h,35))||"2.1875rem"}},...Object.entries((i.vars??i).palette).filter(([,p])=>p&&p.main).map(([p])=>{var A,w;return{props:{color:p},style:{color:(w=(A=(i.vars??i).palette)==null?void 0:A[p])==null?void 0:w.main}}}),{props:{color:"action"},style:{color:(f=(d=(i.vars??i).palette)==null?void 0:d.action)==null?void 0:f.active}},{props:{color:"disabled"},style:{color:(y=(g=(i.vars??i).palette)==null?void 0:g.action)==null?void 0:y.disabled}},{props:{color:"inherit"},style:{color:void 0}}]}})),Yf=M.forwardRef(function(t,e){const n=Ns({props:t,name:"MuiSvgIcon"}),{children:s,className:r,color:o="inherit",component:l="svg",fontSize:c="medium",htmlColor:h,inheritViewBox:u=!1,titleAccess:d,viewBox:f="0 0 24 24",...g}=n,y=M.isValidElement(s)&&s.type==="svg",p={...n,color:o,component:l,fontSize:c,instanceFontSize:t.fontSize,inheritViewBox:u,viewBox:f,hasSvgAsChild:y},A={};u||(A.viewBox=f);const w=DE(p);return G.jsxs(NE,{as:l,className:Bt(w.root,r),focusable:"false",color:h,"aria-hidden":d?void 0:!0,role:d?"img":void 0,ref:e,...A,...g,...y&&s.props,ownerState:p,children:[y?s.props.children:s,d?G.jsx("title",{children:d}):null]})});Yf.muiName="SvgIcon";function br(i,t){function e(n,s){return G.jsx(Yf,{"data-testid":void 0,ref:s,...n,children:i})}return e.muiName=Yf.muiName,M.memo(M.forwardRef(e))}let Nm=0;function FE(i){const[t,e]=M.useState(i),n=i||t;return M.useEffect(()=>{t==null&&(Nm+=1,e(`mui-${Nm}`))},[t]),n}const $E={...Hf},Fm=$E.useId;function kb(i){if(Fm!==void 0){const t=Fm();return i??t}return FE(i)}function vu(i){const t=M.useRef(i);return MS(()=>{t.current=i}),M.useRef((...e)=>(0,t.current)(...e)).current}function Kf(...i){const t=M.useRef(void 0),e=M.useCallback(n=>{const s=i.map(r=>{if(r==null)return null;if(typeof r=="function"){const o=r,l=o(n);return typeof l=="function"?l:()=>{o(null)}}return r.current=n,()=>{r.current=null}});return()=>{s.forEach(r=>r==null?void 0:r())}},i);return M.useMemo(()=>i.every(n=>n==null)?null:n=>{t.current&&(t.current(),t.current=void 0),n!=null&&(t.current=e(n))},i)}function BE(i,t){if(i==null)return{};var e={};for(var n in i)if({}.hasOwnProperty.call(i,n)){if(t.indexOf(n)!==-1)continue;e[n]=i[n]}return e}function Jf(i,t){return Jf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,n){return e.__proto__=n,e},Jf(i,t)}function jE(i,t){i.prototype=Object.create(t.prototype),i.prototype.constructor=i,Jf(i,t)}const $m=ia.createContext(null);function HE(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function Og(i,t){var e=function(r){return t&&M.isValidElement(r)?t(r):r},n=Object.create(null);return i&&M.Children.map(i,function(s){return s}).forEach(function(s){n[s.key]=e(s)}),n}function zE(i,t){i=i||{},t=t||{};function e(u){return u in t?t[u]:i[u]}var n=Object.create(null),s=[];for(var r in i)r in t?s.length&&(n[r]=s,s=[]):s.push(r);var o,l={};for(var c in t){if(n[c])for(o=0;o<n[c].length;o++){var h=n[c][o];l[n[c][o]]=e(h)}l[c]=e(c)}for(o=0;o<s.length;o++)l[s[o]]=e(s[o]);return l}function Tr(i,t,e){return e[t]!=null?e[t]:i.props[t]}function GE(i,t){return Og(i.children,function(e){return M.cloneElement(e,{onExited:t.bind(null,e),in:!0,appear:Tr(e,"appear",i),enter:Tr(e,"enter",i),exit:Tr(e,"exit",i)})})}function UE(i,t,e){var n=Og(i.children),s=zE(t,n);return Object.keys(s).forEach(function(r){var o=s[r];if(M.isValidElement(o)){var l=r in t,c=r in n,h=t[r],u=M.isValidElement(h)&&!h.props.in;c&&(!l||u)?s[r]=M.cloneElement(o,{onExited:e.bind(null,o),in:!0,exit:Tr(o,"exit",i),enter:Tr(o,"enter",i)}):!c&&l&&!u?s[r]=M.cloneElement(o,{in:!1}):c&&l&&M.isValidElement(h)&&(s[r]=M.cloneElement(o,{onExited:e.bind(null,o),in:h.props.in,exit:Tr(o,"exit",i),enter:Tr(o,"enter",i)}))}}),s}var WE=Object.values||function(i){return Object.keys(i).map(function(t){return i[t]})},VE={component:"div",childFactory:function(t){return t}},Dg=function(i){jE(t,i);function t(n,s){var r;r=i.call(this,n,s)||this;var o=r.handleExited.bind(HE(r));return r.state={contextValue:{isMounting:!0},handleExited:o,firstRender:!0},r}var e=t.prototype;return e.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},e.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(s,r){var o=r.children,l=r.handleExited,c=r.firstRender;return{children:c?GE(s,l):UE(s,o,l),firstRender:!1}},e.handleExited=function(s,r){var o=Og(this.props.children);s.key in o||(s.props.onExited&&s.props.onExited(r),this.mounted&&this.setState(function(l){var c=Ku({},l.children);return delete c[s.key],{children:c}}))},e.render=function(){var s=this.props,r=s.component,o=s.childFactory,l=BE(s,["component","childFactory"]),c=this.state.contextValue,h=WE(this.state.children).map(o);return delete l.appear,delete l.enter,delete l.exit,r===null?ia.createElement($m.Provider,{value:c},h):ia.createElement($m.Provider,{value:c},ia.createElement(r,l,h))},t}(ia.Component);Dg.propTypes={};Dg.defaultProps=VE;const Bm={};function Ib(i,t){const e=M.useRef(Bm);return e.current===Bm&&(e.current=i(t)),e}const qE=[];function XE(i){M.useEffect(i,qE)}class Ng{constructor(){U(this,"currentId",null);U(this,"clear",()=>{this.currentId!==null&&(clearTimeout(this.currentId),this.currentId=null)});U(this,"disposeEffect",()=>this.clear)}static create(){return new Ng}start(t,e){this.clear(),this.currentId=setTimeout(()=>{this.currentId=null,e()},t)}}function YE(){const i=Ib(Ng.create).current;return XE(i.disposeEffect),i}function KE(i){return Os("MuiPaper",i)}Ds("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const JE=i=>{const{square:t,elevation:e,variant:n,classes:s}=i,r={root:["root",n,!t&&"rounded",n==="elevation"&&`elevation${e}`]};return xi(r,KE,s)},QE=oe("div",{name:"MuiPaper",slot:"Root",overridesResolver:(i,t)=>{const{ownerState:e}=i;return[t.root,t[e.variant],!e.square&&t.rounded,e.variant==="elevation"&&t[`elevation${e.elevation}`]]}})(wi(({theme:i})=>({backgroundColor:(i.vars||i).palette.background.paper,color:(i.vars||i).palette.text.primary,transition:i.transitions.create("box-shadow"),variants:[{props:({ownerState:t})=>!t.square,style:{borderRadius:i.shape.borderRadius}},{props:{variant:"outlined"},style:{border:`1px solid ${(i.vars||i).palette.divider}`}},{props:{variant:"elevation"},style:{boxShadow:"var(--Paper-shadow)",backgroundImage:"var(--Paper-overlay)"}}]}))),Qf=M.forwardRef(function(t,e){var g;const n=Ns({props:t,name:"MuiPaper"}),s=IE(),{className:r,component:o="div",elevation:l=1,square:c=!1,variant:h="elevation",...u}=n,d={...n,component:o,elevation:l,square:c,variant:h},f=JE(d);return G.jsx(QE,{as:o,ownerState:d,className:Bt(f.root,r),ref:e,...u,style:{...h==="elevation"&&{"--Paper-shadow":(s.vars||s).shadows[l],...s.vars&&{"--Paper-overlay":(g=s.vars.overlays)==null?void 0:g[l]},...!s.vars&&s.palette.mode==="dark"&&{"--Paper-overlay":`linear-gradient(${Ps("#fff",Xf(l))}, ${Ps("#fff",Xf(l))})`}},...u.style}})});function ZE(i){return typeof i=="string"}function t1(i,t,e){return i===void 0||ZE(i)?t:{...t,ownerState:{...t.ownerState,...e}}}function e1(i,t,e){return typeof i=="function"?i(t,e):i}function n1(i,t=[]){if(i===void 0)return{};const e={};return Object.keys(i).filter(n=>n.match(/^on[A-Z]/)&&typeof i[n]=="function"&&!t.includes(n)).forEach(n=>{e[n]=i[n]}),e}function jm(i){if(i===void 0)return{};const t={};return Object.keys(i).filter(e=>!(e.match(/^on[A-Z]/)&&typeof i[e]=="function")).forEach(e=>{t[e]=i[e]}),t}function s1(i){const{getSlotProps:t,additionalProps:e,externalSlotProps:n,externalForwardedProps:s,className:r}=i;if(!t){const g=Bt(e==null?void 0:e.className,r,s==null?void 0:s.className,n==null?void 0:n.className),y={...e==null?void 0:e.style,...s==null?void 0:s.style,...n==null?void 0:n.style},p={...e,...s,...n};return g.length>0&&(p.className=g),Object.keys(y).length>0&&(p.style=y),{props:p,internalRef:void 0}}const o=n1({...s,...n}),l=jm(n),c=jm(s),h=t(o),u=Bt(h==null?void 0:h.className,e==null?void 0:e.className,r,s==null?void 0:s.className,n==null?void 0:n.className),d={...h==null?void 0:h.style,...e==null?void 0:e.style,...s==null?void 0:s.style,...n==null?void 0:n.style},f={...h,...e,...c,...l};return u.length>0&&(f.className=u),Object.keys(d).length>0&&(f.style=d),{props:f,internalRef:h.ref}}function Yo(i,t){const{className:e,elementType:n,ownerState:s,externalForwardedProps:r,internalForwardedProps:o,shouldForwardComponentProp:l=!1,...c}=t,{component:h,slots:u={[i]:void 0},slotProps:d={[i]:void 0},...f}=r,g=u[i]||n,y=e1(d[i],s),{props:{component:p,...A},internalRef:w}=s1({className:e,...c,externalForwardedProps:i==="root"?f:void 0,externalSlotProps:y}),T=Kf(w,y==null?void 0:y.ref,t.ref),x=i==="root"?p||h:p,_=t1(g,{...i==="root"&&!h&&!u[i]&&o,...i!=="root"&&!u[i]&&o,...A,...x&&!l&&{as:x},...x&&l&&{component:x},ref:T},s);return[g,_]}function Hm(i){try{return i.matches(":focus-visible")}catch{}return!1}class Zu{constructor(){U(this,"mountEffect",()=>{this.shouldMount&&!this.didMount&&this.ref.current!==null&&(this.didMount=!0,this.mounted.resolve())});this.ref={current:null},this.mounted=null,this.didMount=!1,this.shouldMount=!1,this.setShouldMount=null}static create(){return new Zu}static use(){const t=Ib(Zu.create).current,[e,n]=M.useState(!1);return t.shouldMount=e,t.setShouldMount=n,M.useEffect(t.mountEffect,[e]),t}mount(){return this.mounted||(this.mounted=r1(),this.shouldMount=!0,this.setShouldMount(this.shouldMount)),this.mounted}start(...t){this.mount().then(()=>{var e;return(e=this.ref.current)==null?void 0:e.start(...t)})}stop(...t){this.mount().then(()=>{var e;return(e=this.ref.current)==null?void 0:e.stop(...t)})}pulsate(...t){this.mount().then(()=>{var e;return(e=this.ref.current)==null?void 0:e.pulsate(...t)})}}function i1(){return Zu.use()}function r1(){let i,t;const e=new Promise((n,s)=>{i=n,t=s});return e.resolve=i,e.reject=t,e}function o1(i){const{className:t,classes:e,pulsate:n=!1,rippleX:s,rippleY:r,rippleSize:o,in:l,onExited:c,timeout:h}=i,[u,d]=M.useState(!1),f=Bt(t,e.ripple,e.rippleVisible,n&&e.ripplePulsate),g={width:o,height:o,top:-(o/2)+r,left:-(o/2)+s},y=Bt(e.child,u&&e.childLeaving,n&&e.childPulsate);return!l&&!u&&d(!0),M.useEffect(()=>{if(!l&&c!=null){const p=setTimeout(c,h);return()=>{clearTimeout(p)}}},[c,l,h]),G.jsx("span",{className:f,style:g,children:G.jsx("span",{className:y})})}const Dn=Ds("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),Zf=550,a1=80,l1=Uh`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`,c1=Uh`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`,h1=Uh`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`,u1=oe("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),d1=oe(o1,{name:"MuiTouchRipple",slot:"Ripple"})`
  opacity: 0;
  position: absolute;

  &.${Dn.rippleVisible} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${l1};
    animation-duration: ${Zf}ms;
    animation-timing-function: ${({theme:i})=>i.transitions.easing.easeInOut};
  }

  &.${Dn.ripplePulsate} {
    animation-duration: ${({theme:i})=>i.transitions.duration.shorter}ms;
  }

  & .${Dn.child} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${Dn.childLeaving} {
    opacity: 0;
    animation-name: ${c1};
    animation-duration: ${Zf}ms;
    animation-timing-function: ${({theme:i})=>i.transitions.easing.easeInOut};
  }

  & .${Dn.childPulsate} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${h1};
    animation-duration: 2500ms;
    animation-timing-function: ${({theme:i})=>i.transitions.easing.easeInOut};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`,f1=M.forwardRef(function(t,e){const n=Ns({props:t,name:"MuiTouchRipple"}),{center:s=!1,classes:r={},className:o,...l}=n,[c,h]=M.useState([]),u=M.useRef(0),d=M.useRef(null);M.useEffect(()=>{d.current&&(d.current(),d.current=null)},[c]);const f=M.useRef(!1),g=YE(),y=M.useRef(null),p=M.useRef(null),A=M.useCallback(_=>{const{pulsate:E,rippleX:R,rippleY:P,rippleSize:L,cb:O}=_;h(S=>[...S,G.jsx(d1,{classes:{ripple:Bt(r.ripple,Dn.ripple),rippleVisible:Bt(r.rippleVisible,Dn.rippleVisible),ripplePulsate:Bt(r.ripplePulsate,Dn.ripplePulsate),child:Bt(r.child,Dn.child),childLeaving:Bt(r.childLeaving,Dn.childLeaving),childPulsate:Bt(r.childPulsate,Dn.childPulsate)},timeout:Zf,pulsate:E,rippleX:R,rippleY:P,rippleSize:L},u.current)]),u.current+=1,d.current=O},[r]),w=M.useCallback((_={},E={},R=()=>{})=>{const{pulsate:P=!1,center:L=s||E.pulsate,fakeElement:O=!1}=E;if((_==null?void 0:_.type)==="mousedown"&&f.current){f.current=!1;return}(_==null?void 0:_.type)==="touchstart"&&(f.current=!0);const S=O?null:p.current,I=S?S.getBoundingClientRect():{width:0,height:0,left:0,top:0};let B,H,W;if(L||_===void 0||_.clientX===0&&_.clientY===0||!_.clientX&&!_.touches)B=Math.round(I.width/2),H=Math.round(I.height/2);else{const{clientX:X,clientY:j}=_.touches&&_.touches.length>0?_.touches[0]:_;B=Math.round(X-I.left),H=Math.round(j-I.top)}if(L)W=Math.sqrt((2*I.width**2+I.height**2)/3),W%2===0&&(W+=1);else{const X=Math.max(Math.abs((S?S.clientWidth:0)-B),B)*2+2,j=Math.max(Math.abs((S?S.clientHeight:0)-H),H)*2+2;W=Math.sqrt(X**2+j**2)}_!=null&&_.touches?y.current===null&&(y.current=()=>{A({pulsate:P,rippleX:B,rippleY:H,rippleSize:W,cb:R})},g.start(a1,()=>{y.current&&(y.current(),y.current=null)})):A({pulsate:P,rippleX:B,rippleY:H,rippleSize:W,cb:R})},[s,A,g]),T=M.useCallback(()=>{w({},{pulsate:!0})},[w]),x=M.useCallback((_,E)=>{if(g.clear(),(_==null?void 0:_.type)==="touchend"&&y.current){y.current(),y.current=null,g.start(0,()=>{x(_,E)});return}y.current=null,h(R=>R.length>0?R.slice(1):R),d.current=E},[g]);return M.useImperativeHandle(e,()=>({pulsate:T,start:w,stop:x}),[T,w,x]),G.jsx(u1,{className:Bt(Dn.root,r.root,o),ref:p,...l,children:G.jsx(Dg,{component:null,exit:!0,children:c})})});function p1(i){return Os("MuiButtonBase",i)}const g1=Ds("MuiButtonBase",["root","disabled","focusVisible"]),m1=i=>{const{disabled:t,focusVisible:e,focusVisibleClassName:n,classes:s}=i,o=xi({root:["root",t&&"disabled",e&&"focusVisible"]},p1,s);return e&&n&&(o.root+=` ${n}`),o},y1=oe("button",{name:"MuiButtonBase",slot:"Root"})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${g1.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),Lb=M.forwardRef(function(t,e){const n=Ns({props:t,name:"MuiButtonBase"}),{action:s,centerRipple:r=!1,children:o,className:l,component:c="button",disabled:h=!1,disableRipple:u=!1,disableTouchRipple:d=!1,focusRipple:f=!1,focusVisibleClassName:g,LinkComponent:y="a",onBlur:p,onClick:A,onContextMenu:w,onDragLeave:T,onFocus:x,onFocusVisible:_,onKeyDown:E,onKeyUp:R,onMouseDown:P,onMouseLeave:L,onMouseUp:O,onTouchEnd:S,onTouchMove:I,onTouchStart:B,tabIndex:H=0,TouchRippleProps:W,touchRippleRef:X,type:j,...z}=n,ct=M.useRef(null),D=i1(),C=Kf(D.ref,X),[k,$]=M.useState(!1);h&&k&&$(!1),M.useImperativeHandle(s,()=>({focusVisible:()=>{$(!0),ct.current.focus()}}),[]);const N=D.shouldMount&&!u&&!h;M.useEffect(()=>{k&&f&&!u&&D.pulsate()},[u,f,k,D]);const V=$s(D,"start",P,d),nt=$s(D,"stop",w,d),Y=$s(D,"stop",T,d),it=$s(D,"stop",O,d),ot=$s(D,"stop",dt=>{k&&dt.preventDefault(),L&&L(dt)},d),st=$s(D,"start",B,d),Z=$s(D,"stop",S,d),bt=$s(D,"stop",I,d),zt=$s(D,"stop",dt=>{Hm(dt.target)||$(!1),p&&p(dt)},!1),xt=vu(dt=>{ct.current||(ct.current=dt.currentTarget),Hm(dt.target)&&($(!0),_&&_(dt)),x&&x(dt)}),ut=()=>{const dt=ct.current;return c&&c!=="button"&&!(dt.tagName==="A"&&dt.href)},Zt=vu(dt=>{f&&!dt.repeat&&k&&dt.key===" "&&D.stop(dt,()=>{D.start(dt)}),dt.target===dt.currentTarget&&ut()&&dt.key===" "&&dt.preventDefault(),E&&E(dt),dt.target===dt.currentTarget&&ut()&&dt.key==="Enter"&&!h&&(dt.preventDefault(),A&&A(dt))}),Ot=vu(dt=>{f&&dt.key===" "&&k&&!dt.defaultPrevented&&D.stop(dt,()=>{D.pulsate(dt)}),R&&R(dt),A&&dt.target===dt.currentTarget&&ut()&&dt.key===" "&&!dt.defaultPrevented&&A(dt)});let je=c;je==="button"&&(z.href||z.to)&&(je=y);const xn={};je==="button"?(xn.type=j===void 0?"button":j,xn.disabled=h):(!z.href&&!z.to&&(xn.role="button"),h&&(xn["aria-disabled"]=h));const vr=Kf(e,ct),nu={...n,centerRipple:r,component:c,disabled:h,disableRipple:u,disableTouchRipple:d,focusRipple:f,tabIndex:H,focusVisible:k},zo=m1(nu);return G.jsxs(y1,{as:je,className:Bt(zo.root,l),ownerState:nu,onBlur:zt,onClick:A,onContextMenu:nt,onFocus:xt,onKeyDown:Zt,onKeyUp:Ot,onMouseDown:V,onMouseLeave:ot,onMouseUp:it,onDragLeave:Y,onTouchEnd:Z,onTouchMove:bt,onTouchStart:st,ref:vr,tabIndex:h?-1:H,type:j,...xn,...z,children:[o,N?G.jsx(f1,{ref:C,center:r,...W}):null]})});function $s(i,t,e,n=!1){return vu(s=>(e&&e(s),n||i[t](s),!0))}function b1(i){return typeof i.main=="string"}function v1(i,t=[]){if(!b1(i))return!1;for(const e of t)if(!i.hasOwnProperty(e)||typeof i[e]!="string")return!1;return!0}function ur(i=[]){return([,t])=>t&&v1(t,i)}function A1(i){return Os("MuiAlert",i)}const zm=Ds("MuiAlert",["root","action","icon","message","filled","colorSuccess","colorInfo","colorWarning","colorError","filledSuccess","filledInfo","filledWarning","filledError","outlined","outlinedSuccess","outlinedInfo","outlinedWarning","outlinedError","standard","standardSuccess","standardInfo","standardWarning","standardError"]);function w1(i){return Os("MuiCircularProgress",i)}Ds("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);const Ci=44,tp=Uh`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`,ep=Uh`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: -126px;
  }
`,S1=typeof tp!="string"?Cg`
        animation: ${tp} 1.4s linear infinite;
      `:null,E1=typeof ep!="string"?Cg`
        animation: ${ep} 1.4s ease-in-out infinite;
      `:null,_1=i=>{const{classes:t,variant:e,color:n,disableShrink:s}=i,r={root:["root",e,`color${vt(n)}`],svg:["svg"],circle:["circle",`circle${vt(e)}`,s&&"circleDisableShrink"]};return xi(r,w1,t)},x1=oe("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(i,t)=>{const{ownerState:e}=i;return[t.root,t[e.variant],t[`color${vt(e.color)}`]]}})(wi(({theme:i})=>({display:"inline-block",variants:[{props:{variant:"determinate"},style:{transition:i.transitions.create("transform")}},{props:{variant:"indeterminate"},style:S1||{animation:`${tp} 1.4s linear infinite`}},...Object.entries(i.palette).filter(ur()).map(([t])=>({props:{color:t},style:{color:(i.vars||i).palette[t].main}}))]}))),C1=oe("svg",{name:"MuiCircularProgress",slot:"Svg"})({display:"block"}),T1=oe("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(i,t)=>{const{ownerState:e}=i;return[t.circle,t[`circle${vt(e.variant)}`],e.disableShrink&&t.circleDisableShrink]}})(wi(({theme:i})=>({stroke:"currentColor",variants:[{props:{variant:"determinate"},style:{transition:i.transitions.create("stroke-dashoffset")}},{props:{variant:"indeterminate"},style:{strokeDasharray:"80px, 200px",strokeDashoffset:0}},{props:({ownerState:t})=>t.variant==="indeterminate"&&!t.disableShrink,style:E1||{animation:`${ep} 1.4s ease-in-out infinite`}}]}))),td=M.forwardRef(function(t,e){const n=Ns({props:t,name:"MuiCircularProgress"}),{className:s,color:r="primary",disableShrink:o=!1,size:l=40,style:c,thickness:h=3.6,value:u=0,variant:d="indeterminate",...f}=n,g={...n,color:r,disableShrink:o,size:l,thickness:h,value:u,variant:d},y=_1(g),p={},A={},w={};if(d==="determinate"){const T=2*Math.PI*((Ci-h)/2);p.strokeDasharray=T.toFixed(3),w["aria-valuenow"]=Math.round(u),p.strokeDashoffset=`${((100-u)/100*T).toFixed(3)}px`,A.transform="rotate(-90deg)"}return G.jsx(x1,{className:Bt(y.root,s),style:{width:l,height:l,...A,...c},ownerState:g,ref:e,role:"progressbar",...w,...f,children:G.jsx(C1,{className:y.svg,ownerState:g,viewBox:`${Ci/2} ${Ci/2} ${Ci} ${Ci}`,children:G.jsx(T1,{className:y.circle,style:p,ownerState:g,cx:Ci,cy:Ci,r:(Ci-h)/2,fill:"none",strokeWidth:h})})})});function R1(i){return Os("MuiIconButton",i)}const Gm=Ds("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge","loading","loadingIndicator","loadingWrapper"]),P1=i=>{const{classes:t,disabled:e,color:n,edge:s,size:r,loading:o}=i,l={root:["root",o&&"loading",e&&"disabled",n!=="default"&&`color${vt(n)}`,s&&`edge${vt(s)}`,`size${vt(r)}`],loadingIndicator:["loadingIndicator"],loadingWrapper:["loadingWrapper"]};return xi(l,R1,t)},k1=oe(Lb,{name:"MuiIconButton",slot:"Root",overridesResolver:(i,t)=>{const{ownerState:e}=i;return[t.root,e.loading&&t.loading,e.color!=="default"&&t[`color${vt(e.color)}`],e.edge&&t[`edge${vt(e.edge)}`],t[`size${vt(e.size)}`]]}})(wi(({theme:i})=>({textAlign:"center",flex:"0 0 auto",fontSize:i.typography.pxToRem(24),padding:8,borderRadius:"50%",color:(i.vars||i).palette.action.active,transition:i.transitions.create("background-color",{duration:i.transitions.duration.shortest}),variants:[{props:t=>!t.disableRipple,style:{"--IconButton-hoverBg":i.vars?`rgba(${i.vars.palette.action.activeChannel} / ${i.vars.palette.action.hoverOpacity})`:Ps(i.palette.action.active,i.palette.action.hoverOpacity),"&:hover":{backgroundColor:"var(--IconButton-hoverBg)","@media (hover: none)":{backgroundColor:"transparent"}}}},{props:{edge:"start"},style:{marginLeft:-12}},{props:{edge:"start",size:"small"},style:{marginLeft:-3}},{props:{edge:"end"},style:{marginRight:-12}},{props:{edge:"end",size:"small"},style:{marginRight:-3}}]})),wi(({theme:i})=>({variants:[{props:{color:"inherit"},style:{color:"inherit"}},...Object.entries(i.palette).filter(ur()).map(([t])=>({props:{color:t},style:{color:(i.vars||i).palette[t].main}})),...Object.entries(i.palette).filter(ur()).map(([t])=>({props:{color:t},style:{"--IconButton-hoverBg":i.vars?`rgba(${(i.vars||i).palette[t].mainChannel} / ${i.vars.palette.action.hoverOpacity})`:Ps((i.vars||i).palette[t].main,i.palette.action.hoverOpacity)}})),{props:{size:"small"},style:{padding:5,fontSize:i.typography.pxToRem(18)}},{props:{size:"large"},style:{padding:12,fontSize:i.typography.pxToRem(28)}}],[`&.${Gm.disabled}`]:{backgroundColor:"transparent",color:(i.vars||i).palette.action.disabled},[`&.${Gm.loading}`]:{color:"transparent"}}))),I1=oe("span",{name:"MuiIconButton",slot:"LoadingIndicator"})(({theme:i})=>({display:"none",position:"absolute",visibility:"visible",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:(i.vars||i).palette.action.disabled,variants:[{props:{loading:!0},style:{display:"flex"}}]})),np=M.forwardRef(function(t,e){const n=Ns({props:t,name:"MuiIconButton"}),{edge:s=!1,children:r,className:o,color:l="default",disabled:c=!1,disableFocusRipple:h=!1,size:u="medium",id:d,loading:f=null,loadingIndicator:g,...y}=n,p=kb(d),A=g??G.jsx(td,{"aria-labelledby":p,color:"inherit",size:16}),w={...n,edge:s,color:l,disabled:c,disableFocusRipple:h,loading:f,loadingIndicator:A,size:u},T=P1(w);return G.jsxs(k1,{id:f?p:d,className:Bt(T.root,o),centerRipple:!0,focusRipple:!h,disabled:c||f,ref:e,...y,ownerState:w,children:[typeof f=="boolean"&&G.jsx("span",{className:T.loadingWrapper,style:{display:"contents"},children:G.jsx(I1,{className:T.loadingIndicator,ownerState:w,children:f&&A})}),r]})}),L1=br(G.jsx("path",{d:"M20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4C12.76,4 13.5,4.11 14.2, 4.31L15.77,2.74C14.61,2.26 13.34,2 12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0, 0 22,12M7.91,10.08L6.5,11.5L11,16L21,6L19.59,4.58L11,13.17L7.91,10.08Z"})),M1=br(G.jsx("path",{d:"M12 5.99L19.53 19H4.47L12 5.99M12 2L1 21h22L12 2zm1 14h-2v2h2v-2zm0-6h-2v4h2v-4z"})),O1=br(G.jsx("path",{d:"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"})),D1=br(G.jsx("path",{d:"M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20, 12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10, 10 0 0,0 12,2M11,17H13V11H11V17Z"})),N1=br(G.jsx("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})),F1=i=>{const{variant:t,color:e,severity:n,classes:s}=i,r={root:["root",`color${vt(e||n)}`,`${t}${vt(e||n)}`,`${t}`],icon:["icon"],message:["message"],action:["action"]};return xi(r,A1,s)},$1=oe(Qf,{name:"MuiAlert",slot:"Root",overridesResolver:(i,t)=>{const{ownerState:e}=i;return[t.root,t[e.variant],t[`${e.variant}${vt(e.color||e.severity)}`]]}})(wi(({theme:i})=>{const t=i.palette.mode==="light"?ac:lc,e=i.palette.mode==="light"?lc:ac;return{...i.typography.body2,backgroundColor:"transparent",display:"flex",padding:"6px 16px",variants:[...Object.entries(i.palette).filter(ur(["light"])).map(([n])=>({props:{colorSeverity:n,variant:"standard"},style:{color:i.vars?i.vars.palette.Alert[`${n}Color`]:t(i.palette[n].light,.6),backgroundColor:i.vars?i.vars.palette.Alert[`${n}StandardBg`]:e(i.palette[n].light,.9),[`& .${zm.icon}`]:i.vars?{color:i.vars.palette.Alert[`${n}IconColor`]}:{color:i.palette[n].main}}})),...Object.entries(i.palette).filter(ur(["light"])).map(([n])=>({props:{colorSeverity:n,variant:"outlined"},style:{color:i.vars?i.vars.palette.Alert[`${n}Color`]:t(i.palette[n].light,.6),border:`1px solid ${(i.vars||i).palette[n].light}`,[`& .${zm.icon}`]:i.vars?{color:i.vars.palette.Alert[`${n}IconColor`]}:{color:i.palette[n].main}}})),...Object.entries(i.palette).filter(ur(["dark"])).map(([n])=>({props:{colorSeverity:n,variant:"filled"},style:{fontWeight:i.typography.fontWeightMedium,...i.vars?{color:i.vars.palette.Alert[`${n}FilledColor`],backgroundColor:i.vars.palette.Alert[`${n}FilledBg`]}:{backgroundColor:i.palette.mode==="dark"?i.palette[n].dark:i.palette[n].main,color:i.palette.getContrastText(i.palette[n].main)}}}))]}})),B1=oe("div",{name:"MuiAlert",slot:"Icon"})({marginRight:12,padding:"7px 0",display:"flex",fontSize:22,opacity:.9}),j1=oe("div",{name:"MuiAlert",slot:"Message"})({padding:"8px 0",minWidth:0,overflow:"auto"}),H1=oe("div",{name:"MuiAlert",slot:"Action"})({display:"flex",alignItems:"flex-start",padding:"4px 0 0 16px",marginLeft:"auto",marginRight:-8}),Um={success:G.jsx(L1,{fontSize:"inherit"}),warning:G.jsx(M1,{fontSize:"inherit"}),error:G.jsx(O1,{fontSize:"inherit"}),info:G.jsx(D1,{fontSize:"inherit"})},z1=M.forwardRef(function(t,e){const n=Ns({props:t,name:"MuiAlert"}),{action:s,children:r,className:o,closeText:l="Close",color:c,components:h={},componentsProps:u={},icon:d,iconMapping:f=Um,onClose:g,role:y="alert",severity:p="success",slotProps:A={},slots:w={},variant:T="standard",...x}=n,_={...n,color:c,severity:p,variant:T,colorSeverity:c||p},E=F1(_),R={slots:{closeButton:h.CloseButton,closeIcon:h.CloseIcon,...w},slotProps:{...u,...A}},[P,L]=Yo("root",{ref:e,shouldForwardComponentProp:!0,className:Bt(E.root,o),elementType:$1,externalForwardedProps:{...R,...x},ownerState:_,additionalProps:{role:y,elevation:0}}),[O,S]=Yo("icon",{className:E.icon,elementType:B1,externalForwardedProps:R,ownerState:_}),[I,B]=Yo("message",{className:E.message,elementType:j1,externalForwardedProps:R,ownerState:_}),[H,W]=Yo("action",{className:E.action,elementType:H1,externalForwardedProps:R,ownerState:_}),[X,j]=Yo("closeButton",{elementType:np,externalForwardedProps:R,ownerState:_}),[z,ct]=Yo("closeIcon",{elementType:N1,externalForwardedProps:R,ownerState:_});return G.jsxs(P,{...L,children:[d!==!1?G.jsx(O,{...S,children:d||f[p]||Um[p]}):null,G.jsx(I,{...B,children:r}),s!=null?G.jsx(H,{...W,children:s}):null,s==null&&g?G.jsx(H,{...W,children:G.jsx(X,{size:"small","aria-label":l,title:l,color:"inherit",onClick:g,...j,children:G.jsx(z,{fontSize:"small",...ct})})}):null]})});function G1(i){return Os("MuiTypography",i)}Ds("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);const U1={primary:!0,secondary:!0,error:!0,info:!0,success:!0,warning:!0,textPrimary:!0,textSecondary:!0,textDisabled:!0},W1=ME(),V1=i=>{const{align:t,gutterBottom:e,noWrap:n,paragraph:s,variant:r,classes:o}=i,l={root:["root",r,i.align!=="inherit"&&`align${vt(t)}`,e&&"gutterBottom",n&&"noWrap",s&&"paragraph"]};return xi(l,G1,o)},q1=oe("span",{name:"MuiTypography",slot:"Root",overridesResolver:(i,t)=>{const{ownerState:e}=i;return[t.root,e.variant&&t[e.variant],e.align!=="inherit"&&t[`align${vt(e.align)}`],e.noWrap&&t.noWrap,e.gutterBottom&&t.gutterBottom,e.paragraph&&t.paragraph]}})(wi(({theme:i})=>{var t;return{margin:0,variants:[{props:{variant:"inherit"},style:{font:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}},...Object.entries(i.typography).filter(([e,n])=>e!=="inherit"&&n&&typeof n=="object").map(([e,n])=>({props:{variant:e},style:n})),...Object.entries(i.palette).filter(ur()).map(([e])=>({props:{color:e},style:{color:(i.vars||i).palette[e].main}})),...Object.entries(((t=i.palette)==null?void 0:t.text)||{}).filter(([,e])=>typeof e=="string").map(([e])=>({props:{color:`text${vt(e)}`},style:{color:(i.vars||i).palette.text[e]}})),{props:({ownerState:e})=>e.align!=="inherit",style:{textAlign:"var(--Typography-textAlign)"}},{props:({ownerState:e})=>e.noWrap,style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},{props:({ownerState:e})=>e.gutterBottom,style:{marginBottom:"0.35em"}},{props:({ownerState:e})=>e.paragraph,style:{marginBottom:16}}]}})),Wm={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},Ko=M.forwardRef(function(t,e){const{color:n,...s}=Ns({props:t,name:"MuiTypography"}),r=!U1[n],o=W1({...s,...r&&{color:n}}),{align:l="inherit",className:c,component:h,gutterBottom:u=!1,noWrap:d=!1,paragraph:f=!1,variant:g="body1",variantMapping:y=Wm,...p}=o,A={...o,align:l,color:n,className:c,component:h,gutterBottom:u,noWrap:d,paragraph:f,variant:g,variantMapping:y},w=h||(f?"p":y[g]||Wm[g])||"span",T=V1(A);return G.jsx(q1,{as:w,ref:e,className:Bt(T.root,c),...p,ownerState:A,style:{...l!=="inherit"&&{"--Typography-textAlign":l},...p.style}})}),X1=Ds("MuiBox",["root"]),Y1=Tb(),uf=wS({themeId:vg,defaultTheme:Y1,defaultClassName:X1.root,generateClassName:mb.generate});function K1(i){return Os("MuiButton",i)}const Ar=Ds("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","colorPrimary","colorSecondary","colorSuccess","colorError","colorInfo","colorWarning","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","icon","iconSizeSmall","iconSizeMedium","iconSizeLarge","loading","loadingWrapper","loadingIconPlaceholder","loadingIndicator","loadingPositionCenter","loadingPositionStart","loadingPositionEnd"]),J1=M.createContext({}),Q1=M.createContext(void 0),Z1=i=>{const{color:t,disableElevation:e,fullWidth:n,size:s,variant:r,loading:o,loadingPosition:l,classes:c}=i,h={root:["root",o&&"loading",r,`${r}${vt(t)}`,`size${vt(s)}`,`${r}Size${vt(s)}`,`color${vt(t)}`,e&&"disableElevation",n&&"fullWidth",o&&`loadingPosition${vt(l)}`],startIcon:["icon","startIcon",`iconSize${vt(s)}`],endIcon:["icon","endIcon",`iconSize${vt(s)}`],loadingIndicator:["loadingIndicator"],loadingWrapper:["loadingWrapper"]},u=xi(h,K1,c);return{...c,...u}},Mb=[{props:{size:"small"},style:{"& > *:nth-of-type(1)":{fontSize:18}}},{props:{size:"medium"},style:{"& > *:nth-of-type(1)":{fontSize:20}}},{props:{size:"large"},style:{"& > *:nth-of-type(1)":{fontSize:22}}}],t_=oe(Lb,{shouldForwardProp:i=>Pb(i)||i==="classes",name:"MuiButton",slot:"Root",overridesResolver:(i,t)=>{const{ownerState:e}=i;return[t.root,t[e.variant],t[`${e.variant}${vt(e.color)}`],t[`size${vt(e.size)}`],t[`${e.variant}Size${vt(e.size)}`],e.color==="inherit"&&t.colorInherit,e.disableElevation&&t.disableElevation,e.fullWidth&&t.fullWidth,e.loading&&t.loading]}})(wi(({theme:i})=>{const t=i.palette.mode==="light"?i.palette.grey[300]:i.palette.grey[800],e=i.palette.mode==="light"?i.palette.grey.A100:i.palette.grey[700];return{...i.typography.button,minWidth:64,padding:"6px 16px",border:0,borderRadius:(i.vars||i).shape.borderRadius,transition:i.transitions.create(["background-color","box-shadow","border-color","color"],{duration:i.transitions.duration.short}),"&:hover":{textDecoration:"none"},[`&.${Ar.disabled}`]:{color:(i.vars||i).palette.action.disabled},variants:[{props:{variant:"contained"},style:{color:"var(--variant-containedColor)",backgroundColor:"var(--variant-containedBg)",boxShadow:(i.vars||i).shadows[2],"&:hover":{boxShadow:(i.vars||i).shadows[4],"@media (hover: none)":{boxShadow:(i.vars||i).shadows[2]}},"&:active":{boxShadow:(i.vars||i).shadows[8]},[`&.${Ar.focusVisible}`]:{boxShadow:(i.vars||i).shadows[6]},[`&.${Ar.disabled}`]:{color:(i.vars||i).palette.action.disabled,boxShadow:(i.vars||i).shadows[0],backgroundColor:(i.vars||i).palette.action.disabledBackground}}},{props:{variant:"outlined"},style:{padding:"5px 15px",border:"1px solid currentColor",borderColor:"var(--variant-outlinedBorder, currentColor)",backgroundColor:"var(--variant-outlinedBg)",color:"var(--variant-outlinedColor)",[`&.${Ar.disabled}`]:{border:`1px solid ${(i.vars||i).palette.action.disabledBackground}`}}},{props:{variant:"text"},style:{padding:"6px 8px",color:"var(--variant-textColor)",backgroundColor:"var(--variant-textBg)"}},...Object.entries(i.palette).filter(ur()).map(([n])=>({props:{color:n},style:{"--variant-textColor":(i.vars||i).palette[n].main,"--variant-outlinedColor":(i.vars||i).palette[n].main,"--variant-outlinedBorder":i.vars?`rgba(${i.vars.palette[n].mainChannel} / 0.5)`:Ps(i.palette[n].main,.5),"--variant-containedColor":(i.vars||i).palette[n].contrastText,"--variant-containedBg":(i.vars||i).palette[n].main,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":(i.vars||i).palette[n].dark,"--variant-textBg":i.vars?`rgba(${i.vars.palette[n].mainChannel} / ${i.vars.palette.action.hoverOpacity})`:Ps(i.palette[n].main,i.palette.action.hoverOpacity),"--variant-outlinedBorder":(i.vars||i).palette[n].main,"--variant-outlinedBg":i.vars?`rgba(${i.vars.palette[n].mainChannel} / ${i.vars.palette.action.hoverOpacity})`:Ps(i.palette[n].main,i.palette.action.hoverOpacity)}}}})),{props:{color:"inherit"},style:{color:"inherit",borderColor:"currentColor","--variant-containedBg":i.vars?i.vars.palette.Button.inheritContainedBg:t,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":i.vars?i.vars.palette.Button.inheritContainedHoverBg:e,"--variant-textBg":i.vars?`rgba(${i.vars.palette.text.primaryChannel} / ${i.vars.palette.action.hoverOpacity})`:Ps(i.palette.text.primary,i.palette.action.hoverOpacity),"--variant-outlinedBg":i.vars?`rgba(${i.vars.palette.text.primaryChannel} / ${i.vars.palette.action.hoverOpacity})`:Ps(i.palette.text.primary,i.palette.action.hoverOpacity)}}}},{props:{size:"small",variant:"text"},style:{padding:"4px 5px",fontSize:i.typography.pxToRem(13)}},{props:{size:"large",variant:"text"},style:{padding:"8px 11px",fontSize:i.typography.pxToRem(15)}},{props:{size:"small",variant:"outlined"},style:{padding:"3px 9px",fontSize:i.typography.pxToRem(13)}},{props:{size:"large",variant:"outlined"},style:{padding:"7px 21px",fontSize:i.typography.pxToRem(15)}},{props:{size:"small",variant:"contained"},style:{padding:"4px 10px",fontSize:i.typography.pxToRem(13)}},{props:{size:"large",variant:"contained"},style:{padding:"8px 22px",fontSize:i.typography.pxToRem(15)}},{props:{disableElevation:!0},style:{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${Ar.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${Ar.disabled}`]:{boxShadow:"none"}}},{props:{fullWidth:!0},style:{width:"100%"}},{props:{loadingPosition:"center"},style:{transition:i.transitions.create(["background-color","box-shadow","border-color"],{duration:i.transitions.duration.short}),[`&.${Ar.loading}`]:{color:"transparent"}}}]}})),e_=oe("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(i,t)=>{const{ownerState:e}=i;return[t.startIcon,e.loading&&t.startIconLoadingStart,t[`iconSize${vt(e.size)}`]]}})(({theme:i})=>({display:"inherit",marginRight:8,marginLeft:-4,variants:[{props:{size:"small"},style:{marginLeft:-2}},{props:{loadingPosition:"start",loading:!0},style:{transition:i.transitions.create(["opacity"],{duration:i.transitions.duration.short}),opacity:0}},{props:{loadingPosition:"start",loading:!0,fullWidth:!0},style:{marginRight:-8}},...Mb]})),n_=oe("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(i,t)=>{const{ownerState:e}=i;return[t.endIcon,e.loading&&t.endIconLoadingEnd,t[`iconSize${vt(e.size)}`]]}})(({theme:i})=>({display:"inherit",marginRight:-4,marginLeft:8,variants:[{props:{size:"small"},style:{marginRight:-2}},{props:{loadingPosition:"end",loading:!0},style:{transition:i.transitions.create(["opacity"],{duration:i.transitions.duration.short}),opacity:0}},{props:{loadingPosition:"end",loading:!0,fullWidth:!0},style:{marginLeft:-8}},...Mb]})),s_=oe("span",{name:"MuiButton",slot:"LoadingIndicator"})(({theme:i})=>({display:"none",position:"absolute",visibility:"visible",variants:[{props:{loading:!0},style:{display:"flex"}},{props:{loadingPosition:"start"},style:{left:14}},{props:{loadingPosition:"start",size:"small"},style:{left:10}},{props:{variant:"text",loadingPosition:"start"},style:{left:6}},{props:{loadingPosition:"center"},style:{left:"50%",transform:"translate(-50%)",color:(i.vars||i).palette.action.disabled}},{props:{loadingPosition:"end"},style:{right:14}},{props:{loadingPosition:"end",size:"small"},style:{right:10}},{props:{variant:"text",loadingPosition:"end"},style:{right:6}},{props:{loadingPosition:"start",fullWidth:!0},style:{position:"relative",left:-10}},{props:{loadingPosition:"end",fullWidth:!0},style:{position:"relative",right:-10}}]})),Vm=oe("span",{name:"MuiButton",slot:"LoadingIconPlaceholder"})({display:"inline-block",width:"1em",height:"1em"}),qm=M.forwardRef(function(t,e){const n=M.useContext(J1),s=M.useContext(Q1),r=oc(n,t),o=Ns({props:r,name:"MuiButton"}),{children:l,color:c="primary",component:h="button",className:u,disabled:d=!1,disableElevation:f=!1,disableFocusRipple:g=!1,endIcon:y,focusVisibleClassName:p,fullWidth:A=!1,id:w,loading:T=null,loadingIndicator:x,loadingPosition:_="center",size:E="medium",startIcon:R,type:P,variant:L="text",...O}=o,S=kb(w),I=x??G.jsx(td,{"aria-labelledby":S,color:"inherit",size:16}),B={...o,color:c,component:h,disabled:d,disableElevation:f,disableFocusRipple:g,fullWidth:A,loading:T,loadingIndicator:I,loadingPosition:_,size:E,type:P,variant:L},H=Z1(B),W=(R||T&&_==="start")&&G.jsx(e_,{className:H.startIcon,ownerState:B,children:R||G.jsx(Vm,{className:H.loadingIconPlaceholder,ownerState:B})}),X=(y||T&&_==="end")&&G.jsx(n_,{className:H.endIcon,ownerState:B,children:y||G.jsx(Vm,{className:H.loadingIconPlaceholder,ownerState:B})}),j=s||"",z=typeof T=="boolean"?G.jsx("span",{className:H.loadingWrapper,style:{display:"contents"},children:T&&G.jsx(s_,{className:H.loadingIndicator,ownerState:B,children:I})}):null;return G.jsxs(t_,{ownerState:B,className:Bt(n.className,H.root,u,j),component:h,disabled:d||T,focusRipple:!g,focusVisibleClassName:Bt(H.focusVisible,p),ref:e,type:P,id:T?S:w,...O,classes:H,children:[W,_!=="end"&&z,l,_==="end"&&z,X]})}),Xm=tE({createStyledComponent:oe("div",{name:"MuiStack",slot:"Root"}),useThemeProps:i=>Ns({props:i,name:"MuiStack"})}),qe=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),sp=[.001,0,0,.001,0,0],df=1.35,vn={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},ks={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},i_="pdfjs_internal_editor_",at={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,SIGNATURE:101},yt={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35,DRAW_STEP:41},Ob={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Le={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},ec={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},te={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},Jo={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},qh={ERRORS:0,WARNINGS:1,INFOS:5},cc={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},lu={moveTo:0,lineTo:1,curveTo:2,closePath:3},Db={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let zd=qh.WARNINGS;function r_(i){Number.isInteger(i)&&(zd=i)}function o_(){return zd}function Gd(i){zd>=qh.INFOS&&console.log(`Info: ${i}`)}function lt(i){zd>=qh.WARNINGS&&console.log(`Warning: ${i}`)}function Lt(i){throw new Error(i)}function ce(i,t){i||Lt(t)}function a_(i){switch(i==null?void 0:i.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function Fg(i,t=null,e=null){if(!i)return null;if(e&&typeof i=="string"){if(e.addDefaultProtocol&&i.startsWith("www.")){const s=i.match(/\./g);(s==null?void 0:s.length)>=2&&(i=`http://${i}`)}if(e.tryConvertEncoding)try{i=d_(i)}catch{}}const n=t?URL.parse(i,t):URL.parse(i);return a_(n)?n:null}function $g(i,t,e=!1){const n=URL.parse(i);return n?(n.hash=t,n.href):e&&Fg(i,"http://example.com")?i.split("#",1)[0]+`${t?`#${t}`:""}`:""}function mt(i,t,e,n=!1){return Object.defineProperty(i,t,{value:e,enumerable:!n,configurable:!0,writable:!1}),e}const jo=function(){function t(e,n){this.message=e,this.name=n}return t.prototype=new Error,t.constructor=t,t}();class Ym extends jo{constructor(t,e){super(t,"PasswordException"),this.code=e}}class ff extends jo{constructor(t,e){super(t,"UnknownErrorException"),this.details=e}}class ed extends jo{constructor(t){super(t,"InvalidPDFException")}}class hc extends jo{constructor(t,e,n){super(t,"ResponseException"),this.status=e,this.missing=n}}class l_ extends jo{constructor(t){super(t,"FormatError")}}class Si extends jo{constructor(t){super(t,"AbortException")}}function Nb(i){(typeof i!="object"||(i==null?void 0:i.length)===void 0)&&Lt("Invalid argument for bytesToString");const t=i.length,e=8192;if(t<e)return String.fromCharCode.apply(null,i);const n=[];for(let s=0;s<t;s+=e){const r=Math.min(s+e,t),o=i.subarray(s,r);n.push(String.fromCharCode.apply(null,o))}return n.join("")}function Xh(i){typeof i!="string"&&Lt("Invalid argument for stringToBytes");const t=i.length,e=new Uint8Array(t);for(let n=0;n<t;++n)e[n]=i.charCodeAt(n)&255;return e}function c_(i){return String.fromCharCode(i>>24&255,i>>16&255,i>>8&255,i&255)}function h_(){const i=new Uint8Array(4);return i[0]=1,new Uint32Array(i.buffer,0,1)[0]===1}function u_(){try{return new Function(""),!0}catch{return!1}}class we{static get isLittleEndian(){return mt(this,"isLittleEndian",h_())}static get isEvalSupported(){return mt(this,"isEvalSupported",u_())}static get isOffscreenCanvasSupported(){return mt(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return mt(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){const{platform:t,userAgent:e}=navigator;return mt(this,"platform",{isAndroid:e.includes("Android"),isLinux:t.includes("Linux"),isMac:t.includes("Mac"),isWindows:t.includes("Win"),isFirefox:e.includes("Firefox")})}static get isCSSRoundSupported(){var t,e;return mt(this,"isCSSRoundSupported",(e=(t=globalThis.CSS)==null?void 0:t.supports)==null?void 0:e.call(t,"width: round(1.5px, 1px)"))}}const pf=Array.from(Array(256).keys(),i=>i.toString(16).padStart(2,"0"));var vi,Au,ip;class et{static makeHexColor(t,e,n){return`#${pf[t]}${pf[e]}${pf[n]}`}static scaleMinMax(t,e){let n;t[0]?(t[0]<0&&(n=e[0],e[0]=e[2],e[2]=n),e[0]*=t[0],e[2]*=t[0],t[3]<0&&(n=e[1],e[1]=e[3],e[3]=n),e[1]*=t[3],e[3]*=t[3]):(n=e[0],e[0]=e[1],e[1]=n,n=e[2],e[2]=e[3],e[3]=n,t[1]<0&&(n=e[1],e[1]=e[3],e[3]=n),e[1]*=t[1],e[3]*=t[1],t[2]<0&&(n=e[0],e[0]=e[2],e[2]=n),e[0]*=t[2],e[2]*=t[2]),e[0]+=t[4],e[1]+=t[5],e[2]+=t[4],e[3]+=t[5]}static transform(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}static applyTransform(t,e,n=0){const s=t[n],r=t[n+1];t[n]=s*e[0]+r*e[2]+e[4],t[n+1]=s*e[1]+r*e[3]+e[5]}static applyTransformToBezier(t,e,n=0){const s=e[0],r=e[1],o=e[2],l=e[3],c=e[4],h=e[5];for(let u=0;u<6;u+=2){const d=t[n+u],f=t[n+u+1];t[n+u]=d*s+f*o+c,t[n+u+1]=d*r+f*l+h}}static applyInverseTransform(t,e){const n=t[0],s=t[1],r=e[0]*e[3]-e[1]*e[2];t[0]=(n*e[3]-s*e[2]+e[2]*e[5]-e[4]*e[3])/r,t[1]=(-n*e[1]+s*e[0]+e[4]*e[1]-e[5]*e[0])/r}static axialAlignedBoundingBox(t,e,n){const s=e[0],r=e[1],o=e[2],l=e[3],c=e[4],h=e[5],u=t[0],d=t[1],f=t[2],g=t[3];let y=s*u+c,p=y,A=s*f+c,w=A,T=l*d+h,x=T,_=l*g+h,E=_;if(r!==0||o!==0){const R=r*u,P=r*f,L=o*d,O=o*g;y+=L,w+=L,A+=O,p+=O,T+=R,E+=R,_+=P,x+=P}n[0]=Math.min(n[0],y,A,p,w),n[1]=Math.min(n[1],T,_,x,E),n[2]=Math.max(n[2],y,A,p,w),n[3]=Math.max(n[3],T,_,x,E)}static inverseTransform(t){const e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}static singularValueDecompose2dScale(t,e){const n=t[0],s=t[1],r=t[2],o=t[3],l=n**2+s**2,c=n*r+s*o,h=r**2+o**2,u=(l+h)/2,d=Math.sqrt(u**2-(l*h-c**2));e[0]=Math.sqrt(u+d||1),e[1]=Math.sqrt(u-d||1)}static normalizeRect(t){const e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}static intersect(t,e){const n=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),s=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));if(n>s)return null;const r=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),o=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));return r>o?null:[n,r,s,o]}static pointBoundingBox(t,e,n){n[0]=Math.min(n[0],t),n[1]=Math.min(n[1],e),n[2]=Math.max(n[2],t),n[3]=Math.max(n[3],e)}static rectBoundingBox(t,e,n,s,r){r[0]=Math.min(r[0],t,n),r[1]=Math.min(r[1],e,s),r[2]=Math.max(r[2],t,n),r[3]=Math.max(r[3],e,s)}static bezierBoundingBox(t,e,n,s,r,o,l,c,h){h[0]=Math.min(h[0],t,l),h[1]=Math.min(h[1],e,c),h[2]=Math.max(h[2],t,l),h[3]=Math.max(h[3],e,c),v(this,vi,ip).call(this,t,n,r,l,e,s,o,c,3*(-t+3*(n-r)+l),6*(t-2*n+r),3*(n-t),h),v(this,vi,ip).call(this,t,n,r,l,e,s,o,c,3*(-e+3*(s-o)+c),6*(e-2*s+o),3*(s-e),h)}}vi=new WeakSet,Au=function(t,e,n,s,r,o,l,c,h,u){if(h<=0||h>=1)return;const d=1-h,f=h*h,g=f*h,y=d*(d*(d*t+3*h*e)+3*f*n)+g*s,p=d*(d*(d*r+3*h*o)+3*f*l)+g*c;u[0]=Math.min(u[0],y),u[1]=Math.min(u[1],p),u[2]=Math.max(u[2],y),u[3]=Math.max(u[3],p)},ip=function(t,e,n,s,r,o,l,c,h,u,d,f){if(Math.abs(h)<1e-12){Math.abs(u)>=1e-12&&v(this,vi,Au).call(this,t,e,n,s,r,o,l,c,-d/u,f);return}const g=u**2-4*d*h;if(g<0)return;const y=Math.sqrt(g),p=2*h;v(this,vi,Au).call(this,t,e,n,s,r,o,l,c,(-u+y)/p,f),v(this,vi,Au).call(this,t,e,n,s,r,o,l,c,(-u-y)/p,f)},b(et,vi);function d_(i){return decodeURIComponent(escape(i))}let gf=null,Km=null;function Fb(i){return gf||(gf=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,Km=new Map([["ﬅ","ſt"]])),i.replaceAll(gf,(t,e,n)=>e?e.normalize("NFKC"):Km.get(n))}function Bg(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const i=new Uint8Array(32);return crypto.getRandomValues(i),Nb(i)}const jg="pdfjs_internal_id_";function f_(i,t,e){if(!Array.isArray(e)||e.length<2)return!1;const[n,s,...r]=e;if(!i(n)&&!Number.isInteger(n)||!t(s))return!1;const o=r.length;let l=!0;switch(s.name){case"XYZ":if(o<2||o>3)return!1;break;case"Fit":case"FitB":return o===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(o>1)return!1;break;case"FitR":if(o!==4)return!1;l=!1;break;default:return!1}for(const c of r)if(!(typeof c=="number"||l&&c===null))return!1;return!0}function $e(i,t,e){return Math.min(Math.max(i,t),e)}function $b(i){return Uint8Array.prototype.toBase64?i.toBase64():btoa(Nb(i))}function p_(i){return Uint8Array.fromBase64?Uint8Array.fromBase64(i):Xh(atob(i))}typeof Promise.try!="function"&&(Promise.try=function(i,...t){return new Promise(e=>{e(i(...t))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(i){return i.reduce((t,e)=>t+e,0)});const Bs="http://www.w3.org/2000/svg",xr=class xr{};U(xr,"CSS",96),U(xr,"PDF",72),U(xr,"PDF_TO_CSS_UNITS",xr.CSS/xr.PDF);let Ei=xr;async function _l(i,t="text"){if(Dl(i,document.baseURI)){const e=await fetch(i);if(!e.ok)throw new Error(e.statusText);switch(t){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"json":return e.json()}return e.text()}return new Promise((e,n)=>{const s=new XMLHttpRequest;s.open("GET",i,!0),s.responseType=t,s.onreadystatechange=()=>{if(s.readyState===XMLHttpRequest.DONE){if(s.status===200||s.status===0){switch(t){case"arraybuffer":case"blob":case"json":e(s.response);return}e(s.responseText);return}n(new Error(s.statusText))}},s.send(null)})}class Yh{constructor({viewBox:t,userUnit:e,scale:n,rotation:s,offsetX:r=0,offsetY:o=0,dontFlip:l=!1}){this.viewBox=t,this.userUnit=e,this.scale=n,this.rotation=s,this.offsetX=r,this.offsetY=o,n*=e;const c=(t[2]+t[0])/2,h=(t[3]+t[1])/2;let u,d,f,g;switch(s%=360,s<0&&(s+=360),s){case 180:u=-1,d=0,f=0,g=1;break;case 90:u=0,d=1,f=1,g=0;break;case 270:u=0,d=-1,f=-1,g=0;break;case 0:u=1,d=0,f=0,g=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}l&&(f=-f,g=-g);let y,p,A,w;u===0?(y=Math.abs(h-t[1])*n+r,p=Math.abs(c-t[0])*n+o,A=(t[3]-t[1])*n,w=(t[2]-t[0])*n):(y=Math.abs(c-t[0])*n+r,p=Math.abs(h-t[1])*n+o,A=(t[2]-t[0])*n,w=(t[3]-t[1])*n),this.transform=[u*n,d*n,f*n,g*n,y-u*n*c-f*n*h,p-d*n*c-g*n*h],this.width=A,this.height=w}get rawDims(){const t=this.viewBox;return mt(this,"rawDims",{pageWidth:t[2]-t[0],pageHeight:t[3]-t[1],pageX:t[0],pageY:t[1]})}clone({scale:t=this.scale,rotation:e=this.rotation,offsetX:n=this.offsetX,offsetY:s=this.offsetY,dontFlip:r=!1}={}){return new Yh({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:t,rotation:e,offsetX:n,offsetY:s,dontFlip:r})}convertToViewportPoint(t,e){const n=[t,e];return et.applyTransform(n,this.transform),n}convertToViewportRectangle(t){const e=[t[0],t[1]];et.applyTransform(e,this.transform);const n=[t[2],t[3]];return et.applyTransform(n,this.transform),[e[0],e[1],n[0],n[1]]}convertToPdfPoint(t,e){const n=[t,e];return et.applyInverseTransform(n,this.transform),n}}class Ud extends jo{constructor(t,e=0){super(t,"RenderingCancelledException"),this.extraDelay=e}}function Kh(i){const t=i.length;let e=0;for(;e<t&&i[e].trim()==="";)e++;return i.substring(e,e+5).toLowerCase()==="data:"}function Wd(i){return typeof i=="string"&&/\.pdf$/i.test(i)}function Bb(i){return[i]=i.split(/[#?]/,1),i.substring(i.lastIndexOf("/")+1)}function jb(i,t="document.pdf"){if(typeof i!="string")return t;if(Kh(i))return lt('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const e=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,n=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,s=e.exec(i);let r=n.exec(s[1])||n.exec(s[2])||n.exec(s[3]);if(r&&(r=r[0],r.includes("%")))try{r=n.exec(decodeURIComponent(r))[0]}catch{}return r||t}class Jm{constructor(){U(this,"started",Object.create(null));U(this,"times",[])}time(t){t in this.started&&lt(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||lt(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let e=0;for(const{name:n}of this.times)e=Math.max(n.length,e);for(const{name:n,start:s,end:r}of this.times)t.push(`${n.padEnd(e)} ${r-s}ms
`);return t.join("")}}function Dl(i,t){const e=t?URL.parse(i,t):URL.parse(i);return(e==null?void 0:e.protocol)==="http:"||(e==null?void 0:e.protocol)==="https:"}function jn(i){i.preventDefault()}function se(i){i.preventDefault(),i.stopPropagation()}function g_(i){console.log("Deprecated API usage: "+i)}var mc;class Vd{static toDateObject(t){if(!t||typeof t!="string")return null;a(this,mc)||m(this,mc,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const e=a(this,mc).exec(t);if(!e)return null;const n=parseInt(e[1],10);let s=parseInt(e[2],10);s=s>=1&&s<=12?s-1:0;let r=parseInt(e[3],10);r=r>=1&&r<=31?r:1;let o=parseInt(e[4],10);o=o>=0&&o<=23?o:0;let l=parseInt(e[5],10);l=l>=0&&l<=59?l:0;let c=parseInt(e[6],10);c=c>=0&&c<=59?c:0;const h=e[7]||"Z";let u=parseInt(e[8],10);u=u>=0&&u<=23?u:0;let d=parseInt(e[9],10)||0;return d=d>=0&&d<=59?d:0,h==="-"?(o+=u,l+=d):h==="+"&&(o-=u,l-=d),new Date(Date.UTC(n,s,r,o,l,c))}}mc=new WeakMap,b(Vd,mc);function Hb(i,{scale:t=1,rotation:e=0}){const{width:n,height:s}=i.attributes.style,r=[0,0,parseInt(n),parseInt(s)];return new Yh({viewBox:r,userUnit:1,scale:t,rotation:e})}function Hg(i){if(i.startsWith("#")){const t=parseInt(i.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return i.startsWith("rgb(")?i.slice(4,-1).split(",").map(t=>parseInt(t)):i.startsWith("rgba(")?i.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(lt(`Not a valid color format: "${i}"`),[0,0,0])}function m_(i){const t=document.createElement("span");t.style.visibility="hidden",t.style.colorScheme="only light",document.body.append(t);for(const e of i.keys()){t.style.color=e;const n=window.getComputedStyle(t).color;i.set(e,Hg(n))}t.remove()}function Xt(i){const{a:t,b:e,c:n,d:s,e:r,f:o}=i.getTransform();return[t,e,n,s,r,o]}function as(i){const{a:t,b:e,c:n,d:s,e:r,f:o}=i.getTransform().invertSelf();return[t,e,n,s,r,o]}function fr(i,t,e=!1,n=!0){if(t instanceof Yh){const{pageWidth:s,pageHeight:r}=t.rawDims,{style:o}=i,l=we.isCSSRoundSupported,c=`var(--total-scale-factor) * ${s}px`,h=`var(--total-scale-factor) * ${r}px`,u=l?`round(down, ${c}, var(--scale-round-x))`:`calc(${c})`,d=l?`round(down, ${h}, var(--scale-round-y))`:`calc(${h})`;!e||t.rotation%180===0?(o.width=u,o.height=d):(o.width=d,o.height=u)}n&&i.setAttribute("data-main-rotation",t.rotation)}class is{constructor(){const{pixelRatio:t}=is;this.sx=t,this.sy=t}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(t,e,n,s,r=-1){let o=1/0,l=1/0,c=1/0;n=is.capPixels(n,r),n>0&&(o=Math.sqrt(n/(t*e))),s!==-1&&(l=s/t,c=s/e);const h=Math.min(o,l,c);return this.sx>h||this.sy>h?(this.sx=h,this.sy=h,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(t,e){if(e>=0){const n=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+e/100));return t>0?Math.min(t,n):n}return t}}const nd=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];var Ri,Rr,Tn,Pi,yc,fa,bc,cd,zb,ke,Gb,Ub,Nl,Wb,wu;const zs=class zs{constructor(t){b(this,ke);b(this,Ri,null);b(this,Rr,null);b(this,Tn);b(this,Pi,null);b(this,yc,null);b(this,fa,null);m(this,Tn,t),a(zs,bc)||m(zs,bc,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"}))}render(){const t=m(this,Ri,document.createElement("div"));t.classList.add("editToolbar","hidden"),t.setAttribute("role","toolbar");const e=a(this,Tn)._uiManager._signal;t.addEventListener("contextmenu",jn,{signal:e}),t.addEventListener("pointerdown",v(zs,cd,zb),{signal:e});const n=m(this,Pi,document.createElement("div"));n.className="buttons",t.append(n);const s=a(this,Tn).toolbarPosition;if(s){const{style:r}=t,o=a(this,Tn)._uiManager.direction==="ltr"?1-s[0]:s[0];r.insetInlineEnd=`${100*o}%`,r.top=`calc(${100*s[1]}% + var(--editor-toolbar-vert-offset))`}return v(this,ke,Wb).call(this),t}get div(){return a(this,Ri)}hide(){var t;a(this,Ri).classList.add("hidden"),(t=a(this,Rr))==null||t.hideDropdown()}show(){var t;a(this,Ri).classList.remove("hidden"),(t=a(this,yc))==null||t.shown()}async addAltText(t){const e=await t.render();v(this,ke,Nl).call(this,e),a(this,Pi).prepend(e,a(this,ke,wu)),m(this,yc,t)}addColorPicker(t){m(this,Rr,t);const e=t.renderButton();v(this,ke,Nl).call(this,e),a(this,Pi).prepend(e,a(this,ke,wu))}async addEditSignatureButton(t){const e=m(this,fa,await t.renderEditButton(a(this,Tn)));v(this,ke,Nl).call(this,e),a(this,Pi).prepend(e,a(this,ke,wu))}updateEditSignatureButton(t){a(this,fa)&&(a(this,fa).title=t)}remove(){var t;a(this,Ri).remove(),(t=a(this,Rr))==null||t.destroy(),m(this,Rr,null)}};Ri=new WeakMap,Rr=new WeakMap,Tn=new WeakMap,Pi=new WeakMap,yc=new WeakMap,fa=new WeakMap,bc=new WeakMap,cd=new WeakSet,zb=function(t){t.stopPropagation()},ke=new WeakSet,Gb=function(t){a(this,Tn)._focusEventsAllowed=!1,se(t)},Ub=function(t){a(this,Tn)._focusEventsAllowed=!0,se(t)},Nl=function(t){const e=a(this,Tn)._uiManager._signal;t.addEventListener("focusin",v(this,ke,Gb).bind(this),{capture:!0,signal:e}),t.addEventListener("focusout",v(this,ke,Ub).bind(this),{capture:!0,signal:e}),t.addEventListener("contextmenu",jn,{signal:e})},Wb=function(){const{editorType:t,_uiManager:e}=a(this,Tn),n=document.createElement("button");n.className="delete",n.tabIndex=0,n.setAttribute("data-l10n-id",a(zs,bc)[t]),v(this,ke,Nl).call(this,n),n.addEventListener("click",s=>{e.delete()},{signal:e._signal}),a(this,Pi).append(n)},wu=function(){const t=document.createElement("div");return t.className="divider",t},b(zs,cd),b(zs,bc,null);let rp=zs;var vc,Pr,kr,gr,Vb,qb,Xb;class y_{constructor(t){b(this,gr);b(this,vc,null);b(this,Pr,null);b(this,kr);m(this,kr,t)}show(t,e,n){const[s,r]=v(this,gr,qb).call(this,e,n),{style:o}=a(this,Pr)||m(this,Pr,v(this,gr,Vb).call(this));t.append(a(this,Pr)),o.insetInlineEnd=`${100*s}%`,o.top=`calc(${100*r}% + var(--editor-toolbar-vert-offset))`}hide(){a(this,Pr).remove()}}vc=new WeakMap,Pr=new WeakMap,kr=new WeakMap,gr=new WeakSet,Vb=function(){const t=m(this,Pr,document.createElement("div"));t.className="editToolbar",t.setAttribute("role","toolbar"),t.addEventListener("contextmenu",jn,{signal:a(this,kr)._signal});const e=m(this,vc,document.createElement("div"));return e.className="buttons",t.append(e),v(this,gr,Xb).call(this),t},qb=function(t,e){let n=0,s=0;for(const r of t){const o=r.y+r.height;if(o<n)continue;const l=r.x+(e?r.width:0);if(o>n){s=l,n=o;continue}e?l>s&&(s=l):l<s&&(s=l)}return[e?1-s:s,n]},Xb=function(){const t=document.createElement("button");t.className="highlightButton",t.tabIndex=0,t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const e=document.createElement("span");t.append(e),e.className="visuallyHidden",e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const n=a(this,kr)._signal;t.addEventListener("contextmenu",jn,{signal:n}),t.addEventListener("click",()=>{a(this,kr).highlightSelection("floating_button")},{signal:n}),a(this,vc).append(t)};function Yb(i,t,e){for(const n of e)t.addEventListener(n,i[n].bind(i))}var hd;class b_{constructor(){b(this,hd,0)}get id(){return`${i_}${He(this,hd)._++}`}}hd=new WeakMap;var pa,Ac,Oe,ga,Su;const tm=class tm{constructor(){b(this,ga);b(this,pa,Bg());b(this,Ac,0);b(this,Oe,null)}static get _isSVGFittingCanvas(){const t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',n=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),s=new Image;s.src=t;const r=s.decode().then(()=>(n.drawImage(s,0,0,1,1,0,0,1,3),new Uint32Array(n.getImageData(0,0,1,1).data.buffer)[0]===0));return mt(this,"_isSVGFittingCanvas",r)}async getFromFile(t){const{lastModified:e,name:n,size:s,type:r}=t;return v(this,ga,Su).call(this,`${e}_${n}_${s}_${r}`,t)}async getFromUrl(t){return v(this,ga,Su).call(this,t,t)}async getFromBlob(t,e){const n=await e;return v(this,ga,Su).call(this,t,n)}async getFromId(t){a(this,Oe)||m(this,Oe,new Map);const e=a(this,Oe).get(t);if(!e)return null;if(e.bitmap)return e.refCounter+=1,e;if(e.file)return this.getFromFile(e.file);if(e.blobPromise){const{blobPromise:n}=e;return delete e.blobPromise,this.getFromBlob(e.id,n)}return this.getFromUrl(e.url)}getFromCanvas(t,e){a(this,Oe)||m(this,Oe,new Map);let n=a(this,Oe).get(t);if(n!=null&&n.bitmap)return n.refCounter+=1,n;const s=new OffscreenCanvas(e.width,e.height);return s.getContext("2d").drawImage(e,0,0),n={bitmap:s.transferToImageBitmap(),id:`image_${a(this,pa)}_${He(this,Ac)._++}`,refCounter:1,isSvg:!1},a(this,Oe).set(t,n),a(this,Oe).set(n.id,n),n}getSvgUrl(t){const e=a(this,Oe).get(t);return e!=null&&e.isSvg?e.svgUrl:null}deleteId(t){var s;a(this,Oe)||m(this,Oe,new Map);const e=a(this,Oe).get(t);if(!e||(e.refCounter-=1,e.refCounter!==0))return;const{bitmap:n}=e;if(!e.url&&!e.file){const r=new OffscreenCanvas(n.width,n.height);r.getContext("bitmaprenderer").transferFromImageBitmap(n),e.blobPromise=r.convertToBlob()}(s=n.close)==null||s.call(n),e.bitmap=null}isValidId(t){return t.startsWith(`image_${a(this,pa)}_`)}};pa=new WeakMap,Ac=new WeakMap,Oe=new WeakMap,ga=new WeakSet,Su=async function(t,e){a(this,Oe)||m(this,Oe,new Map);let n=a(this,Oe).get(t);if(n===null)return null;if(n!=null&&n.bitmap)return n.refCounter+=1,n;try{n||(n={bitmap:null,id:`image_${a(this,pa)}_${He(this,Ac)._++}`,refCounter:0,isSvg:!1});let s;if(typeof e=="string"?(n.url=e,s=await _l(e,"blob")):e instanceof File?s=n.file=e:e instanceof Blob&&(s=e),s.type==="image/svg+xml"){const r=tm._isSVGFittingCanvas,o=new FileReader,l=new Image,c=new Promise((h,u)=>{l.onload=()=>{n.bitmap=l,n.isSvg=!0,h()},o.onload=async()=>{const d=n.svgUrl=o.result;l.src=await r?`${d}#svgView(preserveAspectRatio(none))`:d},l.onerror=o.onerror=u});o.readAsDataURL(s),await c}else n.bitmap=await createImageBitmap(s);n.refCounter=1}catch(s){lt(s),n=null}return a(this,Oe).set(t,n),n&&a(this,Oe).set(n.id,n),n};let op=tm;var ee,ki,wc,qt;class v_{constructor(t=128){b(this,ee,[]);b(this,ki,!1);b(this,wc);b(this,qt,-1);m(this,wc,t)}add({cmd:t,undo:e,post:n,mustExec:s,type:r=NaN,overwriteIfSameType:o=!1,keepUndo:l=!1}){if(s&&t(),a(this,ki))return;const c={cmd:t,undo:e,post:n,type:r};if(a(this,qt)===-1){a(this,ee).length>0&&(a(this,ee).length=0),m(this,qt,0),a(this,ee).push(c);return}if(o&&a(this,ee)[a(this,qt)].type===r){l&&(c.undo=a(this,ee)[a(this,qt)].undo),a(this,ee)[a(this,qt)]=c;return}const h=a(this,qt)+1;h===a(this,wc)?a(this,ee).splice(0,1):(m(this,qt,h),h<a(this,ee).length&&a(this,ee).splice(h)),a(this,ee).push(c)}undo(){if(a(this,qt)===-1)return;m(this,ki,!0);const{undo:t,post:e}=a(this,ee)[a(this,qt)];t(),e==null||e(),m(this,ki,!1),m(this,qt,a(this,qt)-1)}redo(){if(a(this,qt)<a(this,ee).length-1){m(this,qt,a(this,qt)+1),m(this,ki,!0);const{cmd:t,post:e}=a(this,ee)[a(this,qt)];t(),e==null||e(),m(this,ki,!1)}}hasSomethingToUndo(){return a(this,qt)!==-1}hasSomethingToRedo(){return a(this,qt)<a(this,ee).length-1}cleanType(t){if(a(this,qt)!==-1){for(let e=a(this,qt);e>=0;e--)if(a(this,ee)[e].type!==t){a(this,ee).splice(e+1,a(this,qt)-e),m(this,qt,e);return}a(this,ee).length=0,m(this,qt,-1)}}destroy(){m(this,ee,null)}}ee=new WeakMap,ki=new WeakMap,wc=new WeakMap,qt=new WeakMap;var ud,Kb;class Jh{constructor(t){b(this,ud);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:e}=we.platform;for(const[n,s,r={}]of t)for(const o of n){const l=o.startsWith("mac+");e&&l?(this.callbacks.set(o.slice(4),{callback:s,options:r}),this.allKeys.add(o.split("+").at(-1))):!e&&!l&&(this.callbacks.set(o,{callback:s,options:r}),this.allKeys.add(o.split("+").at(-1)))}}exec(t,e){if(!this.allKeys.has(e.key))return;const n=this.callbacks.get(v(this,ud,Kb).call(this,e));if(!n)return;const{callback:s,options:{bubbles:r=!1,args:o=[],checker:l=null}}=n;l&&!l(t,e)||(s.bind(t,...o,e)(),r||se(e))}}ud=new WeakSet,Kb=function(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const e=this.buffer.join("+");return this.buffer.length=0,e};const dd=class dd{get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return m_(t),mt(this,"_colors",t)}convert(t){const e=Hg(t);if(!window.matchMedia("(forced-colors: active)").matches)return e;for(const[n,s]of this._colors)if(s.every((r,o)=>r===e[o]))return dd._colorsMapping.get(n);return e}getHexCode(t){const e=this._colors.get(t);return e?et.makeHexColor(...e):t}};U(dd,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let ap=dd;var ma,on,de,Se,ya,Us,ba,Rn,Ii,Li,va,Ir,hs,Gn,Lr,Sc,Ec,Aa,_c,us,Mi,wa,Oi,ds,fd,Di,xc,Ni,Mr,Or,Fi,Cc,ge,Rt,Ws,$i,Dr,Tc,Rc,Bi,fs,Vs,Pc,Pn,q,Eu,lp,Jb,Qb,_u,Zb,t0,e0,cp,n0,hp,up,s0,ze,js,i0,r0,dp,o0,Fl,fp;const oa=class oa{constructor(t,e,n,s,r,o,l,c,h,u,d,f,g,y){b(this,q);b(this,ma,new AbortController);b(this,on,null);b(this,de,new Map);b(this,Se,new Map);b(this,ya,null);b(this,Us,null);b(this,ba,null);b(this,Rn,new v_);b(this,Ii,null);b(this,Li,null);b(this,va,0);b(this,Ir,new Set);b(this,hs,null);b(this,Gn,null);b(this,Lr,new Set);U(this,"_editorUndoBar",null);b(this,Sc,!1);b(this,Ec,!1);b(this,Aa,!1);b(this,_c,null);b(this,us,null);b(this,Mi,null);b(this,wa,null);b(this,Oi,!1);b(this,ds,null);b(this,fd,new b_);b(this,Di,!1);b(this,xc,!1);b(this,Ni,null);b(this,Mr,null);b(this,Or,null);b(this,Fi,null);b(this,Cc,null);b(this,ge,at.NONE);b(this,Rt,new Set);b(this,Ws,null);b(this,$i,null);b(this,Dr,null);b(this,Tc,null);b(this,Rc,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});b(this,Bi,[0,0]);b(this,fs,null);b(this,Vs,null);b(this,Pc,null);b(this,Pn,null);const p=this._signal=a(this,ma).signal;m(this,Vs,t),m(this,Pc,e),m(this,ya,n),m(this,$i,s),this._eventBus=r,r._on("editingaction",this.onEditingAction.bind(this),{signal:p}),r._on("pagechanging",this.onPageChanging.bind(this),{signal:p}),r._on("scalechanging",this.onScaleChanging.bind(this),{signal:p}),r._on("rotationchanging",this.onRotationChanging.bind(this),{signal:p}),r._on("setpreference",this.onSetPreference.bind(this),{signal:p}),r._on("switchannotationeditorparams",A=>this.updateParams(A.type,A.value),{signal:p}),v(this,q,Zb).call(this),v(this,q,s0).call(this),v(this,q,cp).call(this),m(this,Us,o.annotationStorage),m(this,_c,o.filterFactory),m(this,Dr,l),m(this,wa,c||null),m(this,Sc,h),m(this,Ec,u),m(this,Aa,d),m(this,Cc,f||null),this.viewParameters={realScale:Ei.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=g||null,this._supportsPinchToZoom=y!==!1}static get _keyboardManager(){const t=oa.prototype,e=o=>a(o,Vs).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&o.hasSomethingToControl(),n=(o,{target:l})=>{if(l instanceof HTMLInputElement){const{type:c}=l;return c!=="text"&&c!=="number"}return!0},s=this.TRANSLATE_SMALL,r=this.TRANSLATE_BIG;return mt(this,"_keyboardManager",new Jh([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:n}],[["ctrl+z","mac+meta+z"],t.undo,{checker:n}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:n}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:n}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(o,{target:l})=>!(l instanceof HTMLButtonElement)&&a(o,Vs).contains(l)&&!o.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(o,{target:l})=>!(l instanceof HTMLButtonElement)&&a(o,Vs).contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-s,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-r,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[s,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[r,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-s],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-r],checker:e}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,s],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,r],checker:e}]]))}destroy(){var t,e,n,s,r,o,l,c;(t=a(this,Pn))==null||t.resolve(),m(this,Pn,null),(e=a(this,ma))==null||e.abort(),m(this,ma,null),this._signal=null;for(const h of a(this,Se).values())h.destroy();a(this,Se).clear(),a(this,de).clear(),a(this,Lr).clear(),(n=a(this,Fi))==null||n.clear(),m(this,on,null),a(this,Rt).clear(),a(this,Rn).destroy(),(s=a(this,ya))==null||s.destroy(),(r=a(this,$i))==null||r.destroy(),(o=a(this,ds))==null||o.hide(),m(this,ds,null),(l=a(this,Or))==null||l.destroy(),m(this,Or,null),a(this,us)&&(clearTimeout(a(this,us)),m(this,us,null)),a(this,fs)&&(clearTimeout(a(this,fs)),m(this,fs,null)),(c=this._editorUndoBar)==null||c.destroy()}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return a(this,Cc)}get useNewAltTextFlow(){return a(this,Ec)}get useNewAltTextWhenAddingImage(){return a(this,Aa)}get hcmFilter(){return mt(this,"hcmFilter",a(this,Dr)?a(this,_c).addHCMFilter(a(this,Dr).foreground,a(this,Dr).background):"none")}get direction(){return mt(this,"direction",getComputedStyle(a(this,Vs)).direction)}get highlightColors(){return mt(this,"highlightColors",a(this,wa)?new Map(a(this,wa).split(",").map(t=>t.split("=").map(e=>e.trim()))):null)}get highlightColorNames(){return mt(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}setCurrentDrawingSession(t){t?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),m(this,Li,t)}setMainHighlightColorPicker(t){m(this,Or,t)}editAltText(t,e=!1){var n;(n=a(this,ya))==null||n.editAltText(this,t,e)}getSignature(t){var e;(e=a(this,$i))==null||e.getSignature({uiManager:this,editor:t})}get signatureManager(){return a(this,$i)}switchToMode(t,e){this._eventBus.on("annotationeditormodechanged",e,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,e){this._eventBus.dispatch("setpreference",{source:this,name:t,value:e})}onSetPreference({name:t,value:e}){switch(t){case"enableNewAltTextWhenAddingImage":m(this,Aa,e);break}}onPageChanging({pageNumber:t}){m(this,va,t-1)}focusMainContainer(){a(this,Vs).focus()}findParent(t,e){for(const n of a(this,Se).values()){const{x:s,y:r,width:o,height:l}=n.div.getBoundingClientRect();if(t>=s&&t<=s+o&&e>=r&&e<=r+l)return n}return null}disableUserSelect(t=!1){a(this,Pc).classList.toggle("noUserSelect",t)}addShouldRescale(t){a(this,Lr).add(t)}removeShouldRescale(t){a(this,Lr).delete(t)}onScaleChanging({scale:t}){var e;this.commitOrRemove(),this.viewParameters.realScale=t*Ei.PDF_TO_CSS_UNITS;for(const n of a(this,Lr))n.onScaleChanging();(e=a(this,Li))==null||e.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}highlightSelection(t=""){const e=document.getSelection();if(!e||e.isCollapsed)return;const{anchorNode:n,anchorOffset:s,focusNode:r,focusOffset:o}=e,l=e.toString(),h=v(this,q,Eu).call(this,e).closest(".textLayer"),u=this.getSelectionBoxes(h);if(!u)return;e.empty();const d=v(this,q,lp).call(this,h),f=a(this,ge)===at.NONE,g=()=>{d==null||d.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:u,anchorNode:n,anchorOffset:s,focusNode:r,focusOffset:o,text:l}),f&&this.showAllEditors("highlight",!0,!0)};if(f){this.switchToMode(at.HIGHLIGHT,g);return}g()}addToAnnotationStorage(t){!t.isEmpty()&&a(this,Us)&&!a(this,Us).has(t.id)&&a(this,Us).setValue(t.id,t)}blur(){if(this.isShiftKeyDown=!1,a(this,Oi)&&(m(this,Oi,!1),v(this,q,_u).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const e of a(this,Rt))if(e.div.contains(t)){m(this,Mr,[e,t]),e._focusEventsAllowed=!1;break}}focus(){if(!a(this,Mr))return;const[t,e]=a(this,Mr);m(this,Mr,null),e.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),e.focus()}addEditListeners(){v(this,q,cp).call(this),v(this,q,hp).call(this)}removeEditListeners(){v(this,q,n0).call(this),v(this,q,up).call(this)}dragOver(t){for(const{type:e}of t.dataTransfer.items)for(const n of a(this,Gn))if(n.isHandlingMimeForPasting(e)){t.dataTransfer.dropEffect="copy",t.preventDefault();return}}drop(t){for(const e of t.dataTransfer.items)for(const n of a(this,Gn))if(n.isHandlingMimeForPasting(e.type)){n.paste(e,this.currentLayer),t.preventDefault();return}}copy(t){var n;if(t.preventDefault(),(n=a(this,on))==null||n.commitOrRemove(),!this.hasSelection)return;const e=[];for(const s of a(this,Rt)){const r=s.serialize(!0);r&&e.push(r)}e.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(e))}cut(t){this.copy(t),this.delete()}async paste(t){t.preventDefault();const{clipboardData:e}=t;for(const r of e.items)for(const o of a(this,Gn))if(o.isHandlingMimeForPasting(r.type)){o.paste(r,this.currentLayer);return}let n=e.getData("application/pdfjs");if(!n)return;try{n=JSON.parse(n)}catch(r){lt(`paste: "${r.message}".`);return}if(!Array.isArray(n))return;this.unselectAll();const s=this.currentLayer;try{const r=[];for(const c of n){const h=await s.deserialize(c);if(!h)return;r.push(h)}const o=()=>{for(const c of r)v(this,q,dp).call(this,c);v(this,q,fp).call(this,r)},l=()=>{for(const c of r)c.remove()};this.addCommands({cmd:o,undo:l,mustExec:!0})}catch(r){lt(`paste: "${r.message}".`)}}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),a(this,ge)!==at.NONE&&!this.isEditorHandlingKeyboard&&oa._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,a(this,Oi)&&(m(this,Oi,!1),v(this,q,_u).call(this,"main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}setEditingState(t){t?(v(this,q,t0).call(this),v(this,q,hp).call(this),v(this,q,ze).call(this,{isEditing:a(this,ge)!==at.NONE,isEmpty:v(this,q,Fl).call(this),hasSomethingToUndo:a(this,Rn).hasSomethingToUndo(),hasSomethingToRedo:a(this,Rn).hasSomethingToRedo(),hasSelectedEditor:!1})):(v(this,q,e0).call(this),v(this,q,up).call(this),v(this,q,ze).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!a(this,Gn)){m(this,Gn,t);for(const e of a(this,Gn))v(this,q,js).call(this,e.defaultPropertiesToUpdate)}}getId(){return a(this,fd).id}get currentLayer(){return a(this,Se).get(a(this,va))}getLayer(t){return a(this,Se).get(t)}get currentPageIndex(){return a(this,va)}addLayer(t){a(this,Se).set(t.pageIndex,t),a(this,Di)?t.enable():t.disable()}removeLayer(t){a(this,Se).delete(t.pageIndex)}async updateMode(t,e=null,n=!1){var s,r,o;if(a(this,ge)!==t&&!(a(this,Pn)&&(await a(this,Pn).promise,!a(this,Pn)))){if(m(this,Pn,Promise.withResolvers()),(s=a(this,Li))==null||s.commitOrRemove(),m(this,ge,t),t===at.NONE){this.setEditingState(!1),v(this,q,r0).call(this),(r=this._editorUndoBar)==null||r.hide(),a(this,Pn).resolve();return}t===at.SIGNATURE&&await((o=a(this,$i))==null?void 0:o.loadSignatures()),this.setEditingState(!0),await v(this,q,i0).call(this),this.unselectAll();for(const l of a(this,Se).values())l.updateMode(t);if(!e){n&&this.addNewEditorFromKeyboard(),a(this,Pn).resolve();return}for(const l of a(this,de).values())l.annotationElementId===e||l.id===e?(this.setSelected(l),l.enterInEditMode()):l.unselect();a(this,Pn).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t.mode!==a(this,ge)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...t})}updateParams(t,e){var n;if(a(this,Gn)){switch(t){case yt.CREATE:this.currentLayer.addNewEditor(e);return;case yt.HIGHLIGHT_DEFAULT_COLOR:(n=a(this,Or))==null||n.updateColor(e);break;case yt.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(a(this,Tc)||m(this,Tc,new Map)).set(t,e),this.showAllEditors("highlight",e);break}for(const s of a(this,Rt))s.updateParams(t,e);for(const s of a(this,Gn))s.updateDefaultParams(t,e)}}showAllEditors(t,e,n=!1){var r;for(const o of a(this,de).values())o.editorType===t&&o.show(e);(((r=a(this,Tc))==null?void 0:r.get(yt.HIGHLIGHT_SHOW_ALL))??!0)!==e&&v(this,q,js).call(this,[[yt.HIGHLIGHT_SHOW_ALL,e]])}enableWaiting(t=!1){if(a(this,xc)!==t){m(this,xc,t);for(const e of a(this,Se).values())t?e.disableClick():e.enableClick(),e.div.classList.toggle("waiting",t)}}getEditors(t){const e=[];for(const n of a(this,de).values())n.pageIndex===t&&e.push(n);return e}getEditor(t){return a(this,de).get(t)}addEditor(t){a(this,de).set(t.id,t)}removeEditor(t){var e,n;t.div.contains(document.activeElement)&&(a(this,us)&&clearTimeout(a(this,us)),m(this,us,setTimeout(()=>{this.focusMainContainer(),m(this,us,null)},0))),a(this,de).delete(t.id),t.annotationElementId&&((e=a(this,Fi))==null||e.delete(t.annotationElementId)),this.unselect(t),(!t.annotationElementId||!a(this,Ir).has(t.annotationElementId))&&((n=a(this,Us))==null||n.remove(t.id))}addDeletedAnnotationElement(t){a(this,Ir).add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return a(this,Ir).has(t)}removeDeletedAnnotationElement(t){a(this,Ir).delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}setActiveEditor(t){a(this,on)!==t&&(m(this,on,t),t&&v(this,q,js).call(this,t.propertiesToUpdate))}updateUI(t){a(this,q,o0)===t&&v(this,q,js).call(this,t.propertiesToUpdate)}updateUIForDefaultProperties(t){v(this,q,js).call(this,t.defaultPropertiesToUpdate)}toggleSelected(t){if(a(this,Rt).has(t)){a(this,Rt).delete(t),t.unselect(),v(this,q,ze).call(this,{hasSelectedEditor:this.hasSelection});return}a(this,Rt).add(t),t.select(),v(this,q,js).call(this,t.propertiesToUpdate),v(this,q,ze).call(this,{hasSelectedEditor:!0})}setSelected(t){var e;(e=a(this,Li))==null||e.commitOrRemove();for(const n of a(this,Rt))n!==t&&n.unselect();a(this,Rt).clear(),a(this,Rt).add(t),t.select(),v(this,q,js).call(this,t.propertiesToUpdate),v(this,q,ze).call(this,{hasSelectedEditor:!0})}isSelected(t){return a(this,Rt).has(t)}get firstSelectedEditor(){return a(this,Rt).values().next().value}unselect(t){t.unselect(),a(this,Rt).delete(t),v(this,q,ze).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return a(this,Rt).size!==0}get isEnterHandled(){return a(this,Rt).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){var t;a(this,Rn).undo(),v(this,q,ze).call(this,{hasSomethingToUndo:a(this,Rn).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:v(this,q,Fl).call(this)}),(t=this._editorUndoBar)==null||t.hide()}redo(){a(this,Rn).redo(),v(this,q,ze).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:a(this,Rn).hasSomethingToRedo(),isEmpty:v(this,q,Fl).call(this)})}addCommands(t){a(this,Rn).add(t),v(this,q,ze).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:v(this,q,Fl).call(this)})}cleanUndoStack(t){a(this,Rn).cleanType(t)}delete(){var r;this.commitOrRemove();const t=(r=this.currentLayer)==null?void 0:r.endDrawingSession(!0);if(!this.hasSelection&&!t)return;const e=t?[t]:[...a(this,Rt)],n=()=>{var o;(o=this._editorUndoBar)==null||o.show(s,e.length===1?e[0].editorType:e.length);for(const l of e)l.remove()},s=()=>{for(const o of e)v(this,q,dp).call(this,o)};this.addCommands({cmd:n,undo:s,mustExec:!0})}commitOrRemove(){var t;(t=a(this,on))==null||t.commitOrRemove()}hasSomethingToControl(){return a(this,on)||this.hasSelection}selectAll(){for(const t of a(this,Rt))t.commit();v(this,q,fp).call(this,a(this,de).values())}unselectAll(){var t;if(!(a(this,on)&&(a(this,on).commitOrRemove(),a(this,ge)!==at.NONE))&&!((t=a(this,Li))!=null&&t.commitOrRemove())&&this.hasSelection){for(const e of a(this,Rt))e.unselect();a(this,Rt).clear(),v(this,q,ze).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(t,e,n=!1){if(n||this.commitOrRemove(),!this.hasSelection)return;a(this,Bi)[0]+=t,a(this,Bi)[1]+=e;const[s,r]=a(this,Bi),o=[...a(this,Rt)],l=1e3;a(this,fs)&&clearTimeout(a(this,fs)),m(this,fs,setTimeout(()=>{m(this,fs,null),a(this,Bi)[0]=a(this,Bi)[1]=0,this.addCommands({cmd:()=>{for(const c of o)a(this,de).has(c.id)&&(c.translateInPage(s,r),c.translationDone())},undo:()=>{for(const c of o)a(this,de).has(c.id)&&(c.translateInPage(-s,-r),c.translationDone())},mustExec:!1})},l));for(const c of o)c.translateInPage(t,e),c.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),m(this,hs,new Map);for(const t of a(this,Rt))a(this,hs).set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!a(this,hs))return!1;this.disableUserSelect(!1);const t=a(this,hs);m(this,hs,null);let e=!1;for(const[{x:s,y:r,pageIndex:o},l]of t)l.newX=s,l.newY=r,l.newPageIndex=o,e||(e=s!==l.savedX||r!==l.savedY||o!==l.savedPageIndex);if(!e)return!1;const n=(s,r,o,l)=>{if(a(this,de).has(s.id)){const c=a(this,Se).get(l);c?s._setParentAndPosition(c,r,o):(s.pageIndex=l,s.x=r,s.y=o)}};return this.addCommands({cmd:()=>{for(const[s,{newX:r,newY:o,newPageIndex:l}]of t)n(s,r,o,l)},undo:()=>{for(const[s,{savedX:r,savedY:o,savedPageIndex:l}]of t)n(s,r,o,l)},mustExec:!0}),!0}dragSelectedEditors(t,e){if(a(this,hs))for(const n of a(this,hs).keys())n.drag(t,e)}rebuild(t){if(t.parent===null){const e=this.getLayer(t.pageIndex);e?(e.changeParent(t),e.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){var t;return((t=this.getActive())==null?void 0:t.shouldGetKeyboardEvents())||a(this,Rt).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return a(this,on)===t}getActive(){return a(this,on)}getMode(){return a(this,ge)}get imageManager(){return mt(this,"imageManager",new op)}getSelectionBoxes(t){if(!t)return null;const e=document.getSelection();for(let h=0,u=e.rangeCount;h<u;h++)if(!t.contains(e.getRangeAt(h).commonAncestorContainer))return null;const{x:n,y:s,width:r,height:o}=t.getBoundingClientRect();let l;switch(t.getAttribute("data-main-rotation")){case"90":l=(h,u,d,f)=>({x:(u-s)/o,y:1-(h+d-n)/r,width:f/o,height:d/r});break;case"180":l=(h,u,d,f)=>({x:1-(h+d-n)/r,y:1-(u+f-s)/o,width:d/r,height:f/o});break;case"270":l=(h,u,d,f)=>({x:1-(u+f-s)/o,y:(h-n)/r,width:f/o,height:d/r});break;default:l=(h,u,d,f)=>({x:(h-n)/r,y:(u-s)/o,width:d/r,height:f/o});break}const c=[];for(let h=0,u=e.rangeCount;h<u;h++){const d=e.getRangeAt(h);if(!d.collapsed)for(const{x:f,y:g,width:y,height:p}of d.getClientRects())y===0||p===0||c.push(l(f,g,y,p))}return c.length===0?null:c}addChangedExistingAnnotation({annotationElementId:t,id:e}){(a(this,ba)||m(this,ba,new Map)).set(t,e)}removeChangedExistingAnnotation({annotationElementId:t}){var e;(e=a(this,ba))==null||e.delete(t)}renderAnnotationElement(t){var s;const e=(s=a(this,ba))==null?void 0:s.get(t.data.id);if(!e)return;const n=a(this,Us).getRawValue(e);n&&(a(this,ge)===at.NONE&&!n.hasBeenModified||n.renderAnnotationElement(t))}setMissingCanvas(t,e,n){var r;const s=(r=a(this,Fi))==null?void 0:r.get(t);s&&(s.setCanvas(e,n),a(this,Fi).delete(t))}addMissingCanvas(t,e){(a(this,Fi)||m(this,Fi,new Map)).set(t,e)}};ma=new WeakMap,on=new WeakMap,de=new WeakMap,Se=new WeakMap,ya=new WeakMap,Us=new WeakMap,ba=new WeakMap,Rn=new WeakMap,Ii=new WeakMap,Li=new WeakMap,va=new WeakMap,Ir=new WeakMap,hs=new WeakMap,Gn=new WeakMap,Lr=new WeakMap,Sc=new WeakMap,Ec=new WeakMap,Aa=new WeakMap,_c=new WeakMap,us=new WeakMap,Mi=new WeakMap,wa=new WeakMap,Oi=new WeakMap,ds=new WeakMap,fd=new WeakMap,Di=new WeakMap,xc=new WeakMap,Ni=new WeakMap,Mr=new WeakMap,Or=new WeakMap,Fi=new WeakMap,Cc=new WeakMap,ge=new WeakMap,Rt=new WeakMap,Ws=new WeakMap,$i=new WeakMap,Dr=new WeakMap,Tc=new WeakMap,Rc=new WeakMap,Bi=new WeakMap,fs=new WeakMap,Vs=new WeakMap,Pc=new WeakMap,Pn=new WeakMap,q=new WeakSet,Eu=function({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t},lp=function(t){const{currentLayer:e}=this;if(e.hasTextLayer(t))return e;for(const n of a(this,Se).values())if(n.hasTextLayer(t))return n;return null},Jb=function(){const t=document.getSelection();if(!t||t.isCollapsed)return;const n=v(this,q,Eu).call(this,t).closest(".textLayer"),s=this.getSelectionBoxes(n);s&&(a(this,ds)||m(this,ds,new y_(this)),a(this,ds).show(n,s,this.direction==="ltr"))},Qb=function(){var r,o,l;const t=document.getSelection();if(!t||t.isCollapsed){a(this,Ws)&&((r=a(this,ds))==null||r.hide(),m(this,Ws,null),v(this,q,ze).call(this,{hasSelectedText:!1}));return}const{anchorNode:e}=t;if(e===a(this,Ws))return;const s=v(this,q,Eu).call(this,t).closest(".textLayer");if(!s){a(this,Ws)&&((o=a(this,ds))==null||o.hide(),m(this,Ws,null),v(this,q,ze).call(this,{hasSelectedText:!1}));return}if((l=a(this,ds))==null||l.hide(),m(this,Ws,e),v(this,q,ze).call(this,{hasSelectedText:!0}),!(a(this,ge)!==at.HIGHLIGHT&&a(this,ge)!==at.NONE)&&(a(this,ge)===at.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),m(this,Oi,this.isShiftKeyDown),!this.isShiftKeyDown)){const c=a(this,ge)===at.HIGHLIGHT?v(this,q,lp).call(this,s):null;c==null||c.toggleDrawing();const h=new AbortController,u=this.combinedSignal(h),d=f=>{f.type==="pointerup"&&f.button!==0||(h.abort(),c==null||c.toggleDrawing(!0),f.type==="pointerup"&&v(this,q,_u).call(this,"main_toolbar"))};window.addEventListener("pointerup",d,{signal:u}),window.addEventListener("blur",d,{signal:u})}},_u=function(t=""){a(this,ge)===at.HIGHLIGHT?this.highlightSelection(t):a(this,Sc)&&v(this,q,Jb).call(this)},Zb=function(){document.addEventListener("selectionchange",v(this,q,Qb).bind(this),{signal:this._signal})},t0=function(){if(a(this,Mi))return;m(this,Mi,new AbortController);const t=this.combinedSignal(a(this,Mi));window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})},e0=function(){var t;(t=a(this,Mi))==null||t.abort(),m(this,Mi,null)},cp=function(){if(a(this,Ni))return;m(this,Ni,new AbortController);const t=this.combinedSignal(a(this,Ni));window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})},n0=function(){var t;(t=a(this,Ni))==null||t.abort(),m(this,Ni,null)},hp=function(){if(a(this,Ii))return;m(this,Ii,new AbortController);const t=this.combinedSignal(a(this,Ii));document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})},up=function(){var t;(t=a(this,Ii))==null||t.abort(),m(this,Ii,null)},s0=function(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})},ze=function(t){Object.entries(t).some(([n,s])=>a(this,Rc)[n]!==s)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(a(this,Rc),t)}),a(this,ge)===at.HIGHLIGHT&&t.hasSelectedEditor===!1&&v(this,q,js).call(this,[[yt.HIGHLIGHT_FREE,!0]]))},js=function(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})},i0=async function(){if(!a(this,Di)){m(this,Di,!0);const t=[];for(const e of a(this,Se).values())t.push(e.enable());await Promise.all(t);for(const e of a(this,de).values())e.enable()}},r0=function(){if(this.unselectAll(),a(this,Di)){m(this,Di,!1);for(const t of a(this,Se).values())t.disable();for(const t of a(this,de).values())t.disable()}},dp=function(t){const e=a(this,Se).get(t.pageIndex);e?e.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))},o0=function(){let t=null;for(t of a(this,Rt));return t},Fl=function(){if(a(this,de).size===0)return!0;if(a(this,de).size===1)for(const t of a(this,de).values())return t.isEmpty();return!1},fp=function(t){for(const e of a(this,Rt))e.unselect();a(this,Rt).clear();for(const e of t)e.isEmpty()||(a(this,Rt).add(e),e.select());v(this,q,ze).call(this,{hasSelectedEditor:this.hasSelection})},U(oa,"TRANSLATE_SMALL",1),U(oa,"TRANSLATE_BIG",10);let pr=oa;var me,ps,Un,Sa,gs,an,Ea,ms,Ze,qs,Nr,ys,ji,ns,$l,xu;const Ge=class Ge{constructor(t){b(this,ns);b(this,me,null);b(this,ps,!1);b(this,Un,null);b(this,Sa,null);b(this,gs,null);b(this,an,null);b(this,Ea,!1);b(this,ms,null);b(this,Ze,null);b(this,qs,null);b(this,Nr,null);b(this,ys,!1);m(this,Ze,t),m(this,ys,t._uiManager.useNewAltTextFlow),a(Ge,ji)||m(Ge,ji,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(t){Ge._l10n??(Ge._l10n=t)}async render(){const t=m(this,Un,document.createElement("button"));t.className="altText",t.tabIndex="0";const e=m(this,Sa,document.createElement("span"));t.append(e),a(this,ys)?(t.classList.add("new"),t.setAttribute("data-l10n-id",a(Ge,ji).missing),e.setAttribute("data-l10n-id",a(Ge,ji)["missing-label"])):(t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const n=a(this,Ze)._uiManager._signal;t.addEventListener("contextmenu",jn,{signal:n}),t.addEventListener("pointerdown",r=>r.stopPropagation(),{signal:n});const s=r=>{r.preventDefault(),a(this,Ze)._uiManager.editAltText(a(this,Ze)),a(this,ys)&&a(this,Ze)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:a(this,ns,$l)}})};return t.addEventListener("click",s,{capture:!0,signal:n}),t.addEventListener("keydown",r=>{r.target===t&&r.key==="Enter"&&(m(this,Ea,!0),s(r))},{signal:n}),await v(this,ns,xu).call(this),t}finish(){a(this,Un)&&(a(this,Un).focus({focusVisible:a(this,Ea)}),m(this,Ea,!1))}isEmpty(){return a(this,ys)?a(this,me)===null:!a(this,me)&&!a(this,ps)}hasData(){return a(this,ys)?a(this,me)!==null||!!a(this,qs):this.isEmpty()}get guessedText(){return a(this,qs)}async setGuessedText(t){a(this,me)===null&&(m(this,qs,t),m(this,Nr,await Ge._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:t})),v(this,ns,xu).call(this))}toggleAltTextBadge(t=!1){var e;if(!a(this,ys)||a(this,me)){(e=a(this,ms))==null||e.remove(),m(this,ms,null);return}if(!a(this,ms)){const n=m(this,ms,document.createElement("div"));n.className="noAltTextBadge",a(this,Ze).div.append(n)}a(this,ms).classList.toggle("hidden",!t)}serialize(t){let e=a(this,me);return!t&&a(this,qs)===e&&(e=a(this,Nr)),{altText:e,decorative:a(this,ps),guessedText:a(this,qs),textWithDisclaimer:a(this,Nr)}}get data(){return{altText:a(this,me),decorative:a(this,ps)}}set data({altText:t,decorative:e,guessedText:n,textWithDisclaimer:s,cancel:r=!1}){n&&(m(this,qs,n),m(this,Nr,s)),!(a(this,me)===t&&a(this,ps)===e)&&(r||(m(this,me,t),m(this,ps,e)),v(this,ns,xu).call(this))}toggle(t=!1){a(this,Un)&&(!t&&a(this,an)&&(clearTimeout(a(this,an)),m(this,an,null)),a(this,Un).disabled=!t)}shown(){a(this,Ze)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:a(this,ns,$l)}})}destroy(){var t,e;(t=a(this,Un))==null||t.remove(),m(this,Un,null),m(this,Sa,null),m(this,gs,null),(e=a(this,ms))==null||e.remove(),m(this,ms,null)}};me=new WeakMap,ps=new WeakMap,Un=new WeakMap,Sa=new WeakMap,gs=new WeakMap,an=new WeakMap,Ea=new WeakMap,ms=new WeakMap,Ze=new WeakMap,qs=new WeakMap,Nr=new WeakMap,ys=new WeakMap,ji=new WeakMap,ns=new WeakSet,$l=function(){return a(this,me)&&"added"||a(this,me)===null&&this.guessedText&&"review"||"missing"},xu=async function(){var s,r,o;const t=a(this,Un);if(!t)return;if(a(this,ys)){if(t.classList.toggle("done",!!a(this,me)),t.setAttribute("data-l10n-id",a(Ge,ji)[a(this,ns,$l)]),(s=a(this,Sa))==null||s.setAttribute("data-l10n-id",a(Ge,ji)[`${a(this,ns,$l)}-label`]),!a(this,me)){(r=a(this,gs))==null||r.remove();return}}else{if(!a(this,me)&&!a(this,ps)){t.classList.remove("done"),(o=a(this,gs))==null||o.remove();return}t.classList.add("done"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let e=a(this,gs);if(!e){m(this,gs,e=document.createElement("span")),e.className="tooltip",e.setAttribute("role","tooltip"),e.id=`alt-text-tooltip-${a(this,Ze).id}`;const l=100,c=a(this,Ze)._uiManager._signal;c.addEventListener("abort",()=>{clearTimeout(a(this,an)),m(this,an,null)},{once:!0}),t.addEventListener("mouseenter",()=>{m(this,an,setTimeout(()=>{m(this,an,null),a(this,gs).classList.add("show"),a(this,Ze)._reportTelemetry({action:"alt_text_tooltip"})},l))},{signal:c}),t.addEventListener("mouseleave",()=>{var h;a(this,an)&&(clearTimeout(a(this,an)),m(this,an,null)),(h=a(this,gs))==null||h.classList.remove("show")},{signal:c})}a(this,ps)?e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(e.removeAttribute("data-l10n-id"),e.textContent=a(this,me)),e.parentNode||t.append(e);const n=a(this,Ze).getElementForAltText();n==null||n.setAttribute("aria-describedby",e.id)},b(Ge,ji,null),U(Ge,"_l10n",null);let sd=Ge;var _a,Fr,kc,Ic,Lc,Mc,Oc,Xs,$r,Ys,Br,Ks,mr,a0,l0,c0;const em=class em{constructor({container:t,isPinchingDisabled:e=null,isPinchingStopped:n=null,onPinchStart:s=null,onPinching:r=null,onPinchEnd:o=null,signal:l}){b(this,mr);b(this,_a);b(this,Fr,!1);b(this,kc,null);b(this,Ic);b(this,Lc);b(this,Mc);b(this,Oc);b(this,Xs,null);b(this,$r);b(this,Ys,null);b(this,Br);b(this,Ks,null);m(this,_a,t),m(this,kc,n),m(this,Ic,e),m(this,Lc,s),m(this,Mc,r),m(this,Oc,o),m(this,Br,new AbortController),m(this,$r,AbortSignal.any([l,a(this,Br).signal])),t.addEventListener("touchstart",v(this,mr,a0).bind(this),{passive:!1,signal:a(this,$r)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/is.pixelRatio}destroy(){var t,e;(t=a(this,Br))==null||t.abort(),m(this,Br,null),(e=a(this,Xs))==null||e.abort(),m(this,Xs,null)}};_a=new WeakMap,Fr=new WeakMap,kc=new WeakMap,Ic=new WeakMap,Lc=new WeakMap,Mc=new WeakMap,Oc=new WeakMap,Xs=new WeakMap,$r=new WeakMap,Ys=new WeakMap,Br=new WeakMap,Ks=new WeakMap,mr=new WeakSet,a0=function(t){var s,r,o;if((s=a(this,Ic))!=null&&s.call(this))return;if(t.touches.length===1){if(a(this,Xs))return;const l=m(this,Xs,new AbortController),c=AbortSignal.any([a(this,$r),l.signal]),h=a(this,_a),u={capture:!0,signal:c,passive:!1},d=f=>{var g;f.pointerType==="touch"&&((g=a(this,Xs))==null||g.abort(),m(this,Xs,null))};h.addEventListener("pointerdown",f=>{f.pointerType==="touch"&&(se(f),d(f))},u),h.addEventListener("pointerup",d,u),h.addEventListener("pointercancel",d,u);return}if(!a(this,Ks)){m(this,Ks,new AbortController);const l=AbortSignal.any([a(this,$r),a(this,Ks).signal]),c=a(this,_a),h={signal:l,capture:!1,passive:!1};c.addEventListener("touchmove",v(this,mr,l0).bind(this),h);const u=v(this,mr,c0).bind(this);c.addEventListener("touchend",u,h),c.addEventListener("touchcancel",u,h),h.capture=!0,c.addEventListener("pointerdown",se,h),c.addEventListener("pointermove",se,h),c.addEventListener("pointercancel",se,h),c.addEventListener("pointerup",se,h),(r=a(this,Lc))==null||r.call(this)}if(se(t),t.touches.length!==2||(o=a(this,kc))!=null&&o.call(this)){m(this,Ys,null);return}let[e,n]=t.touches;e.identifier>n.identifier&&([e,n]=[n,e]),m(this,Ys,{touch0X:e.screenX,touch0Y:e.screenY,touch1X:n.screenX,touch1Y:n.screenY})},l0=function(t){var _;if(!a(this,Ys)||t.touches.length!==2)return;se(t);let[e,n]=t.touches;e.identifier>n.identifier&&([e,n]=[n,e]);const{screenX:s,screenY:r}=e,{screenX:o,screenY:l}=n,c=a(this,Ys),{touch0X:h,touch0Y:u,touch1X:d,touch1Y:f}=c,g=d-h,y=f-u,p=o-s,A=l-r,w=Math.hypot(p,A)||1,T=Math.hypot(g,y)||1;if(!a(this,Fr)&&Math.abs(T-w)<=em.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(c.touch0X=s,c.touch0Y=r,c.touch1X=o,c.touch1Y=l,!a(this,Fr)){m(this,Fr,!0);return}const x=[(s+o)/2,(r+l)/2];(_=a(this,Mc))==null||_.call(this,x,T,w)},c0=function(t){var e;t.touches.length>=2||(a(this,Ks)&&(a(this,Ks).abort(),m(this,Ks,null),(e=a(this,Oc))==null||e.call(this)),a(this,Ys)&&(se(t),m(this,Ys,null),m(this,Fr,!1)))};let uc=em;var jr,Wn,Ht,xa,Hi,Dc,Hr,Ee,zr,Js,zi,Nc,Gr,ln,Fc,Ur,Qs,bs,Ca,Ta,kn,Wr,$c,pd,rt,pp,Bc,gp,Cu,h0,u0,mp,Tu,yp,d0,f0,p0,bp,g0,vp,m0,y0,b0,Ap,Bl;const pt=class pt{constructor(t){b(this,rt);b(this,jr,null);b(this,Wn,null);b(this,Ht,null);b(this,xa,!1);b(this,Hi,null);b(this,Dc,"");b(this,Hr,!1);b(this,Ee,null);b(this,zr,null);b(this,Js,null);b(this,zi,null);b(this,Nc,"");b(this,Gr,!1);b(this,ln,null);b(this,Fc,!1);b(this,Ur,!1);b(this,Qs,!1);b(this,bs,null);b(this,Ca,0);b(this,Ta,0);b(this,kn,null);b(this,Wr,null);U(this,"isSelected",!1);U(this,"_isCopy",!1);U(this,"_editToolbar",null);U(this,"_initialOptions",Object.create(null));U(this,"_initialData",null);U(this,"_isVisible",!0);U(this,"_uiManager",null);U(this,"_focusEventsAllowed",!0);b(this,$c,!1);b(this,pd,pt._zIndex++);this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null;const{rotation:e,rawDims:{pageWidth:n,pageHeight:s,pageX:r,pageY:o}}=this.parent.viewport;this.rotation=e,this.pageRotation=(360+e-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[n,s],this.pageTranslation=[r,o];const[l,c]=this.parentDimensions;this.x=t.x/l,this.y=t.y/c,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const t=pt.prototype._resizeWithKeyboard,e=pr.TRANSLATE_SMALL,n=pr.TRANSLATE_BIG;return mt(this,"_resizerKeyboardManager",new Jh([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-e,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-n,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[e,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[n,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-e]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-n]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,e]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,n]}],[["Escape","mac+Escape"],pt.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get isDrawer(){return!1}static get _defaultLineColor(){return mt(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const e=new A_({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});e.annotationElementId=t.annotationElementId,e.deleted=!0,e._uiManager.addToAnnotationStorage(e)}static initialize(t,e){if(pt._l10n??(pt._l10n=t),pt._l10nResizer||(pt._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),pt._borderLineWidth!==-1)return;const n=getComputedStyle(document.documentElement);pt._borderLineWidth=parseFloat(n.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,e){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,e){Lt("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return a(this,$c)}set _isDraggable(t){var e;m(this,$c,t),(e=this.div)==null||e.classList.toggle("draggable",t)}get isEnterHandled(){return!0}center(){const[t,e]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*e/(t*2),this.y+=this.width*t/(e*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*e/(t*2),this.y-=this.width*t/(e*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=a(this,pd)}setParent(t){t!==null?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):v(this,rt,Bl).call(this),this.parent=t}focusin(t){this._focusEventsAllowed&&(a(this,Gr)?m(this,Gr,!1):this.parent.setSelected(this))}focusout(t){var n;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const e=t.relatedTarget;e!=null&&e.closest(`#${this.id}`)||(t.preventDefault(),(n=this.parent)!=null&&n.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,e,n,s){const[r,o]=this.parentDimensions;[n,s]=this.screenToPageTranslation(n,s),this.x=(t+n)/r,this.y=(e+s)/o,this.fixAndSetPosition()}_moveAfterPaste(t,e){const[n,s]=this.parentDimensions;this.setAt(t*n,e*s,this.width*n,this.height*s),this._onTranslated()}translate(t,e){v(this,rt,pp).call(this,this.parentDimensions,t,e)}translateInPage(t,e){a(this,ln)||m(this,ln,[this.x,this.y,this.width,this.height]),v(this,rt,pp).call(this,this.pageDimensions,t,e),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(t,e){a(this,ln)||m(this,ln,[this.x,this.y,this.width,this.height]);const{div:n,parentDimensions:[s,r]}=this;if(this.x+=t/s,this.y+=e/r,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:d,y:f}=this.div.getBoundingClientRect();this.parent.findNewParent(this,d,f)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:o,y:l}=this;const[c,h]=this.getBaseTranslation();o+=c,l+=h;const{style:u}=n;u.left=`${(100*o).toFixed(2)}%`,u.top=`${(100*l).toFixed(2)}%`,this._onTranslating(o,l),n.scrollIntoView({block:"nearest"})}_onTranslating(t,e){}_onTranslated(t,e){}get _hasBeenMoved(){return!!a(this,ln)&&(a(this,ln)[0]!==this.x||a(this,ln)[1]!==this.y)}get _hasBeenResized(){return!!a(this,ln)&&(a(this,ln)[2]!==this.width||a(this,ln)[3]!==this.height)}getBaseTranslation(){const[t,e]=this.parentDimensions,{_borderLineWidth:n}=pt,s=n/t,r=n/e;switch(this.rotation){case 90:return[-s,r];case 180:return[s,r];case 270:return[s,-r];default:return[-s,-r]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){const{div:{style:e},pageDimensions:[n,s]}=this;let{x:r,y:o,width:l,height:c}=this;if(l*=n,c*=s,r*=n,o*=s,this._mustFixPosition)switch(t){case 0:r=$e(r,0,n-l),o=$e(o,0,s-c);break;case 90:r=$e(r,0,n-c),o=$e(o,l,s);break;case 180:r=$e(r,l,n),o=$e(o,c,s);break;case 270:r=$e(r,c,n),o=$e(o,0,s-l);break}this.x=r/=n,this.y=o/=s;const[h,u]=this.getBaseTranslation();r+=h,o+=u,e.left=`${(100*r).toFixed(2)}%`,e.top=`${(100*o).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(t,e){var n;return v(n=pt,Bc,gp).call(n,t,e,this.parentRotation)}pageTranslationToScreen(t,e){var n;return v(n=pt,Bc,gp).call(n,t,e,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[e,n]}=this;return[e*t,n*t]}setDims(t,e){const[n,s]=this.parentDimensions,{style:r}=this.div;r.width=`${(100*t/n).toFixed(2)}%`,a(this,Hr)||(r.height=`${(100*e/s).toFixed(2)}%`)}fixDims(){const{style:t}=this.div,{height:e,width:n}=t,s=n.endsWith("%"),r=!a(this,Hr)&&e.endsWith("%");if(s&&r)return;const[o,l]=this.parentDimensions;s||(t.width=`${(100*parseFloat(n)/o).toFixed(2)}%`),!a(this,Hr)&&!r&&(t.height=`${(100*parseFloat(e)/l).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}_onResized(){}static _round(t){return Math.round(t*1e4)/1e4}_onResizing(){}altTextFinish(){var t;(t=a(this,Ht))==null||t.finish()}async addEditToolbar(){return this._editToolbar||a(this,Ur)?this._editToolbar:(this._editToolbar=new rp(this),this.div.append(this._editToolbar.render()),a(this,Ht)&&await this._editToolbar.addAltText(a(this,Ht)),this._editToolbar)}removeEditToolbar(){var t;this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,(t=a(this,Ht))==null||t.destroy())}addContainer(t){var n;const e=(n=this._editToolbar)==null?void 0:n.div;e?e.before(t):this.div.append(t)}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){a(this,Ht)||(sd.initialize(pt._l10n),m(this,Ht,new sd(this)),a(this,jr)&&(a(this,Ht).data=a(this,jr),m(this,jr,null)),await this.addEditToolbar())}get altTextData(){var t;return(t=a(this,Ht))==null?void 0:t.data}set altTextData(t){a(this,Ht)&&(a(this,Ht).data=t)}get guessedAltText(){var t;return(t=a(this,Ht))==null?void 0:t.guessedText}async setGuessedAltText(t){var e;await((e=a(this,Ht))==null?void 0:e.setGuessedText(t))}serializeAltText(t){var e;return(e=a(this,Ht))==null?void 0:e.serialize(t)}hasAltText(){return!!a(this,Ht)&&!a(this,Ht).isEmpty()}hasAltTextData(){var t;return((t=a(this,Ht))==null?void 0:t.hasData())??!1}render(){var o;const t=this.div=document.createElement("div");t.setAttribute("data-editor-rotation",(360-this.rotation)%360),t.className=this.name,t.setAttribute("id",this.id),t.tabIndex=a(this,xa)?-1:0,t.setAttribute("role","application"),this.defaultL10nId&&t.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||t.classList.add("hidden"),this.setInForeground(),v(this,rt,vp).call(this);const[e,n]=this.parentDimensions;this.parentRotation%180!==0&&(t.style.maxWidth=`${(100*n/e).toFixed(2)}%`,t.style.maxHeight=`${(100*e/n).toFixed(2)}%`);const[s,r]=this.getInitialTranslation();return this.translate(s,r),Yb(this,t,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(a(this,Wr)||m(this,Wr,new uc({container:t,isPinchingDisabled:()=>!this.isSelected,onPinchStart:v(this,rt,d0).bind(this),onPinching:v(this,rt,f0).bind(this),onPinchEnd:v(this,rt,p0).bind(this),signal:this._uiManager._signal}))),(o=this._uiManager._editorUndoBar)==null||o.hide(),t}pointerdown(t){const{isMac:e}=we.platform;if(t.button!==0||t.ctrlKey&&e){t.preventDefault();return}if(m(this,Gr,!0),this._isDraggable){v(this,rt,g0).call(this,t);return}v(this,rt,bp).call(this,t)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){a(this,bs)&&clearTimeout(a(this,bs)),m(this,bs,setTimeout(()=>{var t;m(this,bs,null),(t=this.parent)==null||t.moveEditorInDOM(this)},0))}_setParentAndPosition(t,e,n){t.changeParent(this),this.x=e,this.y=n,this.fixAndSetPosition(),this._onTranslated()}getRect(t,e,n=this.rotation){const s=this.parentScale,[r,o]=this.pageDimensions,[l,c]=this.pageTranslation,h=t/s,u=e/s,d=this.x*r,f=this.y*o,g=this.width*r,y=this.height*o;switch(n){case 0:return[d+h+l,o-f-u-y+c,d+h+g+l,o-f-u+c];case 90:return[d+u+l,o-f+h+c,d+u+y+l,o-f+h+g+c];case 180:return[d-h-g+l,o-f+u+c,d-h+l,o-f+u+y+c];case 270:return[d-u-y+l,o-f-h-g+c,d-u+l,o-f-h+c];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,e){const[n,s,r,o]=t,l=r-n,c=o-s;switch(this.rotation){case 0:return[n,e-o,l,c];case 90:return[n,e-s,c,l];case 180:return[r,e-s,l,c];case 270:return[r,e-o,c,l];default:throw new Error("Invalid rotation")}}onceAdded(t){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),m(this,Ur,!0),!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),m(this,Ur,!1),!0):!1}isInEditMode(){return a(this,Ur)}shouldGetKeyboardEvents(){return a(this,Qs)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:t,left:e,bottom:n,right:s}=this.getClientDimensions(),{innerHeight:r,innerWidth:o}=window;return e<o&&s>0&&t<r&&n>0}rebuild(){v(this,rt,vp).call(this)}rotate(t){}resize(){}serializeDeleted(){var t;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((t=this._initialData)==null?void 0:t.popupRef)||""}}serialize(t=!1,e=null){Lt("An editor must be serializable")}static async deserialize(t,e,n){const s=new this.prototype.constructor({parent:e,id:e.getNextId(),uiManager:n});s.rotation=t.rotation,m(s,jr,t.accessibilityData),s._isCopy=t.isCopy||!1;const[r,o]=s.pageDimensions,[l,c,h,u]=s.getRectInCurrentCoords(t.rect,o);return s.x=l/r,s.y=c/o,s.width=h/r,s.height=u/o,s}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var t,e;if((t=a(this,zi))==null||t.abort(),m(this,zi,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),a(this,bs)&&(clearTimeout(a(this,bs)),m(this,bs,null)),v(this,rt,Bl).call(this),this.removeEditToolbar(),a(this,kn)){for(const n of a(this,kn).values())clearTimeout(n);m(this,kn,null)}this.parent=null,(e=a(this,Wr))==null||e.destroy(),m(this,Wr,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(v(this,rt,h0).call(this),a(this,Ee).classList.remove("hidden"))}get toolbarPosition(){return null}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!=="Enter")return;this._uiManager.setSelected(this),m(this,Js,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const e=a(this,Ee).children;if(!a(this,Wn)){m(this,Wn,Array.from(e));const o=v(this,rt,m0).bind(this),l=v(this,rt,y0).bind(this),c=this._uiManager._signal;for(const h of a(this,Wn)){const u=h.getAttribute("data-resizer-name");h.setAttribute("role","spinbutton"),h.addEventListener("keydown",o,{signal:c}),h.addEventListener("blur",l,{signal:c}),h.addEventListener("focus",v(this,rt,b0).bind(this,u),{signal:c}),h.setAttribute("data-l10n-id",pt._l10nResizer[u])}}const n=a(this,Wn)[0];let s=0;for(const o of e){if(o===n)break;s++}const r=(360-this.rotation+this.parentRotation)%360/90*(a(this,Wn).length/4);if(r!==s){if(r<s)for(let l=0;l<s-r;l++)a(this,Ee).append(a(this,Ee).firstChild);else if(r>s)for(let l=0;l<r-s;l++)a(this,Ee).firstChild.before(a(this,Ee).lastChild);let o=0;for(const l of e){const h=a(this,Wn)[o++].getAttribute("data-resizer-name");l.setAttribute("data-l10n-id",pt._l10nResizer[h])}}v(this,rt,Ap).call(this,0),m(this,Qs,!0),a(this,Ee).firstChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}_resizeWithKeyboard(t,e){a(this,Qs)&&v(this,rt,yp).call(this,a(this,Nc),{deltaX:t,deltaY:e,fromKeyboard:!0})}_stopResizingWithKeyboard(){v(this,rt,Bl).call(this),this.div.focus()}select(){var t,e,n;if(!(this.isSelected&&this._editToolbar)){if(this.isSelected=!0,this.makeResizable(),(t=this.div)==null||t.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var s,r;(s=this.div)!=null&&s.classList.contains("selectedEditor")&&((r=this._editToolbar)==null||r.show())});return}(e=this._editToolbar)==null||e.show(),(n=a(this,Ht))==null||n.toggleAltTextBadge(!1)}}unselect(){var t,e,n,s,r;this.isSelected&&(this.isSelected=!1,(t=a(this,Ee))==null||t.classList.add("hidden"),(e=this.div)==null||e.classList.remove("selectedEditor"),(n=this.div)!=null&&n.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(s=this._editToolbar)==null||s.hide(),(r=a(this,Ht))==null||r.toggleAltTextBadge(!0))}updateParams(t,e){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(t){this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.id})}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return a(this,Fc)}set isEditing(t){m(this,Fc,t),this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(t,e){m(this,Hr,!0);const n=t/e,{style:s}=this.div;s.aspectRatio=n,s.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,e=!1){if(e){a(this,kn)||m(this,kn,new Map);const{action:n}=t;let s=a(this,kn).get(n);s&&clearTimeout(s),s=setTimeout(()=>{this._reportTelemetry(t),a(this,kn).delete(n),a(this,kn).size===0&&m(this,kn,null)},pt._telemetryTimeout),a(this,kn).set(n,s);return}t.type||(t.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),m(this,xa,!1)}disable(){this.div&&(this.div.tabIndex=-1),m(this,xa,!0)}renderAnnotationElement(t){let e=t.container.querySelector(".annotationContent");if(!e)e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),t.container.prepend(e);else if(e.nodeName==="CANVAS"){const n=e;e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),n.before(e)}return e}resetAnnotationElement(t){const{firstChild:e}=t.container;(e==null?void 0:e.nodeName)==="DIV"&&e.classList.contains("annotationContent")&&e.remove()}};jr=new WeakMap,Wn=new WeakMap,Ht=new WeakMap,xa=new WeakMap,Hi=new WeakMap,Dc=new WeakMap,Hr=new WeakMap,Ee=new WeakMap,zr=new WeakMap,Js=new WeakMap,zi=new WeakMap,Nc=new WeakMap,Gr=new WeakMap,ln=new WeakMap,Fc=new WeakMap,Ur=new WeakMap,Qs=new WeakMap,bs=new WeakMap,Ca=new WeakMap,Ta=new WeakMap,kn=new WeakMap,Wr=new WeakMap,$c=new WeakMap,pd=new WeakMap,rt=new WeakSet,pp=function([t,e],n,s){[n,s]=this.screenToPageTranslation(n,s),this.x+=n/t,this.y+=s/e,this._onTranslating(this.x,this.y),this.fixAndSetPosition()},Bc=new WeakSet,gp=function(t,e,n){switch(n){case 90:return[e,-t];case 180:return[-t,-e];case 270:return[-e,t];default:return[t,e]}},Cu=function(t){switch(t){case 90:{const[e,n]=this.pageDimensions;return[0,-e/n,n/e,0]}case 180:return[-1,0,0,-1];case 270:{const[e,n]=this.pageDimensions;return[0,e/n,-n/e,0]}default:return[1,0,0,1]}},h0=function(){if(a(this,Ee))return;m(this,Ee,document.createElement("div")),a(this,Ee).classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],e=this._uiManager._signal;for(const n of t){const s=document.createElement("div");a(this,Ee).append(s),s.classList.add("resizer",n),s.setAttribute("data-resizer-name",n),s.addEventListener("pointerdown",v(this,rt,u0).bind(this,n),{signal:e}),s.addEventListener("contextmenu",jn,{signal:e}),s.tabIndex=-1}this.div.prepend(a(this,Ee))},u0=function(t,e){var u;e.preventDefault();const{isMac:n}=we.platform;if(e.button!==0||e.ctrlKey&&n)return;(u=a(this,Ht))==null||u.toggle(!1);const s=this._isDraggable;this._isDraggable=!1,m(this,zr,[e.screenX,e.screenY]);const r=new AbortController,o=this._uiManager.combinedSignal(r);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",v(this,rt,yp).bind(this,t),{passive:!0,capture:!0,signal:o}),window.addEventListener("touchmove",se,{passive:!1,signal:o}),window.addEventListener("contextmenu",jn,{signal:o}),m(this,Js,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const l=this.parent.div.style.cursor,c=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(e.target).cursor;const h=()=>{var d;r.abort(),this.parent.togglePointerEvents(!0),(d=a(this,Ht))==null||d.toggle(!0),this._isDraggable=s,this.parent.div.style.cursor=l,this.div.style.cursor=c,v(this,rt,Tu).call(this)};window.addEventListener("pointerup",h,{signal:o}),window.addEventListener("blur",h,{signal:o})},mp=function(t,e,n,s){this.width=n,this.height=s,this.x=t,this.y=e;const[r,o]=this.parentDimensions;this.setDims(r*n,o*s),this.fixAndSetPosition(),this._onResized()},Tu=function(){if(!a(this,Js))return;const{savedX:t,savedY:e,savedWidth:n,savedHeight:s}=a(this,Js);m(this,Js,null);const r=this.x,o=this.y,l=this.width,c=this.height;r===t&&o===e&&l===n&&c===s||this.addCommands({cmd:v(this,rt,mp).bind(this,r,o,l,c),undo:v(this,rt,mp).bind(this,t,e,n,s),mustExec:!0})},yp=function(t,e){const[n,s]=this.parentDimensions,r=this.x,o=this.y,l=this.width,c=this.height,h=pt.MIN_SIZE/n,u=pt.MIN_SIZE/s,d=v(this,rt,Cu).call(this,this.rotation),f=(j,z)=>[d[0]*j+d[2]*z,d[1]*j+d[3]*z],g=v(this,rt,Cu).call(this,360-this.rotation),y=(j,z)=>[g[0]*j+g[2]*z,g[1]*j+g[3]*z];let p,A,w=!1,T=!1;switch(t){case"topLeft":w=!0,p=(j,z)=>[0,0],A=(j,z)=>[j,z];break;case"topMiddle":p=(j,z)=>[j/2,0],A=(j,z)=>[j/2,z];break;case"topRight":w=!0,p=(j,z)=>[j,0],A=(j,z)=>[0,z];break;case"middleRight":T=!0,p=(j,z)=>[j,z/2],A=(j,z)=>[0,z/2];break;case"bottomRight":w=!0,p=(j,z)=>[j,z],A=(j,z)=>[0,0];break;case"bottomMiddle":p=(j,z)=>[j/2,z],A=(j,z)=>[j/2,0];break;case"bottomLeft":w=!0,p=(j,z)=>[0,z],A=(j,z)=>[j,0];break;case"middleLeft":T=!0,p=(j,z)=>[0,z/2],A=(j,z)=>[j,z/2];break}const x=p(l,c),_=A(l,c);let E=f(..._);const R=pt._round(r+E[0]),P=pt._round(o+E[1]);let L=1,O=1,S,I;if(e.fromKeyboard)({deltaX:S,deltaY:I}=e);else{const{screenX:j,screenY:z}=e,[ct,D]=a(this,zr);[S,I]=this.screenToPageTranslation(j-ct,z-D),a(this,zr)[0]=j,a(this,zr)[1]=z}if([S,I]=y(S/n,I/s),w){const j=Math.hypot(l,c);L=O=Math.max(Math.min(Math.hypot(_[0]-x[0]-S,_[1]-x[1]-I)/j,1/l,1/c),h/l,u/c)}else T?L=$e(Math.abs(_[0]-x[0]-S),h,1)/l:O=$e(Math.abs(_[1]-x[1]-I),u,1)/c;const B=pt._round(l*L),H=pt._round(c*O);E=f(...A(B,H));const W=R-E[0],X=P-E[1];a(this,ln)||m(this,ln,[this.x,this.y,this.width,this.height]),this.width=B,this.height=H,this.x=W,this.y=X,this.setDims(n*B,s*H),this.fixAndSetPosition(),this._onResizing()},d0=function(){var t;m(this,Js,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),(t=a(this,Ht))==null||t.toggle(!1),this.parent.togglePointerEvents(!1)},f0=function(t,e,n){let r=.7*(n/e)+1-.7;if(r===1)return;const o=v(this,rt,Cu).call(this,this.rotation),l=(R,P)=>[o[0]*R+o[2]*P,o[1]*R+o[3]*P],[c,h]=this.parentDimensions,u=this.x,d=this.y,f=this.width,g=this.height,y=pt.MIN_SIZE/c,p=pt.MIN_SIZE/h;r=Math.max(Math.min(r,1/f,1/g),y/f,p/g);const A=pt._round(f*r),w=pt._round(g*r);if(A===f&&w===g)return;a(this,ln)||m(this,ln,[u,d,f,g]);const T=l(f/2,g/2),x=pt._round(u+T[0]),_=pt._round(d+T[1]),E=l(A/2,w/2);this.x=x-E[0],this.y=_-E[1],this.width=A,this.height=w,this.setDims(c*A,h*w),this.fixAndSetPosition(),this._onResizing()},p0=function(){var t;(t=a(this,Ht))==null||t.toggle(!0),this.parent.togglePointerEvents(!0),v(this,rt,Tu).call(this)},bp=function(t){const{isMac:e}=we.platform;t.ctrlKey&&!e||t.shiftKey||t.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this)},g0=function(t){const{isSelected:e}=this;this._uiManager.setUpDragSession();let n=!1;const s=new AbortController,r=this._uiManager.combinedSignal(s),o={capture:!0,passive:!1,signal:r},l=h=>{s.abort(),m(this,Hi,null),m(this,Gr,!1),this._uiManager.endDragSession()||v(this,rt,bp).call(this,h),n&&this._onStopDragging()};e&&(m(this,Ca,t.clientX),m(this,Ta,t.clientY),m(this,Hi,t.pointerId),m(this,Dc,t.pointerType),window.addEventListener("pointermove",h=>{n||(n=!0,this._onStartDragging());const{clientX:u,clientY:d,pointerId:f}=h;if(f!==a(this,Hi)){se(h);return}const[g,y]=this.screenToPageTranslation(u-a(this,Ca),d-a(this,Ta));m(this,Ca,u),m(this,Ta,d),this._uiManager.dragSelectedEditors(g,y)},o),window.addEventListener("touchmove",se,o),window.addEventListener("pointerdown",h=>{h.pointerType===a(this,Dc)&&(a(this,Wr)||h.isPrimary)&&l(h),se(h)},o));const c=h=>{if(!a(this,Hi)||a(this,Hi)===h.pointerId){l(h);return}se(h)};window.addEventListener("pointerup",c,{signal:r}),window.addEventListener("blur",c,{signal:r})},vp=function(){if(a(this,zi)||!this.div)return;m(this,zi,new AbortController);const t=this._uiManager.combinedSignal(a(this,zi));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:t}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:t})},m0=function(t){pt._resizerKeyboardManager.exec(this,t)},y0=function(t){var e;a(this,Qs)&&((e=t.relatedTarget)==null?void 0:e.parentNode)!==a(this,Ee)&&v(this,rt,Bl).call(this)},b0=function(t){m(this,Nc,a(this,Qs)?t:"")},Ap=function(t){if(a(this,Wn))for(const e of a(this,Wn))e.tabIndex=t},Bl=function(){m(this,Qs,!1),v(this,rt,Ap).call(this,-1),v(this,rt,Tu).call(this)},b(pt,Bc),U(pt,"_l10n",null),U(pt,"_l10nResizer",null),U(pt,"_borderLineWidth",-1),U(pt,"_colorManager",new ap),U(pt,"_zIndex",1),U(pt,"_telemetryTimeout",1e3);let jt=pt;class A_ extends jt{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const Qm=3285377520,Cn=4294901760,ls=65535;class v0{constructor(t){this.h1=t?t&4294967295:Qm,this.h2=t?t&4294967295:Qm}update(t){let e,n;if(typeof t=="string"){e=new Uint8Array(t.length*2),n=0;for(let p=0,A=t.length;p<A;p++){const w=t.charCodeAt(p);w<=255?e[n++]=w:(e[n++]=w>>>8,e[n++]=w&255)}}else if(ArrayBuffer.isView(t))e=t.slice(),n=e.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const s=n>>2,r=n-s*4,o=new Uint32Array(e.buffer,0,s);let l=0,c=0,h=this.h1,u=this.h2;const d=3432918353,f=461845907,g=d&ls,y=f&ls;for(let p=0;p<s;p++)p&1?(l=o[p],l=l*d&Cn|l*g&ls,l=l<<15|l>>>17,l=l*f&Cn|l*y&ls,h^=l,h=h<<13|h>>>19,h=h*5+3864292196):(c=o[p],c=c*d&Cn|c*g&ls,c=c<<15|c>>>17,c=c*f&Cn|c*y&ls,u^=c,u=u<<13|u>>>19,u=u*5+3864292196);switch(l=0,r){case 3:l^=e[s*4+2]<<16;case 2:l^=e[s*4+1]<<8;case 1:l^=e[s*4],l=l*d&Cn|l*g&ls,l=l<<15|l>>>17,l=l*f&Cn|l*y&ls,s&1?h^=l:u^=l}this.h1=h,this.h2=u}hexdigest(){let t=this.h1,e=this.h2;return t^=e>>>1,t=t*3981806797&Cn|t*36045&ls,e=e*4283543511&Cn|((e<<16|t>>>16)*2950163797&Cn)>>>16,t^=e>>>1,t=t*444984403&Cn|t*60499&ls,e=e*3301882366&Cn|((e<<16|t>>>16)*3120437893&Cn)>>>16,t^=e>>>1,(t>>>0).toString(16).padStart(8,"0")+(e>>>0).toString(16).padStart(8,"0")}}const wp=Object.freeze({map:null,hash:"",transfer:void 0});var Vr,qr,_e,gd,A0;class zg{constructor(){b(this,gd);b(this,Vr,!1);b(this,qr,null);b(this,_e,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,e){const n=a(this,_e).get(t);return n===void 0?e:Object.assign(e,n)}getRawValue(t){return a(this,_e).get(t)}remove(t){if(a(this,_e).delete(t),a(this,_e).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const e of a(this,_e).values())if(e instanceof jt)return;this.onAnnotationEditor(null)}}setValue(t,e){const n=a(this,_e).get(t);let s=!1;if(n!==void 0)for(const[r,o]of Object.entries(e))n[r]!==o&&(s=!0,n[r]=o);else s=!0,a(this,_e).set(t,e);s&&v(this,gd,A0).call(this),e instanceof jt&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(e.constructor._type)}has(t){return a(this,_e).has(t)}get size(){return a(this,_e).size}resetModified(){a(this,Vr)&&(m(this,Vr,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new w0(this)}get serializable(){if(a(this,_e).size===0)return wp;const t=new Map,e=new v0,n=[],s=Object.create(null);let r=!1;for(const[o,l]of a(this,_e)){const c=l instanceof jt?l.serialize(!1,s):l;c&&(t.set(o,c),e.update(`${o}:${JSON.stringify(c)}`),r||(r=!!c.bitmap))}if(r)for(const o of t.values())o.bitmap&&n.push(o.bitmap);return t.size>0?{map:t,hash:e.hexdigest(),transfer:n}:wp}get editorStats(){let t=null;const e=new Map;for(const n of a(this,_e).values()){if(!(n instanceof jt))continue;const s=n.telemetryFinalData;if(!s)continue;const{type:r}=s;e.has(r)||e.set(r,Object.getPrototypeOf(n).constructor),t||(t=Object.create(null));const o=t[r]||(t[r]=new Map);for(const[l,c]of Object.entries(s)){if(l==="type")continue;let h=o.get(l);h||(h=new Map,o.set(l,h));const u=h.get(c)??0;h.set(c,u+1)}}for(const[n,s]of e)t[n]=s.computeTelemetryFinalData(t[n]);return t}resetModifiedIds(){m(this,qr,null)}get modifiedIds(){if(a(this,qr))return a(this,qr);const t=[];for(const e of a(this,_e).values())!(e instanceof jt)||!e.annotationElementId||!e.serialize()||t.push(e.annotationElementId);return m(this,qr,{ids:new Set(t),hash:t.join(",")})}[Symbol.iterator](){return a(this,_e).entries()}}Vr=new WeakMap,qr=new WeakMap,_e=new WeakMap,gd=new WeakSet,A0=function(){a(this,Vr)||(m(this,Vr,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var jc;class w0 extends zg{constructor(e){super();b(this,jc);const{map:n,hash:s,transfer:r}=e.serializable,o=structuredClone(n,r?{transfer:r}:null);m(this,jc,{map:o,hash:s,transfer:r})}get print(){Lt("Should not call PrintAnnotationStorage.print")}get serializable(){return a(this,jc)}get modifiedIds(){return mt(this,"modifiedIds",{ids:new Set,hash:""})}}jc=new WeakMap;var Ra;class w_{constructor({ownerDocument:t=globalThis.document,styleElement:e=null}){b(this,Ra,new Set);this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const e=this.styleElement.sheet;e.insertRule(t,e.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),a(this,Ra).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:t,disableFontFace:e,_inspectFont:n}){if(!(!t||a(this,Ra).has(t.loadedName))){if(ce(!e,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:s,src:r,style:o}=t,l=new FontFace(s,r,o);this.addNativeFontFace(l);try{await l.load(),a(this,Ra).add(s),n==null||n(t)}catch{lt(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(l)}return}Lt("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo){await this.loadSystemFont(t);return}if(this.isFontLoadingAPISupported){const n=t.createNativeFontFace();if(n){this.addNativeFontFace(n);try{await n.loaded}catch(s){throw lt(`Failed to load font '${n.family}': '${s}'.`),t.disableFontFace=!0,s}}return}const e=t.createFontFaceRule();if(e){if(this.insertRule(e),this.isSyncFontLoadingSupported)return;await new Promise(n=>{const s=this._queueLoadingCallback(n);this._prepareFontLoadEvent(t,s)})}}get isFontLoadingAPISupported(){var e;const t=!!((e=this._document)!=null&&e.fonts);return mt(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){return mt(this,"isSyncFontLoadingSupported",qe||we.platform.isFirefox)}_queueLoadingCallback(t){function e(){for(ce(!s.done,"completeRequest() cannot be called twice."),s.done=!0;n.length>0&&n[0].done;){const r=n.shift();setTimeout(r.callback,0)}}const{loadingRequests:n}=this,s={done:!1,complete:e,callback:t};return n.push(s),s}get _loadTestFont(){const t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return mt(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,e){function n(_,E){return _.charCodeAt(E)<<24|_.charCodeAt(E+1)<<16|_.charCodeAt(E+2)<<8|_.charCodeAt(E+3)&255}function s(_,E,R,P){const L=_.substring(0,E),O=_.substring(E+R);return L+P+O}let r,o;const l=this._document.createElement("canvas");l.width=1,l.height=1;const c=l.getContext("2d");let h=0;function u(_,E){if(++h>30){lt("Load test font never loaded."),E();return}if(c.font="30px "+_,c.fillText(".",0,20),c.getImageData(0,0,1,1).data[3]>0){E();return}setTimeout(u.bind(null,_,E))}const d=`lt${Date.now()}${this.loadTestFontId++}`;let f=this._loadTestFont;f=s(f,976,d.length,d);const y=16,p=1482184792;let A=n(f,y);for(r=0,o=d.length-3;r<o;r+=4)A=A-p+n(d,r)|0;r<d.length&&(A=A-p+n(d+"XXX",r)|0),f=s(f,y,4,c_(A));const w=`url(data:font/opentype;base64,${btoa(f)});`,T=`@font-face {font-family:"${d}";src:${w}}`;this.insertRule(T);const x=this._document.createElement("div");x.style.visibility="hidden",x.style.width=x.style.height="10px",x.style.position="absolute",x.style.top=x.style.left="0px";for(const _ of[t.loadedName,d]){const E=this._document.createElement("span");E.textContent="Hi",E.style.fontFamily=_,x.append(E)}this._document.body.append(x),u(d,()=>{x.remove(),e.complete()})}}Ra=new WeakMap;class S_{constructor(t,e=null){this.compiledGlyphs=Object.create(null);for(const n in t)this[n]=t[n];this._inspectFont=e}createNativeFontFace(){var e;if(!this.data||this.disableFontFace)return null;let t;if(!this.cssFontInfo)t=new FontFace(this.loadedName,this.data,{});else{const n={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(n.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,n)}return(e=this._inspectFont)==null||e.call(this,this),t}createFontFaceRule(){var n;if(!this.data||this.disableFontFace)return null;const t=`url(data:${this.mimetype};base64,${$b(this.data)});`;let e;if(!this.cssFontInfo)e=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let s=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(s+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),e=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${s}src:${t}}`}return(n=this._inspectFont)==null||n.call(this,this,t),e}getPathGenerator(t,e){if(this.compiledGlyphs[e]!==void 0)return this.compiledGlyphs[e];const n=this.loadedName+"_path_"+e;let s;try{s=t.get(n)}catch(o){lt(`getPathGenerator - ignoring character: "${o}".`)}const r=new Path2D(s||"");return this.fontExtraProperties||t.delete(n),this.compiledGlyphs[e]=r}}function E_(i){if(i instanceof URL)return i.href;if(typeof i=="string"){if(qe)return i;const t=URL.parse(i,window.location);if(t)return t.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function __(i){if(qe&&typeof Buffer<"u"&&i instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(i instanceof Uint8Array&&i.byteLength===i.buffer.byteLength)return i;if(typeof i=="string")return Xh(i);if(i instanceof ArrayBuffer||ArrayBuffer.isView(i)||typeof i=="object"&&!isNaN(i==null?void 0:i.length))return new Uint8Array(i);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function cu(i){if(typeof i!="string")return null;if(i.endsWith("/"))return i;throw new Error(`Invalid factory url: "${i}" must include trailing slash.`)}const Sp=i=>typeof i=="object"&&Number.isInteger(i==null?void 0:i.num)&&i.num>=0&&Number.isInteger(i==null?void 0:i.gen)&&i.gen>=0,x_=i=>typeof i=="object"&&typeof(i==null?void 0:i.name)=="string",S0=f_.bind(null,Sp,x_);var Zs,md;class C_{constructor(){b(this,Zs,new Map);b(this,md,Promise.resolve())}postMessage(t,e){const n={data:structuredClone(t,e?{transfer:e}:null)};a(this,md).then(()=>{for(const[s]of a(this,Zs))s.call(this,n)})}addEventListener(t,e,n=null){let s=null;if((n==null?void 0:n.signal)instanceof AbortSignal){const{signal:r}=n;if(r.aborted){lt("LoopbackPort - cannot use an `aborted` signal.");return}const o=()=>this.removeEventListener(t,e);s=()=>r.removeEventListener("abort",o),r.addEventListener("abort",o)}a(this,Zs).set(e,s)}removeEventListener(t,e){const n=a(this,Zs).get(e);n==null||n(),a(this,Zs).delete(e)}terminate(){for(const[,t]of a(this,Zs))t==null||t();a(this,Zs).clear()}}Zs=new WeakMap,md=new WeakMap;const hu={DATA:1,ERROR:2},ae={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function Zm(){}function Je(i){if(i instanceof Si||i instanceof ed||i instanceof Ym||i instanceof hc||i instanceof ff)return i;switch(i instanceof Error||typeof i=="object"&&i!==null||Lt('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),i.name){case"AbortException":return new Si(i.message);case"InvalidPDFException":return new ed(i.message);case"PasswordException":return new Ym(i.message,i.code);case"ResponseException":return new hc(i.message,i.status,i.missing);case"UnknownErrorException":return new ff(i.message,i.details)}return new ff(i.message,i.toString())}var Pa,Bn,E0,_0,x0,Ru;class jl{constructor(t,e,n){b(this,Bn);b(this,Pa,new AbortController);this.sourceName=t,this.targetName=e,this.comObj=n,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),n.addEventListener("message",v(this,Bn,E0).bind(this),{signal:a(this,Pa).signal})}on(t,e){const n=this.actionHandler;if(n[t])throw new Error(`There is already an actionName called "${t}"`);n[t]=e}send(t,e,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},n)}sendWithPromise(t,e,n){const s=this.callbackId++,r=Promise.withResolvers();this.callbackCapabilities[s]=r;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:s,data:e},n)}catch(o){r.reject(o)}return r.promise}sendWithStream(t,e,n,s){const r=this.streamId++,o=this.sourceName,l=this.targetName,c=this.comObj;return new ReadableStream({start:h=>{const u=Promise.withResolvers();return this.streamControllers[r]={controller:h,startCall:u,pullCall:null,cancelCall:null,isClosed:!1},c.postMessage({sourceName:o,targetName:l,action:t,streamId:r,data:e,desiredSize:h.desiredSize},s),u.promise},pull:h=>{const u=Promise.withResolvers();return this.streamControllers[r].pullCall=u,c.postMessage({sourceName:o,targetName:l,stream:ae.PULL,streamId:r,desiredSize:h.desiredSize}),u.promise},cancel:h=>{ce(h instanceof Error,"cancel must have a valid reason");const u=Promise.withResolvers();return this.streamControllers[r].cancelCall=u,this.streamControllers[r].isClosed=!0,c.postMessage({sourceName:o,targetName:l,stream:ae.CANCEL,streamId:r,reason:Je(h)}),u.promise}},n)}destroy(){var t;(t=a(this,Pa))==null||t.abort(),m(this,Pa,null)}}Pa=new WeakMap,Bn=new WeakSet,E0=function({data:t}){if(t.targetName!==this.sourceName)return;if(t.stream){v(this,Bn,x0).call(this,t);return}if(t.callback){const n=t.callbackId,s=this.callbackCapabilities[n];if(!s)throw new Error(`Cannot resolve callback ${n}`);if(delete this.callbackCapabilities[n],t.callback===hu.DATA)s.resolve(t.data);else if(t.callback===hu.ERROR)s.reject(Je(t.reason));else throw new Error("Unexpected callback case");return}const e=this.actionHandler[t.action];if(!e)throw new Error(`Unknown action from worker: ${t.action}`);if(t.callbackId){const n=this.sourceName,s=t.sourceName,r=this.comObj;Promise.try(e,t.data).then(function(o){r.postMessage({sourceName:n,targetName:s,callback:hu.DATA,callbackId:t.callbackId,data:o})},function(o){r.postMessage({sourceName:n,targetName:s,callback:hu.ERROR,callbackId:t.callbackId,reason:Je(o)})});return}if(t.streamId){v(this,Bn,_0).call(this,t);return}e(t.data)},_0=function(t){const e=t.streamId,n=this.sourceName,s=t.sourceName,r=this.comObj,o=this,l=this.actionHandler[t.action],c={enqueue(h,u=1,d){if(this.isCancelled)return;const f=this.desiredSize;this.desiredSize-=u,f>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),r.postMessage({sourceName:n,targetName:s,stream:ae.ENQUEUE,streamId:e,chunk:h},d)},close(){this.isCancelled||(this.isCancelled=!0,r.postMessage({sourceName:n,targetName:s,stream:ae.CLOSE,streamId:e}),delete o.streamSinks[e])},error(h){ce(h instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,r.postMessage({sourceName:n,targetName:s,stream:ae.ERROR,streamId:e,reason:Je(h)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};c.sinkCapability.resolve(),c.ready=c.sinkCapability.promise,this.streamSinks[e]=c,Promise.try(l,t.data,c).then(function(){r.postMessage({sourceName:n,targetName:s,stream:ae.START_COMPLETE,streamId:e,success:!0})},function(h){r.postMessage({sourceName:n,targetName:s,stream:ae.START_COMPLETE,streamId:e,reason:Je(h)})})},x0=function(t){const e=t.streamId,n=this.sourceName,s=t.sourceName,r=this.comObj,o=this.streamControllers[e],l=this.streamSinks[e];switch(t.stream){case ae.START_COMPLETE:t.success?o.startCall.resolve():o.startCall.reject(Je(t.reason));break;case ae.PULL_COMPLETE:t.success?o.pullCall.resolve():o.pullCall.reject(Je(t.reason));break;case ae.PULL:if(!l){r.postMessage({sourceName:n,targetName:s,stream:ae.PULL_COMPLETE,streamId:e,success:!0});break}l.desiredSize<=0&&t.desiredSize>0&&l.sinkCapability.resolve(),l.desiredSize=t.desiredSize,Promise.try(l.onPull||Zm).then(function(){r.postMessage({sourceName:n,targetName:s,stream:ae.PULL_COMPLETE,streamId:e,success:!0})},function(h){r.postMessage({sourceName:n,targetName:s,stream:ae.PULL_COMPLETE,streamId:e,reason:Je(h)})});break;case ae.ENQUEUE:if(ce(o,"enqueue should have stream controller"),o.isClosed)break;o.controller.enqueue(t.chunk);break;case ae.CLOSE:if(ce(o,"close should have stream controller"),o.isClosed)break;o.isClosed=!0,o.controller.close(),v(this,Bn,Ru).call(this,o,e);break;case ae.ERROR:ce(o,"error should have stream controller"),o.controller.error(Je(t.reason)),v(this,Bn,Ru).call(this,o,e);break;case ae.CANCEL_COMPLETE:t.success?o.cancelCall.resolve():o.cancelCall.reject(Je(t.reason)),v(this,Bn,Ru).call(this,o,e);break;case ae.CANCEL:if(!l)break;const c=Je(t.reason);Promise.try(l.onCancel||Zm,c).then(function(){r.postMessage({sourceName:n,targetName:s,stream:ae.CANCEL_COMPLETE,streamId:e,success:!0})},function(h){r.postMessage({sourceName:n,targetName:s,stream:ae.CANCEL_COMPLETE,streamId:e,reason:Je(h)})}),l.sinkCapability.reject(c),l.isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}},Ru=async function(t,e){var n,s,r;await Promise.allSettled([(n=t.startCall)==null?void 0:n.promise,(s=t.pullCall)==null?void 0:s.promise,(r=t.cancelCall)==null?void 0:r.promise]),delete this.streamControllers[e]};var Hc;class C0{constructor({enableHWA:t=!1}){b(this,Hc,!1);m(this,Hc,t)}create(t,e){if(t<=0||e<=0)throw new Error("Invalid canvas size");const n=this._createCanvas(t,e);return{canvas:n,context:n.getContext("2d",{willReadFrequently:!a(this,Hc)})}}reset(t,e,n){if(!t.canvas)throw new Error("Canvas is not specified");if(e<=0||n<=0)throw new Error("Invalid canvas size");t.canvas.width=e,t.canvas.height=n}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,e){Lt("Abstract method `_createCanvas` called.")}}Hc=new WeakMap;class T_ extends C0{constructor({ownerDocument:t=globalThis.document,enableHWA:e=!1}){super({enableHWA:e}),this._document=t}_createCanvas(t,e){const n=this._document.createElement("canvas");return n.width=t,n.height=e,n}}class T0{constructor({baseUrl:t=null,isCompressed:e=!0}){this.baseUrl=t,this.isCompressed=e}async fetch({name:t}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");const e=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(e).then(n=>({cMapData:n,isCompressed:this.isCompressed})).catch(n=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${e}`)})}async _fetch(t){Lt("Abstract method `_fetch` called.")}}class ty extends T0{async _fetch(t){const e=await _l(t,this.isCompressed?"arraybuffer":"text");return e instanceof ArrayBuffer?new Uint8Array(e):Xh(e)}}class R0{addFilter(t){return"none"}addHCMFilter(t,e){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,e,n,s,r){return"none"}destroy(t=!1){}}var Xr,ka,ti,ei,De,Yr,Kr,K,Me,Hl,Qo,Pu,Zo,P0,Ep,ta,zl,Gl,_p,Ul;class R_ extends R0{constructor({docId:e,ownerDocument:n=globalThis.document}){super();b(this,K);b(this,Xr);b(this,ka);b(this,ti);b(this,ei);b(this,De);b(this,Yr);b(this,Kr,0);m(this,ei,e),m(this,De,n)}addFilter(e){if(!e)return"none";let n=a(this,K,Me).get(e);if(n)return n;const[s,r,o]=v(this,K,Pu).call(this,e),l=e.length===1?s:`${s}${r}${o}`;if(n=a(this,K,Me).get(l),n)return a(this,K,Me).set(e,n),n;const c=`g_${a(this,ei)}_transfer_map_${He(this,Kr)._++}`,h=v(this,K,Zo).call(this,c);a(this,K,Me).set(e,h),a(this,K,Me).set(l,h);const u=v(this,K,ta).call(this,c);return v(this,K,Gl).call(this,s,r,o,u),h}addHCMFilter(e,n){var y;const s=`${e}-${n}`,r="base";let o=a(this,K,Hl).get(r);if((o==null?void 0:o.key)===s||(o?((y=o.filter)==null||y.remove(),o.key=s,o.url="none",o.filter=null):(o={key:s,url:"none",filter:null},a(this,K,Hl).set(r,o)),!e||!n))return o.url;const l=v(this,K,Ul).call(this,e);e=et.makeHexColor(...l);const c=v(this,K,Ul).call(this,n);if(n=et.makeHexColor(...c),a(this,K,Qo).style.color="",e==="#000000"&&n==="#ffffff"||e===n)return o.url;const h=new Array(256);for(let p=0;p<=255;p++){const A=p/255;h[p]=A<=.03928?A/12.92:((A+.055)/1.055)**2.4}const u=h.join(","),d=`g_${a(this,ei)}_hcm_filter`,f=o.filter=v(this,K,ta).call(this,d);v(this,K,Gl).call(this,u,u,u,f),v(this,K,Ep).call(this,f);const g=(p,A)=>{const w=l[p]/255,T=c[p]/255,x=new Array(A+1);for(let _=0;_<=A;_++)x[_]=w+_/A*(T-w);return x.join(",")};return v(this,K,Gl).call(this,g(0,5),g(1,5),g(2,5),f),o.url=v(this,K,Zo).call(this,d),o.url}addAlphaFilter(e){let n=a(this,K,Me).get(e);if(n)return n;const[s]=v(this,K,Pu).call(this,[e]),r=`alpha_${s}`;if(n=a(this,K,Me).get(r),n)return a(this,K,Me).set(e,n),n;const o=`g_${a(this,ei)}_alpha_map_${He(this,Kr)._++}`,l=v(this,K,Zo).call(this,o);a(this,K,Me).set(e,l),a(this,K,Me).set(r,l);const c=v(this,K,ta).call(this,o);return v(this,K,_p).call(this,s,c),l}addLuminosityFilter(e){let n=a(this,K,Me).get(e||"luminosity");if(n)return n;let s,r;if(e?([s]=v(this,K,Pu).call(this,[e]),r=`luminosity_${s}`):r="luminosity",n=a(this,K,Me).get(r),n)return a(this,K,Me).set(e,n),n;const o=`g_${a(this,ei)}_luminosity_map_${He(this,Kr)._++}`,l=v(this,K,Zo).call(this,o);a(this,K,Me).set(e,l),a(this,K,Me).set(r,l);const c=v(this,K,ta).call(this,o);return v(this,K,P0).call(this,c),e&&v(this,K,_p).call(this,s,c),l}addHighlightHCMFilter(e,n,s,r,o){var T;const l=`${n}-${s}-${r}-${o}`;let c=a(this,K,Hl).get(e);if((c==null?void 0:c.key)===l||(c?((T=c.filter)==null||T.remove(),c.key=l,c.url="none",c.filter=null):(c={key:l,url:"none",filter:null},a(this,K,Hl).set(e,c)),!n||!s))return c.url;const[h,u]=[n,s].map(v(this,K,Ul).bind(this));let d=Math.round(.2126*h[0]+.7152*h[1]+.0722*h[2]),f=Math.round(.2126*u[0]+.7152*u[1]+.0722*u[2]),[g,y]=[r,o].map(v(this,K,Ul).bind(this));f<d&&([d,f,g,y]=[f,d,y,g]),a(this,K,Qo).style.color="";const p=(x,_,E)=>{const R=new Array(256),P=(f-d)/E,L=x/255,O=(_-x)/(255*E);let S=0;for(let I=0;I<=E;I++){const B=Math.round(d+I*P),H=L+I*O;for(let W=S;W<=B;W++)R[W]=H;S=B+1}for(let I=S;I<256;I++)R[I]=R[S-1];return R.join(",")},A=`g_${a(this,ei)}_hcm_${e}_filter`,w=c.filter=v(this,K,ta).call(this,A);return v(this,K,Ep).call(this,w),v(this,K,Gl).call(this,p(g[0],y[0],5),p(g[1],y[1],5),p(g[2],y[2],5),w),c.url=v(this,K,Zo).call(this,A),c.url}destroy(e=!1){var n,s,r,o;e&&((n=a(this,Yr))!=null&&n.size)||((s=a(this,ti))==null||s.parentNode.parentNode.remove(),m(this,ti,null),(r=a(this,ka))==null||r.clear(),m(this,ka,null),(o=a(this,Yr))==null||o.clear(),m(this,Yr,null),m(this,Kr,0))}}Xr=new WeakMap,ka=new WeakMap,ti=new WeakMap,ei=new WeakMap,De=new WeakMap,Yr=new WeakMap,Kr=new WeakMap,K=new WeakSet,Me=function(){return a(this,ka)||m(this,ka,new Map)},Hl=function(){return a(this,Yr)||m(this,Yr,new Map)},Qo=function(){if(!a(this,ti)){const e=a(this,De).createElement("div"),{style:n}=e;n.visibility="hidden",n.contain="strict",n.width=n.height=0,n.position="absolute",n.top=n.left=0,n.zIndex=-1;const s=a(this,De).createElementNS(Bs,"svg");s.setAttribute("width",0),s.setAttribute("height",0),m(this,ti,a(this,De).createElementNS(Bs,"defs")),e.append(s),s.append(a(this,ti)),a(this,De).body.append(e)}return a(this,ti)},Pu=function(e){if(e.length===1){const h=e[0],u=new Array(256);for(let f=0;f<256;f++)u[f]=h[f]/255;const d=u.join(",");return[d,d,d]}const[n,s,r]=e,o=new Array(256),l=new Array(256),c=new Array(256);for(let h=0;h<256;h++)o[h]=n[h]/255,l[h]=s[h]/255,c[h]=r[h]/255;return[o.join(","),l.join(","),c.join(",")]},Zo=function(e){if(a(this,Xr)===void 0){m(this,Xr,"");const n=a(this,De).URL;n!==a(this,De).baseURI&&(Kh(n)?lt('#createUrl: ignore "data:"-URL for performance reasons.'):m(this,Xr,$g(n,"")))}return`url(${a(this,Xr)}#${e})`},P0=function(e){const n=a(this,De).createElementNS(Bs,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),e.append(n)},Ep=function(e){const n=a(this,De).createElementNS(Bs,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),e.append(n)},ta=function(e){const n=a(this,De).createElementNS(Bs,"filter");return n.setAttribute("color-interpolation-filters","sRGB"),n.setAttribute("id",e),a(this,K,Qo).append(n),n},zl=function(e,n,s){const r=a(this,De).createElementNS(Bs,n);r.setAttribute("type","discrete"),r.setAttribute("tableValues",s),e.append(r)},Gl=function(e,n,s,r){const o=a(this,De).createElementNS(Bs,"feComponentTransfer");r.append(o),v(this,K,zl).call(this,o,"feFuncR",e),v(this,K,zl).call(this,o,"feFuncG",n),v(this,K,zl).call(this,o,"feFuncB",s)},_p=function(e,n){const s=a(this,De).createElementNS(Bs,"feComponentTransfer");n.append(s),v(this,K,zl).call(this,s,"feFuncA",e)},Ul=function(e){return a(this,K,Qo).style.color=e,Hg(getComputedStyle(a(this,K,Qo)).getPropertyValue("color"))};class k0{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(n=>{throw new Error(`Unable to load font data at: ${e}`)})}async _fetch(t){Lt("Abstract method `_fetch` called.")}}class ey extends k0{async _fetch(t){const e=await _l(t,"arraybuffer");return new Uint8Array(e)}}class I0{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!t)throw new Error("Wasm filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(n=>{throw new Error(`Unable to load wasm data at: ${e}`)})}async _fetch(t){Lt("Abstract method `_fetch` called.")}}class ny extends I0{async _fetch(t){const e=await _l(t,"arraybuffer");return new Uint8Array(e)}}qe&&lt("Please use the `legacy` build in Node.js environments.");async function Gg(i){const e=await process.getBuiltinModule("fs").promises.readFile(i);return new Uint8Array(e)}class P_ extends R0{}class k_ extends C0{_createCanvas(t,e){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(t,e)}}class I_ extends T0{async _fetch(t){return Gg(t)}}class L_ extends k0{async _fetch(t){return Gg(t)}}class M_ extends I0{async _fetch(t){return Gg(t)}}const Te={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function xp(i,t){if(!t)return;const e=t[2]-t[0],n=t[3]-t[1],s=new Path2D;s.rect(t[0],t[1],e,n),i.clip(s)}class Ug{isModifyingCurrentTransform(){return!1}getPattern(){Lt("Abstract method `getPattern` called.")}}class O_ extends Ug{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}_createGradient(t){let e;this._type==="axial"?e=t.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(e=t.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const n of this._colorStops)e.addColorStop(n[0],n[1]);return e}getPattern(t,e,n,s){let r;if(s===Te.STROKE||s===Te.FILL){const o=e.current.getClippedPathBoundingBox(s,Xt(t))||[0,0,0,0],l=Math.ceil(o[2]-o[0])||1,c=Math.ceil(o[3]-o[1])||1,h=e.cachedCanvases.getCanvas("pattern",l,c),u=h.context;u.clearRect(0,0,u.canvas.width,u.canvas.height),u.beginPath(),u.rect(0,0,u.canvas.width,u.canvas.height),u.translate(-o[0],-o[1]),n=et.transform(n,[1,0,0,1,o[0],o[1]]),u.transform(...e.baseTransform),this.matrix&&u.transform(...this.matrix),xp(u,this._bbox),u.fillStyle=this._createGradient(u),u.fill(),r=t.createPattern(h.canvas,"no-repeat");const d=new DOMMatrix(n);r.setTransform(d)}else xp(t,this._bbox),r=this._createGradient(t);return r}}function mf(i,t,e,n,s,r,o,l){const c=t.coords,h=t.colors,u=i.data,d=i.width*4;let f;c[e+1]>c[n+1]&&(f=e,e=n,n=f,f=r,r=o,o=f),c[n+1]>c[s+1]&&(f=n,n=s,s=f,f=o,o=l,l=f),c[e+1]>c[n+1]&&(f=e,e=n,n=f,f=r,r=o,o=f);const g=(c[e]+t.offsetX)*t.scaleX,y=(c[e+1]+t.offsetY)*t.scaleY,p=(c[n]+t.offsetX)*t.scaleX,A=(c[n+1]+t.offsetY)*t.scaleY,w=(c[s]+t.offsetX)*t.scaleX,T=(c[s+1]+t.offsetY)*t.scaleY;if(y>=T)return;const x=h[r],_=h[r+1],E=h[r+2],R=h[o],P=h[o+1],L=h[o+2],O=h[l],S=h[l+1],I=h[l+2],B=Math.round(y),H=Math.round(T);let W,X,j,z,ct,D,C,k;for(let $=B;$<=H;$++){if($<A){const it=$<y?0:(y-$)/(y-A);W=g-(g-p)*it,X=x-(x-R)*it,j=_-(_-P)*it,z=E-(E-L)*it}else{let it;$>T?it=1:A===T?it=0:it=(A-$)/(A-T),W=p-(p-w)*it,X=R-(R-O)*it,j=P-(P-S)*it,z=L-(L-I)*it}let N;$<y?N=0:$>T?N=1:N=(y-$)/(y-T),ct=g-(g-w)*N,D=x-(x-O)*N,C=_-(_-S)*N,k=E-(E-I)*N;const V=Math.round(Math.min(W,ct)),nt=Math.round(Math.max(W,ct));let Y=d*$+V*4;for(let it=V;it<=nt;it++)N=(W-it)/(W-ct),N<0?N=0:N>1&&(N=1),u[Y++]=X-(X-D)*N|0,u[Y++]=j-(j-C)*N|0,u[Y++]=z-(z-k)*N|0,u[Y++]=255}}function D_(i,t,e){const n=t.coords,s=t.colors;let r,o;switch(t.type){case"lattice":const l=t.verticesPerRow,c=Math.floor(n.length/l)-1,h=l-1;for(r=0;r<c;r++){let u=r*l;for(let d=0;d<h;d++,u++)mf(i,e,n[u],n[u+1],n[u+l],s[u],s[u+1],s[u+l]),mf(i,e,n[u+l+1],n[u+1],n[u+l],s[u+l+1],s[u+1],s[u+l])}break;case"triangles":for(r=0,o=n.length;r<o;r+=3)mf(i,e,n[r],n[r+1],n[r+2],s[r],s[r+1],s[r+2]);break;default:throw new Error("illegal figure")}}class N_ extends Ug{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[6],this._background=t[7],this.matrix=null}_createMeshCanvas(t,e,n){const l=Math.floor(this._bounds[0]),c=Math.floor(this._bounds[1]),h=Math.ceil(this._bounds[2])-l,u=Math.ceil(this._bounds[3])-c,d=Math.min(Math.ceil(Math.abs(h*t[0]*1.1)),3e3),f=Math.min(Math.ceil(Math.abs(u*t[1]*1.1)),3e3),g=h/d,y=u/f,p={coords:this._coords,colors:this._colors,offsetX:-l,offsetY:-c,scaleX:1/g,scaleY:1/y},A=d+2*2,w=f+2*2,T=n.getCanvas("mesh",A,w),x=T.context,_=x.createImageData(d,f);if(e){const R=_.data;for(let P=0,L=R.length;P<L;P+=4)R[P]=e[0],R[P+1]=e[1],R[P+2]=e[2],R[P+3]=255}for(const R of this._figures)D_(_,R,p);return x.putImageData(_,2,2),{canvas:T.canvas,offsetX:l-2*g,offsetY:c-2*y,scaleX:g,scaleY:y}}isModifyingCurrentTransform(){return!0}getPattern(t,e,n,s){xp(t,this._bbox);const r=new Float32Array(2);if(s===Te.SHADING)et.singularValueDecompose2dScale(Xt(t),r);else if(this.matrix){et.singularValueDecompose2dScale(this.matrix,r);const[l,c]=r;et.singularValueDecompose2dScale(e.baseTransform,r),r[0]*=l,r[1]*=c}else et.singularValueDecompose2dScale(e.baseTransform,r);const o=this._createMeshCanvas(r,s===Te.SHADING?null:this._background,e.cachedCanvases);return s!==Te.SHADING&&(t.setTransform(...e.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(o.offsetX,o.offsetY),t.scale(o.scaleX,o.scaleY),t.createPattern(o.canvas,"no-repeat")}}class F_ extends Ug{getPattern(){return"hotpink"}}function $_(i){switch(i[0]){case"RadialAxial":return new O_(i);case"Mesh":return new N_(i);case"Dummy":return new F_}throw new Error(`Unknown IR type: ${i[0]}`)}const sy={COLORED:1,UNCOLORED:2},yd=class yd{constructor(t,e,n,s){this.color=t[1],this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.ctx=e,this.canvasGraphicsFactory=n,this.baseTransform=s}createPatternCanvas(t){const{bbox:e,operatorList:n,paintType:s,tilingType:r,color:o,canvasGraphicsFactory:l}=this;let{xstep:c,ystep:h}=this;c=Math.abs(c),h=Math.abs(h),Gd("TilingType: "+r);const u=e[0],d=e[1],f=e[2],g=e[3],y=f-u,p=g-d,A=new Float32Array(2);et.singularValueDecompose2dScale(this.matrix,A);const[w,T]=A;et.singularValueDecompose2dScale(this.baseTransform,A);const x=w*A[0],_=T*A[1];let E=y,R=p,P=!1,L=!1;const O=Math.ceil(c*x),S=Math.ceil(h*_),I=Math.ceil(y*x),B=Math.ceil(p*_);O>=I?E=c:P=!0,S>=B?R=h:L=!0;const H=this.getSizeAndScale(E,this.ctx.canvas.width,x),W=this.getSizeAndScale(R,this.ctx.canvas.height,_),X=t.cachedCanvases.getCanvas("pattern",H.size,W.size),j=X.context,z=l.createCanvasGraphics(j);if(z.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(z,s,o),j.translate(-H.scale*u,-W.scale*d),z.transform(H.scale,0,0,W.scale,0,0),j.save(),this.clipBbox(z,u,d,f,g),z.baseTransform=Xt(z.ctx),z.executeOperatorList(n),z.endDrawing(),j.restore(),P||L){const ct=X.canvas;P&&(E=c),L&&(R=h);const D=this.getSizeAndScale(E,this.ctx.canvas.width,x),C=this.getSizeAndScale(R,this.ctx.canvas.height,_),k=D.size,$=C.size,N=t.cachedCanvases.getCanvas("pattern-workaround",k,$),V=N.context,nt=P?Math.floor(y/c):0,Y=L?Math.floor(p/h):0;for(let it=0;it<=nt;it++)for(let ot=0;ot<=Y;ot++)V.drawImage(ct,k*it,$*ot,k,$,0,0,k,$);return{canvas:N.canvas,scaleX:D.scale,scaleY:C.scale,offsetX:u,offsetY:d}}return{canvas:X.canvas,scaleX:H.scale,scaleY:W.scale,offsetX:u,offsetY:d}}getSizeAndScale(t,e,n){const s=Math.max(yd.MAX_PATTERN_SIZE,e);let r=Math.ceil(t*n);return r>=s?r=s:n=r/t,{scale:n,size:r}}clipBbox(t,e,n,s,r){const o=s-e,l=r-n;t.ctx.rect(e,n,o,l),et.axialAlignedBoundingBox([e,n,s,r],Xt(t.ctx),t.current.minMax),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,e,n){const s=t.ctx,r=t.current;switch(e){case sy.COLORED:const{fillStyle:o,strokeStyle:l}=this.ctx;s.fillStyle=r.fillColor=o,s.strokeStyle=r.strokeColor=l;break;case sy.UNCOLORED:s.fillStyle=s.strokeStyle=n,r.fillColor=r.strokeColor=n;break;default:throw new l_(`Unsupported paint type: ${e}`)}}isModifyingCurrentTransform(){return!1}getPattern(t,e,n,s){let r=n;s!==Te.SHADING&&(r=et.transform(r,e.baseTransform),this.matrix&&(r=et.transform(r,this.matrix)));const o=this.createPatternCanvas(e);let l=new DOMMatrix(r);l=l.translate(o.offsetX,o.offsetY),l=l.scale(1/o.scaleX,1/o.scaleY);const c=t.createPattern(o.canvas,"repeat");return c.setTransform(l),c}};U(yd,"MAX_PATTERN_SIZE",3e3);let Cp=yd;function B_({src:i,srcPos:t=0,dest:e,width:n,height:s,nonBlackColor:r=4294967295,inverseDecode:o=!1}){const l=we.isLittleEndian?4278190080:255,[c,h]=o?[r,l]:[l,r],u=n>>3,d=n&7,f=i.length;e=new Uint32Array(e.buffer);let g=0;for(let y=0;y<s;y++){for(const A=t+u;t<A;t++){const w=t<f?i[t]:255;e[g++]=w&128?h:c,e[g++]=w&64?h:c,e[g++]=w&32?h:c,e[g++]=w&16?h:c,e[g++]=w&8?h:c,e[g++]=w&4?h:c,e[g++]=w&2?h:c,e[g++]=w&1?h:c}if(d===0)continue;const p=t<f?i[t++]:255;for(let A=0;A<d;A++)e[g++]=p&1<<7-A?h:c}return{srcPos:t,destPos:g}}const iy=16,ry=100,j_=15,oy=10,nn=16,yf=new DOMMatrix,An=new Float32Array(2),ra=new Float32Array([1/0,1/0,-1/0,-1/0]);function H_(i,t){if(i._removeMirroring)throw new Error("Context is already forwarding operations.");i.__originalSave=i.save,i.__originalRestore=i.restore,i.__originalRotate=i.rotate,i.__originalScale=i.scale,i.__originalTranslate=i.translate,i.__originalTransform=i.transform,i.__originalSetTransform=i.setTransform,i.__originalResetTransform=i.resetTransform,i.__originalClip=i.clip,i.__originalMoveTo=i.moveTo,i.__originalLineTo=i.lineTo,i.__originalBezierCurveTo=i.bezierCurveTo,i.__originalRect=i.rect,i.__originalClosePath=i.closePath,i.__originalBeginPath=i.beginPath,i._removeMirroring=()=>{i.save=i.__originalSave,i.restore=i.__originalRestore,i.rotate=i.__originalRotate,i.scale=i.__originalScale,i.translate=i.__originalTranslate,i.transform=i.__originalTransform,i.setTransform=i.__originalSetTransform,i.resetTransform=i.__originalResetTransform,i.clip=i.__originalClip,i.moveTo=i.__originalMoveTo,i.lineTo=i.__originalLineTo,i.bezierCurveTo=i.__originalBezierCurveTo,i.rect=i.__originalRect,i.closePath=i.__originalClosePath,i.beginPath=i.__originalBeginPath,delete i._removeMirroring},i.save=function(){t.save(),this.__originalSave()},i.restore=function(){t.restore(),this.__originalRestore()},i.translate=function(e,n){t.translate(e,n),this.__originalTranslate(e,n)},i.scale=function(e,n){t.scale(e,n),this.__originalScale(e,n)},i.transform=function(e,n,s,r,o,l){t.transform(e,n,s,r,o,l),this.__originalTransform(e,n,s,r,o,l)},i.setTransform=function(e,n,s,r,o,l){t.setTransform(e,n,s,r,o,l),this.__originalSetTransform(e,n,s,r,o,l)},i.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},i.rotate=function(e){t.rotate(e),this.__originalRotate(e)},i.clip=function(e){t.clip(e),this.__originalClip(e)},i.moveTo=function(e,n){t.moveTo(e,n),this.__originalMoveTo(e,n)},i.lineTo=function(e,n){t.lineTo(e,n),this.__originalLineTo(e,n)},i.bezierCurveTo=function(e,n,s,r,o,l){t.bezierCurveTo(e,n,s,r,o,l),this.__originalBezierCurveTo(e,n,s,r,o,l)},i.rect=function(e,n,s,r){t.rect(e,n,s,r),this.__originalRect(e,n,s,r)},i.closePath=function(){t.closePath(),this.__originalClosePath()},i.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}class z_{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,e,n){let s;return this.cache[t]!==void 0?(s=this.cache[t],this.canvasFactory.reset(s,e,n)):(s=this.canvasFactory.create(e,n),this.cache[t]=s),s}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const e=this.cache[t];this.canvasFactory.destroy(e),delete this.cache[t]}}}function uu(i,t,e,n,s,r,o,l,c,h){const[u,d,f,g,y,p]=Xt(i);if(d===0&&f===0){const T=o*u+y,x=Math.round(T),_=l*g+p,E=Math.round(_),R=(o+c)*u+y,P=Math.abs(Math.round(R)-x)||1,L=(l+h)*g+p,O=Math.abs(Math.round(L)-E)||1;return i.setTransform(Math.sign(u),0,0,Math.sign(g),x,E),i.drawImage(t,e,n,s,r,0,0,P,O),i.setTransform(u,d,f,g,y,p),[P,O]}if(u===0&&g===0){const T=l*f+y,x=Math.round(T),_=o*d+p,E=Math.round(_),R=(l+h)*f+y,P=Math.abs(Math.round(R)-x)||1,L=(o+c)*d+p,O=Math.abs(Math.round(L)-E)||1;return i.setTransform(0,Math.sign(d),Math.sign(f),0,x,E),i.drawImage(t,e,n,s,r,0,0,O,P),i.setTransform(u,d,f,g,y,p),[O,P]}i.drawImage(t,e,n,s,r,o,l,c,h);const A=Math.hypot(u,d),w=Math.hypot(f,g);return[A*c,w*h]}class ay{constructor(t,e){U(this,"alphaIsShape",!1);U(this,"fontSize",0);U(this,"fontSizeScale",1);U(this,"textMatrix",null);U(this,"textMatrixScale",1);U(this,"fontMatrix",sp);U(this,"leading",0);U(this,"x",0);U(this,"y",0);U(this,"lineX",0);U(this,"lineY",0);U(this,"charSpacing",0);U(this,"wordSpacing",0);U(this,"textHScale",1);U(this,"textRenderingMode",Le.FILL);U(this,"textRise",0);U(this,"fillColor","#000000");U(this,"strokeColor","#000000");U(this,"patternFill",!1);U(this,"patternStroke",!1);U(this,"fillAlpha",1);U(this,"strokeAlpha",1);U(this,"lineWidth",1);U(this,"activeSMask",null);U(this,"transferMaps","none");this.clipBox=new Float32Array([0,0,t,e]),this.minMax=ra.slice()}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t.minMax=this.minMax.slice(),t}getPathBoundingBox(t=Te.FILL,e=null){const n=this.minMax.slice();if(t===Te.STROKE){e||Lt("Stroke bounding box must include transform."),et.singularValueDecompose2dScale(e,An);const s=An[0]*this.lineWidth/2,r=An[1]*this.lineWidth/2;n[0]-=s,n[1]-=r,n[2]+=s,n[3]+=r}return n}updateClipFromPath(){const t=et.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(t){this.clipBox.set(t,0),this.minMax.set(ra,0)}getClippedPathBoundingBox(t=Te.FILL,e=null){return et.intersect(this.clipBox,this.getPathBoundingBox(t,e))}}function ly(i,t){if(t instanceof ImageData){i.putImageData(t,0,0);return}const e=t.height,n=t.width,s=e%nn,r=(e-s)/nn,o=s===0?r:r+1,l=i.createImageData(n,nn);let c=0,h;const u=t.data,d=l.data;let f,g,y,p;if(t.kind===ec.GRAYSCALE_1BPP){const A=u.byteLength,w=new Uint32Array(d.buffer,0,d.byteLength>>2),T=w.length,x=n+7>>3,_=4294967295,E=we.isLittleEndian?4278190080:255;for(f=0;f<o;f++){for(y=f<r?nn:s,h=0,g=0;g<y;g++){const R=A-c;let P=0;const L=R>x?n:R*8-7,O=L&-8;let S=0,I=0;for(;P<O;P+=8)I=u[c++],w[h++]=I&128?_:E,w[h++]=I&64?_:E,w[h++]=I&32?_:E,w[h++]=I&16?_:E,w[h++]=I&8?_:E,w[h++]=I&4?_:E,w[h++]=I&2?_:E,w[h++]=I&1?_:E;for(;P<L;P++)S===0&&(I=u[c++],S=128),w[h++]=I&S?_:E,S>>=1}for(;h<T;)w[h++]=0;i.putImageData(l,0,f*nn)}}else if(t.kind===ec.RGBA_32BPP){for(g=0,p=n*nn*4,f=0;f<r;f++)d.set(u.subarray(c,c+p)),c+=p,i.putImageData(l,0,g),g+=nn;f<o&&(p=n*s*4,d.set(u.subarray(c,c+p)),i.putImageData(l,0,g))}else if(t.kind===ec.RGB_24BPP)for(y=nn,p=n*y,f=0;f<o;f++){for(f>=r&&(y=s,p=n*y),h=0,g=p;g--;)d[h++]=u[c++],d[h++]=u[c++],d[h++]=u[c++],d[h++]=255;i.putImageData(l,0,f*nn)}else throw new Error(`bad image kind: ${t.kind}`)}function cy(i,t){if(t.bitmap){i.drawImage(t.bitmap,0,0);return}const e=t.height,n=t.width,s=e%nn,r=(e-s)/nn,o=s===0?r:r+1,l=i.createImageData(n,nn);let c=0;const h=t.data,u=l.data;for(let d=0;d<o;d++){const f=d<r?nn:s;({srcPos:c}=B_({src:h,srcPos:c,dest:u,width:n,height:f,nonBlackColor:0})),i.putImageData(l,0,d*nn)}}function Rl(i,t){const e=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const n of e)i[n]!==void 0&&(t[n]=i[n]);i.setLineDash!==void 0&&(t.setLineDash(i.getLineDash()),t.lineDashOffset=i.lineDashOffset)}function du(i){i.strokeStyle=i.fillStyle="#000000",i.fillRule="nonzero",i.globalAlpha=1,i.lineWidth=1,i.lineCap="butt",i.lineJoin="miter",i.miterLimit=10,i.globalCompositeOperation="source-over",i.font="10px sans-serif",i.setLineDash!==void 0&&(i.setLineDash([]),i.lineDashOffset=0);const{filter:t}=i;t!=="none"&&t!==""&&(i.filter="none")}function hy(i,t){if(t)return!0;et.singularValueDecompose2dScale(i,An);const e=Math.fround(is.pixelRatio*Ei.PDF_TO_CSS_UNITS);return An[0]<=e&&An[1]<=e}const G_=["butt","round","square"],U_=["miter","round","bevel"],W_={},uy={};var rs,Tp,Rp,Pp;const nm=class nm{constructor(t,e,n,s,r,{optionalContentConfig:o,markedContentStack:l=null},c,h){b(this,rs);this.ctx=t,this.current=new ay(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=n,this.canvasFactory=s,this.filterFactory=r,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=l||[],this.optionalContentConfig=o,this.cachedCanvases=new z_(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=c,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=h,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(t,e=null){return typeof t=="string"?t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t):e}beginDrawing({transform:t,viewport:e,transparency:n=!1,background:s=null}){const r=this.ctx.canvas.width,o=this.ctx.canvas.height,l=this.ctx.fillStyle;if(this.ctx.fillStyle=s||"#ffffff",this.ctx.fillRect(0,0,r,o),this.ctx.fillStyle=l,n){const c=this.cachedCanvases.getCanvas("transparent",r,o);this.compositeCtx=this.ctx,this.transparentCanvas=c.canvas,this.ctx=c.context,this.ctx.save(),this.ctx.transform(...Xt(this.compositeCtx))}this.ctx.save(),du(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...e.transform),this.viewportScale=e.scale,this.baseTransform=Xt(this.ctx)}executeOperatorList(t,e,n,s){const r=t.argsArray,o=t.fnArray;let l=e||0;const c=r.length;if(c===l)return l;const h=c-l>oy&&typeof n=="function",u=h?Date.now()+j_:0;let d=0;const f=this.commonObjs,g=this.objs;let y;for(;;){if(s!==void 0&&l===s.nextBreakPoint)return s.breakIt(l,n),l;if(y=o[l],y!==cc.dependency)this[y].apply(this,r[l]);else for(const p of r[l]){const A=p.startsWith("g_")?f:g;if(!A.has(p))return A.get(p,n),l}if(l++,l===c)return l;if(h&&++d>oy){if(Date.now()>u)return n(),l;d=0}}}endDrawing(){v(this,rs,Tp).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const e of t.values())typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement&&(e.width=e.height=0);t.clear()}this._cachedBitmapsMap.clear(),v(this,rs,Rp).call(this)}_scaleImage(t,e){const n=t.width??t.displayWidth,s=t.height??t.displayHeight;let r=Math.max(Math.hypot(e[0],e[1]),1),o=Math.max(Math.hypot(e[2],e[3]),1),l=n,c=s,h="prescale1",u,d;for(;r>2&&l>1||o>2&&c>1;){let f=l,g=c;r>2&&l>1&&(f=l>=16384?Math.floor(l/2)-1||1:Math.ceil(l/2),r/=l/f),o>2&&c>1&&(g=c>=16384?Math.floor(c/2)-1||1:Math.ceil(c)/2,o/=c/g),u=this.cachedCanvases.getCanvas(h,f,g),d=u.context,d.clearRect(0,0,f,g),d.drawImage(t,0,0,l,c,0,0,f,g),t=u.canvas,l=f,c=g,h=h==="prescale1"?"prescale2":"prescale1"}return{img:t,paintWidth:l,paintHeight:c}}_createMaskCanvas(t){const e=this.ctx,{width:n,height:s}=t,r=this.current.fillColor,o=this.current.patternFill,l=Xt(e);let c,h,u,d;if((t.bitmap||t.data)&&t.count>1){const O=t.bitmap||t.data.buffer;h=JSON.stringify(o?l:[l.slice(0,4),r]),c=this._cachedBitmapsMap.get(O),c||(c=new Map,this._cachedBitmapsMap.set(O,c));const S=c.get(h);if(S&&!o){const I=Math.round(Math.min(l[0],l[2])+l[4]),B=Math.round(Math.min(l[1],l[3])+l[5]);return{canvas:S,offsetX:I,offsetY:B}}u=S}u||(d=this.cachedCanvases.getCanvas("maskCanvas",n,s),cy(d.context,t));let f=et.transform(l,[1/n,0,0,-1/s,0,0]);f=et.transform(f,[1,0,0,1,0,-s]);const g=ra.slice();et.axialAlignedBoundingBox([0,0,n,s],f,g);const[y,p,A,w]=g,T=Math.round(A-y)||1,x=Math.round(w-p)||1,_=this.cachedCanvases.getCanvas("fillCanvas",T,x),E=_.context,R=y,P=p;E.translate(-R,-P),E.transform(...f),u||(u=this._scaleImage(d.canvas,as(E)),u=u.img,c&&o&&c.set(h,u)),E.imageSmoothingEnabled=hy(Xt(E),t.interpolate),uu(E,u,0,0,u.width,u.height,0,0,n,s),E.globalCompositeOperation="source-in";const L=et.transform(as(E),[1,0,0,1,-R,-P]);return E.fillStyle=o?r.getPattern(e,this,L,Te.FILL):r,E.fillRect(0,0,n,s),c&&!o&&(this.cachedCanvases.delete("fillCanvas"),c.set(h,_.canvas)),{canvas:_.canvas,offsetX:Math.round(R),offsetY:Math.round(P)}}setLineWidth(t){t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(t){this.ctx.lineCap=G_[t]}setLineJoin(t){this.ctx.lineJoin=U_[t]}setMiterLimit(t){this.ctx.miterLimit=t}setDash(t,e){const n=this.ctx;n.setLineDash!==void 0&&(n.setLineDash(t),n.lineDashOffset=e)}setRenderingIntent(t){}setFlatness(t){}setGState(t){for(const[e,n]of t)switch(e){case"LW":this.setLineWidth(n);break;case"LC":this.setLineCap(n);break;case"LJ":this.setLineJoin(n);break;case"ML":this.setMiterLimit(n);break;case"D":this.setDash(n[0],n[1]);break;case"RI":this.setRenderingIntent(n);break;case"FL":this.setFlatness(n);break;case"Font":this.setFont(n[0],n[1]);break;case"CA":this.current.strokeAlpha=n;break;case"ca":this.ctx.globalAlpha=this.current.fillAlpha=n;break;case"BM":this.ctx.globalCompositeOperation=n;break;case"SMask":this.current.activeSMask=n?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(n);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const t=this.ctx.canvas.width,e=this.ctx.canvas.height,n="smaskGroupAt"+this.groupLevel,s=this.cachedCanvases.getCanvas(n,t,e);this.suspendedCtx=this.ctx;const r=this.ctx=s.context;r.setTransform(this.suspendedCtx.getTransform()),Rl(this.suspendedCtx,r),H_(r,this.suspendedCtx),this.setGState([["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Rl(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const e=this.current.activeSMask,n=this.suspendedCtx;this.composeSMask(n,e,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,e,n,s){const r=s[0],o=s[1],l=s[2]-r,c=s[3]-o;l===0||c===0||(this.genericComposeSMask(e.context,n,l,c,e.subtype,e.backdrop,e.transferMap,r,o,e.offsetX,e.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(n.canvas,0,0),t.restore())}genericComposeSMask(t,e,n,s,r,o,l,c,h,u,d){let f=t.canvas,g=c-u,y=h-d;if(o)if(g<0||y<0||g+n>f.width||y+s>f.height){const A=this.cachedCanvases.getCanvas("maskExtension",n,s),w=A.context;w.drawImage(f,-g,-y),w.globalCompositeOperation="destination-atop",w.fillStyle=o,w.fillRect(0,0,n,s),w.globalCompositeOperation="source-over",f=A.canvas,g=y=0}else{t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const A=new Path2D;A.rect(g,y,n,s),t.clip(A),t.globalCompositeOperation="destination-atop",t.fillStyle=o,t.fillRect(g,y,n,s),t.restore()}e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0),r==="Alpha"&&l?e.filter=this.filterFactory.addAlphaFilter(l):r==="Luminosity"&&(e.filter=this.filterFactory.addLuminosityFilter(l));const p=new Path2D;p.rect(c,h,n,s),e.clip(p),e.globalCompositeOperation="destination-in",e.drawImage(f,g,y,n,s,c,h,n,s),e.restore()}save(){this.inSMaskMode&&Rl(this.ctx,this.suspendedCtx),this.ctx.save();const t=this.current;this.stateStack.push(t),this.current=t.clone()}restore(){if(this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&Rl(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(t,e,n,s,r,o){this.ctx.transform(t,e,n,s,r,o),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,e,n){let[s]=e;if(!n){s||(s=e[0]=new Path2D),this[t](s);return}if(!(s instanceof Path2D)){const r=e[0]=new Path2D;for(let o=0,l=s.length;o<l;)switch(s[o++]){case lu.moveTo:r.moveTo(s[o++],s[o++]);break;case lu.lineTo:r.lineTo(s[o++],s[o++]);break;case lu.curveTo:r.bezierCurveTo(s[o++],s[o++],s[o++],s[o++],s[o++],s[o++]);break;case lu.closePath:r.closePath();break;default:lt(`Unrecognized drawing path operator: ${s[o-1]}`);break}s=r}et.axialAlignedBoundingBox(n,Xt(this.ctx),this.current.minMax),this[t](s)}closePath(){this.ctx.closePath()}stroke(t,e=!0){const n=this.ctx,s=this.current.strokeColor;if(n.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof s=="object"&&(s!=null&&s.getPattern)){const r=s.isModifyingCurrentTransform()?n.getTransform():null;if(n.save(),n.strokeStyle=s.getPattern(n,this,as(n),Te.STROKE),r){const o=new Path2D;o.addPath(t,n.getTransform().invertSelf().multiplySelf(r)),t=o}this.rescaleAndStroke(t,!1),n.restore()}else this.rescaleAndStroke(t,!0);e&&this.consumePath(t,this.current.getClippedPathBoundingBox(Te.STROKE,Xt(this.ctx))),n.globalAlpha=this.current.fillAlpha}closeStroke(t){this.stroke(t)}fill(t,e=!0){const n=this.ctx,s=this.current.fillColor,r=this.current.patternFill;let o=!1;if(r){const c=s.isModifyingCurrentTransform()?n.getTransform():null;if(n.save(),n.fillStyle=s.getPattern(n,this,as(n),Te.FILL),c){const h=new Path2D;h.addPath(t,n.getTransform().invertSelf().multiplySelf(c)),t=h}o=!0}const l=this.current.getClippedPathBoundingBox();this.contentVisible&&l!==null&&(this.pendingEOFill?(n.fill(t,"evenodd"),this.pendingEOFill=!1):n.fill(t)),o&&n.restore(),e&&this.consumePath(t,l)}eoFill(t){this.pendingEOFill=!0,this.fill(t)}fillStroke(t){this.fill(t,!1),this.stroke(t,!1),this.consumePath(t)}eoFillStroke(t){this.pendingEOFill=!0,this.fillStroke(t)}closeFillStroke(t){this.fillStroke(t)}closeEOFillStroke(t){this.pendingEOFill=!0,this.fillStroke(t)}endPath(t){this.consumePath(t)}rawFillPath(t){this.ctx.fill(t)}clip(){this.pendingClip=W_}eoClip(){this.pendingClip=uy}beginText(){this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const t=this.pendingTextPaths,e=this.ctx;if(t===void 0)return;const n=new Path2D,s=e.getTransform().invertSelf();for(const{transform:r,x:o,y:l,fontSize:c,path:h}of t)n.addPath(h,new DOMMatrix(r).preMultiplySelf(s).translate(o,l).scale(c,-c));e.clip(n),delete this.pendingTextPaths}setCharSpacing(t){this.current.charSpacing=t}setWordSpacing(t){this.current.wordSpacing=t}setHScale(t){this.current.textHScale=t/100}setLeading(t){this.current.leading=-t}setFont(t,e){var u;const n=this.commonObjs.get(t),s=this.current;if(!n)throw new Error(`Can't find font for ${t}`);if(s.fontMatrix=n.fontMatrix||sp,(s.fontMatrix[0]===0||s.fontMatrix[3]===0)&&lt("Invalid font matrix for font "+t),e<0?(e=-e,s.fontDirection=-1):s.fontDirection=1,this.current.font=n,this.current.fontSize=e,n.isType3Font)return;const r=n.loadedName||"sans-serif",o=((u=n.systemFontInfo)==null?void 0:u.css)||`"${r}", ${n.fallbackName}`;let l="normal";n.black?l="900":n.bold&&(l="bold");const c=n.italic?"italic":"normal";let h=e;e<iy?h=iy:e>ry&&(h=ry),this.current.fontSizeScale=e/h,this.ctx.font=`${c} ${l} ${h}px ${o}`}setTextRenderingMode(t){this.current.textRenderingMode=t}setTextRise(t){this.current.textRise=t}moveText(t,e){this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=e}setLeadingMoveText(t,e){this.setLeading(-e),this.moveText(t,e)}setTextMatrix(t){const{current:e}=this;e.textMatrix=t,e.textMatrixScale=Math.hypot(t[0],t[1]),e.x=e.lineX=0,e.y=e.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(t,e,n,s,r){const o=this.ctx,l=this.current,c=l.font,h=l.textRenderingMode,u=l.fontSize/l.fontSizeScale,d=h&Le.FILL_STROKE_MASK,f=!!(h&Le.ADD_TO_PATH_FLAG),g=l.patternFill&&!c.missingFile,y=l.patternStroke&&!c.missingFile;let p;if((c.disableFontFace||f||g||y)&&(p=c.getPathGenerator(this.commonObjs,t)),c.disableFontFace||g||y){o.save(),o.translate(e,n),o.scale(u,-u);let A;if((d===Le.FILL||d===Le.FILL_STROKE)&&(s?(A=o.getTransform(),o.setTransform(...s),o.fill(v(this,rs,Pp).call(this,p,A,s))):o.fill(p)),d===Le.STROKE||d===Le.FILL_STROKE)if(r){A||(A=o.getTransform()),o.setTransform(...r);const{a:w,b:T,c:x,d:_}=A,E=et.inverseTransform(r),R=et.transform([w,T,x,_,0,0],E);et.singularValueDecompose2dScale(R,An),o.lineWidth*=Math.max(An[0],An[1])/u,o.stroke(v(this,rs,Pp).call(this,p,A,r))}else o.lineWidth/=u,o.stroke(p);o.restore()}else(d===Le.FILL||d===Le.FILL_STROKE)&&o.fillText(t,e,n),(d===Le.STROKE||d===Le.FILL_STROKE)&&o.strokeText(t,e,n);f&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:Xt(o),x:e,y:n,fontSize:u,path:p})}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const e=t.getImageData(0,0,10,10).data;let n=!1;for(let s=3;s<e.length;s+=4)if(e[s]>0&&e[s]<255){n=!0;break}return mt(this,"isFontSubpixelAAEnabled",n)}showText(t){const e=this.current,n=e.font;if(n.isType3Font)return this.showType3Text(t);const s=e.fontSize;if(s===0)return;const r=this.ctx,o=e.fontSizeScale,l=e.charSpacing,c=e.wordSpacing,h=e.fontDirection,u=e.textHScale*h,d=t.length,f=n.vertical,g=f?1:-1,y=n.defaultVMetrics,p=s*e.fontMatrix[0],A=e.textRenderingMode===Le.FILL&&!n.disableFontFace&&!e.patternFill;r.save(),e.textMatrix&&r.transform(...e.textMatrix),r.translate(e.x,e.y+e.textRise),h>0?r.scale(u,-1):r.scale(u,1);let w,T;if(e.patternFill){r.save();const P=e.fillColor.getPattern(r,this,as(r),Te.FILL);w=Xt(r),r.restore(),r.fillStyle=P}if(e.patternStroke){r.save();const P=e.strokeColor.getPattern(r,this,as(r),Te.STROKE);T=Xt(r),r.restore(),r.strokeStyle=P}let x=e.lineWidth;const _=e.textMatrixScale;if(_===0||x===0){const P=e.textRenderingMode&Le.FILL_STROKE_MASK;(P===Le.STROKE||P===Le.FILL_STROKE)&&(x=this.getSinglePixelWidth())}else x/=_;if(o!==1&&(r.scale(o,o),x/=o),r.lineWidth=x,n.isInvalidPDFjsFont){const P=[];let L=0;for(const O of t)P.push(O.unicode),L+=O.width;r.fillText(P.join(""),0,0),e.x+=L*p*u,r.restore(),this.compose();return}let E=0,R;for(R=0;R<d;++R){const P=t[R];if(typeof P=="number"){E+=g*P*s/1e3;continue}let L=!1;const O=(P.isSpace?c:0)+l,S=P.fontChar,I=P.accent;let B,H,W=P.width;if(f){const j=P.vmetric||y,z=-(P.vmetric?j[1]:W*.5)*p,ct=j[2]*p;W=j?-j[0]:W,B=z/o,H=(E+ct)/o}else B=E/o,H=0;if(n.remeasure&&W>0){const j=r.measureText(S).width*1e3/s*o;if(W<j&&this.isFontSubpixelAAEnabled){const z=W/j;L=!0,r.save(),r.scale(z,1),B/=z}else W!==j&&(B+=(W-j)/2e3*s/o)}if(this.contentVisible&&(P.isInFont||n.missingFile)){if(A&&!I)r.fillText(S,B,H);else if(this.paintChar(S,B,H,w,T),I){const j=B+s*I.offset.x/o,z=H-s*I.offset.y/o;this.paintChar(I.fontChar,j,z,w,T)}}const X=f?W*p-O*h:W*p+O*h;E+=X,L&&r.restore()}f?e.y-=E:e.x+=E*u,r.restore(),this.compose()}showType3Text(t){const e=this.ctx,n=this.current,s=n.font,r=n.fontSize,o=n.fontDirection,l=s.vertical?1:-1,c=n.charSpacing,h=n.wordSpacing,u=n.textHScale*o,d=n.fontMatrix||sp,f=t.length,g=n.textRenderingMode===Le.INVISIBLE;let y,p,A,w;if(!(g||r===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,e.save(),n.textMatrix&&e.transform(...n.textMatrix),e.translate(n.x,n.y+n.textRise),e.scale(u,o),y=0;y<f;++y){if(p=t[y],typeof p=="number"){w=l*p*r/1e3,this.ctx.translate(w,0),n.x+=w*u;continue}const T=(p.isSpace?h:0)+c,x=s.charProcOperatorList[p.operatorListId];x?this.contentVisible&&(this.save(),e.scale(r,r),e.transform(...d),this.executeOperatorList(x),this.restore()):lt(`Type3 character "${p.operatorListId}" is not available.`);const _=[p.width,0];et.applyTransform(_,d),A=_[0]*r+T,e.translate(A,0),n.x+=A*u}e.restore()}}setCharWidth(t,e){}setCharWidthAndBounds(t,e,n,s,r,o){const l=new Path2D;l.rect(n,s,r-n,o-s),this.ctx.clip(l),this.endPath()}getColorN_Pattern(t){let e;if(t[0]==="TilingPattern"){const n=this.baseTransform||Xt(this.ctx),s={createCanvasGraphics:r=>new nm(r,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};e=new Cp(t,this.ctx,s,n)}else e=this._getPattern(t[1],t[2]);return e}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments),this.current.patternStroke=!0}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(t){this.ctx.strokeStyle=this.current.strokeColor=t,this.current.patternStroke=!1}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(t){this.ctx.fillStyle=this.current.fillColor=t,this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(t,e=null){let n;return this.cachedPatterns.has(t)?n=this.cachedPatterns.get(t):(n=$_(this.getObject(t)),this.cachedPatterns.set(t,n)),e&&(n.matrix=e),n}shadingFill(t){if(!this.contentVisible)return;const e=this.ctx;this.save();const n=this._getPattern(t);e.fillStyle=n.getPattern(e,this,as(e),Te.SHADING);const s=as(e);if(s){const{width:r,height:o}=e.canvas,l=ra.slice();et.axialAlignedBoundingBox([0,0,r,o],s,l);const[c,h,u,d]=l;this.ctx.fillRect(c,h,u-c,d-h)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){Lt("Should not call beginInlineImage")}beginImageData(){Lt("Should not call beginImageData")}paintFormXObjectBegin(t,e){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),t&&this.transform(...t),this.baseTransform=Xt(this.ctx),e)){et.axialAlignedBoundingBox(e,this.baseTransform,this.current.minMax);const[n,s,r,o]=e,l=new Path2D;l.rect(n,s,r-n,o-s),this.ctx.clip(l),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const e=this.ctx;t.isolated||Gd("TODO: Support non-isolated groups."),t.knockout&&lt("Knockout groups not supported.");const n=Xt(e);if(t.matrix&&e.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let s=ra.slice();et.axialAlignedBoundingBox(t.bbox,Xt(e),s);const r=[0,0,e.canvas.width,e.canvas.height];s=et.intersect(s,r)||[0,0,0,0];const o=Math.floor(s[0]),l=Math.floor(s[1]),c=Math.max(Math.ceil(s[2])-o,1),h=Math.max(Math.ceil(s[3])-l,1);this.current.startNewPathAndClipBox([0,0,c,h]);let u="groupAt"+this.groupLevel;t.smask&&(u+="_smask_"+this.smaskCounter++%2);const d=this.cachedCanvases.getCanvas(u,c,h),f=d.context;f.translate(-o,-l),f.transform(...n);let g=new Path2D;const[y,p,A,w]=t.bbox;if(g.rect(y,p,A-y,w-p),t.matrix){const T=new Path2D;T.addPath(g,new DOMMatrix(t.matrix)),g=T}f.clip(g),t.smask?this.smaskStack.push({canvas:d.canvas,context:f,offsetX:o,offsetY:l,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}):(e.setTransform(1,0,0,1,0,0),e.translate(o,l),e.save()),Rl(e,f),this.ctx=f,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(e),this.groupLevel++}endGroup(t){if(!this.contentVisible)return;this.groupLevel--;const e=this.ctx,n=this.groupStack.pop();if(this.ctx=n,this.ctx.imageSmoothingEnabled=!1,t.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const s=Xt(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...s);const r=ra.slice();et.axialAlignedBoundingBox([0,0,e.canvas.width,e.canvas.height],s,r),this.ctx.drawImage(e.canvas,0,0),this.ctx.restore(),this.compose(r)}}beginAnnotation(t,e,n,s,r){if(v(this,rs,Tp).call(this),du(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),e){const o=e[2]-e[0],l=e[3]-e[1];if(r&&this.annotationCanvasMap){n=n.slice(),n[4]-=e[0],n[5]-=e[1],e=e.slice(),e[0]=e[1]=0,e[2]=o,e[3]=l,et.singularValueDecompose2dScale(Xt(this.ctx),An);const{viewportScale:c}=this,h=Math.ceil(o*this.outputScaleX*c),u=Math.ceil(l*this.outputScaleY*c);this.annotationCanvas=this.canvasFactory.create(h,u);const{canvas:d,context:f}=this.annotationCanvas;this.annotationCanvasMap.set(t,d),this.annotationCanvas.savedCtx=this.ctx,this.ctx=f,this.ctx.save(),this.ctx.setTransform(An[0],0,0,-An[1],0,l*An[1]),du(this.ctx)}else{du(this.ctx),this.endPath();const c=new Path2D;c.rect(e[0],e[1],o,l),this.ctx.clip(c)}}this.current=new ay(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...n),this.transform(...s)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),v(this,rs,Rp).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t){if(!this.contentVisible)return;const e=t.count;t=this.getObject(t.data,t),t.count=e;const n=this.ctx,s=this._createMaskCanvas(t),r=s.canvas;n.save(),n.setTransform(1,0,0,1,0,0),n.drawImage(r,s.offsetX,s.offsetY),n.restore(),this.compose()}paintImageMaskXObjectRepeat(t,e,n=0,s=0,r,o){if(!this.contentVisible)return;t=this.getObject(t.data,t);const l=this.ctx;l.save();const c=Xt(l);l.transform(e,n,s,r,0,0);const h=this._createMaskCanvas(t);l.setTransform(1,0,0,1,h.offsetX-c[4],h.offsetY-c[5]);for(let u=0,d=o.length;u<d;u+=2){const f=et.transform(c,[e,n,s,r,o[u],o[u+1]]);l.drawImage(h.canvas,f[4],f[5])}l.restore(),this.compose()}paintImageMaskXObjectGroup(t){if(!this.contentVisible)return;const e=this.ctx,n=this.current.fillColor,s=this.current.patternFill;for(const r of t){const{data:o,width:l,height:c,transform:h}=r,u=this.cachedCanvases.getCanvas("maskCanvas",l,c),d=u.context;d.save();const f=this.getObject(o,r);cy(d,f),d.globalCompositeOperation="source-in",d.fillStyle=s?n.getPattern(d,this,as(e),Te.FILL):n,d.fillRect(0,0,l,c),d.restore(),e.save(),e.transform(...h),e.scale(1,-1),uu(e,u.canvas,0,0,l,c,0,-1,1,1),e.restore()}this.compose()}paintImageXObject(t){if(!this.contentVisible)return;const e=this.getObject(t);if(!e){lt("Dependent image isn't ready yet");return}this.paintInlineImageXObject(e)}paintImageXObjectRepeat(t,e,n,s){if(!this.contentVisible)return;const r=this.getObject(t);if(!r){lt("Dependent image isn't ready yet");return}const o=r.width,l=r.height,c=[];for(let h=0,u=s.length;h<u;h+=2)c.push({transform:[e,0,0,n,s[h],s[h+1]],x:0,y:0,w:o,h:l});this.paintInlineImageXObjectGroup(r,c)}applyTransferMapsToCanvas(t){return this.current.transferMaps!=="none"&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if(this.current.transferMaps==="none")return t.bitmap;const{bitmap:e,width:n,height:s}=t,r=this.cachedCanvases.getCanvas("inlineImage",n,s),o=r.context;return o.filter=this.current.transferMaps,o.drawImage(e,0,0),o.filter="none",r.canvas}paintInlineImageXObject(t){if(!this.contentVisible)return;const e=t.width,n=t.height,s=this.ctx;this.save();const{filter:r}=s;r!=="none"&&r!==""&&(s.filter="none"),s.scale(1/e,-1/n);let o;if(t.bitmap)o=this.applyTransferMapsToBitmap(t);else if(typeof HTMLElement=="function"&&t instanceof HTMLElement||!t.data)o=t;else{const h=this.cachedCanvases.getCanvas("inlineImage",e,n).context;ly(h,t),o=this.applyTransferMapsToCanvas(h)}const l=this._scaleImage(o,as(s));s.imageSmoothingEnabled=hy(Xt(s),t.interpolate),uu(s,l.img,0,0,l.paintWidth,l.paintHeight,0,-n,e,n),this.compose(),this.restore()}paintInlineImageXObjectGroup(t,e){if(!this.contentVisible)return;const n=this.ctx;let s;if(t.bitmap)s=t.bitmap;else{const r=t.width,o=t.height,c=this.cachedCanvases.getCanvas("inlineImage",r,o).context;ly(c,t),s=this.applyTransferMapsToCanvas(c)}for(const r of e)n.save(),n.transform(...r.transform),n.scale(1,-1),uu(n,s,r.x,r.y,r.w,r.h,0,-1,1,1),n.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t){}markPointProps(t,e){}beginMarkedContent(t){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,e){t==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(e)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(t,e){const n=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(e);const s=this.ctx;this.pendingClip&&(n||(this.pendingClip===uy?s.clip(t,"evenodd"):s.clip(t)),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=Xt(this.ctx);if(t[1]===0&&t[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const e=Math.abs(t[0]*t[3]-t[2]*t[1]),n=Math.hypot(t[0],t[2]),s=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(n,s)/e}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:t}=this.current,{a:e,b:n,c:s,d:r}=this.ctx.getTransform();let o,l;if(n===0&&s===0){const c=Math.abs(e),h=Math.abs(r);if(c===h)if(t===0)o=l=1/c;else{const u=c*t;o=l=u<1?1/u:1}else if(t===0)o=1/c,l=1/h;else{const u=c*t,d=h*t;o=u<1?1/u:1,l=d<1?1/d:1}}else{const c=Math.abs(e*r-n*s),h=Math.hypot(e,n),u=Math.hypot(s,r);if(t===0)o=u/c,l=h/c;else{const d=t*c;o=u>d?u/d:1,l=h>d?h/d:1}}this._cachedScaleForStroking[0]=o,this._cachedScaleForStroking[1]=l}return this._cachedScaleForStroking}rescaleAndStroke(t,e){const{ctx:n,current:{lineWidth:s}}=this,[r,o]=this.getScaleForStroking();if(r===o){n.lineWidth=(s||1)*r,n.stroke(t);return}const l=n.getLineDash();e&&n.save(),n.scale(r,o),yf.a=1/r,yf.d=1/o;const c=new Path2D;if(c.addPath(t,yf),l.length>0){const h=Math.max(r,o);n.setLineDash(l.map(u=>u/h)),n.lineDashOffset/=h}n.lineWidth=s||1,n.stroke(c),e&&n.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}};rs=new WeakSet,Tp=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},Rp=function(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(t!=="none"){const e=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=e}}},Pp=function(t,e,n){const s=new Path2D;return s.addPath(t,new DOMMatrix(n).invertSelf().multiplySelf(e)),s};let ha=nm;for(const i in cc)ha.prototype[i]!==void 0&&(ha.prototype[cc[i]]=ha.prototype[i]);var zc,Gc;class Fn{static get workerPort(){return a(this,zc)}static set workerPort(t){if(!(typeof Worker<"u"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");m(this,zc,t)}static get workerSrc(){return a(this,Gc)}static set workerSrc(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");m(this,Gc,t)}}zc=new WeakMap,Gc=new WeakMap,b(Fn,zc,null),b(Fn,Gc,"");var Ia,Uc;class V_{constructor({parsedData:t,rawData:e}){b(this,Ia);b(this,Uc);m(this,Ia,t),m(this,Uc,e)}getRaw(){return a(this,Uc)}get(t){return a(this,Ia).get(t)??null}[Symbol.iterator](){return a(this,Ia).entries()}}Ia=new WeakMap,Uc=new WeakMap;const ea=Symbol("INTERNAL");var Wc,Vc,qc,La;class q_{constructor(t,{name:e,intent:n,usage:s,rbGroups:r}){b(this,Wc,!1);b(this,Vc,!1);b(this,qc,!1);b(this,La,!0);m(this,Wc,!!(t&vn.DISPLAY)),m(this,Vc,!!(t&vn.PRINT)),this.name=e,this.intent=n,this.usage=s,this.rbGroups=r}get visible(){if(a(this,qc))return a(this,La);if(!a(this,La))return!1;const{print:t,view:e}=this.usage;return a(this,Wc)?(e==null?void 0:e.viewState)!=="OFF":a(this,Vc)?(t==null?void 0:t.printState)!=="OFF":!0}_setVisible(t,e,n=!1){t!==ea&&Lt("Internal method `_setVisible` called."),m(this,qc,n),m(this,La,e)}}Wc=new WeakMap,Vc=new WeakMap,qc=new WeakMap,La=new WeakMap;var Gi,kt,Ma,Oa,Xc,kp;class X_{constructor(t,e=vn.DISPLAY){b(this,Xc);b(this,Gi,null);b(this,kt,new Map);b(this,Ma,null);b(this,Oa,null);if(this.renderingIntent=e,this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,m(this,Oa,t.order);for(const n of t.groups)a(this,kt).set(n.id,new q_(e,n));if(t.baseState==="OFF")for(const n of a(this,kt).values())n._setVisible(ea,!1);for(const n of t.on)a(this,kt).get(n)._setVisible(ea,!0);for(const n of t.off)a(this,kt).get(n)._setVisible(ea,!1);m(this,Ma,this.getHash())}}isVisible(t){if(a(this,kt).size===0)return!0;if(!t)return Gd("Optional content group not defined."),!0;if(t.type==="OCG")return a(this,kt).has(t.id)?a(this,kt).get(t.id).visible:(lt(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return v(this,Xc,kp).call(this,t.expression);if(!t.policy||t.policy==="AnyOn"){for(const e of t.ids){if(!a(this,kt).has(e))return lt(`Optional content group not found: ${e}`),!0;if(a(this,kt).get(e).visible)return!0}return!1}else if(t.policy==="AllOn"){for(const e of t.ids){if(!a(this,kt).has(e))return lt(`Optional content group not found: ${e}`),!0;if(!a(this,kt).get(e).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(const e of t.ids){if(!a(this,kt).has(e))return lt(`Optional content group not found: ${e}`),!0;if(!a(this,kt).get(e).visible)return!0}return!1}else if(t.policy==="AllOff"){for(const e of t.ids){if(!a(this,kt).has(e))return lt(`Optional content group not found: ${e}`),!0;if(a(this,kt).get(e).visible)return!1}return!0}return lt(`Unknown optional content policy ${t.policy}.`),!0}return lt(`Unknown group type ${t.type}.`),!0}setVisibility(t,e=!0,n=!0){var r;const s=a(this,kt).get(t);if(!s){lt(`Optional content group not found: ${t}`);return}if(n&&e&&s.rbGroups.length)for(const o of s.rbGroups)for(const l of o)l!==t&&((r=a(this,kt).get(l))==null||r._setVisible(ea,!1,!0));s._setVisible(ea,!!e,!0),m(this,Gi,null)}setOCGState({state:t,preserveRB:e}){let n;for(const s of t){switch(s){case"ON":case"OFF":case"Toggle":n=s;continue}const r=a(this,kt).get(s);if(r)switch(n){case"ON":this.setVisibility(s,!0,e);break;case"OFF":this.setVisibility(s,!1,e);break;case"Toggle":this.setVisibility(s,!r.visible,e);break}}m(this,Gi,null)}get hasInitialVisibility(){return a(this,Ma)===null||this.getHash()===a(this,Ma)}getOrder(){return a(this,kt).size?a(this,Oa)?a(this,Oa).slice():[...a(this,kt).keys()]:null}getGroup(t){return a(this,kt).get(t)||null}getHash(){if(a(this,Gi)!==null)return a(this,Gi);const t=new v0;for(const[e,n]of a(this,kt))t.update(`${e}:${n.visible}`);return m(this,Gi,t.hexdigest())}[Symbol.iterator](){return a(this,kt).entries()}}Gi=new WeakMap,kt=new WeakMap,Ma=new WeakMap,Oa=new WeakMap,Xc=new WeakSet,kp=function(t){const e=t.length;if(e<2)return!0;const n=t[0];for(let s=1;s<e;s++){const r=t[s];let o;if(Array.isArray(r))o=v(this,Xc,kp).call(this,r);else if(a(this,kt).has(r))o=a(this,kt).get(r).visible;else return lt(`Optional content group not found: ${r}`),!0;switch(n){case"And":if(!o)return!1;break;case"Or":if(o)return!0;break;case"Not":return!o;default:return!0}}return n==="And"};class Y_{constructor(t,{disableRange:e=!1,disableStream:n=!1}){ce(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:s,initialData:r,progressiveDone:o,contentDispositionFilename:l}=t;if(this._queuedChunks=[],this._progressiveDone=o,this._contentDispositionFilename=l,(r==null?void 0:r.length)>0){const c=r instanceof Uint8Array&&r.byteLength===r.buffer.byteLength?r.buffer:new Uint8Array(r).buffer;this._queuedChunks.push(c)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!n,this._isRangeSupported=!e,this._contentLength=s,this._fullRequestReader=null,this._rangeReaders=[],t.addRangeListener((c,h)=>{this._onReceiveData({begin:c,chunk:h})}),t.addProgressListener((c,h)=>{this._onProgress({loaded:c,total:h})}),t.addProgressiveReadListener(c=>{this._onReceiveData({chunk:c})}),t.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),t.transportReady()}_onReceiveData({begin:t,chunk:e}){const n=e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer;if(t===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(n):this._queuedChunks.push(n);else{const s=this._rangeReaders.some(function(r){return r._begin!==t?!1:(r._enqueue(n),!0)});ce(s,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}_onProgress(t){var e,n,s,r;t.total===void 0?(n=(e=this._rangeReaders[0])==null?void 0:e.onProgress)==null||n.call(e,{loaded:t.loaded}):(r=(s=this._fullRequestReader)==null?void 0:s.onProgress)==null||r.call(s,{loaded:t.loaded,total:t.total})}_onProgressiveDone(){var t;(t=this._fullRequestReader)==null||t.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){const e=this._rangeReaders.indexOf(t);e>=0&&this._rangeReaders.splice(e,1)}getFullReader(){ce(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;return this._queuedChunks=null,new K_(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new J_(this,t,e);return this._pdfDataRangeTransport.requestDataRange(t,e),this._rangeReaders.push(n),n}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const n of this._rangeReaders.slice(0))n.cancel(t);this._pdfDataRangeTransport.abort()}}class K_{constructor(t,e,n=!1,s=null){this._stream=t,this._done=n||!1,this._filename=Wd(s)?s:null,this._queuedChunks=e||[],this._loaded=0;for(const r of this._queuedChunks)this._loaded+=r.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class J_{constructor(t,e,n){this._stream=t,this._begin=e,this._end=n,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function Q_(i){let t=!0,e=n("filename\\*","i").exec(i);if(e){e=e[1];let u=l(e);return u=unescape(u),u=c(u),u=h(u),r(u)}if(e=o(i),e){const u=h(e);return r(u)}if(e=n("filename","i").exec(i),e){e=e[1];let u=l(e);return u=h(u),r(u)}function n(u,d){return new RegExp("(?:^|;)\\s*"+u+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',d)}function s(u,d){if(u){if(!/^[\x00-\xFF]+$/.test(d))return d;try{const f=new TextDecoder(u,{fatal:!0}),g=Xh(d);d=f.decode(g),t=!1}catch{}}return d}function r(u){return t&&/[\x80-\xff]/.test(u)&&(u=s("utf-8",u),t&&(u=s("iso-8859-1",u))),u}function o(u){const d=[];let f;const g=n("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(f=g.exec(u))!==null;){let[,p,A,w]=f;if(p=parseInt(p,10),p in d){if(p===0)break;continue}d[p]=[A,w]}const y=[];for(let p=0;p<d.length&&p in d;++p){let[A,w]=d[p];w=l(w),A&&(w=unescape(w),p===0&&(w=c(w))),y.push(w)}return y.join("")}function l(u){if(u.startsWith('"')){const d=u.slice(1).split('\\"');for(let f=0;f<d.length;++f){const g=d[f].indexOf('"');g!==-1&&(d[f]=d[f].slice(0,g),d.length=f+1),d[f]=d[f].replaceAll(/\\(.)/g,"$1")}u=d.join('"')}return u}function c(u){const d=u.indexOf("'");if(d===-1)return u;const f=u.slice(0,d),y=u.slice(d+1).replace(/^[^']*'/,"");return s(f,y)}function h(u){return!u.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(u)?u:u.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(d,f,g,y){if(g==="q"||g==="Q")return y=y.replaceAll("_"," "),y=y.replaceAll(/=([0-9a-fA-F]{2})/g,function(p,A){return String.fromCharCode(parseInt(A,16))}),s(f,y);try{y=atob(y)}catch{}return s(f,y)})}return""}function L0(i,t){const e=new Headers;if(!i||!t||typeof t!="object")return e;for(const n in t){const s=t[n];s!==void 0&&e.append(n,s)}return e}function qd(i){var t;return((t=URL.parse(i))==null?void 0:t.origin)??null}function M0({responseHeaders:i,isHttp:t,rangeChunkSize:e,disableRange:n}){const s={allowRangeRequests:!1,suggestedLength:void 0},r=parseInt(i.get("Content-Length"),10);return!Number.isInteger(r)||(s.suggestedLength=r,r<=2*e)||n||!t||i.get("Accept-Ranges")!=="bytes"||(i.get("Content-Encoding")||"identity")!=="identity"||(s.allowRangeRequests=!0),s}function O0(i){const t=i.get("Content-Disposition");if(t){let e=Q_(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch{}if(Wd(e))return e}return null}function Qh(i,t){return new hc(`Unexpected server response (${i}) while retrieving PDF "${t}".`,i,i===404||i===0&&t.startsWith("file:"))}function D0(i){return i===200||i===206}function N0(i,t,e){return{method:"GET",headers:i,signal:e.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function F0(i){return i instanceof Uint8Array?i.buffer:i instanceof ArrayBuffer?i:(lt(`getArrayBuffer - unexpected data format: ${i}`),new Uint8Array(i).buffer)}class Z_{constructor(t){U(this,"_responseOrigin",null);this.source=t,this.isHttp=/^https?:/i.test(t.url),this.headers=L0(this.isHttp,t.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}getFullReader(){return ce(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new tx(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new ex(this,t,e);return this._rangeRequestReaders.push(n),n}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const n of this._rangeRequestReaders.slice(0))n.cancel(t)}}class tx{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;const e=t.source;this._withCredentials=e.withCredentials||!1,this._contentLength=e.length,this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange;const n=new Headers(t.headers),s=e.url;fetch(s,N0(n,this._withCredentials,this._abortController)).then(r=>{if(t._responseOrigin=qd(r.url),!D0(r.status))throw Qh(r.status,s);this._reader=r.body.getReader(),this._headersCapability.resolve();const o=r.headers,{allowRangeRequests:l,suggestedLength:c}=M0({responseHeaders:o,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=l,this._contentLength=c||this._contentLength,this._filename=O0(o),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Si("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;await this._headersCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded,total:this._contentLength}),{value:F0(t),done:!1})}cancel(t){var e;(e=this._reader)==null||e.cancel(t),this._abortController.abort()}}class ex{constructor(t,e,n){this._stream=t,this._reader=null,this._loaded=0;const s=t.source;this._withCredentials=s.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!s.disableStream,this._abortController=new AbortController;const r=new Headers(t.headers);r.append("Range",`bytes=${e}-${n-1}`);const o=s.url;fetch(o,N0(r,this._withCredentials,this._abortController)).then(l=>{const c=qd(l.url);if(c!==t._responseOrigin)throw new Error(`Expected range response-origin "${c}" to match "${t._responseOrigin}".`);if(!D0(l.status))throw Qh(l.status,o);this._readCapability.resolve(),this._reader=l.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;await this._readCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded}),{value:F0(t),done:!1})}cancel(t){var e;(e=this._reader)==null||e.cancel(t),this._abortController.abort()}}const bf=200,vf=206;function nx(i){const t=i.response;return typeof t!="string"?t:Xh(t).buffer}class sx{constructor({url:t,httpHeaders:e,withCredentials:n}){U(this,"_responseOrigin",null);this.url=t,this.isHttp=/^https?:/i.test(t),this.headers=L0(this.isHttp,e),this.withCredentials=n||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(t){const e=new XMLHttpRequest,n=this.currXhrId++,s=this.pendingRequests[n]={xhr:e};e.open("GET",this.url),e.withCredentials=this.withCredentials;for(const[r,o]of this.headers)e.setRequestHeader(r,o);return this.isHttp&&"begin"in t&&"end"in t?(e.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),s.expectedStatus=vf):s.expectedStatus=bf,e.responseType="arraybuffer",ce(t.onError,"Expected `onError` callback to be provided."),e.onerror=()=>{t.onError(e.status)},e.onreadystatechange=this.onStateChange.bind(this,n),e.onprogress=this.onProgress.bind(this,n),s.onHeadersReceived=t.onHeadersReceived,s.onDone=t.onDone,s.onError=t.onError,s.onProgress=t.onProgress,e.send(null),n}onProgress(t,e){var s;const n=this.pendingRequests[t];n&&((s=n.onProgress)==null||s.call(n,e))}onStateChange(t,e){const n=this.pendingRequests[t];if(!n)return;const s=n.xhr;if(s.readyState>=2&&n.onHeadersReceived&&(n.onHeadersReceived(),delete n.onHeadersReceived),s.readyState!==4||!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],s.status===0&&this.isHttp){n.onError(s.status);return}const r=s.status||bf;if(!(r===bf&&n.expectedStatus===vf)&&r!==n.expectedStatus){n.onError(s.status);return}const l=nx(s);if(r===vf){const c=s.getResponseHeader("Content-Range"),h=/bytes (\d+)-(\d+)\/(\d+)/.exec(c);h?n.onDone({begin:parseInt(h[1],10),chunk:l}):(lt('Missing or invalid "Content-Range" header.'),n.onError(0))}else l?n.onDone({begin:0,chunk:l}):n.onError(s.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){const e=this.pendingRequests[t].xhr;delete this.pendingRequests[t],e.abort()}}class ix{constructor(t){this._source=t,this._manager=new sx(t),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){const e=this._rangeRequestReaders.indexOf(t);e>=0&&this._rangeRequestReaders.splice(e,1)}getFullReader(){return ce(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new rx(this._manager,this._source),this._fullRequestReader}getRangeReader(t,e){const n=new ox(this._manager,t,e);return n.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(n),n}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const n of this._rangeRequestReaders.slice(0))n.cancel(t)}}class rx{constructor(t,e){this._manager=t,this._url=e.url,this._fullRequestId=t.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._contentLength=e.length,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const t=this._fullRequestId,e=this._manager.getRequestXhr(t);this._manager._responseOrigin=qd(e.responseURL);const n=e.getAllResponseHeaders(),s=new Headers(n?n.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(l=>{const[c,...h]=l.split(": ");return[c,h.join(": ")]}):[]),{allowRangeRequests:r,suggestedLength:o}=M0({responseHeaders:s,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});r&&(this._isRangeSupported=!0),this._contentLength=o||this._contentLength,this._filename=O0(s),this._isRangeSupported&&this._manager.abortRequest(t),this._headersCapability.resolve()}_onDone(t){if(t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=Qh(t,this._url),this._headersCapability.reject(this._storedError);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){var e;(e=this.onProgress)==null||e.call(this,{loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersCapability.reject(t);for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class ox{constructor(t,e,n){this._manager=t,this._url=t.url,this._requestId=t.request({begin:e,end:n,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){var e;const t=qd((e=this._manager.getRequestXhr(this._requestId))==null?void 0:e.responseURL);t!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${t}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){var t;(t=this.onClosed)==null||t.call(this,this)}_onDone(t){const e=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunk=e,this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){this._storedError??(this._storedError=Qh(t,this._url));for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){var e;this.isStreamingSupported||(e=this.onProgress)==null||e.call(this,{loaded:t.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const ax=/^[a-z][a-z0-9\-+.]+:/i;function lx(i){if(ax.test(i))return new URL(i);const t=process.getBuiltinModule("url");return new URL(t.pathToFileURL(i))}class cx{constructor(t){this.source=t,this.url=lx(t.url),ce(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}getFullReader(){return ce(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new hx(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new ux(this,t,e);return this._rangeRequestReaders.push(n),n}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const n of this._rangeRequestReaders.slice(0))n.cancel(t)}}class hx{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;const e=t.source;this._contentLength=e.length,this._loaded=0,this._filename=null,this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const n=process.getBuiltinModule("fs");n.promises.lstat(this._url).then(s=>{this._contentLength=s.size,this._setReadableStream(n.createReadStream(this._url)),this._headersCapability.resolve()},s=>{s.code==="ENOENT"&&(s=Qh(0,this._url.href)),this._storedError=s,this._headersCapability.reject(s)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Si("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class ux{constructor(t,e,n){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const s=t.source;this._isStreamingSupported=!s.disableStream;const r=process.getBuiltinModule("fs");this._setReadableStream(r.createReadStream(this._url,{start:e,end:n-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const Pl=Symbol("INITIAL_DATA");var cn,Yc,Ip;class $0{constructor(){b(this,Yc);b(this,cn,Object.create(null))}get(t,e=null){if(e){const s=v(this,Yc,Ip).call(this,t);return s.promise.then(()=>e(s.data)),null}const n=a(this,cn)[t];if(!n||n.data===Pl)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return n.data}has(t){const e=a(this,cn)[t];return!!e&&e.data!==Pl}delete(t){const e=a(this,cn)[t];return!e||e.data===Pl?!1:(delete a(this,cn)[t],!0)}resolve(t,e=null){const n=v(this,Yc,Ip).call(this,t);n.data=e,n.resolve()}clear(){var t;for(const e in a(this,cn)){const{data:n}=a(this,cn)[e];(t=n==null?void 0:n.bitmap)==null||t.close()}m(this,cn,Object.create(null))}*[Symbol.iterator](){for(const t in a(this,cn)){const{data:e}=a(this,cn)[t];e!==Pl&&(yield[t,e])}}}cn=new WeakMap,Yc=new WeakSet,Ip=function(t){var e;return(e=a(this,cn))[t]||(e[t]={...Promise.withResolvers(),data:Pl})};const dx=1e5,dy=30;var qy,Ui,tn,Kc,Jc,Jr,ni,Qc,Zc,Qr,Da,Na,Wi,Fa,th,$a,Zr,eh,nh,Qt,Ba,to,sh,Vi,ja,_i,B0,j0,Lp,_n,ku,Mp,H0,z0;let dc=(Qt=class{constructor({textContentSource:t,container:e,viewport:n}){b(this,_i);b(this,Ui,Promise.withResolvers());b(this,tn,null);b(this,Kc,!1);b(this,Jc,!!((qy=globalThis.FontInspector)!=null&&qy.enabled));b(this,Jr,null);b(this,ni,null);b(this,Qc,0);b(this,Zc,0);b(this,Qr,null);b(this,Da,null);b(this,Na,0);b(this,Wi,0);b(this,Fa,Object.create(null));b(this,th,[]);b(this,$a,null);b(this,Zr,[]);b(this,eh,new WeakMap);b(this,nh,null);var c;if(t instanceof ReadableStream)m(this,$a,t);else if(typeof t=="object")m(this,$a,new ReadableStream({start(h){h.enqueue(t),h.close()}}));else throw new Error('No "textContentSource" parameter specified.');m(this,tn,m(this,Da,e)),m(this,Wi,n.scale*is.pixelRatio),m(this,Na,n.rotation),m(this,ni,{div:null,properties:null,ctx:null});const{pageWidth:s,pageHeight:r,pageX:o,pageY:l}=n.rawDims;m(this,nh,[1,0,0,-1,-o,l+r]),m(this,Zc,s),m(this,Qc,r),v(c=Qt,_n,H0).call(c),fr(e,n),a(this,Ui).promise.finally(()=>{a(Qt,ja).delete(this),m(this,ni,null),m(this,Fa,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:t,isFirefox:e}=we.platform;return mt(this,"fontFamilyMap",new Map([["sans-serif",`${t&&e?"Calibri, ":""}sans-serif`],["monospace",`${t&&e?"Lucida Console, ":""}monospace`]]))}render(){const t=()=>{a(this,Qr).read().then(({value:e,done:n})=>{if(n){a(this,Ui).resolve();return}a(this,Jr)??m(this,Jr,e.lang),Object.assign(a(this,Fa),e.styles),v(this,_i,B0).call(this,e.items),t()},a(this,Ui).reject)};return m(this,Qr,a(this,$a).getReader()),a(Qt,ja).add(this),t(),a(this,Ui).promise}update({viewport:t,onBefore:e=null}){var r;const n=t.scale*is.pixelRatio,s=t.rotation;if(s!==a(this,Na)&&(e==null||e(),m(this,Na,s),fr(a(this,Da),{rotation:s})),n!==a(this,Wi)){e==null||e(),m(this,Wi,n);const o={div:null,properties:null,ctx:v(r=Qt,_n,ku).call(r,a(this,Jr))};for(const l of a(this,Zr))o.properties=a(this,eh).get(l),o.div=l,v(this,_i,Lp).call(this,o)}}cancel(){var e;const t=new Si("TextLayer task cancelled.");(e=a(this,Qr))==null||e.cancel(t).catch(()=>{}),m(this,Qr,null),a(this,Ui).reject(t)}get textDivs(){return a(this,Zr)}get textContentItemsStr(){return a(this,th)}static cleanup(){if(!(a(this,ja).size>0)){a(this,Ba).clear();for(const{canvas:t}of a(this,to).values())t.remove();a(this,to).clear()}}},Ui=new WeakMap,tn=new WeakMap,Kc=new WeakMap,Jc=new WeakMap,Jr=new WeakMap,ni=new WeakMap,Qc=new WeakMap,Zc=new WeakMap,Qr=new WeakMap,Da=new WeakMap,Na=new WeakMap,Wi=new WeakMap,Fa=new WeakMap,th=new WeakMap,$a=new WeakMap,Zr=new WeakMap,eh=new WeakMap,nh=new WeakMap,Ba=new WeakMap,to=new WeakMap,sh=new WeakMap,Vi=new WeakMap,ja=new WeakMap,_i=new WeakSet,B0=function(t){var s,r;if(a(this,Kc))return;(r=a(this,ni)).ctx??(r.ctx=v(s=Qt,_n,ku).call(s,a(this,Jr)));const e=a(this,Zr),n=a(this,th);for(const o of t){if(e.length>dx){lt("Ignoring additional textDivs for performance reasons."),m(this,Kc,!0);return}if(o.str===void 0){if(o.type==="beginMarkedContentProps"||o.type==="beginMarkedContent"){const l=a(this,tn);m(this,tn,document.createElement("span")),a(this,tn).classList.add("markedContent"),o.id!==null&&a(this,tn).setAttribute("id",`${o.id}`),l.append(a(this,tn))}else o.type==="endMarkedContent"&&m(this,tn,a(this,tn).parentNode);continue}n.push(o.str),v(this,_i,j0).call(this,o)}},j0=function(t){var p;const e=document.createElement("span"),n={angle:0,canvasWidth:0,hasText:t.str!=="",hasEOL:t.hasEOL,fontSize:0};a(this,Zr).push(e);const s=et.transform(a(this,nh),t.transform);let r=Math.atan2(s[1],s[0]);const o=a(this,Fa)[t.fontName];o.vertical&&(r+=Math.PI/2);let l=a(this,Jc)&&o.fontSubstitution||o.fontFamily;l=Qt.fontFamilyMap.get(l)||l;const c=Math.hypot(s[2],s[3]),h=c*v(p=Qt,_n,z0).call(p,l,o,a(this,Jr));let u,d;r===0?(u=s[4],d=s[5]-h):(u=s[4]+h*Math.sin(r),d=s[5]-h*Math.cos(r));const f="calc(var(--total-scale-factor) *",g=e.style;a(this,tn)===a(this,Da)?(g.left=`${(100*u/a(this,Zc)).toFixed(2)}%`,g.top=`${(100*d/a(this,Qc)).toFixed(2)}%`):(g.left=`${f}${u.toFixed(2)}px)`,g.top=`${f}${d.toFixed(2)}px)`),g.fontSize=`${f}${(a(Qt,Vi)*c).toFixed(2)}px)`,g.fontFamily=l,n.fontSize=c,e.setAttribute("role","presentation"),e.textContent=t.str,e.dir=t.dir,a(this,Jc)&&(e.dataset.fontName=o.fontSubstitutionLoadedName||t.fontName),r!==0&&(n.angle=r*(180/Math.PI));let y=!1;if(t.str.length>1)y=!0;else if(t.str!==" "&&t.transform[0]!==t.transform[3]){const A=Math.abs(t.transform[0]),w=Math.abs(t.transform[3]);A!==w&&Math.max(A,w)/Math.min(A,w)>1.5&&(y=!0)}if(y&&(n.canvasWidth=o.vertical?t.height:t.width),a(this,eh).set(e,n),a(this,ni).div=e,a(this,ni).properties=n,v(this,_i,Lp).call(this,a(this,ni)),n.hasText&&a(this,tn).append(e),n.hasEOL){const A=document.createElement("br");A.setAttribute("role","presentation"),a(this,tn).append(A)}},Lp=function(t){var l;const{div:e,properties:n,ctx:s}=t,{style:r}=e;let o="";if(a(Qt,Vi)>1&&(o=`scale(${1/a(Qt,Vi)})`),n.canvasWidth!==0&&n.hasText){const{fontFamily:c}=r,{canvasWidth:h,fontSize:u}=n;v(l=Qt,_n,Mp).call(l,s,u*a(this,Wi),c);const{width:d}=s.measureText(e.textContent);d>0&&(o=`scaleX(${h*a(this,Wi)/d}) ${o}`)}n.angle!==0&&(o=`rotate(${n.angle}deg) ${o}`),o.length>0&&(r.transform=o)},_n=new WeakSet,ku=function(t=null){let e=a(this,to).get(t||(t=""));if(!e){const n=document.createElement("canvas");n.className="hiddenCanvasElement",n.lang=t,document.body.append(n),e=n.getContext("2d",{alpha:!1,willReadFrequently:!0}),a(this,to).set(t,e),a(this,sh).set(e,{size:0,family:""})}return e},Mp=function(t,e,n){const s=a(this,sh).get(t);e===s.size&&n===s.family||(t.font=`${e}px ${n}`,s.size=e,s.family=n)},H0=function(){if(a(this,Vi)!==null)return;const t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.style.position="absolute",t.textContent="X",document.body.append(t),m(this,Vi,t.getBoundingClientRect().height),t.remove()},z0=function(t,e,n){const s=a(this,Ba).get(t);if(s)return s;const r=v(this,_n,ku).call(this,n);r.canvas.width=r.canvas.height=dy,v(this,_n,Mp).call(this,r,dy,t);const o=r.measureText(""),l=o.fontBoundingBoxAscent,c=Math.abs(o.fontBoundingBoxDescent);r.canvas.width=r.canvas.height=0;let h=.8;return l?h=l/(l+c):(we.platform.isFirefox&&lt("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),e.ascent?h=e.ascent:e.descent&&(h=1+e.descent)),a(this,Ba).set(t,h),h},b(Qt,_n),b(Qt,Ba,new Map),b(Qt,to,new Map),b(Qt,sh,new WeakMap),b(Qt,Vi,null),b(Qt,ja,new Set),Qt);class fc{static textContent(t){const e=[],n={items:e,styles:Object.create(null)};function s(r){var c;if(!r)return;let o=null;const l=r.name;if(l==="#text")o=r.value;else if(fc.shouldBuildText(l))(c=r==null?void 0:r.attributes)!=null&&c.textContent?o=r.attributes.textContent:r.value&&(o=r.value);else return;if(o!==null&&e.push({str:o}),!!r.children)for(const h of r.children)s(h)}return s(t),n}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}}const fx=100;function Wg(i={}){typeof i=="string"||i instanceof URL?i={url:i}:(i instanceof ArrayBuffer||ArrayBuffer.isView(i))&&(i={data:i});const t=new Op,{docId:e}=t,n=i.url?E_(i.url):null,s=i.data?__(i.data):null,r=i.httpHeaders||null,o=i.withCredentials===!0,l=i.password??null,c=i.range instanceof Vg?i.range:null,h=Number.isInteger(i.rangeChunkSize)&&i.rangeChunkSize>0?i.rangeChunkSize:2**16;let u=i.worker instanceof wl?i.worker:null;const d=i.verbosity,f=typeof i.docBaseUrl=="string"&&!Kh(i.docBaseUrl)?i.docBaseUrl:null,g=cu(i.cMapUrl),y=i.cMapPacked!==!1,p=i.CMapReaderFactory||(qe?I_:ty),A=cu(i.iccUrl),w=cu(i.standardFontDataUrl),T=i.StandardFontDataFactory||(qe?L_:ey),x=cu(i.wasmUrl),_=i.WasmFactory||(qe?M_:ny),E=i.stopAtErrors!==!0,R=Number.isInteger(i.maxImageSize)&&i.maxImageSize>-1?i.maxImageSize:-1,P=i.isEvalSupported!==!1,L=typeof i.isOffscreenCanvasSupported=="boolean"?i.isOffscreenCanvasSupported:!qe,O=typeof i.isImageDecoderSupported=="boolean"?i.isImageDecoderSupported:!qe&&(we.platform.isFirefox||!globalThis.chrome),S=Number.isInteger(i.canvasMaxAreaInBytes)?i.canvasMaxAreaInBytes:-1,I=typeof i.disableFontFace=="boolean"?i.disableFontFace:qe,B=i.fontExtraProperties===!0,H=i.enableXfa===!0,W=i.ownerDocument||globalThis.document,X=i.disableRange===!0,j=i.disableStream===!0,z=i.disableAutoFetch===!0,ct=i.pdfBug===!0,D=i.CanvasFactory||(qe?k_:T_),C=i.FilterFactory||(qe?P_:R_),k=i.enableHWA===!0,$=i.useWasm!==!1,N=c?c.length:i.length??NaN,V=typeof i.useSystemFonts=="boolean"?i.useSystemFonts:!qe&&!I,nt=typeof i.useWorkerFetch=="boolean"?i.useWorkerFetch:!!(p===ty&&T===ey&&_===ny&&g&&w&&x&&Dl(g,document.baseURI)&&Dl(w,document.baseURI)&&Dl(x,document.baseURI)),Y=null;r_(d);const it={canvasFactory:new D({ownerDocument:W,enableHWA:k}),filterFactory:new C({docId:e,ownerDocument:W}),cMapReaderFactory:nt?null:new p({baseUrl:g,isCompressed:y}),standardFontDataFactory:nt?null:new T({baseUrl:w}),wasmFactory:nt?null:new _({baseUrl:x})};u||(u=wl.create({verbosity:d,port:Fn.workerPort}),t._worker=u);const ot={docId:e,apiVersion:"5.3.31",data:s,password:l,disableAutoFetch:z,rangeChunkSize:h,length:N,docBaseUrl:f,enableXfa:H,evaluatorOptions:{maxImageSize:R,disableFontFace:I,ignoreErrors:E,isEvalSupported:P,isOffscreenCanvasSupported:L,isImageDecoderSupported:O,canvasMaxAreaInBytes:S,fontExtraProperties:B,useSystemFonts:V,useWasm:$,useWorkerFetch:nt,cMapUrl:g,iccUrl:A,standardFontDataUrl:w,wasmUrl:x}},st={ownerDocument:W,pdfBug:ct,styleElement:Y,loadingParams:{disableAutoFetch:z,enableXfa:H}};return u.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(u.destroyed)throw new Error("Worker was destroyed");const Z=u.messageHandler.sendWithPromise("GetDocRequest",ot,s?[s.buffer]:null);let bt;if(c)bt=new Y_(c,{disableRange:X,disableStream:j});else if(!s){if(!n)throw new Error("getDocument - no `url` parameter provided.");const zt=Dl(n)?Z_:qe?cx:ix;bt=new zt({url:n,length:N,httpHeaders:r,withCredentials:o,rangeChunkSize:h,disableRange:X,disableStream:j})}return Z.then(zt=>{if(t.destroyed)throw new Error("Loading aborted");if(u.destroyed)throw new Error("Worker was destroyed");const xt=new jl(e,zt,u.port),ut=new mx(xt,t,bt,st,it);t._transport=ut,xt.send("Ready",null)})}).catch(t._capability.reject),t}var bd;const vd=class vd{constructor(){U(this,"_capability",Promise.withResolvers());U(this,"_transport",null);U(this,"_worker",null);U(this,"docId",`d${He(vd,bd)._++}`);U(this,"destroyed",!1);U(this,"onPassword",null);U(this,"onProgress",null)}get promise(){return this._capability.promise}async destroy(){var t,e,n,s;this.destroyed=!0;try{(t=this._worker)!=null&&t.port&&(this._worker._pendingDestroy=!0),await((e=this._transport)==null?void 0:e.destroy())}catch(r){throw(n=this._worker)!=null&&n.port&&delete this._worker._pendingDestroy,r}this._transport=null,(s=this._worker)==null||s.destroy(),this._worker=null}async getData(){return this._transport.getData()}};bd=new WeakMap,b(vd,bd,0);let Op=vd;var eo,ih,rh,oh,ah,Xy;let Vg=(Xy=class{constructor(t,e,n=!1,s=null){b(this,eo,Promise.withResolvers());b(this,ih,[]);b(this,rh,[]);b(this,oh,[]);b(this,ah,[]);this.length=t,this.initialData=e,this.progressiveDone=n,this.contentDispositionFilename=s}addRangeListener(t){a(this,ah).push(t)}addProgressListener(t){a(this,oh).push(t)}addProgressiveReadListener(t){a(this,rh).push(t)}addProgressiveDoneListener(t){a(this,ih).push(t)}onDataRange(t,e){for(const n of a(this,ah))n(t,e)}onDataProgress(t,e){a(this,eo).promise.then(()=>{for(const n of a(this,oh))n(t,e)})}onDataProgressiveRead(t){a(this,eo).promise.then(()=>{for(const e of a(this,rh))e(t)})}onDataProgressiveDone(){a(this,eo).promise.then(()=>{for(const t of a(this,ih))t()})}transportReady(){a(this,eo).resolve()}requestDataRange(t,e){Lt("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}},eo=new WeakMap,ih=new WeakMap,rh=new WeakMap,oh=new WeakMap,ah=new WeakMap,Xy);class px{constructor(t,e){this._pdfInfo=t,this._transport=e}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return mt(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(e)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var si,no,Wl;class gx{constructor(t,e,n,s=!1){b(this,no);b(this,si,!1);this._pageIndex=t,this._pageInfo=e,this._transport=n,this._stats=s?new Jm:null,this._pdfBug=s,this.commonObjs=n.commonObjs,this.objs=new $0,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:e=this.rotate,offsetX:n=0,offsetY:s=0,dontFlip:r=!1}={}){return new Yh({viewBox:this.view,userUnit:this.userUnit,scale:t,rotation:e,offsetX:n,offsetY:s,dontFlip:r})}getAnnotations({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,e)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return mt(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var t;return((t=this._transport._htmlForXfa)==null?void 0:t.children[this._pageIndex])||null}render({canvasContext:t,viewport:e,intent:n="display",annotationMode:s=ks.ENABLE,transform:r=null,background:o=null,optionalContentConfigPromise:l=null,annotationCanvasMap:c=null,pageColors:h=null,printAnnotationStorage:u=null,isEditing:d=!1}){var _,E;(_=this._stats)==null||_.time("Overall");const f=this._transport.getRenderingIntent(n,s,u,d),{renderingIntent:g,cacheKey:y}=f;m(this,si,!1),l||(l=this._transport.getOptionalContentConfig(g));let p=this._intentStates.get(y);p||(p=Object.create(null),this._intentStates.set(y,p)),p.streamReaderCancelTimeout&&(clearTimeout(p.streamReaderCancelTimeout),p.streamReaderCancelTimeout=null);const A=!!(g&vn.PRINT);p.displayReadyCapability||(p.displayReadyCapability=Promise.withResolvers(),p.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(E=this._stats)==null||E.time("Page Request"),this._pumpOperatorList(f));const w=R=>{var P;p.renderTasks.delete(T),A&&m(this,si,!0),v(this,no,Wl).call(this),R?(T.capability.reject(R),this._abortOperatorList({intentState:p,reason:R instanceof Error?R:new Error(R)})):T.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(P=globalThis.Stats)!=null&&P.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},T=new Dp({callback:w,params:{canvasContext:t,viewport:e,transform:r,background:o},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:c,operatorList:p.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!A,pdfBug:this._pdfBug,pageColors:h});(p.renderTasks||(p.renderTasks=new Set)).add(T);const x=T.task;return Promise.all([p.displayReadyCapability.promise,l]).then(([R,P])=>{var L;if(this.destroyed){w();return}if((L=this._stats)==null||L.time("Rendering"),!(P.renderingIntent&g))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");T.initializeGraphics({transparency:R,optionalContentConfig:P}),T.operatorListChanged()}).catch(w),x}getOperatorList({intent:t="display",annotationMode:e=ks.ENABLE,printAnnotationStorage:n=null,isEditing:s=!1}={}){var h;function r(){l.operatorList.lastChunk&&(l.opListReadCapability.resolve(l.operatorList),l.renderTasks.delete(c))}const o=this._transport.getRenderingIntent(t,e,n,s,!0);let l=this._intentStates.get(o.cacheKey);l||(l=Object.create(null),this._intentStates.set(o.cacheKey,l));let c;return l.opListReadCapability||(c=Object.create(null),c.operatorListChanged=r,l.opListReadCapability=Promise.withResolvers(),(l.renderTasks||(l.renderTasks=new Set)).add(c),l.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(h=this._stats)==null||h.time("Page Request"),this._pumpOperatorList(o)),l.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:e=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:e===!0},{highWaterMark:100,size(s){return s.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(n=>fc.textContent(n));const e=this.streamTextContent(t);return new Promise(function(n,s){function r(){o.read().then(function({value:c,done:h}){if(h){n(l);return}l.lang??(l.lang=c.lang),Object.assign(l.styles,c.styles),l.items.push(...c.items),r()},s)}const o=e.getReader(),l={items:[],styles:Object.create(null),lang:null};r()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const e of this._intentStates.values())if(this._abortOperatorList({intentState:e,reason:new Error("Page was destroyed."),force:!0}),!e.opListReadCapability)for(const n of e.renderTasks)t.push(n.completed),n.cancel();return this.objs.clear(),m(this,si,!1),Promise.all(t)}cleanup(t=!1){m(this,si,!0);const e=v(this,no,Wl).call(this);return t&&e&&this._stats&&(this._stats=new Jm),e}_startRenderPage(t,e){var s,r;const n=this._intentStates.get(e);n&&((s=this._stats)==null||s.timeEnd("Page Request"),(r=n.displayReadyCapability)==null||r.resolve(t))}_renderPageChunk(t,e){for(let n=0,s=t.length;n<s;n++)e.operatorList.fnArray.push(t.fnArray[n]),e.operatorList.argsArray.push(t.argsArray[n]);e.operatorList.lastChunk=t.lastChunk,e.operatorList.separateAnnots=t.separateAnnots;for(const n of e.renderTasks)n.operatorListChanged();t.lastChunk&&v(this,no,Wl).call(this)}_pumpOperatorList({renderingIntent:t,cacheKey:e,annotationStorageSerializable:n,modifiedIds:s}){const{map:r,transfer:o}=n,c=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:e,annotationStorage:r,modifiedIds:s},o).getReader(),h=this._intentStates.get(e);h.streamReader=c;const u=()=>{c.read().then(({value:d,done:f})=>{if(f){h.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(d,h),u())},d=>{if(h.streamReader=null,!this._transport.destroyed){if(h.operatorList){h.operatorList.lastChunk=!0;for(const f of h.renderTasks)f.operatorListChanged();v(this,no,Wl).call(this)}if(h.displayReadyCapability)h.displayReadyCapability.reject(d);else if(h.opListReadCapability)h.opListReadCapability.reject(d);else throw d}})};u()}_abortOperatorList({intentState:t,reason:e,force:n=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!n){if(t.renderTasks.size>0)return;if(e instanceof Ud){let s=fx;e.extraDelay>0&&e.extraDelay<1e3&&(s+=e.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:e,force:!0})},s);return}}if(t.streamReader.cancel(new Si(e.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[s,r]of this._intentStates)if(r===t){this._intentStates.delete(s);break}this.cleanup()}}}get stats(){return this._stats}}si=new WeakMap,no=new WeakSet,Wl=function(){if(!a(this,si)||this.destroyed)return!1;for(const{renderTasks:t,operatorList:e}of this._intentStates.values())if(t.size>0||!e.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),m(this,si,!1),!0};var qi,Vn,ii,so,Ad,io,ro,Xe,Iu,G0,U0,Vl,Ha,Lu;const Ut=class Ut{constructor({name:t=null,port:e=null,verbosity:n=o_()}={}){b(this,Xe);b(this,qi,Promise.withResolvers());b(this,Vn,null);b(this,ii,null);b(this,so,null);if(this.name=t,this.destroyed=!1,this.verbosity=n,e){if(a(Ut,ro).has(e))throw new Error("Cannot use more than one PDFWorker per port.");a(Ut,ro).set(e,this),v(this,Xe,G0).call(this,e)}else v(this,Xe,U0).call(this)}get promise(){return a(this,qi).promise}get port(){return a(this,ii)}get messageHandler(){return a(this,Vn)}destroy(){var t,e;this.destroyed=!0,(t=a(this,so))==null||t.terminate(),m(this,so,null),a(Ut,ro).delete(a(this,ii)),m(this,ii,null),(e=a(this,Vn))==null||e.destroy(),m(this,Vn,null)}static create(t){const e=a(this,ro).get(t==null?void 0:t.port);if(e){if(e._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return e}return new Ut(t)}static get workerSrc(){if(Fn.workerSrc)return Fn.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return mt(this,"_setupFakeWorkerGlobal",(async()=>a(this,Ha,Lu)?a(this,Ha,Lu):(await import(this.workerSrc)).WorkerMessageHandler)())}};qi=new WeakMap,Vn=new WeakMap,ii=new WeakMap,so=new WeakMap,Ad=new WeakMap,io=new WeakMap,ro=new WeakMap,Xe=new WeakSet,Iu=function(){a(this,qi).resolve(),a(this,Vn).send("configure",{verbosity:this.verbosity})},G0=function(t){m(this,ii,t),m(this,Vn,new jl("main","worker",t)),a(this,Vn).on("ready",()=>{}),v(this,Xe,Iu).call(this)},U0=function(){if(a(Ut,io)||a(Ut,Ha,Lu)){v(this,Xe,Vl).call(this);return}let{workerSrc:t}=Ut;try{Ut._isSameOrigin(window.location,t)||(t=Ut._createCDNWrapper(new URL(t,window.location).href));const e=new Worker(t,{type:"module"}),n=new jl("main","worker",e),s=()=>{r.abort(),n.destroy(),e.terminate(),this.destroyed?a(this,qi).reject(new Error("Worker was destroyed")):v(this,Xe,Vl).call(this)},r=new AbortController;e.addEventListener("error",()=>{a(this,so)||s()},{signal:r.signal}),n.on("test",l=>{if(r.abort(),this.destroyed||!l){s();return}m(this,Vn,n),m(this,ii,e),m(this,so,e),v(this,Xe,Iu).call(this)}),n.on("ready",l=>{if(r.abort(),this.destroyed){s();return}try{o()}catch{v(this,Xe,Vl).call(this)}});const o=()=>{const l=new Uint8Array;n.send("test",l,[l.buffer])};o();return}catch{Gd("The worker has been disabled.")}v(this,Xe,Vl).call(this)},Vl=function(){a(Ut,io)||(lt("Setting up fake worker."),m(Ut,io,!0)),Ut._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){a(this,qi).reject(new Error("Worker was destroyed"));return}const e=new C_;m(this,ii,e);const n=`fake${He(Ut,Ad)._++}`,s=new jl(n+"_worker",n,e);t.setup(s,e),m(this,Vn,new jl(n,n+"_worker",e)),v(this,Xe,Iu).call(this)}).catch(t=>{a(this,qi).reject(new Error(`Setting up fake worker failed: "${t.message}".`))})},Ha=new WeakSet,Lu=function(){var t;try{return((t=globalThis.pdfjsWorker)==null?void 0:t.WorkerMessageHandler)||null}catch{return null}},b(Ut,Ha),b(Ut,Ad,0),b(Ut,io,!1),b(Ut,ro,new WeakMap),qe&&(m(Ut,io,!0),Fn.workerSrc||(Fn.workerSrc="./pdf.worker.mjs")),Ut._isSameOrigin=(t,e)=>{const n=URL.parse(t);if(!(n!=null&&n.origin)||n.origin==="null")return!1;const s=new URL(e,n);return n.origin===s.origin},Ut._createCDNWrapper=t=>{const e=`await import("${t}");`;return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))},Ut.fromPort=t=>{if(g_("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!(t!=null&&t.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return Ut.create(t)};let wl=Ut;var ri,vs,za,Ga,oi,oo,ql;class mx{constructor(t,e,n,s,r){b(this,oo);b(this,ri,new Map);b(this,vs,new Map);b(this,za,new Map);b(this,Ga,new Map);b(this,oi,null);this.messageHandler=t,this.loadingTask=e,this.commonObjs=new $0,this.fontLoader=new w_({ownerDocument:s.ownerDocument,styleElement:s.styleElement}),this.loadingParams=s.loadingParams,this._params=s,this.canvasFactory=r.canvasFactory,this.filterFactory=r.filterFactory,this.cMapReaderFactory=r.cMapReaderFactory,this.standardFontDataFactory=r.standardFontDataFactory,this.wasmFactory=r.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=n,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}get annotationStorage(){return mt(this,"annotationStorage",new zg)}getRenderingIntent(t,e=ks.ENABLE,n=null,s=!1,r=!1){let o=vn.DISPLAY,l=wp;switch(t){case"any":o=vn.ANY;break;case"display":break;case"print":o=vn.PRINT;break;default:lt(`getRenderingIntent - invalid intent: ${t}`)}const c=o&vn.PRINT&&n instanceof w0?n:this.annotationStorage;switch(e){case ks.DISABLE:o+=vn.ANNOTATIONS_DISABLE;break;case ks.ENABLE:break;case ks.ENABLE_FORMS:o+=vn.ANNOTATIONS_FORMS;break;case ks.ENABLE_STORAGE:o+=vn.ANNOTATIONS_STORAGE,l=c.serializable;break;default:lt(`getRenderingIntent - invalid annotationMode: ${e}`)}s&&(o+=vn.IS_EDITING),r&&(o+=vn.OPLIST);const{ids:h,hash:u}=c.modifiedIds,d=[o,l.hash,u];return{renderingIntent:o,cacheKey:d.join("_"),annotationStorageSerializable:l,modifiedIds:h}}destroy(){var n;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(n=a(this,oi))==null||n.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const s of a(this,vs).values())t.push(s._destroy());a(this,vs).clear(),a(this,za).clear(),a(this,Ga).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const e=this.messageHandler.sendWithPromise("Terminate",null);return t.push(e),Promise.all(t).then(()=>{var s,r;this.commonObjs.clear(),this.fontLoader.clear(),a(this,ri).clear(),this.filterFactory.destroy(),dc.cleanup(),(s=this._networkStream)==null||s.cancelAllRequests(new Si("Worker was terminated.")),(r=this.messageHandler)==null||r.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:e}=this;t.on("GetReader",(n,s)=>{ce(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=r=>{this._lastProgress={loaded:r.loaded,total:r.total}},s.onPull=()=>{this._fullReader.read().then(function({value:r,done:o}){if(o){s.close();return}ce(r instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(r),1,[r])}).catch(r=>{s.error(r)})},s.onCancel=r=>{this._fullReader.cancel(r),s.ready.catch(o=>{if(!this.destroyed)throw o})}}),t.on("ReaderHeadersReady",async n=>{var l;await this._fullReader.headersReady;const{isStreamingSupported:s,isRangeSupported:r,contentLength:o}=this._fullReader;return(!s||!r)&&(this._lastProgress&&((l=e.onProgress)==null||l.call(e,this._lastProgress)),this._fullReader.onProgress=c=>{var h;(h=e.onProgress)==null||h.call(e,{loaded:c.loaded,total:c.total})}),{isStreamingSupported:s,isRangeSupported:r,contentLength:o}}),t.on("GetRangeReader",(n,s)=>{ce(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const r=this._networkStream.getRangeReader(n.begin,n.end);if(!r){s.close();return}s.onPull=()=>{r.read().then(function({value:o,done:l}){if(l){s.close();return}ce(o instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{s.error(o)})},s.onCancel=o=>{r.cancel(o),s.ready.catch(l=>{if(!this.destroyed)throw l})}}),t.on("GetDoc",({pdfInfo:n})=>{this._numPages=n.numPages,this._htmlForXfa=n.htmlForXfa,delete n.htmlForXfa,e._capability.resolve(new px(n,this))}),t.on("DocException",n=>{e._capability.reject(Je(n))}),t.on("PasswordRequest",n=>{m(this,oi,Promise.withResolvers());try{if(!e.onPassword)throw Je(n);const s=r=>{r instanceof Error?a(this,oi).reject(r):a(this,oi).resolve({password:r})};e.onPassword(s,n.code)}catch(s){a(this,oi).reject(s)}return a(this,oi).promise}),t.on("DataLoaded",n=>{var s;(s=e.onProgress)==null||s.call(e,{loaded:n.length,total:n.length}),this.downloadInfoCapability.resolve(n)}),t.on("StartRenderPage",n=>{if(this.destroyed)return;a(this,vs).get(n.pageIndex)._startRenderPage(n.transparency,n.cacheKey)}),t.on("commonobj",([n,s,r])=>{var o;if(this.destroyed||this.commonObjs.has(n))return null;switch(s){case"Font":if("error"in r){const u=r.error;lt(`Error during font loading: ${u}`),this.commonObjs.resolve(n,u);break}const l=this._params.pdfBug&&((o=globalThis.FontInspector)!=null&&o.enabled)?(u,d)=>globalThis.FontInspector.fontAdded(u,d):null,c=new S_(r,l);this.fontLoader.bind(c).catch(()=>t.sendWithPromise("FontFallback",{id:n})).finally(()=>{!c.fontExtraProperties&&c.data&&(c.data=null),this.commonObjs.resolve(n,c)});break;case"CopyLocalImage":const{imageRef:h}=r;ce(h,"The imageRef must be defined.");for(const u of a(this,vs).values())for(const[,d]of u.objs)if((d==null?void 0:d.ref)===h)return d.dataLen?(this.commonObjs.resolve(n,structuredClone(d)),d.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(n,r);break;default:throw new Error(`Got unknown common object type ${s}`)}return null}),t.on("obj",([n,s,r,o])=>{var c;if(this.destroyed)return;const l=a(this,vs).get(s);if(!l.objs.has(n)){if(l._intentStates.size===0){(c=o==null?void 0:o.bitmap)==null||c.close();return}switch(r){case"Image":case"Pattern":l.objs.resolve(n,o);break;default:throw new Error(`Got unknown object type ${r}`)}}}),t.on("DocProgress",n=>{var s;this.destroyed||(s=e.onProgress)==null||s.call(e,{loaded:n.loaded,total:n.total})}),t.on("FetchBinaryData",async n=>{if(this.destroyed)throw new Error("Worker was destroyed.");const s=this[n.type];if(!s)throw new Error(`${n.type} not initialized, see the \`useWorkerFetch\` parameter.`);return s.fetch(n)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var n;this.annotationStorage.size<=0&&lt("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:t,transfer:e}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:((n=this._fullReader)==null?void 0:n.filename)??null},e).finally(()=>{this.annotationStorage.resetModified()})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const e=t-1,n=a(this,za).get(e);if(n)return n;const s=this.messageHandler.sendWithPromise("GetPage",{pageIndex:e}).then(r=>{if(this.destroyed)throw new Error("Transport destroyed");r.refStr&&a(this,Ga).set(r.refStr,t);const o=new gx(e,r,this,this._params.pdfBug);return a(this,vs).set(e,o),o});return a(this,za).set(e,s),s}getPageIndex(t){return Sp(t)?this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:e})}getFieldObjects(){return v(this,oo,ql).call(this,"GetFieldObjects")}hasJSActions(){return v(this,oo,ql).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return v(this,oo,ql).call(this,"GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return v(this,oo,ql).call(this,"GetOptionalContentConfig").then(e=>new X_(e,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",e=a(this,ri).get(t);if(e)return e;const n=this.messageHandler.sendWithPromise(t,null).then(s=>{var r,o;return{info:s[0],metadata:s[1]?new V_(s[1]):null,contentDispositionFilename:((r=this._fullReader)==null?void 0:r.filename)??null,contentLength:((o=this._fullReader)==null?void 0:o.contentLength)??null}});return a(this,ri).set(t,n),n}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const e of a(this,vs).values())if(!e.cleanup())throw new Error(`startCleanup: Page ${e.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),a(this,ri).clear(),this.filterFactory.destroy(!0),dc.cleanup()}}cachedPageNumber(t){if(!Sp(t))return null;const e=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`;return a(this,Ga).get(e)??null}}ri=new WeakMap,vs=new WeakMap,za=new WeakMap,Ga=new WeakMap,oi=new WeakMap,oo=new WeakSet,ql=function(t,e=null){const n=a(this,ri).get(t);if(n)return n;const s=this.messageHandler.sendWithPromise(t,e);return a(this,ri).set(t,s),s};var Xi;class yx{constructor(t){b(this,Xi,null);U(this,"onContinue",null);U(this,"onError",null);m(this,Xi,t)}get promise(){return a(this,Xi).capability.promise}cancel(t=0){a(this,Xi).cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=a(this,Xi).operatorList;if(!t)return!1;const{annotationCanvasMap:e}=a(this,Xi);return t.form||t.canvas&&(e==null?void 0:e.size)>0}}Xi=new WeakMap;var Yi,ao;const Cr=class Cr{constructor({callback:t,params:e,objs:n,commonObjs:s,annotationCanvasMap:r,operatorList:o,pageIndex:l,canvasFactory:c,filterFactory:h,useRequestAnimationFrame:u=!1,pdfBug:d=!1,pageColors:f=null}){b(this,Yi,null);this.callback=t,this.params=e,this.objs=n,this.commonObjs=s,this.annotationCanvasMap=r,this.operatorListIdx=null,this.operatorList=o,this._pageIndex=l,this.canvasFactory=c,this.filterFactory=h,this._pdfBug=d,this.pageColors=f,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=u===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new yx(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=e.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:e}){var l,c;if(this.cancelled)return;if(this._canvas){if(a(Cr,ao).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");a(Cr,ao).add(this._canvas)}this._pdfBug&&((l=globalThis.StepperManager)!=null&&l.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:n,viewport:s,transform:r,background:o}=this.params;this.gfx=new ha(n,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:e},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:r,viewport:s,transparency:t,background:o}),this.operatorListIdx=0,this.graphicsReady=!0,(c=this.graphicsReadyCallback)==null||c.call(this)}cancel(t=null,e=0){var n,s,r;this.running=!1,this.cancelled=!0,(n=this.gfx)==null||n.endDrawing(),a(this,Yi)&&(window.cancelAnimationFrame(a(this,Yi)),m(this,Yi,null)),a(Cr,ao).delete(this._canvas),t||(t=new Ud(`Rendering cancelled, page ${this._pageIndex+1}`,e)),this.callback(t),(r=(s=this.task).onError)==null||r.call(s,t)}operatorListChanged(){var t;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(t=this.stepper)==null||t.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?m(this,Yi,window.requestAnimationFrame(()=>{m(this,Yi,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),a(Cr,ao).delete(this._canvas),this.callback())))}};Yi=new WeakMap,ao=new WeakMap,b(Cr,ao,new WeakSet);let Dp=Cr;const W0="5.3.31",V0="47ad820d9";function fy(i){return Math.floor(Math.max(0,Math.min(1,i))*255).toString(16).padStart(2,"0")}function kl(i){return Math.max(0,Math.min(255,255*i))}class py{static CMYK_G([t,e,n,s]){return["G",1-Math.min(1,.3*t+.59*n+.11*e+s)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=kl(t),[t,t,t]}static G_HTML([t]){const e=fy(t);return`#${e}${e}${e}`}static RGB_G([t,e,n]){return["G",.3*t+.59*e+.11*n]}static RGB_rgb(t){return t.map(kl)}static RGB_HTML(t){return`#${t.map(fy).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,e,n,s]){return["RGB",1-Math.min(1,t+s),1-Math.min(1,n+s),1-Math.min(1,e+s)]}static CMYK_rgb([t,e,n,s]){return[kl(1-Math.min(1,t+s)),kl(1-Math.min(1,n+s)),kl(1-Math.min(1,e+s))]}static CMYK_HTML(t){const e=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(e)}static RGB_CMYK([t,e,n]){const s=1-t,r=1-e,o=1-n,l=Math.min(s,r,o);return["CMYK",s,r,o,l]}}class bx{create(t,e,n=!1){if(t<=0||e<=0)throw new Error("Invalid SVG dimensions");const s=this._createSVG("svg:svg");return s.setAttribute("version","1.1"),n||(s.setAttribute("width",`${t}px`),s.setAttribute("height",`${e}px`)),s.setAttribute("preserveAspectRatio","none"),s.setAttribute("viewBox",`0 0 ${t} ${e}`),s}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){Lt("Abstract method `_createSVG` called.")}}class pc extends bx{_createSVG(t){return document.createElementNS(Bs,t)}}class qg{static setupStorage(t,e,n,s,r){const o=s.getValue(e,{value:null});switch(n.name){case"textarea":if(o.value!==null&&(t.textContent=o.value),r==="print")break;t.addEventListener("input",l=>{s.setValue(e,{value:l.target.value})});break;case"input":if(n.attributes.type==="radio"||n.attributes.type==="checkbox"){if(o.value===n.attributes.xfaOn?t.setAttribute("checked",!0):o.value===n.attributes.xfaOff&&t.removeAttribute("checked"),r==="print")break;t.addEventListener("change",l=>{s.setValue(e,{value:l.target.checked?l.target.getAttribute("xfaOn"):l.target.getAttribute("xfaOff")})})}else{if(o.value!==null&&t.setAttribute("value",o.value),r==="print")break;t.addEventListener("input",l=>{s.setValue(e,{value:l.target.value})})}break;case"select":if(o.value!==null){t.setAttribute("value",o.value);for(const l of n.children)l.attributes.value===o.value?l.attributes.selected=!0:l.attributes.hasOwnProperty("selected")&&delete l.attributes.selected}t.addEventListener("input",l=>{const c=l.target.options,h=c.selectedIndex===-1?"":c[c.selectedIndex].value;s.setValue(e,{value:h})});break}}static setAttributes({html:t,element:e,storage:n=null,intent:s,linkService:r}){const{attributes:o}=e,l=t instanceof HTMLAnchorElement;o.type==="radio"&&(o.name=`${o.name}-${s}`);for(const[c,h]of Object.entries(o))if(h!=null)switch(c){case"class":h.length&&t.setAttribute(c,h.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",h);break;case"style":Object.assign(t.style,h);break;case"textContent":t.textContent=h;break;default:(!l||c!=="href"&&c!=="newWindow")&&t.setAttribute(c,h)}l&&r.addLinkAttributes(t,o.href,o.newWindow),n&&o.dataId&&this.setupStorage(t,o.dataId,e,n)}static render(t){var d,f;const e=t.annotationStorage,n=t.linkService,s=t.xfaHtml,r=t.intent||"display",o=document.createElement(s.name);s.attributes&&this.setAttributes({html:o,element:s,intent:r,linkService:n});const l=r!=="richText",c=t.div;if(c.append(o),t.viewport){const g=`matrix(${t.viewport.transform.join(",")})`;c.style.transform=g}l&&c.setAttribute("class","xfaLayer xfaFont");const h=[];if(s.children.length===0){if(s.value){const g=document.createTextNode(s.value);o.append(g),l&&fc.shouldBuildText(s.name)&&h.push(g)}return{textDivs:h}}const u=[[s,-1,o]];for(;u.length>0;){const[g,y,p]=u.at(-1);if(y+1===g.children.length){u.pop();continue}const A=g.children[++u.at(-1)[1]];if(A===null)continue;const{name:w}=A;if(w==="#text"){const x=document.createTextNode(A.value);h.push(x),p.append(x);continue}const T=(d=A==null?void 0:A.attributes)!=null&&d.xmlns?document.createElementNS(A.attributes.xmlns,w):document.createElement(w);if(p.append(T),A.attributes&&this.setAttributes({html:T,element:A,storage:e,intent:r,linkService:n}),((f=A.children)==null?void 0:f.length)>0)u.push([A,-1,T]);else if(A.value){const x=document.createTextNode(A.value);l&&fc.shouldBuildText(w)&&h.push(x),T.append(x)}}for(const g of c.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))g.setAttribute("readOnly",!0);return{textDivs:h}}static update(t){const e=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=e,t.div.hidden=!1}}const Zh=1e3,vx=9,$o=new WeakSet;class gy{static create(t){switch(t.data.annotationType){case te.LINK:return new q0(t);case te.TEXT:return new Ax(t);case te.WIDGET:switch(t.data.fieldType){case"Tx":return new wx(t);case"Btn":return t.data.radioButton?new K0(t):t.data.checkBox?new Ex(t):new _x(t);case"Ch":return new xx(t);case"Sig":return new Sx(t)}return new Ho(t);case te.POPUP:return new Fp(t);case te.FREETEXT:return new ev(t);case te.LINE:return new Tx(t);case te.SQUARE:return new Rx(t);case te.CIRCLE:return new Px(t);case te.POLYLINE:return new nv(t);case te.CARET:return new Ix(t);case te.INK:return new Xg(t);case te.POLYGON:return new kx(t);case te.HIGHLIGHT:return new sv(t);case te.UNDERLINE:return new Lx(t);case te.SQUIGGLY:return new Mx(t);case te.STRIKEOUT:return new Ox(t);case te.STAMP:return new iv(t);case te.FILEATTACHMENT:return new Dx(t);default:return new ie(t)}}}var lo,Ua,Wa,lh,Np;const sm=class sm{constructor(t,{isRenderable:e=!1,ignoreBorder:n=!1,createQuadrilaterals:s=!1}={}){b(this,lh);b(this,lo,null);b(this,Ua,!1);b(this,Wa,null);this.isRenderable=e,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,e&&(this.container=this._createContainer(n)),s&&this._createQuadrilaterals()}static _hasPopupData({titleObj:t,contentsObj:e,richText:n}){return!!(t!=null&&t.str||e!=null&&e.str||n!=null&&n.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return sm._hasPopupData(this.data)}updateEdited(t){var n;if(!this.container)return;a(this,lo)||m(this,lo,{rect:this.data.rect.slice(0)});const{rect:e}=t;e&&v(this,lh,Np).call(this,e),(n=a(this,Wa))==null||n.popup.updateEdited(t)}resetEdited(){var t;a(this,lo)&&(v(this,lh,Np).call(this,a(this,lo).rect),(t=a(this,Wa))==null||t.popup.resetEdited(),m(this,lo,null))}_createContainer(t){const{data:e,parent:{page:n,viewport:s}}=this,r=document.createElement("section");r.setAttribute("data-annotation-id",e.id),this instanceof Ho||(r.tabIndex=Zh);const{style:o}=r;if(o.zIndex=this.parent.zIndex++,e.alternativeText&&(r.title=e.alternativeText),e.noRotate&&r.classList.add("norotate"),!e.rect||this instanceof Fp){const{rotation:p}=e;return!e.hasOwnCanvas&&p!==0&&this.setRotation(p,r),r}const{width:l,height:c}=this;if(!t&&e.borderStyle.width>0){o.borderWidth=`${e.borderStyle.width}px`;const p=e.borderStyle.horizontalCornerRadius,A=e.borderStyle.verticalCornerRadius;if(p>0||A>0){const T=`calc(${p}px * var(--total-scale-factor)) / calc(${A}px * var(--total-scale-factor))`;o.borderRadius=T}else if(this instanceof K0){const T=`calc(${l}px * var(--total-scale-factor)) / calc(${c}px * var(--total-scale-factor))`;o.borderRadius=T}switch(e.borderStyle.style){case Jo.SOLID:o.borderStyle="solid";break;case Jo.DASHED:o.borderStyle="dashed";break;case Jo.BEVELED:lt("Unimplemented border style: beveled");break;case Jo.INSET:lt("Unimplemented border style: inset");break;case Jo.UNDERLINE:o.borderBottomStyle="solid";break}const w=e.borderColor||null;w?(m(this,Ua,!0),o.borderColor=et.makeHexColor(w[0]|0,w[1]|0,w[2]|0)):o.borderWidth=0}const h=et.normalizeRect([e.rect[0],n.view[3]-e.rect[1]+n.view[1],e.rect[2],n.view[3]-e.rect[3]+n.view[1]]),{pageWidth:u,pageHeight:d,pageX:f,pageY:g}=s.rawDims;o.left=`${100*(h[0]-f)/u}%`,o.top=`${100*(h[1]-g)/d}%`;const{rotation:y}=e;return e.hasOwnCanvas||y===0?(o.width=`${100*l/u}%`,o.height=`${100*c/d}%`):this.setRotation(y,r),r}setRotation(t,e=this.container){if(!this.data.rect)return;const{pageWidth:n,pageHeight:s}=this.parent.viewport.rawDims;let{width:r,height:o}=this;t%180!==0&&([r,o]=[o,r]),e.style.width=`${100*r/n}%`,e.style.height=`${100*o/s}%`,e.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(e,n,s)=>{const r=s.detail[e],o=r[0],l=r.slice(1);s.target.style[n]=py[`${o}_HTML`](l),this.annotationStorage.setValue(this.data.id,{[n]:py[`${o}_rgb`](l)})};return mt(this,"_commonActions",{display:e=>{const{display:n}=e.detail,s=n%2===1;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:s,noPrint:n===1||n===2})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{const{hidden:n}=e.detail;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:n,noView:n})},focus:e=>{setTimeout(()=>e.target.focus({preventScroll:!1}),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:e=>{t("bgColor","backgroundColor",e)},fillColor:e=>{t("fillColor","backgroundColor",e)},fgColor:e=>{t("fgColor","color",e)},textColor:e=>{t("textColor","color",e)},borderColor:e=>{t("borderColor","borderColor",e)},strokeColor:e=>{t("strokeColor","borderColor",e)},rotation:e=>{const n=e.detail.rotation;this.setRotation(n),this.annotationStorage.setValue(this.data.id,{rotation:n})}})}_dispatchEventFromSandbox(t,e){const n=this._commonActions;for(const s of Object.keys(e.detail)){const r=t[s]||n[s];r==null||r(e)}}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const e=this.annotationStorage.getRawValue(this.data.id);if(!e)return;const n=this._commonActions;for(const[s,r]of Object.entries(e)){const o=n[s];if(o){const l={detail:{[s]:r},target:t};o(l),delete e[s]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[e,n,s,r]=this.data.rect.map(p=>Math.fround(p));if(t.length===8){const[p,A,w,T]=t.subarray(2,6);if(s===p&&r===A&&e===w&&n===T)return}const{style:o}=this.container;let l;if(a(this,Ua)){const{borderColor:p,borderWidth:A}=o;o.borderWidth=0,l=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${p}" stroke-width="${A}">`],this.container.classList.add("hasBorder")}const c=s-e,h=r-n,{svgFactory:u}=this,d=u.createElement("svg");d.classList.add("quadrilateralsContainer"),d.setAttribute("width",0),d.setAttribute("height",0);const f=u.createElement("defs");d.append(f);const g=u.createElement("clipPath"),y=`clippath_${this.data.id}`;g.setAttribute("id",y),g.setAttribute("clipPathUnits","objectBoundingBox"),f.append(g);for(let p=2,A=t.length;p<A;p+=8){const w=t[p],T=t[p+1],x=t[p+2],_=t[p+3],E=u.createElement("rect"),R=(x-e)/c,P=(r-T)/h,L=(w-x)/c,O=(T-_)/h;E.setAttribute("x",R),E.setAttribute("y",P),E.setAttribute("width",L),E.setAttribute("height",O),g.append(E),l==null||l.push(`<rect vector-effect="non-scaling-stroke" x="${R}" y="${P}" width="${L}" height="${O}"/>`)}a(this,Ua)&&(l.push("</g></svg>')"),o.backgroundImage=l.join("")),this.container.append(d),this.container.style.clipPath=`url(#${y})`}_createPopup(){const{data:t}=this,e=m(this,Wa,new Fp({data:{color:t.color,titleObj:t.titleObj,modificationDate:t.modificationDate,contentsObj:t.contentsObj,richText:t.richText,parentRect:t.rect,borderStyle:0,id:`popup_${t.id}`,rotation:t.rotation},parent:this.parent,elements:[this]}));this.parent.div.append(e.render())}render(){Lt("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,e=null){const n=[];if(this._fieldObjects){const s=this._fieldObjects[t];if(s)for(const{page:r,id:o,exportValues:l}of s){if(r===-1||o===e)continue;const c=typeof l=="string"?l:null,h=document.querySelector(`[data-element-id="${o}"]`);if(h&&!$o.has(h)){lt(`_getElementsByName - element not allowed: ${o}`);continue}n.push({id:o,exportValue:c,domElement:h})}return n}for(const s of document.getElementsByName(t)){const{exportValue:r}=s,o=s.getAttribute("data-element-id");o!==e&&$o.has(s)&&n.push({id:o,exportValue:r,domElement:s})}return n}show(){var t;this.container&&(this.container.hidden=!1),(t=this.popup)==null||t.maybeShow()}hide(){var t;this.container&&(this.container.hidden=!0),(t=this.popup)==null||t.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const e of t)e.classList.add("highlightArea");else t.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:e}}=this;this.container.addEventListener("dblclick",()=>{var n;(n=this.linkService.eventBus)==null||n.dispatch("switchannotationeditormode",{source:this,mode:t,editId:e})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}};lo=new WeakMap,Ua=new WeakMap,Wa=new WeakMap,lh=new WeakSet,Np=function(t){const{container:{style:e},data:{rect:n,rotation:s},parent:{viewport:{rawDims:{pageWidth:r,pageHeight:o,pageX:l,pageY:c}}}}=this;n==null||n.splice(0,4,...t),e.left=`${100*(t[0]-l)/r}%`,e.top=`${100*(o-t[3]+c)/o}%`,s===0?(e.width=`${100*(t[2]-t[0])/r}%`,e.height=`${100*(t[3]-t[1])/o}%`):this.setRotation(s)};let ie=sm;var wn,Sr,X0,Y0;class q0 extends ie{constructor(e,n=null){super(e,{isRenderable:!0,ignoreBorder:!!(n!=null&&n.ignoreBorder),createQuadrilaterals:!0});b(this,wn);this.isTooltipOnly=e.data.isTooltipOnly}render(){const{data:e,linkService:n}=this,s=document.createElement("a");s.setAttribute("data-element-id",e.id);let r=!1;return e.url?(n.addLinkAttributes(s,e.url,e.newWindow),r=!0):e.action?(this._bindNamedAction(s,e.action),r=!0):e.attachment?(v(this,wn,X0).call(this,s,e.attachment,e.attachmentDest),r=!0):e.setOCGState?(v(this,wn,Y0).call(this,s,e.setOCGState),r=!0):e.dest?(this._bindLink(s,e.dest),r=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(s,e),r=!0),e.resetForm?(this._bindResetFormAction(s,e.resetForm),r=!0):this.isTooltipOnly&&!r&&(this._bindLink(s,""),r=!0)),this.container.classList.add("linkAnnotation"),r&&this.container.append(s),this.container}_bindLink(e,n){e.href=this.linkService.getDestinationHash(n),e.onclick=()=>(n&&this.linkService.goToDestination(n),!1),(n||n==="")&&v(this,wn,Sr).call(this)}_bindNamedAction(e,n){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(n),!1),v(this,wn,Sr).call(this)}_bindJSAction(e,n){e.href=this.linkService.getAnchorUrl("");const s=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const r of Object.keys(n.actions)){const o=s.get(r);o&&(e[o]=()=>{var l;return(l=this.linkService.eventBus)==null||l.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n.id,name:r}}),!1})}e.onclick||(e.onclick=()=>!1),v(this,wn,Sr).call(this)}_bindResetFormAction(e,n){const s=e.onclick;if(s||(e.href=this.linkService.getAnchorUrl("")),v(this,wn,Sr).call(this),!this._fieldObjects){lt('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),s||(e.onclick=()=>!1);return}e.onclick=()=>{var d;s==null||s();const{fields:r,refs:o,include:l}=n,c=[];if(r.length!==0||o.length!==0){const f=new Set(o);for(const g of r){const y=this._fieldObjects[g]||[];for(const{id:p}of y)f.add(p)}for(const g of Object.values(this._fieldObjects))for(const y of g)f.has(y.id)===l&&c.push(y)}else for(const f of Object.values(this._fieldObjects))c.push(...f);const h=this.annotationStorage,u=[];for(const f of c){const{id:g}=f;switch(u.push(g),f.type){case"text":{const p=f.defaultValue||"";h.setValue(g,{value:p});break}case"checkbox":case"radiobutton":{const p=f.defaultValue===f.exportValues;h.setValue(g,{value:p});break}case"combobox":case"listbox":{const p=f.defaultValue||"";h.setValue(g,{value:p});break}default:continue}const y=document.querySelector(`[data-element-id="${g}"]`);if(y){if(!$o.has(y)){lt(`_bindResetFormAction - element not allowed: ${g}`);continue}}else continue;y.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((d=this.linkService.eventBus)==null||d.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:u,name:"ResetForm"}})),!1}}}wn=new WeakSet,Sr=function(){this.container.setAttribute("data-internal-link","")},X0=function(e,n,s=null){e.href=this.linkService.getAnchorUrl(""),n.description&&(e.title=n.description),e.onclick=()=>{var r;return(r=this.downloadManager)==null||r.openOrDownloadData(n.content,n.filename,s),!1},v(this,wn,Sr).call(this)},Y0=function(e,n){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(n),!1),v(this,wn,Sr).call(this)};class Ax extends ie{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(t),this.container}}class Ho extends ie{render(){return this.container}showElementAndHideCanvas(t){var e;this.data.hasOwnCanvas&&(((e=t.previousSibling)==null?void 0:e.nodeName)==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return we.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,e,n,s,r){n.includes("mouse")?t.addEventListener(n,o=>{var l;(l=this.linkService.eventBus)==null||l.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:r(o),shift:o.shiftKey,modifier:this._getKeyModifier(o)}})}):t.addEventListener(n,o=>{var l;if(n==="blur"){if(!e.focused||!o.relatedTarget)return;e.focused=!1}else if(n==="focus"){if(e.focused)return;e.focused=!0}r&&((l=this.linkService.eventBus)==null||l.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:r(o)}}))})}_setEventListeners(t,e,n,s){var r,o,l;for(const[c,h]of n)(h==="Action"||(r=this.data.actions)!=null&&r[h])&&((h==="Focus"||h==="Blur")&&(e||(e={focused:!1})),this._setEventListener(t,e,c,h,s),h==="Focus"&&!((o=this.data.actions)!=null&&o.Blur)?this._setEventListener(t,e,"blur","Blur",null):h==="Blur"&&!((l=this.data.actions)!=null&&l.Focus)&&this._setEventListener(t,e,"focus","Focus",null))}_setBackgroundColor(t){const e=this.data.backgroundColor||null;t.style.backgroundColor=e===null?"transparent":et.makeHexColor(e[0],e[1],e[2])}_setTextStyle(t){const e=["left","center","right"],{fontColor:n}=this.data.defaultAppearanceData,s=this.data.defaultAppearanceData.fontSize||vx,r=t.style;let o;const l=2,c=h=>Math.round(10*h)/10;if(this.data.multiLine){const h=Math.abs(this.data.rect[3]-this.data.rect[1]-l),u=Math.round(h/(df*s))||1,d=h/u;o=Math.min(s,c(d/df))}else{const h=Math.abs(this.data.rect[3]-this.data.rect[1]-l);o=Math.min(s,c(h/df))}r.fontSize=`calc(${o}px * var(--total-scale-factor))`,r.color=et.makeHexColor(n[0],n[1],n[2]),this.data.textAlignment!==null&&(r.textAlign=e[this.data.textAlignment])}_setRequired(t,e){e?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",e)}}class wx extends Ho{constructor(t){const e=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:e})}setPropertyOnSiblings(t,e,n,s){const r=this.annotationStorage;for(const o of this._getElementsByName(t.name,t.id))o.domElement&&(o.domElement[e]=n),r.setValue(o.id,{[s]:n})}render(){var s,r;const t=this.annotationStorage,e=this.data.id;this.container.classList.add("textWidgetAnnotation");let n=null;if(this.renderForms){const o=t.getValue(e,{value:this.data.fieldValue});let l=o.value||"";const c=t.getValue(e,{charLimit:this.data.maxLen}).charLimit;c&&l.length>c&&(l=l.slice(0,c));let h=o.formattedValue||((s=this.data.textContent)==null?void 0:s.join(`
`))||null;h&&this.data.comb&&(h=h.replaceAll(/\s+/g,""));const u={userValue:l,formattedValue:h,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(n=document.createElement("textarea"),n.textContent=h??l,this.data.doNotScroll&&(n.style.overflowY="hidden")):(n=document.createElement("input"),n.type=this.data.password?"password":"text",n.setAttribute("value",h??l),this.data.doNotScroll&&(n.style.overflowX="hidden")),this.data.hasOwnCanvas&&(n.hidden=!0),$o.add(n),n.setAttribute("data-element-id",e),n.disabled=this.data.readOnly,n.name=this.data.fieldName,n.tabIndex=Zh,this._setRequired(n,this.data.required),c&&(n.maxLength=c),n.addEventListener("input",f=>{t.setValue(e,{value:f.target.value}),this.setPropertyOnSiblings(n,"value",f.target.value,"value"),u.formattedValue=null}),n.addEventListener("resetform",f=>{const g=this.data.defaultFieldValue??"";n.value=u.userValue=g,u.formattedValue=null});let d=f=>{const{formattedValue:g}=u;g!=null&&(f.target.value=g),f.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){n.addEventListener("focus",g=>{var p;if(u.focused)return;const{target:y}=g;u.userValue&&(y.value=u.userValue),u.lastCommittedValue=y.value,u.commitKey=1,(p=this.data.actions)!=null&&p.Focus||(u.focused=!0)}),n.addEventListener("updatefromsandbox",g=>{this.showElementAndHideCanvas(g.target);const y={value(p){u.userValue=p.detail.value??"",t.setValue(e,{value:u.userValue.toString()}),p.target.value=u.userValue},formattedValue(p){const{formattedValue:A}=p.detail;u.formattedValue=A,A!=null&&p.target!==document.activeElement&&(p.target.value=A),t.setValue(e,{formattedValue:A})},selRange(p){p.target.setSelectionRange(...p.detail.selRange)},charLimit:p=>{var x;const{charLimit:A}=p.detail,{target:w}=p;if(A===0){w.removeAttribute("maxLength");return}w.setAttribute("maxLength",A);let T=u.userValue;!T||T.length<=A||(T=T.slice(0,A),w.value=u.userValue=T,t.setValue(e,{value:T}),(x=this.linkService.eventBus)==null||x.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:T,willCommit:!0,commitKey:1,selStart:w.selectionStart,selEnd:w.selectionEnd}}))}};this._dispatchEventFromSandbox(y,g)}),n.addEventListener("keydown",g=>{var A;u.commitKey=1;let y=-1;if(g.key==="Escape"?y=0:g.key==="Enter"&&!this.data.multiLine?y=2:g.key==="Tab"&&(u.commitKey=3),y===-1)return;const{value:p}=g.target;u.lastCommittedValue!==p&&(u.lastCommittedValue=p,u.userValue=p,(A=this.linkService.eventBus)==null||A.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:p,willCommit:!0,commitKey:y,selStart:g.target.selectionStart,selEnd:g.target.selectionEnd}}))});const f=d;d=null,n.addEventListener("blur",g=>{var p,A;if(!u.focused||!g.relatedTarget)return;(p=this.data.actions)!=null&&p.Blur||(u.focused=!1);const{value:y}=g.target;u.userValue=y,u.lastCommittedValue!==y&&((A=this.linkService.eventBus)==null||A.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:y,willCommit:!0,commitKey:u.commitKey,selStart:g.target.selectionStart,selEnd:g.target.selectionEnd}})),f(g)}),(r=this.data.actions)!=null&&r.Keystroke&&n.addEventListener("beforeinput",g=>{var E;u.lastCommittedValue=null;const{data:y,target:p}=g,{value:A,selectionStart:w,selectionEnd:T}=p;let x=w,_=T;switch(g.inputType){case"deleteWordBackward":{const R=A.substring(0,w).match(/\w*[^\w]*$/);R&&(x-=R[0].length);break}case"deleteWordForward":{const R=A.substring(w).match(/^[^\w]*\w*/);R&&(_+=R[0].length);break}case"deleteContentBackward":w===T&&(x-=1);break;case"deleteContentForward":w===T&&(_+=1);break}g.preventDefault(),(E=this.linkService.eventBus)==null||E.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:A,change:y||"",willCommit:!1,selStart:x,selEnd:_}})}),this._setEventListeners(n,u,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],g=>g.target.value)}if(d&&n.addEventListener("blur",d),this.data.comb){const g=(this.data.rect[2]-this.data.rect[0])/c;n.classList.add("comb"),n.style.letterSpacing=`calc(${g}px * var(--total-scale-factor) - 1ch)`}}else n=document.createElement("div"),n.textContent=this.data.fieldValue,n.style.verticalAlign="middle",n.style.display="table-cell",this.data.hasOwnCanvas&&(n.hidden=!0);return this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class Sx extends Ho{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class Ex extends Ho{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,e=this.data,n=e.id;let s=t.getValue(n,{value:e.exportValue===e.fieldValue}).value;typeof s=="string"&&(s=s!=="Off",t.setValue(n,{value:s})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const r=document.createElement("input");return $o.add(r),r.setAttribute("data-element-id",n),r.disabled=e.readOnly,this._setRequired(r,this.data.required),r.type="checkbox",r.name=e.fieldName,s&&r.setAttribute("checked",!0),r.setAttribute("exportValue",e.exportValue),r.tabIndex=Zh,r.addEventListener("change",o=>{const{name:l,checked:c}=o.target;for(const h of this._getElementsByName(l,n)){const u=c&&h.exportValue===e.exportValue;h.domElement&&(h.domElement.checked=u),t.setValue(h.id,{value:u})}t.setValue(n,{value:c})}),r.addEventListener("resetform",o=>{const l=e.defaultFieldValue||"Off";o.target.checked=l===e.exportValue}),this.enableScripting&&this.hasJSActions&&(r.addEventListener("updatefromsandbox",o=>{const l={value(c){c.target.checked=c.detail.value!=="Off",t.setValue(n,{value:c.target.checked})}};this._dispatchEventFromSandbox(l,o)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class K0 extends Ho{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,e=this.data,n=e.id;let s=t.getValue(n,{value:e.fieldValue===e.buttonValue}).value;if(typeof s=="string"&&(s=s!==e.buttonValue,t.setValue(n,{value:s})),s)for(const o of this._getElementsByName(e.fieldName,n))t.setValue(o.id,{value:!1});const r=document.createElement("input");if($o.add(r),r.setAttribute("data-element-id",n),r.disabled=e.readOnly,this._setRequired(r,this.data.required),r.type="radio",r.name=e.fieldName,s&&r.setAttribute("checked",!0),r.tabIndex=Zh,r.addEventListener("change",o=>{const{name:l,checked:c}=o.target;for(const h of this._getElementsByName(l,n))t.setValue(h.id,{value:!1});t.setValue(n,{value:c})}),r.addEventListener("resetform",o=>{const l=e.defaultFieldValue;o.target.checked=l!=null&&l===e.buttonValue}),this.enableScripting&&this.hasJSActions){const o=e.buttonValue;r.addEventListener("updatefromsandbox",l=>{const c={value:h=>{const u=o===h.detail.value;for(const d of this._getElementsByName(h.target.name)){const f=u&&d.id===n;d.domElement&&(d.domElement.checked=f),t.setValue(d.id,{value:f})}}};this._dispatchEventFromSandbox(c,l)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],l=>l.target.checked)}return this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class _x extends q0{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const e=t.lastChild;return this.enableScripting&&this.hasJSActions&&e&&(this._setDefaultPropertiesFromJS(e),e.addEventListener("updatefromsandbox",n=>{this._dispatchEventFromSandbox({},n)})),t}}class xx extends Ho{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,e=this.data.id,n=t.getValue(e,{value:this.data.fieldValue}),s=document.createElement("select");$o.add(s),s.setAttribute("data-element-id",e),s.disabled=this.data.readOnly,this._setRequired(s,this.data.required),s.name=this.data.fieldName,s.tabIndex=Zh;let r=this.data.combo&&this.data.options.length>0;this.data.combo||(s.size=this.data.options.length,this.data.multiSelect&&(s.multiple=!0)),s.addEventListener("resetform",u=>{const d=this.data.defaultFieldValue;for(const f of s.options)f.selected=f.value===d});for(const u of this.data.options){const d=document.createElement("option");d.textContent=u.displayValue,d.value=u.exportValue,n.value.includes(u.exportValue)&&(d.setAttribute("selected",!0),r=!1),s.append(d)}let o=null;if(r){const u=document.createElement("option");u.value=" ",u.setAttribute("hidden",!0),u.setAttribute("selected",!0),s.prepend(u),o=()=>{u.remove(),s.removeEventListener("input",o),o=null},s.addEventListener("input",o)}const l=u=>{const d=u?"value":"textContent",{options:f,multiple:g}=s;return g?Array.prototype.filter.call(f,y=>y.selected).map(y=>y[d]):f.selectedIndex===-1?null:f[f.selectedIndex][d]};let c=l(!1);const h=u=>{const d=u.target.options;return Array.prototype.map.call(d,f=>({displayValue:f.textContent,exportValue:f.value}))};return this.enableScripting&&this.hasJSActions?(s.addEventListener("updatefromsandbox",u=>{const d={value(f){o==null||o();const g=f.detail.value,y=new Set(Array.isArray(g)?g:[g]);for(const p of s.options)p.selected=y.has(p.value);t.setValue(e,{value:l(!0)}),c=l(!1)},multipleSelection(f){s.multiple=!0},remove(f){const g=s.options,y=f.detail.remove;g[y].selected=!1,s.remove(y),g.length>0&&Array.prototype.findIndex.call(g,A=>A.selected)===-1&&(g[0].selected=!0),t.setValue(e,{value:l(!0),items:h(f)}),c=l(!1)},clear(f){for(;s.length!==0;)s.remove(0);t.setValue(e,{value:null,items:[]}),c=l(!1)},insert(f){const{index:g,displayValue:y,exportValue:p}=f.detail.insert,A=s.children[g],w=document.createElement("option");w.textContent=y,w.value=p,A?A.before(w):s.append(w),t.setValue(e,{value:l(!0),items:h(f)}),c=l(!1)},items(f){const{items:g}=f.detail;for(;s.length!==0;)s.remove(0);for(const y of g){const{displayValue:p,exportValue:A}=y,w=document.createElement("option");w.textContent=p,w.value=A,s.append(w)}s.options.length>0&&(s.options[0].selected=!0),t.setValue(e,{value:l(!0),items:h(f)}),c=l(!1)},indices(f){const g=new Set(f.detail.indices);for(const y of f.target.options)y.selected=g.has(y.index);t.setValue(e,{value:l(!0)}),c=l(!1)},editable(f){f.target.disabled=!f.detail.editable}};this._dispatchEventFromSandbox(d,u)}),s.addEventListener("input",u=>{var g;const d=l(!0),f=l(!1);t.setValue(e,{value:d}),u.preventDefault(),(g=this.linkService.eventBus)==null||g.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:c,change:f,changeEx:d,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(s,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],u=>u.target.value)):s.addEventListener("input",function(u){t.setValue(e,{value:l(!0)})}),this.data.combo&&this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class Fp extends ie{constructor(t){const{data:e,elements:n}=t;super(t,{isRenderable:ie._hasPopupData(e)}),this.elements=n,this.popup=null}render(){this.container.classList.add("popupAnnotation");const t=this.popup=new Cx({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),e=[];for(const n of this.elements)n.popup=t,n.container.ariaHasPopup="dialog",e.push(n.data.id),n.addHighlightArea();return this.container.setAttribute("aria-controls",e.map(n=>`${jg}${n}`).join(",")),this.container}}var Va,wd,Sd,qa,Xa,Jt,ai,Ya,ch,hh,Ka,li,qn,ci,uh,hi,dh,co,ho,Mt,Mu,$p,J0,Q0,Z0,tv,Ou,Du,Bp;class Cx{constructor({container:t,color:e,elements:n,titleObj:s,modificationDate:r,contentsObj:o,richText:l,parent:c,rect:h,parentRect:u,open:d}){b(this,Mt);b(this,Va,v(this,Mt,Z0).bind(this));b(this,wd,v(this,Mt,Bp).bind(this));b(this,Sd,v(this,Mt,Du).bind(this));b(this,qa,v(this,Mt,Ou).bind(this));b(this,Xa,null);b(this,Jt,null);b(this,ai,null);b(this,Ya,null);b(this,ch,null);b(this,hh,null);b(this,Ka,null);b(this,li,!1);b(this,qn,null);b(this,ci,null);b(this,uh,null);b(this,hi,null);b(this,dh,null);b(this,co,null);b(this,ho,!1);var f;m(this,Jt,t),m(this,dh,s),m(this,ai,o),m(this,hi,l),m(this,hh,c),m(this,Xa,e),m(this,uh,h),m(this,Ka,u),m(this,ch,n),m(this,Ya,Vd.toDateObject(r)),this.trigger=n.flatMap(g=>g.getElementsToTriggerPopup());for(const g of this.trigger)g.addEventListener("click",a(this,qa)),g.addEventListener("mouseenter",a(this,Sd)),g.addEventListener("mouseleave",a(this,wd)),g.classList.add("popupTriggerArea");for(const g of n)(f=g.container)==null||f.addEventListener("keydown",a(this,Va));a(this,Jt).hidden=!0,d&&v(this,Mt,Ou).call(this)}render(){if(a(this,qn))return;const t=m(this,qn,document.createElement("div"));if(t.className="popup",a(this,Xa)){const r=t.style.outlineColor=et.makeHexColor(...a(this,Xa));t.style.backgroundColor=`color-mix(in srgb, ${r} 30%, white)`}const e=document.createElement("span");e.className="header";const n=document.createElement("h1");if(e.append(n),{dir:n.dir,str:n.textContent}=a(this,dh),t.append(e),a(this,Ya)){const r=document.createElement("span");r.classList.add("popupDate"),r.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),r.setAttribute("data-l10n-args",JSON.stringify({dateObj:a(this,Ya).valueOf()})),e.append(r)}const s=a(this,Mt,Mu);if(s)qg.render({xfaHtml:s,intent:"richText",div:t}),t.lastChild.classList.add("richText","popupContent");else{const r=this._formatContents(a(this,ai));t.append(r)}a(this,Jt).append(t)}_formatContents({str:t,dir:e}){const n=document.createElement("p");n.classList.add("popupContent"),n.dir=e;const s=t.split(/(?:\r\n?|\n)/);for(let r=0,o=s.length;r<o;++r){const l=s[r];n.append(document.createTextNode(l)),r<o-1&&n.append(document.createElement("br"))}return n}updateEdited({rect:t,popupContent:e}){var n;a(this,co)||m(this,co,{contentsObj:a(this,ai),richText:a(this,hi)}),t&&m(this,ci,null),e&&(m(this,hi,v(this,Mt,Q0).call(this,e)),m(this,ai,null)),(n=a(this,qn))==null||n.remove(),m(this,qn,null)}resetEdited(){var t;a(this,co)&&({contentsObj:He(this,ai)._,richText:He(this,hi)._}=a(this,co),m(this,co,null),(t=a(this,qn))==null||t.remove(),m(this,qn,null),m(this,ci,null))}forceHide(){m(this,ho,this.isVisible),a(this,ho)&&(a(this,Jt).hidden=!0)}maybeShow(){a(this,ho)&&(a(this,qn)||v(this,Mt,Du).call(this),m(this,ho,!1),a(this,Jt).hidden=!1)}get isVisible(){return a(this,Jt).hidden===!1}}Va=new WeakMap,wd=new WeakMap,Sd=new WeakMap,qa=new WeakMap,Xa=new WeakMap,Jt=new WeakMap,ai=new WeakMap,Ya=new WeakMap,ch=new WeakMap,hh=new WeakMap,Ka=new WeakMap,li=new WeakMap,qn=new WeakMap,ci=new WeakMap,uh=new WeakMap,hi=new WeakMap,dh=new WeakMap,co=new WeakMap,ho=new WeakMap,Mt=new WeakSet,Mu=function(){const t=a(this,hi),e=a(this,ai);return t!=null&&t.str&&(!(e!=null&&e.str)||e.str===t.str)&&a(this,hi).html||null},$p=function(){var t,e,n;return((n=(e=(t=a(this,Mt,Mu))==null?void 0:t.attributes)==null?void 0:e.style)==null?void 0:n.fontSize)||0},J0=function(){var t,e,n;return((n=(e=(t=a(this,Mt,Mu))==null?void 0:t.attributes)==null?void 0:e.style)==null?void 0:n.color)||null},Q0=function(t){const e=[],n={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:e}]}},s={style:{color:a(this,Mt,J0),fontSize:a(this,Mt,$p)?`calc(${a(this,Mt,$p)}px * var(--total-scale-factor))`:""}};for(const r of t.split(`
`))e.push({name:"span",value:r,attributes:s});return n},Z0=function(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(t.key==="Enter"||t.key==="Escape"&&a(this,li))&&v(this,Mt,Ou).call(this)},tv=function(){if(a(this,ci)!==null)return;const{page:{view:t},viewport:{rawDims:{pageWidth:e,pageHeight:n,pageX:s,pageY:r}}}=a(this,hh);let o=!!a(this,Ka),l=o?a(this,Ka):a(this,uh);for(const y of a(this,ch))if(!l||et.intersect(y.data.rect,l)!==null){l=y.data.rect,o=!0;break}const c=et.normalizeRect([l[0],t[3]-l[1]+t[1],l[2],t[3]-l[3]+t[1]]),u=o?l[2]-l[0]+5:0,d=c[0]+u,f=c[1];m(this,ci,[100*(d-s)/e,100*(f-r)/n]);const{style:g}=a(this,Jt);g.left=`${a(this,ci)[0]}%`,g.top=`${a(this,ci)[1]}%`},Ou=function(){m(this,li,!a(this,li)),a(this,li)?(v(this,Mt,Du).call(this),a(this,Jt).addEventListener("click",a(this,qa)),a(this,Jt).addEventListener("keydown",a(this,Va))):(v(this,Mt,Bp).call(this),a(this,Jt).removeEventListener("click",a(this,qa)),a(this,Jt).removeEventListener("keydown",a(this,Va)))},Du=function(){a(this,qn)||this.render(),this.isVisible?a(this,li)&&a(this,Jt).classList.add("focused"):(v(this,Mt,tv).call(this),a(this,Jt).hidden=!1,a(this,Jt).style.zIndex=parseInt(a(this,Jt).style.zIndex)+1e3)},Bp=function(){a(this,Jt).classList.remove("focused"),!(a(this,li)||!this.isVisible)&&(a(this,Jt).hidden=!0,a(this,Jt).style.zIndex=parseInt(a(this,Jt).style.zIndex)-1e3)};class ev extends ie{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=at.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const e of this.textContent){const n=document.createElement("span");n.textContent=e,t.append(n)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var fh;class Tx extends ie{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});b(this,fh,null)}render(){this.container.classList.add("lineAnnotation");const{data:e,width:n,height:s}=this,r=this.svgFactory.create(n,s,!0),o=m(this,fh,this.svgFactory.createElement("svg:line"));return o.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),o.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),o.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),o.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),o.setAttribute("stroke-width",e.borderStyle.width||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),r.append(o),this.container.append(r),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return a(this,fh)}addHighlightArea(){this.container.classList.add("highlightArea")}}fh=new WeakMap;var ph;class Rx extends ie{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});b(this,ph,null)}render(){this.container.classList.add("squareAnnotation");const{data:e,width:n,height:s}=this,r=this.svgFactory.create(n,s,!0),o=e.borderStyle.width,l=m(this,ph,this.svgFactory.createElement("svg:rect"));return l.setAttribute("x",o/2),l.setAttribute("y",o/2),l.setAttribute("width",n-o),l.setAttribute("height",s-o),l.setAttribute("stroke-width",o||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),r.append(l),this.container.append(r),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return a(this,ph)}addHighlightArea(){this.container.classList.add("highlightArea")}}ph=new WeakMap;var gh;class Px extends ie{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});b(this,gh,null)}render(){this.container.classList.add("circleAnnotation");const{data:e,width:n,height:s}=this,r=this.svgFactory.create(n,s,!0),o=e.borderStyle.width,l=m(this,gh,this.svgFactory.createElement("svg:ellipse"));return l.setAttribute("cx",n/2),l.setAttribute("cy",s/2),l.setAttribute("rx",n/2-o/2),l.setAttribute("ry",s/2-o/2),l.setAttribute("stroke-width",o||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),r.append(l),this.container.append(r),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return a(this,gh)}addHighlightArea(){this.container.classList.add("highlightArea")}}gh=new WeakMap;var mh;class nv extends ie{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});b(this,mh,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,vertices:n,borderStyle:s,popupRef:r},width:o,height:l}=this;if(!n)return this.container;const c=this.svgFactory.create(o,l,!0);let h=[];for(let d=0,f=n.length;d<f;d+=2){const g=n[d]-e[0],y=e[3]-n[d+1];h.push(`${g},${y}`)}h=h.join(" ");const u=m(this,mh,this.svgFactory.createElement(this.svgElementName));return u.setAttribute("points",h),u.setAttribute("stroke-width",s.width||1),u.setAttribute("stroke","transparent"),u.setAttribute("fill","transparent"),c.append(u),this.container.append(c),!r&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return a(this,mh)}addHighlightArea(){this.container.classList.add("highlightArea")}}mh=new WeakMap;class kx extends nv{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class Ix extends ie{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var yh,uo,bh,jp;class Xg extends ie{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});b(this,bh);b(this,yh,null);b(this,uo,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?at.HIGHLIGHT:at.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,rotation:n,inkLists:s,borderStyle:r,popupRef:o}}=this,{transform:l,width:c,height:h}=v(this,bh,jp).call(this,n,e),u=this.svgFactory.create(c,h,!0),d=m(this,yh,this.svgFactory.createElement("svg:g"));u.append(d),d.setAttribute("stroke-width",r.width||1),d.setAttribute("stroke-linecap","round"),d.setAttribute("stroke-linejoin","round"),d.setAttribute("stroke-miterlimit",10),d.setAttribute("stroke","transparent"),d.setAttribute("fill","transparent"),d.setAttribute("transform",l);for(let f=0,g=s.length;f<g;f++){const y=this.svgFactory.createElement(this.svgElementName);a(this,uo).push(y),y.setAttribute("points",s[f].join(",")),d.append(y)}return!o&&this.hasPopupData&&this._createPopup(),this.container.append(u),this._editOnDoubleClick(),this.container}updateEdited(e){super.updateEdited(e);const{thickness:n,points:s,rect:r}=e,o=a(this,yh);if(n>=0&&o.setAttribute("stroke-width",n||1),s)for(let l=0,c=a(this,uo).length;l<c;l++)a(this,uo)[l].setAttribute("points",s[l].join(","));if(r){const{transform:l,width:c,height:h}=v(this,bh,jp).call(this,this.data.rotation,r);o.parentElement.setAttribute("viewBox",`0 0 ${c} ${h}`),o.setAttribute("transform",l)}}getElementsToTriggerPopup(){return a(this,uo)}addHighlightArea(){this.container.classList.add("highlightArea")}}yh=new WeakMap,uo=new WeakMap,bh=new WeakSet,jp=function(e,n){switch(e){case 90:return{transform:`rotate(90) translate(${-n[0]},${n[1]}) scale(1,-1)`,width:n[3]-n[1],height:n[2]-n[0]};case 180:return{transform:`rotate(180) translate(${-n[2]},${n[1]}) scale(1,-1)`,width:n[2]-n[0],height:n[3]-n[1]};case 270:return{transform:`rotate(270) translate(${-n[2]},${n[3]}) scale(1,-1)`,width:n[3]-n[1],height:n[2]-n[0]};default:return{transform:`translate(${-n[0]},${n[3]}) scale(1,-1)`,width:n[2]-n[0],height:n[3]-n[1]}}};class sv extends ie{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=at.HIGHLIGHT}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),this.container}}class Lx extends ie{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class Mx extends ie{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class Ox extends ie{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class iv extends ie{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=at.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var vh,Ah,Hp;class Dx extends ie{constructor(e){var s;super(e,{isRenderable:!0});b(this,Ah);b(this,vh,null);const{file:n}=this.data;this.filename=n.filename,this.content=n.content,(s=this.linkService.eventBus)==null||s.dispatch("fileattachmentannotation",{source:this,...n})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:e,data:n}=this;let s;n.hasAppearance||n.fillAlpha===0?s=document.createElement("div"):(s=document.createElement("img"),s.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(n.name)?"paperclip":"pushpin"}.svg`,n.fillAlpha&&n.fillAlpha<1&&(s.style=`filter: opacity(${Math.round(n.fillAlpha*100)}%);`)),s.addEventListener("dblclick",v(this,Ah,Hp).bind(this)),m(this,vh,s);const{isMac:r}=we.platform;return e.addEventListener("keydown",o=>{o.key==="Enter"&&(r?o.metaKey:o.ctrlKey)&&v(this,Ah,Hp).call(this)}),!n.popupRef&&this.hasPopupData?this._createPopup():s.classList.add("popupTriggerArea"),e.append(s),e}getElementsToTriggerPopup(){return a(this,vh)}addHighlightArea(){this.container.classList.add("highlightArea")}}vh=new WeakMap,Ah=new WeakSet,Hp=function(){var e;(e=this.downloadManager)==null||e.openOrDownloadData(this.content,this.filename)};var wh,fo,Ki,Sh,yr,zp,Gp,Ja;let Yg=(Ja=class{constructor({div:t,accessibilityManager:e,annotationCanvasMap:n,annotationEditorUIManager:s,page:r,viewport:o,structTreeLayer:l}){b(this,yr);b(this,wh,null);b(this,fo,null);b(this,Ki,new Map);b(this,Sh,null);this.div=t,m(this,wh,e),m(this,fo,n),m(this,Sh,l||null),this.page=r,this.viewport=o,this.zIndex=0,this._annotationEditorUIManager=s}hasEditableAnnotations(){return a(this,Ki).size>0}async render(t){var o;const{annotations:e}=t,n=this.div;fr(n,this.viewport);const s=new Map,r={data:null,layer:n,linkService:t.linkService,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new pc,annotationStorage:t.annotationStorage||new zg,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const l of e){if(l.noHTML)continue;const c=l.annotationType===te.POPUP;if(c){const d=s.get(l.id);if(!d)continue;r.elements=d}else if(l.rect[2]===l.rect[0]||l.rect[3]===l.rect[1])continue;r.data=l;const h=gy.create(r);if(!h.isRenderable)continue;if(!c&&l.popupRef){const d=s.get(l.popupRef);d?d.push(h):s.set(l.popupRef,[h])}const u=h.render();l.hidden&&(u.style.visibility="hidden"),await v(this,yr,zp).call(this,u,l.id),h._isEditable&&(a(this,Ki).set(h.data.id,h),(o=this._annotationEditorUIManager)==null||o.renderAnnotationElement(h))}v(this,yr,Gp).call(this)}async addLinkAnnotations(t,e){const n={data:null,layer:this.div,linkService:e,svgFactory:new pc,parent:this};for(const s of t){s.borderStyle||(s.borderStyle=Ja._defaultBorderStyle),n.data=s;const r=gy.create(n);if(!r.isRenderable)continue;const o=r.render();await v(this,yr,zp).call(this,o,s.id)}}update({viewport:t}){const e=this.div;this.viewport=t,fr(e,{rotation:t.rotation}),v(this,yr,Gp).call(this),e.hidden=!1}getEditableAnnotations(){return Array.from(a(this,Ki).values())}getEditableAnnotation(t){return a(this,Ki).get(t)}static get _defaultBorderStyle(){return mt(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:Jo.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}},wh=new WeakMap,fo=new WeakMap,Ki=new WeakMap,Sh=new WeakMap,yr=new WeakSet,zp=async function(t,e){var o,l;const n=t.firstChild||t,s=n.id=`${jg}${e}`,r=await((o=a(this,Sh))==null?void 0:o.getAriaAttributes(s));if(r)for(const[c,h]of r)n.setAttribute(c,h);this.div.append(t),(l=a(this,wh))==null||l.moveElementInDOM(this.div,t,n,!1)},Gp=function(){var e;if(!a(this,fo))return;const t=this.div;for(const[n,s]of a(this,fo)){const r=t.querySelector(`[data-annotation-id="${n}"]`);if(!r)continue;s.className="annotationContent";const{firstChild:o}=r;o?o.nodeName==="CANVAS"?o.replaceWith(s):o.classList.contains("annotationContent")?o.after(s):o.before(s):r.append(s);const l=a(this,Ki).get(n);l&&(l._hasNoCanvas?((e=this._annotationEditorUIManager)==null||e.setMissingCanvas(n,r.id,s),l._hasNoCanvas=!1):l.canvas=s)}a(this,fo).clear()},Ja);const fu=/\r\n?|\n/g;var Xn,hn,Eh,po,un,he,rv,ov,av,Nu,Ai,Fu,$u,lv,Wp,cv;const $t=class $t extends jt{constructor(e){super({...e,name:"freeTextEditor"});b(this,he);b(this,Xn);b(this,hn,"");b(this,Eh,`${this.id}-editor`);b(this,po,null);b(this,un);m(this,Xn,e.color||$t._defaultColor||jt._defaultLineColor),m(this,un,e.fontSize||$t._defaultFontSize)}static get _keyboardManager(){const e=$t.prototype,n=o=>o.isEmpty(),s=pr.TRANSLATE_SMALL,r=pr.TRANSLATE_BIG;return mt(this,"_keyboardManager",new Jh([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-s,0],checker:n}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-r,0],checker:n}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[s,0],checker:n}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[r,0],checker:n}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-s],checker:n}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-r],checker:n}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,s],checker:n}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,r],checker:n}]]))}static initialize(e,n){jt.initialize(e,n);const s=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(s.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,n){switch(e){case yt.FREETEXT_SIZE:$t._defaultFontSize=n;break;case yt.FREETEXT_COLOR:$t._defaultColor=n;break}}updateParams(e,n){switch(e){case yt.FREETEXT_SIZE:v(this,he,rv).call(this,n);break;case yt.FREETEXT_COLOR:v(this,he,ov).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[yt.FREETEXT_SIZE,$t._defaultFontSize],[yt.FREETEXT_COLOR,$t._defaultColor||jt._defaultLineColor]]}get propertiesToUpdate(){return[[yt.FREETEXT_SIZE,a(this,un)],[yt.FREETEXT_COLOR,a(this,Xn)]]}_translateEmpty(e,n){this._uiManager.translateSelectedEditors(e,n,!0)}getInitialTranslation(){const e=this.parentScale;return[-$t._internalPadding*e,-($t._internalPadding+a(this,un))*e]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),m(this,po,new AbortController);const e=this._uiManager.combinedSignal(a(this,po));return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:e}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:e}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:e}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:e}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:e}),!0}disableEditMode(){var e;return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",a(this,Eh)),this._isDraggable=!0,(e=a(this,po))==null||e.abort(),m(this,po,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(e){var n;this.width||(this.enableEditMode(),e&&this.editorDiv.focus(),(n=this._initialOptions)!=null&&n.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const e=a(this,hn),n=m(this,hn,v(this,he,av).call(this).trimEnd());if(e===n)return;const s=r=>{if(m(this,hn,r),!r){this.remove();return}v(this,he,$u).call(this),this._uiManager.rebuild(this),v(this,he,Nu).call(this)};this.addCommands({cmd:()=>{s(n)},undo:()=>{s(e)},mustExec:!1}),v(this,he,Nu).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(e){e.target===this.div&&e.key==="Enter"&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(e){$t._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let e,n;(this._isCopy||this.annotationElementId)&&(e=this.x,n=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",a(this,Eh)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:s}=this.editorDiv;if(s.fontSize=`calc(${a(this,un)}px * var(--total-scale-factor))`,s.color=a(this,Xn),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[r,o]=this.parentDimensions;if(this.annotationElementId){const{position:l}=this._initialData;let[c,h]=this.getInitialTranslation();[c,h]=this.pageTranslationToScreen(c,h);const[u,d]=this.pageDimensions,[f,g]=this.pageTranslation;let y,p;switch(this.rotation){case 0:y=e+(l[0]-f)/u,p=n+this.height-(l[1]-g)/d;break;case 90:y=e+(l[0]-f)/u,p=n-(l[1]-g)/d,[c,h]=[h,-c];break;case 180:y=e-this.width+(l[0]-f)/u,p=n-(l[1]-g)/d,[c,h]=[-c,-h];break;case 270:y=e+(l[0]-f-this.height*d)/u,p=n+(l[1]-g-this.width*u)/d,[c,h]=[-h,c];break}this.setAt(y*r,p*o,c,h)}else this._moveAfterPaste(e,n);v(this,he,$u).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(e){var y,p,A;const n=e.clipboardData||window.clipboardData,{types:s}=n;if(s.length===1&&s[0]==="text/plain")return;e.preventDefault();const r=v(y=$t,Ai,Wp).call(y,n.getData("text")||"").replaceAll(fu,`
`);if(!r)return;const o=window.getSelection();if(!o.rangeCount)return;this.editorDiv.normalize(),o.deleteFromDocument();const l=o.getRangeAt(0);if(!r.includes(`
`)){l.insertNode(document.createTextNode(r)),this.editorDiv.normalize(),o.collapseToStart();return}const{startContainer:c,startOffset:h}=l,u=[],d=[];if(c.nodeType===Node.TEXT_NODE){const w=c.parentElement;if(d.push(c.nodeValue.slice(h).replaceAll(fu,"")),w!==this.editorDiv){let T=u;for(const x of this.editorDiv.childNodes){if(x===w){T=d;continue}T.push(v(p=$t,Ai,Fu).call(p,x))}}u.push(c.nodeValue.slice(0,h).replaceAll(fu,""))}else if(c===this.editorDiv){let w=u,T=0;for(const x of this.editorDiv.childNodes)T++===h&&(w=d),w.push(v(A=$t,Ai,Fu).call(A,x))}m(this,hn,`${u.join(`
`)}${r}${d.join(`
`)}`),v(this,he,$u).call(this);const f=new Range;let g=Math.sumPrecise(u.map(w=>w.length));for(const{firstChild:w}of this.editorDiv.childNodes)if(w.nodeType===Node.TEXT_NODE){const T=w.nodeValue.length;if(g<=T){f.setStart(w,g),f.setEnd(w,g);break}g-=T}o.removeAllRanges(),o.addRange(f)}get contentDiv(){return this.editorDiv}static async deserialize(e,n,s){var l;let r=null;if(e instanceof ev){const{data:{defaultAppearanceData:{fontSize:c,fontColor:h},rect:u,rotation:d,id:f,popupRef:g},textContent:y,textPosition:p,parent:{page:{pageNumber:A}}}=e;if(!y||y.length===0)return null;r=e={annotationType:at.FREETEXT,color:Array.from(h),fontSize:c,value:y.join(`
`),position:p,pageIndex:A-1,rect:u.slice(0),rotation:d,id:f,deleted:!1,popupRef:g}}const o=await super.deserialize(e,n,s);return m(o,un,e.fontSize),m(o,Xn,et.makeHexColor(...e.color)),m(o,hn,v(l=$t,Ai,Wp).call(l,e.value)),o.annotationElementId=e.id||null,o._initialData=r,o}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const n=$t._internalPadding*this.parentScale,s=this.getRect(n,n),r=jt._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:a(this,Xn)),o={annotationType:at.FREETEXT,color:r,fontSize:a(this,un),value:v(this,he,lv).call(this),pageIndex:this.pageIndex,rect:s,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?(o.isCopy=!0,o):this.annotationElementId&&!v(this,he,cv).call(this,o)?null:(o.id=this.annotationElementId,o)}renderAnnotationElement(e){const n=super.renderAnnotationElement(e);if(this.deleted)return n;const{style:s}=n;s.fontSize=`calc(${a(this,un)}px * var(--total-scale-factor))`,s.color=a(this,Xn),n.replaceChildren();for(const o of a(this,hn).split(`
`)){const l=document.createElement("div");l.append(o?document.createTextNode(o):document.createElement("br")),n.append(l)}const r=$t._internalPadding*this.parentScale;return e.updateEdited({rect:this.getRect(r,r),popupContent:a(this,hn)}),n}resetAnnotationElement(e){super.resetAnnotationElement(e),e.resetEdited()}};Xn=new WeakMap,hn=new WeakMap,Eh=new WeakMap,po=new WeakMap,un=new WeakMap,he=new WeakSet,rv=function(e){const n=r=>{this.editorDiv.style.fontSize=`calc(${r}px * var(--total-scale-factor))`,this.translate(0,-(r-a(this,un))*this.parentScale),m(this,un,r),v(this,he,Nu).call(this)},s=a(this,un);this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:yt.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},ov=function(e){const n=r=>{m(this,Xn,this.editorDiv.style.color=r)},s=a(this,Xn);this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:yt.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},av=function(){var s;const e=[];this.editorDiv.normalize();let n=null;for(const r of this.editorDiv.childNodes)(n==null?void 0:n.nodeType)===Node.TEXT_NODE&&r.nodeName==="BR"||(e.push(v(s=$t,Ai,Fu).call(s,r)),n=r);return e.join(`
`)},Nu=function(){const[e,n]=this.parentDimensions;let s;if(this.isAttachedToDOM)s=this.div.getBoundingClientRect();else{const{currentLayer:r,div:o}=this,l=o.style.display,c=o.classList.contains("hidden");o.classList.remove("hidden"),o.style.display="hidden",r.div.append(this.div),s=o.getBoundingClientRect(),o.remove(),o.style.display=l,o.classList.toggle("hidden",c)}this.rotation%180===this.parentRotation%180?(this.width=s.width/e,this.height=s.height/n):(this.width=s.height/e,this.height=s.width/n),this.fixAndSetPosition()},Ai=new WeakSet,Fu=function(e){return(e.nodeType===Node.TEXT_NODE?e.nodeValue:e.innerText).replaceAll(fu,"")},$u=function(){if(this.editorDiv.replaceChildren(),!!a(this,hn))for(const e of a(this,hn).split(`
`)){const n=document.createElement("div");n.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(n)}},lv=function(){return a(this,hn).replaceAll(" "," ")},Wp=function(e){return e.replaceAll(" "," ")},cv=function(e){const{value:n,fontSize:s,color:r,pageIndex:o}=this._initialData;return this._hasBeenMoved||e.value!==n||e.fontSize!==s||e.color.some((l,c)=>l!==r[c])||e.pageIndex!==o},b($t,Ai),U($t,"_freeTextDefaultContent",""),U($t,"_internalPadding",0),U($t,"_defaultColor",null),U($t,"_defaultFontSize",10),U($t,"_type","freetext"),U($t,"_editorType",at.FREETEXT);let Up=$t;class J{toSVGPath(){Lt("Abstract method `toSVGPath` must be implemented.")}get box(){Lt("Abstract getter `box` must be implemented.")}serialize(t,e){Lt("Abstract method `serialize` must be implemented.")}static _rescale(t,e,n,s,r,o){o||(o=new Float32Array(t.length));for(let l=0,c=t.length;l<c;l+=2)o[l]=e+t[l]*s,o[l+1]=n+t[l+1]*r;return o}static _rescaleAndSwap(t,e,n,s,r,o){o||(o=new Float32Array(t.length));for(let l=0,c=t.length;l<c;l+=2)o[l]=e+t[l+1]*s,o[l+1]=n+t[l]*r;return o}static _translate(t,e,n,s){s||(s=new Float32Array(t.length));for(let r=0,o=t.length;r<o;r+=2)s[r]=e+t[r],s[r+1]=n+t[r+1];return s}static svgRound(t){return Math.round(t*1e4)}static _normalizePoint(t,e,n,s,r){switch(r){case 90:return[1-e/n,t/s];case 180:return[1-t/n,1-e/s];case 270:return[e/n,1-t/s];default:return[t/n,e/s]}}static _normalizePagePoint(t,e,n){switch(n){case 90:return[1-e,t];case 180:return[1-t,1-e];case 270:return[e,1-t];default:return[t,e]}}static createBezierPoints(t,e,n,s,r,o){return[(t+5*n)/6,(e+5*s)/6,(5*n+r)/6,(5*s+o)/6,(n+r)/2,(s+o)/2]}}U(J,"PRECISION",1e-4);var dn,Yn,Qa,Za,As,gt,go,mo,_h,xh,tl,el,Ji,Ch,Ed,_d,pe,Xl,hv,uv,dv,fv,pv,gv;const Gs=class Gs{constructor({x:t,y:e},n,s,r,o,l=0){b(this,pe);b(this,dn);b(this,Yn,[]);b(this,Qa);b(this,Za);b(this,As,[]);b(this,gt,new Float32Array(18));b(this,go);b(this,mo);b(this,_h);b(this,xh);b(this,tl);b(this,el);b(this,Ji,[]);m(this,dn,n),m(this,el,r*s),m(this,Za,o),a(this,gt).set([NaN,NaN,NaN,NaN,t,e],6),m(this,Qa,l),m(this,xh,a(Gs,Ch)*s),m(this,_h,a(Gs,_d)*s),m(this,tl,s),a(this,Ji).push(t,e)}isEmpty(){return isNaN(a(this,gt)[8])}add({x:t,y:e}){var O;m(this,go,t),m(this,mo,e);const[n,s,r,o]=a(this,dn);let[l,c,h,u]=a(this,gt).subarray(8,12);const d=t-h,f=e-u,g=Math.hypot(d,f);if(g<a(this,_h))return!1;const y=g-a(this,xh),p=y/g,A=p*d,w=p*f;let T=l,x=c;l=h,c=u,h+=A,u+=w,(O=a(this,Ji))==null||O.push(t,e);const _=-w/y,E=A/y,R=_*a(this,el),P=E*a(this,el);return a(this,gt).set(a(this,gt).subarray(2,8),0),a(this,gt).set([h+R,u+P],4),a(this,gt).set(a(this,gt).subarray(14,18),12),a(this,gt).set([h-R,u-P],16),isNaN(a(this,gt)[6])?(a(this,As).length===0&&(a(this,gt).set([l+R,c+P],2),a(this,As).push(NaN,NaN,NaN,NaN,(l+R-n)/r,(c+P-s)/o),a(this,gt).set([l-R,c-P],14),a(this,Yn).push(NaN,NaN,NaN,NaN,(l-R-n)/r,(c-P-s)/o)),a(this,gt).set([T,x,l,c,h,u],6),!this.isEmpty()):(a(this,gt).set([T,x,l,c,h,u],6),Math.abs(Math.atan2(x-c,T-l)-Math.atan2(w,A))<Math.PI/2?([l,c,h,u]=a(this,gt).subarray(2,6),a(this,As).push(NaN,NaN,NaN,NaN,((l+h)/2-n)/r,((c+u)/2-s)/o),[l,c,T,x]=a(this,gt).subarray(14,18),a(this,Yn).push(NaN,NaN,NaN,NaN,((T+l)/2-n)/r,((x+c)/2-s)/o),!0):([T,x,l,c,h,u]=a(this,gt).subarray(0,6),a(this,As).push(((T+5*l)/6-n)/r,((x+5*c)/6-s)/o,((5*l+h)/6-n)/r,((5*c+u)/6-s)/o,((l+h)/2-n)/r,((c+u)/2-s)/o),[h,u,l,c,T,x]=a(this,gt).subarray(12,18),a(this,Yn).push(((T+5*l)/6-n)/r,((x+5*c)/6-s)/o,((5*l+h)/6-n)/r,((5*c+u)/6-s)/o,((l+h)/2-n)/r,((c+u)/2-s)/o),!0))}toSVGPath(){if(this.isEmpty())return"";const t=a(this,As),e=a(this,Yn);if(isNaN(a(this,gt)[6])&&!this.isEmpty())return v(this,pe,hv).call(this);const n=[];n.push(`M${t[4]} ${t[5]}`);for(let s=6;s<t.length;s+=6)isNaN(t[s])?n.push(`L${t[s+4]} ${t[s+5]}`):n.push(`C${t[s]} ${t[s+1]} ${t[s+2]} ${t[s+3]} ${t[s+4]} ${t[s+5]}`);v(this,pe,dv).call(this,n);for(let s=e.length-6;s>=6;s-=6)isNaN(e[s])?n.push(`L${e[s+4]} ${e[s+5]}`):n.push(`C${e[s]} ${e[s+1]} ${e[s+2]} ${e[s+3]} ${e[s+4]} ${e[s+5]}`);return v(this,pe,uv).call(this,n),n.join(" ")}newFreeDrawOutline(t,e,n,s,r,o){return new mv(t,e,n,s,r,o)}getOutlines(){var d;const t=a(this,As),e=a(this,Yn),n=a(this,gt),[s,r,o,l]=a(this,dn),c=new Float32Array((((d=a(this,Ji))==null?void 0:d.length)??0)+2);for(let f=0,g=c.length-2;f<g;f+=2)c[f]=(a(this,Ji)[f]-s)/o,c[f+1]=(a(this,Ji)[f+1]-r)/l;if(c[c.length-2]=(a(this,go)-s)/o,c[c.length-1]=(a(this,mo)-r)/l,isNaN(n[6])&&!this.isEmpty())return v(this,pe,fv).call(this,c);const h=new Float32Array(a(this,As).length+24+a(this,Yn).length);let u=t.length;for(let f=0;f<u;f+=2){if(isNaN(t[f])){h[f]=h[f+1]=NaN;continue}h[f]=t[f],h[f+1]=t[f+1]}u=v(this,pe,gv).call(this,h,u);for(let f=e.length-6;f>=6;f-=6)for(let g=0;g<6;g+=2){if(isNaN(e[f+g])){h[u]=h[u+1]=NaN,u+=2;continue}h[u]=e[f+g],h[u+1]=e[f+g+1],u+=2}return v(this,pe,pv).call(this,h,u),this.newFreeDrawOutline(h,c,a(this,dn),a(this,tl),a(this,Qa),a(this,Za))}};dn=new WeakMap,Yn=new WeakMap,Qa=new WeakMap,Za=new WeakMap,As=new WeakMap,gt=new WeakMap,go=new WeakMap,mo=new WeakMap,_h=new WeakMap,xh=new WeakMap,tl=new WeakMap,el=new WeakMap,Ji=new WeakMap,Ch=new WeakMap,Ed=new WeakMap,_d=new WeakMap,pe=new WeakSet,Xl=function(){const t=a(this,gt).subarray(4,6),e=a(this,gt).subarray(16,18),[n,s,r,o]=a(this,dn);return[(a(this,go)+(t[0]-e[0])/2-n)/r,(a(this,mo)+(t[1]-e[1])/2-s)/o,(a(this,go)+(e[0]-t[0])/2-n)/r,(a(this,mo)+(e[1]-t[1])/2-s)/o]},hv=function(){const[t,e,n,s]=a(this,dn),[r,o,l,c]=v(this,pe,Xl).call(this);return`M${(a(this,gt)[2]-t)/n} ${(a(this,gt)[3]-e)/s} L${(a(this,gt)[4]-t)/n} ${(a(this,gt)[5]-e)/s} L${r} ${o} L${l} ${c} L${(a(this,gt)[16]-t)/n} ${(a(this,gt)[17]-e)/s} L${(a(this,gt)[14]-t)/n} ${(a(this,gt)[15]-e)/s} Z`},uv=function(t){const e=a(this,Yn);t.push(`L${e[4]} ${e[5]} Z`)},dv=function(t){const[e,n,s,r]=a(this,dn),o=a(this,gt).subarray(4,6),l=a(this,gt).subarray(16,18),[c,h,u,d]=v(this,pe,Xl).call(this);t.push(`L${(o[0]-e)/s} ${(o[1]-n)/r} L${c} ${h} L${u} ${d} L${(l[0]-e)/s} ${(l[1]-n)/r}`)},fv=function(t){const e=a(this,gt),[n,s,r,o]=a(this,dn),[l,c,h,u]=v(this,pe,Xl).call(this),d=new Float32Array(36);return d.set([NaN,NaN,NaN,NaN,(e[2]-n)/r,(e[3]-s)/o,NaN,NaN,NaN,NaN,(e[4]-n)/r,(e[5]-s)/o,NaN,NaN,NaN,NaN,l,c,NaN,NaN,NaN,NaN,h,u,NaN,NaN,NaN,NaN,(e[16]-n)/r,(e[17]-s)/o,NaN,NaN,NaN,NaN,(e[14]-n)/r,(e[15]-s)/o],0),this.newFreeDrawOutline(d,t,a(this,dn),a(this,tl),a(this,Qa),a(this,Za))},pv=function(t,e){const n=a(this,Yn);return t.set([NaN,NaN,NaN,NaN,n[4],n[5]],e),e+=6},gv=function(t,e){const n=a(this,gt).subarray(4,6),s=a(this,gt).subarray(16,18),[r,o,l,c]=a(this,dn),[h,u,d,f]=v(this,pe,Xl).call(this);return t.set([NaN,NaN,NaN,NaN,(n[0]-r)/l,(n[1]-o)/c,NaN,NaN,NaN,NaN,h,u,NaN,NaN,NaN,NaN,d,f,NaN,NaN,NaN,NaN,(s[0]-r)/l,(s[1]-o)/c],e),e+=24},b(Gs,Ch,8),b(Gs,Ed,2),b(Gs,_d,a(Gs,Ch)+a(Gs,Ed));let id=Gs;var nl,yo,ui,Th,fn,Rh,ne,xd,yv;class mv extends J{constructor(e,n,s,r,o,l){super();b(this,xd);b(this,nl);b(this,yo,new Float32Array(4));b(this,ui);b(this,Th);b(this,fn);b(this,Rh);b(this,ne);m(this,ne,e),m(this,fn,n),m(this,nl,s),m(this,Rh,r),m(this,ui,o),m(this,Th,l),this.lastPoint=[NaN,NaN],v(this,xd,yv).call(this,l);const[c,h,u,d]=a(this,yo);for(let f=0,g=e.length;f<g;f+=2)e[f]=(e[f]-c)/u,e[f+1]=(e[f+1]-h)/d;for(let f=0,g=n.length;f<g;f+=2)n[f]=(n[f]-c)/u,n[f+1]=(n[f+1]-h)/d}toSVGPath(){const e=[`M${a(this,ne)[4]} ${a(this,ne)[5]}`];for(let n=6,s=a(this,ne).length;n<s;n+=6){if(isNaN(a(this,ne)[n])){e.push(`L${a(this,ne)[n+4]} ${a(this,ne)[n+5]}`);continue}e.push(`C${a(this,ne)[n]} ${a(this,ne)[n+1]} ${a(this,ne)[n+2]} ${a(this,ne)[n+3]} ${a(this,ne)[n+4]} ${a(this,ne)[n+5]}`)}return e.push("Z"),e.join(" ")}serialize([e,n,s,r],o){const l=s-e,c=r-n;let h,u;switch(o){case 0:h=J._rescale(a(this,ne),e,r,l,-c),u=J._rescale(a(this,fn),e,r,l,-c);break;case 90:h=J._rescaleAndSwap(a(this,ne),e,n,l,c),u=J._rescaleAndSwap(a(this,fn),e,n,l,c);break;case 180:h=J._rescale(a(this,ne),s,n,-l,c),u=J._rescale(a(this,fn),s,n,-l,c);break;case 270:h=J._rescaleAndSwap(a(this,ne),s,r,-l,-c),u=J._rescaleAndSwap(a(this,fn),s,r,-l,-c);break}return{outline:Array.from(h),points:[Array.from(u)]}}get box(){return a(this,yo)}newOutliner(e,n,s,r,o,l=0){return new id(e,n,s,r,o,l)}getNewOutline(e,n){const[s,r,o,l]=a(this,yo),[c,h,u,d]=a(this,nl),f=o*u,g=l*d,y=s*u+c,p=r*d+h,A=this.newOutliner({x:a(this,fn)[0]*f+y,y:a(this,fn)[1]*g+p},a(this,nl),a(this,Rh),e,a(this,Th),n??a(this,ui));for(let w=2;w<a(this,fn).length;w+=2)A.add({x:a(this,fn)[w]*f+y,y:a(this,fn)[w+1]*g+p});return A.getOutlines()}}nl=new WeakMap,yo=new WeakMap,ui=new WeakMap,Th=new WeakMap,fn=new WeakMap,Rh=new WeakMap,ne=new WeakMap,xd=new WeakSet,yv=function(e){const n=a(this,ne);let s=n[4],r=n[5];const o=[s,r,s,r];let l=s,c=r;const h=e?Math.max:Math.min;for(let d=6,f=n.length;d<f;d+=6){const g=n[d+4],y=n[d+5];if(isNaN(n[d]))et.pointBoundingBox(g,y,o),c<y?(l=g,c=y):c===y&&(l=h(l,g));else{const p=[1/0,1/0,-1/0,-1/0];et.bezierBoundingBox(s,r,...n.slice(d,d+6),p),et.rectBoundingBox(...p,o),c<p[3]?(l=p[2],c=p[3]):c===p[3]&&(l=h(l,p[2]))}s=g,r=y}const u=a(this,yo);u[0]=o[0]-a(this,ui),u[1]=o[1]-a(this,ui),u[2]=o[2]-o[0]+2*a(this,ui),u[3]=o[3]-o[1]+2*a(this,ui),this.lastPoint=[l,c]};var Ph,kh,Qi,Kn,Ke,bv,Bu,vv,Av,qp;class Vp{constructor(t,e=0,n=0,s=!0){b(this,Ke);b(this,Ph);b(this,kh);b(this,Qi,[]);b(this,Kn,[]);const r=[1/0,1/0,-1/0,-1/0],o=10**-4;for(const{x:g,y,width:p,height:A}of t){const w=Math.floor((g-e)/o)*o,T=Math.ceil((g+p+e)/o)*o,x=Math.floor((y-e)/o)*o,_=Math.ceil((y+A+e)/o)*o,E=[w,x,_,!0],R=[T,x,_,!1];a(this,Qi).push(E,R),et.rectBoundingBox(w,x,T,_,r)}const l=r[2]-r[0]+2*n,c=r[3]-r[1]+2*n,h=r[0]-n,u=r[1]-n,d=a(this,Qi).at(s?-1:-2),f=[d[0],d[2]];for(const g of a(this,Qi)){const[y,p,A]=g;g[0]=(y-h)/l,g[1]=(p-u)/c,g[2]=(A-u)/c}m(this,Ph,new Float32Array([h,u,l,c])),m(this,kh,f)}getOutlines(){a(this,Qi).sort((e,n)=>e[0]-n[0]||e[1]-n[1]||e[2]-n[2]);const t=[];for(const e of a(this,Qi))e[3]?(t.push(...v(this,Ke,qp).call(this,e)),v(this,Ke,vv).call(this,e)):(v(this,Ke,Av).call(this,e),t.push(...v(this,Ke,qp).call(this,e)));return v(this,Ke,bv).call(this,t)}}Ph=new WeakMap,kh=new WeakMap,Qi=new WeakMap,Kn=new WeakMap,Ke=new WeakSet,bv=function(t){const e=[],n=new Set;for(const o of t){const[l,c,h]=o;e.push([l,c,o],[l,h,o])}e.sort((o,l)=>o[1]-l[1]||o[0]-l[0]);for(let o=0,l=e.length;o<l;o+=2){const c=e[o][2],h=e[o+1][2];c.push(h),h.push(c),n.add(c),n.add(h)}const s=[];let r;for(;n.size>0;){const o=n.values().next().value;let[l,c,h,u,d]=o;n.delete(o);let f=l,g=c;for(r=[l,h],s.push(r);;){let y;if(n.has(u))y=u;else if(n.has(d))y=d;else break;n.delete(y),[l,c,h,u,d]=y,f!==l&&(r.push(f,g,l,g===c?c:h),f=l),g=g===c?h:c}r.push(f,g)}return new Nx(s,a(this,Ph),a(this,kh))},Bu=function(t){const e=a(this,Kn);let n=0,s=e.length-1;for(;n<=s;){const r=n+s>>1,o=e[r][0];if(o===t)return r;o<t?n=r+1:s=r-1}return s+1},vv=function([,t,e]){const n=v(this,Ke,Bu).call(this,t);a(this,Kn).splice(n,0,[t,e])},Av=function([,t,e]){const n=v(this,Ke,Bu).call(this,t);for(let s=n;s<a(this,Kn).length;s++){const[r,o]=a(this,Kn)[s];if(r!==t)break;if(r===t&&o===e){a(this,Kn).splice(s,1);return}}for(let s=n-1;s>=0;s--){const[r,o]=a(this,Kn)[s];if(r!==t)break;if(r===t&&o===e){a(this,Kn).splice(s,1);return}}},qp=function(t){const[e,n,s]=t,r=[[e,n,s]],o=v(this,Ke,Bu).call(this,s);for(let l=0;l<o;l++){const[c,h]=a(this,Kn)[l];for(let u=0,d=r.length;u<d;u++){const[,f,g]=r[u];if(!(h<=f||g<=c)){if(f>=c){if(g>h)r[u][1]=h;else{if(d===1)return[];r.splice(u,1),u--,d--}continue}r[u][2]=c,g>h&&r.push([e,h,g])}}}return r};var Ih,sl;class Nx extends J{constructor(e,n,s){super();b(this,Ih);b(this,sl);m(this,sl,e),m(this,Ih,n),this.lastPoint=s}toSVGPath(){const e=[];for(const n of a(this,sl)){let[s,r]=n;e.push(`M${s} ${r}`);for(let o=2;o<n.length;o+=2){const l=n[o],c=n[o+1];l===s?(e.push(`V${c}`),r=c):c===r&&(e.push(`H${l}`),s=l)}e.push("Z")}return e.join(" ")}serialize([e,n,s,r],o){const l=[],c=s-e,h=r-n;for(const u of a(this,sl)){const d=new Array(u.length);for(let f=0;f<u.length;f+=2)d[f]=e+u[f]*c,d[f+1]=r-u[f+1]*h;l.push(d)}return l}get box(){return a(this,Ih)}get classNamesForOutlining(){return["highlightOutline"]}}Ih=new WeakMap,sl=new WeakMap;class Xp extends id{newFreeDrawOutline(t,e,n,s,r,o){return new Fx(t,e,n,s,r,o)}}class Fx extends mv{newOutliner(t,e,n,s,r,o=0){return new Xp(t,e,n,s,r,o)}}var Jn,bo,il,fe,Lh,rl,Mh,Oh,Zi,Qn,ol,Dh,It,Yp,Kp,Jp,Er,wv,Ti;const Qe=class Qe{constructor({editor:t=null,uiManager:e=null}){b(this,It);b(this,Jn,null);b(this,bo,null);b(this,il);b(this,fe,null);b(this,Lh,!1);b(this,rl,!1);b(this,Mh,null);b(this,Oh);b(this,Zi,null);b(this,Qn,null);b(this,ol);var n;t?(m(this,rl,!1),m(this,ol,yt.HIGHLIGHT_COLOR),m(this,Mh,t)):(m(this,rl,!0),m(this,ol,yt.HIGHLIGHT_DEFAULT_COLOR)),m(this,Qn,(t==null?void 0:t._uiManager)||e),m(this,Oh,a(this,Qn)._eventBus),m(this,il,(t==null?void 0:t.color)||((n=a(this,Qn))==null?void 0:n.highlightColors.values().next().value)||"#FFFF98"),a(Qe,Dh)||m(Qe,Dh,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return mt(this,"_keyboardManager",new Jh([[["Escape","mac+Escape"],Qe.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],Qe.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],Qe.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],Qe.prototype._moveToPrevious],[["Home","mac+Home"],Qe.prototype._moveToBeginning],[["End","mac+End"],Qe.prototype._moveToEnd]]))}renderButton(){const t=m(this,Jn,document.createElement("button"));t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.setAttribute("aria-haspopup",!0);const e=a(this,Qn)._signal;t.addEventListener("click",v(this,It,Er).bind(this),{signal:e}),t.addEventListener("keydown",v(this,It,Jp).bind(this),{signal:e});const n=m(this,bo,document.createElement("span"));return n.className="swatch",n.setAttribute("aria-hidden",!0),n.style.backgroundColor=a(this,il),t.append(n),t}renderMainDropdown(){const t=m(this,fe,v(this,It,Yp).call(this));return t.setAttribute("aria-orientation","horizontal"),t.setAttribute("aria-labelledby","highlightColorPickerLabel"),t}_colorSelectFromKeyboard(t){if(t.target===a(this,Jn)){v(this,It,Er).call(this,t);return}const e=t.target.getAttribute("data-color");e&&v(this,It,Kp).call(this,e,t)}_moveToNext(t){var e,n;if(!a(this,It,Ti)){v(this,It,Er).call(this,t);return}if(t.target===a(this,Jn)){(e=a(this,fe).firstChild)==null||e.focus();return}(n=t.target.nextSibling)==null||n.focus()}_moveToPrevious(t){var e,n;if(t.target===((e=a(this,fe))==null?void 0:e.firstChild)||t.target===a(this,Jn)){a(this,It,Ti)&&this._hideDropdownFromKeyboard();return}a(this,It,Ti)||v(this,It,Er).call(this,t),(n=t.target.previousSibling)==null||n.focus()}_moveToBeginning(t){var e;if(!a(this,It,Ti)){v(this,It,Er).call(this,t);return}(e=a(this,fe).firstChild)==null||e.focus()}_moveToEnd(t){var e;if(!a(this,It,Ti)){v(this,It,Er).call(this,t);return}(e=a(this,fe).lastChild)==null||e.focus()}hideDropdown(){var t,e;(t=a(this,fe))==null||t.classList.add("hidden"),(e=a(this,Zi))==null||e.abort(),m(this,Zi,null)}_hideDropdownFromKeyboard(){var t;if(!a(this,rl)){if(!a(this,It,Ti)){(t=a(this,Mh))==null||t.unselect();return}this.hideDropdown(),a(this,Jn).focus({preventScroll:!0,focusVisible:a(this,Lh)})}}updateColor(t){if(a(this,bo)&&(a(this,bo).style.backgroundColor=t),!a(this,fe))return;const e=a(this,Qn).highlightColors.values();for(const n of a(this,fe).children)n.setAttribute("aria-selected",e.next().value===t)}destroy(){var t,e;(t=a(this,Jn))==null||t.remove(),m(this,Jn,null),m(this,bo,null),(e=a(this,fe))==null||e.remove(),m(this,fe,null)}};Jn=new WeakMap,bo=new WeakMap,il=new WeakMap,fe=new WeakMap,Lh=new WeakMap,rl=new WeakMap,Mh=new WeakMap,Oh=new WeakMap,Zi=new WeakMap,Qn=new WeakMap,ol=new WeakMap,Dh=new WeakMap,It=new WeakSet,Yp=function(){const t=document.createElement("div"),e=a(this,Qn)._signal;t.addEventListener("contextmenu",jn,{signal:e}),t.className="dropdown",t.role="listbox",t.setAttribute("aria-multiselectable",!1),t.setAttribute("aria-orientation","vertical"),t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[n,s]of a(this,Qn).highlightColors){const r=document.createElement("button");r.tabIndex="0",r.role="option",r.setAttribute("data-color",s),r.title=n,r.setAttribute("data-l10n-id",a(Qe,Dh)[n]);const o=document.createElement("span");r.append(o),o.className="swatch",o.style.backgroundColor=s,r.setAttribute("aria-selected",s===a(this,il)),r.addEventListener("click",v(this,It,Kp).bind(this,s),{signal:e}),t.append(r)}return t.addEventListener("keydown",v(this,It,Jp).bind(this),{signal:e}),t},Kp=function(t,e){e.stopPropagation(),a(this,Oh).dispatch("switchannotationeditorparams",{source:this,type:a(this,ol),value:t})},Jp=function(t){Qe._keyboardManager.exec(this,t)},Er=function(t){if(a(this,It,Ti)){this.hideDropdown();return}if(m(this,Lh,t.detail===0),a(this,Zi)||(m(this,Zi,new AbortController),window.addEventListener("pointerdown",v(this,It,wv).bind(this),{signal:a(this,Qn).combinedSignal(a(this,Zi))})),a(this,fe)){a(this,fe).classList.remove("hidden");return}const e=m(this,fe,v(this,It,Yp).call(this));a(this,Jn).append(e)},wv=function(t){var e;(e=a(this,fe))!=null&&e.contains(t.target)||this.hideDropdown()},Ti=function(){return a(this,fe)&&!a(this,fe).classList.contains("hidden")},b(Qe,Dh,null);let gc=Qe;var al,Nh,di,vo,ll,en,Fh,$h,Ao,In,pn,xe,cl,fi,Ne,hl,Ln,Bh,ht,Qp,ju,Sv,Ev,_v,Zp,_r,$n,na,xv,Hu,Yl,Cv,Tv,Rv,Pv,kv;const Et=class Et extends jt{constructor(e){super({...e,name:"highlightEditor"});b(this,ht);b(this,al,null);b(this,Nh,0);b(this,di);b(this,vo,null);b(this,ll,null);b(this,en,null);b(this,Fh,null);b(this,$h,0);b(this,Ao,null);b(this,In,null);b(this,pn,null);b(this,xe,!1);b(this,cl,null);b(this,fi);b(this,Ne,null);b(this,hl,"");b(this,Ln);b(this,Bh,"");this.color=e.color||Et._defaultColor,m(this,Ln,e.thickness||Et._defaultThickness),m(this,fi,e.opacity||Et._defaultOpacity),m(this,di,e.boxes||null),m(this,Bh,e.methodOfCreation||""),m(this,hl,e.text||""),this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",e.highlightId>-1?(m(this,xe,!0),v(this,ht,ju).call(this,e),v(this,ht,_r).call(this)):a(this,di)&&(m(this,al,e.anchorNode),m(this,Nh,e.anchorOffset),m(this,Fh,e.focusNode),m(this,$h,e.focusOffset),v(this,ht,Qp).call(this),v(this,ht,_r).call(this),this.rotate(this.rotation))}static get _keyboardManager(){const e=Et.prototype;return mt(this,"_keyboardManager",new Jh([[["ArrowLeft","mac+ArrowLeft"],e._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],e._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],e._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],e._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:a(this,xe)?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:a(this,Ln),methodOfCreation:a(this,Bh)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(e){return{numberOfColors:e.get("color").size}}static initialize(e,n){var s;jt.initialize(e,n),Et._defaultColor||(Et._defaultColor=((s=n.highlightColors)==null?void 0:s.values().next().value)||"#fff066")}static updateDefaultParams(e,n){switch(e){case yt.HIGHLIGHT_DEFAULT_COLOR:Et._defaultColor=n;break;case yt.HIGHLIGHT_THICKNESS:Et._defaultThickness=n;break}}translateInPage(e,n){}get toolbarPosition(){return a(this,cl)}updateParams(e,n){switch(e){case yt.HIGHLIGHT_COLOR:v(this,ht,Sv).call(this,n);break;case yt.HIGHLIGHT_THICKNESS:v(this,ht,Ev).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[yt.HIGHLIGHT_DEFAULT_COLOR,Et._defaultColor],[yt.HIGHLIGHT_THICKNESS,Et._defaultThickness]]}get propertiesToUpdate(){return[[yt.HIGHLIGHT_COLOR,this.color||Et._defaultColor],[yt.HIGHLIGHT_THICKNESS,a(this,Ln)||Et._defaultThickness],[yt.HIGHLIGHT_FREE,a(this,xe)]]}async addEditToolbar(){const e=await super.addEditToolbar();return e?(this._uiManager.highlightColors&&(m(this,ll,new gc({editor:this})),e.addColorPicker(a(this,ll))),e):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(v(this,ht,Yl).call(this))}getBaseTranslation(){return[0,0]}getRect(e,n){return super.getRect(e,n,v(this,ht,Yl).call(this))}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),e&&this.div.focus()}remove(){v(this,ht,Zp).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(v(this,ht,_r).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){var s;let n=!1;this.parent&&!e?v(this,ht,Zp).call(this):e&&(v(this,ht,_r).call(this,e),n=!this.parent&&((s=this.div)==null?void 0:s.classList.contains("selectedEditor"))),super.setParent(e),this.show(this._isVisible),n&&this.select()}rotate(e){var r,o,l;const{drawLayer:n}=this.parent;let s;a(this,xe)?(e=(e-this.rotation+360)%360,s=v(r=Et,$n,na).call(r,a(this,In).box,e)):s=v(o=Et,$n,na).call(o,[this.x,this.y,this.width,this.height],e),n.updateProperties(a(this,pn),{bbox:s,root:{"data-main-rotation":e}}),n.updateProperties(a(this,Ne),{bbox:v(l=Et,$n,na).call(l,a(this,en).box,e),root:{"data-main-rotation":e}})}render(){if(this.div)return this.div;const e=super.render();a(this,hl)&&(e.setAttribute("aria-label",a(this,hl)),e.setAttribute("role","mark")),a(this,xe)?e.classList.add("free"):this.div.addEventListener("keydown",v(this,ht,xv).bind(this),{signal:this._uiManager._signal});const n=m(this,Ao,document.createElement("div"));e.append(n),n.setAttribute("aria-hidden","true"),n.className="internal",n.style.clipPath=a(this,vo);const[s,r]=this.parentDimensions;return this.setDims(this.width*s,this.height*r),Yb(this,a(this,Ao),["pointerover","pointerleave"]),this.enableEditing(),e}pointerover(){var e;this.isSelected||(e=this.parent)==null||e.drawLayer.updateProperties(a(this,Ne),{rootClass:{hovered:!0}})}pointerleave(){var e;this.isSelected||(e=this.parent)==null||e.drawLayer.updateProperties(a(this,Ne),{rootClass:{hovered:!1}})}_moveCaret(e){switch(this.parent.unselect(this),e){case 0:case 2:v(this,ht,Hu).call(this,!0);break;case 1:case 3:v(this,ht,Hu).call(this,!1);break}}select(){var e;super.select(),a(this,Ne)&&((e=this.parent)==null||e.drawLayer.updateProperties(a(this,Ne),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var e;super.unselect(),a(this,Ne)&&((e=this.parent)==null||e.drawLayer.updateProperties(a(this,Ne),{rootClass:{selected:!1}}),a(this,xe)||v(this,ht,Hu).call(this,!1))}get _mustFixPosition(){return!a(this,xe)}show(e=this._isVisible){super.show(e),this.parent&&(this.parent.drawLayer.updateProperties(a(this,pn),{rootClass:{hidden:!e}}),this.parent.drawLayer.updateProperties(a(this,Ne),{rootClass:{hidden:!e}}))}static startHighlighting(e,n,{target:s,x:r,y:o}){const{x:l,y:c,width:h,height:u}=s.getBoundingClientRect(),d=new AbortController,f=e.combinedSignal(d),g=y=>{d.abort(),v(this,$n,Pv).call(this,e,y)};window.addEventListener("blur",g,{signal:f}),window.addEventListener("pointerup",g,{signal:f}),window.addEventListener("pointerdown",se,{capture:!0,passive:!1,signal:f}),window.addEventListener("contextmenu",jn,{signal:f}),s.addEventListener("pointermove",v(this,$n,Rv).bind(this,e),{signal:f}),this._freeHighlight=new Xp({x:r,y:o},[l,c,h,u],e.scale,this._defaultThickness/2,n,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static async deserialize(e,n,s){var p,A,w,T;let r=null;if(e instanceof sv){const{data:{quadPoints:x,rect:_,rotation:E,id:R,color:P,opacity:L,popupRef:O},parent:{page:{pageNumber:S}}}=e;r=e={annotationType:at.HIGHLIGHT,color:Array.from(P),opacity:L,quadPoints:x,boxes:null,pageIndex:S-1,rect:_.slice(0),rotation:E,id:R,deleted:!1,popupRef:O}}else if(e instanceof Xg){const{data:{inkLists:x,rect:_,rotation:E,id:R,color:P,borderStyle:{rawWidth:L},popupRef:O},parent:{page:{pageNumber:S}}}=e;r=e={annotationType:at.HIGHLIGHT,color:Array.from(P),thickness:L,inkLists:x,boxes:null,pageIndex:S-1,rect:_.slice(0),rotation:E,id:R,deleted:!1,popupRef:O}}const{color:o,quadPoints:l,inkLists:c,opacity:h}=e,u=await super.deserialize(e,n,s);u.color=et.makeHexColor(...o),m(u,fi,h||1),c&&m(u,Ln,e.thickness),u.annotationElementId=e.id||null,u._initialData=r;const[d,f]=u.pageDimensions,[g,y]=u.pageTranslation;if(l){const x=m(u,di,[]);for(let _=0;_<l.length;_+=8)x.push({x:(l[_]-g)/d,y:1-(l[_+1]-y)/f,width:(l[_+2]-l[_])/d,height:(l[_+1]-l[_+5])/f});v(p=u,ht,Qp).call(p),v(A=u,ht,_r).call(A),u.rotate(u.rotation)}else if(c){m(u,xe,!0);const x=c[0],_={x:x[0]-g,y:f-(x[1]-y)},E=new Xp(_,[0,0,d,f],1,a(u,Ln)/2,!0,.001);for(let L=0,O=x.length;L<O;L+=2)_.x=x[L]-g,_.y=f-(x[L+1]-y),E.add(_);const{id:R,clipPathId:P}=n.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:u.color,"fill-opacity":u._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:E.toSVGPath()}},!0,!0);v(w=u,ht,ju).call(w,{highlightOutlines:E.getOutlines(),highlightId:R,clipPathId:P}),v(T=u,ht,_r).call(T),u.rotate(u.parentRotation)}return u}serialize(e=!1){if(this.isEmpty()||e)return null;if(this.deleted)return this.serializeDeleted();const n=this.getRect(0,0),s=jt._colorManager.convert(this.color),r={annotationType:at.HIGHLIGHT,color:s,opacity:a(this,fi),thickness:a(this,Ln),quadPoints:v(this,ht,Cv).call(this),outlines:v(this,ht,Tv).call(this,n),pageIndex:this.pageIndex,rect:n,rotation:v(this,ht,Yl).call(this),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!v(this,ht,kv).call(this,r)?null:(r.id=this.annotationElementId,r)}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};al=new WeakMap,Nh=new WeakMap,di=new WeakMap,vo=new WeakMap,ll=new WeakMap,en=new WeakMap,Fh=new WeakMap,$h=new WeakMap,Ao=new WeakMap,In=new WeakMap,pn=new WeakMap,xe=new WeakMap,cl=new WeakMap,fi=new WeakMap,Ne=new WeakMap,hl=new WeakMap,Ln=new WeakMap,Bh=new WeakMap,ht=new WeakSet,Qp=function(){const e=new Vp(a(this,di),.001);m(this,In,e.getOutlines()),[this.x,this.y,this.width,this.height]=a(this,In).box;const n=new Vp(a(this,di),.0025,.001,this._uiManager.direction==="ltr");m(this,en,n.getOutlines());const{lastPoint:s}=a(this,en);m(this,cl,[(s[0]-this.x)/this.width,(s[1]-this.y)/this.height])},ju=function({highlightOutlines:e,highlightId:n,clipPathId:s}){var d,f;if(m(this,In,e),m(this,en,e.getNewOutline(a(this,Ln)/2+1.5,.0025)),n>=0)m(this,pn,n),m(this,vo,s),this.parent.drawLayer.finalizeDraw(n,{bbox:e.box,path:{d:e.toSVGPath()}}),m(this,Ne,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:a(this,en).box,path:{d:a(this,en).toSVGPath()}},!0));else if(this.parent){const g=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(a(this,pn),{bbox:v(d=Et,$n,na).call(d,a(this,In).box,(g-this.rotation+360)%360),path:{d:e.toSVGPath()}}),this.parent.drawLayer.updateProperties(a(this,Ne),{bbox:v(f=Et,$n,na).call(f,a(this,en).box,g),path:{d:a(this,en).toSVGPath()}})}const[o,l,c,h]=e.box;switch(this.rotation){case 0:this.x=o,this.y=l,this.width=c,this.height=h;break;case 90:{const[g,y]=this.parentDimensions;this.x=l,this.y=1-o,this.width=c*y/g,this.height=h*g/y;break}case 180:this.x=1-o,this.y=1-l,this.width=c,this.height=h;break;case 270:{const[g,y]=this.parentDimensions;this.x=1-l,this.y=o,this.width=c*y/g,this.height=h*g/y;break}}const{lastPoint:u}=a(this,en);m(this,cl,[(u[0]-o)/c,(u[1]-l)/h])},Sv=function(e){const n=(o,l)=>{var c,h;this.color=o,m(this,fi,l),(c=this.parent)==null||c.drawLayer.updateProperties(a(this,pn),{root:{fill:o,"fill-opacity":l}}),(h=a(this,ll))==null||h.updateColor(o)},s=this.color,r=a(this,fi);this.addCommands({cmd:n.bind(this,e,Et._defaultOpacity),undo:n.bind(this,s,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:yt.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(e)},!0)},Ev=function(e){const n=a(this,Ln),s=r=>{m(this,Ln,r),v(this,ht,_v).call(this,r)};this.addCommands({cmd:s.bind(this,e),undo:s.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:yt.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:e},!0)},_v=function(e){if(!a(this,xe))return;v(this,ht,ju).call(this,{highlightOutlines:a(this,In).getNewOutline(e/2)}),this.fixAndSetPosition();const[n,s]=this.parentDimensions;this.setDims(this.width*n,this.height*s)},Zp=function(){a(this,pn)===null||!this.parent||(this.parent.drawLayer.remove(a(this,pn)),m(this,pn,null),this.parent.drawLayer.remove(a(this,Ne)),m(this,Ne,null))},_r=function(e=this.parent){a(this,pn)===null&&({id:He(this,pn)._,clipPathId:He(this,vo)._}=e.drawLayer.draw({bbox:a(this,In).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":a(this,fi)},rootClass:{highlight:!0,free:a(this,xe)},path:{d:a(this,In).toSVGPath()}},!1,!0),m(this,Ne,e.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:a(this,xe)},bbox:a(this,en).box,path:{d:a(this,en).toSVGPath()}},a(this,xe))),a(this,Ao)&&(a(this,Ao).style.clipPath=a(this,vo)))},$n=new WeakSet,na=function([e,n,s,r],o){switch(o){case 90:return[1-n-r,e,r,s];case 180:return[1-e-s,1-n-r,s,r];case 270:return[n,1-e-s,r,s]}return[e,n,s,r]},xv=function(e){Et._keyboardManager.exec(this,e)},Hu=function(e){if(!a(this,al))return;const n=window.getSelection();e?n.setPosition(a(this,al),a(this,Nh)):n.setPosition(a(this,Fh),a(this,$h))},Yl=function(){return a(this,xe)?this.rotation:0},Cv=function(){if(a(this,xe))return null;const[e,n]=this.pageDimensions,[s,r]=this.pageTranslation,o=a(this,di),l=new Float32Array(o.length*8);let c=0;for(const{x:h,y:u,width:d,height:f}of o){const g=h*e+s,y=(1-u)*n+r;l[c]=l[c+4]=g,l[c+1]=l[c+3]=y,l[c+2]=l[c+6]=g+d*e,l[c+5]=l[c+7]=y-f*n,c+=8}return l},Tv=function(e){return a(this,In).serialize(e,v(this,ht,Yl).call(this))},Rv=function(e,n){this._freeHighlight.add(n)&&e.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})},Pv=function(e,n){this._freeHighlight.isEmpty()?e.drawLayer.remove(this._freeHighlightId):e.createAndAddNewEditor(n,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},kv=function(e){const{color:n}=this._initialData;return e.color.some((s,r)=>s!==n[r])},b(Et,$n),U(Et,"_defaultColor",null),U(Et,"_defaultOpacity",1),U(Et,"_defaultThickness",12),U(Et,"_type","highlight"),U(Et,"_editorType",at.HIGHLIGHT),U(Et,"_freeHighlightId",-1),U(Et,"_freeHighlight",null),U(Et,"_freeHighlightClipId","");let rd=Et;var wo;class Iv{constructor(){b(this,wo,Object.create(null))}updateProperty(t,e){this[t]=e,this.updateSVGProperty(t,e)}updateProperties(t){if(t)for(const[e,n]of Object.entries(t))e.startsWith("_")||this.updateProperty(e,n)}updateSVGProperty(t,e){a(this,wo)[t]=e}toSVGProperties(){const t=a(this,wo);return m(this,wo,Object.create(null)),{root:t}}reset(){m(this,wo,Object.create(null))}updateAll(t=this){this.updateProperties(t)}clone(){Lt("Not implemented")}}wo=new WeakMap;var gn,ul,ye,So,Eo,tr,er,nr,_o,At,tg,eg,ng,Kl,Lv,zu,Jl,sa;const Q=class Q extends jt{constructor(e){super(e);b(this,At);b(this,gn,null);b(this,ul);U(this,"_drawId",null);m(this,ul,e.mustBeCommitted||!1),this._addOutlines(e)}_addOutlines(e){e.drawOutlines&&(v(this,At,tg).call(this,e),v(this,At,Kl).call(this))}static _mergeSVGProperties(e,n){const s=new Set(Object.keys(e));for(const[r,o]of Object.entries(n))s.has(r)?Object.assign(e[r],o):e[r]=o;return e}static getDefaultDrawingOptions(e){Lt("Not implemented")}static get typesMap(){Lt("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(e,n){const s=this.typesMap.get(e);s&&this._defaultDrawingOptions.updateProperty(s,n),this._currentParent&&(a(Q,ye).updateProperty(s,n),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(e,n){const s=this.constructor.typesMap.get(e);s&&this._updateProperty(e,s,n)}static get defaultPropertiesToUpdate(){const e=[],n=this._defaultDrawingOptions;for(const[s,r]of this.typesMap)e.push([s,n[r]]);return e}get propertiesToUpdate(){const e=[],{_drawingOptions:n}=this;for(const[s,r]of this.constructor.typesMap)e.push([s,n[r]]);return e}_updateProperty(e,n,s){const r=this._drawingOptions,o=r[n],l=c=>{var u;r.updateProperty(n,c);const h=a(this,gn).updateProperty(n,c);h&&v(this,At,Jl).call(this,h),(u=this.parent)==null||u.drawLayer.updateProperties(this._drawId,r.toSVGProperties())};this.addCommands({cmd:l.bind(this,s),undo:l.bind(this,o),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:e,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,Q._mergeSVGProperties(a(this,gn).getPathResizingSVGProperties(v(this,At,zu).call(this)),{bbox:v(this,At,sa).call(this)}))}_onResized(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,Q._mergeSVGProperties(a(this,gn).getPathResizedSVGProperties(v(this,At,zu).call(this)),{bbox:v(this,At,sa).call(this)}))}_onTranslating(e,n){var s;(s=this.parent)==null||s.drawLayer.updateProperties(this._drawId,{bbox:v(this,At,sa).call(this)})}_onTranslated(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,Q._mergeSVGProperties(a(this,gn).getPathTranslatedSVGProperties(v(this,At,zu).call(this),this.parentDimensions),{bbox:v(this,At,sa).call(this)}))}_onStartDragging(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,a(this,ul)&&(m(this,ul,!1),this.commit(),this.parent.setSelected(this),e&&this.isOnScreen&&this.div.focus())}remove(){v(this,At,ng).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(v(this,At,Kl).call(this),v(this,At,Jl).call(this,a(this,gn).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){var s;let n=!1;this.parent&&!e?(this._uiManager.removeShouldRescale(this),v(this,At,ng).call(this)):e&&(this._uiManager.addShouldRescale(this),v(this,At,Kl).call(this,e),n=!this.parent&&((s=this.div)==null?void 0:s.classList.contains("selectedEditor"))),super.setParent(e),n&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,Q._mergeSVGProperties({bbox:v(this,At,sa).call(this)},a(this,gn).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&v(this,At,Jl).call(this,a(this,gn).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let e,n;this._isCopy&&(e=this.x,n=this.y);const s=super.render();s.classList.add("draw");const r=document.createElement("div");s.append(r),r.setAttribute("aria-hidden","true"),r.className="internal";const[o,l]=this.parentDimensions;return this.setDims(this.width*o,this.height*l),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(e,n),s}static createDrawerInstance(e,n,s,r,o){Lt("Not implemented")}static startDrawing(e,n,s,r){var A;const{target:o,offsetX:l,offsetY:c,pointerId:h,pointerType:u}=r;if(a(Q,er)&&a(Q,er)!==u)return;const{viewport:{rotation:d}}=e,{width:f,height:g}=o.getBoundingClientRect(),y=m(Q,So,new AbortController),p=e.combinedSignal(y);if(a(Q,tr)||m(Q,tr,h),a(Q,er)??m(Q,er,u),window.addEventListener("pointerup",w=>{var T;a(Q,tr)===w.pointerId?this._endDraw(w):(T=a(Q,nr))==null||T.delete(w.pointerId)},{signal:p}),window.addEventListener("pointercancel",w=>{var T;a(Q,tr)===w.pointerId?this._currentParent.endDrawingSession():(T=a(Q,nr))==null||T.delete(w.pointerId)},{signal:p}),window.addEventListener("pointerdown",w=>{a(Q,er)===w.pointerType&&((a(Q,nr)||m(Q,nr,new Set)).add(w.pointerId),a(Q,ye).isCancellable()&&(a(Q,ye).removeLastElement(),a(Q,ye).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:p}),window.addEventListener("contextmenu",jn,{signal:p}),o.addEventListener("pointermove",this._drawMove.bind(this),{signal:p}),o.addEventListener("touchmove",w=>{w.timeStamp===a(Q,_o)&&se(w)},{signal:p}),e.toggleDrawing(),(A=n._editorUndoBar)==null||A.hide(),a(Q,ye)){e.drawLayer.updateProperties(this._currentDrawId,a(Q,ye).startNew(l,c,f,g,d));return}n.updateUIForDefaultProperties(this),m(Q,ye,this.createDrawerInstance(l,c,f,g,d)),m(Q,Eo,this.getDefaultDrawingOptions()),this._currentParent=e,{id:this._currentDrawId}=e.drawLayer.draw(this._mergeSVGProperties(a(Q,Eo).toSVGProperties(),a(Q,ye).defaultSVGProperties),!0,!1)}static _drawMove(e){var o;if(m(Q,_o,-1),!a(Q,ye))return;const{offsetX:n,offsetY:s,pointerId:r}=e;if(a(Q,tr)===r){if(((o=a(Q,nr))==null?void 0:o.size)>=1){this._endDraw(e);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,a(Q,ye).add(n,s)),m(Q,_o,e.timeStamp),se(e)}}static _cleanup(e){e&&(this._currentDrawId=-1,this._currentParent=null,m(Q,ye,null),m(Q,Eo,null),m(Q,er,null),m(Q,_o,NaN)),a(Q,So)&&(a(Q,So).abort(),m(Q,So,null),m(Q,tr,NaN),m(Q,nr,null))}static _endDraw(e){const n=this._currentParent;if(n){if(n.toggleDrawing(!0),this._cleanup(!1),(e==null?void 0:e.target)===n.div&&n.drawLayer.updateProperties(this._currentDrawId,a(Q,ye).end(e.offsetX,e.offsetY)),this.supportMultipleDrawings){const s=a(Q,ye),r=this._currentDrawId,o=s.getLastElement();n.addCommands({cmd:()=>{n.drawLayer.updateProperties(r,s.setLastElement(o))},undo:()=>{n.drawLayer.updateProperties(r,s.removeLastElement())},mustExec:!1,type:yt.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(e){const n=this._currentParent;if(!n)return null;if(n.toggleDrawing(!0),n.cleanUndoStack(yt.DRAW_STEP),!a(Q,ye).isEmpty()){const{pageDimensions:[s,r],scale:o}=n,l=n.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:a(Q,ye).getOutlines(s*o,r*o,o,this._INNER_MARGIN),drawingOptions:a(Q,Eo),mustBeCommitted:!e});return this._cleanup(!0),l}return n.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(e){}static deserializeDraw(e,n,s,r,o,l){Lt("Not implemented")}static async deserialize(e,n,s){var d,f;const{rawDims:{pageWidth:r,pageHeight:o,pageX:l,pageY:c}}=n.viewport,h=this.deserializeDraw(l,c,r,o,this._INNER_MARGIN,e),u=await super.deserialize(e,n,s);return u.createDrawingOptions(e),v(d=u,At,tg).call(d,{drawOutlines:h}),v(f=u,At,Kl).call(f),u.onScaleChanging(),u.rotate(),u}serializeDraw(e){const[n,s]=this.pageTranslation,[r,o]=this.pageDimensions;return a(this,gn).serialize([n,s,r,o],e)}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};gn=new WeakMap,ul=new WeakMap,ye=new WeakMap,So=new WeakMap,Eo=new WeakMap,tr=new WeakMap,er=new WeakMap,nr=new WeakMap,_o=new WeakMap,At=new WeakSet,tg=function({drawOutlines:e,drawId:n,drawingOptions:s}){m(this,gn,e),this._drawingOptions||(this._drawingOptions=s),n>=0?(this._drawId=n,this.parent.drawLayer.finalizeDraw(n,e.defaultProperties)):this._drawId=v(this,At,eg).call(this,e,this.parent),v(this,At,Jl).call(this,e.box)},eg=function(e,n){const{id:s}=n.drawLayer.draw(Q._mergeSVGProperties(this._drawingOptions.toSVGProperties(),e.defaultSVGProperties),!1,!1);return s},ng=function(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())},Kl=function(e=this.parent){if(!(this._drawId!==null&&this.parent===e)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,e.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=v(this,At,eg).call(this,a(this,gn),e)}},Lv=function([e,n,s,r]){const{parentDimensions:[o,l],rotation:c}=this;switch(c){case 90:return[n,1-e,s*(l/o),r*(o/l)];case 180:return[1-e,1-n,s,r];case 270:return[1-n,e,s*(l/o),r*(o/l)];default:return[e,n,s,r]}},zu=function(){const{x:e,y:n,width:s,height:r,parentDimensions:[o,l],rotation:c}=this;switch(c){case 90:return[1-n,e,s*(o/l),r*(l/o)];case 180:return[1-e,1-n,s,r];case 270:return[n,1-e,s*(o/l),r*(l/o)];default:return[e,n,s,r]}},Jl=function(e){if([this.x,this.y,this.width,this.height]=v(this,At,Lv).call(this,e),this.div){this.fixAndSetPosition();const[n,s]=this.parentDimensions;this.setDims(this.width*n,this.height*s)}this._onResized()},sa=function(){const{x:e,y:n,width:s,height:r,rotation:o,parentRotation:l,parentDimensions:[c,h]}=this;switch((o*4+l)/90){case 1:return[1-n-r,e,r,s];case 2:return[1-e-s,1-n-r,s,r];case 3:return[n,1-e-s,r,s];case 4:return[e,n-s*(c/h),r*(h/c),s*(c/h)];case 5:return[1-n,e,s*(c/h),r*(h/c)];case 6:return[1-e-r*(h/c),1-n,r*(h/c),s*(c/h)];case 7:return[n-s*(c/h),1-e-r*(h/c),s*(c/h),r*(h/c)];case 8:return[e-s,n-r,s,r];case 9:return[1-n,e-s,r,s];case 10:return[1-e,1-n,s,r];case 11:return[n-r,1-e,r,s];case 12:return[e-r*(h/c),n,r*(h/c),s*(c/h)];case 13:return[1-n-s*(c/h),e-r*(h/c),s*(c/h),r*(h/c)];case 14:return[1-e,1-n-s*(c/h),r*(h/c),s*(c/h)];case 15:return[n,1-e,s*(c/h),r*(h/c)];default:return[e,n,s,r]}},U(Q,"_currentDrawId",-1),U(Q,"_currentParent",null),b(Q,ye,null),b(Q,So,null),b(Q,Eo,null),b(Q,tr,NaN),b(Q,er,null),b(Q,nr,null),b(Q,_o,NaN),U(Q,"_INNER_MARGIN",3);let od=Q;var ws,be,ve,xo,dl,Ue,Ce,Mn,Co,To,Ro,fl,Gu;class $x{constructor(t,e,n,s,r,o){b(this,fl);b(this,ws,new Float64Array(6));b(this,be);b(this,ve);b(this,xo);b(this,dl);b(this,Ue);b(this,Ce,"");b(this,Mn,0);b(this,Co,new tu);b(this,To);b(this,Ro);m(this,To,n),m(this,Ro,s),m(this,xo,r),m(this,dl,o),[t,e]=v(this,fl,Gu).call(this,t,e);const l=m(this,be,[NaN,NaN,NaN,NaN,t,e]);m(this,Ue,[t,e]),m(this,ve,[{line:l,points:a(this,Ue)}]),a(this,ws).set(l,0)}updateProperty(t,e){t==="stroke-width"&&m(this,dl,e)}isEmpty(){return!a(this,ve)||a(this,ve).length===0}isCancellable(){return a(this,Ue).length<=10}add(t,e){[t,e]=v(this,fl,Gu).call(this,t,e);const[n,s,r,o]=a(this,ws).subarray(2,6),l=t-r,c=e-o;return Math.hypot(a(this,To)*l,a(this,Ro)*c)<=2?null:(a(this,Ue).push(t,e),isNaN(n)?(a(this,ws).set([r,o,t,e],2),a(this,be).push(NaN,NaN,NaN,NaN,t,e),{path:{d:this.toSVGPath()}}):(isNaN(a(this,ws)[0])&&a(this,be).splice(6,6),a(this,ws).set([n,s,r,o,t,e],0),a(this,be).push(...J.createBezierPoints(n,s,r,o,t,e)),{path:{d:this.toSVGPath()}}))}end(t,e){const n=this.add(t,e);return n||(a(this,Ue).length===2?{path:{d:this.toSVGPath()}}:null)}startNew(t,e,n,s,r){m(this,To,n),m(this,Ro,s),m(this,xo,r),[t,e]=v(this,fl,Gu).call(this,t,e);const o=m(this,be,[NaN,NaN,NaN,NaN,t,e]);m(this,Ue,[t,e]);const l=a(this,ve).at(-1);return l&&(l.line=new Float32Array(l.line),l.points=new Float32Array(l.points)),a(this,ve).push({line:o,points:a(this,Ue)}),a(this,ws).set(o,0),m(this,Mn,0),this.toSVGPath(),null}getLastElement(){return a(this,ve).at(-1)}setLastElement(t){return a(this,ve)?(a(this,ve).push(t),m(this,be,t.line),m(this,Ue,t.points),m(this,Mn,0),{path:{d:this.toSVGPath()}}):a(this,Co).setLastElement(t)}removeLastElement(){if(!a(this,ve))return a(this,Co).removeLastElement();a(this,ve).pop(),m(this,Ce,"");for(let t=0,e=a(this,ve).length;t<e;t++){const{line:n,points:s}=a(this,ve)[t];m(this,be,n),m(this,Ue,s),m(this,Mn,0),this.toSVGPath()}return{path:{d:a(this,Ce)}}}toSVGPath(){const t=J.svgRound(a(this,be)[4]),e=J.svgRound(a(this,be)[5]);if(a(this,Ue).length===2)return m(this,Ce,`${a(this,Ce)} M ${t} ${e} Z`),a(this,Ce);if(a(this,Ue).length<=6){const s=a(this,Ce).lastIndexOf("M");m(this,Ce,`${a(this,Ce).slice(0,s)} M ${t} ${e}`),m(this,Mn,6)}if(a(this,Ue).length===4){const s=J.svgRound(a(this,be)[10]),r=J.svgRound(a(this,be)[11]);return m(this,Ce,`${a(this,Ce)} L ${s} ${r}`),m(this,Mn,12),a(this,Ce)}const n=[];a(this,Mn)===0&&(n.push(`M ${t} ${e}`),m(this,Mn,6));for(let s=a(this,Mn),r=a(this,be).length;s<r;s+=6){const[o,l,c,h,u,d]=a(this,be).slice(s,s+6).map(J.svgRound);n.push(`C${o} ${l} ${c} ${h} ${u} ${d}`)}return m(this,Ce,a(this,Ce)+n.join(" ")),m(this,Mn,a(this,be).length),a(this,Ce)}getOutlines(t,e,n,s){const r=a(this,ve).at(-1);return r.line=new Float32Array(r.line),r.points=new Float32Array(r.points),a(this,Co).build(a(this,ve),t,e,n,a(this,xo),a(this,dl),s),m(this,ws,null),m(this,be,null),m(this,ve,null),m(this,Ce,null),a(this,Co)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}ws=new WeakMap,be=new WeakMap,ve=new WeakMap,xo=new WeakMap,dl=new WeakMap,Ue=new WeakMap,Ce=new WeakMap,Mn=new WeakMap,Co=new WeakMap,To=new WeakMap,Ro=new WeakMap,fl=new WeakSet,Gu=function(t,e){return J._normalizePoint(t,e,a(this,To),a(this,Ro),a(this,xo))};var We,jh,Hh,mn,Ss,Es,pl,gl,Po,Re,Hs,Mv,Ov,Dv;class tu extends J{constructor(){super(...arguments);b(this,Re);b(this,We);b(this,jh,0);b(this,Hh);b(this,mn);b(this,Ss);b(this,Es);b(this,pl);b(this,gl);b(this,Po)}build(e,n,s,r,o,l,c){m(this,Ss,n),m(this,Es,s),m(this,pl,r),m(this,gl,o),m(this,Po,l),m(this,Hh,c??0),m(this,mn,e),v(this,Re,Ov).call(this)}get thickness(){return a(this,Po)}setLastElement(e){return a(this,mn).push(e),{path:{d:this.toSVGPath()}}}removeLastElement(){return a(this,mn).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const e=[];for(const{line:n}of a(this,mn)){if(e.push(`M${J.svgRound(n[4])} ${J.svgRound(n[5])}`),n.length===6){e.push("Z");continue}if(n.length===12&&isNaN(n[6])){e.push(`L${J.svgRound(n[10])} ${J.svgRound(n[11])}`);continue}for(let s=6,r=n.length;s<r;s+=6){const[o,l,c,h,u,d]=n.subarray(s,s+6).map(J.svgRound);e.push(`C${o} ${l} ${c} ${h} ${u} ${d}`)}}return e.join("")}serialize([e,n,s,r],o){const l=[],c=[],[h,u,d,f]=v(this,Re,Mv).call(this);let g,y,p,A,w,T,x,_,E;switch(a(this,gl)){case 0:E=J._rescale,g=e,y=n+r,p=s,A=-r,w=e+h*s,T=n+(1-u-f)*r,x=e+(h+d)*s,_=n+(1-u)*r;break;case 90:E=J._rescaleAndSwap,g=e,y=n,p=s,A=r,w=e+u*s,T=n+h*r,x=e+(u+f)*s,_=n+(h+d)*r;break;case 180:E=J._rescale,g=e+s,y=n,p=-s,A=r,w=e+(1-h-d)*s,T=n+u*r,x=e+(1-h)*s,_=n+(u+f)*r;break;case 270:E=J._rescaleAndSwap,g=e+s,y=n+r,p=-s,A=-r,w=e+(1-u-f)*s,T=n+(1-h-d)*r,x=e+(1-u)*s,_=n+(1-h)*r;break}for(const{line:R,points:P}of a(this,mn))l.push(E(R,g,y,p,A,o?new Array(R.length):null)),c.push(E(P,g,y,p,A,o?new Array(P.length):null));return{lines:l,points:c,rect:[w,T,x,_]}}static deserialize(e,n,s,r,o,{paths:{lines:l,points:c},rotation:h,thickness:u}){const d=[];let f,g,y,p,A;switch(h){case 0:A=J._rescale,f=-e/s,g=n/r+1,y=1/s,p=-1/r;break;case 90:A=J._rescaleAndSwap,f=-n/r,g=-e/s,y=1/r,p=1/s;break;case 180:A=J._rescale,f=e/s+1,g=-n/r,y=-1/s,p=1/r;break;case 270:A=J._rescaleAndSwap,f=n/r+1,g=e/s+1,y=-1/r,p=-1/s;break}if(!l){l=[];for(const T of c){const x=T.length;if(x===2){l.push(new Float32Array([NaN,NaN,NaN,NaN,T[0],T[1]]));continue}if(x===4){l.push(new Float32Array([NaN,NaN,NaN,NaN,T[0],T[1],NaN,NaN,NaN,NaN,T[2],T[3]]));continue}const _=new Float32Array(3*(x-2));l.push(_);let[E,R,P,L]=T.subarray(0,4);_.set([NaN,NaN,NaN,NaN,E,R],0);for(let O=4;O<x;O+=2){const S=T[O],I=T[O+1];_.set(J.createBezierPoints(E,R,P,L,S,I),(O-2)*3),[E,R,P,L]=[P,L,S,I]}}}for(let T=0,x=l.length;T<x;T++)d.push({line:A(l[T].map(_=>_??NaN),f,g,y,p),points:A(c[T].map(_=>_??NaN),f,g,y,p)});const w=new this.prototype.constructor;return w.build(d,s,r,1,h,u,o),w}get box(){return a(this,We)}updateProperty(e,n){return e==="stroke-width"?v(this,Re,Dv).call(this,n):null}updateParentDimensions([e,n],s){const[r,o]=v(this,Re,Hs).call(this);m(this,Ss,e),m(this,Es,n),m(this,pl,s);const[l,c]=v(this,Re,Hs).call(this),h=l-r,u=c-o,d=a(this,We);return d[0]-=h,d[1]-=u,d[2]+=2*h,d[3]+=2*u,d}updateRotation(e){return m(this,jh,e),{path:{transform:this.rotationTransform}}}get viewBox(){return a(this,We).map(J.svgRound).join(" ")}get defaultProperties(){const[e,n]=a(this,We);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${J.svgRound(e)} ${J.svgRound(n)}`}}}get rotationTransform(){const[,,e,n]=a(this,We);let s=0,r=0,o=0,l=0,c=0,h=0;switch(a(this,jh)){case 90:r=n/e,o=-e/n,c=e;break;case 180:s=-1,l=-1,c=e,h=n;break;case 270:r=-n/e,o=e/n,h=n;break;default:return""}return`matrix(${s} ${r} ${o} ${l} ${J.svgRound(c)} ${J.svgRound(h)})`}getPathResizingSVGProperties([e,n,s,r]){const[o,l]=v(this,Re,Hs).call(this),[c,h,u,d]=a(this,We);if(Math.abs(u-o)<=J.PRECISION||Math.abs(d-l)<=J.PRECISION){const A=e+s/2-(c+u/2),w=n+r/2-(h+d/2);return{path:{"transform-origin":`${J.svgRound(e)} ${J.svgRound(n)}`,transform:`${this.rotationTransform} translate(${A} ${w})`}}}const f=(s-2*o)/(u-2*o),g=(r-2*l)/(d-2*l),y=u/s,p=d/r;return{path:{"transform-origin":`${J.svgRound(c)} ${J.svgRound(h)}`,transform:`${this.rotationTransform} scale(${y} ${p}) translate(${J.svgRound(o)} ${J.svgRound(l)}) scale(${f} ${g}) translate(${J.svgRound(-o)} ${J.svgRound(-l)})`}}}getPathResizedSVGProperties([e,n,s,r]){const[o,l]=v(this,Re,Hs).call(this),c=a(this,We),[h,u,d,f]=c;if(c[0]=e,c[1]=n,c[2]=s,c[3]=r,Math.abs(d-o)<=J.PRECISION||Math.abs(f-l)<=J.PRECISION){const w=e+s/2-(h+d/2),T=n+r/2-(u+f/2);for(const{line:x,points:_}of a(this,mn))J._translate(x,w,T,x),J._translate(_,w,T,_);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${J.svgRound(e)} ${J.svgRound(n)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const g=(s-2*o)/(d-2*o),y=(r-2*l)/(f-2*l),p=-g*(h+o)+e+o,A=-y*(u+l)+n+l;if(g!==1||y!==1||p!==0||A!==0)for(const{line:w,points:T}of a(this,mn))J._rescale(w,p,A,g,y,w),J._rescale(T,p,A,g,y,T);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${J.svgRound(e)} ${J.svgRound(n)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([e,n],s){const[r,o]=s,l=a(this,We),c=e-l[0],h=n-l[1];if(a(this,Ss)===r&&a(this,Es)===o)for(const{line:u,points:d}of a(this,mn))J._translate(u,c,h,u),J._translate(d,c,h,d);else{const u=a(this,Ss)/r,d=a(this,Es)/o;m(this,Ss,r),m(this,Es,o);for(const{line:f,points:g}of a(this,mn))J._rescale(f,c,h,u,d,f),J._rescale(g,c,h,u,d,g);l[2]*=u,l[3]*=d}return l[0]=e,l[1]=n,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${J.svgRound(e)} ${J.svgRound(n)}`}}}get defaultSVGProperties(){const e=a(this,We);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${J.svgRound(e[0])} ${J.svgRound(e[1])}`,transform:this.rotationTransform||null},bbox:e}}}We=new WeakMap,jh=new WeakMap,Hh=new WeakMap,mn=new WeakMap,Ss=new WeakMap,Es=new WeakMap,pl=new WeakMap,gl=new WeakMap,Po=new WeakMap,Re=new WeakSet,Hs=function(e=a(this,Po)){const n=a(this,Hh)+e/2*a(this,pl);return a(this,gl)%180===0?[n/a(this,Ss),n/a(this,Es)]:[n/a(this,Es),n/a(this,Ss)]},Mv=function(){const[e,n,s,r]=a(this,We),[o,l]=v(this,Re,Hs).call(this,0);return[e+o,n+l,s-2*o,r-2*l]},Ov=function(){const e=m(this,We,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:r}of a(this,mn)){if(r.length<=12){for(let c=4,h=r.length;c<h;c+=6)et.pointBoundingBox(r[c],r[c+1],e);continue}let o=r[4],l=r[5];for(let c=6,h=r.length;c<h;c+=6){const[u,d,f,g,y,p]=r.subarray(c,c+6);et.bezierBoundingBox(o,l,u,d,f,g,y,p,e),o=y,l=p}}const[n,s]=v(this,Re,Hs).call(this);e[0]=$e(e[0]-n,0,1),e[1]=$e(e[1]-s,0,1),e[2]=$e(e[2]+n,0,1),e[3]=$e(e[3]+s,0,1),e[2]-=e[0],e[3]-=e[1]},Dv=function(e){const[n,s]=v(this,Re,Hs).call(this);m(this,Po,e);const[r,o]=v(this,Re,Hs).call(this),[l,c]=[r-n,o-s],h=a(this,We);return h[0]-=l,h[1]-=c,h[2]+=2*l,h[3]+=2*c,h};class Xd extends Iv{constructor(t){super(),this._viewParameters=t,super.updateProperties({fill:"none",stroke:jt._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(t,e){t==="stroke-width"&&(e??(e=this["stroke-width"]),e*=this._viewParameters.realScale),super.updateSVGProperty(t,e)}clone(){const t=new Xd(this._viewParameters);return t.updateAll(this),t}}var Cd,Nv;const aa=class aa extends od{constructor(e){super({...e,name:"inkEditor"});b(this,Cd);this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(e,n){jt.initialize(e,n),this._defaultDrawingOptions=new Xd(n.viewParameters)}static getDefaultDrawingOptions(e){const n=this._defaultDrawingOptions.clone();return n.updateProperties(e),n}static get supportMultipleDrawings(){return!0}static get typesMap(){return mt(this,"typesMap",new Map([[yt.INK_THICKNESS,"stroke-width"],[yt.INK_COLOR,"stroke"],[yt.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(e,n,s,r,o){return new $x(e,n,s,r,o,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(e,n,s,r,o,l){return tu.deserialize(e,n,s,r,o,l)}static async deserialize(e,n,s){let r=null;if(e instanceof Xg){const{data:{inkLists:l,rect:c,rotation:h,id:u,color:d,opacity:f,borderStyle:{rawWidth:g},popupRef:y},parent:{page:{pageNumber:p}}}=e;r=e={annotationType:at.INK,color:Array.from(d),thickness:g,opacity:f,paths:{points:l},boxes:null,pageIndex:p-1,rect:c.slice(0),rotation:h,id:u,deleted:!1,popupRef:y}}const o=await super.deserialize(e,n,s);return o.annotationElementId=e.id||null,o._initialData=r,o}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:e,_drawingOptions:n,parent:s}=this;n.updateSVGProperty("stroke-width"),s.drawLayer.updateProperties(e,n.toSVGProperties())}static onScaleChangingWhenDrawing(){const e=this._currentParent;e&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),e.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:e,thickness:n,opacity:s}){this._drawingOptions=aa.getDefaultDrawingOptions({stroke:et.makeHexColor(...e),"stroke-width":n,"stroke-opacity":s})}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:n,points:s,rect:r}=this.serializeDraw(e),{_drawingOptions:{stroke:o,"stroke-opacity":l,"stroke-width":c}}=this,h={annotationType:at.INK,color:jt._colorManager.convert(o),opacity:l,thickness:c,paths:{lines:n,points:s},pageIndex:this.pageIndex,rect:r,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?(h.isCopy=!0,h):this.annotationElementId&&!v(this,Cd,Nv).call(this,h)?null:(h.id=this.annotationElementId,h)}renderAnnotationElement(e){const{points:n,rect:s}=this.serializeDraw(!1);return e.updateEdited({rect:s,thickness:this._drawingOptions["stroke-width"],points:n}),null}};Cd=new WeakSet,Nv=function(e){const{color:n,thickness:s,opacity:r,pageIndex:o}=this._initialData;return this._hasBeenMoved||this._hasBeenResized||e.color.some((l,c)=>l!==n[c])||e.thickness!==s||e.opacity!==r||e.pageIndex!==o},U(aa,"_type","ink"),U(aa,"_editorType",at.INK),U(aa,"_defaultDrawingOptions",null);let sg=aa;class ig extends tu{toSVGPath(){let t=super.toSVGPath();return t.endsWith("Z")||(t+="Z"),t}}const pu=8,Il=3;var ko,Tt,rg,Zn,Fv,$v,og,Uu,Bv,jv,Hv,ag,lg,zv;class Is{static extractContoursFromText(t,{fontFamily:e,fontStyle:n,fontWeight:s},r,o,l,c){let h=new OffscreenCanvas(1,1),u=h.getContext("2d",{alpha:!1});const d=200,f=u.font=`${n} ${s} ${d}px ${e}`,{actualBoundingBoxLeft:g,actualBoundingBoxRight:y,actualBoundingBoxAscent:p,actualBoundingBoxDescent:A,fontBoundingBoxAscent:w,fontBoundingBoxDescent:T,width:x}=u.measureText(t),_=1.5,E=Math.ceil(Math.max(Math.abs(g)+Math.abs(y)||0,x)*_),R=Math.ceil(Math.max(Math.abs(p)+Math.abs(A)||d,Math.abs(w)+Math.abs(T)||d)*_);h=new OffscreenCanvas(E,R),u=h.getContext("2d",{alpha:!0,willReadFrequently:!0}),u.font=f,u.filter="grayscale(1)",u.fillStyle="white",u.fillRect(0,0,E,R),u.fillStyle="black",u.fillText(t,E*(_-1)/2,R*(3-_)/2);const P=v(this,Tt,ag).call(this,u.getImageData(0,0,E,R).data),L=v(this,Tt,Hv).call(this,P),O=v(this,Tt,lg).call(this,L),S=v(this,Tt,og).call(this,P,E,R,O);return this.processDrawnLines({lines:{curves:S,width:E,height:R},pageWidth:r,pageHeight:o,rotation:l,innerMargin:c,mustSmooth:!0,areContours:!0})}static process(t,e,n,s,r){const[o,l,c]=v(this,Tt,zv).call(this,t),[h,u]=v(this,Tt,jv).call(this,o,l,c,Math.hypot(l,c)*a(this,ko).sigmaSFactor,a(this,ko).sigmaR,a(this,ko).kernelSize),d=v(this,Tt,lg).call(this,u),f=v(this,Tt,og).call(this,h,l,c,d);return this.processDrawnLines({lines:{curves:f,width:l,height:c},pageWidth:e,pageHeight:n,rotation:s,innerMargin:r,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:t,pageWidth:e,pageHeight:n,rotation:s,innerMargin:r,mustSmooth:o,areContours:l}){s%180!==0&&([e,n]=[n,e]);const{curves:c,width:h,height:u}=t,d=t.thickness??0,f=[],g=Math.min(e/h,n/u),y=g/e,p=g/n,A=[];for(const{points:T}of c){const x=o?v(this,Tt,Bv).call(this,T):T;if(!x)continue;A.push(x);const _=x.length,E=new Float32Array(_),R=new Float32Array(3*(_===2?2:_-2));if(f.push({line:R,points:E}),_===2){E[0]=x[0]*y,E[1]=x[1]*p,R.set([NaN,NaN,NaN,NaN,E[0],E[1]],0);continue}let[P,L,O,S]=x;P*=y,L*=p,O*=y,S*=p,E.set([P,L,O,S],0),R.set([NaN,NaN,NaN,NaN,P,L],0);for(let I=4;I<_;I+=2){const B=E[I]=x[I]*y,H=E[I+1]=x[I+1]*p;R.set(J.createBezierPoints(P,L,O,S,B,H),(I-2)*3),[P,L,O,S]=[O,S,B,H]}}if(f.length===0)return null;const w=l?new ig:new tu;return w.build(f,e,n,1,s,l?0:d,r),{outline:w,newCurves:A,areContours:l,thickness:d,width:h,height:u}}static async compressSignature({outlines:t,areContours:e,thickness:n,width:s,height:r}){let o=1/0,l=-1/0,c=0;for(const x of t){c+=x.length;for(let _=2,E=x.length;_<E;_++){const R=x[_]-x[_-2];o=Math.min(o,R),l=Math.max(l,R)}}let h;o>=-128&&l<=127?h=Int8Array:o>=-32768&&l<=32767?h=Int16Array:h=Int32Array;const u=t.length,d=pu+Il*u,f=new Uint32Array(d);let g=0;f[g++]=d*Uint32Array.BYTES_PER_ELEMENT+(c-2*u)*h.BYTES_PER_ELEMENT,f[g++]=0,f[g++]=s,f[g++]=r,f[g++]=e?0:1,f[g++]=Math.max(0,Math.floor(n??0)),f[g++]=u,f[g++]=h.BYTES_PER_ELEMENT;for(const x of t)f[g++]=x.length-2,f[g++]=x[0],f[g++]=x[1];const y=new CompressionStream("deflate-raw"),p=y.writable.getWriter();await p.ready,p.write(f);const A=h.prototype.constructor;for(const x of t){const _=new A(x.length-2);for(let E=2,R=x.length;E<R;E++)_[E-2]=x[E]-x[E-2];p.write(_)}p.close();const w=await new Response(y.readable).arrayBuffer(),T=new Uint8Array(w);return $b(T)}static async decompressSignature(t){try{const e=p_(t),{readable:n,writable:s}=new DecompressionStream("deflate-raw"),r=s.getWriter();await r.ready,r.write(e).then(async()=>{await r.ready,await r.close()}).catch(()=>{});let o=null,l=0;for await(const x of n)o||(o=new Uint8Array(new Uint32Array(x.buffer,0,4)[0])),o.set(x,l),l+=x.length;const c=new Uint32Array(o.buffer,0,o.length>>2),h=c[1];if(h!==0)throw new Error(`Invalid version: ${h}`);const u=c[2],d=c[3],f=c[4]===0,g=c[5],y=c[6],p=c[7],A=[],w=(pu+Il*y)*Uint32Array.BYTES_PER_ELEMENT;let T;switch(p){case Int8Array.BYTES_PER_ELEMENT:T=new Int8Array(o.buffer,w);break;case Int16Array.BYTES_PER_ELEMENT:T=new Int16Array(o.buffer,w);break;case Int32Array.BYTES_PER_ELEMENT:T=new Int32Array(o.buffer,w);break}l=0;for(let x=0;x<y;x++){const _=c[Il*x+pu],E=new Float32Array(_+2);A.push(E);for(let R=0;R<Il-1;R++)E[R]=c[Il*x+pu+R+1];for(let R=0;R<_;R++)E[R+2]=E[R]+T[l++]}return{areContours:f,thickness:g,outlines:A,width:u,height:d}}catch(e){return lt(`decompressSignature: ${e}`),null}}}ko=new WeakMap,Tt=new WeakSet,rg=function(t,e,n,s){return n-=t,s-=e,n===0?s>0?0:4:n===1?s+6:2-s},Zn=new WeakMap,Fv=function(t,e,n,s,r,o,l){const c=v(this,Tt,rg).call(this,n,s,r,o);for(let h=0;h<8;h++){const u=(-h+c-l+16)%8,d=a(this,Zn)[2*u],f=a(this,Zn)[2*u+1];if(t[(n+d)*e+(s+f)]!==0)return u}return-1},$v=function(t,e,n,s,r,o,l){const c=v(this,Tt,rg).call(this,n,s,r,o);for(let h=0;h<8;h++){const u=(h+c+l+16)%8,d=a(this,Zn)[2*u],f=a(this,Zn)[2*u+1];if(t[(n+d)*e+(s+f)]!==0)return u}return-1},og=function(t,e,n,s){const r=t.length,o=new Int32Array(r);for(let u=0;u<r;u++)o[u]=t[u]<=s?1:0;for(let u=1;u<n-1;u++)o[u*e]=o[u*e+e-1]=0;for(let u=0;u<e;u++)o[u]=o[e*n-1-u]=0;let l=1,c;const h=[];for(let u=1;u<n-1;u++){c=1;for(let d=1;d<e-1;d++){const f=u*e+d,g=o[f];if(g===0)continue;let y=u,p=d;if(g===1&&o[f-1]===0)l+=1,p-=1;else if(g>=1&&o[f+1]===0)l+=1,p+=1,g>1&&(c=g);else{g!==1&&(c=Math.abs(g));continue}const A=[d,u],w=p===d+1,T={isHole:w,points:A,id:l,parent:0};h.push(T);let x;for(const I of h)if(I.id===c){x=I;break}x?x.isHole?T.parent=w?x.parent:c:T.parent=w?c:x.parent:T.parent=w?c:0;const _=v(this,Tt,Fv).call(this,o,e,u,d,y,p,0);if(_===-1){o[f]=-l,o[f]!==1&&(c=Math.abs(o[f]));continue}let E=a(this,Zn)[2*_],R=a(this,Zn)[2*_+1];const P=u+E,L=d+R;y=P,p=L;let O=u,S=d;for(;;){const I=v(this,Tt,$v).call(this,o,e,O,S,y,p,1);E=a(this,Zn)[2*I],R=a(this,Zn)[2*I+1];const B=O+E,H=S+R;A.push(H,B);const W=O*e+S;if(o[W+1]===0?o[W]=-l:o[W]===1&&(o[W]=l),B===u&&H===d&&O===P&&S===L){o[f]!==1&&(c=Math.abs(o[f]));break}else y=O,p=S,O=B,S=H}}}return h},Uu=function(t,e,n,s){if(n-e<=4){for(let P=e;P<n-2;P+=2)s.push(t[P],t[P+1]);return}const r=t[e],o=t[e+1],l=t[n-4]-r,c=t[n-3]-o,h=Math.hypot(l,c),u=l/h,d=c/h,f=u*o-d*r,g=c/l,y=1/h,p=Math.atan(g),A=Math.cos(p),w=Math.sin(p),T=y*(Math.abs(A)+Math.abs(w)),x=y*(1-T+T**2),_=Math.max(Math.atan(Math.abs(w+A)*x),Math.atan(Math.abs(w-A)*x));let E=0,R=e;for(let P=e+2;P<n-2;P+=2){const L=Math.abs(f-u*t[P+1]+d*t[P]);L>E&&(R=P,E=L)}E>(h*_)**2?(v(this,Tt,Uu).call(this,t,e,R+2,s),v(this,Tt,Uu).call(this,t,R,n,s)):s.push(r,o)},Bv=function(t){const e=[],n=t.length;return v(this,Tt,Uu).call(this,t,0,n,e),e.push(t[n-2],t[n-1]),e.length<=4?null:e},jv=function(t,e,n,s,r,o){const l=new Float32Array(o**2),c=-2*s**2,h=o>>1;for(let p=0;p<o;p++){const A=(p-h)**2;for(let w=0;w<o;w++)l[p*o+w]=Math.exp((A+(w-h)**2)/c)}const u=new Float32Array(256),d=-2*r**2;for(let p=0;p<256;p++)u[p]=Math.exp(p**2/d);const f=t.length,g=new Uint8Array(f),y=new Uint32Array(256);for(let p=0;p<n;p++)for(let A=0;A<e;A++){const w=p*e+A,T=t[w];let x=0,_=0;for(let R=0;R<o;R++){const P=p+R-h;if(!(P<0||P>=n))for(let L=0;L<o;L++){const O=A+L-h;if(O<0||O>=e)continue;const S=t[P*e+O],I=l[R*o+L]*u[Math.abs(S-T)];x+=S*I,_+=I}}const E=g[w]=Math.round(x/_);y[E]++}return[g,y]},Hv=function(t){const e=new Uint32Array(256);for(const n of t)e[n]++;return e},ag=function(t){const e=t.length,n=new Uint8ClampedArray(e>>2);let s=-1/0,r=1/0;for(let l=0,c=n.length;l<c;l++){if(t[(l<<2)+3]===0){s=n[l]=255;continue}const u=n[l]=t[l<<2];u>s&&(s=u),u<r&&(r=u)}const o=255/(s-r);for(let l=0;l<e;l++)n[l]=(n[l]-r)*o;return n},lg=function(t){let e,n=-1/0,s=-1/0;const r=t.findIndex(c=>c!==0);let o=r,l=r;for(e=r;e<256;e++){const c=t[e];c>n&&(e-o>s&&(s=e-o,l=e-1),n=c,o=e)}for(e=l-1;e>=0&&!(t[e]>t[e+1]);e--);return e},zv=function(t){const e=t,{width:n,height:s}=t,{maxDim:r}=a(this,ko);let o=n,l=s;if(n>r||s>r){let f=n,g=s,y=Math.log2(Math.max(n,s)/r);const p=Math.floor(y);y=y===p?p-1:p;for(let w=0;w<y;w++){o=Math.ceil(f/2),l=Math.ceil(g/2);const T=new OffscreenCanvas(o,l);T.getContext("2d").drawImage(t,0,0,f,g,0,0,o,l),f=o,g=l,t!==e&&t.close(),t=T.transferToImageBitmap()}const A=Math.min(r/o,r/l);o=Math.round(o*A),l=Math.round(l*A)}const h=new OffscreenCanvas(o,l).getContext("2d",{willReadFrequently:!0});h.filter="grayscale(1)",h.drawImage(t,0,0,t.width,t.height,0,0,o,l);const u=h.getImageData(0,0,o,l).data;return[v(this,Tt,ag).call(this,u),o,l]},b(Is,Tt),b(Is,ko,{maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16}),b(Is,Zn,new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]));class Kg extends Iv{constructor(){super(),super.updateProperties({fill:jt._defaultLineColor,"stroke-width":0})}clone(){const t=new Kg;return t.updateAll(this),t}}class Jg extends Xd{constructor(t){super(t),super.updateProperties({stroke:jt._defaultLineColor,"stroke-width":1})}clone(){const t=new Jg(this._viewParameters);return t.updateAll(this),t}}var sr,yn,ir,rr;const rn=class rn extends od{constructor(e){super({...e,mustBeCommitted:!0,name:"signatureEditor"});b(this,sr,!1);b(this,yn,null);b(this,ir,null);b(this,rr,null);this._willKeepAspectRatio=!0,m(this,ir,e.signatureData||null),m(this,yn,null),this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(e,n){jt.initialize(e,n),this._defaultDrawingOptions=new Kg,this._defaultDrawnSignatureOptions=new Jg(n.viewParameters)}static getDefaultDrawingOptions(e){const n=this._defaultDrawingOptions.clone();return n.updateProperties(e),n}static get supportMultipleDrawings(){return!1}static get typesMap(){return mt(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!a(this,yn)}}static computeTelemetryFinalData(e){const n=e.get("hasDescription");return{hasAltText:n.get(!0)??0,hasNoAltText:n.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let e,n;const{_isCopy:s}=this;if(s&&(this._isCopy=!1,e=this.x,n=this.y),super.render(),this._drawId===null)if(a(this,ir)){const{lines:r,mustSmooth:o,areContours:l,description:c,uuid:h,heightInPage:u}=a(this,ir),{rawDims:{pageWidth:d,pageHeight:f},rotation:g}=this.parent.viewport,y=Is.processDrawnLines({lines:r,pageWidth:d,pageHeight:f,rotation:g,innerMargin:rn._INNER_MARGIN,mustSmooth:o,areContours:l});this.addSignature(y,u,c,h)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);return s&&(this._isCopy=!0,this._moveAfterPaste(e,n)),this.div}setUuid(e){m(this,rr,e),this.addEditToolbar()}getUuid(){return a(this,rr)}get description(){return a(this,yn)}set description(e){m(this,yn,e),super.addEditToolbar().then(n=>{n==null||n.updateEditSignatureButton(e)})}getSignaturePreview(){const{newCurves:e,areContours:n,thickness:s,width:r,height:o}=a(this,ir),l=Math.max(r,o),c=Is.processDrawnLines({lines:{curves:e.map(h=>({points:h})),thickness:s,width:r,height:o},pageWidth:l,pageHeight:l,rotation:0,innerMargin:0,mustSmooth:!1,areContours:n});return{areContours:n,outline:c.outline}}async addEditToolbar(){const e=await super.addEditToolbar();return e?(this._uiManager.signatureManager&&a(this,yn)!==null&&(await e.addEditSignatureButton(this._uiManager.signatureManager,a(this,rr),a(this,yn)),e.show()),e):null}addSignature(e,n,s,r){const{x:o,y:l}=this,{outline:c}=m(this,ir,e);m(this,sr,c instanceof ig),m(this,yn,s),this.div.setAttribute("data-l10n-args",JSON.stringify({description:s}));let h;a(this,sr)?h=rn.getDefaultDrawingOptions():(h=rn._defaultDrawnSignatureOptions.clone(),h.updateProperties({"stroke-width":c.thickness})),this._addOutlines({drawOutlines:c,drawingOptions:h});const[u,d]=this.parentDimensions,[,f]=this.pageDimensions;let g=n/f;g=g>=1?.5:g,this.width*=g/this.height,this.width>=1&&(g*=.9/this.width,this.width=.9),this.height=g,this.setDims(u*this.width,d*this.height),this.x=o,this.y=l,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(r),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!r,hasDescription:!!s}}),this.div.hidden=!1}getFromImage(e){const{rawDims:{pageWidth:n,pageHeight:s},rotation:r}=this.parent.viewport;return Is.process(e,n,s,r,rn._INNER_MARGIN)}getFromText(e,n){const{rawDims:{pageWidth:s,pageHeight:r},rotation:o}=this.parent.viewport;return Is.extractContoursFromText(e,n,s,r,o,rn._INNER_MARGIN)}getDrawnSignature(e){const{rawDims:{pageWidth:n,pageHeight:s},rotation:r}=this.parent.viewport;return Is.processDrawnLines({lines:e,pageWidth:n,pageHeight:s,rotation:r,innerMargin:rn._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:e,thickness:n}){e?this._drawingOptions=rn.getDefaultDrawingOptions():(this._drawingOptions=rn._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":n}))}serialize(e=!1){if(this.isEmpty())return null;const{lines:n,points:s,rect:r}=this.serializeDraw(e),{_drawingOptions:{"stroke-width":o}}=this,l={annotationType:at.SIGNATURE,isSignature:!0,areContours:a(this,sr),color:[0,0,0],thickness:a(this,sr)?0:o,pageIndex:this.pageIndex,rect:r,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?(l.paths={lines:n,points:s},l.uuid=a(this,rr),l.isCopy=!0):l.lines=n,a(this,yn)&&(l.accessibilityData={type:"Figure",alt:a(this,yn)}),l}static deserializeDraw(e,n,s,r,o,l){return l.areContours?ig.deserialize(e,n,s,r,o,l):tu.deserialize(e,n,s,r,o,l)}static async deserialize(e,n,s){var o;const r=await super.deserialize(e,n,s);return m(r,sr,e.areContours),m(r,yn,((o=e.accessibilityData)==null?void 0:o.alt)||""),m(r,rr,e.uuid),r}};sr=new WeakMap,yn=new WeakMap,ir=new WeakMap,rr=new WeakMap,U(rn,"_type","signature"),U(rn,"_editorType",at.SIGNATURE),U(rn,"_defaultDrawingOptions",null);let cg=rn;var Wt,Ae,or,pi,ar,ml,gi,Io,_s,bn,yl,wt,Ql,Zl,Wu,Vu,qu,ug,Xu,Gv;class hg extends jt{constructor(e){super({...e,name:"stampEditor"});b(this,wt);b(this,Wt,null);b(this,Ae,null);b(this,or,null);b(this,pi,null);b(this,ar,null);b(this,ml,"");b(this,gi,null);b(this,Io,!1);b(this,_s,null);b(this,bn,!1);b(this,yl,!1);m(this,pi,e.bitmapUrl),m(this,ar,e.bitmapFile),this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(e,n){jt.initialize(e,n)}static isHandlingMimeForPasting(e){return nd.includes(e)}static paste(e,n){n.pasteEditor({mode:at.STAMP},{bitmapFile:e.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var e;return{type:"stamp",hasAltText:!!((e=this.altTextData)!=null&&e.altText)}}static computeTelemetryFinalData(e){const n=e.get("hasAltText");return{hasAltText:n.get(!0)??0,hasNoAltText:n.get(!1)??0}}async mlGuessAltText(e=null,n=!0){if(this.hasAltTextData())return null;const{mlManager:s}=this._uiManager;if(!s)throw new Error("No ML.");if(!await s.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:r,width:o,height:l}=e||this.copyCanvas(null,null,!0).imageData,c=await s.guess({name:"altText",request:{data:r,width:o,height:l,channels:r.length/(o*l)}});if(!c)throw new Error("No response from the AI service.");if(c.error)throw new Error("Error from the AI service.");if(c.cancel)return null;if(!c.output)throw new Error("No valid response from the AI service.");const h=c.output;return await this.setGuessedAltText(h),n&&!this.hasAltTextData()&&(this.altTextData={alt:h,decorative:!1}),h}remove(){var e;a(this,Ae)&&(m(this,Wt,null),this._uiManager.imageManager.deleteId(a(this,Ae)),(e=a(this,gi))==null||e.remove(),m(this,gi,null),a(this,_s)&&(clearTimeout(a(this,_s)),m(this,_s,null))),super.remove()}rebuild(){if(!this.parent){a(this,Ae)&&v(this,wt,Wu).call(this);return}super.rebuild(),this.div!==null&&(a(this,Ae)&&a(this,gi)===null&&v(this,wt,Wu).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(e){this._isDraggable=!0,e&&this.div.focus()}isEmpty(){return!(a(this,or)||a(this,Wt)||a(this,pi)||a(this,ar)||a(this,Ae)||a(this,Io))}get isResizable(){return!0}render(){if(this.div)return this.div;let e,n;return this._isCopy&&(e=this.x,n=this.y),super.render(),this.div.hidden=!0,this.addAltTextButton(),a(this,Io)||(a(this,Wt)?v(this,wt,Vu).call(this):v(this,wt,Wu).call(this)),this._isCopy&&this._moveAfterPaste(e,n),this._uiManager.addShouldRescale(this),this.div}setCanvas(e,n){const{id:s,bitmap:r}=this._uiManager.imageManager.getFromCanvas(e,n);n.remove(),s&&this._uiManager.imageManager.isValidId(s)&&(m(this,Ae,s),r&&m(this,Wt,r),m(this,Io,!1),v(this,wt,Vu).call(this))}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;a(this,_s)!==null&&clearTimeout(a(this,_s)),m(this,_s,setTimeout(()=>{m(this,_s,null),v(this,wt,ug).call(this)},200))}copyCanvas(e,n,s=!1){var g;e||(e=224);const{width:r,height:o}=a(this,Wt),l=new is;let c=a(this,Wt),h=r,u=o,d=null;if(n){if(r>n||o>n){const L=Math.min(n/r,n/o);h=Math.floor(r*L),u=Math.floor(o*L)}d=document.createElement("canvas");const y=d.width=Math.ceil(h*l.sx),p=d.height=Math.ceil(u*l.sy);a(this,bn)||(c=v(this,wt,qu).call(this,y,p));const A=d.getContext("2d");A.filter=this._uiManager.hcmFilter;let w="white",T="#cfcfd8";this._uiManager.hcmFilter!=="none"?T="black":(g=window.matchMedia)!=null&&g.call(window,"(prefers-color-scheme: dark)").matches&&(w="#8f8f9d",T="#42414d");const x=15,_=x*l.sx,E=x*l.sy,R=new OffscreenCanvas(_*2,E*2),P=R.getContext("2d");P.fillStyle=w,P.fillRect(0,0,_*2,E*2),P.fillStyle=T,P.fillRect(0,0,_,E),P.fillRect(_,E,_,E),A.fillStyle=A.createPattern(R,"repeat"),A.fillRect(0,0,y,p),A.drawImage(c,0,0,c.width,c.height,0,0,y,p)}let f=null;if(s){let y,p;if(l.symmetric&&c.width<e&&c.height<e)y=c.width,p=c.height;else if(c=a(this,Wt),r>e||o>e){const T=Math.min(e/r,e/o);y=Math.floor(r*T),p=Math.floor(o*T),a(this,bn)||(c=v(this,wt,qu).call(this,y,p))}const w=new OffscreenCanvas(y,p).getContext("2d",{willReadFrequently:!0});w.drawImage(c,0,0,c.width,c.height,0,0,y,p),f={width:y,height:p,data:w.getImageData(0,0,y,p).data}}return{canvas:d,width:h,height:u,imageData:f}}static async deserialize(e,n,s){var A;let r=null,o=!1;if(e instanceof iv){const{data:{rect:w,rotation:T,id:x,structParent:_,popupRef:E},container:R,parent:{page:{pageNumber:P}},canvas:L}=e;let O,S;L?(delete e.canvas,{id:O,bitmap:S}=s.imageManager.getFromCanvas(R.id,L),L.remove()):(o=!0,e._hasNoCanvas=!0);const I=((A=await n._structTree.getAriaAttributes(`${jg}${x}`))==null?void 0:A.get("aria-label"))||"";r=e={annotationType:at.STAMP,bitmapId:O,bitmap:S,pageIndex:P-1,rect:w.slice(0),rotation:T,id:x,deleted:!1,accessibilityData:{decorative:!1,altText:I},isSvg:!1,structParent:_,popupRef:E}}const l=await super.deserialize(e,n,s),{rect:c,bitmap:h,bitmapUrl:u,bitmapId:d,isSvg:f,accessibilityData:g}=e;o?(s.addMissingCanvas(e.id,l),m(l,Io,!0)):d&&s.imageManager.isValidId(d)?(m(l,Ae,d),h&&m(l,Wt,h)):m(l,pi,u),m(l,bn,f);const[y,p]=l.pageDimensions;return l.width=(c[2]-c[0])/y,l.height=(c[3]-c[1])/p,l.annotationElementId=e.id||null,g&&(l.altTextData=g),l._initialData=r,m(l,yl,!!r),l}serialize(e=!1,n=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const s={annotationType:at.STAMP,bitmapId:a(this,Ae),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:a(this,bn),structTreeParentId:this._structTreeParentId};if(e)return s.bitmapUrl=v(this,wt,Xu).call(this,!0),s.accessibilityData=this.serializeAltText(!0),s.isCopy=!0,s;const{decorative:r,altText:o}=this.serializeAltText(!1);if(!r&&o&&(s.accessibilityData={type:"Figure",alt:o}),this.annotationElementId){const c=v(this,wt,Gv).call(this,s);if(c.isSame)return null;c.isSameAltText?delete s.accessibilityData:s.accessibilityData.structParent=this._initialData.structParent??-1}if(s.id=this.annotationElementId,n===null)return s;n.stamps||(n.stamps=new Map);const l=a(this,bn)?(s.rect[2]-s.rect[0])*(s.rect[3]-s.rect[1]):null;if(!n.stamps.has(a(this,Ae)))n.stamps.set(a(this,Ae),{area:l,serialized:s}),s.bitmap=v(this,wt,Xu).call(this,!1);else if(a(this,bn)){const c=n.stamps.get(a(this,Ae));l>c.area&&(c.area=l,c.serialized.bitmap.close(),c.serialized.bitmap=v(this,wt,Xu).call(this,!1))}return s}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}}Wt=new WeakMap,Ae=new WeakMap,or=new WeakMap,pi=new WeakMap,ar=new WeakMap,ml=new WeakMap,gi=new WeakMap,Io=new WeakMap,_s=new WeakMap,bn=new WeakMap,yl=new WeakMap,wt=new WeakSet,Ql=function(e,n=!1){if(!e){this.remove();return}m(this,Wt,e.bitmap),n||(m(this,Ae,e.id),m(this,bn,e.isSvg)),e.file&&m(this,ml,e.file.name),v(this,wt,Vu).call(this)},Zl=function(){if(m(this,or,null),this._uiManager.enableWaiting(!1),!!a(this,gi)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&a(this,Wt)){this._editToolbar.hide(),this._uiManager.editAltText(this,!0);return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&a(this,Wt)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},Wu=function(){if(a(this,Ae)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(a(this,Ae)).then(s=>v(this,wt,Ql).call(this,s,!0)).finally(()=>v(this,wt,Zl).call(this));return}if(a(this,pi)){const s=a(this,pi);m(this,pi,null),this._uiManager.enableWaiting(!0),m(this,or,this._uiManager.imageManager.getFromUrl(s).then(r=>v(this,wt,Ql).call(this,r)).finally(()=>v(this,wt,Zl).call(this)));return}if(a(this,ar)){const s=a(this,ar);m(this,ar,null),this._uiManager.enableWaiting(!0),m(this,or,this._uiManager.imageManager.getFromFile(s).then(r=>v(this,wt,Ql).call(this,r)).finally(()=>v(this,wt,Zl).call(this)));return}const e=document.createElement("input");e.type="file",e.accept=nd.join(",");const n=this._uiManager._signal;m(this,or,new Promise(s=>{e.addEventListener("change",async()=>{if(!e.files||e.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const r=await this._uiManager.imageManager.getFromFile(e.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),v(this,wt,Ql).call(this,r)}s()},{signal:n}),e.addEventListener("cancel",()=>{this.remove(),s()},{signal:n})}).finally(()=>v(this,wt,Zl).call(this))),e.click()},Vu=function(){var d;const{div:e}=this;let{width:n,height:s}=a(this,Wt);const[r,o]=this.pageDimensions,l=.75;if(this.width)n=this.width*r,s=this.height*o;else if(n>l*r||s>l*o){const f=Math.min(l*r/n,l*o/s);n*=f,s*=f}const[c,h]=this.parentDimensions;this.setDims(n*c/r,s*h/o),this._uiManager.enableWaiting(!1);const u=m(this,gi,document.createElement("canvas"));u.setAttribute("role","img"),this.addContainer(u),this.width=n/r,this.height=s/o,(d=this._initialOptions)!=null&&d.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(e.hidden=!1),v(this,wt,ug).call(this),a(this,yl)||(this.parent.addUndoableEditor(this),m(this,yl,!0)),this._reportTelemetry({action:"inserted_image"}),a(this,ml)&&this.div.setAttribute("aria-description",a(this,ml))},qu=function(e,n){const{width:s,height:r}=a(this,Wt);let o=s,l=r,c=a(this,Wt);for(;o>2*e||l>2*n;){const h=o,u=l;o>2*e&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2)),l>2*n&&(l=l>=16384?Math.floor(l/2)-1:Math.ceil(l/2));const d=new OffscreenCanvas(o,l);d.getContext("2d").drawImage(c,0,0,h,u,0,0,o,l),c=d.transferToImageBitmap()}return c},ug=function(){const[e,n]=this.parentDimensions,{width:s,height:r}=this,o=new is,l=Math.ceil(s*e*o.sx),c=Math.ceil(r*n*o.sy),h=a(this,gi);if(!h||h.width===l&&h.height===c)return;h.width=l,h.height=c;const u=a(this,bn)?a(this,Wt):v(this,wt,qu).call(this,l,c),d=h.getContext("2d");d.filter=this._uiManager.hcmFilter,d.drawImage(u,0,0,u.width,u.height,0,0,l,c)},Xu=function(e){if(e){if(a(this,bn)){const r=this._uiManager.imageManager.getSvgUrl(a(this,Ae));if(r)return r}const n=document.createElement("canvas");return{width:n.width,height:n.height}=a(this,Wt),n.getContext("2d").drawImage(a(this,Wt),0,0),n.toDataURL()}if(a(this,bn)){const[n,s]=this.pageDimensions,r=Math.round(this.width*n*Ei.PDF_TO_CSS_UNITS),o=Math.round(this.height*s*Ei.PDF_TO_CSS_UNITS),l=new OffscreenCanvas(r,o);return l.getContext("2d").drawImage(a(this,Wt),0,0,a(this,Wt).width,a(this,Wt).height,0,0,r,o),l.transferToImageBitmap()}return structuredClone(a(this,Wt))},Gv=function(e){var l;const{pageIndex:n,accessibilityData:{altText:s}}=this._initialData,r=e.pageIndex===n,o=(((l=e.accessibilityData)==null?void 0:l.alt)||"")===s;return{isSame:!this._hasBeenMoved&&!this._hasBeenResized&&r&&o,isSameAltText:o}},U(hg,"_type","stamp"),U(hg,"_editorType",at.STAMP);var Lo,bl,xs,lr,mi,On,cr,vl,Mo,ts,yi,Fe,bi,tt,hr,Vt,Uv,cs,dg,fg,Yu;const zn=class zn{constructor({uiManager:t,pageIndex:e,div:n,structTreeLayer:s,accessibilityManager:r,annotationLayer:o,drawLayer:l,textLayer:c,viewport:h,l10n:u}){b(this,Vt);b(this,Lo);b(this,bl,!1);b(this,xs,null);b(this,lr,null);b(this,mi,null);b(this,On,new Map);b(this,cr,!1);b(this,vl,!1);b(this,Mo,!1);b(this,ts,null);b(this,yi,null);b(this,Fe,null);b(this,bi,null);b(this,tt);const d=[...a(zn,hr).values()];if(!zn._initialized){zn._initialized=!0;for(const f of d)f.initialize(u,t)}t.registerEditorTypes(d),m(this,tt,t),this.pageIndex=e,this.div=n,m(this,Lo,r),m(this,xs,o),this.viewport=h,m(this,Fe,c),this.drawLayer=l,this._structTree=s,a(this,tt).addLayer(this)}get isEmpty(){return a(this,On).size===0}get isInvisible(){return this.isEmpty&&a(this,tt).getMode()===at.NONE}updateToolbar(t){a(this,tt).updateToolbar(t)}updateMode(t=a(this,tt).getMode()){switch(v(this,Vt,Yu).call(this),t){case at.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case at.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case at.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:e}=this.div;for(const n of a(zn,hr).values())e.toggle(`${n._type}Editing`,t===n._editorType);this.div.hidden=!1}hasTextLayer(t){var e;return t===((e=a(this,Fe))==null?void 0:e.div)}setEditingState(t){a(this,tt).setEditingState(t)}addCommands(t){a(this,tt).addCommands(t)}cleanUndoStack(t){a(this,tt).cleanUndoStack(t)}toggleDrawing(t=!1){this.div.classList.toggle("drawing",!t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){var e;(e=a(this,xs))==null||e.div.classList.toggle("disabled",!t)}async enable(){m(this,Mo,!0),this.div.tabIndex=0,this.togglePointerEvents(!0);const t=new Set;for(const n of a(this,On).values())n.enableEditing(),n.show(!0),n.annotationElementId&&(a(this,tt).removeChangedExistingAnnotation(n),t.add(n.annotationElementId));if(!a(this,xs)){m(this,Mo,!1);return}const e=a(this,xs).getEditableAnnotations();for(const n of e){if(n.hide(),a(this,tt).isDeletedAnnotationElement(n.data.id)||t.has(n.data.id))continue;const s=await this.deserialize(n);s&&(this.addOrRebuild(s),s.enableEditing())}m(this,Mo,!1)}disable(){var s;m(this,vl,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1);const t=new Map,e=new Map;for(const r of a(this,On).values())if(r.disableEditing(),!!r.annotationElementId){if(r.serialize()!==null){t.set(r.annotationElementId,r);continue}else e.set(r.annotationElementId,r);(s=this.getEditableAnnotation(r.annotationElementId))==null||s.show(),r.remove()}if(a(this,xs)){const r=a(this,xs).getEditableAnnotations();for(const o of r){const{id:l}=o.data;if(a(this,tt).isDeletedAnnotationElement(l))continue;let c=e.get(l);if(c){c.resetAnnotationElement(o),c.show(!1),o.show();continue}c=t.get(l),c&&(a(this,tt).addChangedExistingAnnotation(c),c.renderAnnotationElement(o)&&c.show(!1)),o.show()}}v(this,Vt,Yu).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:n}=this.div;for(const r of a(zn,hr).values())n.remove(`${r._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),m(this,vl,!1)}getEditableAnnotation(t){var e;return((e=a(this,xs))==null?void 0:e.getEditableAnnotation(t))||null}setActiveEditor(t){a(this,tt).getActive()!==t&&a(this,tt).setActiveEditor(t)}enableTextSelection(){var t;if(this.div.tabIndex=-1,(t=a(this,Fe))!=null&&t.div&&!a(this,bi)){m(this,bi,new AbortController);const e=a(this,tt).combinedSignal(a(this,bi));a(this,Fe).div.addEventListener("pointerdown",v(this,Vt,Uv).bind(this),{signal:e}),a(this,Fe).div.classList.add("highlighting")}}disableTextSelection(){var t;this.div.tabIndex=0,(t=a(this,Fe))!=null&&t.div&&a(this,bi)&&(a(this,bi).abort(),m(this,bi,null),a(this,Fe).div.classList.remove("highlighting"))}enableClick(){if(a(this,lr))return;m(this,lr,new AbortController);const t=a(this,tt).combinedSignal(a(this,lr));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t});const e=this.pointerup.bind(this);this.div.addEventListener("pointerup",e,{signal:t}),this.div.addEventListener("pointercancel",e,{signal:t})}disableClick(){var t;(t=a(this,lr))==null||t.abort(),m(this,lr,null)}attach(t){a(this,On).set(t.id,t);const{annotationElementId:e}=t;e&&a(this,tt).isDeletedAnnotationElement(e)&&a(this,tt).removeDeletedAnnotationElement(t)}detach(t){var e;a(this,On).delete(t.id),(e=a(this,Lo))==null||e.removePointerInTextLayer(t.contentDiv),!a(this,vl)&&t.annotationElementId&&a(this,tt).addDeletedAnnotationElement(t)}remove(t){this.detach(t),a(this,tt).removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1}changeParent(t){var e;t.parent!==this&&(t.parent&&t.annotationElementId&&(a(this,tt).addDeletedAnnotationElement(t.annotationElementId),jt.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),(e=t.parent)==null||e.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),a(this,tt).addEditor(t),this.attach(t),!t.isAttachedToDOM){const e=t.render();this.div.append(e),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(!a(this,Mo)),a(this,tt).addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){var n;if(!t.isAttachedToDOM)return;const{activeElement:e}=document;t.div.contains(e)&&!a(this,mi)&&(t._focusEventsAllowed=!1,m(this,mi,setTimeout(()=>{m(this,mi,null),t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:a(this,tt)._signal}),e.focus())},0))),t._structTreeParentId=(n=a(this,Lo))==null?void 0:n.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||(t.parent=this),t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){const e=()=>t._uiManager.rebuild(t),n=()=>{t.remove()};this.addCommands({cmd:e,undo:n,mustExec:!1})}getNextId(){return a(this,tt).getId()}combinedSignal(t){return a(this,tt).combinedSignal(t)}canCreateNewEmptyEditor(){var t;return(t=a(this,Vt,cs))==null?void 0:t.canCreateNewEmptyEditor()}async pasteEditor(t,e){this.updateToolbar(t),await a(this,tt).updateMode(t.mode);const{offsetX:n,offsetY:s}=v(this,Vt,fg).call(this),r=this.getNextId(),o=v(this,Vt,dg).call(this,{parent:this,id:r,x:n,y:s,uiManager:a(this,tt),isCentered:!0,...e});o&&this.add(o)}async deserialize(t){var e;return await((e=a(zn,hr).get(t.annotationType??t.annotationEditorType))==null?void 0:e.deserialize(t,this,a(this,tt)))||null}createAndAddNewEditor(t,e,n={}){const s=this.getNextId(),r=v(this,Vt,dg).call(this,{parent:this,id:s,x:t.offsetX,y:t.offsetY,uiManager:a(this,tt),isCentered:e,...n});return r&&this.add(r),r}addNewEditor(t={}){this.createAndAddNewEditor(v(this,Vt,fg).call(this),!0,t)}setSelected(t){a(this,tt).setSelected(t)}toggleSelected(t){a(this,tt).toggleSelected(t)}unselect(t){a(this,tt).unselect(t)}pointerup(t){var s;const{isMac:e}=we.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div||!a(this,cr)||(m(this,cr,!1),(s=a(this,Vt,cs))!=null&&s.isDrawer&&a(this,Vt,cs).supportMultipleDrawings))return;if(!a(this,bl)){m(this,bl,!0);return}const n=a(this,tt).getMode();if(n===at.STAMP||n===at.SIGNATURE){a(this,tt).unselectAll();return}this.createAndAddNewEditor(t,!1)}pointerdown(t){var s;if(a(this,tt).getMode()===at.HIGHLIGHT&&this.enableTextSelection(),a(this,cr)){m(this,cr,!1);return}const{isMac:e}=we.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div)return;if(m(this,cr,!0),(s=a(this,Vt,cs))!=null&&s.isDrawer){this.startDrawingSession(t);return}const n=a(this,tt).getActive();m(this,bl,!n||n.isEmpty())}startDrawingSession(t){if(this.div.focus({preventScroll:!0}),a(this,ts)){a(this,Vt,cs).startDrawing(this,a(this,tt),!1,t);return}a(this,tt).setCurrentDrawingSession(this),m(this,ts,new AbortController);const e=a(this,tt).combinedSignal(a(this,ts));this.div.addEventListener("blur",({relatedTarget:n})=>{n&&!this.div.contains(n)&&(m(this,yi,null),this.commitOrRemove())},{signal:e}),a(this,Vt,cs).startDrawing(this,a(this,tt),!1,t)}pause(t){if(t){const{activeElement:e}=document;this.div.contains(e)&&m(this,yi,e);return}a(this,yi)&&setTimeout(()=>{var e;(e=a(this,yi))==null||e.focus(),m(this,yi,null)},0)}endDrawingSession(t=!1){return a(this,ts)?(a(this,tt).setCurrentDrawingSession(null),a(this,ts).abort(),m(this,ts,null),m(this,yi,null),a(this,Vt,cs).endDrawing(t)):null}findNewParent(t,e,n){const s=a(this,tt).findParent(e,n);return s===null||s===this?!1:(s.changeParent(t),!0)}commitOrRemove(){return a(this,ts)?(this.endDrawingSession(),!0):!1}onScaleChanging(){a(this,ts)&&a(this,Vt,cs).onScaleChangingWhenDrawing(this)}destroy(){var t,e;this.commitOrRemove(),((t=a(this,tt).getActive())==null?void 0:t.parent)===this&&(a(this,tt).commitOrRemove(),a(this,tt).setActiveEditor(null)),a(this,mi)&&(clearTimeout(a(this,mi)),m(this,mi,null));for(const n of a(this,On).values())(e=a(this,Lo))==null||e.removePointerInTextLayer(n.contentDiv),n.setParent(null),n.isAttachedToDOM=!1,n.div.remove();this.div=null,a(this,On).clear(),a(this,tt).removeLayer(this)}render({viewport:t}){this.viewport=t,fr(this.div,t);for(const e of a(this,tt).getEditors(this.pageIndex))this.add(e),e.rebuild();this.updateMode()}update({viewport:t}){a(this,tt).commitOrRemove(),v(this,Vt,Yu).call(this);const e=this.viewport.rotation,n=t.rotation;if(this.viewport=t,fr(this.div,{rotation:n}),e!==n)for(const s of a(this,On).values())s.rotate(n)}get pageDimensions(){const{pageWidth:t,pageHeight:e}=this.viewport.rawDims;return[t,e]}get scale(){return a(this,tt).viewParameters.realScale}};Lo=new WeakMap,bl=new WeakMap,xs=new WeakMap,lr=new WeakMap,mi=new WeakMap,On=new WeakMap,cr=new WeakMap,vl=new WeakMap,Mo=new WeakMap,ts=new WeakMap,yi=new WeakMap,Fe=new WeakMap,bi=new WeakMap,tt=new WeakMap,hr=new WeakMap,Vt=new WeakSet,Uv=function(t){a(this,tt).unselectAll();const{target:e}=t;if(e===a(this,Fe).div||(e.getAttribute("role")==="img"||e.classList.contains("endOfContent"))&&a(this,Fe).div.contains(e)){const{isMac:n}=we.platform;if(t.button!==0||t.ctrlKey&&n)return;a(this,tt).showAllEditors("highlight",!0,!0),a(this,Fe).div.classList.add("free"),this.toggleDrawing(),rd.startHighlighting(this,a(this,tt).direction==="ltr",{target:a(this,Fe).div,x:t.x,y:t.y}),a(this,Fe).div.addEventListener("pointerup",()=>{a(this,Fe).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:a(this,tt)._signal}),t.preventDefault()}},cs=function(){return a(zn,hr).get(a(this,tt).getMode())},dg=function(t){const e=a(this,Vt,cs);return e?new e.prototype.constructor(t):null},fg=function(){const{x:t,y:e,width:n,height:s}=this.div.getBoundingClientRect(),r=Math.max(0,t),o=Math.max(0,e),l=Math.min(window.innerWidth,t+n),c=Math.min(window.innerHeight,e+s),h=(r+l)/2-t,u=(o+c)/2-e,[d,f]=this.viewport.rotation%180===0?[h,u]:[u,h];return{offsetX:d,offsetY:f}},Yu=function(){for(const t of a(this,On).values())t.isEmpty()&&t.remove()},U(zn,"_initialized",!1),b(zn,hr,new Map([Up,sg,hg,rd,cg].map(t=>[t._editorType,t])));let ad=zn;var es,Ve,Oo,zh,Td,Wv,Ms,pg,Vv,gg;const ue=class ue{constructor({pageIndex:t}){b(this,Ms);b(this,es,null);b(this,Ve,new Map);b(this,Oo,new Map);this.pageIndex=t}setParent(t){if(!a(this,es)){m(this,es,t);return}if(a(this,es)!==t){if(a(this,Ve).size>0)for(const e of a(this,Ve).values())e.remove(),t.append(e);m(this,es,t)}}static get _svgFactory(){return mt(this,"_svgFactory",new pc)}draw(t,e=!1,n=!1){const s=He(ue,zh)._++,r=v(this,Ms,pg).call(this),o=ue._svgFactory.createElement("defs");r.append(o);const l=ue._svgFactory.createElement("path");o.append(l);const c=`path_p${this.pageIndex}_${s}`;l.setAttribute("id",c),l.setAttribute("vector-effect","non-scaling-stroke"),e&&a(this,Oo).set(s,l);const h=n?v(this,Ms,Vv).call(this,o,c):null,u=ue._svgFactory.createElement("use");return r.append(u),u.setAttribute("href",`#${c}`),this.updateProperties(r,t),a(this,Ve).set(s,r),{id:s,clipPathId:`url(#${h})`}}drawOutline(t,e){const n=He(ue,zh)._++,s=v(this,Ms,pg).call(this),r=ue._svgFactory.createElement("defs");s.append(r);const o=ue._svgFactory.createElement("path");r.append(o);const l=`path_p${this.pageIndex}_${n}`;o.setAttribute("id",l),o.setAttribute("vector-effect","non-scaling-stroke");let c;if(e){const d=ue._svgFactory.createElement("mask");r.append(d),c=`mask_p${this.pageIndex}_${n}`,d.setAttribute("id",c),d.setAttribute("maskUnits","objectBoundingBox");const f=ue._svgFactory.createElement("rect");d.append(f),f.setAttribute("width","1"),f.setAttribute("height","1"),f.setAttribute("fill","white");const g=ue._svgFactory.createElement("use");d.append(g),g.setAttribute("href",`#${l}`),g.setAttribute("stroke","none"),g.setAttribute("fill","black"),g.setAttribute("fill-rule","nonzero"),g.classList.add("mask")}const h=ue._svgFactory.createElement("use");s.append(h),h.setAttribute("href",`#${l}`),c&&h.setAttribute("mask",`url(#${c})`);const u=h.cloneNode();return s.append(u),h.classList.add("mainOutline"),u.classList.add("secondaryOutline"),this.updateProperties(s,t),a(this,Ve).set(n,s),n}finalizeDraw(t,e){a(this,Oo).delete(t),this.updateProperties(t,e)}updateProperties(t,e){var c;if(!e)return;const{root:n,bbox:s,rootClass:r,path:o}=e,l=typeof t=="number"?a(this,Ve).get(t):t;if(l){if(n&&v(this,Ms,gg).call(this,l,n),s&&v(c=ue,Td,Wv).call(c,l,s),r){const{classList:h}=l;for(const[u,d]of Object.entries(r))h.toggle(u,d)}if(o){const u=l.firstChild.firstChild;v(this,Ms,gg).call(this,u,o)}}}updateParent(t,e){if(e===this)return;const n=a(this,Ve).get(t);n&&(a(e,es).append(n),a(this,Ve).delete(t),a(e,Ve).set(t,n))}remove(t){a(this,Oo).delete(t),a(this,es)!==null&&(a(this,Ve).get(t).remove(),a(this,Ve).delete(t))}destroy(){m(this,es,null);for(const t of a(this,Ve).values())t.remove();a(this,Ve).clear(),a(this,Oo).clear()}};es=new WeakMap,Ve=new WeakMap,Oo=new WeakMap,zh=new WeakMap,Td=new WeakSet,Wv=function(t,[e,n,s,r]){const{style:o}=t;o.top=`${100*n}%`,o.left=`${100*e}%`,o.width=`${100*s}%`,o.height=`${100*r}%`},Ms=new WeakSet,pg=function(){const t=ue._svgFactory.create(1,1,!0);return a(this,es).append(t),t.setAttribute("aria-hidden",!0),t},Vv=function(t,e){const n=ue._svgFactory.createElement("clipPath");t.append(n);const s=`clip_${e}`;n.setAttribute("id",s),n.setAttribute("clipPathUnits","objectBoundingBox");const r=ue._svgFactory.createElement("use");return n.append(r),r.setAttribute("href",`#${e}`),r.classList.add("clip"),s},gg=function(t,e){for(const[n,s]of Object.entries(e))s===null?t.removeAttribute(n):t.setAttribute(n,s)},b(ue,Td),b(ue,zh,0);let ld=ue;globalThis._pdfjsTestingUtils={HighlightOutliner:Vp};globalThis.pdfjsLib={AbortException:Si,AnnotationEditorLayer:ad,AnnotationEditorParamsType:yt,AnnotationEditorType:at,AnnotationEditorUIManager:pr,AnnotationLayer:Yg,AnnotationMode:ks,AnnotationType:te,build:V0,ColorPicker:gc,createValidAbsoluteUrl:Fg,DOMSVGFactory:pc,DrawLayer:ld,FeatureTest:we,fetchData:_l,getDocument:Wg,getFilenameFromUrl:Bb,getPdfFilenameFromUrl:jb,getUuid:Bg,getXfaPageViewport:Hb,GlobalWorkerOptions:Fn,ImageKind:ec,InvalidPDFException:ed,isDataScheme:Kh,isPdfFile:Wd,isValidExplicitDest:S0,MathClamp:$e,noContextMenu:jn,normalizeUnicode:Fb,OPS:cc,OutputScale:is,PasswordResponses:Db,PDFDataRangeTransport:Vg,PDFDateString:Vd,PDFWorker:wl,PermissionFlag:Ob,PixelsPerInch:Ei,RenderingCancelledException:Ud,ResponseException:hc,setLayerDimensions:fr,shadow:mt,SignatureExtractor:Is,stopEvent:se,SupportedImageMimeTypes:nd,TextLayer:dc,TouchManager:uc,updateUrlHash:$g,Util:et,VerbosityLevel:qh,version:W0,XfaLayer:qg};const Bx=Object.freeze(Object.defineProperty({__proto__:null,AbortException:Si,AnnotationEditorLayer:ad,AnnotationEditorParamsType:yt,AnnotationEditorType:at,AnnotationEditorUIManager:pr,AnnotationLayer:Yg,AnnotationMode:ks,AnnotationType:te,ColorPicker:gc,DOMSVGFactory:pc,DrawLayer:ld,FeatureTest:we,GlobalWorkerOptions:Fn,ImageKind:ec,InvalidPDFException:ed,MathClamp:$e,OPS:cc,OutputScale:is,PDFDataRangeTransport:Vg,PDFDateString:Vd,PDFWorker:wl,PasswordResponses:Db,PermissionFlag:Ob,PixelsPerInch:Ei,RenderingCancelledException:Ud,ResponseException:hc,SignatureExtractor:Is,SupportedImageMimeTypes:nd,TextLayer:dc,TouchManager:uc,Util:et,VerbosityLevel:qh,XfaLayer:qg,build:V0,createValidAbsoluteUrl:Fg,fetchData:_l,getDocument:Wg,getFilenameFromUrl:Bb,getPdfFilenameFromUrl:jb,getUuid:Bg,getXfaPageViewport:Hb,isDataScheme:Kh,isPdfFile:Wd,isValidExplicitDest:S0,noContextMenu:jn,normalizeUnicode:Fb,setLayerDimensions:fr,shadow:mt,stopEvent:se,updateUrlHash:$g,version:W0},Symbol.toStringTag,{value:"Module"})),jx=["onCopy","onCut","onPaste"],Hx=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],zx=["onFocus","onBlur"],Gx=["onInput","onInvalid","onReset","onSubmit"],Ux=["onLoad","onError"],Wx=["onKeyDown","onKeyPress","onKeyUp"],Vx=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],qx=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],Xx=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],Yx=["onSelect"],Kx=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],Jx=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],Qx=["onScroll"],Zx=["onWheel"],tC=["onAnimationStart","onAnimationEnd","onAnimationIteration"],eC=["onTransitionEnd"],nC=["onToggle"],sC=["onChange"],iC=[...jx,...Hx,...zx,...Gx,...Ux,...Wx,...Vx,...qx,...Xx,...Yx,...Kx,...Jx,...Qx,...Zx,...tC,...eC,...sC,...nC];function qv(i,t){const e={};for(const n of iC){const s=i[n];s&&(t?e[n]=r=>s(r,t(n)):e[n]=s)}return e}function eu(i){let t=!1;return{promise:new Promise((n,s)=>{i.then(r=>!t&&n(r)).catch(r=>!t&&s(r))}),cancel(){t=!0}}}var rC="Invariant failed";function Ft(i,t){if(!i)throw new Error(rC)}var Af,my;function oC(){if(my)return Af;my=1;var i=function(){};return Af=i,Af}var aC=oC();const Be=bg(aC);var yy=Object.prototype.hasOwnProperty;function by(i,t,e){for(e of i.keys())if(ua(e,t))return e}function ua(i,t){var e,n,s;if(i===t)return!0;if(i&&t&&(e=i.constructor)===t.constructor){if(e===Date)return i.getTime()===t.getTime();if(e===RegExp)return i.toString()===t.toString();if(e===Array){if((n=i.length)===t.length)for(;n--&&ua(i[n],t[n]););return n===-1}if(e===Set){if(i.size!==t.size)return!1;for(n of i)if(s=n,s&&typeof s=="object"&&(s=by(t,s),!s)||!t.has(s))return!1;return!0}if(e===Map){if(i.size!==t.size)return!1;for(n of i)if(s=n[0],s&&typeof s=="object"&&(s=by(t,s),!s)||!ua(n[1],t.get(s)))return!1;return!0}if(e===ArrayBuffer)i=new Uint8Array(i),t=new Uint8Array(t);else if(e===DataView){if((n=i.byteLength)===t.byteLength)for(;n--&&i.getInt8(n)===t.getInt8(n););return n===-1}if(ArrayBuffer.isView(i)){if((n=i.byteLength)===t.byteLength)for(;n--&&i[n]===t[n];);return n===-1}if(!e||typeof i=="object"){n=0;for(e in i)if(yy.call(i,e)&&++n&&!yy.call(t,e)||!(e in t)||!ua(i[e],t[e]))return!1;return Object.keys(t).length===n}}return i!==i&&t!==t}const Xv=M.createContext(null);function da({children:i,type:t}){return G.jsx("div",{className:`react-pdf__message react-pdf__message--${t}`,children:i})}const lC="noopener noreferrer nofollow";class cC{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(t){this.pdfDocument=t}setViewer(t){this.pdfViewer=t}setExternalLinkRel(t){this.externalLinkRel=t}setExternalLinkTarget(t){this.externalLinkTarget=t}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return Ft(this.pdfViewer),this.pdfViewer.currentPageNumber||0}set page(t){Ft(this.pdfViewer),this.pdfViewer.currentPageNumber=t}get rotation(){return 0}set rotation(t){}goToDestination(t){return new Promise(e=>{Ft(this.pdfDocument),Ft(t),typeof t=="string"?this.pdfDocument.getDestination(t).then(e):Array.isArray(t)?e(t):t.then(e)}).then(e=>{Ft(Array.isArray(e));const n=e[0];new Promise(s=>{Ft(this.pdfDocument),n instanceof Object?this.pdfDocument.getPageIndex(n).then(r=>{s(r)}).catch(()=>{Ft(!1)}):typeof n=="number"?s(n):Ft(!1)}).then(s=>{const r=s+1;Ft(this.pdfViewer),Ft(r>=1&&r<=this.pagesCount),this.pdfViewer.scrollPageIntoView({dest:e,pageIndex:s,pageNumber:r})})})}navigateTo(t){this.goToDestination(t)}goToPage(t){const e=t-1;Ft(this.pdfViewer),Ft(t>=1&&t<=this.pagesCount),this.pdfViewer.scrollPageIntoView({pageIndex:e,pageNumber:t})}addLinkAttributes(t,e,n){t.href=e,t.rel=this.externalLinkRel||lC,t.target=n?"_blank":this.externalLinkTarget||""}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}setHash(){}executeNamedAction(){}cachePageRef(){}isPageVisible(){return!0}isPageCached(){return!0}executeSetOCGState(){}}const vy={NEED_PASSWORD:1,INCORRECT_PASSWORD:2},Yd=typeof window<"u",Yv=Yd&&window.location.protocol==="file:";function hC(i){return typeof i<"u"}function wr(i){return hC(i)&&i!==null}function uC(i){return typeof i=="string"}function dC(i){return i instanceof ArrayBuffer}function fC(i){return Ft(Yd),i instanceof Blob}function mg(i){return uC(i)&&/^data:/.test(i)}function Ay(i){Ft(mg(i));const[t="",e=""]=i.split(",");return t.split(";").indexOf("base64")!==-1?atob(e):unescape(e)}function pC(){return Yd&&window.devicePixelRatio||1}const Kv="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function wy(){Be(!Yv,`Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ${Kv}`)}function gC(){Be(!Yv,`Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ${Kv}`)}function Bo(i){i!=null&&i.cancel&&i.cancel()}function yg(i,t){return Object.defineProperty(i,"width",{get(){return this.view[2]*t},configurable:!0}),Object.defineProperty(i,"height",{get(){return this.view[3]*t},configurable:!0}),Object.defineProperty(i,"originalWidth",{get(){return this.view[2]},configurable:!0}),Object.defineProperty(i,"originalHeight",{get(){return this.view[3]},configurable:!0}),i}function mC(i){return i.name==="RenderingCancelledException"}function yC(i){return new Promise((t,e)=>{const n=new FileReader;n.onload=()=>{if(!n.result)return e(new Error("Error while reading a file."));t(n.result)},n.onerror=s=>{if(!s.target)return e(new Error("Error while reading a file."));const{error:r}=s.target;if(!r)return e(new Error("Error while reading a file."));switch(r.code){case r.NOT_FOUND_ERR:return e(new Error("Error while reading a file: File not found."));case r.SECURITY_ERR:return e(new Error("Error while reading a file: Security error."));case r.ABORT_ERR:return e(new Error("Error while reading a file: Aborted."));default:return e(new Error("Error while reading a file."))}},n.readAsArrayBuffer(i)})}function bC(i,t){switch(t.type){case"RESOLVE":return{value:t.value,error:void 0};case"REJECT":return{value:!1,error:t.error};case"RESET":return{value:void 0,error:void 0};default:return i}}function Sl(){return M.useReducer(bC,{value:void 0,error:void 0})}var Sy=function(i,t){var e={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&t.indexOf(n)<0&&(e[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(i);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(e[n[s]]=i[n[s]]);return e};const{PDFDataRangeTransport:vC}=Bx,AC=(i,t)=>{switch(t){case vy.NEED_PASSWORD:{const e=prompt("Enter the password to open this PDF file.");i(e);break}case vy.INCORRECT_PASSWORD:{const e=prompt("Invalid password. Please try again.");i(e);break}}};function Ey(i){return typeof i=="object"&&i!==null&&("data"in i||"range"in i||"url"in i)}const wC=M.forwardRef(function(t,e){var{children:n,className:s,error:r="Failed to load PDF file.",externalLinkRel:o,externalLinkTarget:l,file:c,inputRef:h,imageResourcesPath:u,loading:d="Loading PDF…",noData:f="No PDF file specified.",onItemClick:g,onLoadError:y,onLoadProgress:p,onLoadSuccess:A,onPassword:w=AC,onSourceError:T,onSourceSuccess:x,options:_,renderMode:E,rotate:R,scale:P}=t,L=Sy(t,["children","className","error","externalLinkRel","externalLinkTarget","file","inputRef","imageResourcesPath","loading","noData","onItemClick","onLoadError","onLoadProgress","onLoadSuccess","onPassword","onSourceError","onSourceSuccess","options","renderMode","rotate","scale"]);const[O,S]=Sl(),{value:I,error:B}=O,[H,W]=Sl(),{value:X,error:j}=H,z=M.useRef(new cC),ct=M.useRef([]),D=M.useRef(void 0),C=M.useRef(void 0);c&&c!==D.current&&Ey(c)&&(Be(!ua(c,D.current),`File prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.`),D.current=c),_&&_!==C.current&&(Be(!ua(_,C.current),`Options prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.`),C.current=_);const k=M.useRef({scrollPageIntoView:ut=>{const{dest:Zt,pageNumber:Ot,pageIndex:je=Ot-1}=ut;if(g){g({dest:Zt,pageIndex:je,pageNumber:Ot});return}const xn=ct.current[je];if(xn){xn.scrollIntoView();return}Be(!1,`An internal link leading to page ${Ot} was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>.`)}});M.useImperativeHandle(e,()=>({linkService:z,pages:ct,viewer:k}),[]);function $(){x&&x()}function N(){B&&(Be(!1,B.toString()),T&&T(B))}function V(){S({type:"RESET"})}M.useEffect(V,[c,S]);const nt=M.useCallback(async()=>{if(!c)return null;if(typeof c=="string")return mg(c)?{data:Ay(c)}:(wy(),{url:c});if(c instanceof vC)return{range:c};if(dC(c))return{data:c};if(Yd&&fC(c))return{data:await yC(c)};if(Ft(typeof c=="object"),Ft(Ey(c)),"url"in c&&typeof c.url=="string"){if(mg(c.url)){const{url:ut}=c,Zt=Sy(c,["url"]),Ot=Ay(ut);return Object.assign({data:Ot},Zt)}wy()}return c},[c]);M.useEffect(()=>{const ut=eu(nt());return ut.promise.then(Zt=>{S({type:"RESOLVE",value:Zt})}).catch(Zt=>{S({type:"REJECT",error:Zt})}),()=>{Bo(ut)}},[nt,S]),M.useEffect(()=>{if(!(typeof I>"u")){if(I===!1){N();return}$()}},[I]);function Y(){X&&(A&&A(X),ct.current=new Array(X.numPages),z.current.setDocument(X))}function it(){j&&(Be(!1,j.toString()),y&&y(j))}M.useEffect(function(){W({type:"RESET"})},[W,I]),M.useEffect(function(){if(!I)return;const Zt=_?Object.assign(Object.assign({},I),_):I,Ot=Wg(Zt);p&&(Ot.onProgress=p),w&&(Ot.onPassword=w);const je=Ot,xn=je.promise.then(vr=>{W({type:"RESOLVE",value:vr})}).catch(vr=>{je.destroyed||W({type:"REJECT",error:vr})});return()=>{xn.finally(()=>je.destroy())}},[_,W,I]),M.useEffect(()=>{if(!(typeof X>"u")){if(X===!1){it();return}Y()}},[X]),M.useEffect(function(){z.current.setViewer(k.current),z.current.setExternalLinkRel(o),z.current.setExternalLinkTarget(l)},[o,l]);const ot=M.useCallback((ut,Zt)=>{ct.current[ut]=Zt},[]),st=M.useCallback(ut=>{delete ct.current[ut]},[]),Z=M.useMemo(()=>({imageResourcesPath:u,linkService:z.current,onItemClick:g,pdf:X,registerPage:ot,renderMode:E,rotate:R,scale:P,unregisterPage:st}),[u,g,X,ot,E,R,P,st]),bt=M.useMemo(()=>qv(L,()=>X),[L,X]);function zt(){return G.jsx(Xv.Provider,{value:Z,children:n})}function xt(){return c?X==null?G.jsx(da,{type:"loading",children:typeof d=="function"?d():d}):X===!1?G.jsx(da,{type:"error",children:typeof r=="function"?r():r}):zt():G.jsx(da,{type:"no-data",children:typeof f=="function"?f():f})}return G.jsx("div",Object.assign({className:Bt("react-pdf__Document",s),ref:h},bt,{children:xt()}))});function Jv(){return M.useContext(Xv)}function Qv(){for(var i=[],t=0;t<arguments.length;t++)i[t]=arguments[t];var e=i.filter(Boolean);if(e.length<=1){var n=e[0];return n||null}return function(r){for(var o=0,l=e;o<l.length;o++){var c=l[o];typeof c=="function"?c(r):c&&(c.current=r)}}}const Zv=M.createContext(null),tA={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},SC=/^H(\d+)$/;function EC(i){return i in tA}function Kd(i){return"children"in i}function eA(i){return Kd(i)?i.children.length===1&&0 in i.children&&"id"in i.children[0]:!1}function _C(i){const t={};if(Kd(i)){const{role:e}=i,n=e.match(SC);if(n)t.role="heading",t["aria-level"]=Number(n[1]);else if(EC(e)){const s=tA[e];s&&(t.role=s)}}return t}function nA(i){const t={};if(Kd(i)){if(i.alt!==void 0&&(t["aria-label"]=i.alt),i.lang!==void 0&&(t.lang=i.lang),eA(i)){const[e]=i.children;if(e){const n=nA(e);return Object.assign(Object.assign({},t),n)}}}else"id"in i&&(t["aria-owns"]=i.id);return t}function xC(i){return i?Object.assign(Object.assign({},_C(i)),nA(i)):null}function sA({className:i,node:t}){const e=M.useMemo(()=>xC(t),[t]),n=M.useMemo(()=>!Kd(t)||eA(t)?null:t.children.map((s,r)=>G.jsx(sA,{node:s},r)),[t]);return G.jsx("span",Object.assign({className:i},e,{children:n}))}function Jd(){return M.useContext(Zv)}function CC(){const i=Jd();Ft(i);const{onGetStructTreeError:t,onGetStructTreeSuccess:e}=i,[n,s]=Sl(),{value:r,error:o}=n,{customTextRenderer:l,page:c}=i;function h(){r&&e&&e(r)}function u(){o&&(Be(!1,o.toString()),t&&t(o))}return M.useEffect(function(){s({type:"RESET"})},[s,c]),M.useEffect(function(){if(l||!c)return;const f=eu(c.getStructTree()),g=f;return f.promise.then(y=>{s({type:"RESOLVE",value:y})}).catch(y=>{s({type:"REJECT",error:y})}),()=>Bo(g)},[l,c,s]),M.useEffect(()=>{if(r!==void 0){if(r===!1){u();return}h()}},[r]),r?G.jsx(sA,{className:"react-pdf__Page__structTree structTree",node:r}):null}const _y=ks;function TC(i){const t=Jd();Ft(t);const e=Object.assign(Object.assign({},t),i),{_className:n,canvasBackground:s,devicePixelRatio:r=pC(),onRenderError:o,onRenderSuccess:l,page:c,renderForms:h,renderTextLayer:u,rotate:d,scale:f}=e,{canvasRef:g}=i;Ft(c);const y=M.useRef(null);function p(){c&&l&&l(yg(c,f))}function A(_){mC(_)||(Be(!1,_.toString()),o&&o(_))}const w=M.useMemo(()=>c.getViewport({scale:f*r,rotation:d}),[r,c,d,f]),T=M.useMemo(()=>c.getViewport({scale:f,rotation:d}),[c,d,f]);M.useEffect(function(){if(!c)return;c.cleanup();const{current:E}=y;if(!E)return;E.width=w.width,E.height=w.height,E.style.width=`${Math.floor(T.width)}px`,E.style.height=`${Math.floor(T.height)}px`,E.style.visibility="hidden";const R={annotationMode:h?_y.ENABLE_FORMS:_y.ENABLE,canvasContext:E.getContext("2d",{alpha:!1}),viewport:w};s&&(R.background=s);const P=c.render(R),L=P;return P.promise.then(()=>{E.style.visibility="",p()}).catch(A),()=>Bo(L)},[s,c,h,w,T]);const x=M.useCallback(()=>{const{current:_}=y;_&&(_.width=0,_.height=0)},[]);return M.useEffect(()=>x,[x]),G.jsx("canvas",{className:`${n}__canvas`,dir:"ltr",ref:Qv(g,y),style:{display:"block",userSelect:"none"},children:u?G.jsx(CC,{}):null})}function RC(i){return"str"in i}function PC(){const i=Jd();Ft(i);const{customTextRenderer:t,onGetTextError:e,onGetTextSuccess:n,onRenderTextLayerError:s,onRenderTextLayerSuccess:r,page:o,pageIndex:l,pageNumber:c,rotate:h,scale:u}=i;Ft(o);const[d,f]=Sl(),{value:g,error:y}=d,p=M.useRef(null);Be(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10)===1,"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer");function A(){g&&n&&n(g)}function w(){y&&(Be(!1,y.toString()),e&&e(y))}M.useEffect(function(){f({type:"RESET"})},[o,f]),M.useEffect(function(){if(!o)return;const L=eu(o.getTextContent()),O=L;return L.promise.then(S=>{f({type:"RESOLVE",value:S})}).catch(S=>{f({type:"REJECT",error:S})}),()=>Bo(O)},[o,f]),M.useEffect(()=>{if(g!==void 0){if(g===!1){w();return}A()}},[g]);const T=M.useCallback(()=>{r&&r()},[r]),x=M.useCallback(P=>{Be(!1,P.toString()),s&&s(P)},[s]);function _(){const P=p.current;P&&P.classList.add("selecting")}function E(){const P=p.current;P&&P.classList.remove("selecting")}const R=M.useMemo(()=>o.getViewport({scale:u,rotation:h}),[o,h,u]);return M.useLayoutEffect(function(){if(!o||!g)return;const{current:L}=p;if(!L)return;L.innerHTML="";const O=o.streamTextContent({includeMarkedContent:!0}),S={container:L,textContentSource:O,viewport:R},I=new dc(S),B=I;return I.render().then(()=>{const H=document.createElement("div");H.className="endOfContent",L.append(H);const W=L.querySelectorAll('[role="presentation"]');if(t){let X=0;g.items.forEach((j,z)=>{if(!RC(j))return;const ct=W[X];if(!ct)return;const D=t(Object.assign({pageIndex:l,pageNumber:c,itemIndex:z},j));ct.innerHTML=D,X+=j.str&&j.hasEOL?2:1})}T()}).catch(x),()=>Bo(B)},[t,x,T,o,l,c,g,R]),G.jsx("div",{className:Bt("react-pdf__Page__textContent","textLayer"),onMouseUp:E,onMouseDown:_,ref:p})}function kC(){const i=Jv(),t=Jd();Ft(t);const e=Object.assign(Object.assign({},i),t),{imageResourcesPath:n,linkService:s,onGetAnnotationsError:r,onGetAnnotationsSuccess:o,onRenderAnnotationLayerError:l,onRenderAnnotationLayerSuccess:c,page:h,pdf:u,renderForms:d,rotate:f,scale:g=1}=e;Ft(u),Ft(h),Ft(s);const[y,p]=Sl(),{value:A,error:w}=y,T=M.useRef(null);Be(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10)===1,"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations");function x(){A&&o&&o(A)}function _(){w&&(Be(!1,w.toString()),r&&r(w))}M.useEffect(function(){p({type:"RESET"})},[p,h]),M.useEffect(function(){if(!h)return;const O=eu(h.getAnnotations()),S=O;return O.promise.then(I=>{p({type:"RESOLVE",value:I})}).catch(I=>{p({type:"REJECT",error:I})}),()=>{Bo(S)}},[p,h]),M.useEffect(()=>{if(A!==void 0){if(A===!1){_();return}x()}},[A]);function E(){c&&c()}function R(L){Be(!1,`${L}`),l&&l(L)}const P=M.useMemo(()=>h.getViewport({scale:g,rotation:f}),[h,f,g]);return M.useEffect(function(){if(!u||!h||!s||!A)return;const{current:O}=T;if(!O)return;const S=P.clone({dontFlip:!0}),I={accessibilityManager:null,annotationCanvasMap:null,annotationEditorUIManager:null,div:O,l10n:null,page:h,structTreeLayer:null,viewport:S},B={annotations:A,annotationStorage:u.annotationStorage,div:O,imageResourcesPath:n,linkService:s,page:h,renderForms:d,viewport:S};O.innerHTML="";try{new Yg(I).render(B),E()}catch(H){R(H)}return()=>{}},[A,n,s,h,u,d,P]),G.jsx("div",{className:Bt("react-pdf__Page__annotations","annotationLayer"),ref:T})}var IC=function(i,t){var e={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&t.indexOf(n)<0&&(e[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(i);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(e[n[s]]=i[n[s]]);return e};const xy=1;function LC(i){const t=Jv(),e=Object.assign(Object.assign({},t),i),{_className:n="react-pdf__Page",_enableRegisterUnregisterPage:s=!0,canvasBackground:r,canvasRef:o,children:l,className:c,customRenderer:h,customTextRenderer:u,devicePixelRatio:d,error:f="Failed to load the page.",height:g,inputRef:y,loading:p="Loading page…",noData:A="No page specified.",onGetAnnotationsError:w,onGetAnnotationsSuccess:T,onGetStructTreeError:x,onGetStructTreeSuccess:_,onGetTextError:E,onGetTextSuccess:R,onLoadError:P,onLoadSuccess:L,onRenderAnnotationLayerError:O,onRenderAnnotationLayerSuccess:S,onRenderError:I,onRenderSuccess:B,onRenderTextLayerError:H,onRenderTextLayerSuccess:W,pageIndex:X,pageNumber:j,pdf:z,registerPage:ct,renderAnnotationLayer:D=!0,renderForms:C=!1,renderMode:k="canvas",renderTextLayer:$=!0,rotate:N,scale:V=xy,unregisterPage:nt,width:Y}=e,it=IC(e,["_className","_enableRegisterUnregisterPage","canvasBackground","canvasRef","children","className","customRenderer","customTextRenderer","devicePixelRatio","error","height","inputRef","loading","noData","onGetAnnotationsError","onGetAnnotationsSuccess","onGetStructTreeError","onGetStructTreeSuccess","onGetTextError","onGetTextSuccess","onLoadError","onLoadSuccess","onRenderAnnotationLayerError","onRenderAnnotationLayerSuccess","onRenderError","onRenderSuccess","onRenderTextLayerError","onRenderTextLayerSuccess","pageIndex","pageNumber","pdf","registerPage","renderAnnotationLayer","renderForms","renderMode","renderTextLayer","rotate","scale","unregisterPage","width"]),[ot,st]=Sl(),{value:Z,error:bt}=ot,zt=M.useRef(null);Ft(z);const xt=wr(j)?j-1:X??null,ut=j??(wr(X)?X+1:null),Zt=N??(Z?Z.rotate:null),Ot=M.useMemo(()=>{if(!Z)return null;let Go=1;const su=V??xy;if(Y||g){const iu=Z.getViewport({scale:1,rotation:Zt});Y?Go=Y/iu.width:g&&(Go=g/iu.height)}return su*Go},[g,Z,Zt,V,Y]);M.useEffect(function(){return()=>{wr(xt)&&s&&nt&&nt(xt)}},[s,z,xt,nt]);function je(){if(L){if(!Z||!Ot)return;L(yg(Z,Ot))}if(s&&ct){if(!wr(xt)||!zt.current)return;ct(xt,zt.current)}}function xn(){bt&&(Be(!1,bt.toString()),P&&P(bt))}M.useEffect(function(){st({type:"RESET"})},[st,z,xt]),M.useEffect(function(){if(!z||!ut)return;const su=eu(z.getPage(ut)),iu=su;return su.promise.then(Qd=>{st({type:"RESOLVE",value:Qd})}).catch(Qd=>{st({type:"REJECT",error:Qd})}),()=>Bo(iu)},[st,z,ut]),M.useEffect(()=>{if(Z!==void 0){if(Z===!1){xn();return}je()}},[Z,Ot]);const vr=M.useMemo(()=>Z&&wr(xt)&&ut&&wr(Zt)&&wr(Ot)?{_className:n,canvasBackground:r,customTextRenderer:u,devicePixelRatio:d,onGetAnnotationsError:w,onGetAnnotationsSuccess:T,onGetStructTreeError:x,onGetStructTreeSuccess:_,onGetTextError:E,onGetTextSuccess:R,onRenderAnnotationLayerError:O,onRenderAnnotationLayerSuccess:S,onRenderError:I,onRenderSuccess:B,onRenderTextLayerError:H,onRenderTextLayerSuccess:W,page:Z,pageIndex:xt,pageNumber:ut,renderForms:C,renderTextLayer:$,rotate:Zt,scale:Ot}:null,[n,r,u,d,w,T,x,_,E,R,O,S,I,B,H,W,Z,xt,ut,C,$,Zt,Ot]),nu=M.useMemo(()=>qv(it,()=>Z&&(Ot?yg(Z,Ot):void 0)),[it,Z,Ot]),zo=`${xt}@${Ot}/${Zt}`;function dt(){switch(k){case"custom":return Ft(h),G.jsx(h,{},`${zo}_custom`);case"none":return null;case"canvas":default:return G.jsx(TC,{canvasRef:o},`${zo}_canvas`)}}function lA(){return $?G.jsx(PC,{},`${zo}_text`):null}function cA(){return D?G.jsx(kC,{},`${zo}_annotations`):null}function hA(){return G.jsxs(Zv.Provider,{value:vr,children:[dt(),lA(),cA(),l]})}function uA(){return ut?z===null||Z===void 0||Z===null?G.jsx(da,{type:"loading",children:typeof p=="function"?p():p}):z===!1||Z===!1?G.jsx(da,{type:"error",children:typeof f=="function"?f():f}):hA():G.jsx(da,{type:"no-data",children:typeof A=="function"?A():A})}return G.jsx("div",Object.assign({className:Bt(n,c),"data-page-number":ut,ref:Qv(y,zt),style:{"--scale-round-x":"1px","--scale-round-y":"1px","--scale-factor":"1","--user-unit":`${Ot}`,"--total-scale-factor":"calc(var(--scale-factor) * var(--user-unit))",backgroundColor:r||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"}},nu,{children:uA()}))}gC();Fn.workerSrc="pdf.worker.mjs";var wf={exports:{}},Cy;function MC(){return Cy||(Cy=1,function(i){var t=function(e){var n=Object.prototype,s=n.hasOwnProperty,r=Object.defineProperty||function(D,C,k){D[C]=k.value},o,l=typeof Symbol=="function"?Symbol:{},c=l.iterator||"@@iterator",h=l.asyncIterator||"@@asyncIterator",u=l.toStringTag||"@@toStringTag";function d(D,C,k){return Object.defineProperty(D,C,{value:k,enumerable:!0,configurable:!0,writable:!0}),D[C]}try{d({},"")}catch{d=function(C,k,$){return C[k]=$}}function f(D,C,k,$){var N=C&&C.prototype instanceof x?C:x,V=Object.create(N.prototype),nt=new j($||[]);return r(V,"_invoke",{value:B(D,k,nt)}),V}e.wrap=f;function g(D,C,k){try{return{type:"normal",arg:D.call(C,k)}}catch($){return{type:"throw",arg:$}}}var y="suspendedStart",p="suspendedYield",A="executing",w="completed",T={};function x(){}function _(){}function E(){}var R={};d(R,c,function(){return this});var P=Object.getPrototypeOf,L=P&&P(P(z([])));L&&L!==n&&s.call(L,c)&&(R=L);var O=E.prototype=x.prototype=Object.create(R);_.prototype=E,r(O,"constructor",{value:E,configurable:!0}),r(E,"constructor",{value:_,configurable:!0}),_.displayName=d(E,u,"GeneratorFunction");function S(D){["next","throw","return"].forEach(function(C){d(D,C,function(k){return this._invoke(C,k)})})}e.isGeneratorFunction=function(D){var C=typeof D=="function"&&D.constructor;return C?C===_||(C.displayName||C.name)==="GeneratorFunction":!1},e.mark=function(D){return Object.setPrototypeOf?Object.setPrototypeOf(D,E):(D.__proto__=E,d(D,u,"GeneratorFunction")),D.prototype=Object.create(O),D},e.awrap=function(D){return{__await:D}};function I(D,C){function k(V,nt,Y,it){var ot=g(D[V],D,nt);if(ot.type==="throw")it(ot.arg);else{var st=ot.arg,Z=st.value;return Z&&typeof Z=="object"&&s.call(Z,"__await")?C.resolve(Z.__await).then(function(bt){k("next",bt,Y,it)},function(bt){k("throw",bt,Y,it)}):C.resolve(Z).then(function(bt){st.value=bt,Y(st)},function(bt){return k("throw",bt,Y,it)})}}var $;function N(V,nt){function Y(){return new C(function(it,ot){k(V,nt,it,ot)})}return $=$?$.then(Y,Y):Y()}r(this,"_invoke",{value:N})}S(I.prototype),d(I.prototype,h,function(){return this}),e.AsyncIterator=I,e.async=function(D,C,k,$,N){N===void 0&&(N=Promise);var V=new I(f(D,C,k,$),N);return e.isGeneratorFunction(C)?V:V.next().then(function(nt){return nt.done?nt.value:V.next()})};function B(D,C,k){var $=y;return function(V,nt){if($===A)throw new Error("Generator is already running");if($===w){if(V==="throw")throw nt;return ct()}for(k.method=V,k.arg=nt;;){var Y=k.delegate;if(Y){var it=H(Y,k);if(it){if(it===T)continue;return it}}if(k.method==="next")k.sent=k._sent=k.arg;else if(k.method==="throw"){if($===y)throw $=w,k.arg;k.dispatchException(k.arg)}else k.method==="return"&&k.abrupt("return",k.arg);$=A;var ot=g(D,C,k);if(ot.type==="normal"){if($=k.done?w:p,ot.arg===T)continue;return{value:ot.arg,done:k.done}}else ot.type==="throw"&&($=w,k.method="throw",k.arg=ot.arg)}}}function H(D,C){var k=C.method,$=D.iterator[k];if($===o)return C.delegate=null,k==="throw"&&D.iterator.return&&(C.method="return",C.arg=o,H(D,C),C.method==="throw")||k!=="return"&&(C.method="throw",C.arg=new TypeError("The iterator does not provide a '"+k+"' method")),T;var N=g($,D.iterator,C.arg);if(N.type==="throw")return C.method="throw",C.arg=N.arg,C.delegate=null,T;var V=N.arg;if(!V)return C.method="throw",C.arg=new TypeError("iterator result is not an object"),C.delegate=null,T;if(V.done)C[D.resultName]=V.value,C.next=D.nextLoc,C.method!=="return"&&(C.method="next",C.arg=o);else return V;return C.delegate=null,T}S(O),d(O,u,"Generator"),d(O,c,function(){return this}),d(O,"toString",function(){return"[object Generator]"});function W(D){var C={tryLoc:D[0]};1 in D&&(C.catchLoc=D[1]),2 in D&&(C.finallyLoc=D[2],C.afterLoc=D[3]),this.tryEntries.push(C)}function X(D){var C=D.completion||{};C.type="normal",delete C.arg,D.completion=C}function j(D){this.tryEntries=[{tryLoc:"root"}],D.forEach(W,this),this.reset(!0)}e.keys=function(D){var C=Object(D),k=[];for(var $ in C)k.push($);return k.reverse(),function N(){for(;k.length;){var V=k.pop();if(V in C)return N.value=V,N.done=!1,N}return N.done=!0,N}};function z(D){if(D){var C=D[c];if(C)return C.call(D);if(typeof D.next=="function")return D;if(!isNaN(D.length)){var k=-1,$=function N(){for(;++k<D.length;)if(s.call(D,k))return N.value=D[k],N.done=!1,N;return N.value=o,N.done=!0,N};return $.next=$}}return{next:ct}}e.values=z;function ct(){return{value:o,done:!0}}return j.prototype={constructor:j,reset:function(D){if(this.prev=0,this.next=0,this.sent=this._sent=o,this.done=!1,this.delegate=null,this.method="next",this.arg=o,this.tryEntries.forEach(X),!D)for(var C in this)C.charAt(0)==="t"&&s.call(this,C)&&!isNaN(+C.slice(1))&&(this[C]=o)},stop:function(){this.done=!0;var D=this.tryEntries[0],C=D.completion;if(C.type==="throw")throw C.arg;return this.rval},dispatchException:function(D){if(this.done)throw D;var C=this;function k(it,ot){return V.type="throw",V.arg=D,C.next=it,ot&&(C.method="next",C.arg=o),!!ot}for(var $=this.tryEntries.length-1;$>=0;--$){var N=this.tryEntries[$],V=N.completion;if(N.tryLoc==="root")return k("end");if(N.tryLoc<=this.prev){var nt=s.call(N,"catchLoc"),Y=s.call(N,"finallyLoc");if(nt&&Y){if(this.prev<N.catchLoc)return k(N.catchLoc,!0);if(this.prev<N.finallyLoc)return k(N.finallyLoc)}else if(nt){if(this.prev<N.catchLoc)return k(N.catchLoc,!0)}else if(Y){if(this.prev<N.finallyLoc)return k(N.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(D,C){for(var k=this.tryEntries.length-1;k>=0;--k){var $=this.tryEntries[k];if($.tryLoc<=this.prev&&s.call($,"finallyLoc")&&this.prev<$.finallyLoc){var N=$;break}}N&&(D==="break"||D==="continue")&&N.tryLoc<=C&&C<=N.finallyLoc&&(N=null);var V=N?N.completion:{};return V.type=D,V.arg=C,N?(this.method="next",this.next=N.finallyLoc,T):this.complete(V)},complete:function(D,C){if(D.type==="throw")throw D.arg;return D.type==="break"||D.type==="continue"?this.next=D.arg:D.type==="return"?(this.rval=this.arg=D.arg,this.method="return",this.next="end"):D.type==="normal"&&C&&(this.next=C),T},finish:function(D){for(var C=this.tryEntries.length-1;C>=0;--C){var k=this.tryEntries[C];if(k.finallyLoc===D)return this.complete(k.completion,k.afterLoc),X(k),T}},catch:function(D){for(var C=this.tryEntries.length-1;C>=0;--C){var k=this.tryEntries[C];if(k.tryLoc===D){var $=k.completion;if($.type==="throw"){var N=$.arg;X(k)}return N}}throw new Error("illegal catch attempt")},delegateYield:function(D,C,k){return this.delegate={iterator:z(D),resultName:C,nextLoc:k},this.method==="next"&&(this.arg=o),T}},e}(i.exports);try{regeneratorRuntime=t}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}}(wf)),wf.exports}var Sf,Ty;function Qg(){return Ty||(Ty=1,Sf=(i,t)=>`${i}-${t}-${Math.random().toString(16).slice(3,8)}`),Sf}var Ef,Ry;function iA(){if(Ry)return Ef;Ry=1;const i=Qg();let t=0;return Ef=({id:e,action:n,payload:s={}})=>{let r=e;return typeof r>"u"&&(r=i("Job",t),t+=1),{id:r,action:n,payload:s}},Ef}var Ll={},Py;function Zg(){if(Py)return Ll;Py=1;let i=!1;return Ll.logging=i,Ll.setLogging=t=>{i=t},Ll.log=(...t)=>i?console.log.apply(this,t):null,Ll}var _f,ky;function OC(){if(ky)return _f;ky=1;const i=iA(),{log:t}=Zg(),e=Qg();let n=0;return _f=()=>{const s=e("Scheduler",n),r={},o={};let l=[];n+=1;const c=()=>l.length,h=()=>Object.keys(r).length,u=()=>{if(l.length!==0){const p=Object.keys(r);for(let A=0;A<p.length;A+=1)if(typeof o[p[A]]>"u"){l[0](r[p[A]]);break}}},d=(p,A)=>new Promise((w,T)=>{const x=i({action:p,payload:A});l.push(async _=>{l.shift(),o[_.id]=x;try{w(await _[p].apply(this,[...A,x.id]))}catch(E){T(E)}finally{delete o[_.id],u()}}),t(`[${s}]: Add ${x.id} to JobQueue`),t(`[${s}]: JobQueue length=${l.length}`),u()});return{addWorker:p=>(r[p.id]=p,t(`[${s}]: Add ${p.id}`),t(`[${s}]: Number of workers=${h()}`),u(),p.id),addJob:async(p,...A)=>{if(h()===0)throw Error(`[${s}]: You need to have at least one worker before adding jobs`);return d(p,A)},terminate:async()=>{Object.keys(r).forEach(async p=>{await r[p].terminate()}),l=[]},getQueueLen:c,getNumWorkers:h}},_f}function DC(i){throw new Error('Could not dynamically require "'+i+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var xf,Iy;function NC(){return Iy||(Iy=1,xf=i=>{const t={};return typeof WorkerGlobalScope<"u"?t.type="webworker":typeof document=="object"?t.type="browser":typeof process=="object"&&typeof DC=="function"&&(t.type="node"),typeof i>"u"?t:t[i]}),xf}var Cf,Ly;function FC(){if(Ly)return Cf;Ly=1;const t=NC()("type")==="browser"?e=>new URL(e,window.location.href).href:e=>e;return Cf=e=>{const n={...e};return["corePath","workerPath","langPath"].forEach(s=>{e[s]&&(n[s]=t(n[s]))}),n},Cf}var Tf,My;function rA(){return My||(My=1,Tf={TESSERACT_ONLY:0,LSTM_ONLY:1,TESSERACT_LSTM_COMBINED:2,DEFAULT:3}),Tf}const $C="6.0.1",BC={version:$C};var Rf,Oy;function jC(){return Oy||(Oy=1,Rf={workerBlobURL:!0,logger:()=>{}}),Rf}var Pf,Dy;function HC(){if(Dy)return Pf;Dy=1;const i=BC.version;return Pf={...jC(),workerPath:`https://cdn.jsdelivr.net/npm/tesseract.js@v${i}/dist/worker.min.js`},Pf}var kf,Ny;function zC(){return Ny||(Ny=1,kf=({workerPath:i,workerBlobURL:t})=>{let e;if(Blob&&URL&&t){const n=new Blob([`importScripts("${i}");`],{type:"application/javascript"});e=new Worker(URL.createObjectURL(n))}else e=new Worker(i);return e}),kf}var If,Fy;function GC(){return Fy||(Fy=1,If=i=>{i.terminate()}),If}var Lf,$y;function UC(){return $y||($y=1,Lf=(i,t)=>{i.onmessage=({data:e})=>{t(e)}}),Lf}var Mf,By;function WC(){return By||(By=1,Mf=async(i,t)=>{i.postMessage(t)}),Mf}var Of,jy;function VC(){if(jy)return Of;jy=1;const i=e=>new Promise((n,s)=>{const r=new FileReader;r.onload=()=>{n(r.result)},r.onerror=({target:{error:{code:o}}})=>{s(Error(`File could not be read! Code=${o}`))},r.readAsArrayBuffer(e)}),t=async e=>{let n=e;if(typeof e>"u")return"undefined";if(typeof e=="string")/data:image\/([a-zA-Z]*);base64,([^"]*)/.test(e)?n=atob(e.split(",")[1]).split("").map(s=>s.charCodeAt(0)):n=await(await fetch(e)).arrayBuffer();else if(typeof HTMLElement<"u"&&e instanceof HTMLElement)e.tagName==="IMG"&&(n=await t(e.src)),e.tagName==="VIDEO"&&(n=await t(e.poster)),e.tagName==="CANVAS"&&await new Promise(s=>{e.toBlob(async r=>{n=await i(r),s()})});else if(typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas){const s=await e.convertToBlob();n=await i(s)}else(e instanceof File||e instanceof Blob)&&(n=await i(e));return new Uint8Array(n)};return Of=t,Of}var Df,Hy;function qC(){if(Hy)return Df;Hy=1;const i=HC(),t=zC(),e=GC(),n=UC(),s=WC(),r=VC();return Df={defaultOptions:i,spawnWorker:t,terminateWorker:e,onMessage:n,send:s,loadImage:r},Df}var Nf,zy;function oA(){if(zy)return Nf;zy=1;const i=FC(),t=iA(),{log:e}=Zg(),n=Qg(),s=rA(),{defaultOptions:r,spawnWorker:o,terminateWorker:l,onMessage:c,loadImage:h,send:u}=qC();let d=0;return Nf=async(f="eng",g=s.LSTM_ONLY,y={},p={})=>{const A=n("Worker",d),{logger:w,errorHandler:T,...x}=i({...r,...y}),_={},E=typeof f=="string"?f.split("+"):f;let R=g,P=p;const L=[s.DEFAULT,s.LSTM_ONLY].includes(g)&&!x.legacyCore;let O,S;const I=new Promise((st,Z)=>{S=st,O=Z}),B=st=>{O(st.message)};let H=o(x);H.onerror=B,d+=1;const W=({id:st,action:Z,payload:bt})=>new Promise((zt,xt)=>{e(`[${A}]: Start ${st}, action=${Z}`);const ut=`${Z}-${st}`;_[ut]={resolve:zt,reject:xt},u(H,{workerId:A,jobId:st,action:Z,payload:bt})}),X=()=>console.warn("`load` is depreciated and should be removed from code (workers now come pre-loaded)"),j=st=>W(t({id:st,action:"load",payload:{options:{lstmOnly:L,corePath:x.corePath,logging:x.logging}}})),z=(st,Z,bt)=>W(t({id:bt,action:"FS",payload:{method:"writeFile",args:[st,Z]}})),ct=(st,Z)=>W(t({id:Z,action:"FS",payload:{method:"readFile",args:[st,{encoding:"utf8"}]}})),D=(st,Z)=>W(t({id:Z,action:"FS",payload:{method:"unlink",args:[st]}})),C=(st,Z,bt)=>W(t({id:bt,action:"FS",payload:{method:st,args:Z}})),k=(st,Z)=>W(t({id:Z,action:"loadLanguage",payload:{langs:st,options:{langPath:x.langPath,dataPath:x.dataPath,cachePath:x.cachePath,cacheMethod:x.cacheMethod,gzip:x.gzip,lstmOnly:[s.DEFAULT,s.LSTM_ONLY].includes(R)&&!x.legacyLang}}})),$=(st,Z,bt,zt)=>W(t({id:zt,action:"initialize",payload:{langs:st,oem:Z,config:bt}})),N=(st="eng",Z,bt,zt)=>{if(L&&[s.TESSERACT_ONLY,s.TESSERACT_LSTM_COMBINED].includes(Z))throw Error("Legacy model requested but code missing.");const xt=Z||R;R=xt;const ut=bt||P;P=ut;const Ot=(typeof st=="string"?st.split("+"):st).filter(je=>!E.includes(je));return E.push(...Ot),Ot.length>0?k(Ot,zt).then(()=>$(st,xt,ut,zt)):$(st,xt,ut,zt)},V=(st={},Z)=>W(t({id:Z,action:"setParameters",payload:{params:st}})),nt=async(st,Z={},bt={text:!0},zt)=>W(t({id:zt,action:"recognize",payload:{image:await h(st),options:Z,output:bt}})),Y=async(st,Z)=>{if(L)throw Error("`worker.detect` requires Legacy model, which was not loaded.");return W(t({id:Z,action:"detect",payload:{image:await h(st)}}))},it=async()=>(H!==null&&(l(H),H=null),Promise.resolve());c(H,({workerId:st,jobId:Z,status:bt,action:zt,data:xt})=>{const ut=`${zt}-${Z}`;if(bt==="resolve")e(`[${st}]: Complete ${Z}`),_[ut].resolve({jobId:Z,data:xt}),delete _[ut];else if(bt==="reject")if(_[ut].reject(xt),delete _[ut],zt==="load"&&O(xt),T)T(xt);else throw Error(xt);else bt==="progress"&&w({...xt,userJobId:Z})});const ot={id:A,worker:H,load:X,writeText:z,readText:ct,removeFile:D,FS:C,reinitialize:N,setParameters:V,recognize:nt,detect:Y,terminate:it};return j().then(()=>k(f)).then(()=>$(f,g,p)).then(()=>S(ot)).catch(()=>{}),I},Nf}var Ff,Gy;function XC(){if(Gy)return Ff;Gy=1;const i=oA();return Ff={recognize:async(n,s,r)=>{const o=await i(s,1,r);return o.recognize(n).finally(async()=>{await o.terminate()})},detect:async(n,s)=>{const r=await i("osd",0,s);return r.detect(n).finally(async()=>{await r.terminate()})}},Ff}var $f,Uy;function YC(){return Uy||(Uy=1,$f={AFR:"afr",AMH:"amh",ARA:"ara",ASM:"asm",AZE:"aze",AZE_CYRL:"aze_cyrl",BEL:"bel",BEN:"ben",BOD:"bod",BOS:"bos",BUL:"bul",CAT:"cat",CEB:"ceb",CES:"ces",CHI_SIM:"chi_sim",CHI_TRA:"chi_tra",CHR:"chr",CYM:"cym",DAN:"dan",DEU:"deu",DZO:"dzo",ELL:"ell",ENG:"eng",ENM:"enm",EPO:"epo",EST:"est",EUS:"eus",FAS:"fas",FIN:"fin",FRA:"fra",FRK:"frk",FRM:"frm",GLE:"gle",GLG:"glg",GRC:"grc",GUJ:"guj",HAT:"hat",HEB:"heb",HIN:"hin",HRV:"hrv",HUN:"hun",IKU:"iku",IND:"ind",ISL:"isl",ITA:"ita",ITA_OLD:"ita_old",JAV:"jav",JPN:"jpn",KAN:"kan",KAT:"kat",KAT_OLD:"kat_old",KAZ:"kaz",KHM:"khm",KIR:"kir",KOR:"kor",KUR:"kur",LAO:"lao",LAT:"lat",LAV:"lav",LIT:"lit",MAL:"mal",MAR:"mar",MKD:"mkd",MLT:"mlt",MSA:"msa",MYA:"mya",NEP:"nep",NLD:"nld",NOR:"nor",ORI:"ori",PAN:"pan",POL:"pol",POR:"por",PUS:"pus",RON:"ron",RUS:"rus",SAN:"san",SIN:"sin",SLK:"slk",SLV:"slv",SPA:"spa",SPA_OLD:"spa_old",SQI:"sqi",SRP:"srp",SRP_LATN:"srp_latn",SWA:"swa",SWE:"swe",SYR:"syr",TAM:"tam",TEL:"tel",TGK:"tgk",TGL:"tgl",THA:"tha",TIR:"tir",TUR:"tur",UIG:"uig",UKR:"ukr",URD:"urd",UZB:"uzb",UZB_CYRL:"uzb_cyrl",VIE:"vie",YID:"yid"}),$f}var Bf,Wy;function KC(){return Wy||(Wy=1,Bf={OSD_ONLY:"0",AUTO_OSD:"1",AUTO_ONLY:"2",AUTO:"3",SINGLE_COLUMN:"4",SINGLE_BLOCK_VERT_TEXT:"5",SINGLE_BLOCK:"6",SINGLE_LINE:"7",SINGLE_WORD:"8",CIRCLE_WORD:"9",SINGLE_CHAR:"10",SPARSE_TEXT:"11",SPARSE_TEXT_OSD:"12",RAW_LINE:"13"}),Bf}var jf,Vy;function JC(){if(Vy)return jf;Vy=1,MC();const i=OC(),t=oA(),e=XC(),n=YC(),s=rA(),r=KC(),{setLogging:o}=Zg();return jf={languages:n,OEM:s,PSM:r,createScheduler:i,createWorker:t,setLogging:o,...e},jf}var QC=JC();const aA=bg(QC),ZC=br(G.jsx("path",{d:"M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96M14 13v4h-4v-4H7l5-5 5 5z"})),tT=br(G.jsx("path",{d:"M15.41 7.41 14 6l-6 6 6 6 1.41-1.41L10.83 12z"})),eT=br(G.jsx("path",{d:"M10 6 8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}));Fn.workerSrc="/assets/pdf.worker.min.mjs";aA.workerPath="/assets/worker.min.js";function iT(){const[i,t]=M.useState(null),[e,n]=M.useState(""),[s,r]=M.useState(""),[o,l]=M.useState(!1),[c,h]=M.useState(1),[u,d]=M.useState(0),f=p=>{t(p),r(""),n(""),h(1),d(0)},g=p=>{p.preventDefault(),p.dataTransfer.files&&p.dataTransfer.files[0]&&f(p.dataTransfer.files[0])},y=async()=>{n(""),l(!0),r("");try{const p=document.querySelector(".react-pdf__Page__canvas");if(!p)throw new Error("請先載入 PDF 頁面！");const{data:{text:A}}=await aA.recognize(p,"eng");n(A)}catch(p){r("❌ OCR 失敗："+p.message)}finally{l(!1)}};return G.jsxs(uf,{sx:{maxWidth:700,mx:"auto",mt:4,p:2},children:[G.jsx(Ko,{variant:"h5",gutterBottom:!0,children:"PDF OCR 工具"}),G.jsxs(Qf,{variant:"outlined",sx:{p:2,bgcolor:"#f8fafc",border:"2px dashed #90caf9",textAlign:"center",mb:2,cursor:"pointer"},onDrop:g,onDragOver:p=>p.preventDefault(),children:[G.jsx(ZC,{sx:{fontSize:40,color:"#90caf9"}}),G.jsx(Ko,{children:"拖曳 PDF 到這裡，或點擊選擇檔案"}),G.jsxs(qm,{variant:"contained",sx:{mt:2},component:"label",children:["選擇檔案",G.jsx("input",{type:"file",accept:"application/pdf",hidden:!0,onChange:p=>{var A;return f(((A=p.target.files)==null?void 0:A[0])||null)}})]}),i&&G.jsx(Ko,{sx:{mt:1},color:"primary",children:i.name})]}),i&&G.jsxs(uf,{sx:{mb:2,border:"1px solid #eee",borderRadius:2,overflow:"hidden",bgcolor:"#fff"},children:[G.jsx(wC,{file:i,onLoadSuccess:({numPages:p})=>d(p),onLoadError:p=>r("PDF 載入失敗: "+p.message),loading:G.jsx(uf,{sx:{py:4},children:G.jsx(td,{})}),children:G.jsx(LC,{pageNumber:c,width:640,renderTextLayer:!0})}),G.jsxs(Xm,{direction:"row",alignItems:"center",justifyContent:"center",sx:{py:1},children:[G.jsx(np,{onClick:()=>h(p=>Math.max(p-1,1)),disabled:c<=1,children:G.jsx(tT,{})}),G.jsxs(Ko,{children:[c," / ",u]}),G.jsx(np,{onClick:()=>h(p=>Math.min(p+1,u)),disabled:c>=u,children:G.jsx(eT,{})})]})]}),G.jsxs(Xm,{direction:"row",spacing:2,mb:2,children:[G.jsx(qm,{variant:"contained",onClick:y,disabled:!i||o,children:"OCR本頁（Canvas識字）"}),o&&G.jsx(td,{size:28})]}),e&&G.jsxs(Qf,{variant:"outlined",sx:{p:2,minHeight:120,bgcolor:"#f3f3f3"},children:[G.jsx(Ko,{variant:"subtitle2",color:"success.main",gutterBottom:!0,children:"OCR 結果："}),G.jsx(Ko,{component:"pre",sx:{fontFamily:"inherit"},children:e})]}),s&&G.jsx(z1,{severity:"error",sx:{mt:2},children:s})]})}export{iT as P,ia as R,bg as g,G as j,bA as r};
