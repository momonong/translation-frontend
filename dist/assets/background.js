chrome.runtime.onInstalled.addListener(()=>{chrome.contextMenus.removeAll(()=>{chrome.contextMenus.create({id:"translate-selection",title:"翻譯選取文字",contexts:["selection"]}),chrome.contextMenus.create({id:"ocr-area",title:"OCR 翻譯 (框選區域)",contexts:["page","frame","image"]}),chrome.contextMenus.create({id:"open-pdf-ocr-tool",title:"開啟 PDF OCR 工具",contexts:["page","frame"]})})});chrome.contextMenus.onClicked.addListener((e,t)=>{!t||!t.id||(e.menuItemId==="translate-selection"&&e.selectionText&&chrome.tabs.sendMessage(t.id,{type:"SHOW_TRANSLATE_FLOAT",text:e.selectionText}),e.menuItemId==="ocr-area"&&chrome.tabs.sendMessage(t.id,{type:"START_OCR_AREA_SELECTION"}),e.menuItemId==="open-pdf-ocr-tool"&&chrome.tabs.create({url:chrome.runtime.getURL("pdf.html")}))});chrome.runtime.onMessage.addListener((e,t,o)=>{if(e.type==="OPEN_GRAPH_TAB"&&e.text){const n=chrome.runtime.getURL(`index.html?text=${encodeURIComponent(e.text)}`);chrome.tabs.create({url:n})}});
