chrome.runtime.onInstalled.addListener(()=>{chrome.contextMenus.removeAll(()=>{chrome.contextMenus.create({id:"translate-selection",title:"Translate",contexts:["selection"]}),chrome.contextMenus.create({id:"ocr-area",title:"OCR translate",contexts:["page","frame","image"]}),chrome.contextMenus.create({id:"open-pdf-ocr-tool",title:"開啟 PDF OCR 工具",contexts:["page","frame"]})})});chrome.contextMenus.onClicked.addListener((e,t)=>{e.menuItemId==="translate-selection"&&t.id&&e.selectionText&&chrome.tabs.sendMessage(t.id,{type:"SHOW_TRANSLATE_FLOAT",text:e.selectionText}),e.menuItemId==="ocr-area"&&t.id&&chrome.tabs.sendMessage(t.id,{type:"START_OCR_AREA_SELECTION"}),e.menuItemId==="open-pdf-ocr-tool"&&chrome.tabs.create({url:chrome.runtime.getURL("pdf.html")})});chrome.runtime.onMessage.addListener((e,t,n)=>{e.type==="OPEN_GRAPH_TAB"&&e.text&&chrome.tabs.create({url:chrome.runtime.getURL(`index.html?text=${encodeURIComponent(e.text)}`)})});
