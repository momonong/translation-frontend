var bv=Object.defineProperty;var Dg=i=>{throw TypeError(i)};var vv=(i,t,e)=>t in i?bv(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e;var $=(i,t,e)=>vv(i,typeof t!="symbol"?t+"":t,e),Jd=(i,t,e)=>t.has(i)||Dg("Cannot "+e);var a=(i,t,e)=>(Jd(i,t,"read from private field"),e?e.call(i):t.get(i)),b=(i,t,e)=>t.has(i)?Dg("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(i):t.set(i,e),m=(i,t,e,s)=>(Jd(i,t,"write to private field"),s?s.call(i,e):t.set(i,e),e),A=(i,t,e)=>(Jd(i,t,"access private method"),e);var Fe=(i,t,e,s)=>({set _(n){m(i,t,n,e)},get _(){return a(i,t,s)}});function Av(i,t){for(var e=0;e<t.length;e++){const s=t[e];if(typeof s!="string"&&!Array.isArray(s)){for(const n in s)if(n!=="default"&&!(n in i)){const r=Object.getOwnPropertyDescriptor(s,n);r&&Object.defineProperty(i,n,r.get?r:{enumerable:!0,get:()=>s[n]})}}}return Object.freeze(Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function e(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerPolicy&&(r.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?r.credentials="include":n.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(n){if(n.ep)return;n.ep=!0;const r=e(n);fetch(n.href,r)}})();function ny(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var Zd={exports:{}},xl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Og;function wv(){if(Og)return xl;Og=1;var i=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(s,n,r){var o=null;if(r!==void 0&&(o=""+r),n.key!==void 0&&(o=""+n.key),"key"in n){r={};for(var l in n)l!=="key"&&(r[l]=n[l])}else r=n;return n=r.ref,{$$typeof:i,type:s,key:o,ref:n!==void 0?n:null,props:r}}return xl.Fragment=t,xl.jsx=e,xl.jsxs=e,xl}var Ng;function Sv(){return Ng||(Ng=1,Zd.exports=wv()),Zd.exports}var B=Sv(),tf={exports:{}},rt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fg;function Ev(){if(Fg)return rt;Fg=1;var i=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),n=Symbol.for("react.profiler"),r=Symbol.for("react.consumer"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),u=Symbol.for("react.lazy"),d=Symbol.iterator;function f(R){return R===null||typeof R!="object"?null:(R=d&&R[d]||R["@@iterator"],typeof R=="function"?R:null)}var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},y=Object.assign,g={};function v(R,O,U){this.props=R,this.context=O,this.refs=g,this.updater=U||p}v.prototype.isReactComponent={},v.prototype.setState=function(R,O){if(typeof R!="object"&&typeof R!="function"&&R!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,R,O,"setState")},v.prototype.forceUpdate=function(R){this.updater.enqueueForceUpdate(this,R,"forceUpdate")};function w(){}w.prototype=v.prototype;function _(R,O,U){this.props=R,this.context=O,this.refs=g,this.updater=U||p}var C=_.prototype=new w;C.constructor=_,y(C,v.prototype),C.isPureReactComponent=!0;var x=Array.isArray,E={H:null,A:null,T:null,S:null,V:null},T=Object.prototype.hasOwnProperty;function P(R,O,U,V,tt,at){return U=at.ref,{$$typeof:i,type:R,key:O,ref:U!==void 0?U:null,props:at}}function M(R,O){return P(R.type,O,void 0,void 0,void 0,R.props)}function D(R){return typeof R=="object"&&R!==null&&R.$$typeof===i}function S(R){var O={"=":"=0",":":"=2"};return"$"+R.replace(/[=:]/g,function(U){return O[U]})}var k=/\/+/g;function N(R,O){return typeof R=="object"&&R!==null&&R.key!=null?S(""+R.key):O.toString(36)}function H(){}function z(R){switch(R.status){case"fulfilled":return R.value;case"rejected":throw R.reason;default:switch(typeof R.status=="string"?R.then(H,H):(R.status="pending",R.then(function(O){R.status==="pending"&&(R.status="fulfilled",R.value=O)},function(O){R.status==="pending"&&(R.status="rejected",R.reason=O)})),R.status){case"fulfilled":return R.value;case"rejected":throw R.reason}}throw R}function q(R,O,U,V,tt){var at=typeof R;(at==="undefined"||at==="boolean")&&(R=null);var J=!1;if(R===null)J=!0;else switch(at){case"bigint":case"string":case"number":J=!0;break;case"object":switch(R.$$typeof){case i:case t:J=!0;break;case u:return J=R._init,q(J(R._payload),O,U,V,tt)}}if(J)return tt=tt(R),J=V===""?"."+N(R,0):V,x(tt)?(U="",J!=null&&(U=J.replace(k,"$&/")+"/"),q(tt,O,U,"",function(qe){return qe})):tt!=null&&(D(tt)&&(tt=M(tt,U+(tt.key==null||R&&R.key===tt.key?"":(""+tt.key).replace(k,"$&/")+"/")+J)),O.push(tt)),1;J=0;var ct=V===""?".":V+":";if(x(R))for(var yt=0;yt<R.length;yt++)V=R[yt],at=ct+N(V,yt),J+=q(V,O,U,at,tt);else if(yt=f(R),typeof yt=="function")for(R=yt.call(R),yt=0;!(V=R.next()).done;)V=V.value,at=ct+N(V,yt++),J+=q(V,O,U,at,tt);else if(at==="object"){if(typeof R.then=="function")return q(z(R),O,U,V,tt);throw O=String(R),Error("Objects are not valid as a React child (found: "+(O==="[object Object]"?"object with keys {"+Object.keys(R).join(", ")+"}":O)+"). If you meant to render a collection of children, use an array instead.")}return J}function F(R,O,U){if(R==null)return R;var V=[],tt=0;return q(R,V,"","",function(at){return O.call(U,at,tt++)}),V}function j(R){if(R._status===-1){var O=R._result;O=O(),O.then(function(U){(R._status===0||R._status===-1)&&(R._status=1,R._result=U)},function(U){(R._status===0||R._status===-1)&&(R._status=2,R._result=U)}),R._status===-1&&(R._status=0,R._result=O)}if(R._status===1)return R._result.default;throw R._result}var lt=typeof reportError=="function"?reportError:function(R){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var O=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof R=="object"&&R!==null&&typeof R.message=="string"?String(R.message):String(R),error:R});if(!window.dispatchEvent(O))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",R);return}console.error(R)};function ut(){}return rt.Children={map:F,forEach:function(R,O,U){F(R,function(){O.apply(this,arguments)},U)},count:function(R){var O=0;return F(R,function(){O++}),O},toArray:function(R){return F(R,function(O){return O})||[]},only:function(R){if(!D(R))throw Error("React.Children.only expected to receive a single React element child.");return R}},rt.Component=v,rt.Fragment=e,rt.Profiler=n,rt.PureComponent=_,rt.StrictMode=s,rt.Suspense=c,rt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=E,rt.__COMPILER_RUNTIME={__proto__:null,c:function(R){return E.H.useMemoCache(R)}},rt.cache=function(R){return function(){return R.apply(null,arguments)}},rt.cloneElement=function(R,O,U){if(R==null)throw Error("The argument must be a React element, but you passed "+R+".");var V=y({},R.props),tt=R.key,at=void 0;if(O!=null)for(J in O.ref!==void 0&&(at=void 0),O.key!==void 0&&(tt=""+O.key),O)!T.call(O,J)||J==="key"||J==="__self"||J==="__source"||J==="ref"&&O.ref===void 0||(V[J]=O[J]);var J=arguments.length-2;if(J===1)V.children=U;else if(1<J){for(var ct=Array(J),yt=0;yt<J;yt++)ct[yt]=arguments[yt+2];V.children=ct}return P(R.type,tt,void 0,void 0,at,V)},rt.createContext=function(R){return R={$$typeof:o,_currentValue:R,_currentValue2:R,_threadCount:0,Provider:null,Consumer:null},R.Provider=R,R.Consumer={$$typeof:r,_context:R},R},rt.createElement=function(R,O,U){var V,tt={},at=null;if(O!=null)for(V in O.key!==void 0&&(at=""+O.key),O)T.call(O,V)&&V!=="key"&&V!=="__self"&&V!=="__source"&&(tt[V]=O[V]);var J=arguments.length-2;if(J===1)tt.children=U;else if(1<J){for(var ct=Array(J),yt=0;yt<J;yt++)ct[yt]=arguments[yt+2];tt.children=ct}if(R&&R.defaultProps)for(V in J=R.defaultProps,J)tt[V]===void 0&&(tt[V]=J[V]);return P(R,at,void 0,void 0,null,tt)},rt.createRef=function(){return{current:null}},rt.forwardRef=function(R){return{$$typeof:l,render:R}},rt.isValidElement=D,rt.lazy=function(R){return{$$typeof:u,_payload:{_status:-1,_result:R},_init:j}},rt.memo=function(R,O){return{$$typeof:h,type:R,compare:O===void 0?null:O}},rt.startTransition=function(R){var O=E.T,U={};E.T=U;try{var V=R(),tt=E.S;tt!==null&&tt(U,V),typeof V=="object"&&V!==null&&typeof V.then=="function"&&V.then(ut,lt)}catch(at){lt(at)}finally{E.T=O}},rt.unstable_useCacheRefresh=function(){return E.H.useCacheRefresh()},rt.use=function(R){return E.H.use(R)},rt.useActionState=function(R,O,U){return E.H.useActionState(R,O,U)},rt.useCallback=function(R,O){return E.H.useCallback(R,O)},rt.useContext=function(R){return E.H.useContext(R)},rt.useDebugValue=function(){},rt.useDeferredValue=function(R,O){return E.H.useDeferredValue(R,O)},rt.useEffect=function(R,O,U){var V=E.H;if(typeof U=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return V.useEffect(R,O)},rt.useId=function(){return E.H.useId()},rt.useImperativeHandle=function(R,O,U){return E.H.useImperativeHandle(R,O,U)},rt.useInsertionEffect=function(R,O){return E.H.useInsertionEffect(R,O)},rt.useLayoutEffect=function(R,O){return E.H.useLayoutEffect(R,O)},rt.useMemo=function(R,O){return E.H.useMemo(R,O)},rt.useOptimistic=function(R,O){return E.H.useOptimistic(R,O)},rt.useReducer=function(R,O,U){return E.H.useReducer(R,O,U)},rt.useRef=function(R){return E.H.useRef(R)},rt.useState=function(R){return E.H.useState(R)},rt.useSyncExternalStore=function(R,O,U){return E.H.useSyncExternalStore(R,O,U)},rt.useTransition=function(){return E.H.useTransition()},rt.version="19.1.0",rt}var $g;function xv(){return $g||($g=1,tf.exports=Ev()),tf.exports}var I=xv();const na=ny(I),wf=Av({__proto__:null,default:na},[I]),tc={black:"#000",white:"#fff"},Uo={300:"#e57373",400:"#ef5350",500:"#f44336",700:"#d32f2f",800:"#c62828"},Vo={50:"#f3e5f5",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",700:"#7b1fa2"},Wo={50:"#e3f2fd",200:"#90caf9",400:"#42a5f5",700:"#1976d2",800:"#1565c0"},qo={300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",700:"#0288d1",900:"#01579b"},Xo={300:"#81c784",400:"#66bb6a",500:"#4caf50",700:"#388e3c",800:"#2e7d32",900:"#1b5e20"},_l={300:"#ffb74d",400:"#ffa726",500:"#ff9800",700:"#f57c00",900:"#e65100"},_v={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"};function Oo(i,...t){const e=new URL(`https://mui.com/production-error/?code=${i}`);return t.forEach(s=>e.searchParams.append("args[]",s)),`Minified MUI error #${i}; visit ${e} for the full message.`}const Qp="$$material";function Yu(){return Yu=Object.assign?Object.assign.bind():function(i){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var s in e)({}).hasOwnProperty.call(e,s)&&(i[s]=e[s])}return i},Yu.apply(null,arguments)}function Cv(i){if(i.sheet)return i.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===i)return document.styleSheets[t]}function Tv(i){var t=document.createElement("style");return t.setAttribute("data-emotion",i.key),i.nonce!==void 0&&t.setAttribute("nonce",i.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var Pv=function(){function i(e){var s=this;this._insertTag=function(n){var r;s.tags.length===0?s.insertionPoint?r=s.insertionPoint.nextSibling:s.prepend?r=s.container.firstChild:r=s.before:r=s.tags[s.tags.length-1].nextSibling,s.container.insertBefore(n,r),s.tags.push(n)},this.isSpeedy=e.speedy===void 0?!0:e.speedy,this.tags=[],this.ctr=0,this.nonce=e.nonce,this.key=e.key,this.container=e.container,this.prepend=e.prepend,this.insertionPoint=e.insertionPoint,this.before=null}var t=i.prototype;return t.hydrate=function(s){s.forEach(this._insertTag)},t.insert=function(s){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(Tv(this));var n=this.tags[this.tags.length-1];if(this.isSpeedy){var r=Cv(n);try{r.insertRule(s,r.cssRules.length)}catch{}}else n.appendChild(document.createTextNode(s));this.ctr++},t.flush=function(){this.tags.forEach(function(s){var n;return(n=s.parentNode)==null?void 0:n.removeChild(s)}),this.tags=[],this.ctr=0},i}(),Pe="-ms-",Ku="-moz-",bt="-webkit-",iy="comm",Jp="rule",Zp="decl",Rv="@import",ry="@keyframes",kv="@layer",Iv=Math.abs,Td=String.fromCharCode,Mv=Object.assign;function Lv(i,t){return Ce(i,0)^45?(((t<<2^Ce(i,0))<<2^Ce(i,1))<<2^Ce(i,2))<<2^Ce(i,3):0}function oy(i){return i.trim()}function Dv(i,t){return(i=t.exec(i))?i[0]:i}function At(i,t,e){return i.replace(t,e)}function Sf(i,t){return i.indexOf(t)}function Ce(i,t){return i.charCodeAt(t)|0}function ec(i,t,e){return i.slice(t,e)}function Cn(i){return i.length}function tg(i){return i.length}function nu(i,t){return t.push(i),i}function Ov(i,t){return i.map(t).join("")}var Pd=1,vl=1,ay=0,ts=0,ie=0,Sl="";function Rd(i,t,e,s,n,r,o){return{value:i,root:t,parent:e,type:s,props:n,children:r,line:Pd,column:vl,length:o,return:""}}function Cl(i,t){return Mv(Rd("",null,null,"",null,null,0),i,{length:-i.length},t)}function Nv(){return ie}function Fv(){return ie=ts>0?Ce(Sl,--ts):0,vl--,ie===10&&(vl=1,Pd--),ie}function As(){return ie=ts<ay?Ce(Sl,ts++):0,vl++,ie===10&&(vl=1,Pd++),ie}function Mn(){return Ce(Sl,ts)}function pu(){return ts}function Hh(i,t){return ec(Sl,i,t)}function sc(i){switch(i){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function ly(i){return Pd=vl=1,ay=Cn(Sl=i),ts=0,[]}function cy(i){return Sl="",i}function gu(i){return oy(Hh(ts-1,Ef(i===91?i+2:i===40?i+1:i)))}function $v(i){for(;(ie=Mn())&&ie<33;)As();return sc(i)>2||sc(ie)>3?"":" "}function Bv(i,t){for(;--t&&As()&&!(ie<48||ie>102||ie>57&&ie<65||ie>70&&ie<97););return Hh(i,pu()+(t<6&&Mn()==32&&As()==32))}function Ef(i){for(;As();)switch(ie){case i:return ts;case 34:case 39:i!==34&&i!==39&&Ef(ie);break;case 40:i===41&&Ef(i);break;case 92:As();break}return ts}function jv(i,t){for(;As()&&i+ie!==57;)if(i+ie===84&&Mn()===47)break;return"/*"+Hh(t,ts-1)+"*"+Td(i===47?i:As())}function Hv(i){for(;!sc(Mn());)As();return Hh(i,ts)}function zv(i){return cy(mu("",null,null,null,[""],i=ly(i),0,[0],i))}function mu(i,t,e,s,n,r,o,l,c){for(var h=0,u=0,d=o,f=0,p=0,y=0,g=1,v=1,w=1,_=0,C="",x=n,E=r,T=s,P=C;v;)switch(y=_,_=As()){case 40:if(y!=108&&Ce(P,d-1)==58){Sf(P+=At(gu(_),"&","&\f"),"&\f")!=-1&&(w=-1);break}case 34:case 39:case 91:P+=gu(_);break;case 9:case 10:case 13:case 32:P+=$v(y);break;case 92:P+=Bv(pu()-1,7);continue;case 47:switch(Mn()){case 42:case 47:nu(Gv(jv(As(),pu()),t,e),c);break;default:P+="/"}break;case 123*g:l[h++]=Cn(P)*w;case 125*g:case 59:case 0:switch(_){case 0:case 125:v=0;case 59+u:w==-1&&(P=At(P,/\f/g,"")),p>0&&Cn(P)-d&&nu(p>32?jg(P+";",s,e,d-1):jg(At(P," ","")+";",s,e,d-2),c);break;case 59:P+=";";default:if(nu(T=Bg(P,t,e,h,u,n,l,C,x=[],E=[],d),r),_===123)if(u===0)mu(P,t,T,T,x,r,d,l,E);else switch(f===99&&Ce(P,3)===110?100:f){case 100:case 108:case 109:case 115:mu(i,T,T,s&&nu(Bg(i,T,T,0,0,n,l,C,n,x=[],d),E),n,E,d,l,s?x:E);break;default:mu(P,T,T,T,[""],E,0,l,E)}}h=u=p=0,g=w=1,C=P="",d=o;break;case 58:d=1+Cn(P),p=y;default:if(g<1){if(_==123)--g;else if(_==125&&g++==0&&Fv()==125)continue}switch(P+=Td(_),_*g){case 38:w=u>0?1:(P+="\f",-1);break;case 44:l[h++]=(Cn(P)-1)*w,w=1;break;case 64:Mn()===45&&(P+=gu(As())),f=Mn(),u=d=Cn(C=P+=Hv(pu())),_++;break;case 45:y===45&&Cn(P)==2&&(g=0)}}return r}function Bg(i,t,e,s,n,r,o,l,c,h,u){for(var d=n-1,f=n===0?r:[""],p=tg(f),y=0,g=0,v=0;y<s;++y)for(var w=0,_=ec(i,d+1,d=Iv(g=o[y])),C=i;w<p;++w)(C=oy(g>0?f[w]+" "+_:At(_,/&\f/g,f[w])))&&(c[v++]=C);return Rd(i,t,e,n===0?Jp:l,c,h,u)}function Gv(i,t,e){return Rd(i,t,e,iy,Td(Nv()),ec(i,2,-2),0)}function jg(i,t,e,s){return Rd(i,t,e,Zp,ec(i,0,s),ec(i,s+1,-1),s)}function aa(i,t){for(var e="",s=tg(i),n=0;n<s;n++)e+=t(i[n],n,i,t)||"";return e}function Uv(i,t,e,s){switch(i.type){case kv:if(i.children.length)break;case Rv:case Zp:return i.return=i.return||i.value;case iy:return"";case ry:return i.return=i.value+"{"+aa(i.children,s)+"}";case Jp:i.value=i.props.join(",")}return Cn(e=aa(i.children,s))?i.return=i.value+"{"+e+"}":""}function Vv(i){var t=tg(i);return function(e,s,n,r){for(var o="",l=0;l<t;l++)o+=i[l](e,s,n,r)||"";return o}}function Wv(i){return function(t){t.root||(t=t.return)&&i(t)}}function hy(i){var t=Object.create(null);return function(e){return t[e]===void 0&&(t[e]=i(e)),t[e]}}var qv=function(t,e,s){for(var n=0,r=0;n=r,r=Mn(),n===38&&r===12&&(e[s]=1),!sc(r);)As();return Hh(t,ts)},Xv=function(t,e){var s=-1,n=44;do switch(sc(n)){case 0:n===38&&Mn()===12&&(e[s]=1),t[s]+=qv(ts-1,e,s);break;case 2:t[s]+=gu(n);break;case 4:if(n===44){t[++s]=Mn()===58?"&\f":"",e[s]=t[s].length;break}default:t[s]+=Td(n)}while(n=As());return t},Yv=function(t,e){return cy(Xv(ly(t),e))},Hg=new WeakMap,Kv=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var e=t.value,s=t.parent,n=t.column===s.column&&t.line===s.line;s.type!=="rule";)if(s=s.parent,!s)return;if(!(t.props.length===1&&e.charCodeAt(0)!==58&&!Hg.get(s))&&!n){Hg.set(t,!0);for(var r=[],o=Yv(e,r),l=s.props,c=0,h=0;c<o.length;c++)for(var u=0;u<l.length;u++,h++)t.props[h]=r[c]?o[c].replace(/&\f/g,l[u]):l[u]+" "+o[c]}}},Qv=function(t){if(t.type==="decl"){var e=t.value;e.charCodeAt(0)===108&&e.charCodeAt(2)===98&&(t.return="",t.value="")}};function uy(i,t){switch(Lv(i,t)){case 5103:return bt+"print-"+i+i;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return bt+i+i;case 5349:case 4246:case 4810:case 6968:case 2756:return bt+i+Ku+i+Pe+i+i;case 6828:case 4268:return bt+i+Pe+i+i;case 6165:return bt+i+Pe+"flex-"+i+i;case 5187:return bt+i+At(i,/(\w+).+(:[^]+)/,bt+"box-$1$2"+Pe+"flex-$1$2")+i;case 5443:return bt+i+Pe+"flex-item-"+At(i,/flex-|-self/,"")+i;case 4675:return bt+i+Pe+"flex-line-pack"+At(i,/align-content|flex-|-self/,"")+i;case 5548:return bt+i+Pe+At(i,"shrink","negative")+i;case 5292:return bt+i+Pe+At(i,"basis","preferred-size")+i;case 6060:return bt+"box-"+At(i,"-grow","")+bt+i+Pe+At(i,"grow","positive")+i;case 4554:return bt+At(i,/([^-])(transform)/g,"$1"+bt+"$2")+i;case 6187:return At(At(At(i,/(zoom-|grab)/,bt+"$1"),/(image-set)/,bt+"$1"),i,"")+i;case 5495:case 3959:return At(i,/(image-set\([^]*)/,bt+"$1$`$1");case 4968:return At(At(i,/(.+:)(flex-)?(.*)/,bt+"box-pack:$3"+Pe+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+bt+i+i;case 4095:case 3583:case 4068:case 2532:return At(i,/(.+)-inline(.+)/,bt+"$1$2")+i;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Cn(i)-1-t>6)switch(Ce(i,t+1)){case 109:if(Ce(i,t+4)!==45)break;case 102:return At(i,/(.+:)(.+)-([^]+)/,"$1"+bt+"$2-$3$1"+Ku+(Ce(i,t+3)==108?"$3":"$2-$3"))+i;case 115:return~Sf(i,"stretch")?uy(At(i,"stretch","fill-available"),t)+i:i}break;case 4949:if(Ce(i,t+1)!==115)break;case 6444:switch(Ce(i,Cn(i)-3-(~Sf(i,"!important")&&10))){case 107:return At(i,":",":"+bt)+i;case 101:return At(i,/(.+:)([^;!]+)(;|!.+)?/,"$1"+bt+(Ce(i,14)===45?"inline-":"")+"box$3$1"+bt+"$2$3$1"+Pe+"$2box$3")+i}break;case 5936:switch(Ce(i,t+11)){case 114:return bt+i+Pe+At(i,/[svh]\w+-[tblr]{2}/,"tb")+i;case 108:return bt+i+Pe+At(i,/[svh]\w+-[tblr]{2}/,"tb-rl")+i;case 45:return bt+i+Pe+At(i,/[svh]\w+-[tblr]{2}/,"lr")+i}return bt+i+Pe+i+i}return i}var Jv=function(t,e,s,n){if(t.length>-1&&!t.return)switch(t.type){case Zp:t.return=uy(t.value,t.length);break;case ry:return aa([Cl(t,{value:At(t.value,"@","@"+bt)})],n);case Jp:if(t.length)return Ov(t.props,function(r){switch(Dv(r,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return aa([Cl(t,{props:[At(r,/:(read-\w+)/,":"+Ku+"$1")]})],n);case"::placeholder":return aa([Cl(t,{props:[At(r,/:(plac\w+)/,":"+bt+"input-$1")]}),Cl(t,{props:[At(r,/:(plac\w+)/,":"+Ku+"$1")]}),Cl(t,{props:[At(r,/:(plac\w+)/,Pe+"input-$1")]})],n)}return""})}},Zv=[Jv],tA=function(t){var e=t.key;if(e==="css"){var s=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(s,function(g){var v=g.getAttribute("data-emotion");v.indexOf(" ")!==-1&&(document.head.appendChild(g),g.setAttribute("data-s",""))})}var n=t.stylisPlugins||Zv,r={},o,l=[];o=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+e+' "]'),function(g){for(var v=g.getAttribute("data-emotion").split(" "),w=1;w<v.length;w++)r[v[w]]=!0;l.push(g)});var c,h=[Kv,Qv];{var u,d=[Uv,Wv(function(g){u.insert(g)})],f=Vv(h.concat(n,d)),p=function(v){return aa(zv(v),f)};c=function(v,w,_,C){u=_,p(v?v+"{"+w.styles+"}":w.styles),C&&(y.inserted[w.name]=!0)}}var y={key:e,sheet:new Pv({key:e,container:o,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:r,registered:{},insert:c};return y.sheet.hydrate(l),y},ef={exports:{}},St={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zg;function eA(){if(zg)return St;zg=1;var i=typeof Symbol=="function"&&Symbol.for,t=i?Symbol.for("react.element"):60103,e=i?Symbol.for("react.portal"):60106,s=i?Symbol.for("react.fragment"):60107,n=i?Symbol.for("react.strict_mode"):60108,r=i?Symbol.for("react.profiler"):60114,o=i?Symbol.for("react.provider"):60109,l=i?Symbol.for("react.context"):60110,c=i?Symbol.for("react.async_mode"):60111,h=i?Symbol.for("react.concurrent_mode"):60111,u=i?Symbol.for("react.forward_ref"):60112,d=i?Symbol.for("react.suspense"):60113,f=i?Symbol.for("react.suspense_list"):60120,p=i?Symbol.for("react.memo"):60115,y=i?Symbol.for("react.lazy"):60116,g=i?Symbol.for("react.block"):60121,v=i?Symbol.for("react.fundamental"):60117,w=i?Symbol.for("react.responder"):60118,_=i?Symbol.for("react.scope"):60119;function C(E){if(typeof E=="object"&&E!==null){var T=E.$$typeof;switch(T){case t:switch(E=E.type,E){case c:case h:case s:case r:case n:case d:return E;default:switch(E=E&&E.$$typeof,E){case l:case u:case y:case p:case o:return E;default:return T}}case e:return T}}}function x(E){return C(E)===h}return St.AsyncMode=c,St.ConcurrentMode=h,St.ContextConsumer=l,St.ContextProvider=o,St.Element=t,St.ForwardRef=u,St.Fragment=s,St.Lazy=y,St.Memo=p,St.Portal=e,St.Profiler=r,St.StrictMode=n,St.Suspense=d,St.isAsyncMode=function(E){return x(E)||C(E)===c},St.isConcurrentMode=x,St.isContextConsumer=function(E){return C(E)===l},St.isContextProvider=function(E){return C(E)===o},St.isElement=function(E){return typeof E=="object"&&E!==null&&E.$$typeof===t},St.isForwardRef=function(E){return C(E)===u},St.isFragment=function(E){return C(E)===s},St.isLazy=function(E){return C(E)===y},St.isMemo=function(E){return C(E)===p},St.isPortal=function(E){return C(E)===e},St.isProfiler=function(E){return C(E)===r},St.isStrictMode=function(E){return C(E)===n},St.isSuspense=function(E){return C(E)===d},St.isValidElementType=function(E){return typeof E=="string"||typeof E=="function"||E===s||E===h||E===r||E===n||E===d||E===f||typeof E=="object"&&E!==null&&(E.$$typeof===y||E.$$typeof===p||E.$$typeof===o||E.$$typeof===l||E.$$typeof===u||E.$$typeof===v||E.$$typeof===w||E.$$typeof===_||E.$$typeof===g)},St.typeOf=C,St}var Gg;function sA(){return Gg||(Gg=1,ef.exports=eA()),ef.exports}var sf,Ug;function nA(){if(Ug)return sf;Ug=1;var i=sA(),t={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},e={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},s={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},n={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},r={};r[i.ForwardRef]=s,r[i.Memo]=n;function o(y){return i.isMemo(y)?n:r[y.$$typeof]||t}var l=Object.defineProperty,c=Object.getOwnPropertyNames,h=Object.getOwnPropertySymbols,u=Object.getOwnPropertyDescriptor,d=Object.getPrototypeOf,f=Object.prototype;function p(y,g,v){if(typeof g!="string"){if(f){var w=d(g);w&&w!==f&&p(y,w,v)}var _=c(g);h&&(_=_.concat(h(g)));for(var C=o(y),x=o(g),E=0;E<_.length;++E){var T=_[E];if(!e[T]&&!(v&&v[T])&&!(x&&x[T])&&!(C&&C[T])){var P=u(g,T);try{l(y,T,P)}catch{}}}}return y}return sf=p,sf}nA();var iA=!0;function dy(i,t,e){var s="";return e.split(" ").forEach(function(n){i[n]!==void 0?t.push(i[n]+";"):n&&(s+=n+" ")}),s}var eg=function(t,e,s){var n=t.key+"-"+e.name;(s===!1||iA===!1)&&t.registered[n]===void 0&&(t.registered[n]=e.styles)},fy=function(t,e,s){eg(t,e,s);var n=t.key+"-"+e.name;if(t.inserted[e.name]===void 0){var r=e;do t.insert(e===r?"."+n:"",r,t.sheet,!0),r=r.next;while(r!==void 0)}};function rA(i){for(var t=0,e,s=0,n=i.length;n>=4;++s,n-=4)e=i.charCodeAt(s)&255|(i.charCodeAt(++s)&255)<<8|(i.charCodeAt(++s)&255)<<16|(i.charCodeAt(++s)&255)<<24,e=(e&65535)*1540483477+((e>>>16)*59797<<16),e^=e>>>24,t=(e&65535)*1540483477+((e>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(n){case 3:t^=(i.charCodeAt(s+2)&255)<<16;case 2:t^=(i.charCodeAt(s+1)&255)<<8;case 1:t^=i.charCodeAt(s)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var oA={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},aA=/[A-Z]|^ms/g,lA=/_EMO_([^_]+?)_([^]*?)_EMO_/g,py=function(t){return t.charCodeAt(1)===45},Vg=function(t){return t!=null&&typeof t!="boolean"},nf=hy(function(i){return py(i)?i:i.replace(aA,"-$&").toLowerCase()}),Wg=function(t,e){switch(t){case"animation":case"animationName":if(typeof e=="string")return e.replace(lA,function(s,n,r){return Tn={name:n,styles:r,next:Tn},n})}return oA[t]!==1&&!py(t)&&typeof e=="number"&&e!==0?e+"px":e};function nc(i,t,e){if(e==null)return"";var s=e;if(s.__emotion_styles!==void 0)return s;switch(typeof e){case"boolean":return"";case"object":{var n=e;if(n.anim===1)return Tn={name:n.name,styles:n.styles,next:Tn},n.name;var r=e;if(r.styles!==void 0){var o=r.next;if(o!==void 0)for(;o!==void 0;)Tn={name:o.name,styles:o.styles,next:Tn},o=o.next;var l=r.styles+";";return l}return cA(i,t,e)}case"function":{if(i!==void 0){var c=Tn,h=e(i);return Tn=c,nc(i,t,h)}break}}var u=e;if(t==null)return u;var d=t[u];return d!==void 0?d:u}function cA(i,t,e){var s="";if(Array.isArray(e))for(var n=0;n<e.length;n++)s+=nc(i,t,e[n])+";";else for(var r in e){var o=e[r];if(typeof o!="object"){var l=o;t!=null&&t[l]!==void 0?s+=r+"{"+t[l]+"}":Vg(l)&&(s+=nf(r)+":"+Wg(r,l)+";")}else if(Array.isArray(o)&&typeof o[0]=="string"&&(t==null||t[o[0]]===void 0))for(var c=0;c<o.length;c++)Vg(o[c])&&(s+=nf(r)+":"+Wg(r,o[c])+";");else{var h=nc(i,t,o);switch(r){case"animation":case"animationName":{s+=nf(r)+":"+h+";";break}default:s+=r+"{"+h+"}"}}}return s}var qg=/label:\s*([^\s;{]+)\s*(;|$)/g,Tn;function kd(i,t,e){if(i.length===1&&typeof i[0]=="object"&&i[0]!==null&&i[0].styles!==void 0)return i[0];var s=!0,n="";Tn=void 0;var r=i[0];if(r==null||r.raw===void 0)s=!1,n+=nc(e,t,r);else{var o=r;n+=o[0]}for(var l=1;l<i.length;l++)if(n+=nc(e,t,i[l]),s){var c=r;n+=c[l]}qg.lastIndex=0;for(var h="",u;(u=qg.exec(n))!==null;)h+="-"+u[1];var d=rA(n)+h;return{name:d,styles:n,next:Tn}}var hA=function(t){return t()},uA=wf.useInsertionEffect?wf.useInsertionEffect:!1,gy=uA||hA,my=I.createContext(typeof HTMLElement<"u"?tA({key:"css"}):null);my.Provider;var yy=function(t){return I.forwardRef(function(e,s){var n=I.useContext(my);return t(e,n,s)})},sg=I.createContext({}),ng={}.hasOwnProperty,xf="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",dA=function(t,e){var s={};for(var n in e)ng.call(e,n)&&(s[n]=e[n]);return s[xf]=t,s},fA=function(t){var e=t.cache,s=t.serialized,n=t.isStringTag;return eg(e,s,n),gy(function(){return fy(e,s,n)}),null},pA=yy(function(i,t,e){var s=i.css;typeof s=="string"&&t.registered[s]!==void 0&&(s=t.registered[s]);var n=i[xf],r=[s],o="";typeof i.className=="string"?o=dy(t.registered,r,i.className):i.className!=null&&(o=i.className+" ");var l=kd(r,void 0,I.useContext(sg));o+=t.key+"-"+l.name;var c={};for(var h in i)ng.call(i,h)&&h!=="css"&&h!==xf&&(c[h]=i[h]);return c.className=o,e&&(c.ref=e),I.createElement(I.Fragment,null,I.createElement(fA,{cache:t,serialized:l,isStringTag:typeof n=="string"}),I.createElement(n,c))}),gA=pA,Xg=function(t,e){var s=arguments;if(e==null||!ng.call(e,"css"))return I.createElement.apply(void 0,s);var n=s.length,r=new Array(n);r[0]=gA,r[1]=dA(t,e);for(var o=2;o<n;o++)r[o]=s[o];return I.createElement.apply(null,r)};(function(i){var t;t||(t=i.JSX||(i.JSX={}))})(Xg||(Xg={}));function ig(){for(var i=arguments.length,t=new Array(i),e=0;e<i;e++)t[e]=arguments[e];return kd(t)}function zh(){var i=ig.apply(void 0,arguments),t="animation-"+i.name;return{name:t,styles:"@keyframes "+t+"{"+i.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}var mA=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,yA=hy(function(i){return mA.test(i)||i.charCodeAt(0)===111&&i.charCodeAt(1)===110&&i.charCodeAt(2)<91}),bA=yA,vA=function(t){return t!=="theme"},Yg=function(t){return typeof t=="string"&&t.charCodeAt(0)>96?bA:vA},Kg=function(t,e,s){var n;if(e){var r=e.shouldForwardProp;n=t.__emotion_forwardProp&&r?function(o){return t.__emotion_forwardProp(o)&&r(o)}:r}return typeof n!="function"&&s&&(n=t.__emotion_forwardProp),n},AA=function(t){var e=t.cache,s=t.serialized,n=t.isStringTag;return eg(e,s,n),gy(function(){return fy(e,s,n)}),null},wA=function i(t,e){var s=t.__emotion_real===t,n=s&&t.__emotion_base||t,r,o;e!==void 0&&(r=e.label,o=e.target);var l=Kg(t,e,s),c=l||Yg(n),h=!c("as");return function(){var u=arguments,d=s&&t.__emotion_styles!==void 0?t.__emotion_styles.slice(0):[];if(r!==void 0&&d.push("label:"+r+";"),u[0]==null||u[0].raw===void 0)d.push.apply(d,u);else{var f=u[0];d.push(f[0]);for(var p=u.length,y=1;y<p;y++)d.push(u[y],f[y])}var g=yy(function(v,w,_){var C=h&&v.as||n,x="",E=[],T=v;if(v.theme==null){T={};for(var P in v)T[P]=v[P];T.theme=I.useContext(sg)}typeof v.className=="string"?x=dy(w.registered,E,v.className):v.className!=null&&(x=v.className+" ");var M=kd(d.concat(E),w.registered,T);x+=w.key+"-"+M.name,o!==void 0&&(x+=" "+o);var D=h&&l===void 0?Yg(C):c,S={};for(var k in v)h&&k==="as"||D(k)&&(S[k]=v[k]);return S.className=x,_&&(S.ref=_),I.createElement(I.Fragment,null,I.createElement(AA,{cache:w,serialized:M,isStringTag:typeof C=="string"}),I.createElement(C,S))});return g.displayName=r!==void 0?r:"Styled("+(typeof n=="string"?n:n.displayName||n.name||"Component")+")",g.defaultProps=t.defaultProps,g.__emotion_real=g,g.__emotion_base=n,g.__emotion_styles=d,g.__emotion_forwardProp=l,Object.defineProperty(g,"toString",{value:function(){return"."+o}}),g.withComponent=function(v,w){var _=i(v,Yu({},e,w,{shouldForwardProp:Kg(g,w,!0)}));return _.apply(void 0,d)},g}},SA=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],_f=wA.bind(null);SA.forEach(function(i){_f[i]=_f(i)});function by(i,t){return _f(i,t)}function EA(i,t){Array.isArray(i.__emotion_styles)&&(i.__emotion_styles=t(i.__emotion_styles))}const Qg=[];function Jg(i){return Qg[0]=i,kd(Qg)}var rf={exports:{}},_t={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zg;function xA(){if(Zg)return _t;Zg=1;var i=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),n=Symbol.for("react.profiler"),r=Symbol.for("react.consumer"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),h=Symbol.for("react.suspense_list"),u=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.for("react.view_transition"),p=Symbol.for("react.client.reference");function y(g){if(typeof g=="object"&&g!==null){var v=g.$$typeof;switch(v){case i:switch(g=g.type,g){case e:case n:case s:case c:case h:case f:return g;default:switch(g=g&&g.$$typeof,g){case o:case l:case d:case u:return g;case r:return g;default:return v}}case t:return v}}}return _t.ContextConsumer=r,_t.ContextProvider=o,_t.Element=i,_t.ForwardRef=l,_t.Fragment=e,_t.Lazy=d,_t.Memo=u,_t.Portal=t,_t.Profiler=n,_t.StrictMode=s,_t.Suspense=c,_t.SuspenseList=h,_t.isContextConsumer=function(g){return y(g)===r},_t.isContextProvider=function(g){return y(g)===o},_t.isElement=function(g){return typeof g=="object"&&g!==null&&g.$$typeof===i},_t.isForwardRef=function(g){return y(g)===l},_t.isFragment=function(g){return y(g)===e},_t.isLazy=function(g){return y(g)===d},_t.isMemo=function(g){return y(g)===u},_t.isPortal=function(g){return y(g)===t},_t.isProfiler=function(g){return y(g)===n},_t.isStrictMode=function(g){return y(g)===s},_t.isSuspense=function(g){return y(g)===c},_t.isSuspenseList=function(g){return y(g)===h},_t.isValidElementType=function(g){return typeof g=="string"||typeof g=="function"||g===e||g===n||g===s||g===c||g===h||typeof g=="object"&&g!==null&&(g.$$typeof===d||g.$$typeof===u||g.$$typeof===o||g.$$typeof===r||g.$$typeof===l||g.$$typeof===p||g.getModuleId!==void 0)},_t.typeOf=y,_t}var tm;function _A(){return tm||(tm=1,rf.exports=xA()),rf.exports}var vy=_A();function Pn(i){if(typeof i!="object"||i===null)return!1;const t=Object.getPrototypeOf(i);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in i)&&!(Symbol.iterator in i)}function Ay(i){if(I.isValidElement(i)||vy.isValidElementType(i)||!Pn(i))return i;const t={};return Object.keys(i).forEach(e=>{t[e]=Ay(i[e])}),t}function Ve(i,t,e={clone:!0}){const s=e.clone?{...i}:i;return Pn(i)&&Pn(t)&&Object.keys(t).forEach(n=>{I.isValidElement(t[n])||vy.isValidElementType(t[n])?s[n]=t[n]:Pn(t[n])&&Object.prototype.hasOwnProperty.call(i,n)&&Pn(i[n])?s[n]=Ve(i[n],t[n],e):e.clone?s[n]=Pn(t[n])?Ay(t[n]):t[n]:s[n]=t[n]}),s}const CA=i=>{const t=Object.keys(i).map(e=>({key:e,val:i[e]}))||[];return t.sort((e,s)=>e.val-s.val),t.reduce((e,s)=>({...e,[s.key]:s.val}),{})};function TA(i){const{values:t={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:e="px",step:s=5,...n}=i,r=CA(t),o=Object.keys(r);function l(f){return`@media (min-width:${typeof t[f]=="number"?t[f]:f}${e})`}function c(f){return`@media (max-width:${(typeof t[f]=="number"?t[f]:f)-s/100}${e})`}function h(f,p){const y=o.indexOf(p);return`@media (min-width:${typeof t[f]=="number"?t[f]:f}${e}) and (max-width:${(y!==-1&&typeof t[o[y]]=="number"?t[o[y]]:p)-s/100}${e})`}function u(f){return o.indexOf(f)+1<o.length?h(f,o[o.indexOf(f)+1]):l(f)}function d(f){const p=o.indexOf(f);return p===0?l(o[1]):p===o.length-1?c(o[p]):h(f,o[o.indexOf(f)+1]).replace("@media","@media not all and")}return{keys:o,values:r,up:l,down:c,between:h,only:u,not:d,unit:e,...n}}function PA(i,t){if(!i.containerQueries)return t;const e=Object.keys(t).filter(s=>s.startsWith("@container")).sort((s,n)=>{var o,l;const r=/min-width:\s*([0-9.]+)/;return+(((o=s.match(r))==null?void 0:o[1])||0)-+(((l=n.match(r))==null?void 0:l[1])||0)});return e.length?e.reduce((s,n)=>{const r=t[n];return delete s[n],s[n]=r,s},{...t}):t}function RA(i,t){return t==="@"||t.startsWith("@")&&(i.some(e=>t.startsWith(`@${e}`))||!!t.match(/^@\d/))}function kA(i,t){const e=t.match(/^@([^/]+)?\/?(.+)?$/);if(!e)return null;const[,s,n]=e,r=Number.isNaN(+s)?s||0:+s;return i.containerQueries(n).up(r)}function IA(i){const t=(r,o)=>r.replace("@media",o?`@container ${o}`:"@container");function e(r,o){r.up=(...l)=>t(i.breakpoints.up(...l),o),r.down=(...l)=>t(i.breakpoints.down(...l),o),r.between=(...l)=>t(i.breakpoints.between(...l),o),r.only=(...l)=>t(i.breakpoints.only(...l),o),r.not=(...l)=>{const c=t(i.breakpoints.not(...l),o);return c.includes("not all and")?c.replace("not all and ","").replace("min-width:","width<").replace("max-width:","width>").replace("and","or"):c}}const s={},n=r=>(e(s,r),s);return e(n),{...i,containerQueries:n}}const MA={borderRadius:4};function Jl(i,t){return t?Ve(i,t,{clone:!1}):i}const Id={xs:0,sm:600,md:900,lg:1200,xl:1536},em={keys:["xs","sm","md","lg","xl"],up:i=>`@media (min-width:${Id[i]}px)`},LA={containerQueries:i=>({up:t=>{let e=typeof t=="number"?t:Id[t]||t;return typeof e=="number"&&(e=`${e}px`),i?`@container ${i} (min-width:${e})`:`@container (min-width:${e})`}})};function sn(i,t,e){const s=i.theme||{};if(Array.isArray(t)){const r=s.breakpoints||em;return t.reduce((o,l,c)=>(o[r.up(r.keys[c])]=e(t[c]),o),{})}if(typeof t=="object"){const r=s.breakpoints||em;return Object.keys(t).reduce((o,l)=>{if(RA(r.keys,l)){const c=kA(s.containerQueries?s:LA,l);c&&(o[c]=e(t[l],l))}else if(Object.keys(r.values||Id).includes(l)){const c=r.up(l);o[c]=e(t[l],l)}else{const c=l;o[c]=t[c]}return o},{})}return e(t)}function wy(i={}){var e;return((e=i.keys)==null?void 0:e.reduce((s,n)=>{const r=i.up(n);return s[r]={},s},{}))||{}}function Sy(i,t){return i.reduce((e,s)=>{const n=e[s];return(!n||Object.keys(n).length===0)&&delete e[s],e},t)}function DA(i,...t){const e=wy(i),s=[e,...t].reduce((n,r)=>Ve(n,r),{});return Sy(Object.keys(e),s)}function OA(i,t){if(typeof i!="object")return{};const e={},s=Object.keys(t);return Array.isArray(i)?s.forEach((n,r)=>{r<i.length&&(e[n]=!0)}):s.forEach(n=>{i[n]!=null&&(e[n]=!0)}),e}function of({values:i,breakpoints:t,base:e}){const s=e||OA(i,t),n=Object.keys(s);if(n.length===0)return i;let r;return n.reduce((o,l,c)=>(Array.isArray(i)?(o[l]=i[c]!=null?i[c]:i[r],r=c):typeof i=="object"?(o[l]=i[l]!=null?i[l]:i[r],r=l):o[l]=i,o),{})}function pt(i){if(typeof i!="string")throw new Error(Oo(7));return i.charAt(0).toUpperCase()+i.slice(1)}function Md(i,t,e=!0){if(!t||typeof t!="string")return null;if(i&&i.vars&&e){const s=`vars.${t}`.split(".").reduce((n,r)=>n&&n[r]?n[r]:null,i);if(s!=null)return s}return t.split(".").reduce((s,n)=>s&&s[n]!=null?s[n]:null,i)}function Qu(i,t,e,s=e){let n;return typeof i=="function"?n=i(e):Array.isArray(i)?n=i[e]||s:n=Md(i,e)||s,t&&(n=t(n,s,i)),n}function te(i){const{prop:t,cssProperty:e=i.prop,themeKey:s,transform:n}=i,r=o=>{if(o[t]==null)return null;const l=o[t],c=o.theme,h=Md(c,s)||{};return sn(o,l,d=>{let f=Qu(h,n,d);return d===f&&typeof d=="string"&&(f=Qu(h,n,`${t}${d==="default"?"":pt(d)}`,d)),e===!1?f:{[e]:f}})};return r.propTypes={},r.filterProps=[t],r}function NA(i){const t={};return e=>(t[e]===void 0&&(t[e]=i(e)),t[e])}const FA={m:"margin",p:"padding"},$A={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},sm={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},BA=NA(i=>{if(i.length>2)if(sm[i])i=sm[i];else return[i];const[t,e]=i.split(""),s=FA[t],n=$A[e]||"";return Array.isArray(n)?n.map(r=>s+r):[s+n]}),rg=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],og=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...rg,...og];function Gh(i,t,e,s){const n=Md(i,t,!0)??e;return typeof n=="number"||typeof n=="string"?r=>typeof r=="string"?r:typeof n=="string"?n.startsWith("var(")&&r===0?0:n.startsWith("var(")&&r===1?n:`calc(${r} * ${n})`:n*r:Array.isArray(n)?r=>{if(typeof r=="string")return r;const o=Math.abs(r),l=n[o];return r>=0?l:typeof l=="number"?-l:typeof l=="string"&&l.startsWith("var(")?`calc(-1 * ${l})`:`-${l}`}:typeof n=="function"?n:()=>{}}function Ld(i){return Gh(i,"spacing",8)}function No(i,t){return typeof t=="string"||t==null?t:i(t)}function jA(i,t){return e=>i.reduce((s,n)=>(s[n]=No(t,e),s),{})}function HA(i,t,e,s){if(!t.includes(e))return null;const n=BA(e),r=jA(n,s),o=i[e];return sn(i,o,r)}function Ey(i,t){const e=Ld(i.theme);return Object.keys(i).map(s=>HA(i,t,s,e)).reduce(Jl,{})}function Vt(i){return Ey(i,rg)}Vt.propTypes={};Vt.filterProps=rg;function Wt(i){return Ey(i,og)}Wt.propTypes={};Wt.filterProps=og;function xy(i=8,t=Ld({spacing:i})){if(i.mui)return i;const e=(...s)=>(s.length===0?[1]:s).map(r=>{const o=t(r);return typeof o=="number"?`${o}px`:o}).join(" ");return e.mui=!0,e}function Dd(...i){const t=i.reduce((s,n)=>(n.filterProps.forEach(r=>{s[r]=n}),s),{}),e=s=>Object.keys(s).reduce((n,r)=>t[r]?Jl(n,t[r](s)):n,{});return e.propTypes={},e.filterProps=i.reduce((s,n)=>s.concat(n.filterProps),[]),e}function Ls(i){return typeof i!="number"?i:`${i}px solid`}function $s(i,t){return te({prop:i,themeKey:"borders",transform:t})}const zA=$s("border",Ls),GA=$s("borderTop",Ls),UA=$s("borderRight",Ls),VA=$s("borderBottom",Ls),WA=$s("borderLeft",Ls),qA=$s("borderColor"),XA=$s("borderTopColor"),YA=$s("borderRightColor"),KA=$s("borderBottomColor"),QA=$s("borderLeftColor"),JA=$s("outline",Ls),ZA=$s("outlineColor"),Od=i=>{if(i.borderRadius!==void 0&&i.borderRadius!==null){const t=Gh(i.theme,"shape.borderRadius",4),e=s=>({borderRadius:No(t,s)});return sn(i,i.borderRadius,e)}return null};Od.propTypes={};Od.filterProps=["borderRadius"];Dd(zA,GA,UA,VA,WA,qA,XA,YA,KA,QA,Od,JA,ZA);const Nd=i=>{if(i.gap!==void 0&&i.gap!==null){const t=Gh(i.theme,"spacing",8),e=s=>({gap:No(t,s)});return sn(i,i.gap,e)}return null};Nd.propTypes={};Nd.filterProps=["gap"];const Fd=i=>{if(i.columnGap!==void 0&&i.columnGap!==null){const t=Gh(i.theme,"spacing",8),e=s=>({columnGap:No(t,s)});return sn(i,i.columnGap,e)}return null};Fd.propTypes={};Fd.filterProps=["columnGap"];const $d=i=>{if(i.rowGap!==void 0&&i.rowGap!==null){const t=Gh(i.theme,"spacing",8),e=s=>({rowGap:No(t,s)});return sn(i,i.rowGap,e)}return null};$d.propTypes={};$d.filterProps=["rowGap"];const tw=te({prop:"gridColumn"}),ew=te({prop:"gridRow"}),sw=te({prop:"gridAutoFlow"}),nw=te({prop:"gridAutoColumns"}),iw=te({prop:"gridAutoRows"}),rw=te({prop:"gridTemplateColumns"}),ow=te({prop:"gridTemplateRows"}),aw=te({prop:"gridTemplateAreas"}),lw=te({prop:"gridArea"});Dd(Nd,Fd,$d,tw,ew,sw,nw,iw,rw,ow,aw,lw);function la(i,t){return t==="grey"?t:i}const cw=te({prop:"color",themeKey:"palette",transform:la}),hw=te({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:la}),uw=te({prop:"backgroundColor",themeKey:"palette",transform:la});Dd(cw,hw,uw);function vs(i){return i<=1&&i!==0?`${i*100}%`:i}const dw=te({prop:"width",transform:vs}),ag=i=>{if(i.maxWidth!==void 0&&i.maxWidth!==null){const t=e=>{var n,r,o,l,c;const s=((o=(r=(n=i.theme)==null?void 0:n.breakpoints)==null?void 0:r.values)==null?void 0:o[e])||Id[e];return s?((c=(l=i.theme)==null?void 0:l.breakpoints)==null?void 0:c.unit)!=="px"?{maxWidth:`${s}${i.theme.breakpoints.unit}`}:{maxWidth:s}:{maxWidth:vs(e)}};return sn(i,i.maxWidth,t)}return null};ag.filterProps=["maxWidth"];const fw=te({prop:"minWidth",transform:vs}),pw=te({prop:"height",transform:vs}),gw=te({prop:"maxHeight",transform:vs}),mw=te({prop:"minHeight",transform:vs});te({prop:"size",cssProperty:"width",transform:vs});te({prop:"size",cssProperty:"height",transform:vs});const yw=te({prop:"boxSizing"});Dd(dw,ag,fw,pw,gw,mw,yw);const Uh={border:{themeKey:"borders",transform:Ls},borderTop:{themeKey:"borders",transform:Ls},borderRight:{themeKey:"borders",transform:Ls},borderBottom:{themeKey:"borders",transform:Ls},borderLeft:{themeKey:"borders",transform:Ls},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:Ls},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:Od},color:{themeKey:"palette",transform:la},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:la},backgroundColor:{themeKey:"palette",transform:la},p:{style:Wt},pt:{style:Wt},pr:{style:Wt},pb:{style:Wt},pl:{style:Wt},px:{style:Wt},py:{style:Wt},padding:{style:Wt},paddingTop:{style:Wt},paddingRight:{style:Wt},paddingBottom:{style:Wt},paddingLeft:{style:Wt},paddingX:{style:Wt},paddingY:{style:Wt},paddingInline:{style:Wt},paddingInlineStart:{style:Wt},paddingInlineEnd:{style:Wt},paddingBlock:{style:Wt},paddingBlockStart:{style:Wt},paddingBlockEnd:{style:Wt},m:{style:Vt},mt:{style:Vt},mr:{style:Vt},mb:{style:Vt},ml:{style:Vt},mx:{style:Vt},my:{style:Vt},margin:{style:Vt},marginTop:{style:Vt},marginRight:{style:Vt},marginBottom:{style:Vt},marginLeft:{style:Vt},marginX:{style:Vt},marginY:{style:Vt},marginInline:{style:Vt},marginInlineStart:{style:Vt},marginInlineEnd:{style:Vt},marginBlock:{style:Vt},marginBlockStart:{style:Vt},marginBlockEnd:{style:Vt},displayPrint:{cssProperty:!1,transform:i=>({"@media print":{display:i}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:Nd},rowGap:{style:$d},columnGap:{style:Fd},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:vs},maxWidth:{style:ag},minWidth:{transform:vs},height:{transform:vs},maxHeight:{transform:vs},minHeight:{transform:vs},boxSizing:{},font:{themeKey:"font"},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}};function bw(...i){const t=i.reduce((s,n)=>s.concat(Object.keys(n)),[]),e=new Set(t);return i.every(s=>e.size===Object.keys(s).length)}function vw(i,t){return typeof i=="function"?i(t):i}function Aw(){function i(e,s,n,r){const o={[e]:s,theme:n},l=r[e];if(!l)return{[e]:s};const{cssProperty:c=e,themeKey:h,transform:u,style:d}=l;if(s==null)return null;if(h==="typography"&&s==="inherit")return{[e]:s};const f=Md(n,h)||{};return d?d(o):sn(o,s,y=>{let g=Qu(f,u,y);return y===g&&typeof y=="string"&&(g=Qu(f,u,`${e}${y==="default"?"":pt(y)}`,y)),c===!1?g:{[c]:g}})}function t(e){const{sx:s,theme:n={}}=e||{};if(!s)return null;const r=n.unstable_sxConfig??Uh;function o(l){let c=l;if(typeof l=="function")c=l(n);else if(typeof l!="object")return l;if(!c)return null;const h=wy(n.breakpoints),u=Object.keys(h);let d=h;return Object.keys(c).forEach(f=>{const p=vw(c[f],n);if(p!=null)if(typeof p=="object")if(r[f])d=Jl(d,i(f,p,n,r));else{const y=sn({theme:n},p,g=>({[f]:g}));bw(y,p)?d[f]=t({sx:p,theme:n}):d=Jl(d,y)}else d=Jl(d,i(f,p,n,r))}),PA(n,Sy(u,d))}return Array.isArray(s)?s.map(o):o(s)}return t}const Fo=Aw();Fo.filterProps=["sx"];function ww(i,t){var s;const e=this;if(e.vars){if(!((s=e.colorSchemes)!=null&&s[i])||typeof e.getColorSchemeSelector!="function")return{};let n=e.getColorSchemeSelector(i);return n==="&"?t:((n.includes("data-")||n.includes("."))&&(n=`*:where(${n.replace(/\s*&$/,"")}) &`),{[n]:t})}return e.palette.mode===i?t:{}}function Bd(i={},...t){const{breakpoints:e={},palette:s={},spacing:n,shape:r={},...o}=i,l=TA(e),c=xy(n);let h=Ve({breakpoints:l,direction:"ltr",components:{},palette:{mode:"light",...s},spacing:c,shape:{...MA,...r}},o);return h=IA(h),h.applyStyles=ww,h=t.reduce((u,d)=>Ve(u,d),h),h.unstable_sxConfig={...Uh,...o==null?void 0:o.unstable_sxConfig},h.unstable_sx=function(d){return Fo({sx:d,theme:this})},h}function Sw(i){return Object.keys(i).length===0}function Ew(i=null){const t=I.useContext(sg);return!t||Sw(t)?i:t}const xw=Bd();function lg(i=xw){return Ew(i)}const _w=i=>{var s;const t={systemProps:{},otherProps:{}},e=((s=i==null?void 0:i.theme)==null?void 0:s.unstable_sxConfig)??Uh;return Object.keys(i).forEach(n=>{e[n]?t.systemProps[n]=i[n]:t.otherProps[n]=i[n]}),t};function cg(i){const{sx:t,...e}=i,{systemProps:s,otherProps:n}=_w(e);let r;return Array.isArray(t)?r=[s,...t]:typeof t=="function"?r=(...o)=>{const l=t(...o);return Pn(l)?{...s,...l}:s}:r={...s,...t},{...n,sx:r}}const nm=i=>i,Cw=()=>{let i=nm;return{configure(t){i=t},generate(t){return i(t)},reset(){i=nm}}},_y=Cw();function Cy(i){var t,e,s="";if(typeof i=="string"||typeof i=="number")s+=i;else if(typeof i=="object")if(Array.isArray(i)){var n=i.length;for(t=0;t<n;t++)i[t]&&(e=Cy(i[t]))&&(s&&(s+=" "),s+=e)}else for(e in i)i[e]&&(s&&(s+=" "),s+=e);return s}function Ot(){for(var i,t,e=0,s="",n=arguments.length;e<n;e++)(i=arguments[e])&&(t=Cy(i))&&(s&&(s+=" "),s+=t);return s}function Tw(i={}){const{themeId:t,defaultTheme:e,defaultClassName:s="MuiBox-root",generateClassName:n}=i,r=by("div",{shouldForwardProp:l=>l!=="theme"&&l!=="sx"&&l!=="as"})(Fo);return I.forwardRef(function(c,h){const u=lg(e),{className:d,component:f="div",...p}=cg(c);return B.jsx(r,{as:f,ref:h,className:Ot(d,n?n(s):s),theme:t&&u[t]||u,...p})})}const Pw={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function Dn(i,t,e="Mui"){const s=Pw[t];return s?`${e}-${s}`:`${_y.generate(i)}-${t}`}function On(i,t,e="Mui"){const s={};return t.forEach(n=>{s[n]=Dn(i,n,e)}),s}function Ty(i){const{variants:t,...e}=i,s={variants:t,style:Jg(e),isProcessed:!0};return s.style===e||t&&t.forEach(n=>{typeof n.style!="function"&&(n.style=Jg(n.style))}),s}const Rw=Bd();function af(i){return i!=="ownerState"&&i!=="theme"&&i!=="sx"&&i!=="as"}function kw(i){return i?(t,e)=>e[i]:null}function Iw(i,t,e){i.theme=Lw(i.theme)?e:i.theme[t]||i.theme}function yu(i,t){const e=typeof t=="function"?t(i):t;if(Array.isArray(e))return e.flatMap(s=>yu(i,s));if(Array.isArray(e==null?void 0:e.variants)){let s;if(e.isProcessed)s=e.style;else{const{variants:n,...r}=e;s=r}return Py(i,e.variants,[s])}return e!=null&&e.isProcessed?e.style:e}function Py(i,t,e=[]){var n;let s;t:for(let r=0;r<t.length;r+=1){const o=t[r];if(typeof o.props=="function"){if(s??(s={...i,...i.ownerState,ownerState:i.ownerState}),!o.props(s))continue}else for(const l in o.props)if(i[l]!==o.props[l]&&((n=i.ownerState)==null?void 0:n[l])!==o.props[l])continue t;typeof o.style=="function"?(s??(s={...i,...i.ownerState,ownerState:i.ownerState}),e.push(o.style(s))):e.push(o.style)}return e}function Ry(i={}){const{themeId:t,defaultTheme:e=Rw,rootShouldForwardProp:s=af,slotShouldForwardProp:n=af}=i;function r(l){Iw(l,t,e)}return(l,c={})=>{EA(l,E=>E.filter(T=>T!==Fo));const{name:h,slot:u,skipVariantsResolver:d,skipSx:f,overridesResolver:p=kw(Ow(u)),...y}=c,g=d!==void 0?d:u&&u!=="Root"&&u!=="root"||!1,v=f||!1;let w=af;u==="Root"||u==="root"?w=s:u?w=n:Dw(l)&&(w=void 0);const _=by(l,{shouldForwardProp:w,label:Mw(),...y}),C=E=>{if(E.__emotion_real===E)return E;if(typeof E=="function")return function(P){return yu(P,E)};if(Pn(E)){const T=Ty(E);return T.variants?function(M){return yu(M,T)}:T.style}return E},x=(...E)=>{const T=[],P=E.map(C),M=[];if(T.push(r),h&&p&&M.push(function(N){var F,j;const z=(j=(F=N.theme.components)==null?void 0:F[h])==null?void 0:j.styleOverrides;if(!z)return null;const q={};for(const lt in z)q[lt]=yu(N,z[lt]);return p(N,q)}),h&&!g&&M.push(function(N){var q,F;const H=N.theme,z=(F=(q=H==null?void 0:H.components)==null?void 0:q[h])==null?void 0:F.variants;return z?Py(N,z):null}),v||M.push(Fo),Array.isArray(P[0])){const k=P.shift(),N=new Array(T.length).fill(""),H=new Array(M.length).fill("");let z;z=[...N,...k,...H],z.raw=[...N,...k.raw,...H],T.unshift(z)}const D=[...T,...P,...M],S=_(...D);return l.muiName&&(S.muiName=l.muiName),S};return _.withConfig&&(x.withConfig=_.withConfig),x}}function Mw(i,t){return void 0}function Lw(i){for(const t in i)return!1;return!0}function Dw(i){return typeof i=="string"&&i.charCodeAt(0)>96}function Ow(i){return i&&i.charAt(0).toLowerCase()+i.slice(1)}const Nw=Ry();function ic(i,t){const e={...t};for(const s in i)if(Object.prototype.hasOwnProperty.call(i,s)){const n=s;if(n==="components"||n==="slots")e[n]={...i[n],...e[n]};else if(n==="componentsProps"||n==="slotProps"){const r=i[n],o=t[n];if(!o)e[n]=r||{};else if(!r)e[n]=o;else{e[n]={...o};for(const l in r)if(Object.prototype.hasOwnProperty.call(r,l)){const c=l;e[n][c]=ic(r[c],o[c])}}}else e[n]===void 0&&(e[n]=i[n])}return e}function Fw(i){const{theme:t,name:e,props:s}=i;return!t||!t.components||!t.components[e]||!t.components[e].defaultProps?s:ic(t.components[e].defaultProps,s)}function $w({props:i,name:t,defaultTheme:e,themeId:s}){let n=lg(e);return s&&(n=n[s]||n),Fw({theme:n,name:t,props:i})}const Bw=typeof window<"u"?I.useLayoutEffect:I.useEffect;function jw(i,t=Number.MIN_SAFE_INTEGER,e=Number.MAX_SAFE_INTEGER){return Math.max(t,Math.min(i,e))}function hg(i,t=0,e=1){return jw(i,t,e)}function Hw(i){i=i.slice(1);const t=new RegExp(`.{1,${i.length>=6?2:1}}`,"g");let e=i.match(t);return e&&e[0].length===1&&(e=e.map(s=>s+s)),e?`rgb${e.length===4?"a":""}(${e.map((s,n)=>n<3?parseInt(s,16):Math.round(parseInt(s,16)/255*1e3)/1e3).join(", ")})`:""}function dr(i){if(i.type)return i;if(i.charAt(0)==="#")return dr(Hw(i));const t=i.indexOf("("),e=i.substring(0,t);if(!["rgb","rgba","hsl","hsla","color"].includes(e))throw new Error(Oo(9,i));let s=i.substring(t+1,i.length-1),n;if(e==="color"){if(s=s.split(" "),n=s.shift(),s.length===4&&s[3].charAt(0)==="/"&&(s[3]=s[3].slice(1)),!["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].includes(n))throw new Error(Oo(10,n))}else s=s.split(",");return s=s.map(r=>parseFloat(r)),{type:e,values:s,colorSpace:n}}const zw=i=>{const t=dr(i);return t.values.slice(0,3).map((e,s)=>t.type.includes("hsl")&&s!==0?`${e}%`:e).join(" ")},Il=(i,t)=>{try{return zw(i)}catch{return i}};function jd(i){const{type:t,colorSpace:e}=i;let{values:s}=i;return t.includes("rgb")?s=s.map((n,r)=>r<3?parseInt(n,10):n):t.includes("hsl")&&(s[1]=`${s[1]}%`,s[2]=`${s[2]}%`),t.includes("color")?s=`${e} ${s.join(" ")}`:s=`${s.join(", ")}`,`${t}(${s})`}function ky(i){i=dr(i);const{values:t}=i,e=t[0],s=t[1]/100,n=t[2]/100,r=s*Math.min(n,1-n),o=(h,u=(h+e/30)%12)=>n-r*Math.max(Math.min(u-3,9-u,1),-1);let l="rgb";const c=[Math.round(o(0)*255),Math.round(o(8)*255),Math.round(o(4)*255)];return i.type==="hsla"&&(l+="a",c.push(t[3])),jd({type:l,values:c})}function Cf(i){i=dr(i);let t=i.type==="hsl"||i.type==="hsla"?dr(ky(i)).values:i.values;return t=t.map(e=>(i.type!=="color"&&(e/=255),e<=.03928?e/12.92:((e+.055)/1.055)**2.4)),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function Gw(i,t){const e=Cf(i),s=Cf(t);return(Math.max(e,s)+.05)/(Math.min(e,s)+.05)}function Rn(i,t){return i=dr(i),t=hg(t),(i.type==="rgb"||i.type==="hsl")&&(i.type+="a"),i.type==="color"?i.values[3]=`/${t}`:i.values[3]=t,jd(i)}function iu(i,t,e){try{return Rn(i,t)}catch{return i}}function rc(i,t){if(i=dr(i),t=hg(t),i.type.includes("hsl"))i.values[2]*=1-t;else if(i.type.includes("rgb")||i.type.includes("color"))for(let e=0;e<3;e+=1)i.values[e]*=1-t;return jd(i)}function kt(i,t,e){try{return rc(i,t)}catch{return i}}function oc(i,t){if(i=dr(i),t=hg(t),i.type.includes("hsl"))i.values[2]+=(100-i.values[2])*t;else if(i.type.includes("rgb"))for(let e=0;e<3;e+=1)i.values[e]+=(255-i.values[e])*t;else if(i.type.includes("color"))for(let e=0;e<3;e+=1)i.values[e]+=(1-i.values[e])*t;return jd(i)}function It(i,t,e){try{return oc(i,t)}catch{return i}}function Uw(i,t=.15){return Cf(i)>.5?rc(i,t):oc(i,t)}function ru(i,t,e){try{return Uw(i,t)}catch{return i}}const Vw=I.createContext(void 0);function Ww(i){const{theme:t,name:e,props:s}=i;if(!t||!t.components||!t.components[e])return s;const n=t.components[e];return n.defaultProps?ic(n.defaultProps,s):!n.styleOverrides&&!n.variants?ic(n,s):s}function qw({props:i,name:t}){const e=I.useContext(Vw);return Ww({props:i,name:t,theme:{components:e}})}const im={theme:void 0};function Xw(i){let t,e;return function(n){let r=t;return(r===void 0||n.theme!==e)&&(im.theme=n.theme,r=Ty(i(im)),t=r,e=n.theme),r}}function Yw(i=""){function t(...s){if(!s.length)return"";const n=s[0];return typeof n=="string"&&!n.match(/(#|\(|\)|(-?(\d*\.)?\d+)(px|em|%|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc))|^(-?(\d*\.)?\d+)$|(\d+ \d+ \d+)/)?`, var(--${i?`${i}-`:""}${n}${t(...s.slice(1))})`:`, ${n}`}return(s,...n)=>`var(--${i?`${i}-`:""}${s}${t(...n)})`}const rm=(i,t,e,s=[])=>{let n=i;t.forEach((r,o)=>{o===t.length-1?Array.isArray(n)?n[Number(r)]=e:n&&typeof n=="object"&&(n[r]=e):n&&typeof n=="object"&&(n[r]||(n[r]=s.includes(r)?[]:{}),n=n[r])})},Kw=(i,t,e)=>{function s(n,r=[],o=[]){Object.entries(n).forEach(([l,c])=>{(!e||e&&!e([...r,l]))&&c!=null&&(typeof c=="object"&&Object.keys(c).length>0?s(c,[...r,l],Array.isArray(c)?[...o,l]:o):t([...r,l],c,o))})}s(i)},Qw=(i,t)=>typeof t=="number"?["lineHeight","fontWeight","opacity","zIndex"].some(s=>i.includes(s))||i[i.length-1].toLowerCase().includes("opacity")?t:`${t}px`:t;function lf(i,t){const{prefix:e,shouldSkipGeneratingVar:s}=t||{},n={},r={},o={};return Kw(i,(l,c,h)=>{if((typeof c=="string"||typeof c=="number")&&(!s||!s(l,c))){const u=`--${e?`${e}-`:""}${l.join("-")}`,d=Qw(l,c);Object.assign(n,{[u]:d}),rm(r,l,`var(${u})`,h),rm(o,l,`var(${u}, ${d})`,h)}},l=>l[0]==="vars"),{css:n,vars:r,varsWithDefaults:o}}function Jw(i,t={}){const{getSelector:e=v,disableCssColorScheme:s,colorSchemeSelector:n}=t,{colorSchemes:r={},components:o,defaultColorScheme:l="light",...c}=i,{vars:h,css:u,varsWithDefaults:d}=lf(c,t);let f=d;const p={},{[l]:y,...g}=r;if(Object.entries(g||{}).forEach(([C,x])=>{const{vars:E,css:T,varsWithDefaults:P}=lf(x,t);f=Ve(f,P),p[C]={css:T,vars:E}}),y){const{css:C,vars:x,varsWithDefaults:E}=lf(y,t);f=Ve(f,E),p[l]={css:C,vars:x}}function v(C,x){var T,P;let E=n;if(n==="class"&&(E=".%s"),n==="data"&&(E="[data-%s]"),n!=null&&n.startsWith("data-")&&!n.includes("%s")&&(E=`[${n}="%s"]`),C){if(E==="media")return i.defaultColorScheme===C?":root":{[`@media (prefers-color-scheme: ${((P=(T=r[C])==null?void 0:T.palette)==null?void 0:P.mode)||C})`]:{":root":x}};if(E)return i.defaultColorScheme===C?`:root, ${E.replace("%s",String(C))}`:E.replace("%s",String(C))}return":root"}return{vars:f,generateThemeVars:()=>{let C={...h};return Object.entries(p).forEach(([,{vars:x}])=>{C=Ve(C,x)}),C},generateStyleSheets:()=>{var M,D;const C=[],x=i.defaultColorScheme||"light";function E(S,k){Object.keys(k).length&&C.push(typeof S=="string"?{[S]:{...k}}:S)}E(e(void 0,{...u}),u);const{[x]:T,...P}=p;if(T){const{css:S}=T,k=(D=(M=r[x])==null?void 0:M.palette)==null?void 0:D.mode,N=!s&&k?{colorScheme:k,...S}:{...S};E(e(x,{...N}),N)}return Object.entries(P).forEach(([S,{css:k}])=>{var z,q;const N=(q=(z=r[S])==null?void 0:z.palette)==null?void 0:q.mode,H=!s&&N?{colorScheme:N,...k}:{...k};E(e(S,{...H}),H)}),C}}}function Zw(i){return function(e){return i==="media"?`@media (prefers-color-scheme: ${e})`:i?i.startsWith("data-")&&!i.includes("%s")?`[${i}="${e}"] &`:i==="class"?`.${e} &`:i==="data"?`[data-${e}] &`:`${i.replace("%s",e)} &`:"&"}}function _i(i,t,e=void 0){const s={};for(const n in i){const r=i[n];let o="",l=!0;for(let c=0;c<r.length;c+=1){const h=r[c];h&&(o+=(l===!0?"":" ")+t(h),l=!1,e&&e[h]&&(o+=" "+e[h]))}s[n]=o}return s}const tS=Bd(),eS=Nw("div",{name:"MuiStack",slot:"Root"});function sS(i){return $w({props:i,name:"MuiStack",defaultTheme:tS})}function nS(i,t){const e=I.Children.toArray(i).filter(Boolean);return e.reduce((s,n,r)=>(s.push(n),r<e.length-1&&s.push(I.cloneElement(t,{key:`separator-${r}`})),s),[])}const iS=i=>({row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"})[i],rS=({ownerState:i,theme:t})=>{let e={display:"flex",flexDirection:"column",...sn({theme:t},of({values:i.direction,breakpoints:t.breakpoints.values}),s=>({flexDirection:s}))};if(i.spacing){const s=Ld(t),n=Object.keys(t.breakpoints.values).reduce((c,h)=>((typeof i.spacing=="object"&&i.spacing[h]!=null||typeof i.direction=="object"&&i.direction[h]!=null)&&(c[h]=!0),c),{}),r=of({values:i.direction,base:n}),o=of({values:i.spacing,base:n});typeof r=="object"&&Object.keys(r).forEach((c,h,u)=>{if(!r[c]){const f=h>0?r[u[h-1]]:"column";r[c]=f}}),e=Ve(e,sn({theme:t},o,(c,h)=>i.useFlexGap?{gap:No(s,c)}:{"& > :not(style):not(style)":{margin:0},"& > :not(style) ~ :not(style)":{[`margin${iS(h?r[h]:i.direction)}`]:No(s,c)}}))}return e=DA(t.breakpoints,e),e};function oS(i={}){const{createStyledComponent:t=eS,useThemeProps:e=sS,componentName:s="MuiStack"}=i,n=()=>_i({root:["root"]},c=>Dn(s,c),{}),r=t(rS);return I.forwardRef(function(c,h){const u=e(c),d=cg(u),{component:f="div",direction:p="column",spacing:y=0,divider:g,children:v,className:w,useFlexGap:_=!1,...C}=d,x={direction:p,spacing:y,useFlexGap:_},E=n();return B.jsx(r,{as:f,ownerState:x,ref:h,className:Ot(E.root,w),...C,children:g?nS(v,g):v})})}function Iy(){return{text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:tc.white,default:tc.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}}}const aS=Iy();function My(){return{text:{primary:tc.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:tc.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}}}const om=My();function am(i,t,e,s){const n=s.light||s,r=s.dark||s*1.5;i[t]||(i.hasOwnProperty(e)?i[t]=i[e]:t==="light"?i.light=oc(i.main,n):t==="dark"&&(i.dark=rc(i.main,r)))}function lS(i="light"){return i==="dark"?{main:Wo[200],light:Wo[50],dark:Wo[400]}:{main:Wo[700],light:Wo[400],dark:Wo[800]}}function cS(i="light"){return i==="dark"?{main:Vo[200],light:Vo[50],dark:Vo[400]}:{main:Vo[500],light:Vo[300],dark:Vo[700]}}function hS(i="light"){return i==="dark"?{main:Uo[500],light:Uo[300],dark:Uo[700]}:{main:Uo[700],light:Uo[400],dark:Uo[800]}}function uS(i="light"){return i==="dark"?{main:qo[400],light:qo[300],dark:qo[700]}:{main:qo[700],light:qo[500],dark:qo[900]}}function dS(i="light"){return i==="dark"?{main:Xo[400],light:Xo[300],dark:Xo[700]}:{main:Xo[800],light:Xo[500],dark:Xo[900]}}function fS(i="light"){return i==="dark"?{main:_l[400],light:_l[300],dark:_l[700]}:{main:"#ed6c02",light:_l[500],dark:_l[900]}}function ug(i){const{mode:t="light",contrastThreshold:e=3,tonalOffset:s=.2,...n}=i,r=i.primary||lS(t),o=i.secondary||cS(t),l=i.error||hS(t),c=i.info||uS(t),h=i.success||dS(t),u=i.warning||fS(t);function d(g){return Gw(g,om.text.primary)>=e?om.text.primary:aS.text.primary}const f=({color:g,name:v,mainShade:w=500,lightShade:_=300,darkShade:C=700})=>{if(g={...g},!g.main&&g[w]&&(g.main=g[w]),!g.hasOwnProperty("main"))throw new Error(Oo(11,v?` (${v})`:"",w));if(typeof g.main!="string")throw new Error(Oo(12,v?` (${v})`:"",JSON.stringify(g.main)));return am(g,"light",_,s),am(g,"dark",C,s),g.contrastText||(g.contrastText=d(g.main)),g};let p;return t==="light"?p=Iy():t==="dark"&&(p=My()),Ve({common:{...tc},mode:t,primary:f({color:r,name:"primary"}),secondary:f({color:o,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:f({color:l,name:"error"}),warning:f({color:u,name:"warning"}),info:f({color:c,name:"info"}),success:f({color:h,name:"success"}),grey:_v,contrastThreshold:e,getContrastText:d,augmentColor:f,tonalOffset:s,...p},n)}function pS(i){const t={};return Object.entries(i).forEach(s=>{const[n,r]=s;typeof r=="object"&&(t[n]=`${r.fontStyle?`${r.fontStyle} `:""}${r.fontVariant?`${r.fontVariant} `:""}${r.fontWeight?`${r.fontWeight} `:""}${r.fontStretch?`${r.fontStretch} `:""}${r.fontSize||""}${r.lineHeight?`/${r.lineHeight} `:""}${r.fontFamily||""}`)}),t}function gS(i,t){return{toolbar:{minHeight:56,[i.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[i.up("sm")]:{minHeight:64}},...t}}function mS(i){return Math.round(i*1e5)/1e5}const lm={textTransform:"uppercase"},cm='"Roboto", "Helvetica", "Arial", sans-serif';function yS(i,t){const{fontFamily:e=cm,fontSize:s=14,fontWeightLight:n=300,fontWeightRegular:r=400,fontWeightMedium:o=500,fontWeightBold:l=700,htmlFontSize:c=16,allVariants:h,pxToRem:u,...d}=typeof t=="function"?t(i):t,f=s/14,p=u||(v=>`${v/c*f}rem`),y=(v,w,_,C,x)=>({fontFamily:e,fontWeight:v,fontSize:p(w),lineHeight:_,...e===cm?{letterSpacing:`${mS(C/w)}em`}:{},...x,...h}),g={h1:y(n,96,1.167,-1.5),h2:y(n,60,1.2,-.5),h3:y(r,48,1.167,0),h4:y(r,34,1.235,.25),h5:y(r,24,1.334,0),h6:y(o,20,1.6,.15),subtitle1:y(r,16,1.75,.15),subtitle2:y(o,14,1.57,.1),body1:y(r,16,1.5,.15),body2:y(r,14,1.43,.15),button:y(o,14,1.75,.4,lm),caption:y(r,12,1.66,.4),overline:y(r,12,2.66,1,lm),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return Ve({htmlFontSize:c,pxToRem:p,fontFamily:e,fontSize:s,fontWeightLight:n,fontWeightRegular:r,fontWeightMedium:o,fontWeightBold:l,...g},d,{clone:!1})}const bS=.2,vS=.14,AS=.12;function $t(...i){return[`${i[0]}px ${i[1]}px ${i[2]}px ${i[3]}px rgba(0,0,0,${bS})`,`${i[4]}px ${i[5]}px ${i[6]}px ${i[7]}px rgba(0,0,0,${vS})`,`${i[8]}px ${i[9]}px ${i[10]}px ${i[11]}px rgba(0,0,0,${AS})`].join(",")}const wS=["none",$t(0,2,1,-1,0,1,1,0,0,1,3,0),$t(0,3,1,-2,0,2,2,0,0,1,5,0),$t(0,3,3,-2,0,3,4,0,0,1,8,0),$t(0,2,4,-1,0,4,5,0,0,1,10,0),$t(0,3,5,-1,0,5,8,0,0,1,14,0),$t(0,3,5,-1,0,6,10,0,0,1,18,0),$t(0,4,5,-2,0,7,10,1,0,2,16,1),$t(0,5,5,-3,0,8,10,1,0,3,14,2),$t(0,5,6,-3,0,9,12,1,0,3,16,2),$t(0,6,6,-3,0,10,14,1,0,4,18,3),$t(0,6,7,-4,0,11,15,1,0,4,20,3),$t(0,7,8,-4,0,12,17,2,0,5,22,4),$t(0,7,8,-4,0,13,19,2,0,5,24,4),$t(0,7,9,-4,0,14,21,2,0,5,26,4),$t(0,8,9,-5,0,15,22,2,0,6,28,5),$t(0,8,10,-5,0,16,24,2,0,6,30,5),$t(0,8,11,-5,0,17,26,2,0,6,32,5),$t(0,9,11,-5,0,18,28,2,0,7,34,6),$t(0,9,12,-6,0,19,29,2,0,7,36,6),$t(0,10,13,-6,0,20,31,3,0,8,38,7),$t(0,10,13,-6,0,21,33,3,0,8,40,7),$t(0,10,14,-6,0,22,35,3,0,8,42,7),$t(0,11,14,-7,0,23,36,3,0,9,44,8),$t(0,11,15,-7,0,24,38,3,0,9,46,8)],SS={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},ES={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function hm(i){return`${Math.round(i)}ms`}function xS(i){if(!i)return 0;const t=i/36;return Math.min(Math.round((4+15*t**.25+t/5)*10),3e3)}function _S(i){const t={...SS,...i.easing},e={...ES,...i.duration};return{getAutoHeightDuration:xS,create:(n=["all"],r={})=>{const{duration:o=e.standard,easing:l=t.easeInOut,delay:c=0,...h}=r;return(Array.isArray(n)?n:[n]).map(u=>`${u} ${typeof o=="string"?o:hm(o)} ${l} ${typeof c=="string"?c:hm(c)}`).join(",")},...i,easing:t,duration:e}}const CS={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};function TS(i){return Pn(i)||typeof i>"u"||typeof i=="string"||typeof i=="boolean"||typeof i=="number"||Array.isArray(i)}function Ly(i={}){const t={...i};function e(s){const n=Object.entries(s);for(let r=0;r<n.length;r++){const[o,l]=n[r];!TS(l)||o.startsWith("unstable_")?delete s[o]:Pn(l)&&(s[o]={...l},e(s[o]))}}return e(t),`import { unstable_createBreakpoints as createBreakpoints, createTransitions } from '@mui/material/styles';

const theme = ${JSON.stringify(t,null,2)};

theme.breakpoints = createBreakpoints(theme.breakpoints || {});
theme.transitions = createTransitions(theme.transitions || {});

export default theme;`}function Tf(i={},...t){const{breakpoints:e,mixins:s={},spacing:n,palette:r={},transitions:o={},typography:l={},shape:c,...h}=i;if(i.vars&&i.generateThemeVars===void 0)throw new Error(Oo(20));const u=ug(r),d=Bd(i);let f=Ve(d,{mixins:gS(d.breakpoints,s),palette:u,shadows:wS.slice(),typography:yS(u,l),transitions:_S(o),zIndex:{...CS}});return f=Ve(f,h),f=t.reduce((p,y)=>Ve(p,y),f),f.unstable_sxConfig={...Uh,...h==null?void 0:h.unstable_sxConfig},f.unstable_sx=function(y){return Fo({sx:y,theme:this})},f.toRuntimeSource=Ly,f}function Pf(i){let t;return i<1?t=5.11916*i**2:t=4.5*Math.log(i+1)+2,Math.round(t*10)/1e3}const PS=[...Array(25)].map((i,t)=>{if(t===0)return"none";const e=Pf(t);return`linear-gradient(rgba(255 255 255 / ${e}), rgba(255 255 255 / ${e}))`});function Dy(i){return{inputPlaceholder:i==="dark"?.5:.42,inputUnderline:i==="dark"?.7:.42,switchTrackDisabled:i==="dark"?.2:.12,switchTrack:i==="dark"?.3:.38}}function Oy(i){return i==="dark"?PS:[]}function RS(i){const{palette:t={mode:"light"},opacity:e,overlays:s,...n}=i,r=ug(t);return{palette:r,opacity:{...Dy(r.mode),...e},overlays:s||Oy(r.mode),...n}}function kS(i){var t;return!!i[0].match(/(cssVarPrefix|colorSchemeSelector|rootSelector|typography|mixins|breakpoints|direction|transitions)/)||!!i[0].match(/sxConfig$/)||i[0]==="palette"&&!!((t=i[1])!=null&&t.match(/(mode|contrastThreshold|tonalOffset)/))}const IS=i=>[...[...Array(25)].map((t,e)=>`--${i?`${i}-`:""}overlays-${e}`),`--${i?`${i}-`:""}palette-AppBar-darkBg`,`--${i?`${i}-`:""}palette-AppBar-darkColor`],MS=i=>(t,e)=>{const s=i.rootSelector||":root",n=i.colorSchemeSelector;let r=n;if(n==="class"&&(r=".%s"),n==="data"&&(r="[data-%s]"),n!=null&&n.startsWith("data-")&&!n.includes("%s")&&(r=`[${n}="%s"]`),i.defaultColorScheme===t){if(t==="dark"){const o={};return IS(i.cssVarPrefix).forEach(l=>{o[l]=e[l],delete e[l]}),r==="media"?{[s]:e,"@media (prefers-color-scheme: dark)":{[s]:o}}:r?{[r.replace("%s",t)]:o,[`${s}, ${r.replace("%s",t)}`]:e}:{[s]:{...e,...o}}}if(r&&r!=="media")return`${s}, ${r.replace("%s",String(t))}`}else if(t){if(r==="media")return{[`@media (prefers-color-scheme: ${String(t)})`]:{[s]:e}};if(r)return r.replace("%s",String(t))}return s};function LS(i,t){t.forEach(e=>{i[e]||(i[e]={})})}function L(i,t,e){!i[t]&&e&&(i[t]=e)}function Ml(i){return typeof i!="string"||!i.startsWith("hsl")?i:ky(i)}function Fn(i,t){`${t}Channel`in i||(i[`${t}Channel`]=Il(Ml(i[t])))}function DS(i){return typeof i=="number"?`${i}px`:typeof i=="string"||typeof i=="function"||Array.isArray(i)?i:"8px"}const on=i=>{try{return i()}catch{}},OS=(i="mui")=>Yw(i);function cf(i,t,e,s){if(!t)return;t=t===!0?{}:t;const n=s==="dark"?"dark":"light";if(!e){i[s]=RS({...t,palette:{mode:n,...t==null?void 0:t.palette}});return}const{palette:r,...o}=Tf({...e,palette:{mode:n,...t==null?void 0:t.palette}});return i[s]={...t,palette:r,opacity:{...Dy(n),...t==null?void 0:t.opacity},overlays:(t==null?void 0:t.overlays)||Oy(n)},o}function NS(i={},...t){const{colorSchemes:e={light:!0},defaultColorScheme:s,disableCssColorScheme:n=!1,cssVarPrefix:r="mui",shouldSkipGeneratingVar:o=kS,colorSchemeSelector:l=e.light&&e.dark?"media":void 0,rootSelector:c=":root",...h}=i,u=Object.keys(e)[0],d=s||(e.light&&u!=="light"?"light":u),f=OS(r),{[d]:p,light:y,dark:g,...v}=e,w={...v};let _=p;if((d==="dark"&&!("dark"in e)||d==="light"&&!("light"in e))&&(_=!0),!_)throw new Error(Oo(21,d));const C=cf(w,_,h,d);y&&!w.light&&cf(w,y,void 0,"light"),g&&!w.dark&&cf(w,g,void 0,"dark");let x={defaultColorScheme:d,...C,cssVarPrefix:r,colorSchemeSelector:l,rootSelector:c,getCssVar:f,colorSchemes:w,font:{...pS(C.typography),...C.font},spacing:DS(h.spacing)};Object.keys(x.colorSchemes).forEach(D=>{const S=x.colorSchemes[D].palette,k=N=>{const H=N.split("-"),z=H[1],q=H[2];return f(N,S[z][q])};if(S.mode==="light"&&(L(S.common,"background","#fff"),L(S.common,"onBackground","#000")),S.mode==="dark"&&(L(S.common,"background","#000"),L(S.common,"onBackground","#fff")),LS(S,["Alert","AppBar","Avatar","Button","Chip","FilledInput","LinearProgress","Skeleton","Slider","SnackbarContent","SpeedDialAction","StepConnector","StepContent","Switch","TableCell","Tooltip"]),S.mode==="light"){L(S.Alert,"errorColor",kt(S.error.light,.6)),L(S.Alert,"infoColor",kt(S.info.light,.6)),L(S.Alert,"successColor",kt(S.success.light,.6)),L(S.Alert,"warningColor",kt(S.warning.light,.6)),L(S.Alert,"errorFilledBg",k("palette-error-main")),L(S.Alert,"infoFilledBg",k("palette-info-main")),L(S.Alert,"successFilledBg",k("palette-success-main")),L(S.Alert,"warningFilledBg",k("palette-warning-main")),L(S.Alert,"errorFilledColor",on(()=>S.getContrastText(S.error.main))),L(S.Alert,"infoFilledColor",on(()=>S.getContrastText(S.info.main))),L(S.Alert,"successFilledColor",on(()=>S.getContrastText(S.success.main))),L(S.Alert,"warningFilledColor",on(()=>S.getContrastText(S.warning.main))),L(S.Alert,"errorStandardBg",It(S.error.light,.9)),L(S.Alert,"infoStandardBg",It(S.info.light,.9)),L(S.Alert,"successStandardBg",It(S.success.light,.9)),L(S.Alert,"warningStandardBg",It(S.warning.light,.9)),L(S.Alert,"errorIconColor",k("palette-error-main")),L(S.Alert,"infoIconColor",k("palette-info-main")),L(S.Alert,"successIconColor",k("palette-success-main")),L(S.Alert,"warningIconColor",k("palette-warning-main")),L(S.AppBar,"defaultBg",k("palette-grey-100")),L(S.Avatar,"defaultBg",k("palette-grey-400")),L(S.Button,"inheritContainedBg",k("palette-grey-300")),L(S.Button,"inheritContainedHoverBg",k("palette-grey-A100")),L(S.Chip,"defaultBorder",k("palette-grey-400")),L(S.Chip,"defaultAvatarColor",k("palette-grey-700")),L(S.Chip,"defaultIconColor",k("palette-grey-700")),L(S.FilledInput,"bg","rgba(0, 0, 0, 0.06)"),L(S.FilledInput,"hoverBg","rgba(0, 0, 0, 0.09)"),L(S.FilledInput,"disabledBg","rgba(0, 0, 0, 0.12)"),L(S.LinearProgress,"primaryBg",It(S.primary.main,.62)),L(S.LinearProgress,"secondaryBg",It(S.secondary.main,.62)),L(S.LinearProgress,"errorBg",It(S.error.main,.62)),L(S.LinearProgress,"infoBg",It(S.info.main,.62)),L(S.LinearProgress,"successBg",It(S.success.main,.62)),L(S.LinearProgress,"warningBg",It(S.warning.main,.62)),L(S.Skeleton,"bg",`rgba(${k("palette-text-primaryChannel")} / 0.11)`),L(S.Slider,"primaryTrack",It(S.primary.main,.62)),L(S.Slider,"secondaryTrack",It(S.secondary.main,.62)),L(S.Slider,"errorTrack",It(S.error.main,.62)),L(S.Slider,"infoTrack",It(S.info.main,.62)),L(S.Slider,"successTrack",It(S.success.main,.62)),L(S.Slider,"warningTrack",It(S.warning.main,.62));const N=ru(S.background.default,.8);L(S.SnackbarContent,"bg",N),L(S.SnackbarContent,"color",on(()=>S.getContrastText(N))),L(S.SpeedDialAction,"fabHoverBg",ru(S.background.paper,.15)),L(S.StepConnector,"border",k("palette-grey-400")),L(S.StepContent,"border",k("palette-grey-400")),L(S.Switch,"defaultColor",k("palette-common-white")),L(S.Switch,"defaultDisabledColor",k("palette-grey-100")),L(S.Switch,"primaryDisabledColor",It(S.primary.main,.62)),L(S.Switch,"secondaryDisabledColor",It(S.secondary.main,.62)),L(S.Switch,"errorDisabledColor",It(S.error.main,.62)),L(S.Switch,"infoDisabledColor",It(S.info.main,.62)),L(S.Switch,"successDisabledColor",It(S.success.main,.62)),L(S.Switch,"warningDisabledColor",It(S.warning.main,.62)),L(S.TableCell,"border",It(iu(S.divider,1),.88)),L(S.Tooltip,"bg",iu(S.grey[700],.92))}if(S.mode==="dark"){L(S.Alert,"errorColor",It(S.error.light,.6)),L(S.Alert,"infoColor",It(S.info.light,.6)),L(S.Alert,"successColor",It(S.success.light,.6)),L(S.Alert,"warningColor",It(S.warning.light,.6)),L(S.Alert,"errorFilledBg",k("palette-error-dark")),L(S.Alert,"infoFilledBg",k("palette-info-dark")),L(S.Alert,"successFilledBg",k("palette-success-dark")),L(S.Alert,"warningFilledBg",k("palette-warning-dark")),L(S.Alert,"errorFilledColor",on(()=>S.getContrastText(S.error.dark))),L(S.Alert,"infoFilledColor",on(()=>S.getContrastText(S.info.dark))),L(S.Alert,"successFilledColor",on(()=>S.getContrastText(S.success.dark))),L(S.Alert,"warningFilledColor",on(()=>S.getContrastText(S.warning.dark))),L(S.Alert,"errorStandardBg",kt(S.error.light,.9)),L(S.Alert,"infoStandardBg",kt(S.info.light,.9)),L(S.Alert,"successStandardBg",kt(S.success.light,.9)),L(S.Alert,"warningStandardBg",kt(S.warning.light,.9)),L(S.Alert,"errorIconColor",k("palette-error-main")),L(S.Alert,"infoIconColor",k("palette-info-main")),L(S.Alert,"successIconColor",k("palette-success-main")),L(S.Alert,"warningIconColor",k("palette-warning-main")),L(S.AppBar,"defaultBg",k("palette-grey-900")),L(S.AppBar,"darkBg",k("palette-background-paper")),L(S.AppBar,"darkColor",k("palette-text-primary")),L(S.Avatar,"defaultBg",k("palette-grey-600")),L(S.Button,"inheritContainedBg",k("palette-grey-800")),L(S.Button,"inheritContainedHoverBg",k("palette-grey-700")),L(S.Chip,"defaultBorder",k("palette-grey-700")),L(S.Chip,"defaultAvatarColor",k("palette-grey-300")),L(S.Chip,"defaultIconColor",k("palette-grey-300")),L(S.FilledInput,"bg","rgba(255, 255, 255, 0.09)"),L(S.FilledInput,"hoverBg","rgba(255, 255, 255, 0.13)"),L(S.FilledInput,"disabledBg","rgba(255, 255, 255, 0.12)"),L(S.LinearProgress,"primaryBg",kt(S.primary.main,.5)),L(S.LinearProgress,"secondaryBg",kt(S.secondary.main,.5)),L(S.LinearProgress,"errorBg",kt(S.error.main,.5)),L(S.LinearProgress,"infoBg",kt(S.info.main,.5)),L(S.LinearProgress,"successBg",kt(S.success.main,.5)),L(S.LinearProgress,"warningBg",kt(S.warning.main,.5)),L(S.Skeleton,"bg",`rgba(${k("palette-text-primaryChannel")} / 0.13)`),L(S.Slider,"primaryTrack",kt(S.primary.main,.5)),L(S.Slider,"secondaryTrack",kt(S.secondary.main,.5)),L(S.Slider,"errorTrack",kt(S.error.main,.5)),L(S.Slider,"infoTrack",kt(S.info.main,.5)),L(S.Slider,"successTrack",kt(S.success.main,.5)),L(S.Slider,"warningTrack",kt(S.warning.main,.5));const N=ru(S.background.default,.98);L(S.SnackbarContent,"bg",N),L(S.SnackbarContent,"color",on(()=>S.getContrastText(N))),L(S.SpeedDialAction,"fabHoverBg",ru(S.background.paper,.15)),L(S.StepConnector,"border",k("palette-grey-600")),L(S.StepContent,"border",k("palette-grey-600")),L(S.Switch,"defaultColor",k("palette-grey-300")),L(S.Switch,"defaultDisabledColor",k("palette-grey-600")),L(S.Switch,"primaryDisabledColor",kt(S.primary.main,.55)),L(S.Switch,"secondaryDisabledColor",kt(S.secondary.main,.55)),L(S.Switch,"errorDisabledColor",kt(S.error.main,.55)),L(S.Switch,"infoDisabledColor",kt(S.info.main,.55)),L(S.Switch,"successDisabledColor",kt(S.success.main,.55)),L(S.Switch,"warningDisabledColor",kt(S.warning.main,.55)),L(S.TableCell,"border",kt(iu(S.divider,1),.68)),L(S.Tooltip,"bg",iu(S.grey[700],.92))}Fn(S.background,"default"),Fn(S.background,"paper"),Fn(S.common,"background"),Fn(S.common,"onBackground"),Fn(S,"divider"),Object.keys(S).forEach(N=>{const H=S[N];N!=="tonalOffset"&&H&&typeof H=="object"&&(H.main&&L(S[N],"mainChannel",Il(Ml(H.main))),H.light&&L(S[N],"lightChannel",Il(Ml(H.light))),H.dark&&L(S[N],"darkChannel",Il(Ml(H.dark))),H.contrastText&&L(S[N],"contrastTextChannel",Il(Ml(H.contrastText))),N==="text"&&(Fn(S[N],"primary"),Fn(S[N],"secondary")),N==="action"&&(H.active&&Fn(S[N],"active"),H.selected&&Fn(S[N],"selected")))})}),x=t.reduce((D,S)=>Ve(D,S),x);const E={prefix:r,disableCssColorScheme:n,shouldSkipGeneratingVar:o,getSelector:MS(x)},{vars:T,generateThemeVars:P,generateStyleSheets:M}=Jw(x,E);return x.vars=T,Object.entries(x.colorSchemes[x.defaultColorScheme]).forEach(([D,S])=>{x[D]=S}),x.generateThemeVars=P,x.generateStyleSheets=M,x.generateSpacing=function(){return xy(h.spacing,Ld(this))},x.getColorSchemeSelector=Zw(l),x.spacing=x.generateSpacing(),x.shouldSkipGeneratingVar=o,x.unstable_sxConfig={...Uh,...h==null?void 0:h.unstable_sxConfig},x.unstable_sx=function(S){return Fo({sx:S,theme:this})},x.toRuntimeSource=Ly,x}function um(i,t,e){i.colorSchemes&&e&&(i.colorSchemes[t]={...e!==!0&&e,palette:ug({...e===!0?{}:e.palette,mode:t})})}function Ny(i={},...t){const{palette:e,cssVariables:s=!1,colorSchemes:n=e?void 0:{light:!0},defaultColorScheme:r=e==null?void 0:e.mode,...o}=i,l=r||"light",c=n==null?void 0:n[l],h={...n,...e?{[l]:{...typeof c!="boolean"&&c,palette:e}}:void 0};if(s===!1){if(!("colorSchemes"in i))return Tf(i,...t);let u=e;"palette"in i||h[l]&&(h[l]!==!0?u=h[l].palette:l==="dark"&&(u={mode:"dark"}));const d=Tf({...i,palette:u},...t);return d.defaultColorScheme=l,d.colorSchemes=h,d.palette.mode==="light"&&(d.colorSchemes.light={...h.light!==!0&&h.light,palette:d.palette},um(d,"dark",h.dark)),d.palette.mode==="dark"&&(d.colorSchemes.dark={...h.dark!==!0&&h.dark,palette:d.palette},um(d,"light",h.light)),d}return!e&&!("light"in h)&&l==="light"&&(h.light=!0),NS({...o,colorSchemes:h,defaultColorScheme:l,...typeof s!="boolean"&&s},...t)}const Fy=Ny();function FS(){const i=lg(Fy);return i[Qp]||i}function $S(i){return i!=="ownerState"&&i!=="theme"&&i!=="sx"&&i!=="as"}const $y=i=>$S(i)&&i!=="classes",ee=Ry({themeId:Qp,defaultTheme:Fy,rootShouldForwardProp:$y});function BS(){return cg}const wi=Xw;function Nn(i){return qw(i)}function jS(i){return Dn("MuiSvgIcon",i)}On("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const HS=i=>{const{color:t,fontSize:e,classes:s}=i,n={root:["root",t!=="inherit"&&`color${pt(t)}`,`fontSize${pt(e)}`]};return _i(n,jS,s)},zS=ee("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(i,t)=>{const{ownerState:e}=i;return[t.root,e.color!=="inherit"&&t[`color${pt(e.color)}`],t[`fontSize${pt(e.fontSize)}`]]}})(wi(({theme:i})=>{var t,e,s,n,r,o,l,c,h,u,d,f,p,y;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",flexShrink:0,transition:(n=(t=i.transitions)==null?void 0:t.create)==null?void 0:n.call(t,"fill",{duration:(s=(e=(i.vars??i).transitions)==null?void 0:e.duration)==null?void 0:s.shorter}),variants:[{props:g=>!g.hasSvgAsChild,style:{fill:"currentColor"}},{props:{fontSize:"inherit"},style:{fontSize:"inherit"}},{props:{fontSize:"small"},style:{fontSize:((o=(r=i.typography)==null?void 0:r.pxToRem)==null?void 0:o.call(r,20))||"1.25rem"}},{props:{fontSize:"medium"},style:{fontSize:((c=(l=i.typography)==null?void 0:l.pxToRem)==null?void 0:c.call(l,24))||"1.5rem"}},{props:{fontSize:"large"},style:{fontSize:((u=(h=i.typography)==null?void 0:h.pxToRem)==null?void 0:u.call(h,35))||"2.1875rem"}},...Object.entries((i.vars??i).palette).filter(([,g])=>g&&g.main).map(([g])=>{var v,w;return{props:{color:g},style:{color:(w=(v=(i.vars??i).palette)==null?void 0:v[g])==null?void 0:w.main}}}),{props:{color:"action"},style:{color:(f=(d=(i.vars??i).palette)==null?void 0:d.action)==null?void 0:f.active}},{props:{color:"disabled"},style:{color:(y=(p=(i.vars??i).palette)==null?void 0:p.action)==null?void 0:y.disabled}},{props:{color:"inherit"},style:{color:void 0}}]}})),Rf=I.forwardRef(function(t,e){const s=Nn({props:t,name:"MuiSvgIcon"}),{children:n,className:r,color:o="inherit",component:l="svg",fontSize:c="medium",htmlColor:h,inheritViewBox:u=!1,titleAccess:d,viewBox:f="0 0 24 24",...p}=s,y=I.isValidElement(n)&&n.type==="svg",g={...s,color:o,component:l,fontSize:c,instanceFontSize:t.fontSize,inheritViewBox:u,viewBox:f,hasSvgAsChild:y},v={};u||(v.viewBox=f);const w=HS(g);return B.jsxs(zS,{as:l,className:Ot(w.root,r),focusable:"false",color:h,"aria-hidden":d?void 0:!0,role:d?"img":void 0,ref:e,...v,...p,...y&&n.props,ownerState:g,children:[y?n.props.children:n,d?B.jsx("title",{children:d}):null]})});Rf.muiName="SvgIcon";function br(i,t){function e(s,n){return B.jsx(Rf,{"data-testid":void 0,ref:n,...s,children:i})}return e.muiName=Rf.muiName,I.memo(I.forwardRef(e))}let dm=0;function GS(i){const[t,e]=I.useState(i),s=i||t;return I.useEffect(()=>{t==null&&(dm+=1,e(`mui-${dm}`))},[t]),s}const US={...wf},fm=US.useId;function By(i){if(fm!==void 0){const t=fm();return i??t}return GS(i)}function bu(i){const t=I.useRef(i);return Bw(()=>{t.current=i}),I.useRef((...e)=>(0,t.current)(...e)).current}function kf(...i){const t=I.useRef(void 0),e=I.useCallback(s=>{const n=i.map(r=>{if(r==null)return null;if(typeof r=="function"){const o=r,l=o(s);return typeof l=="function"?l:()=>{o(null)}}return r.current=s,()=>{r.current=null}});return()=>{n.forEach(r=>r==null?void 0:r())}},i);return I.useMemo(()=>i.every(s=>s==null)?null:s=>{t.current&&(t.current(),t.current=void 0),s!=null&&(t.current=e(s))},i)}function VS(i,t){if(i==null)return{};var e={};for(var s in i)if({}.hasOwnProperty.call(i,s)){if(t.indexOf(s)!==-1)continue;e[s]=i[s]}return e}function If(i,t){return If=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,s){return e.__proto__=s,e},If(i,t)}function WS(i,t){i.prototype=Object.create(t.prototype),i.prototype.constructor=i,If(i,t)}const pm=na.createContext(null);function qS(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function dg(i,t){var e=function(r){return t&&I.isValidElement(r)?t(r):r},s=Object.create(null);return i&&I.Children.map(i,function(n){return n}).forEach(function(n){s[n.key]=e(n)}),s}function XS(i,t){i=i||{},t=t||{};function e(u){return u in t?t[u]:i[u]}var s=Object.create(null),n=[];for(var r in i)r in t?n.length&&(s[r]=n,n=[]):n.push(r);var o,l={};for(var c in t){if(s[c])for(o=0;o<s[c].length;o++){var h=s[c][o];l[s[c][o]]=e(h)}l[c]=e(c)}for(o=0;o<n.length;o++)l[n[o]]=e(n[o]);return l}function Tr(i,t,e){return e[t]!=null?e[t]:i.props[t]}function YS(i,t){return dg(i.children,function(e){return I.cloneElement(e,{onExited:t.bind(null,e),in:!0,appear:Tr(e,"appear",i),enter:Tr(e,"enter",i),exit:Tr(e,"exit",i)})})}function KS(i,t,e){var s=dg(i.children),n=XS(t,s);return Object.keys(n).forEach(function(r){var o=n[r];if(I.isValidElement(o)){var l=r in t,c=r in s,h=t[r],u=I.isValidElement(h)&&!h.props.in;c&&(!l||u)?n[r]=I.cloneElement(o,{onExited:e.bind(null,o),in:!0,exit:Tr(o,"exit",i),enter:Tr(o,"enter",i)}):!c&&l&&!u?n[r]=I.cloneElement(o,{in:!1}):c&&l&&I.isValidElement(h)&&(n[r]=I.cloneElement(o,{onExited:e.bind(null,o),in:h.props.in,exit:Tr(o,"exit",i),enter:Tr(o,"enter",i)}))}}),n}var QS=Object.values||function(i){return Object.keys(i).map(function(t){return i[t]})},JS={component:"div",childFactory:function(t){return t}},fg=function(i){WS(t,i);function t(s,n){var r;r=i.call(this,s,n)||this;var o=r.handleExited.bind(qS(r));return r.state={contextValue:{isMounting:!0},handleExited:o,firstRender:!0},r}var e=t.prototype;return e.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},e.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(n,r){var o=r.children,l=r.handleExited,c=r.firstRender;return{children:c?YS(n,l):KS(n,o,l),firstRender:!1}},e.handleExited=function(n,r){var o=dg(this.props.children);n.key in o||(n.props.onExited&&n.props.onExited(r),this.mounted&&this.setState(function(l){var c=Yu({},l.children);return delete c[n.key],{children:c}}))},e.render=function(){var n=this.props,r=n.component,o=n.childFactory,l=VS(n,["component","childFactory"]),c=this.state.contextValue,h=QS(this.state.children).map(o);return delete l.appear,delete l.enter,delete l.exit,r===null?na.createElement(pm.Provider,{value:c},h):na.createElement(pm.Provider,{value:c},na.createElement(r,l,h))},t}(na.Component);fg.propTypes={};fg.defaultProps=JS;const gm={};function jy(i,t){const e=I.useRef(gm);return e.current===gm&&(e.current=i(t)),e}const ZS=[];function tE(i){I.useEffect(i,ZS)}class pg{constructor(){$(this,"currentId",null);$(this,"clear",()=>{this.currentId!==null&&(clearTimeout(this.currentId),this.currentId=null)});$(this,"disposeEffect",()=>this.clear)}static create(){return new pg}start(t,e){this.clear(),this.currentId=setTimeout(()=>{this.currentId=null,e()},t)}}function eE(){const i=jy(pg.create).current;return tE(i.disposeEffect),i}function sE(i){return Dn("MuiPaper",i)}On("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const nE=i=>{const{square:t,elevation:e,variant:s,classes:n}=i,r={root:["root",s,!t&&"rounded",s==="elevation"&&`elevation${e}`]};return _i(r,sE,n)},iE=ee("div",{name:"MuiPaper",slot:"Root",overridesResolver:(i,t)=>{const{ownerState:e}=i;return[t.root,t[e.variant],!e.square&&t.rounded,e.variant==="elevation"&&t[`elevation${e.elevation}`]]}})(wi(({theme:i})=>({backgroundColor:(i.vars||i).palette.background.paper,color:(i.vars||i).palette.text.primary,transition:i.transitions.create("box-shadow"),variants:[{props:({ownerState:t})=>!t.square,style:{borderRadius:i.shape.borderRadius}},{props:{variant:"outlined"},style:{border:`1px solid ${(i.vars||i).palette.divider}`}},{props:{variant:"elevation"},style:{boxShadow:"var(--Paper-shadow)",backgroundImage:"var(--Paper-overlay)"}}]}))),Hy=I.forwardRef(function(t,e){var p;const s=Nn({props:t,name:"MuiPaper"}),n=FS(),{className:r,component:o="div",elevation:l=1,square:c=!1,variant:h="elevation",...u}=s,d={...s,component:o,elevation:l,square:c,variant:h},f=nE(d);return B.jsx(iE,{as:o,ownerState:d,className:Ot(f.root,r),ref:e,...u,style:{...h==="elevation"&&{"--Paper-shadow":(n.vars||n).shadows[l],...n.vars&&{"--Paper-overlay":(p=n.vars.overlays)==null?void 0:p[l]},...!n.vars&&n.palette.mode==="dark"&&{"--Paper-overlay":`linear-gradient(${Rn("#fff",Pf(l))}, ${Rn("#fff",Pf(l))})`}},...u.style}})});function rE(i){return typeof i=="string"}function oE(i,t,e){return i===void 0||rE(i)?t:{...t,ownerState:{...t.ownerState,...e}}}function aE(i,t,e){return typeof i=="function"?i(t,e):i}function lE(i,t=[]){if(i===void 0)return{};const e={};return Object.keys(i).filter(s=>s.match(/^on[A-Z]/)&&typeof i[s]=="function"&&!t.includes(s)).forEach(s=>{e[s]=i[s]}),e}function mm(i){if(i===void 0)return{};const t={};return Object.keys(i).filter(e=>!(e.match(/^on[A-Z]/)&&typeof i[e]=="function")).forEach(e=>{t[e]=i[e]}),t}function cE(i){const{getSlotProps:t,additionalProps:e,externalSlotProps:s,externalForwardedProps:n,className:r}=i;if(!t){const p=Ot(e==null?void 0:e.className,r,n==null?void 0:n.className,s==null?void 0:s.className),y={...e==null?void 0:e.style,...n==null?void 0:n.style,...s==null?void 0:s.style},g={...e,...n,...s};return p.length>0&&(g.className=p),Object.keys(y).length>0&&(g.style=y),{props:g,internalRef:void 0}}const o=lE({...n,...s}),l=mm(s),c=mm(n),h=t(o),u=Ot(h==null?void 0:h.className,e==null?void 0:e.className,r,n==null?void 0:n.className,s==null?void 0:s.className),d={...h==null?void 0:h.style,...e==null?void 0:e.style,...n==null?void 0:n.style,...s==null?void 0:s.style},f={...h,...e,...c,...l};return u.length>0&&(f.className=u),Object.keys(d).length>0&&(f.style=d),{props:f,internalRef:h.ref}}function Yo(i,t){const{className:e,elementType:s,ownerState:n,externalForwardedProps:r,internalForwardedProps:o,shouldForwardComponentProp:l=!1,...c}=t,{component:h,slots:u={[i]:void 0},slotProps:d={[i]:void 0},...f}=r,p=u[i]||s,y=aE(d[i],n),{props:{component:g,...v},internalRef:w}=cE({className:e,...c,externalForwardedProps:i==="root"?f:void 0,externalSlotProps:y}),_=kf(w,y==null?void 0:y.ref,t.ref),C=i==="root"?g||h:g,x=oE(p,{...i==="root"&&!h&&!u[i]&&o,...i!=="root"&&!u[i]&&o,...v,...C&&!l&&{as:C},...C&&l&&{component:C},ref:_},n);return[p,x]}function ym(i){try{return i.matches(":focus-visible")}catch{}return!1}class Ju{constructor(){$(this,"mountEffect",()=>{this.shouldMount&&!this.didMount&&this.ref.current!==null&&(this.didMount=!0,this.mounted.resolve())});this.ref={current:null},this.mounted=null,this.didMount=!1,this.shouldMount=!1,this.setShouldMount=null}static create(){return new Ju}static use(){const t=jy(Ju.create).current,[e,s]=I.useState(!1);return t.shouldMount=e,t.setShouldMount=s,I.useEffect(t.mountEffect,[e]),t}mount(){return this.mounted||(this.mounted=uE(),this.shouldMount=!0,this.setShouldMount(this.shouldMount)),this.mounted}start(...t){this.mount().then(()=>{var e;return(e=this.ref.current)==null?void 0:e.start(...t)})}stop(...t){this.mount().then(()=>{var e;return(e=this.ref.current)==null?void 0:e.stop(...t)})}pulsate(...t){this.mount().then(()=>{var e;return(e=this.ref.current)==null?void 0:e.pulsate(...t)})}}function hE(){return Ju.use()}function uE(){let i,t;const e=new Promise((s,n)=>{i=s,t=n});return e.resolve=i,e.reject=t,e}function dE(i){const{className:t,classes:e,pulsate:s=!1,rippleX:n,rippleY:r,rippleSize:o,in:l,onExited:c,timeout:h}=i,[u,d]=I.useState(!1),f=Ot(t,e.ripple,e.rippleVisible,s&&e.ripplePulsate),p={width:o,height:o,top:-(o/2)+r,left:-(o/2)+n},y=Ot(e.child,u&&e.childLeaving,s&&e.childPulsate);return!l&&!u&&d(!0),I.useEffect(()=>{if(!l&&c!=null){const g=setTimeout(c,h);return()=>{clearTimeout(g)}}},[c,l,h]),B.jsx("span",{className:f,style:p,children:B.jsx("span",{className:y})})}const Ms=On("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),Mf=550,fE=80,pE=zh`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`,gE=zh`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`,mE=zh`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`,yE=ee("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),bE=ee(dE,{name:"MuiTouchRipple",slot:"Ripple"})`
  opacity: 0;
  position: absolute;

  &.${Ms.rippleVisible} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${pE};
    animation-duration: ${Mf}ms;
    animation-timing-function: ${({theme:i})=>i.transitions.easing.easeInOut};
  }

  &.${Ms.ripplePulsate} {
    animation-duration: ${({theme:i})=>i.transitions.duration.shorter}ms;
  }

  & .${Ms.child} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${Ms.childLeaving} {
    opacity: 0;
    animation-name: ${gE};
    animation-duration: ${Mf}ms;
    animation-timing-function: ${({theme:i})=>i.transitions.easing.easeInOut};
  }

  & .${Ms.childPulsate} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${mE};
    animation-duration: 2500ms;
    animation-timing-function: ${({theme:i})=>i.transitions.easing.easeInOut};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`,vE=I.forwardRef(function(t,e){const s=Nn({props:t,name:"MuiTouchRipple"}),{center:n=!1,classes:r={},className:o,...l}=s,[c,h]=I.useState([]),u=I.useRef(0),d=I.useRef(null);I.useEffect(()=>{d.current&&(d.current(),d.current=null)},[c]);const f=I.useRef(!1),p=eE(),y=I.useRef(null),g=I.useRef(null),v=I.useCallback(x=>{const{pulsate:E,rippleX:T,rippleY:P,rippleSize:M,cb:D}=x;h(S=>[...S,B.jsx(bE,{classes:{ripple:Ot(r.ripple,Ms.ripple),rippleVisible:Ot(r.rippleVisible,Ms.rippleVisible),ripplePulsate:Ot(r.ripplePulsate,Ms.ripplePulsate),child:Ot(r.child,Ms.child),childLeaving:Ot(r.childLeaving,Ms.childLeaving),childPulsate:Ot(r.childPulsate,Ms.childPulsate)},timeout:Mf,pulsate:E,rippleX:T,rippleY:P,rippleSize:M},u.current)]),u.current+=1,d.current=D},[r]),w=I.useCallback((x={},E={},T=()=>{})=>{const{pulsate:P=!1,center:M=n||E.pulsate,fakeElement:D=!1}=E;if((x==null?void 0:x.type)==="mousedown"&&f.current){f.current=!1;return}(x==null?void 0:x.type)==="touchstart"&&(f.current=!0);const S=D?null:g.current,k=S?S.getBoundingClientRect():{width:0,height:0,left:0,top:0};let N,H,z;if(M||x===void 0||x.clientX===0&&x.clientY===0||!x.clientX&&!x.touches)N=Math.round(k.width/2),H=Math.round(k.height/2);else{const{clientX:q,clientY:F}=x.touches&&x.touches.length>0?x.touches[0]:x;N=Math.round(q-k.left),H=Math.round(F-k.top)}if(M)z=Math.sqrt((2*k.width**2+k.height**2)/3),z%2===0&&(z+=1);else{const q=Math.max(Math.abs((S?S.clientWidth:0)-N),N)*2+2,F=Math.max(Math.abs((S?S.clientHeight:0)-H),H)*2+2;z=Math.sqrt(q**2+F**2)}x!=null&&x.touches?y.current===null&&(y.current=()=>{v({pulsate:P,rippleX:N,rippleY:H,rippleSize:z,cb:T})},p.start(fE,()=>{y.current&&(y.current(),y.current=null)})):v({pulsate:P,rippleX:N,rippleY:H,rippleSize:z,cb:T})},[n,v,p]),_=I.useCallback(()=>{w({},{pulsate:!0})},[w]),C=I.useCallback((x,E)=>{if(p.clear(),(x==null?void 0:x.type)==="touchend"&&y.current){y.current(),y.current=null,p.start(0,()=>{C(x,E)});return}y.current=null,h(T=>T.length>0?T.slice(1):T),d.current=E},[p]);return I.useImperativeHandle(e,()=>({pulsate:_,start:w,stop:C}),[_,w,C]),B.jsx(yE,{className:Ot(Ms.root,r.root,o),ref:g,...l,children:B.jsx(fg,{component:null,exit:!0,children:c})})});function AE(i){return Dn("MuiButtonBase",i)}const wE=On("MuiButtonBase",["root","disabled","focusVisible"]),SE=i=>{const{disabled:t,focusVisible:e,focusVisibleClassName:s,classes:n}=i,o=_i({root:["root",t&&"disabled",e&&"focusVisible"]},AE,n);return e&&s&&(o.root+=` ${s}`),o},EE=ee("button",{name:"MuiButtonBase",slot:"Root"})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${wE.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),zy=I.forwardRef(function(t,e){const s=Nn({props:t,name:"MuiButtonBase"}),{action:n,centerRipple:r=!1,children:o,className:l,component:c="button",disabled:h=!1,disableRipple:u=!1,disableTouchRipple:d=!1,focusRipple:f=!1,focusVisibleClassName:p,LinkComponent:y="a",onBlur:g,onClick:v,onContextMenu:w,onDragLeave:_,onFocus:C,onFocusVisible:x,onKeyDown:E,onKeyUp:T,onMouseDown:P,onMouseLeave:M,onMouseUp:D,onTouchEnd:S,onTouchMove:k,onTouchStart:N,tabIndex:H=0,TouchRippleProps:z,touchRippleRef:q,type:F,...j}=s,lt=I.useRef(null),ut=hE(),R=kf(ut.ref,q),[O,U]=I.useState(!1);h&&O&&U(!1),I.useImperativeHandle(n,()=>({focusVisible:()=>{U(!0),lt.current.focus()}}),[]);const V=ut.shouldMount&&!u&&!h;I.useEffect(()=>{O&&f&&!u&&ut.pulsate()},[u,f,O,ut]);const tt=$n(ut,"start",P,d),at=$n(ut,"stop",w,d),J=$n(ut,"stop",_,d),ct=$n(ut,"stop",D,d),yt=$n(ut,"stop",it=>{O&&it.preventDefault(),M&&M(it)},d),qe=$n(ut,"start",N,d),Lt=$n(ut,"stop",S,d),Bs=$n(ut,"stop",k,d),js=$n(ut,"stop",it=>{ym(it.target)||U(!1),g&&g(it)},!1),be=bu(it=>{lt.current||(lt.current=it.currentTarget),ym(it.target)&&(U(!0),x&&x(it)),C&&C(it)}),wt=()=>{const it=lt.current;return c&&c!=="button"&&!(it.tagName==="A"&&it.href)},se=bu(it=>{f&&!it.repeat&&O&&it.key===" "&&ut.stop(it,()=>{ut.start(it)}),it.target===it.currentTarget&&wt()&&it.key===" "&&it.preventDefault(),E&&E(it),it.target===it.currentTarget&&wt()&&it.key==="Enter"&&!h&&(it.preventDefault(),v&&v(it))}),zt=bu(it=>{f&&it.key===" "&&O&&!it.defaultPrevented&&ut.stop(it,()=>{ut.pulsate(it)}),T&&T(it),v&&it.target===it.currentTarget&&wt()&&it.key===" "&&!it.defaultPrevented&&v(it)});let es=c;es==="button"&&(j.href||j.to)&&(es=y);const Ss={};es==="button"?(Ss.type=F===void 0?"button":F,Ss.disabled=h):(!j.href&&!j.to&&(Ss.role="button"),h&&(Ss["aria-disabled"]=h));const vr=kf(e,lt),tu={...s,centerRipple:r,component:c,disabled:h,disableRipple:u,disableTouchRipple:d,focusRipple:f,tabIndex:H,focusVisible:O},zo=SE(tu);return B.jsxs(EE,{as:es,className:Ot(zo.root,l),ownerState:tu,onBlur:js,onClick:v,onContextMenu:at,onFocus:be,onKeyDown:se,onKeyUp:zt,onMouseDown:tt,onMouseLeave:yt,onMouseUp:ct,onDragLeave:J,onTouchEnd:Lt,onTouchMove:Bs,onTouchStart:qe,ref:vr,tabIndex:h?-1:H,type:F,...Ss,...j,children:[o,V?B.jsx(vE,{ref:R,center:r,...z}):null]})});function $n(i,t,e,s=!1){return bu(n=>(e&&e(n),s||i[t](n),!0))}function xE(i){return typeof i.main=="string"}function _E(i,t=[]){if(!xE(i))return!1;for(const e of t)if(!i.hasOwnProperty(e)||typeof i[e]!="string")return!1;return!0}function ur(i=[]){return([,t])=>t&&_E(t,i)}function CE(i){return Dn("MuiAlert",i)}const bm=On("MuiAlert",["root","action","icon","message","filled","colorSuccess","colorInfo","colorWarning","colorError","filledSuccess","filledInfo","filledWarning","filledError","outlined","outlinedSuccess","outlinedInfo","outlinedWarning","outlinedError","standard","standardSuccess","standardInfo","standardWarning","standardError"]);function TE(i){return Dn("MuiCircularProgress",i)}On("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);const Ci=44,Lf=zh`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`,Df=zh`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: -126px;
  }
`,PE=typeof Lf!="string"?ig`
        animation: ${Lf} 1.4s linear infinite;
      `:null,RE=typeof Df!="string"?ig`
        animation: ${Df} 1.4s ease-in-out infinite;
      `:null,kE=i=>{const{classes:t,variant:e,color:s,disableShrink:n}=i,r={root:["root",e,`color${pt(s)}`],svg:["svg"],circle:["circle",`circle${pt(e)}`,n&&"circleDisableShrink"]};return _i(r,TE,t)},IE=ee("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(i,t)=>{const{ownerState:e}=i;return[t.root,t[e.variant],t[`color${pt(e.color)}`]]}})(wi(({theme:i})=>({display:"inline-block",variants:[{props:{variant:"determinate"},style:{transition:i.transitions.create("transform")}},{props:{variant:"indeterminate"},style:PE||{animation:`${Lf} 1.4s linear infinite`}},...Object.entries(i.palette).filter(ur()).map(([t])=>({props:{color:t},style:{color:(i.vars||i).palette[t].main}}))]}))),ME=ee("svg",{name:"MuiCircularProgress",slot:"Svg"})({display:"block"}),LE=ee("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(i,t)=>{const{ownerState:e}=i;return[t.circle,t[`circle${pt(e.variant)}`],e.disableShrink&&t.circleDisableShrink]}})(wi(({theme:i})=>({stroke:"currentColor",variants:[{props:{variant:"determinate"},style:{transition:i.transitions.create("stroke-dashoffset")}},{props:{variant:"indeterminate"},style:{strokeDasharray:"80px, 200px",strokeDashoffset:0}},{props:({ownerState:t})=>t.variant==="indeterminate"&&!t.disableShrink,style:RE||{animation:`${Df} 1.4s ease-in-out infinite`}}]}))),Zu=I.forwardRef(function(t,e){const s=Nn({props:t,name:"MuiCircularProgress"}),{className:n,color:r="primary",disableShrink:o=!1,size:l=40,style:c,thickness:h=3.6,value:u=0,variant:d="indeterminate",...f}=s,p={...s,color:r,disableShrink:o,size:l,thickness:h,value:u,variant:d},y=kE(p),g={},v={},w={};if(d==="determinate"){const _=2*Math.PI*((Ci-h)/2);g.strokeDasharray=_.toFixed(3),w["aria-valuenow"]=Math.round(u),g.strokeDashoffset=`${((100-u)/100*_).toFixed(3)}px`,v.transform="rotate(-90deg)"}return B.jsx(IE,{className:Ot(y.root,n),style:{width:l,height:l,...v,...c},ownerState:p,ref:e,role:"progressbar",...w,...f,children:B.jsx(ME,{className:y.svg,ownerState:p,viewBox:`${Ci/2} ${Ci/2} ${Ci} ${Ci}`,children:B.jsx(LE,{className:y.circle,style:g,ownerState:p,cx:Ci,cy:Ci,r:(Ci-h)/2,fill:"none",strokeWidth:h})})})});function DE(i){return Dn("MuiIconButton",i)}const vm=On("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge","loading","loadingIndicator","loadingWrapper"]),OE=i=>{const{classes:t,disabled:e,color:s,edge:n,size:r,loading:o}=i,l={root:["root",o&&"loading",e&&"disabled",s!=="default"&&`color${pt(s)}`,n&&`edge${pt(n)}`,`size${pt(r)}`],loadingIndicator:["loadingIndicator"],loadingWrapper:["loadingWrapper"]};return _i(l,DE,t)},NE=ee(zy,{name:"MuiIconButton",slot:"Root",overridesResolver:(i,t)=>{const{ownerState:e}=i;return[t.root,e.loading&&t.loading,e.color!=="default"&&t[`color${pt(e.color)}`],e.edge&&t[`edge${pt(e.edge)}`],t[`size${pt(e.size)}`]]}})(wi(({theme:i})=>({textAlign:"center",flex:"0 0 auto",fontSize:i.typography.pxToRem(24),padding:8,borderRadius:"50%",color:(i.vars||i).palette.action.active,transition:i.transitions.create("background-color",{duration:i.transitions.duration.shortest}),variants:[{props:t=>!t.disableRipple,style:{"--IconButton-hoverBg":i.vars?`rgba(${i.vars.palette.action.activeChannel} / ${i.vars.palette.action.hoverOpacity})`:Rn(i.palette.action.active,i.palette.action.hoverOpacity),"&:hover":{backgroundColor:"var(--IconButton-hoverBg)","@media (hover: none)":{backgroundColor:"transparent"}}}},{props:{edge:"start"},style:{marginLeft:-12}},{props:{edge:"start",size:"small"},style:{marginLeft:-3}},{props:{edge:"end"},style:{marginRight:-12}},{props:{edge:"end",size:"small"},style:{marginRight:-3}}]})),wi(({theme:i})=>({variants:[{props:{color:"inherit"},style:{color:"inherit"}},...Object.entries(i.palette).filter(ur()).map(([t])=>({props:{color:t},style:{color:(i.vars||i).palette[t].main}})),...Object.entries(i.palette).filter(ur()).map(([t])=>({props:{color:t},style:{"--IconButton-hoverBg":i.vars?`rgba(${(i.vars||i).palette[t].mainChannel} / ${i.vars.palette.action.hoverOpacity})`:Rn((i.vars||i).palette[t].main,i.palette.action.hoverOpacity)}})),{props:{size:"small"},style:{padding:5,fontSize:i.typography.pxToRem(18)}},{props:{size:"large"},style:{padding:12,fontSize:i.typography.pxToRem(28)}}],[`&.${vm.disabled}`]:{backgroundColor:"transparent",color:(i.vars||i).palette.action.disabled},[`&.${vm.loading}`]:{color:"transparent"}}))),FE=ee("span",{name:"MuiIconButton",slot:"LoadingIndicator"})(({theme:i})=>({display:"none",position:"absolute",visibility:"visible",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:(i.vars||i).palette.action.disabled,variants:[{props:{loading:!0},style:{display:"flex"}}]})),Of=I.forwardRef(function(t,e){const s=Nn({props:t,name:"MuiIconButton"}),{edge:n=!1,children:r,className:o,color:l="default",disabled:c=!1,disableFocusRipple:h=!1,size:u="medium",id:d,loading:f=null,loadingIndicator:p,...y}=s,g=By(d),v=p??B.jsx(Zu,{"aria-labelledby":g,color:"inherit",size:16}),w={...s,edge:n,color:l,disabled:c,disableFocusRipple:h,loading:f,loadingIndicator:v,size:u},_=OE(w);return B.jsxs(NE,{id:f?g:d,className:Ot(_.root,o),centerRipple:!0,focusRipple:!h,disabled:c||f,ref:e,...y,ownerState:w,children:[typeof f=="boolean"&&B.jsx("span",{className:_.loadingWrapper,style:{display:"contents"},children:B.jsx(FE,{className:_.loadingIndicator,ownerState:w,children:f&&v})}),r]})}),$E=br(B.jsx("path",{d:"M20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4C12.76,4 13.5,4.11 14.2, 4.31L15.77,2.74C14.61,2.26 13.34,2 12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0, 0 22,12M7.91,10.08L6.5,11.5L11,16L21,6L19.59,4.58L11,13.17L7.91,10.08Z"})),BE=br(B.jsx("path",{d:"M12 5.99L19.53 19H4.47L12 5.99M12 2L1 21h22L12 2zm1 14h-2v2h2v-2zm0-6h-2v4h2v-4z"})),jE=br(B.jsx("path",{d:"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"})),HE=br(B.jsx("path",{d:"M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20, 12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10, 10 0 0,0 12,2M11,17H13V11H11V17Z"})),zE=br(B.jsx("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})),GE=i=>{const{variant:t,color:e,severity:s,classes:n}=i,r={root:["root",`color${pt(e||s)}`,`${t}${pt(e||s)}`,`${t}`],icon:["icon"],message:["message"],action:["action"]};return _i(r,CE,n)},UE=ee(Hy,{name:"MuiAlert",slot:"Root",overridesResolver:(i,t)=>{const{ownerState:e}=i;return[t.root,t[e.variant],t[`${e.variant}${pt(e.color||e.severity)}`]]}})(wi(({theme:i})=>{const t=i.palette.mode==="light"?rc:oc,e=i.palette.mode==="light"?oc:rc;return{...i.typography.body2,backgroundColor:"transparent",display:"flex",padding:"6px 16px",variants:[...Object.entries(i.palette).filter(ur(["light"])).map(([s])=>({props:{colorSeverity:s,variant:"standard"},style:{color:i.vars?i.vars.palette.Alert[`${s}Color`]:t(i.palette[s].light,.6),backgroundColor:i.vars?i.vars.palette.Alert[`${s}StandardBg`]:e(i.palette[s].light,.9),[`& .${bm.icon}`]:i.vars?{color:i.vars.palette.Alert[`${s}IconColor`]}:{color:i.palette[s].main}}})),...Object.entries(i.palette).filter(ur(["light"])).map(([s])=>({props:{colorSeverity:s,variant:"outlined"},style:{color:i.vars?i.vars.palette.Alert[`${s}Color`]:t(i.palette[s].light,.6),border:`1px solid ${(i.vars||i).palette[s].light}`,[`& .${bm.icon}`]:i.vars?{color:i.vars.palette.Alert[`${s}IconColor`]}:{color:i.palette[s].main}}})),...Object.entries(i.palette).filter(ur(["dark"])).map(([s])=>({props:{colorSeverity:s,variant:"filled"},style:{fontWeight:i.typography.fontWeightMedium,...i.vars?{color:i.vars.palette.Alert[`${s}FilledColor`],backgroundColor:i.vars.palette.Alert[`${s}FilledBg`]}:{backgroundColor:i.palette.mode==="dark"?i.palette[s].dark:i.palette[s].main,color:i.palette.getContrastText(i.palette[s].main)}}}))]}})),VE=ee("div",{name:"MuiAlert",slot:"Icon"})({marginRight:12,padding:"7px 0",display:"flex",fontSize:22,opacity:.9}),WE=ee("div",{name:"MuiAlert",slot:"Message"})({padding:"8px 0",minWidth:0,overflow:"auto"}),qE=ee("div",{name:"MuiAlert",slot:"Action"})({display:"flex",alignItems:"flex-start",padding:"4px 0 0 16px",marginLeft:"auto",marginRight:-8}),Am={success:B.jsx($E,{fontSize:"inherit"}),warning:B.jsx(BE,{fontSize:"inherit"}),error:B.jsx(jE,{fontSize:"inherit"}),info:B.jsx(HE,{fontSize:"inherit"})},XE=I.forwardRef(function(t,e){const s=Nn({props:t,name:"MuiAlert"}),{action:n,children:r,className:o,closeText:l="Close",color:c,components:h={},componentsProps:u={},icon:d,iconMapping:f=Am,onClose:p,role:y="alert",severity:g="success",slotProps:v={},slots:w={},variant:_="standard",...C}=s,x={...s,color:c,severity:g,variant:_,colorSeverity:c||g},E=GE(x),T={slots:{closeButton:h.CloseButton,closeIcon:h.CloseIcon,...w},slotProps:{...u,...v}},[P,M]=Yo("root",{ref:e,shouldForwardComponentProp:!0,className:Ot(E.root,o),elementType:UE,externalForwardedProps:{...T,...C},ownerState:x,additionalProps:{role:y,elevation:0}}),[D,S]=Yo("icon",{className:E.icon,elementType:VE,externalForwardedProps:T,ownerState:x}),[k,N]=Yo("message",{className:E.message,elementType:WE,externalForwardedProps:T,ownerState:x}),[H,z]=Yo("action",{className:E.action,elementType:qE,externalForwardedProps:T,ownerState:x}),[q,F]=Yo("closeButton",{elementType:Of,externalForwardedProps:T,ownerState:x}),[j,lt]=Yo("closeIcon",{elementType:zE,externalForwardedProps:T,ownerState:x});return B.jsxs(P,{...M,children:[d!==!1?B.jsx(D,{...S,children:d||f[g]||Am[g]}):null,B.jsx(k,{...N,children:r}),n!=null?B.jsx(H,{...z,children:n}):null,n==null&&p?B.jsx(H,{...z,children:B.jsx(q,{size:"small","aria-label":l,title:l,color:"inherit",onClick:p,...F,children:B.jsx(j,{fontSize:"small",...lt})})}):null]})});function YE(i){return Dn("MuiTypography",i)}On("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);const KE={primary:!0,secondary:!0,error:!0,info:!0,success:!0,warning:!0,textPrimary:!0,textSecondary:!0,textDisabled:!0},QE=BS(),JE=i=>{const{align:t,gutterBottom:e,noWrap:s,paragraph:n,variant:r,classes:o}=i,l={root:["root",r,i.align!=="inherit"&&`align${pt(t)}`,e&&"gutterBottom",s&&"noWrap",n&&"paragraph"]};return _i(l,YE,o)},ZE=ee("span",{name:"MuiTypography",slot:"Root",overridesResolver:(i,t)=>{const{ownerState:e}=i;return[t.root,e.variant&&t[e.variant],e.align!=="inherit"&&t[`align${pt(e.align)}`],e.noWrap&&t.noWrap,e.gutterBottom&&t.gutterBottom,e.paragraph&&t.paragraph]}})(wi(({theme:i})=>{var t;return{margin:0,variants:[{props:{variant:"inherit"},style:{font:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}},...Object.entries(i.typography).filter(([e,s])=>e!=="inherit"&&s&&typeof s=="object").map(([e,s])=>({props:{variant:e},style:s})),...Object.entries(i.palette).filter(ur()).map(([e])=>({props:{color:e},style:{color:(i.vars||i).palette[e].main}})),...Object.entries(((t=i.palette)==null?void 0:t.text)||{}).filter(([,e])=>typeof e=="string").map(([e])=>({props:{color:`text${pt(e)}`},style:{color:(i.vars||i).palette.text[e]}})),{props:({ownerState:e})=>e.align!=="inherit",style:{textAlign:"var(--Typography-textAlign)"}},{props:({ownerState:e})=>e.noWrap,style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},{props:({ownerState:e})=>e.gutterBottom,style:{marginBottom:"0.35em"}},{props:({ownerState:e})=>e.paragraph,style:{marginBottom:16}}]}})),wm={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},ou=I.forwardRef(function(t,e){const{color:s,...n}=Nn({props:t,name:"MuiTypography"}),r=!KE[s],o=QE({...n,...r&&{color:s}}),{align:l="inherit",className:c,component:h,gutterBottom:u=!1,noWrap:d=!1,paragraph:f=!1,variant:p="body1",variantMapping:y=wm,...g}=o,v={...o,align:l,color:s,className:c,component:h,gutterBottom:u,noWrap:d,paragraph:f,variant:p,variantMapping:y},w=h||(f?"p":y[p]||wm[p])||"span",_=JE(v);return B.jsx(ZE,{as:w,ref:e,className:Ot(_.root,c),...g,ownerState:v,style:{...l!=="inherit"&&{"--Typography-textAlign":l},...g.style}})}),t1=On("MuiBox",["root"]),e1=Ny(),hf=Tw({themeId:Qp,defaultTheme:e1,defaultClassName:t1.root,generateClassName:_y.generate});function s1(i){return Dn("MuiButton",i)}const Ar=On("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","colorPrimary","colorSecondary","colorSuccess","colorError","colorInfo","colorWarning","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","icon","iconSizeSmall","iconSizeMedium","iconSizeLarge","loading","loadingWrapper","loadingIconPlaceholder","loadingIndicator","loadingPositionCenter","loadingPositionStart","loadingPositionEnd"]),n1=I.createContext({}),i1=I.createContext(void 0),r1=i=>{const{color:t,disableElevation:e,fullWidth:s,size:n,variant:r,loading:o,loadingPosition:l,classes:c}=i,h={root:["root",o&&"loading",r,`${r}${pt(t)}`,`size${pt(n)}`,`${r}Size${pt(n)}`,`color${pt(t)}`,e&&"disableElevation",s&&"fullWidth",o&&`loadingPosition${pt(l)}`],startIcon:["icon","startIcon",`iconSize${pt(n)}`],endIcon:["icon","endIcon",`iconSize${pt(n)}`],loadingIndicator:["loadingIndicator"],loadingWrapper:["loadingWrapper"]},u=_i(h,s1,c);return{...c,...u}},Gy=[{props:{size:"small"},style:{"& > *:nth-of-type(1)":{fontSize:18}}},{props:{size:"medium"},style:{"& > *:nth-of-type(1)":{fontSize:20}}},{props:{size:"large"},style:{"& > *:nth-of-type(1)":{fontSize:22}}}],o1=ee(zy,{shouldForwardProp:i=>$y(i)||i==="classes",name:"MuiButton",slot:"Root",overridesResolver:(i,t)=>{const{ownerState:e}=i;return[t.root,t[e.variant],t[`${e.variant}${pt(e.color)}`],t[`size${pt(e.size)}`],t[`${e.variant}Size${pt(e.size)}`],e.color==="inherit"&&t.colorInherit,e.disableElevation&&t.disableElevation,e.fullWidth&&t.fullWidth,e.loading&&t.loading]}})(wi(({theme:i})=>{const t=i.palette.mode==="light"?i.palette.grey[300]:i.palette.grey[800],e=i.palette.mode==="light"?i.palette.grey.A100:i.palette.grey[700];return{...i.typography.button,minWidth:64,padding:"6px 16px",border:0,borderRadius:(i.vars||i).shape.borderRadius,transition:i.transitions.create(["background-color","box-shadow","border-color","color"],{duration:i.transitions.duration.short}),"&:hover":{textDecoration:"none"},[`&.${Ar.disabled}`]:{color:(i.vars||i).palette.action.disabled},variants:[{props:{variant:"contained"},style:{color:"var(--variant-containedColor)",backgroundColor:"var(--variant-containedBg)",boxShadow:(i.vars||i).shadows[2],"&:hover":{boxShadow:(i.vars||i).shadows[4],"@media (hover: none)":{boxShadow:(i.vars||i).shadows[2]}},"&:active":{boxShadow:(i.vars||i).shadows[8]},[`&.${Ar.focusVisible}`]:{boxShadow:(i.vars||i).shadows[6]},[`&.${Ar.disabled}`]:{color:(i.vars||i).palette.action.disabled,boxShadow:(i.vars||i).shadows[0],backgroundColor:(i.vars||i).palette.action.disabledBackground}}},{props:{variant:"outlined"},style:{padding:"5px 15px",border:"1px solid currentColor",borderColor:"var(--variant-outlinedBorder, currentColor)",backgroundColor:"var(--variant-outlinedBg)",color:"var(--variant-outlinedColor)",[`&.${Ar.disabled}`]:{border:`1px solid ${(i.vars||i).palette.action.disabledBackground}`}}},{props:{variant:"text"},style:{padding:"6px 8px",color:"var(--variant-textColor)",backgroundColor:"var(--variant-textBg)"}},...Object.entries(i.palette).filter(ur()).map(([s])=>({props:{color:s},style:{"--variant-textColor":(i.vars||i).palette[s].main,"--variant-outlinedColor":(i.vars||i).palette[s].main,"--variant-outlinedBorder":i.vars?`rgba(${i.vars.palette[s].mainChannel} / 0.5)`:Rn(i.palette[s].main,.5),"--variant-containedColor":(i.vars||i).palette[s].contrastText,"--variant-containedBg":(i.vars||i).palette[s].main,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":(i.vars||i).palette[s].dark,"--variant-textBg":i.vars?`rgba(${i.vars.palette[s].mainChannel} / ${i.vars.palette.action.hoverOpacity})`:Rn(i.palette[s].main,i.palette.action.hoverOpacity),"--variant-outlinedBorder":(i.vars||i).palette[s].main,"--variant-outlinedBg":i.vars?`rgba(${i.vars.palette[s].mainChannel} / ${i.vars.palette.action.hoverOpacity})`:Rn(i.palette[s].main,i.palette.action.hoverOpacity)}}}})),{props:{color:"inherit"},style:{color:"inherit",borderColor:"currentColor","--variant-containedBg":i.vars?i.vars.palette.Button.inheritContainedBg:t,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":i.vars?i.vars.palette.Button.inheritContainedHoverBg:e,"--variant-textBg":i.vars?`rgba(${i.vars.palette.text.primaryChannel} / ${i.vars.palette.action.hoverOpacity})`:Rn(i.palette.text.primary,i.palette.action.hoverOpacity),"--variant-outlinedBg":i.vars?`rgba(${i.vars.palette.text.primaryChannel} / ${i.vars.palette.action.hoverOpacity})`:Rn(i.palette.text.primary,i.palette.action.hoverOpacity)}}}},{props:{size:"small",variant:"text"},style:{padding:"4px 5px",fontSize:i.typography.pxToRem(13)}},{props:{size:"large",variant:"text"},style:{padding:"8px 11px",fontSize:i.typography.pxToRem(15)}},{props:{size:"small",variant:"outlined"},style:{padding:"3px 9px",fontSize:i.typography.pxToRem(13)}},{props:{size:"large",variant:"outlined"},style:{padding:"7px 21px",fontSize:i.typography.pxToRem(15)}},{props:{size:"small",variant:"contained"},style:{padding:"4px 10px",fontSize:i.typography.pxToRem(13)}},{props:{size:"large",variant:"contained"},style:{padding:"8px 22px",fontSize:i.typography.pxToRem(15)}},{props:{disableElevation:!0},style:{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${Ar.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${Ar.disabled}`]:{boxShadow:"none"}}},{props:{fullWidth:!0},style:{width:"100%"}},{props:{loadingPosition:"center"},style:{transition:i.transitions.create(["background-color","box-shadow","border-color"],{duration:i.transitions.duration.short}),[`&.${Ar.loading}`]:{color:"transparent"}}}]}})),a1=ee("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(i,t)=>{const{ownerState:e}=i;return[t.startIcon,e.loading&&t.startIconLoadingStart,t[`iconSize${pt(e.size)}`]]}})(({theme:i})=>({display:"inherit",marginRight:8,marginLeft:-4,variants:[{props:{size:"small"},style:{marginLeft:-2}},{props:{loadingPosition:"start",loading:!0},style:{transition:i.transitions.create(["opacity"],{duration:i.transitions.duration.short}),opacity:0}},{props:{loadingPosition:"start",loading:!0,fullWidth:!0},style:{marginRight:-8}},...Gy]})),l1=ee("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(i,t)=>{const{ownerState:e}=i;return[t.endIcon,e.loading&&t.endIconLoadingEnd,t[`iconSize${pt(e.size)}`]]}})(({theme:i})=>({display:"inherit",marginRight:-4,marginLeft:8,variants:[{props:{size:"small"},style:{marginRight:-2}},{props:{loadingPosition:"end",loading:!0},style:{transition:i.transitions.create(["opacity"],{duration:i.transitions.duration.short}),opacity:0}},{props:{loadingPosition:"end",loading:!0,fullWidth:!0},style:{marginLeft:-8}},...Gy]})),c1=ee("span",{name:"MuiButton",slot:"LoadingIndicator"})(({theme:i})=>({display:"none",position:"absolute",visibility:"visible",variants:[{props:{loading:!0},style:{display:"flex"}},{props:{loadingPosition:"start"},style:{left:14}},{props:{loadingPosition:"start",size:"small"},style:{left:10}},{props:{variant:"text",loadingPosition:"start"},style:{left:6}},{props:{loadingPosition:"center"},style:{left:"50%",transform:"translate(-50%)",color:(i.vars||i).palette.action.disabled}},{props:{loadingPosition:"end"},style:{right:14}},{props:{loadingPosition:"end",size:"small"},style:{right:10}},{props:{variant:"text",loadingPosition:"end"},style:{right:6}},{props:{loadingPosition:"start",fullWidth:!0},style:{position:"relative",left:-10}},{props:{loadingPosition:"end",fullWidth:!0},style:{position:"relative",right:-10}}]})),Sm=ee("span",{name:"MuiButton",slot:"LoadingIconPlaceholder"})({display:"inline-block",width:"1em",height:"1em"}),uf=I.forwardRef(function(t,e){const s=I.useContext(n1),n=I.useContext(i1),r=ic(s,t),o=Nn({props:r,name:"MuiButton"}),{children:l,color:c="primary",component:h="button",className:u,disabled:d=!1,disableElevation:f=!1,disableFocusRipple:p=!1,endIcon:y,focusVisibleClassName:g,fullWidth:v=!1,id:w,loading:_=null,loadingIndicator:C,loadingPosition:x="center",size:E="medium",startIcon:T,type:P,variant:M="text",...D}=o,S=By(w),k=C??B.jsx(Zu,{"aria-labelledby":S,color:"inherit",size:16}),N={...o,color:c,component:h,disabled:d,disableElevation:f,disableFocusRipple:p,fullWidth:v,loading:_,loadingIndicator:k,loadingPosition:x,size:E,type:P,variant:M},H=r1(N),z=(T||_&&x==="start")&&B.jsx(a1,{className:H.startIcon,ownerState:N,children:T||B.jsx(Sm,{className:H.loadingIconPlaceholder,ownerState:N})}),q=(y||_&&x==="end")&&B.jsx(l1,{className:H.endIcon,ownerState:N,children:y||B.jsx(Sm,{className:H.loadingIconPlaceholder,ownerState:N})}),F=n||"",j=typeof _=="boolean"?B.jsx("span",{className:H.loadingWrapper,style:{display:"contents"},children:_&&B.jsx(c1,{className:H.loadingIndicator,ownerState:N,children:k})}):null;return B.jsxs(o1,{ownerState:N,className:Ot(s.className,H.root,u,F),component:h,disabled:d||_,focusRipple:!p,focusVisibleClassName:Ot(H.focusVisible,g),ref:e,type:P,id:_?S:w,...D,classes:H,children:[z,x!=="end"&&j,l,x==="end"&&j,q]})}),Em=oS({createStyledComponent:ee("div",{name:"MuiStack",slot:"Root"}),useThemeProps:i=>Nn({props:i,name:"MuiStack"})}),h1="http://localhost:8000",u1=br(B.jsx("path",{d:"M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96M14 13v4h-4v-4H7l5-5 5 5z"})),d1=br(B.jsx("path",{d:"M15.41 7.41 14 6l-6 6 6 6 1.41-1.41L10.83 12z"})),f1=br(B.jsx("path",{d:"M10 6 8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"})),Ge=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),Nf=[.001,0,0,.001,0,0],df=1.35,ms={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},kn={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},p1="pdfjs_internal_editor_",et={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,SIGNATURE:101},ft={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35,DRAW_STEP:41},Uy={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Re={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},Zl={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},Yt={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},Ko={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},Vh={ERRORS:0,WARNINGS:1,INFOS:5},ac={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},au={moveTo:0,lineTo:1,curveTo:2,closePath:3},Vy={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let Hd=Vh.WARNINGS;function g1(i){Number.isInteger(i)&&(Hd=i)}function m1(){return Hd}function zd(i){Hd>=Vh.INFOS&&console.log(`Info: ${i}`)}function st(i){Hd>=Vh.WARNINGS&&console.log(`Warning: ${i}`)}function Pt(i){throw new Error(i)}function re(i,t){i||Pt(t)}function y1(i){switch(i==null?void 0:i.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function gg(i,t=null,e=null){if(!i)return null;if(e&&typeof i=="string"){if(e.addDefaultProtocol&&i.startsWith("www.")){const n=i.match(/\./g);(n==null?void 0:n.length)>=2&&(i=`http://${i}`)}if(e.tryConvertEncoding)try{i=S1(i)}catch{}}const s=t?URL.parse(i,t):URL.parse(i);return y1(s)?s:null}function mg(i,t,e=!1){const s=URL.parse(i);return s?(s.hash=t,s.href):e&&gg(i,"http://example.com")?i.split("#",1)[0]+`${t?`#${t}`:""}`:""}function dt(i,t,e,s=!1){return Object.defineProperty(i,t,{value:e,enumerable:!s,configurable:!0,writable:!1}),e}const jo=function(){function t(e,s){this.message=e,this.name=s}return t.prototype=new Error,t.constructor=t,t}();class xm extends jo{constructor(t,e){super(t,"PasswordException"),this.code=e}}class ff extends jo{constructor(t,e){super(t,"UnknownErrorException"),this.details=e}}class td extends jo{constructor(t){super(t,"InvalidPDFException")}}class lc extends jo{constructor(t,e,s){super(t,"ResponseException"),this.status=e,this.missing=s}}class b1 extends jo{constructor(t){super(t,"FormatError")}}class Si extends jo{constructor(t){super(t,"AbortException")}}function Wy(i){(typeof i!="object"||(i==null?void 0:i.length)===void 0)&&Pt("Invalid argument for bytesToString");const t=i.length,e=8192;if(t<e)return String.fromCharCode.apply(null,i);const s=[];for(let n=0;n<t;n+=e){const r=Math.min(n+e,t),o=i.subarray(n,r);s.push(String.fromCharCode.apply(null,o))}return s.join("")}function Wh(i){typeof i!="string"&&Pt("Invalid argument for stringToBytes");const t=i.length,e=new Uint8Array(t);for(let s=0;s<t;++s)e[s]=i.charCodeAt(s)&255;return e}function v1(i){return String.fromCharCode(i>>24&255,i>>16&255,i>>8&255,i&255)}function A1(){const i=new Uint8Array(4);return i[0]=1,new Uint32Array(i.buffer,0,1)[0]===1}function w1(){try{return new Function(""),!0}catch{return!1}}class ye{static get isLittleEndian(){return dt(this,"isLittleEndian",A1())}static get isEvalSupported(){return dt(this,"isEvalSupported",w1())}static get isOffscreenCanvasSupported(){return dt(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return dt(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){const{platform:t,userAgent:e}=navigator;return dt(this,"platform",{isAndroid:e.includes("Android"),isLinux:t.includes("Linux"),isMac:t.includes("Mac"),isWindows:t.includes("Win"),isFirefox:e.includes("Firefox")})}static get isCSSRoundSupported(){var t,e;return dt(this,"isCSSRoundSupported",(e=(t=globalThis.CSS)==null?void 0:t.supports)==null?void 0:e.call(t,"width: round(1.5px, 1px)"))}}const pf=Array.from(Array(256).keys(),i=>i.toString(16).padStart(2,"0"));var vi,vu,Ff;class Q{static makeHexColor(t,e,s){return`#${pf[t]}${pf[e]}${pf[s]}`}static scaleMinMax(t,e){let s;t[0]?(t[0]<0&&(s=e[0],e[0]=e[2],e[2]=s),e[0]*=t[0],e[2]*=t[0],t[3]<0&&(s=e[1],e[1]=e[3],e[3]=s),e[1]*=t[3],e[3]*=t[3]):(s=e[0],e[0]=e[1],e[1]=s,s=e[2],e[2]=e[3],e[3]=s,t[1]<0&&(s=e[1],e[1]=e[3],e[3]=s),e[1]*=t[1],e[3]*=t[1],t[2]<0&&(s=e[0],e[0]=e[2],e[2]=s),e[0]*=t[2],e[2]*=t[2]),e[0]+=t[4],e[1]+=t[5],e[2]+=t[4],e[3]+=t[5]}static transform(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}static applyTransform(t,e,s=0){const n=t[s],r=t[s+1];t[s]=n*e[0]+r*e[2]+e[4],t[s+1]=n*e[1]+r*e[3]+e[5]}static applyTransformToBezier(t,e,s=0){const n=e[0],r=e[1],o=e[2],l=e[3],c=e[4],h=e[5];for(let u=0;u<6;u+=2){const d=t[s+u],f=t[s+u+1];t[s+u]=d*n+f*o+c,t[s+u+1]=d*r+f*l+h}}static applyInverseTransform(t,e){const s=t[0],n=t[1],r=e[0]*e[3]-e[1]*e[2];t[0]=(s*e[3]-n*e[2]+e[2]*e[5]-e[4]*e[3])/r,t[1]=(-s*e[1]+n*e[0]+e[4]*e[1]-e[5]*e[0])/r}static axialAlignedBoundingBox(t,e,s){const n=e[0],r=e[1],o=e[2],l=e[3],c=e[4],h=e[5],u=t[0],d=t[1],f=t[2],p=t[3];let y=n*u+c,g=y,v=n*f+c,w=v,_=l*d+h,C=_,x=l*p+h,E=x;if(r!==0||o!==0){const T=r*u,P=r*f,M=o*d,D=o*p;y+=M,w+=M,v+=D,g+=D,_+=T,E+=T,x+=P,C+=P}s[0]=Math.min(s[0],y,v,g,w),s[1]=Math.min(s[1],_,x,C,E),s[2]=Math.max(s[2],y,v,g,w),s[3]=Math.max(s[3],_,x,C,E)}static inverseTransform(t){const e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}static singularValueDecompose2dScale(t,e){const s=t[0],n=t[1],r=t[2],o=t[3],l=s**2+n**2,c=s*r+n*o,h=r**2+o**2,u=(l+h)/2,d=Math.sqrt(u**2-(l*h-c**2));e[0]=Math.sqrt(u+d||1),e[1]=Math.sqrt(u-d||1)}static normalizeRect(t){const e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}static intersect(t,e){const s=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),n=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));if(s>n)return null;const r=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),o=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));return r>o?null:[s,r,n,o]}static pointBoundingBox(t,e,s){s[0]=Math.min(s[0],t),s[1]=Math.min(s[1],e),s[2]=Math.max(s[2],t),s[3]=Math.max(s[3],e)}static rectBoundingBox(t,e,s,n,r){r[0]=Math.min(r[0],t,s),r[1]=Math.min(r[1],e,n),r[2]=Math.max(r[2],t,s),r[3]=Math.max(r[3],e,n)}static bezierBoundingBox(t,e,s,n,r,o,l,c,h){h[0]=Math.min(h[0],t,l),h[1]=Math.min(h[1],e,c),h[2]=Math.max(h[2],t,l),h[3]=Math.max(h[3],e,c),A(this,vi,Ff).call(this,t,s,r,l,e,n,o,c,3*(-t+3*(s-r)+l),6*(t-2*s+r),3*(s-t),h),A(this,vi,Ff).call(this,t,s,r,l,e,n,o,c,3*(-e+3*(n-o)+c),6*(e-2*n+o),3*(n-e),h)}}vi=new WeakSet,vu=function(t,e,s,n,r,o,l,c,h,u){if(h<=0||h>=1)return;const d=1-h,f=h*h,p=f*h,y=d*(d*(d*t+3*h*e)+3*f*s)+p*n,g=d*(d*(d*r+3*h*o)+3*f*l)+p*c;u[0]=Math.min(u[0],y),u[1]=Math.min(u[1],g),u[2]=Math.max(u[2],y),u[3]=Math.max(u[3],g)},Ff=function(t,e,s,n,r,o,l,c,h,u,d,f){if(Math.abs(h)<1e-12){Math.abs(u)>=1e-12&&A(this,vi,vu).call(this,t,e,s,n,r,o,l,c,-d/u,f);return}const p=u**2-4*d*h;if(p<0)return;const y=Math.sqrt(p),g=2*h;A(this,vi,vu).call(this,t,e,s,n,r,o,l,c,(-u+y)/g,f),A(this,vi,vu).call(this,t,e,s,n,r,o,l,c,(-u-y)/g,f)},b(Q,vi);function S1(i){return decodeURIComponent(escape(i))}let gf=null,_m=null;function qy(i){return gf||(gf=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,_m=new Map([["ﬅ","ſt"]])),i.replaceAll(gf,(t,e,s)=>e?e.normalize("NFKC"):_m.get(s))}function yg(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const i=new Uint8Array(32);return crypto.getRandomValues(i),Wy(i)}const bg="pdfjs_internal_id_";function E1(i,t,e){if(!Array.isArray(e)||e.length<2)return!1;const[s,n,...r]=e;if(!i(s)&&!Number.isInteger(s)||!t(n))return!1;const o=r.length;let l=!0;switch(n.name){case"XYZ":if(o<2||o>3)return!1;break;case"Fit":case"FitB":return o===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(o>1)return!1;break;case"FitR":if(o!==4)return!1;l=!1;break;default:return!1}for(const c of r)if(!(typeof c=="number"||l&&c===null))return!1;return!0}function Oe(i,t,e){return Math.min(Math.max(i,t),e)}function Xy(i){return Uint8Array.prototype.toBase64?i.toBase64():btoa(Wy(i))}function x1(i){return Uint8Array.fromBase64?Uint8Array.fromBase64(i):Wh(atob(i))}typeof Promise.try!="function"&&(Promise.try=function(i,...t){return new Promise(e=>{e(i(...t))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(i){return i.reduce((t,e)=>t+e,0)});const Bn="http://www.w3.org/2000/svg",_r=class _r{};$(_r,"CSS",96),$(_r,"PDF",72),$(_r,"PDF_TO_CSS_UNITS",_r.CSS/_r.PDF);let Ei=_r;async function El(i,t="text"){if(Ll(i,document.baseURI)){const e=await fetch(i);if(!e.ok)throw new Error(e.statusText);switch(t){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"json":return e.json()}return e.text()}return new Promise((e,s)=>{const n=new XMLHttpRequest;n.open("GET",i,!0),n.responseType=t,n.onreadystatechange=()=>{if(n.readyState===XMLHttpRequest.DONE){if(n.status===200||n.status===0){switch(t){case"arraybuffer":case"blob":case"json":e(n.response);return}e(n.responseText);return}s(new Error(n.statusText))}},n.send(null)})}class qh{constructor({viewBox:t,userUnit:e,scale:s,rotation:n,offsetX:r=0,offsetY:o=0,dontFlip:l=!1}){this.viewBox=t,this.userUnit=e,this.scale=s,this.rotation=n,this.offsetX=r,this.offsetY=o,s*=e;const c=(t[2]+t[0])/2,h=(t[3]+t[1])/2;let u,d,f,p;switch(n%=360,n<0&&(n+=360),n){case 180:u=-1,d=0,f=0,p=1;break;case 90:u=0,d=1,f=1,p=0;break;case 270:u=0,d=-1,f=-1,p=0;break;case 0:u=1,d=0,f=0,p=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}l&&(f=-f,p=-p);let y,g,v,w;u===0?(y=Math.abs(h-t[1])*s+r,g=Math.abs(c-t[0])*s+o,v=(t[3]-t[1])*s,w=(t[2]-t[0])*s):(y=Math.abs(c-t[0])*s+r,g=Math.abs(h-t[1])*s+o,v=(t[2]-t[0])*s,w=(t[3]-t[1])*s),this.transform=[u*s,d*s,f*s,p*s,y-u*s*c-f*s*h,g-d*s*c-p*s*h],this.width=v,this.height=w}get rawDims(){const t=this.viewBox;return dt(this,"rawDims",{pageWidth:t[2]-t[0],pageHeight:t[3]-t[1],pageX:t[0],pageY:t[1]})}clone({scale:t=this.scale,rotation:e=this.rotation,offsetX:s=this.offsetX,offsetY:n=this.offsetY,dontFlip:r=!1}={}){return new qh({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:t,rotation:e,offsetX:s,offsetY:n,dontFlip:r})}convertToViewportPoint(t,e){const s=[t,e];return Q.applyTransform(s,this.transform),s}convertToViewportRectangle(t){const e=[t[0],t[1]];Q.applyTransform(e,this.transform);const s=[t[2],t[3]];return Q.applyTransform(s,this.transform),[e[0],e[1],s[0],s[1]]}convertToPdfPoint(t,e){const s=[t,e];return Q.applyInverseTransform(s,this.transform),s}}class Gd extends jo{constructor(t,e=0){super(t,"RenderingCancelledException"),this.extraDelay=e}}function Xh(i){const t=i.length;let e=0;for(;e<t&&i[e].trim()==="";)e++;return i.substring(e,e+5).toLowerCase()==="data:"}function Ud(i){return typeof i=="string"&&/\.pdf$/i.test(i)}function Yy(i){return[i]=i.split(/[#?]/,1),i.substring(i.lastIndexOf("/")+1)}function Ky(i,t="document.pdf"){if(typeof i!="string")return t;if(Xh(i))return st('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const e=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,s=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,n=e.exec(i);let r=s.exec(n[1])||s.exec(n[2])||s.exec(n[3]);if(r&&(r=r[0],r.includes("%")))try{r=s.exec(decodeURIComponent(r))[0]}catch{}return r||t}class Cm{constructor(){$(this,"started",Object.create(null));$(this,"times",[])}time(t){t in this.started&&st(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||st(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let e=0;for(const{name:s}of this.times)e=Math.max(s.length,e);for(const{name:s,start:n,end:r}of this.times)t.push(`${s.padEnd(e)} ${r-n}ms
`);return t.join("")}}function Ll(i,t){const e=t?URL.parse(i,t):URL.parse(i);return(e==null?void 0:e.protocol)==="http:"||(e==null?void 0:e.protocol)==="https:"}function Fs(i){i.preventDefault()}function Jt(i){i.preventDefault(),i.stopPropagation()}function _1(i){console.log("Deprecated API usage: "+i)}var pc;class Vd{static toDateObject(t){if(!t||typeof t!="string")return null;a(this,pc)||m(this,pc,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const e=a(this,pc).exec(t);if(!e)return null;const s=parseInt(e[1],10);let n=parseInt(e[2],10);n=n>=1&&n<=12?n-1:0;let r=parseInt(e[3],10);r=r>=1&&r<=31?r:1;let o=parseInt(e[4],10);o=o>=0&&o<=23?o:0;let l=parseInt(e[5],10);l=l>=0&&l<=59?l:0;let c=parseInt(e[6],10);c=c>=0&&c<=59?c:0;const h=e[7]||"Z";let u=parseInt(e[8],10);u=u>=0&&u<=23?u:0;let d=parseInt(e[9],10)||0;return d=d>=0&&d<=59?d:0,h==="-"?(o+=u,l+=d):h==="+"&&(o-=u,l-=d),new Date(Date.UTC(s,n,r,o,l,c))}}pc=new WeakMap,b(Vd,pc);function Qy(i,{scale:t=1,rotation:e=0}){const{width:s,height:n}=i.attributes.style,r=[0,0,parseInt(s),parseInt(n)];return new qh({viewBox:r,userUnit:1,scale:t,rotation:e})}function vg(i){if(i.startsWith("#")){const t=parseInt(i.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return i.startsWith("rgb(")?i.slice(4,-1).split(",").map(t=>parseInt(t)):i.startsWith("rgba(")?i.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(st(`Not a valid color format: "${i}"`),[0,0,0])}function C1(i){const t=document.createElement("span");t.style.visibility="hidden",t.style.colorScheme="only light",document.body.append(t);for(const e of i.keys()){t.style.color=e;const s=window.getComputedStyle(t).color;i.set(e,vg(s))}t.remove()}function Ut(i){const{a:t,b:e,c:s,d:n,e:r,f:o}=i.getTransform();return[t,e,s,n,r,o]}function an(i){const{a:t,b:e,c:s,d:n,e:r,f:o}=i.getTransform().invertSelf();return[t,e,s,n,r,o]}function fr(i,t,e=!1,s=!0){if(t instanceof qh){const{pageWidth:n,pageHeight:r}=t.rawDims,{style:o}=i,l=ye.isCSSRoundSupported,c=`var(--total-scale-factor) * ${n}px`,h=`var(--total-scale-factor) * ${r}px`,u=l?`round(down, ${c}, var(--scale-round-x))`:`calc(${c})`,d=l?`round(down, ${h}, var(--scale-round-y))`:`calc(${h})`;!e||t.rotation%180===0?(o.width=u,o.height=d):(o.width=d,o.height=u)}s&&i.setAttribute("data-main-rotation",t.rotation)}class nn{constructor(){const{pixelRatio:t}=nn;this.sx=t,this.sy=t}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(t,e,s,n,r=-1){let o=1/0,l=1/0,c=1/0;s=nn.capPixels(s,r),s>0&&(o=Math.sqrt(s/(t*e))),n!==-1&&(l=n/t,c=n/e);const h=Math.min(o,l,c);return this.sx>h||this.sy>h?(this.sx=h,this.sy=h,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(t,e){if(e>=0){const s=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+e/100));return t>0?Math.min(t,s):s}return t}}const ed=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];var Pi,Pr,xs,Ri,gc,da,mc,ld,Jy,Te,Zy,tb,Dl,eb,Au;const zn=class zn{constructor(t){b(this,Te);b(this,Pi,null);b(this,Pr,null);b(this,xs);b(this,Ri,null);b(this,gc,null);b(this,da,null);m(this,xs,t),a(zn,mc)||m(zn,mc,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"}))}render(){const t=m(this,Pi,document.createElement("div"));t.classList.add("editToolbar","hidden"),t.setAttribute("role","toolbar");const e=a(this,xs)._uiManager._signal;t.addEventListener("contextmenu",Fs,{signal:e}),t.addEventListener("pointerdown",A(zn,ld,Jy),{signal:e});const s=m(this,Ri,document.createElement("div"));s.className="buttons",t.append(s);const n=a(this,xs).toolbarPosition;if(n){const{style:r}=t,o=a(this,xs)._uiManager.direction==="ltr"?1-n[0]:n[0];r.insetInlineEnd=`${100*o}%`,r.top=`calc(${100*n[1]}% + var(--editor-toolbar-vert-offset))`}return A(this,Te,eb).call(this),t}get div(){return a(this,Pi)}hide(){var t;a(this,Pi).classList.add("hidden"),(t=a(this,Pr))==null||t.hideDropdown()}show(){var t;a(this,Pi).classList.remove("hidden"),(t=a(this,gc))==null||t.shown()}async addAltText(t){const e=await t.render();A(this,Te,Dl).call(this,e),a(this,Ri).prepend(e,a(this,Te,Au)),m(this,gc,t)}addColorPicker(t){m(this,Pr,t);const e=t.renderButton();A(this,Te,Dl).call(this,e),a(this,Ri).prepend(e,a(this,Te,Au))}async addEditSignatureButton(t){const e=m(this,da,await t.renderEditButton(a(this,xs)));A(this,Te,Dl).call(this,e),a(this,Ri).prepend(e,a(this,Te,Au))}updateEditSignatureButton(t){a(this,da)&&(a(this,da).title=t)}remove(){var t;a(this,Pi).remove(),(t=a(this,Pr))==null||t.destroy(),m(this,Pr,null)}};Pi=new WeakMap,Pr=new WeakMap,xs=new WeakMap,Ri=new WeakMap,gc=new WeakMap,da=new WeakMap,mc=new WeakMap,ld=new WeakSet,Jy=function(t){t.stopPropagation()},Te=new WeakSet,Zy=function(t){a(this,xs)._focusEventsAllowed=!1,Jt(t)},tb=function(t){a(this,xs)._focusEventsAllowed=!0,Jt(t)},Dl=function(t){const e=a(this,xs)._uiManager._signal;t.addEventListener("focusin",A(this,Te,Zy).bind(this),{capture:!0,signal:e}),t.addEventListener("focusout",A(this,Te,tb).bind(this),{capture:!0,signal:e}),t.addEventListener("contextmenu",Fs,{signal:e})},eb=function(){const{editorType:t,_uiManager:e}=a(this,xs),s=document.createElement("button");s.className="delete",s.tabIndex=0,s.setAttribute("data-l10n-id",a(zn,mc)[t]),A(this,Te,Dl).call(this,s),s.addEventListener("click",n=>{e.delete()},{signal:e._signal}),a(this,Ri).append(s)},Au=function(){const t=document.createElement("div");return t.className="divider",t},b(zn,ld),b(zn,mc,null);let $f=zn;var yc,Rr,kr,gr,sb,nb,ib;class T1{constructor(t){b(this,gr);b(this,yc,null);b(this,Rr,null);b(this,kr);m(this,kr,t)}show(t,e,s){const[n,r]=A(this,gr,nb).call(this,e,s),{style:o}=a(this,Rr)||m(this,Rr,A(this,gr,sb).call(this));t.append(a(this,Rr)),o.insetInlineEnd=`${100*n}%`,o.top=`calc(${100*r}% + var(--editor-toolbar-vert-offset))`}hide(){a(this,Rr).remove()}}yc=new WeakMap,Rr=new WeakMap,kr=new WeakMap,gr=new WeakSet,sb=function(){const t=m(this,Rr,document.createElement("div"));t.className="editToolbar",t.setAttribute("role","toolbar"),t.addEventListener("contextmenu",Fs,{signal:a(this,kr)._signal});const e=m(this,yc,document.createElement("div"));return e.className="buttons",t.append(e),A(this,gr,ib).call(this),t},nb=function(t,e){let s=0,n=0;for(const r of t){const o=r.y+r.height;if(o<s)continue;const l=r.x+(e?r.width:0);if(o>s){n=l,s=o;continue}e?l>n&&(n=l):l<n&&(n=l)}return[e?1-n:n,s]},ib=function(){const t=document.createElement("button");t.className="highlightButton",t.tabIndex=0,t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const e=document.createElement("span");t.append(e),e.className="visuallyHidden",e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const s=a(this,kr)._signal;t.addEventListener("contextmenu",Fs,{signal:s}),t.addEventListener("click",()=>{a(this,kr).highlightSelection("floating_button")},{signal:s}),a(this,yc).append(t)};function rb(i,t,e){for(const s of e)t.addEventListener(s,i[s].bind(i))}var cd;class P1{constructor(){b(this,cd,0)}get id(){return`${p1}${Fe(this,cd)._++}`}}cd=new WeakMap;var fa,bc,Ie,pa,wu;const kg=class kg{constructor(){b(this,pa);b(this,fa,yg());b(this,bc,0);b(this,Ie,null)}static get _isSVGFittingCanvas(){const t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',s=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),n=new Image;n.src=t;const r=n.decode().then(()=>(s.drawImage(n,0,0,1,1,0,0,1,3),new Uint32Array(s.getImageData(0,0,1,1).data.buffer)[0]===0));return dt(this,"_isSVGFittingCanvas",r)}async getFromFile(t){const{lastModified:e,name:s,size:n,type:r}=t;return A(this,pa,wu).call(this,`${e}_${s}_${n}_${r}`,t)}async getFromUrl(t){return A(this,pa,wu).call(this,t,t)}async getFromBlob(t,e){const s=await e;return A(this,pa,wu).call(this,t,s)}async getFromId(t){a(this,Ie)||m(this,Ie,new Map);const e=a(this,Ie).get(t);if(!e)return null;if(e.bitmap)return e.refCounter+=1,e;if(e.file)return this.getFromFile(e.file);if(e.blobPromise){const{blobPromise:s}=e;return delete e.blobPromise,this.getFromBlob(e.id,s)}return this.getFromUrl(e.url)}getFromCanvas(t,e){a(this,Ie)||m(this,Ie,new Map);let s=a(this,Ie).get(t);if(s!=null&&s.bitmap)return s.refCounter+=1,s;const n=new OffscreenCanvas(e.width,e.height);return n.getContext("2d").drawImage(e,0,0),s={bitmap:n.transferToImageBitmap(),id:`image_${a(this,fa)}_${Fe(this,bc)._++}`,refCounter:1,isSvg:!1},a(this,Ie).set(t,s),a(this,Ie).set(s.id,s),s}getSvgUrl(t){const e=a(this,Ie).get(t);return e!=null&&e.isSvg?e.svgUrl:null}deleteId(t){var n;a(this,Ie)||m(this,Ie,new Map);const e=a(this,Ie).get(t);if(!e||(e.refCounter-=1,e.refCounter!==0))return;const{bitmap:s}=e;if(!e.url&&!e.file){const r=new OffscreenCanvas(s.width,s.height);r.getContext("bitmaprenderer").transferFromImageBitmap(s),e.blobPromise=r.convertToBlob()}(n=s.close)==null||n.call(s),e.bitmap=null}isValidId(t){return t.startsWith(`image_${a(this,fa)}_`)}};fa=new WeakMap,bc=new WeakMap,Ie=new WeakMap,pa=new WeakSet,wu=async function(t,e){a(this,Ie)||m(this,Ie,new Map);let s=a(this,Ie).get(t);if(s===null)return null;if(s!=null&&s.bitmap)return s.refCounter+=1,s;try{s||(s={bitmap:null,id:`image_${a(this,fa)}_${Fe(this,bc)._++}`,refCounter:0,isSvg:!1});let n;if(typeof e=="string"?(s.url=e,n=await El(e,"blob")):e instanceof File?n=s.file=e:e instanceof Blob&&(n=e),n.type==="image/svg+xml"){const r=kg._isSVGFittingCanvas,o=new FileReader,l=new Image,c=new Promise((h,u)=>{l.onload=()=>{s.bitmap=l,s.isSvg=!0,h()},o.onload=async()=>{const d=s.svgUrl=o.result;l.src=await r?`${d}#svgView(preserveAspectRatio(none))`:d},l.onerror=o.onerror=u});o.readAsDataURL(n),await c}else s.bitmap=await createImageBitmap(n);s.refCounter=1}catch(n){st(n),s=null}return a(this,Ie).set(t,s),s&&a(this,Ie).set(s.id,s),s};let Bf=kg;var Kt,ki,vc,Gt;class R1{constructor(t=128){b(this,Kt,[]);b(this,ki,!1);b(this,vc);b(this,Gt,-1);m(this,vc,t)}add({cmd:t,undo:e,post:s,mustExec:n,type:r=NaN,overwriteIfSameType:o=!1,keepUndo:l=!1}){if(n&&t(),a(this,ki))return;const c={cmd:t,undo:e,post:s,type:r};if(a(this,Gt)===-1){a(this,Kt).length>0&&(a(this,Kt).length=0),m(this,Gt,0),a(this,Kt).push(c);return}if(o&&a(this,Kt)[a(this,Gt)].type===r){l&&(c.undo=a(this,Kt)[a(this,Gt)].undo),a(this,Kt)[a(this,Gt)]=c;return}const h=a(this,Gt)+1;h===a(this,vc)?a(this,Kt).splice(0,1):(m(this,Gt,h),h<a(this,Kt).length&&a(this,Kt).splice(h)),a(this,Kt).push(c)}undo(){if(a(this,Gt)===-1)return;m(this,ki,!0);const{undo:t,post:e}=a(this,Kt)[a(this,Gt)];t(),e==null||e(),m(this,ki,!1),m(this,Gt,a(this,Gt)-1)}redo(){if(a(this,Gt)<a(this,Kt).length-1){m(this,Gt,a(this,Gt)+1),m(this,ki,!0);const{cmd:t,post:e}=a(this,Kt)[a(this,Gt)];t(),e==null||e(),m(this,ki,!1)}}hasSomethingToUndo(){return a(this,Gt)!==-1}hasSomethingToRedo(){return a(this,Gt)<a(this,Kt).length-1}cleanType(t){if(a(this,Gt)!==-1){for(let e=a(this,Gt);e>=0;e--)if(a(this,Kt)[e].type!==t){a(this,Kt).splice(e+1,a(this,Gt)-e),m(this,Gt,e);return}a(this,Kt).length=0,m(this,Gt,-1)}}destroy(){m(this,Kt,null)}}Kt=new WeakMap,ki=new WeakMap,vc=new WeakMap,Gt=new WeakMap;var hd,ob;class Yh{constructor(t){b(this,hd);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:e}=ye.platform;for(const[s,n,r={}]of t)for(const o of s){const l=o.startsWith("mac+");e&&l?(this.callbacks.set(o.slice(4),{callback:n,options:r}),this.allKeys.add(o.split("+").at(-1))):!e&&!l&&(this.callbacks.set(o,{callback:n,options:r}),this.allKeys.add(o.split("+").at(-1)))}}exec(t,e){if(!this.allKeys.has(e.key))return;const s=this.callbacks.get(A(this,hd,ob).call(this,e));if(!s)return;const{callback:n,options:{bubbles:r=!1,args:o=[],checker:l=null}}=s;l&&!l(t,e)||(n.bind(t,...o,e)(),r||Jt(e))}}hd=new WeakSet,ob=function(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const e=this.buffer.join("+");return this.buffer.length=0,e};const ud=class ud{get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return C1(t),dt(this,"_colors",t)}convert(t){const e=vg(t);if(!window.matchMedia("(forced-colors: active)").matches)return e;for(const[s,n]of this._colors)if(n.every((r,o)=>r===e[o]))return ud._colorsMapping.get(s);return e}getHexCode(t){const e=this._colors.get(t);return e?Q.makeHexColor(...e):t}};$(ud,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let jf=ud;var ga,ns,le,ve,ma,Un,ya,_s,Ii,Mi,ba,Ir,hn,zs,Mr,Ac,wc,va,Sc,un,Li,Aa,Di,dn,dd,Oi,Ec,Ni,Lr,Dr,Fi,xc,ue,xt,Vn,$i,Or,_c,Cc,Bi,fn,Wn,Tc,Cs,G,Su,Hf,ab,lb,Eu,cb,hb,ub,zf,db,Gf,Uf,fb,$e,jn,pb,gb,Vf,mb,Ol,Wf;const ra=class ra{constructor(t,e,s,n,r,o,l,c,h,u,d,f,p,y){b(this,G);b(this,ga,new AbortController);b(this,ns,null);b(this,le,new Map);b(this,ve,new Map);b(this,ma,null);b(this,Un,null);b(this,ya,null);b(this,_s,new R1);b(this,Ii,null);b(this,Mi,null);b(this,ba,0);b(this,Ir,new Set);b(this,hn,null);b(this,zs,null);b(this,Mr,new Set);$(this,"_editorUndoBar",null);b(this,Ac,!1);b(this,wc,!1);b(this,va,!1);b(this,Sc,null);b(this,un,null);b(this,Li,null);b(this,Aa,null);b(this,Di,!1);b(this,dn,null);b(this,dd,new P1);b(this,Oi,!1);b(this,Ec,!1);b(this,Ni,null);b(this,Lr,null);b(this,Dr,null);b(this,Fi,null);b(this,xc,null);b(this,ue,et.NONE);b(this,xt,new Set);b(this,Vn,null);b(this,$i,null);b(this,Or,null);b(this,_c,null);b(this,Cc,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});b(this,Bi,[0,0]);b(this,fn,null);b(this,Wn,null);b(this,Tc,null);b(this,Cs,null);const g=this._signal=a(this,ga).signal;m(this,Wn,t),m(this,Tc,e),m(this,ma,s),m(this,$i,n),this._eventBus=r,r._on("editingaction",this.onEditingAction.bind(this),{signal:g}),r._on("pagechanging",this.onPageChanging.bind(this),{signal:g}),r._on("scalechanging",this.onScaleChanging.bind(this),{signal:g}),r._on("rotationchanging",this.onRotationChanging.bind(this),{signal:g}),r._on("setpreference",this.onSetPreference.bind(this),{signal:g}),r._on("switchannotationeditorparams",v=>this.updateParams(v.type,v.value),{signal:g}),A(this,G,cb).call(this),A(this,G,fb).call(this),A(this,G,zf).call(this),m(this,Un,o.annotationStorage),m(this,Sc,o.filterFactory),m(this,Or,l),m(this,Aa,c||null),m(this,Ac,h),m(this,wc,u),m(this,va,d),m(this,xc,f||null),this.viewParameters={realScale:Ei.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=p||null,this._supportsPinchToZoom=y!==!1}static get _keyboardManager(){const t=ra.prototype,e=o=>a(o,Wn).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&o.hasSomethingToControl(),s=(o,{target:l})=>{if(l instanceof HTMLInputElement){const{type:c}=l;return c!=="text"&&c!=="number"}return!0},n=this.TRANSLATE_SMALL,r=this.TRANSLATE_BIG;return dt(this,"_keyboardManager",new Yh([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:s}],[["ctrl+z","mac+meta+z"],t.undo,{checker:s}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:s}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:s}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(o,{target:l})=>!(l instanceof HTMLButtonElement)&&a(o,Wn).contains(l)&&!o.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(o,{target:l})=>!(l instanceof HTMLButtonElement)&&a(o,Wn).contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-n,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-r,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[n,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[r,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-n],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-r],checker:e}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,n],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,r],checker:e}]]))}destroy(){var t,e,s,n,r,o,l,c;(t=a(this,Cs))==null||t.resolve(),m(this,Cs,null),(e=a(this,ga))==null||e.abort(),m(this,ga,null),this._signal=null;for(const h of a(this,ve).values())h.destroy();a(this,ve).clear(),a(this,le).clear(),a(this,Mr).clear(),(s=a(this,Fi))==null||s.clear(),m(this,ns,null),a(this,xt).clear(),a(this,_s).destroy(),(n=a(this,ma))==null||n.destroy(),(r=a(this,$i))==null||r.destroy(),(o=a(this,dn))==null||o.hide(),m(this,dn,null),(l=a(this,Dr))==null||l.destroy(),m(this,Dr,null),a(this,un)&&(clearTimeout(a(this,un)),m(this,un,null)),a(this,fn)&&(clearTimeout(a(this,fn)),m(this,fn,null)),(c=this._editorUndoBar)==null||c.destroy()}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return a(this,xc)}get useNewAltTextFlow(){return a(this,wc)}get useNewAltTextWhenAddingImage(){return a(this,va)}get hcmFilter(){return dt(this,"hcmFilter",a(this,Or)?a(this,Sc).addHCMFilter(a(this,Or).foreground,a(this,Or).background):"none")}get direction(){return dt(this,"direction",getComputedStyle(a(this,Wn)).direction)}get highlightColors(){return dt(this,"highlightColors",a(this,Aa)?new Map(a(this,Aa).split(",").map(t=>t.split("=").map(e=>e.trim()))):null)}get highlightColorNames(){return dt(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}setCurrentDrawingSession(t){t?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),m(this,Mi,t)}setMainHighlightColorPicker(t){m(this,Dr,t)}editAltText(t,e=!1){var s;(s=a(this,ma))==null||s.editAltText(this,t,e)}getSignature(t){var e;(e=a(this,$i))==null||e.getSignature({uiManager:this,editor:t})}get signatureManager(){return a(this,$i)}switchToMode(t,e){this._eventBus.on("annotationeditormodechanged",e,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,e){this._eventBus.dispatch("setpreference",{source:this,name:t,value:e})}onSetPreference({name:t,value:e}){switch(t){case"enableNewAltTextWhenAddingImage":m(this,va,e);break}}onPageChanging({pageNumber:t}){m(this,ba,t-1)}focusMainContainer(){a(this,Wn).focus()}findParent(t,e){for(const s of a(this,ve).values()){const{x:n,y:r,width:o,height:l}=s.div.getBoundingClientRect();if(t>=n&&t<=n+o&&e>=r&&e<=r+l)return s}return null}disableUserSelect(t=!1){a(this,Tc).classList.toggle("noUserSelect",t)}addShouldRescale(t){a(this,Mr).add(t)}removeShouldRescale(t){a(this,Mr).delete(t)}onScaleChanging({scale:t}){var e;this.commitOrRemove(),this.viewParameters.realScale=t*Ei.PDF_TO_CSS_UNITS;for(const s of a(this,Mr))s.onScaleChanging();(e=a(this,Mi))==null||e.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}highlightSelection(t=""){const e=document.getSelection();if(!e||e.isCollapsed)return;const{anchorNode:s,anchorOffset:n,focusNode:r,focusOffset:o}=e,l=e.toString(),h=A(this,G,Su).call(this,e).closest(".textLayer"),u=this.getSelectionBoxes(h);if(!u)return;e.empty();const d=A(this,G,Hf).call(this,h),f=a(this,ue)===et.NONE,p=()=>{d==null||d.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:u,anchorNode:s,anchorOffset:n,focusNode:r,focusOffset:o,text:l}),f&&this.showAllEditors("highlight",!0,!0)};if(f){this.switchToMode(et.HIGHLIGHT,p);return}p()}addToAnnotationStorage(t){!t.isEmpty()&&a(this,Un)&&!a(this,Un).has(t.id)&&a(this,Un).setValue(t.id,t)}blur(){if(this.isShiftKeyDown=!1,a(this,Di)&&(m(this,Di,!1),A(this,G,Eu).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const e of a(this,xt))if(e.div.contains(t)){m(this,Lr,[e,t]),e._focusEventsAllowed=!1;break}}focus(){if(!a(this,Lr))return;const[t,e]=a(this,Lr);m(this,Lr,null),e.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),e.focus()}addEditListeners(){A(this,G,zf).call(this),A(this,G,Gf).call(this)}removeEditListeners(){A(this,G,db).call(this),A(this,G,Uf).call(this)}dragOver(t){for(const{type:e}of t.dataTransfer.items)for(const s of a(this,zs))if(s.isHandlingMimeForPasting(e)){t.dataTransfer.dropEffect="copy",t.preventDefault();return}}drop(t){for(const e of t.dataTransfer.items)for(const s of a(this,zs))if(s.isHandlingMimeForPasting(e.type)){s.paste(e,this.currentLayer),t.preventDefault();return}}copy(t){var s;if(t.preventDefault(),(s=a(this,ns))==null||s.commitOrRemove(),!this.hasSelection)return;const e=[];for(const n of a(this,xt)){const r=n.serialize(!0);r&&e.push(r)}e.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(e))}cut(t){this.copy(t),this.delete()}async paste(t){t.preventDefault();const{clipboardData:e}=t;for(const r of e.items)for(const o of a(this,zs))if(o.isHandlingMimeForPasting(r.type)){o.paste(r,this.currentLayer);return}let s=e.getData("application/pdfjs");if(!s)return;try{s=JSON.parse(s)}catch(r){st(`paste: "${r.message}".`);return}if(!Array.isArray(s))return;this.unselectAll();const n=this.currentLayer;try{const r=[];for(const c of s){const h=await n.deserialize(c);if(!h)return;r.push(h)}const o=()=>{for(const c of r)A(this,G,Vf).call(this,c);A(this,G,Wf).call(this,r)},l=()=>{for(const c of r)c.remove()};this.addCommands({cmd:o,undo:l,mustExec:!0})}catch(r){st(`paste: "${r.message}".`)}}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),a(this,ue)!==et.NONE&&!this.isEditorHandlingKeyboard&&ra._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,a(this,Di)&&(m(this,Di,!1),A(this,G,Eu).call(this,"main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}setEditingState(t){t?(A(this,G,hb).call(this),A(this,G,Gf).call(this),A(this,G,$e).call(this,{isEditing:a(this,ue)!==et.NONE,isEmpty:A(this,G,Ol).call(this),hasSomethingToUndo:a(this,_s).hasSomethingToUndo(),hasSomethingToRedo:a(this,_s).hasSomethingToRedo(),hasSelectedEditor:!1})):(A(this,G,ub).call(this),A(this,G,Uf).call(this),A(this,G,$e).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!a(this,zs)){m(this,zs,t);for(const e of a(this,zs))A(this,G,jn).call(this,e.defaultPropertiesToUpdate)}}getId(){return a(this,dd).id}get currentLayer(){return a(this,ve).get(a(this,ba))}getLayer(t){return a(this,ve).get(t)}get currentPageIndex(){return a(this,ba)}addLayer(t){a(this,ve).set(t.pageIndex,t),a(this,Oi)?t.enable():t.disable()}removeLayer(t){a(this,ve).delete(t.pageIndex)}async updateMode(t,e=null,s=!1){var n,r,o;if(a(this,ue)!==t&&!(a(this,Cs)&&(await a(this,Cs).promise,!a(this,Cs)))){if(m(this,Cs,Promise.withResolvers()),(n=a(this,Mi))==null||n.commitOrRemove(),m(this,ue,t),t===et.NONE){this.setEditingState(!1),A(this,G,gb).call(this),(r=this._editorUndoBar)==null||r.hide(),a(this,Cs).resolve();return}t===et.SIGNATURE&&await((o=a(this,$i))==null?void 0:o.loadSignatures()),this.setEditingState(!0),await A(this,G,pb).call(this),this.unselectAll();for(const l of a(this,ve).values())l.updateMode(t);if(!e){s&&this.addNewEditorFromKeyboard(),a(this,Cs).resolve();return}for(const l of a(this,le).values())l.annotationElementId===e||l.id===e?(this.setSelected(l),l.enterInEditMode()):l.unselect();a(this,Cs).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t.mode!==a(this,ue)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...t})}updateParams(t,e){var s;if(a(this,zs)){switch(t){case ft.CREATE:this.currentLayer.addNewEditor(e);return;case ft.HIGHLIGHT_DEFAULT_COLOR:(s=a(this,Dr))==null||s.updateColor(e);break;case ft.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(a(this,_c)||m(this,_c,new Map)).set(t,e),this.showAllEditors("highlight",e);break}for(const n of a(this,xt))n.updateParams(t,e);for(const n of a(this,zs))n.updateDefaultParams(t,e)}}showAllEditors(t,e,s=!1){var r;for(const o of a(this,le).values())o.editorType===t&&o.show(e);(((r=a(this,_c))==null?void 0:r.get(ft.HIGHLIGHT_SHOW_ALL))??!0)!==e&&A(this,G,jn).call(this,[[ft.HIGHLIGHT_SHOW_ALL,e]])}enableWaiting(t=!1){if(a(this,Ec)!==t){m(this,Ec,t);for(const e of a(this,ve).values())t?e.disableClick():e.enableClick(),e.div.classList.toggle("waiting",t)}}getEditors(t){const e=[];for(const s of a(this,le).values())s.pageIndex===t&&e.push(s);return e}getEditor(t){return a(this,le).get(t)}addEditor(t){a(this,le).set(t.id,t)}removeEditor(t){var e,s;t.div.contains(document.activeElement)&&(a(this,un)&&clearTimeout(a(this,un)),m(this,un,setTimeout(()=>{this.focusMainContainer(),m(this,un,null)},0))),a(this,le).delete(t.id),t.annotationElementId&&((e=a(this,Fi))==null||e.delete(t.annotationElementId)),this.unselect(t),(!t.annotationElementId||!a(this,Ir).has(t.annotationElementId))&&((s=a(this,Un))==null||s.remove(t.id))}addDeletedAnnotationElement(t){a(this,Ir).add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return a(this,Ir).has(t)}removeDeletedAnnotationElement(t){a(this,Ir).delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}setActiveEditor(t){a(this,ns)!==t&&(m(this,ns,t),t&&A(this,G,jn).call(this,t.propertiesToUpdate))}updateUI(t){a(this,G,mb)===t&&A(this,G,jn).call(this,t.propertiesToUpdate)}updateUIForDefaultProperties(t){A(this,G,jn).call(this,t.defaultPropertiesToUpdate)}toggleSelected(t){if(a(this,xt).has(t)){a(this,xt).delete(t),t.unselect(),A(this,G,$e).call(this,{hasSelectedEditor:this.hasSelection});return}a(this,xt).add(t),t.select(),A(this,G,jn).call(this,t.propertiesToUpdate),A(this,G,$e).call(this,{hasSelectedEditor:!0})}setSelected(t){var e;(e=a(this,Mi))==null||e.commitOrRemove();for(const s of a(this,xt))s!==t&&s.unselect();a(this,xt).clear(),a(this,xt).add(t),t.select(),A(this,G,jn).call(this,t.propertiesToUpdate),A(this,G,$e).call(this,{hasSelectedEditor:!0})}isSelected(t){return a(this,xt).has(t)}get firstSelectedEditor(){return a(this,xt).values().next().value}unselect(t){t.unselect(),a(this,xt).delete(t),A(this,G,$e).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return a(this,xt).size!==0}get isEnterHandled(){return a(this,xt).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){var t;a(this,_s).undo(),A(this,G,$e).call(this,{hasSomethingToUndo:a(this,_s).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:A(this,G,Ol).call(this)}),(t=this._editorUndoBar)==null||t.hide()}redo(){a(this,_s).redo(),A(this,G,$e).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:a(this,_s).hasSomethingToRedo(),isEmpty:A(this,G,Ol).call(this)})}addCommands(t){a(this,_s).add(t),A(this,G,$e).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:A(this,G,Ol).call(this)})}cleanUndoStack(t){a(this,_s).cleanType(t)}delete(){var r;this.commitOrRemove();const t=(r=this.currentLayer)==null?void 0:r.endDrawingSession(!0);if(!this.hasSelection&&!t)return;const e=t?[t]:[...a(this,xt)],s=()=>{var o;(o=this._editorUndoBar)==null||o.show(n,e.length===1?e[0].editorType:e.length);for(const l of e)l.remove()},n=()=>{for(const o of e)A(this,G,Vf).call(this,o)};this.addCommands({cmd:s,undo:n,mustExec:!0})}commitOrRemove(){var t;(t=a(this,ns))==null||t.commitOrRemove()}hasSomethingToControl(){return a(this,ns)||this.hasSelection}selectAll(){for(const t of a(this,xt))t.commit();A(this,G,Wf).call(this,a(this,le).values())}unselectAll(){var t;if(!(a(this,ns)&&(a(this,ns).commitOrRemove(),a(this,ue)!==et.NONE))&&!((t=a(this,Mi))!=null&&t.commitOrRemove())&&this.hasSelection){for(const e of a(this,xt))e.unselect();a(this,xt).clear(),A(this,G,$e).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(t,e,s=!1){if(s||this.commitOrRemove(),!this.hasSelection)return;a(this,Bi)[0]+=t,a(this,Bi)[1]+=e;const[n,r]=a(this,Bi),o=[...a(this,xt)],l=1e3;a(this,fn)&&clearTimeout(a(this,fn)),m(this,fn,setTimeout(()=>{m(this,fn,null),a(this,Bi)[0]=a(this,Bi)[1]=0,this.addCommands({cmd:()=>{for(const c of o)a(this,le).has(c.id)&&(c.translateInPage(n,r),c.translationDone())},undo:()=>{for(const c of o)a(this,le).has(c.id)&&(c.translateInPage(-n,-r),c.translationDone())},mustExec:!1})},l));for(const c of o)c.translateInPage(t,e),c.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),m(this,hn,new Map);for(const t of a(this,xt))a(this,hn).set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!a(this,hn))return!1;this.disableUserSelect(!1);const t=a(this,hn);m(this,hn,null);let e=!1;for(const[{x:n,y:r,pageIndex:o},l]of t)l.newX=n,l.newY=r,l.newPageIndex=o,e||(e=n!==l.savedX||r!==l.savedY||o!==l.savedPageIndex);if(!e)return!1;const s=(n,r,o,l)=>{if(a(this,le).has(n.id)){const c=a(this,ve).get(l);c?n._setParentAndPosition(c,r,o):(n.pageIndex=l,n.x=r,n.y=o)}};return this.addCommands({cmd:()=>{for(const[n,{newX:r,newY:o,newPageIndex:l}]of t)s(n,r,o,l)},undo:()=>{for(const[n,{savedX:r,savedY:o,savedPageIndex:l}]of t)s(n,r,o,l)},mustExec:!0}),!0}dragSelectedEditors(t,e){if(a(this,hn))for(const s of a(this,hn).keys())s.drag(t,e)}rebuild(t){if(t.parent===null){const e=this.getLayer(t.pageIndex);e?(e.changeParent(t),e.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){var t;return((t=this.getActive())==null?void 0:t.shouldGetKeyboardEvents())||a(this,xt).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return a(this,ns)===t}getActive(){return a(this,ns)}getMode(){return a(this,ue)}get imageManager(){return dt(this,"imageManager",new Bf)}getSelectionBoxes(t){if(!t)return null;const e=document.getSelection();for(let h=0,u=e.rangeCount;h<u;h++)if(!t.contains(e.getRangeAt(h).commonAncestorContainer))return null;const{x:s,y:n,width:r,height:o}=t.getBoundingClientRect();let l;switch(t.getAttribute("data-main-rotation")){case"90":l=(h,u,d,f)=>({x:(u-n)/o,y:1-(h+d-s)/r,width:f/o,height:d/r});break;case"180":l=(h,u,d,f)=>({x:1-(h+d-s)/r,y:1-(u+f-n)/o,width:d/r,height:f/o});break;case"270":l=(h,u,d,f)=>({x:1-(u+f-n)/o,y:(h-s)/r,width:f/o,height:d/r});break;default:l=(h,u,d,f)=>({x:(h-s)/r,y:(u-n)/o,width:d/r,height:f/o});break}const c=[];for(let h=0,u=e.rangeCount;h<u;h++){const d=e.getRangeAt(h);if(!d.collapsed)for(const{x:f,y:p,width:y,height:g}of d.getClientRects())y===0||g===0||c.push(l(f,p,y,g))}return c.length===0?null:c}addChangedExistingAnnotation({annotationElementId:t,id:e}){(a(this,ya)||m(this,ya,new Map)).set(t,e)}removeChangedExistingAnnotation({annotationElementId:t}){var e;(e=a(this,ya))==null||e.delete(t)}renderAnnotationElement(t){var n;const e=(n=a(this,ya))==null?void 0:n.get(t.data.id);if(!e)return;const s=a(this,Un).getRawValue(e);s&&(a(this,ue)===et.NONE&&!s.hasBeenModified||s.renderAnnotationElement(t))}setMissingCanvas(t,e,s){var r;const n=(r=a(this,Fi))==null?void 0:r.get(t);n&&(n.setCanvas(e,s),a(this,Fi).delete(t))}addMissingCanvas(t,e){(a(this,Fi)||m(this,Fi,new Map)).set(t,e)}};ga=new WeakMap,ns=new WeakMap,le=new WeakMap,ve=new WeakMap,ma=new WeakMap,Un=new WeakMap,ya=new WeakMap,_s=new WeakMap,Ii=new WeakMap,Mi=new WeakMap,ba=new WeakMap,Ir=new WeakMap,hn=new WeakMap,zs=new WeakMap,Mr=new WeakMap,Ac=new WeakMap,wc=new WeakMap,va=new WeakMap,Sc=new WeakMap,un=new WeakMap,Li=new WeakMap,Aa=new WeakMap,Di=new WeakMap,dn=new WeakMap,dd=new WeakMap,Oi=new WeakMap,Ec=new WeakMap,Ni=new WeakMap,Lr=new WeakMap,Dr=new WeakMap,Fi=new WeakMap,xc=new WeakMap,ue=new WeakMap,xt=new WeakMap,Vn=new WeakMap,$i=new WeakMap,Or=new WeakMap,_c=new WeakMap,Cc=new WeakMap,Bi=new WeakMap,fn=new WeakMap,Wn=new WeakMap,Tc=new WeakMap,Cs=new WeakMap,G=new WeakSet,Su=function({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t},Hf=function(t){const{currentLayer:e}=this;if(e.hasTextLayer(t))return e;for(const s of a(this,ve).values())if(s.hasTextLayer(t))return s;return null},ab=function(){const t=document.getSelection();if(!t||t.isCollapsed)return;const s=A(this,G,Su).call(this,t).closest(".textLayer"),n=this.getSelectionBoxes(s);n&&(a(this,dn)||m(this,dn,new T1(this)),a(this,dn).show(s,n,this.direction==="ltr"))},lb=function(){var r,o,l;const t=document.getSelection();if(!t||t.isCollapsed){a(this,Vn)&&((r=a(this,dn))==null||r.hide(),m(this,Vn,null),A(this,G,$e).call(this,{hasSelectedText:!1}));return}const{anchorNode:e}=t;if(e===a(this,Vn))return;const n=A(this,G,Su).call(this,t).closest(".textLayer");if(!n){a(this,Vn)&&((o=a(this,dn))==null||o.hide(),m(this,Vn,null),A(this,G,$e).call(this,{hasSelectedText:!1}));return}if((l=a(this,dn))==null||l.hide(),m(this,Vn,e),A(this,G,$e).call(this,{hasSelectedText:!0}),!(a(this,ue)!==et.HIGHLIGHT&&a(this,ue)!==et.NONE)&&(a(this,ue)===et.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),m(this,Di,this.isShiftKeyDown),!this.isShiftKeyDown)){const c=a(this,ue)===et.HIGHLIGHT?A(this,G,Hf).call(this,n):null;c==null||c.toggleDrawing();const h=new AbortController,u=this.combinedSignal(h),d=f=>{f.type==="pointerup"&&f.button!==0||(h.abort(),c==null||c.toggleDrawing(!0),f.type==="pointerup"&&A(this,G,Eu).call(this,"main_toolbar"))};window.addEventListener("pointerup",d,{signal:u}),window.addEventListener("blur",d,{signal:u})}},Eu=function(t=""){a(this,ue)===et.HIGHLIGHT?this.highlightSelection(t):a(this,Ac)&&A(this,G,ab).call(this)},cb=function(){document.addEventListener("selectionchange",A(this,G,lb).bind(this),{signal:this._signal})},hb=function(){if(a(this,Li))return;m(this,Li,new AbortController);const t=this.combinedSignal(a(this,Li));window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})},ub=function(){var t;(t=a(this,Li))==null||t.abort(),m(this,Li,null)},zf=function(){if(a(this,Ni))return;m(this,Ni,new AbortController);const t=this.combinedSignal(a(this,Ni));window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})},db=function(){var t;(t=a(this,Ni))==null||t.abort(),m(this,Ni,null)},Gf=function(){if(a(this,Ii))return;m(this,Ii,new AbortController);const t=this.combinedSignal(a(this,Ii));document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})},Uf=function(){var t;(t=a(this,Ii))==null||t.abort(),m(this,Ii,null)},fb=function(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})},$e=function(t){Object.entries(t).some(([s,n])=>a(this,Cc)[s]!==n)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(a(this,Cc),t)}),a(this,ue)===et.HIGHLIGHT&&t.hasSelectedEditor===!1&&A(this,G,jn).call(this,[[ft.HIGHLIGHT_FREE,!0]]))},jn=function(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})},pb=async function(){if(!a(this,Oi)){m(this,Oi,!0);const t=[];for(const e of a(this,ve).values())t.push(e.enable());await Promise.all(t);for(const e of a(this,le).values())e.enable()}},gb=function(){if(this.unselectAll(),a(this,Oi)){m(this,Oi,!1);for(const t of a(this,ve).values())t.disable();for(const t of a(this,le).values())t.disable()}},Vf=function(t){const e=a(this,ve).get(t.pageIndex);e?e.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))},mb=function(){let t=null;for(t of a(this,xt));return t},Ol=function(){if(a(this,le).size===0)return!0;if(a(this,le).size===1)for(const t of a(this,le).values())return t.isEmpty();return!1},Wf=function(t){for(const e of a(this,xt))e.unselect();a(this,xt).clear();for(const e of t)e.isEmpty()||(a(this,xt).add(e),e.select());A(this,G,$e).call(this,{hasSelectedEditor:this.hasSelection})},$(ra,"TRANSLATE_SMALL",1),$(ra,"TRANSLATE_BIG",10);let pr=ra;var de,pn,Gs,wa,gn,is,Sa,mn,Ke,qn,Nr,yn,ji,en,Nl,xu;const Be=class Be{constructor(t){b(this,en);b(this,de,null);b(this,pn,!1);b(this,Gs,null);b(this,wa,null);b(this,gn,null);b(this,is,null);b(this,Sa,!1);b(this,mn,null);b(this,Ke,null);b(this,qn,null);b(this,Nr,null);b(this,yn,!1);m(this,Ke,t),m(this,yn,t._uiManager.useNewAltTextFlow),a(Be,ji)||m(Be,ji,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(t){Be._l10n??(Be._l10n=t)}async render(){const t=m(this,Gs,document.createElement("button"));t.className="altText",t.tabIndex="0";const e=m(this,wa,document.createElement("span"));t.append(e),a(this,yn)?(t.classList.add("new"),t.setAttribute("data-l10n-id",a(Be,ji).missing),e.setAttribute("data-l10n-id",a(Be,ji)["missing-label"])):(t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const s=a(this,Ke)._uiManager._signal;t.addEventListener("contextmenu",Fs,{signal:s}),t.addEventListener("pointerdown",r=>r.stopPropagation(),{signal:s});const n=r=>{r.preventDefault(),a(this,Ke)._uiManager.editAltText(a(this,Ke)),a(this,yn)&&a(this,Ke)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:a(this,en,Nl)}})};return t.addEventListener("click",n,{capture:!0,signal:s}),t.addEventListener("keydown",r=>{r.target===t&&r.key==="Enter"&&(m(this,Sa,!0),n(r))},{signal:s}),await A(this,en,xu).call(this),t}finish(){a(this,Gs)&&(a(this,Gs).focus({focusVisible:a(this,Sa)}),m(this,Sa,!1))}isEmpty(){return a(this,yn)?a(this,de)===null:!a(this,de)&&!a(this,pn)}hasData(){return a(this,yn)?a(this,de)!==null||!!a(this,qn):this.isEmpty()}get guessedText(){return a(this,qn)}async setGuessedText(t){a(this,de)===null&&(m(this,qn,t),m(this,Nr,await Be._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:t})),A(this,en,xu).call(this))}toggleAltTextBadge(t=!1){var e;if(!a(this,yn)||a(this,de)){(e=a(this,mn))==null||e.remove(),m(this,mn,null);return}if(!a(this,mn)){const s=m(this,mn,document.createElement("div"));s.className="noAltTextBadge",a(this,Ke).div.append(s)}a(this,mn).classList.toggle("hidden",!t)}serialize(t){let e=a(this,de);return!t&&a(this,qn)===e&&(e=a(this,Nr)),{altText:e,decorative:a(this,pn),guessedText:a(this,qn),textWithDisclaimer:a(this,Nr)}}get data(){return{altText:a(this,de),decorative:a(this,pn)}}set data({altText:t,decorative:e,guessedText:s,textWithDisclaimer:n,cancel:r=!1}){s&&(m(this,qn,s),m(this,Nr,n)),!(a(this,de)===t&&a(this,pn)===e)&&(r||(m(this,de,t),m(this,pn,e)),A(this,en,xu).call(this))}toggle(t=!1){a(this,Gs)&&(!t&&a(this,is)&&(clearTimeout(a(this,is)),m(this,is,null)),a(this,Gs).disabled=!t)}shown(){a(this,Ke)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:a(this,en,Nl)}})}destroy(){var t,e;(t=a(this,Gs))==null||t.remove(),m(this,Gs,null),m(this,wa,null),m(this,gn,null),(e=a(this,mn))==null||e.remove(),m(this,mn,null)}};de=new WeakMap,pn=new WeakMap,Gs=new WeakMap,wa=new WeakMap,gn=new WeakMap,is=new WeakMap,Sa=new WeakMap,mn=new WeakMap,Ke=new WeakMap,qn=new WeakMap,Nr=new WeakMap,yn=new WeakMap,ji=new WeakMap,en=new WeakSet,Nl=function(){return a(this,de)&&"added"||a(this,de)===null&&this.guessedText&&"review"||"missing"},xu=async function(){var n,r,o;const t=a(this,Gs);if(!t)return;if(a(this,yn)){if(t.classList.toggle("done",!!a(this,de)),t.setAttribute("data-l10n-id",a(Be,ji)[a(this,en,Nl)]),(n=a(this,wa))==null||n.setAttribute("data-l10n-id",a(Be,ji)[`${a(this,en,Nl)}-label`]),!a(this,de)){(r=a(this,gn))==null||r.remove();return}}else{if(!a(this,de)&&!a(this,pn)){t.classList.remove("done"),(o=a(this,gn))==null||o.remove();return}t.classList.add("done"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let e=a(this,gn);if(!e){m(this,gn,e=document.createElement("span")),e.className="tooltip",e.setAttribute("role","tooltip"),e.id=`alt-text-tooltip-${a(this,Ke).id}`;const l=100,c=a(this,Ke)._uiManager._signal;c.addEventListener("abort",()=>{clearTimeout(a(this,is)),m(this,is,null)},{once:!0}),t.addEventListener("mouseenter",()=>{m(this,is,setTimeout(()=>{m(this,is,null),a(this,gn).classList.add("show"),a(this,Ke)._reportTelemetry({action:"alt_text_tooltip"})},l))},{signal:c}),t.addEventListener("mouseleave",()=>{var h;a(this,is)&&(clearTimeout(a(this,is)),m(this,is,null)),(h=a(this,gn))==null||h.classList.remove("show")},{signal:c})}a(this,pn)?e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(e.removeAttribute("data-l10n-id"),e.textContent=a(this,de)),e.parentNode||t.append(e);const s=a(this,Ke).getElementForAltText();s==null||s.setAttribute("aria-describedby",e.id)},b(Be,ji,null),$(Be,"_l10n",null);let sd=Be;var Ea,Fr,Pc,Rc,kc,Ic,Mc,Xn,$r,Yn,Br,Kn,mr,yb,bb,vb;const Ig=class Ig{constructor({container:t,isPinchingDisabled:e=null,isPinchingStopped:s=null,onPinchStart:n=null,onPinching:r=null,onPinchEnd:o=null,signal:l}){b(this,mr);b(this,Ea);b(this,Fr,!1);b(this,Pc,null);b(this,Rc);b(this,kc);b(this,Ic);b(this,Mc);b(this,Xn,null);b(this,$r);b(this,Yn,null);b(this,Br);b(this,Kn,null);m(this,Ea,t),m(this,Pc,s),m(this,Rc,e),m(this,kc,n),m(this,Ic,r),m(this,Mc,o),m(this,Br,new AbortController),m(this,$r,AbortSignal.any([l,a(this,Br).signal])),t.addEventListener("touchstart",A(this,mr,yb).bind(this),{passive:!1,signal:a(this,$r)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/nn.pixelRatio}destroy(){var t,e;(t=a(this,Br))==null||t.abort(),m(this,Br,null),(e=a(this,Xn))==null||e.abort(),m(this,Xn,null)}};Ea=new WeakMap,Fr=new WeakMap,Pc=new WeakMap,Rc=new WeakMap,kc=new WeakMap,Ic=new WeakMap,Mc=new WeakMap,Xn=new WeakMap,$r=new WeakMap,Yn=new WeakMap,Br=new WeakMap,Kn=new WeakMap,mr=new WeakSet,yb=function(t){var n,r,o;if((n=a(this,Rc))!=null&&n.call(this))return;if(t.touches.length===1){if(a(this,Xn))return;const l=m(this,Xn,new AbortController),c=AbortSignal.any([a(this,$r),l.signal]),h=a(this,Ea),u={capture:!0,signal:c,passive:!1},d=f=>{var p;f.pointerType==="touch"&&((p=a(this,Xn))==null||p.abort(),m(this,Xn,null))};h.addEventListener("pointerdown",f=>{f.pointerType==="touch"&&(Jt(f),d(f))},u),h.addEventListener("pointerup",d,u),h.addEventListener("pointercancel",d,u);return}if(!a(this,Kn)){m(this,Kn,new AbortController);const l=AbortSignal.any([a(this,$r),a(this,Kn).signal]),c=a(this,Ea),h={signal:l,capture:!1,passive:!1};c.addEventListener("touchmove",A(this,mr,bb).bind(this),h);const u=A(this,mr,vb).bind(this);c.addEventListener("touchend",u,h),c.addEventListener("touchcancel",u,h),h.capture=!0,c.addEventListener("pointerdown",Jt,h),c.addEventListener("pointermove",Jt,h),c.addEventListener("pointercancel",Jt,h),c.addEventListener("pointerup",Jt,h),(r=a(this,kc))==null||r.call(this)}if(Jt(t),t.touches.length!==2||(o=a(this,Pc))!=null&&o.call(this)){m(this,Yn,null);return}let[e,s]=t.touches;e.identifier>s.identifier&&([e,s]=[s,e]),m(this,Yn,{touch0X:e.screenX,touch0Y:e.screenY,touch1X:s.screenX,touch1Y:s.screenY})},bb=function(t){var x;if(!a(this,Yn)||t.touches.length!==2)return;Jt(t);let[e,s]=t.touches;e.identifier>s.identifier&&([e,s]=[s,e]);const{screenX:n,screenY:r}=e,{screenX:o,screenY:l}=s,c=a(this,Yn),{touch0X:h,touch0Y:u,touch1X:d,touch1Y:f}=c,p=d-h,y=f-u,g=o-n,v=l-r,w=Math.hypot(g,v)||1,_=Math.hypot(p,y)||1;if(!a(this,Fr)&&Math.abs(_-w)<=Ig.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(c.touch0X=n,c.touch0Y=r,c.touch1X=o,c.touch1Y=l,!a(this,Fr)){m(this,Fr,!0);return}const C=[(n+o)/2,(r+l)/2];(x=a(this,Ic))==null||x.call(this,C,_,w)},vb=function(t){var e;t.touches.length>=2||(a(this,Kn)&&(a(this,Kn).abort(),m(this,Kn,null),(e=a(this,Mc))==null||e.call(this)),a(this,Yn)&&(Jt(t),m(this,Yn,null),m(this,Fr,!1)))};let cc=Ig;var jr,Us,Ft,xa,Hi,Lc,Hr,Ae,zr,Qn,zi,Dc,Gr,rs,Oc,Ur,Jn,bn,_a,Ca,Ts,Vr,Nc,fd,Z,qf,Fc,Xf,_u,Ab,wb,Yf,Cu,Kf,Sb,Eb,xb,Qf,_b,Jf,Cb,Tb,Pb,Zf,Fl;const ot=class ot{constructor(t){b(this,Z);b(this,jr,null);b(this,Us,null);b(this,Ft,null);b(this,xa,!1);b(this,Hi,null);b(this,Lc,"");b(this,Hr,!1);b(this,Ae,null);b(this,zr,null);b(this,Qn,null);b(this,zi,null);b(this,Dc,"");b(this,Gr,!1);b(this,rs,null);b(this,Oc,!1);b(this,Ur,!1);b(this,Jn,!1);b(this,bn,null);b(this,_a,0);b(this,Ca,0);b(this,Ts,null);b(this,Vr,null);$(this,"isSelected",!1);$(this,"_isCopy",!1);$(this,"_editToolbar",null);$(this,"_initialOptions",Object.create(null));$(this,"_initialData",null);$(this,"_isVisible",!0);$(this,"_uiManager",null);$(this,"_focusEventsAllowed",!0);b(this,Nc,!1);b(this,fd,ot._zIndex++);this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null;const{rotation:e,rawDims:{pageWidth:s,pageHeight:n,pageX:r,pageY:o}}=this.parent.viewport;this.rotation=e,this.pageRotation=(360+e-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[s,n],this.pageTranslation=[r,o];const[l,c]=this.parentDimensions;this.x=t.x/l,this.y=t.y/c,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const t=ot.prototype._resizeWithKeyboard,e=pr.TRANSLATE_SMALL,s=pr.TRANSLATE_BIG;return dt(this,"_resizerKeyboardManager",new Yh([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-e,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-s,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[e,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[s,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-e]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-s]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,e]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,s]}],[["Escape","mac+Escape"],ot.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get isDrawer(){return!1}static get _defaultLineColor(){return dt(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const e=new k1({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});e.annotationElementId=t.annotationElementId,e.deleted=!0,e._uiManager.addToAnnotationStorage(e)}static initialize(t,e){if(ot._l10n??(ot._l10n=t),ot._l10nResizer||(ot._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),ot._borderLineWidth!==-1)return;const s=getComputedStyle(document.documentElement);ot._borderLineWidth=parseFloat(s.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,e){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,e){Pt("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return a(this,Nc)}set _isDraggable(t){var e;m(this,Nc,t),(e=this.div)==null||e.classList.toggle("draggable",t)}get isEnterHandled(){return!0}center(){const[t,e]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*e/(t*2),this.y+=this.width*t/(e*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*e/(t*2),this.y-=this.width*t/(e*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=a(this,fd)}setParent(t){t!==null?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):A(this,Z,Fl).call(this),this.parent=t}focusin(t){this._focusEventsAllowed&&(a(this,Gr)?m(this,Gr,!1):this.parent.setSelected(this))}focusout(t){var s;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const e=t.relatedTarget;e!=null&&e.closest(`#${this.id}`)||(t.preventDefault(),(s=this.parent)!=null&&s.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,e,s,n){const[r,o]=this.parentDimensions;[s,n]=this.screenToPageTranslation(s,n),this.x=(t+s)/r,this.y=(e+n)/o,this.fixAndSetPosition()}_moveAfterPaste(t,e){const[s,n]=this.parentDimensions;this.setAt(t*s,e*n,this.width*s,this.height*n),this._onTranslated()}translate(t,e){A(this,Z,qf).call(this,this.parentDimensions,t,e)}translateInPage(t,e){a(this,rs)||m(this,rs,[this.x,this.y,this.width,this.height]),A(this,Z,qf).call(this,this.pageDimensions,t,e),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(t,e){a(this,rs)||m(this,rs,[this.x,this.y,this.width,this.height]);const{div:s,parentDimensions:[n,r]}=this;if(this.x+=t/n,this.y+=e/r,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:d,y:f}=this.div.getBoundingClientRect();this.parent.findNewParent(this,d,f)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:o,y:l}=this;const[c,h]=this.getBaseTranslation();o+=c,l+=h;const{style:u}=s;u.left=`${(100*o).toFixed(2)}%`,u.top=`${(100*l).toFixed(2)}%`,this._onTranslating(o,l),s.scrollIntoView({block:"nearest"})}_onTranslating(t,e){}_onTranslated(t,e){}get _hasBeenMoved(){return!!a(this,rs)&&(a(this,rs)[0]!==this.x||a(this,rs)[1]!==this.y)}get _hasBeenResized(){return!!a(this,rs)&&(a(this,rs)[2]!==this.width||a(this,rs)[3]!==this.height)}getBaseTranslation(){const[t,e]=this.parentDimensions,{_borderLineWidth:s}=ot,n=s/t,r=s/e;switch(this.rotation){case 90:return[-n,r];case 180:return[n,r];case 270:return[n,-r];default:return[-n,-r]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){const{div:{style:e},pageDimensions:[s,n]}=this;let{x:r,y:o,width:l,height:c}=this;if(l*=s,c*=n,r*=s,o*=n,this._mustFixPosition)switch(t){case 0:r=Oe(r,0,s-l),o=Oe(o,0,n-c);break;case 90:r=Oe(r,0,s-c),o=Oe(o,l,n);break;case 180:r=Oe(r,l,s),o=Oe(o,c,n);break;case 270:r=Oe(r,c,s),o=Oe(o,0,n-l);break}this.x=r/=s,this.y=o/=n;const[h,u]=this.getBaseTranslation();r+=h,o+=u,e.left=`${(100*r).toFixed(2)}%`,e.top=`${(100*o).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(t,e){var s;return A(s=ot,Fc,Xf).call(s,t,e,this.parentRotation)}pageTranslationToScreen(t,e){var s;return A(s=ot,Fc,Xf).call(s,t,e,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[e,s]}=this;return[e*t,s*t]}setDims(t,e){const[s,n]=this.parentDimensions,{style:r}=this.div;r.width=`${(100*t/s).toFixed(2)}%`,a(this,Hr)||(r.height=`${(100*e/n).toFixed(2)}%`)}fixDims(){const{style:t}=this.div,{height:e,width:s}=t,n=s.endsWith("%"),r=!a(this,Hr)&&e.endsWith("%");if(n&&r)return;const[o,l]=this.parentDimensions;n||(t.width=`${(100*parseFloat(s)/o).toFixed(2)}%`),!a(this,Hr)&&!r&&(t.height=`${(100*parseFloat(e)/l).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}_onResized(){}static _round(t){return Math.round(t*1e4)/1e4}_onResizing(){}altTextFinish(){var t;(t=a(this,Ft))==null||t.finish()}async addEditToolbar(){return this._editToolbar||a(this,Ur)?this._editToolbar:(this._editToolbar=new $f(this),this.div.append(this._editToolbar.render()),a(this,Ft)&&await this._editToolbar.addAltText(a(this,Ft)),this._editToolbar)}removeEditToolbar(){var t;this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,(t=a(this,Ft))==null||t.destroy())}addContainer(t){var s;const e=(s=this._editToolbar)==null?void 0:s.div;e?e.before(t):this.div.append(t)}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){a(this,Ft)||(sd.initialize(ot._l10n),m(this,Ft,new sd(this)),a(this,jr)&&(a(this,Ft).data=a(this,jr),m(this,jr,null)),await this.addEditToolbar())}get altTextData(){var t;return(t=a(this,Ft))==null?void 0:t.data}set altTextData(t){a(this,Ft)&&(a(this,Ft).data=t)}get guessedAltText(){var t;return(t=a(this,Ft))==null?void 0:t.guessedText}async setGuessedAltText(t){var e;await((e=a(this,Ft))==null?void 0:e.setGuessedText(t))}serializeAltText(t){var e;return(e=a(this,Ft))==null?void 0:e.serialize(t)}hasAltText(){return!!a(this,Ft)&&!a(this,Ft).isEmpty()}hasAltTextData(){var t;return((t=a(this,Ft))==null?void 0:t.hasData())??!1}render(){var o;const t=this.div=document.createElement("div");t.setAttribute("data-editor-rotation",(360-this.rotation)%360),t.className=this.name,t.setAttribute("id",this.id),t.tabIndex=a(this,xa)?-1:0,t.setAttribute("role","application"),this.defaultL10nId&&t.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||t.classList.add("hidden"),this.setInForeground(),A(this,Z,Jf).call(this);const[e,s]=this.parentDimensions;this.parentRotation%180!==0&&(t.style.maxWidth=`${(100*s/e).toFixed(2)}%`,t.style.maxHeight=`${(100*e/s).toFixed(2)}%`);const[n,r]=this.getInitialTranslation();return this.translate(n,r),rb(this,t,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(a(this,Vr)||m(this,Vr,new cc({container:t,isPinchingDisabled:()=>!this.isSelected,onPinchStart:A(this,Z,Sb).bind(this),onPinching:A(this,Z,Eb).bind(this),onPinchEnd:A(this,Z,xb).bind(this),signal:this._uiManager._signal}))),(o=this._uiManager._editorUndoBar)==null||o.hide(),t}pointerdown(t){const{isMac:e}=ye.platform;if(t.button!==0||t.ctrlKey&&e){t.preventDefault();return}if(m(this,Gr,!0),this._isDraggable){A(this,Z,_b).call(this,t);return}A(this,Z,Qf).call(this,t)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){a(this,bn)&&clearTimeout(a(this,bn)),m(this,bn,setTimeout(()=>{var t;m(this,bn,null),(t=this.parent)==null||t.moveEditorInDOM(this)},0))}_setParentAndPosition(t,e,s){t.changeParent(this),this.x=e,this.y=s,this.fixAndSetPosition(),this._onTranslated()}getRect(t,e,s=this.rotation){const n=this.parentScale,[r,o]=this.pageDimensions,[l,c]=this.pageTranslation,h=t/n,u=e/n,d=this.x*r,f=this.y*o,p=this.width*r,y=this.height*o;switch(s){case 0:return[d+h+l,o-f-u-y+c,d+h+p+l,o-f-u+c];case 90:return[d+u+l,o-f+h+c,d+u+y+l,o-f+h+p+c];case 180:return[d-h-p+l,o-f+u+c,d-h+l,o-f+u+y+c];case 270:return[d-u-y+l,o-f-h-p+c,d-u+l,o-f-h+c];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,e){const[s,n,r,o]=t,l=r-s,c=o-n;switch(this.rotation){case 0:return[s,e-o,l,c];case 90:return[s,e-n,c,l];case 180:return[r,e-n,l,c];case 270:return[r,e-o,c,l];default:throw new Error("Invalid rotation")}}onceAdded(t){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),m(this,Ur,!0),!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),m(this,Ur,!1),!0):!1}isInEditMode(){return a(this,Ur)}shouldGetKeyboardEvents(){return a(this,Jn)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:t,left:e,bottom:s,right:n}=this.getClientDimensions(),{innerHeight:r,innerWidth:o}=window;return e<o&&n>0&&t<r&&s>0}rebuild(){A(this,Z,Jf).call(this)}rotate(t){}resize(){}serializeDeleted(){var t;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((t=this._initialData)==null?void 0:t.popupRef)||""}}serialize(t=!1,e=null){Pt("An editor must be serializable")}static async deserialize(t,e,s){const n=new this.prototype.constructor({parent:e,id:e.getNextId(),uiManager:s});n.rotation=t.rotation,m(n,jr,t.accessibilityData),n._isCopy=t.isCopy||!1;const[r,o]=n.pageDimensions,[l,c,h,u]=n.getRectInCurrentCoords(t.rect,o);return n.x=l/r,n.y=c/o,n.width=h/r,n.height=u/o,n}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var t,e;if((t=a(this,zi))==null||t.abort(),m(this,zi,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),a(this,bn)&&(clearTimeout(a(this,bn)),m(this,bn,null)),A(this,Z,Fl).call(this),this.removeEditToolbar(),a(this,Ts)){for(const s of a(this,Ts).values())clearTimeout(s);m(this,Ts,null)}this.parent=null,(e=a(this,Vr))==null||e.destroy(),m(this,Vr,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(A(this,Z,Ab).call(this),a(this,Ae).classList.remove("hidden"))}get toolbarPosition(){return null}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!=="Enter")return;this._uiManager.setSelected(this),m(this,Qn,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const e=a(this,Ae).children;if(!a(this,Us)){m(this,Us,Array.from(e));const o=A(this,Z,Cb).bind(this),l=A(this,Z,Tb).bind(this),c=this._uiManager._signal;for(const h of a(this,Us)){const u=h.getAttribute("data-resizer-name");h.setAttribute("role","spinbutton"),h.addEventListener("keydown",o,{signal:c}),h.addEventListener("blur",l,{signal:c}),h.addEventListener("focus",A(this,Z,Pb).bind(this,u),{signal:c}),h.setAttribute("data-l10n-id",ot._l10nResizer[u])}}const s=a(this,Us)[0];let n=0;for(const o of e){if(o===s)break;n++}const r=(360-this.rotation+this.parentRotation)%360/90*(a(this,Us).length/4);if(r!==n){if(r<n)for(let l=0;l<n-r;l++)a(this,Ae).append(a(this,Ae).firstChild);else if(r>n)for(let l=0;l<r-n;l++)a(this,Ae).firstChild.before(a(this,Ae).lastChild);let o=0;for(const l of e){const h=a(this,Us)[o++].getAttribute("data-resizer-name");l.setAttribute("data-l10n-id",ot._l10nResizer[h])}}A(this,Z,Zf).call(this,0),m(this,Jn,!0),a(this,Ae).firstChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}_resizeWithKeyboard(t,e){a(this,Jn)&&A(this,Z,Kf).call(this,a(this,Dc),{deltaX:t,deltaY:e,fromKeyboard:!0})}_stopResizingWithKeyboard(){A(this,Z,Fl).call(this),this.div.focus()}select(){var t,e,s;if(!(this.isSelected&&this._editToolbar)){if(this.isSelected=!0,this.makeResizable(),(t=this.div)==null||t.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var n,r;(n=this.div)!=null&&n.classList.contains("selectedEditor")&&((r=this._editToolbar)==null||r.show())});return}(e=this._editToolbar)==null||e.show(),(s=a(this,Ft))==null||s.toggleAltTextBadge(!1)}}unselect(){var t,e,s,n,r;this.isSelected&&(this.isSelected=!1,(t=a(this,Ae))==null||t.classList.add("hidden"),(e=this.div)==null||e.classList.remove("selectedEditor"),(s=this.div)!=null&&s.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(n=this._editToolbar)==null||n.hide(),(r=a(this,Ft))==null||r.toggleAltTextBadge(!0))}updateParams(t,e){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(t){this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.id})}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return a(this,Oc)}set isEditing(t){m(this,Oc,t),this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(t,e){m(this,Hr,!0);const s=t/e,{style:n}=this.div;n.aspectRatio=s,n.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,e=!1){if(e){a(this,Ts)||m(this,Ts,new Map);const{action:s}=t;let n=a(this,Ts).get(s);n&&clearTimeout(n),n=setTimeout(()=>{this._reportTelemetry(t),a(this,Ts).delete(s),a(this,Ts).size===0&&m(this,Ts,null)},ot._telemetryTimeout),a(this,Ts).set(s,n);return}t.type||(t.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),m(this,xa,!1)}disable(){this.div&&(this.div.tabIndex=-1),m(this,xa,!0)}renderAnnotationElement(t){let e=t.container.querySelector(".annotationContent");if(!e)e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),t.container.prepend(e);else if(e.nodeName==="CANVAS"){const s=e;e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),s.before(e)}return e}resetAnnotationElement(t){const{firstChild:e}=t.container;(e==null?void 0:e.nodeName)==="DIV"&&e.classList.contains("annotationContent")&&e.remove()}};jr=new WeakMap,Us=new WeakMap,Ft=new WeakMap,xa=new WeakMap,Hi=new WeakMap,Lc=new WeakMap,Hr=new WeakMap,Ae=new WeakMap,zr=new WeakMap,Qn=new WeakMap,zi=new WeakMap,Dc=new WeakMap,Gr=new WeakMap,rs=new WeakMap,Oc=new WeakMap,Ur=new WeakMap,Jn=new WeakMap,bn=new WeakMap,_a=new WeakMap,Ca=new WeakMap,Ts=new WeakMap,Vr=new WeakMap,Nc=new WeakMap,fd=new WeakMap,Z=new WeakSet,qf=function([t,e],s,n){[s,n]=this.screenToPageTranslation(s,n),this.x+=s/t,this.y+=n/e,this._onTranslating(this.x,this.y),this.fixAndSetPosition()},Fc=new WeakSet,Xf=function(t,e,s){switch(s){case 90:return[e,-t];case 180:return[-t,-e];case 270:return[-e,t];default:return[t,e]}},_u=function(t){switch(t){case 90:{const[e,s]=this.pageDimensions;return[0,-e/s,s/e,0]}case 180:return[-1,0,0,-1];case 270:{const[e,s]=this.pageDimensions;return[0,e/s,-s/e,0]}default:return[1,0,0,1]}},Ab=function(){if(a(this,Ae))return;m(this,Ae,document.createElement("div")),a(this,Ae).classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],e=this._uiManager._signal;for(const s of t){const n=document.createElement("div");a(this,Ae).append(n),n.classList.add("resizer",s),n.setAttribute("data-resizer-name",s),n.addEventListener("pointerdown",A(this,Z,wb).bind(this,s),{signal:e}),n.addEventListener("contextmenu",Fs,{signal:e}),n.tabIndex=-1}this.div.prepend(a(this,Ae))},wb=function(t,e){var u;e.preventDefault();const{isMac:s}=ye.platform;if(e.button!==0||e.ctrlKey&&s)return;(u=a(this,Ft))==null||u.toggle(!1);const n=this._isDraggable;this._isDraggable=!1,m(this,zr,[e.screenX,e.screenY]);const r=new AbortController,o=this._uiManager.combinedSignal(r);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",A(this,Z,Kf).bind(this,t),{passive:!0,capture:!0,signal:o}),window.addEventListener("touchmove",Jt,{passive:!1,signal:o}),window.addEventListener("contextmenu",Fs,{signal:o}),m(this,Qn,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const l=this.parent.div.style.cursor,c=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(e.target).cursor;const h=()=>{var d;r.abort(),this.parent.togglePointerEvents(!0),(d=a(this,Ft))==null||d.toggle(!0),this._isDraggable=n,this.parent.div.style.cursor=l,this.div.style.cursor=c,A(this,Z,Cu).call(this)};window.addEventListener("pointerup",h,{signal:o}),window.addEventListener("blur",h,{signal:o})},Yf=function(t,e,s,n){this.width=s,this.height=n,this.x=t,this.y=e;const[r,o]=this.parentDimensions;this.setDims(r*s,o*n),this.fixAndSetPosition(),this._onResized()},Cu=function(){if(!a(this,Qn))return;const{savedX:t,savedY:e,savedWidth:s,savedHeight:n}=a(this,Qn);m(this,Qn,null);const r=this.x,o=this.y,l=this.width,c=this.height;r===t&&o===e&&l===s&&c===n||this.addCommands({cmd:A(this,Z,Yf).bind(this,r,o,l,c),undo:A(this,Z,Yf).bind(this,t,e,s,n),mustExec:!0})},Kf=function(t,e){const[s,n]=this.parentDimensions,r=this.x,o=this.y,l=this.width,c=this.height,h=ot.MIN_SIZE/s,u=ot.MIN_SIZE/n,d=A(this,Z,_u).call(this,this.rotation),f=(F,j)=>[d[0]*F+d[2]*j,d[1]*F+d[3]*j],p=A(this,Z,_u).call(this,360-this.rotation),y=(F,j)=>[p[0]*F+p[2]*j,p[1]*F+p[3]*j];let g,v,w=!1,_=!1;switch(t){case"topLeft":w=!0,g=(F,j)=>[0,0],v=(F,j)=>[F,j];break;case"topMiddle":g=(F,j)=>[F/2,0],v=(F,j)=>[F/2,j];break;case"topRight":w=!0,g=(F,j)=>[F,0],v=(F,j)=>[0,j];break;case"middleRight":_=!0,g=(F,j)=>[F,j/2],v=(F,j)=>[0,j/2];break;case"bottomRight":w=!0,g=(F,j)=>[F,j],v=(F,j)=>[0,0];break;case"bottomMiddle":g=(F,j)=>[F/2,j],v=(F,j)=>[F/2,0];break;case"bottomLeft":w=!0,g=(F,j)=>[0,j],v=(F,j)=>[F,0];break;case"middleLeft":_=!0,g=(F,j)=>[0,j/2],v=(F,j)=>[F,j/2];break}const C=g(l,c),x=v(l,c);let E=f(...x);const T=ot._round(r+E[0]),P=ot._round(o+E[1]);let M=1,D=1,S,k;if(e.fromKeyboard)({deltaX:S,deltaY:k}=e);else{const{screenX:F,screenY:j}=e,[lt,ut]=a(this,zr);[S,k]=this.screenToPageTranslation(F-lt,j-ut),a(this,zr)[0]=F,a(this,zr)[1]=j}if([S,k]=y(S/s,k/n),w){const F=Math.hypot(l,c);M=D=Math.max(Math.min(Math.hypot(x[0]-C[0]-S,x[1]-C[1]-k)/F,1/l,1/c),h/l,u/c)}else _?M=Oe(Math.abs(x[0]-C[0]-S),h,1)/l:D=Oe(Math.abs(x[1]-C[1]-k),u,1)/c;const N=ot._round(l*M),H=ot._round(c*D);E=f(...v(N,H));const z=T-E[0],q=P-E[1];a(this,rs)||m(this,rs,[this.x,this.y,this.width,this.height]),this.width=N,this.height=H,this.x=z,this.y=q,this.setDims(s*N,n*H),this.fixAndSetPosition(),this._onResizing()},Sb=function(){var t;m(this,Qn,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),(t=a(this,Ft))==null||t.toggle(!1),this.parent.togglePointerEvents(!1)},Eb=function(t,e,s){let r=.7*(s/e)+1-.7;if(r===1)return;const o=A(this,Z,_u).call(this,this.rotation),l=(T,P)=>[o[0]*T+o[2]*P,o[1]*T+o[3]*P],[c,h]=this.parentDimensions,u=this.x,d=this.y,f=this.width,p=this.height,y=ot.MIN_SIZE/c,g=ot.MIN_SIZE/h;r=Math.max(Math.min(r,1/f,1/p),y/f,g/p);const v=ot._round(f*r),w=ot._round(p*r);if(v===f&&w===p)return;a(this,rs)||m(this,rs,[u,d,f,p]);const _=l(f/2,p/2),C=ot._round(u+_[0]),x=ot._round(d+_[1]),E=l(v/2,w/2);this.x=C-E[0],this.y=x-E[1],this.width=v,this.height=w,this.setDims(c*v,h*w),this.fixAndSetPosition(),this._onResizing()},xb=function(){var t;(t=a(this,Ft))==null||t.toggle(!0),this.parent.togglePointerEvents(!0),A(this,Z,Cu).call(this)},Qf=function(t){const{isMac:e}=ye.platform;t.ctrlKey&&!e||t.shiftKey||t.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this)},_b=function(t){const{isSelected:e}=this;this._uiManager.setUpDragSession();let s=!1;const n=new AbortController,r=this._uiManager.combinedSignal(n),o={capture:!0,passive:!1,signal:r},l=h=>{n.abort(),m(this,Hi,null),m(this,Gr,!1),this._uiManager.endDragSession()||A(this,Z,Qf).call(this,h),s&&this._onStopDragging()};e&&(m(this,_a,t.clientX),m(this,Ca,t.clientY),m(this,Hi,t.pointerId),m(this,Lc,t.pointerType),window.addEventListener("pointermove",h=>{s||(s=!0,this._onStartDragging());const{clientX:u,clientY:d,pointerId:f}=h;if(f!==a(this,Hi)){Jt(h);return}const[p,y]=this.screenToPageTranslation(u-a(this,_a),d-a(this,Ca));m(this,_a,u),m(this,Ca,d),this._uiManager.dragSelectedEditors(p,y)},o),window.addEventListener("touchmove",Jt,o),window.addEventListener("pointerdown",h=>{h.pointerType===a(this,Lc)&&(a(this,Vr)||h.isPrimary)&&l(h),Jt(h)},o));const c=h=>{if(!a(this,Hi)||a(this,Hi)===h.pointerId){l(h);return}Jt(h)};window.addEventListener("pointerup",c,{signal:r}),window.addEventListener("blur",c,{signal:r})},Jf=function(){if(a(this,zi)||!this.div)return;m(this,zi,new AbortController);const t=this._uiManager.combinedSignal(a(this,zi));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:t}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:t})},Cb=function(t){ot._resizerKeyboardManager.exec(this,t)},Tb=function(t){var e;a(this,Jn)&&((e=t.relatedTarget)==null?void 0:e.parentNode)!==a(this,Ae)&&A(this,Z,Fl).call(this)},Pb=function(t){m(this,Dc,a(this,Jn)?t:"")},Zf=function(t){if(a(this,Us))for(const e of a(this,Us))e.tabIndex=t},Fl=function(){m(this,Jn,!1),A(this,Z,Zf).call(this,-1),A(this,Z,Cu).call(this)},b(ot,Fc),$(ot,"_l10n",null),$(ot,"_l10nResizer",null),$(ot,"_borderLineWidth",-1),$(ot,"_colorManager",new jf),$(ot,"_zIndex",1),$(ot,"_telemetryTimeout",1e3);let Nt=ot;class k1 extends Nt{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const Tm=3285377520,Es=4294901760,ln=65535;class Rb{constructor(t){this.h1=t?t&4294967295:Tm,this.h2=t?t&4294967295:Tm}update(t){let e,s;if(typeof t=="string"){e=new Uint8Array(t.length*2),s=0;for(let g=0,v=t.length;g<v;g++){const w=t.charCodeAt(g);w<=255?e[s++]=w:(e[s++]=w>>>8,e[s++]=w&255)}}else if(ArrayBuffer.isView(t))e=t.slice(),s=e.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const n=s>>2,r=s-n*4,o=new Uint32Array(e.buffer,0,n);let l=0,c=0,h=this.h1,u=this.h2;const d=3432918353,f=461845907,p=d&ln,y=f&ln;for(let g=0;g<n;g++)g&1?(l=o[g],l=l*d&Es|l*p&ln,l=l<<15|l>>>17,l=l*f&Es|l*y&ln,h^=l,h=h<<13|h>>>19,h=h*5+3864292196):(c=o[g],c=c*d&Es|c*p&ln,c=c<<15|c>>>17,c=c*f&Es|c*y&ln,u^=c,u=u<<13|u>>>19,u=u*5+3864292196);switch(l=0,r){case 3:l^=e[n*4+2]<<16;case 2:l^=e[n*4+1]<<8;case 1:l^=e[n*4],l=l*d&Es|l*p&ln,l=l<<15|l>>>17,l=l*f&Es|l*y&ln,n&1?h^=l:u^=l}this.h1=h,this.h2=u}hexdigest(){let t=this.h1,e=this.h2;return t^=e>>>1,t=t*3981806797&Es|t*36045&ln,e=e*4283543511&Es|((e<<16|t>>>16)*2950163797&Es)>>>16,t^=e>>>1,t=t*444984403&Es|t*60499&ln,e=e*3301882366&Es|((e<<16|t>>>16)*3120437893&Es)>>>16,t^=e>>>1,(t>>>0).toString(16).padStart(8,"0")+(e>>>0).toString(16).padStart(8,"0")}}const tp=Object.freeze({map:null,hash:"",transfer:void 0});var Wr,qr,we,pd,kb;class Ag{constructor(){b(this,pd);b(this,Wr,!1);b(this,qr,null);b(this,we,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,e){const s=a(this,we).get(t);return s===void 0?e:Object.assign(e,s)}getRawValue(t){return a(this,we).get(t)}remove(t){if(a(this,we).delete(t),a(this,we).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const e of a(this,we).values())if(e instanceof Nt)return;this.onAnnotationEditor(null)}}setValue(t,e){const s=a(this,we).get(t);let n=!1;if(s!==void 0)for(const[r,o]of Object.entries(e))s[r]!==o&&(n=!0,s[r]=o);else n=!0,a(this,we).set(t,e);n&&A(this,pd,kb).call(this),e instanceof Nt&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(e.constructor._type)}has(t){return a(this,we).has(t)}get size(){return a(this,we).size}resetModified(){a(this,Wr)&&(m(this,Wr,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new Ib(this)}get serializable(){if(a(this,we).size===0)return tp;const t=new Map,e=new Rb,s=[],n=Object.create(null);let r=!1;for(const[o,l]of a(this,we)){const c=l instanceof Nt?l.serialize(!1,n):l;c&&(t.set(o,c),e.update(`${o}:${JSON.stringify(c)}`),r||(r=!!c.bitmap))}if(r)for(const o of t.values())o.bitmap&&s.push(o.bitmap);return t.size>0?{map:t,hash:e.hexdigest(),transfer:s}:tp}get editorStats(){let t=null;const e=new Map;for(const s of a(this,we).values()){if(!(s instanceof Nt))continue;const n=s.telemetryFinalData;if(!n)continue;const{type:r}=n;e.has(r)||e.set(r,Object.getPrototypeOf(s).constructor),t||(t=Object.create(null));const o=t[r]||(t[r]=new Map);for(const[l,c]of Object.entries(n)){if(l==="type")continue;let h=o.get(l);h||(h=new Map,o.set(l,h));const u=h.get(c)??0;h.set(c,u+1)}}for(const[s,n]of e)t[s]=n.computeTelemetryFinalData(t[s]);return t}resetModifiedIds(){m(this,qr,null)}get modifiedIds(){if(a(this,qr))return a(this,qr);const t=[];for(const e of a(this,we).values())!(e instanceof Nt)||!e.annotationElementId||!e.serialize()||t.push(e.annotationElementId);return m(this,qr,{ids:new Set(t),hash:t.join(",")})}[Symbol.iterator](){return a(this,we).entries()}}Wr=new WeakMap,qr=new WeakMap,we=new WeakMap,pd=new WeakSet,kb=function(){a(this,Wr)||(m(this,Wr,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var $c;class Ib extends Ag{constructor(e){super();b(this,$c);const{map:s,hash:n,transfer:r}=e.serializable,o=structuredClone(s,r?{transfer:r}:null);m(this,$c,{map:o,hash:n,transfer:r})}get print(){Pt("Should not call PrintAnnotationStorage.print")}get serializable(){return a(this,$c)}get modifiedIds(){return dt(this,"modifiedIds",{ids:new Set,hash:""})}}$c=new WeakMap;var Ta;class I1{constructor({ownerDocument:t=globalThis.document,styleElement:e=null}){b(this,Ta,new Set);this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const e=this.styleElement.sheet;e.insertRule(t,e.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),a(this,Ta).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:t,disableFontFace:e,_inspectFont:s}){if(!(!t||a(this,Ta).has(t.loadedName))){if(re(!e,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:n,src:r,style:o}=t,l=new FontFace(n,r,o);this.addNativeFontFace(l);try{await l.load(),a(this,Ta).add(n),s==null||s(t)}catch{st(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(l)}return}Pt("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo){await this.loadSystemFont(t);return}if(this.isFontLoadingAPISupported){const s=t.createNativeFontFace();if(s){this.addNativeFontFace(s);try{await s.loaded}catch(n){throw st(`Failed to load font '${s.family}': '${n}'.`),t.disableFontFace=!0,n}}return}const e=t.createFontFaceRule();if(e){if(this.insertRule(e),this.isSyncFontLoadingSupported)return;await new Promise(s=>{const n=this._queueLoadingCallback(s);this._prepareFontLoadEvent(t,n)})}}get isFontLoadingAPISupported(){var e;const t=!!((e=this._document)!=null&&e.fonts);return dt(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){return dt(this,"isSyncFontLoadingSupported",Ge||ye.platform.isFirefox)}_queueLoadingCallback(t){function e(){for(re(!n.done,"completeRequest() cannot be called twice."),n.done=!0;s.length>0&&s[0].done;){const r=s.shift();setTimeout(r.callback,0)}}const{loadingRequests:s}=this,n={done:!1,complete:e,callback:t};return s.push(n),n}get _loadTestFont(){const t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return dt(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,e){function s(x,E){return x.charCodeAt(E)<<24|x.charCodeAt(E+1)<<16|x.charCodeAt(E+2)<<8|x.charCodeAt(E+3)&255}function n(x,E,T,P){const M=x.substring(0,E),D=x.substring(E+T);return M+P+D}let r,o;const l=this._document.createElement("canvas");l.width=1,l.height=1;const c=l.getContext("2d");let h=0;function u(x,E){if(++h>30){st("Load test font never loaded."),E();return}if(c.font="30px "+x,c.fillText(".",0,20),c.getImageData(0,0,1,1).data[3]>0){E();return}setTimeout(u.bind(null,x,E))}const d=`lt${Date.now()}${this.loadTestFontId++}`;let f=this._loadTestFont;f=n(f,976,d.length,d);const y=16,g=1482184792;let v=s(f,y);for(r=0,o=d.length-3;r<o;r+=4)v=v-g+s(d,r)|0;r<d.length&&(v=v-g+s(d+"XXX",r)|0),f=n(f,y,4,v1(v));const w=`url(data:font/opentype;base64,${btoa(f)});`,_=`@font-face {font-family:"${d}";src:${w}}`;this.insertRule(_);const C=this._document.createElement("div");C.style.visibility="hidden",C.style.width=C.style.height="10px",C.style.position="absolute",C.style.top=C.style.left="0px";for(const x of[t.loadedName,d]){const E=this._document.createElement("span");E.textContent="Hi",E.style.fontFamily=x,C.append(E)}this._document.body.append(C),u(d,()=>{C.remove(),e.complete()})}}Ta=new WeakMap;class M1{constructor(t,e=null){this.compiledGlyphs=Object.create(null);for(const s in t)this[s]=t[s];this._inspectFont=e}createNativeFontFace(){var e;if(!this.data||this.disableFontFace)return null;let t;if(!this.cssFontInfo)t=new FontFace(this.loadedName,this.data,{});else{const s={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(s.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,s)}return(e=this._inspectFont)==null||e.call(this,this),t}createFontFaceRule(){var s;if(!this.data||this.disableFontFace)return null;const t=`url(data:${this.mimetype};base64,${Xy(this.data)});`;let e;if(!this.cssFontInfo)e=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let n=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(n+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),e=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${n}src:${t}}`}return(s=this._inspectFont)==null||s.call(this,this,t),e}getPathGenerator(t,e){if(this.compiledGlyphs[e]!==void 0)return this.compiledGlyphs[e];const s=this.loadedName+"_path_"+e;let n;try{n=t.get(s)}catch(o){st(`getPathGenerator - ignoring character: "${o}".`)}const r=new Path2D(n||"");return this.fontExtraProperties||t.delete(s),this.compiledGlyphs[e]=r}}function L1(i){if(i instanceof URL)return i.href;if(typeof i=="string"){if(Ge)return i;const t=URL.parse(i,window.location);if(t)return t.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function D1(i){if(Ge&&typeof Buffer<"u"&&i instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(i instanceof Uint8Array&&i.byteLength===i.buffer.byteLength)return i;if(typeof i=="string")return Wh(i);if(i instanceof ArrayBuffer||ArrayBuffer.isView(i)||typeof i=="object"&&!isNaN(i==null?void 0:i.length))return new Uint8Array(i);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function lu(i){if(typeof i!="string")return null;if(i.endsWith("/"))return i;throw new Error(`Invalid factory url: "${i}" must include trailing slash.`)}const ep=i=>typeof i=="object"&&Number.isInteger(i==null?void 0:i.num)&&i.num>=0&&Number.isInteger(i==null?void 0:i.gen)&&i.gen>=0,O1=i=>typeof i=="object"&&typeof(i==null?void 0:i.name)=="string",Mb=E1.bind(null,ep,O1);var Zn,gd;class N1{constructor(){b(this,Zn,new Map);b(this,gd,Promise.resolve())}postMessage(t,e){const s={data:structuredClone(t,e?{transfer:e}:null)};a(this,gd).then(()=>{for(const[n]of a(this,Zn))n.call(this,s)})}addEventListener(t,e,s=null){let n=null;if((s==null?void 0:s.signal)instanceof AbortSignal){const{signal:r}=s;if(r.aborted){st("LoopbackPort - cannot use an `aborted` signal.");return}const o=()=>this.removeEventListener(t,e);n=()=>r.removeEventListener("abort",o),r.addEventListener("abort",o)}a(this,Zn).set(e,n)}removeEventListener(t,e){const s=a(this,Zn).get(e);s==null||s(),a(this,Zn).delete(e)}terminate(){for(const[,t]of a(this,Zn))t==null||t();a(this,Zn).clear()}}Zn=new WeakMap,gd=new WeakMap;const cu={DATA:1,ERROR:2},ne={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function Pm(){}function Xe(i){if(i instanceof Si||i instanceof td||i instanceof xm||i instanceof lc||i instanceof ff)return i;switch(i instanceof Error||typeof i=="object"&&i!==null||Pt('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),i.name){case"AbortException":return new Si(i.message);case"InvalidPDFException":return new td(i.message);case"PasswordException":return new xm(i.message,i.code);case"ResponseException":return new lc(i.message,i.status,i.missing);case"UnknownErrorException":return new ff(i.message,i.details)}return new ff(i.message,i.toString())}var Pa,Ns,Lb,Db,Ob,Tu;class $l{constructor(t,e,s){b(this,Ns);b(this,Pa,new AbortController);this.sourceName=t,this.targetName=e,this.comObj=s,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),s.addEventListener("message",A(this,Ns,Lb).bind(this),{signal:a(this,Pa).signal})}on(t,e){const s=this.actionHandler;if(s[t])throw new Error(`There is already an actionName called "${t}"`);s[t]=e}send(t,e,s){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},s)}sendWithPromise(t,e,s){const n=this.callbackId++,r=Promise.withResolvers();this.callbackCapabilities[n]=r;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:n,data:e},s)}catch(o){r.reject(o)}return r.promise}sendWithStream(t,e,s,n){const r=this.streamId++,o=this.sourceName,l=this.targetName,c=this.comObj;return new ReadableStream({start:h=>{const u=Promise.withResolvers();return this.streamControllers[r]={controller:h,startCall:u,pullCall:null,cancelCall:null,isClosed:!1},c.postMessage({sourceName:o,targetName:l,action:t,streamId:r,data:e,desiredSize:h.desiredSize},n),u.promise},pull:h=>{const u=Promise.withResolvers();return this.streamControllers[r].pullCall=u,c.postMessage({sourceName:o,targetName:l,stream:ne.PULL,streamId:r,desiredSize:h.desiredSize}),u.promise},cancel:h=>{re(h instanceof Error,"cancel must have a valid reason");const u=Promise.withResolvers();return this.streamControllers[r].cancelCall=u,this.streamControllers[r].isClosed=!0,c.postMessage({sourceName:o,targetName:l,stream:ne.CANCEL,streamId:r,reason:Xe(h)}),u.promise}},s)}destroy(){var t;(t=a(this,Pa))==null||t.abort(),m(this,Pa,null)}}Pa=new WeakMap,Ns=new WeakSet,Lb=function({data:t}){if(t.targetName!==this.sourceName)return;if(t.stream){A(this,Ns,Ob).call(this,t);return}if(t.callback){const s=t.callbackId,n=this.callbackCapabilities[s];if(!n)throw new Error(`Cannot resolve callback ${s}`);if(delete this.callbackCapabilities[s],t.callback===cu.DATA)n.resolve(t.data);else if(t.callback===cu.ERROR)n.reject(Xe(t.reason));else throw new Error("Unexpected callback case");return}const e=this.actionHandler[t.action];if(!e)throw new Error(`Unknown action from worker: ${t.action}`);if(t.callbackId){const s=this.sourceName,n=t.sourceName,r=this.comObj;Promise.try(e,t.data).then(function(o){r.postMessage({sourceName:s,targetName:n,callback:cu.DATA,callbackId:t.callbackId,data:o})},function(o){r.postMessage({sourceName:s,targetName:n,callback:cu.ERROR,callbackId:t.callbackId,reason:Xe(o)})});return}if(t.streamId){A(this,Ns,Db).call(this,t);return}e(t.data)},Db=function(t){const e=t.streamId,s=this.sourceName,n=t.sourceName,r=this.comObj,o=this,l=this.actionHandler[t.action],c={enqueue(h,u=1,d){if(this.isCancelled)return;const f=this.desiredSize;this.desiredSize-=u,f>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),r.postMessage({sourceName:s,targetName:n,stream:ne.ENQUEUE,streamId:e,chunk:h},d)},close(){this.isCancelled||(this.isCancelled=!0,r.postMessage({sourceName:s,targetName:n,stream:ne.CLOSE,streamId:e}),delete o.streamSinks[e])},error(h){re(h instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,r.postMessage({sourceName:s,targetName:n,stream:ne.ERROR,streamId:e,reason:Xe(h)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};c.sinkCapability.resolve(),c.ready=c.sinkCapability.promise,this.streamSinks[e]=c,Promise.try(l,t.data,c).then(function(){r.postMessage({sourceName:s,targetName:n,stream:ne.START_COMPLETE,streamId:e,success:!0})},function(h){r.postMessage({sourceName:s,targetName:n,stream:ne.START_COMPLETE,streamId:e,reason:Xe(h)})})},Ob=function(t){const e=t.streamId,s=this.sourceName,n=t.sourceName,r=this.comObj,o=this.streamControllers[e],l=this.streamSinks[e];switch(t.stream){case ne.START_COMPLETE:t.success?o.startCall.resolve():o.startCall.reject(Xe(t.reason));break;case ne.PULL_COMPLETE:t.success?o.pullCall.resolve():o.pullCall.reject(Xe(t.reason));break;case ne.PULL:if(!l){r.postMessage({sourceName:s,targetName:n,stream:ne.PULL_COMPLETE,streamId:e,success:!0});break}l.desiredSize<=0&&t.desiredSize>0&&l.sinkCapability.resolve(),l.desiredSize=t.desiredSize,Promise.try(l.onPull||Pm).then(function(){r.postMessage({sourceName:s,targetName:n,stream:ne.PULL_COMPLETE,streamId:e,success:!0})},function(h){r.postMessage({sourceName:s,targetName:n,stream:ne.PULL_COMPLETE,streamId:e,reason:Xe(h)})});break;case ne.ENQUEUE:if(re(o,"enqueue should have stream controller"),o.isClosed)break;o.controller.enqueue(t.chunk);break;case ne.CLOSE:if(re(o,"close should have stream controller"),o.isClosed)break;o.isClosed=!0,o.controller.close(),A(this,Ns,Tu).call(this,o,e);break;case ne.ERROR:re(o,"error should have stream controller"),o.controller.error(Xe(t.reason)),A(this,Ns,Tu).call(this,o,e);break;case ne.CANCEL_COMPLETE:t.success?o.cancelCall.resolve():o.cancelCall.reject(Xe(t.reason)),A(this,Ns,Tu).call(this,o,e);break;case ne.CANCEL:if(!l)break;const c=Xe(t.reason);Promise.try(l.onCancel||Pm,c).then(function(){r.postMessage({sourceName:s,targetName:n,stream:ne.CANCEL_COMPLETE,streamId:e,success:!0})},function(h){r.postMessage({sourceName:s,targetName:n,stream:ne.CANCEL_COMPLETE,streamId:e,reason:Xe(h)})}),l.sinkCapability.reject(c),l.isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}},Tu=async function(t,e){var s,n,r;await Promise.allSettled([(s=t.startCall)==null?void 0:s.promise,(n=t.pullCall)==null?void 0:n.promise,(r=t.cancelCall)==null?void 0:r.promise]),delete this.streamControllers[e]};var Bc;class Nb{constructor({enableHWA:t=!1}){b(this,Bc,!1);m(this,Bc,t)}create(t,e){if(t<=0||e<=0)throw new Error("Invalid canvas size");const s=this._createCanvas(t,e);return{canvas:s,context:s.getContext("2d",{willReadFrequently:!a(this,Bc)})}}reset(t,e,s){if(!t.canvas)throw new Error("Canvas is not specified");if(e<=0||s<=0)throw new Error("Invalid canvas size");t.canvas.width=e,t.canvas.height=s}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,e){Pt("Abstract method `_createCanvas` called.")}}Bc=new WeakMap;class F1 extends Nb{constructor({ownerDocument:t=globalThis.document,enableHWA:e=!1}){super({enableHWA:e}),this._document=t}_createCanvas(t,e){const s=this._document.createElement("canvas");return s.width=t,s.height=e,s}}class Fb{constructor({baseUrl:t=null,isCompressed:e=!0}){this.baseUrl=t,this.isCompressed=e}async fetch({name:t}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");const e=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(e).then(s=>({cMapData:s,isCompressed:this.isCompressed})).catch(s=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${e}`)})}async _fetch(t){Pt("Abstract method `_fetch` called.")}}class Rm extends Fb{async _fetch(t){const e=await El(t,this.isCompressed?"arraybuffer":"text");return e instanceof ArrayBuffer?new Uint8Array(e):Wh(e)}}class $b{addFilter(t){return"none"}addHCMFilter(t,e){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,e,s,n,r){return"none"}destroy(t=!1){}}var Xr,Ra,ti,ei,Me,Yr,Kr,W,ke,Bl,Qo,Pu,Jo,Bb,sp,Zo,jl,Hl,np,zl;class $1 extends $b{constructor({docId:e,ownerDocument:s=globalThis.document}){super();b(this,W);b(this,Xr);b(this,Ra);b(this,ti);b(this,ei);b(this,Me);b(this,Yr);b(this,Kr,0);m(this,ei,e),m(this,Me,s)}addFilter(e){if(!e)return"none";let s=a(this,W,ke).get(e);if(s)return s;const[n,r,o]=A(this,W,Pu).call(this,e),l=e.length===1?n:`${n}${r}${o}`;if(s=a(this,W,ke).get(l),s)return a(this,W,ke).set(e,s),s;const c=`g_${a(this,ei)}_transfer_map_${Fe(this,Kr)._++}`,h=A(this,W,Jo).call(this,c);a(this,W,ke).set(e,h),a(this,W,ke).set(l,h);const u=A(this,W,Zo).call(this,c);return A(this,W,Hl).call(this,n,r,o,u),h}addHCMFilter(e,s){var y;const n=`${e}-${s}`,r="base";let o=a(this,W,Bl).get(r);if((o==null?void 0:o.key)===n||(o?((y=o.filter)==null||y.remove(),o.key=n,o.url="none",o.filter=null):(o={key:n,url:"none",filter:null},a(this,W,Bl).set(r,o)),!e||!s))return o.url;const l=A(this,W,zl).call(this,e);e=Q.makeHexColor(...l);const c=A(this,W,zl).call(this,s);if(s=Q.makeHexColor(...c),a(this,W,Qo).style.color="",e==="#000000"&&s==="#ffffff"||e===s)return o.url;const h=new Array(256);for(let g=0;g<=255;g++){const v=g/255;h[g]=v<=.03928?v/12.92:((v+.055)/1.055)**2.4}const u=h.join(","),d=`g_${a(this,ei)}_hcm_filter`,f=o.filter=A(this,W,Zo).call(this,d);A(this,W,Hl).call(this,u,u,u,f),A(this,W,sp).call(this,f);const p=(g,v)=>{const w=l[g]/255,_=c[g]/255,C=new Array(v+1);for(let x=0;x<=v;x++)C[x]=w+x/v*(_-w);return C.join(",")};return A(this,W,Hl).call(this,p(0,5),p(1,5),p(2,5),f),o.url=A(this,W,Jo).call(this,d),o.url}addAlphaFilter(e){let s=a(this,W,ke).get(e);if(s)return s;const[n]=A(this,W,Pu).call(this,[e]),r=`alpha_${n}`;if(s=a(this,W,ke).get(r),s)return a(this,W,ke).set(e,s),s;const o=`g_${a(this,ei)}_alpha_map_${Fe(this,Kr)._++}`,l=A(this,W,Jo).call(this,o);a(this,W,ke).set(e,l),a(this,W,ke).set(r,l);const c=A(this,W,Zo).call(this,o);return A(this,W,np).call(this,n,c),l}addLuminosityFilter(e){let s=a(this,W,ke).get(e||"luminosity");if(s)return s;let n,r;if(e?([n]=A(this,W,Pu).call(this,[e]),r=`luminosity_${n}`):r="luminosity",s=a(this,W,ke).get(r),s)return a(this,W,ke).set(e,s),s;const o=`g_${a(this,ei)}_luminosity_map_${Fe(this,Kr)._++}`,l=A(this,W,Jo).call(this,o);a(this,W,ke).set(e,l),a(this,W,ke).set(r,l);const c=A(this,W,Zo).call(this,o);return A(this,W,Bb).call(this,c),e&&A(this,W,np).call(this,n,c),l}addHighlightHCMFilter(e,s,n,r,o){var _;const l=`${s}-${n}-${r}-${o}`;let c=a(this,W,Bl).get(e);if((c==null?void 0:c.key)===l||(c?((_=c.filter)==null||_.remove(),c.key=l,c.url="none",c.filter=null):(c={key:l,url:"none",filter:null},a(this,W,Bl).set(e,c)),!s||!n))return c.url;const[h,u]=[s,n].map(A(this,W,zl).bind(this));let d=Math.round(.2126*h[0]+.7152*h[1]+.0722*h[2]),f=Math.round(.2126*u[0]+.7152*u[1]+.0722*u[2]),[p,y]=[r,o].map(A(this,W,zl).bind(this));f<d&&([d,f,p,y]=[f,d,y,p]),a(this,W,Qo).style.color="";const g=(C,x,E)=>{const T=new Array(256),P=(f-d)/E,M=C/255,D=(x-C)/(255*E);let S=0;for(let k=0;k<=E;k++){const N=Math.round(d+k*P),H=M+k*D;for(let z=S;z<=N;z++)T[z]=H;S=N+1}for(let k=S;k<256;k++)T[k]=T[S-1];return T.join(",")},v=`g_${a(this,ei)}_hcm_${e}_filter`,w=c.filter=A(this,W,Zo).call(this,v);return A(this,W,sp).call(this,w),A(this,W,Hl).call(this,g(p[0],y[0],5),g(p[1],y[1],5),g(p[2],y[2],5),w),c.url=A(this,W,Jo).call(this,v),c.url}destroy(e=!1){var s,n,r,o;e&&((s=a(this,Yr))!=null&&s.size)||((n=a(this,ti))==null||n.parentNode.parentNode.remove(),m(this,ti,null),(r=a(this,Ra))==null||r.clear(),m(this,Ra,null),(o=a(this,Yr))==null||o.clear(),m(this,Yr,null),m(this,Kr,0))}}Xr=new WeakMap,Ra=new WeakMap,ti=new WeakMap,ei=new WeakMap,Me=new WeakMap,Yr=new WeakMap,Kr=new WeakMap,W=new WeakSet,ke=function(){return a(this,Ra)||m(this,Ra,new Map)},Bl=function(){return a(this,Yr)||m(this,Yr,new Map)},Qo=function(){if(!a(this,ti)){const e=a(this,Me).createElement("div"),{style:s}=e;s.visibility="hidden",s.contain="strict",s.width=s.height=0,s.position="absolute",s.top=s.left=0,s.zIndex=-1;const n=a(this,Me).createElementNS(Bn,"svg");n.setAttribute("width",0),n.setAttribute("height",0),m(this,ti,a(this,Me).createElementNS(Bn,"defs")),e.append(n),n.append(a(this,ti)),a(this,Me).body.append(e)}return a(this,ti)},Pu=function(e){if(e.length===1){const h=e[0],u=new Array(256);for(let f=0;f<256;f++)u[f]=h[f]/255;const d=u.join(",");return[d,d,d]}const[s,n,r]=e,o=new Array(256),l=new Array(256),c=new Array(256);for(let h=0;h<256;h++)o[h]=s[h]/255,l[h]=n[h]/255,c[h]=r[h]/255;return[o.join(","),l.join(","),c.join(",")]},Jo=function(e){if(a(this,Xr)===void 0){m(this,Xr,"");const s=a(this,Me).URL;s!==a(this,Me).baseURI&&(Xh(s)?st('#createUrl: ignore "data:"-URL for performance reasons.'):m(this,Xr,mg(s,"")))}return`url(${a(this,Xr)}#${e})`},Bb=function(e){const s=a(this,Me).createElementNS(Bn,"feColorMatrix");s.setAttribute("type","matrix"),s.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),e.append(s)},sp=function(e){const s=a(this,Me).createElementNS(Bn,"feColorMatrix");s.setAttribute("type","matrix"),s.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),e.append(s)},Zo=function(e){const s=a(this,Me).createElementNS(Bn,"filter");return s.setAttribute("color-interpolation-filters","sRGB"),s.setAttribute("id",e),a(this,W,Qo).append(s),s},jl=function(e,s,n){const r=a(this,Me).createElementNS(Bn,s);r.setAttribute("type","discrete"),r.setAttribute("tableValues",n),e.append(r)},Hl=function(e,s,n,r){const o=a(this,Me).createElementNS(Bn,"feComponentTransfer");r.append(o),A(this,W,jl).call(this,o,"feFuncR",e),A(this,W,jl).call(this,o,"feFuncG",s),A(this,W,jl).call(this,o,"feFuncB",n)},np=function(e,s){const n=a(this,Me).createElementNS(Bn,"feComponentTransfer");s.append(n),A(this,W,jl).call(this,n,"feFuncA",e)},zl=function(e){return a(this,W,Qo).style.color=e,vg(getComputedStyle(a(this,W,Qo)).getPropertyValue("color"))};class jb{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(s=>{throw new Error(`Unable to load font data at: ${e}`)})}async _fetch(t){Pt("Abstract method `_fetch` called.")}}class km extends jb{async _fetch(t){const e=await El(t,"arraybuffer");return new Uint8Array(e)}}class Hb{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!t)throw new Error("Wasm filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(s=>{throw new Error(`Unable to load wasm data at: ${e}`)})}async _fetch(t){Pt("Abstract method `_fetch` called.")}}class Im extends Hb{async _fetch(t){const e=await El(t,"arraybuffer");return new Uint8Array(e)}}Ge&&st("Please use the `legacy` build in Node.js environments.");async function wg(i){const e=await process.getBuiltinModule("fs").promises.readFile(i);return new Uint8Array(e)}class B1 extends $b{}class j1 extends Nb{_createCanvas(t,e){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(t,e)}}class H1 extends Fb{async _fetch(t){return wg(t)}}class z1 extends jb{async _fetch(t){return wg(t)}}class G1 extends Hb{async _fetch(t){return wg(t)}}const xe={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function ip(i,t){if(!t)return;const e=t[2]-t[0],s=t[3]-t[1],n=new Path2D;n.rect(t[0],t[1],e,s),i.clip(n)}class Sg{isModifyingCurrentTransform(){return!1}getPattern(){Pt("Abstract method `getPattern` called.")}}class U1 extends Sg{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}_createGradient(t){let e;this._type==="axial"?e=t.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(e=t.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const s of this._colorStops)e.addColorStop(s[0],s[1]);return e}getPattern(t,e,s,n){let r;if(n===xe.STROKE||n===xe.FILL){const o=e.current.getClippedPathBoundingBox(n,Ut(t))||[0,0,0,0],l=Math.ceil(o[2]-o[0])||1,c=Math.ceil(o[3]-o[1])||1,h=e.cachedCanvases.getCanvas("pattern",l,c),u=h.context;u.clearRect(0,0,u.canvas.width,u.canvas.height),u.beginPath(),u.rect(0,0,u.canvas.width,u.canvas.height),u.translate(-o[0],-o[1]),s=Q.transform(s,[1,0,0,1,o[0],o[1]]),u.transform(...e.baseTransform),this.matrix&&u.transform(...this.matrix),ip(u,this._bbox),u.fillStyle=this._createGradient(u),u.fill(),r=t.createPattern(h.canvas,"no-repeat");const d=new DOMMatrix(s);r.setTransform(d)}else ip(t,this._bbox),r=this._createGradient(t);return r}}function mf(i,t,e,s,n,r,o,l){const c=t.coords,h=t.colors,u=i.data,d=i.width*4;let f;c[e+1]>c[s+1]&&(f=e,e=s,s=f,f=r,r=o,o=f),c[s+1]>c[n+1]&&(f=s,s=n,n=f,f=o,o=l,l=f),c[e+1]>c[s+1]&&(f=e,e=s,s=f,f=r,r=o,o=f);const p=(c[e]+t.offsetX)*t.scaleX,y=(c[e+1]+t.offsetY)*t.scaleY,g=(c[s]+t.offsetX)*t.scaleX,v=(c[s+1]+t.offsetY)*t.scaleY,w=(c[n]+t.offsetX)*t.scaleX,_=(c[n+1]+t.offsetY)*t.scaleY;if(y>=_)return;const C=h[r],x=h[r+1],E=h[r+2],T=h[o],P=h[o+1],M=h[o+2],D=h[l],S=h[l+1],k=h[l+2],N=Math.round(y),H=Math.round(_);let z,q,F,j,lt,ut,R,O;for(let U=N;U<=H;U++){if(U<v){const ct=U<y?0:(y-U)/(y-v);z=p-(p-g)*ct,q=C-(C-T)*ct,F=x-(x-P)*ct,j=E-(E-M)*ct}else{let ct;U>_?ct=1:v===_?ct=0:ct=(v-U)/(v-_),z=g-(g-w)*ct,q=T-(T-D)*ct,F=P-(P-S)*ct,j=M-(M-k)*ct}let V;U<y?V=0:U>_?V=1:V=(y-U)/(y-_),lt=p-(p-w)*V,ut=C-(C-D)*V,R=x-(x-S)*V,O=E-(E-k)*V;const tt=Math.round(Math.min(z,lt)),at=Math.round(Math.max(z,lt));let J=d*U+tt*4;for(let ct=tt;ct<=at;ct++)V=(z-ct)/(z-lt),V<0?V=0:V>1&&(V=1),u[J++]=q-(q-ut)*V|0,u[J++]=F-(F-R)*V|0,u[J++]=j-(j-O)*V|0,u[J++]=255}}function V1(i,t,e){const s=t.coords,n=t.colors;let r,o;switch(t.type){case"lattice":const l=t.verticesPerRow,c=Math.floor(s.length/l)-1,h=l-1;for(r=0;r<c;r++){let u=r*l;for(let d=0;d<h;d++,u++)mf(i,e,s[u],s[u+1],s[u+l],n[u],n[u+1],n[u+l]),mf(i,e,s[u+l+1],s[u+1],s[u+l],n[u+l+1],n[u+1],n[u+l])}break;case"triangles":for(r=0,o=s.length;r<o;r+=3)mf(i,e,s[r],s[r+1],s[r+2],n[r],n[r+1],n[r+2]);break;default:throw new Error("illegal figure")}}class W1 extends Sg{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[6],this._background=t[7],this.matrix=null}_createMeshCanvas(t,e,s){const l=Math.floor(this._bounds[0]),c=Math.floor(this._bounds[1]),h=Math.ceil(this._bounds[2])-l,u=Math.ceil(this._bounds[3])-c,d=Math.min(Math.ceil(Math.abs(h*t[0]*1.1)),3e3),f=Math.min(Math.ceil(Math.abs(u*t[1]*1.1)),3e3),p=h/d,y=u/f,g={coords:this._coords,colors:this._colors,offsetX:-l,offsetY:-c,scaleX:1/p,scaleY:1/y},v=d+2*2,w=f+2*2,_=s.getCanvas("mesh",v,w),C=_.context,x=C.createImageData(d,f);if(e){const T=x.data;for(let P=0,M=T.length;P<M;P+=4)T[P]=e[0],T[P+1]=e[1],T[P+2]=e[2],T[P+3]=255}for(const T of this._figures)V1(x,T,g);return C.putImageData(x,2,2),{canvas:_.canvas,offsetX:l-2*p,offsetY:c-2*y,scaleX:p,scaleY:y}}isModifyingCurrentTransform(){return!0}getPattern(t,e,s,n){ip(t,this._bbox);const r=new Float32Array(2);if(n===xe.SHADING)Q.singularValueDecompose2dScale(Ut(t),r);else if(this.matrix){Q.singularValueDecompose2dScale(this.matrix,r);const[l,c]=r;Q.singularValueDecompose2dScale(e.baseTransform,r),r[0]*=l,r[1]*=c}else Q.singularValueDecompose2dScale(e.baseTransform,r);const o=this._createMeshCanvas(r,n===xe.SHADING?null:this._background,e.cachedCanvases);return n!==xe.SHADING&&(t.setTransform(...e.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(o.offsetX,o.offsetY),t.scale(o.scaleX,o.scaleY),t.createPattern(o.canvas,"no-repeat")}}class q1 extends Sg{getPattern(){return"hotpink"}}function X1(i){switch(i[0]){case"RadialAxial":return new U1(i);case"Mesh":return new W1(i);case"Dummy":return new q1}throw new Error(`Unknown IR type: ${i[0]}`)}const Mm={COLORED:1,UNCOLORED:2},md=class md{constructor(t,e,s,n){this.color=t[1],this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.ctx=e,this.canvasGraphicsFactory=s,this.baseTransform=n}createPatternCanvas(t){const{bbox:e,operatorList:s,paintType:n,tilingType:r,color:o,canvasGraphicsFactory:l}=this;let{xstep:c,ystep:h}=this;c=Math.abs(c),h=Math.abs(h),zd("TilingType: "+r);const u=e[0],d=e[1],f=e[2],p=e[3],y=f-u,g=p-d,v=new Float32Array(2);Q.singularValueDecompose2dScale(this.matrix,v);const[w,_]=v;Q.singularValueDecompose2dScale(this.baseTransform,v);const C=w*v[0],x=_*v[1];let E=y,T=g,P=!1,M=!1;const D=Math.ceil(c*C),S=Math.ceil(h*x),k=Math.ceil(y*C),N=Math.ceil(g*x);D>=k?E=c:P=!0,S>=N?T=h:M=!0;const H=this.getSizeAndScale(E,this.ctx.canvas.width,C),z=this.getSizeAndScale(T,this.ctx.canvas.height,x),q=t.cachedCanvases.getCanvas("pattern",H.size,z.size),F=q.context,j=l.createCanvasGraphics(F);if(j.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(j,n,o),F.translate(-H.scale*u,-z.scale*d),j.transform(H.scale,0,0,z.scale,0,0),F.save(),this.clipBbox(j,u,d,f,p),j.baseTransform=Ut(j.ctx),j.executeOperatorList(s),j.endDrawing(),F.restore(),P||M){const lt=q.canvas;P&&(E=c),M&&(T=h);const ut=this.getSizeAndScale(E,this.ctx.canvas.width,C),R=this.getSizeAndScale(T,this.ctx.canvas.height,x),O=ut.size,U=R.size,V=t.cachedCanvases.getCanvas("pattern-workaround",O,U),tt=V.context,at=P?Math.floor(y/c):0,J=M?Math.floor(g/h):0;for(let ct=0;ct<=at;ct++)for(let yt=0;yt<=J;yt++)tt.drawImage(lt,O*ct,U*yt,O,U,0,0,O,U);return{canvas:V.canvas,scaleX:ut.scale,scaleY:R.scale,offsetX:u,offsetY:d}}return{canvas:q.canvas,scaleX:H.scale,scaleY:z.scale,offsetX:u,offsetY:d}}getSizeAndScale(t,e,s){const n=Math.max(md.MAX_PATTERN_SIZE,e);let r=Math.ceil(t*s);return r>=n?r=n:s=r/t,{scale:s,size:r}}clipBbox(t,e,s,n,r){const o=n-e,l=r-s;t.ctx.rect(e,s,o,l),Q.axialAlignedBoundingBox([e,s,n,r],Ut(t.ctx),t.current.minMax),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,e,s){const n=t.ctx,r=t.current;switch(e){case Mm.COLORED:const{fillStyle:o,strokeStyle:l}=this.ctx;n.fillStyle=r.fillColor=o,n.strokeStyle=r.strokeColor=l;break;case Mm.UNCOLORED:n.fillStyle=n.strokeStyle=s,r.fillColor=r.strokeColor=s;break;default:throw new b1(`Unsupported paint type: ${e}`)}}isModifyingCurrentTransform(){return!1}getPattern(t,e,s,n){let r=s;n!==xe.SHADING&&(r=Q.transform(r,e.baseTransform),this.matrix&&(r=Q.transform(r,this.matrix)));const o=this.createPatternCanvas(e);let l=new DOMMatrix(r);l=l.translate(o.offsetX,o.offsetY),l=l.scale(1/o.scaleX,1/o.scaleY);const c=t.createPattern(o.canvas,"repeat");return c.setTransform(l),c}};$(md,"MAX_PATTERN_SIZE",3e3);let rp=md;function Y1({src:i,srcPos:t=0,dest:e,width:s,height:n,nonBlackColor:r=4294967295,inverseDecode:o=!1}){const l=ye.isLittleEndian?4278190080:255,[c,h]=o?[r,l]:[l,r],u=s>>3,d=s&7,f=i.length;e=new Uint32Array(e.buffer);let p=0;for(let y=0;y<n;y++){for(const v=t+u;t<v;t++){const w=t<f?i[t]:255;e[p++]=w&128?h:c,e[p++]=w&64?h:c,e[p++]=w&32?h:c,e[p++]=w&16?h:c,e[p++]=w&8?h:c,e[p++]=w&4?h:c,e[p++]=w&2?h:c,e[p++]=w&1?h:c}if(d===0)continue;const g=t<f?i[t++]:255;for(let v=0;v<d;v++)e[p++]=g&1<<7-v?h:c}return{srcPos:t,destPos:p}}const Lm=16,Dm=100,K1=15,Om=10,Ze=16,yf=new DOMMatrix,ys=new Float32Array(2),ia=new Float32Array([1/0,1/0,-1/0,-1/0]);function Q1(i,t){if(i._removeMirroring)throw new Error("Context is already forwarding operations.");i.__originalSave=i.save,i.__originalRestore=i.restore,i.__originalRotate=i.rotate,i.__originalScale=i.scale,i.__originalTranslate=i.translate,i.__originalTransform=i.transform,i.__originalSetTransform=i.setTransform,i.__originalResetTransform=i.resetTransform,i.__originalClip=i.clip,i.__originalMoveTo=i.moveTo,i.__originalLineTo=i.lineTo,i.__originalBezierCurveTo=i.bezierCurveTo,i.__originalRect=i.rect,i.__originalClosePath=i.closePath,i.__originalBeginPath=i.beginPath,i._removeMirroring=()=>{i.save=i.__originalSave,i.restore=i.__originalRestore,i.rotate=i.__originalRotate,i.scale=i.__originalScale,i.translate=i.__originalTranslate,i.transform=i.__originalTransform,i.setTransform=i.__originalSetTransform,i.resetTransform=i.__originalResetTransform,i.clip=i.__originalClip,i.moveTo=i.__originalMoveTo,i.lineTo=i.__originalLineTo,i.bezierCurveTo=i.__originalBezierCurveTo,i.rect=i.__originalRect,i.closePath=i.__originalClosePath,i.beginPath=i.__originalBeginPath,delete i._removeMirroring},i.save=function(){t.save(),this.__originalSave()},i.restore=function(){t.restore(),this.__originalRestore()},i.translate=function(e,s){t.translate(e,s),this.__originalTranslate(e,s)},i.scale=function(e,s){t.scale(e,s),this.__originalScale(e,s)},i.transform=function(e,s,n,r,o,l){t.transform(e,s,n,r,o,l),this.__originalTransform(e,s,n,r,o,l)},i.setTransform=function(e,s,n,r,o,l){t.setTransform(e,s,n,r,o,l),this.__originalSetTransform(e,s,n,r,o,l)},i.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},i.rotate=function(e){t.rotate(e),this.__originalRotate(e)},i.clip=function(e){t.clip(e),this.__originalClip(e)},i.moveTo=function(e,s){t.moveTo(e,s),this.__originalMoveTo(e,s)},i.lineTo=function(e,s){t.lineTo(e,s),this.__originalLineTo(e,s)},i.bezierCurveTo=function(e,s,n,r,o,l){t.bezierCurveTo(e,s,n,r,o,l),this.__originalBezierCurveTo(e,s,n,r,o,l)},i.rect=function(e,s,n,r){t.rect(e,s,n,r),this.__originalRect(e,s,n,r)},i.closePath=function(){t.closePath(),this.__originalClosePath()},i.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}class J1{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,e,s){let n;return this.cache[t]!==void 0?(n=this.cache[t],this.canvasFactory.reset(n,e,s)):(n=this.canvasFactory.create(e,s),this.cache[t]=n),n}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const e=this.cache[t];this.canvasFactory.destroy(e),delete this.cache[t]}}}function hu(i,t,e,s,n,r,o,l,c,h){const[u,d,f,p,y,g]=Ut(i);if(d===0&&f===0){const _=o*u+y,C=Math.round(_),x=l*p+g,E=Math.round(x),T=(o+c)*u+y,P=Math.abs(Math.round(T)-C)||1,M=(l+h)*p+g,D=Math.abs(Math.round(M)-E)||1;return i.setTransform(Math.sign(u),0,0,Math.sign(p),C,E),i.drawImage(t,e,s,n,r,0,0,P,D),i.setTransform(u,d,f,p,y,g),[P,D]}if(u===0&&p===0){const _=l*f+y,C=Math.round(_),x=o*d+g,E=Math.round(x),T=(l+h)*f+y,P=Math.abs(Math.round(T)-C)||1,M=(o+c)*d+g,D=Math.abs(Math.round(M)-E)||1;return i.setTransform(0,Math.sign(d),Math.sign(f),0,C,E),i.drawImage(t,e,s,n,r,0,0,D,P),i.setTransform(u,d,f,p,y,g),[D,P]}i.drawImage(t,e,s,n,r,o,l,c,h);const v=Math.hypot(u,d),w=Math.hypot(f,p);return[v*c,w*h]}class Nm{constructor(t,e){$(this,"alphaIsShape",!1);$(this,"fontSize",0);$(this,"fontSizeScale",1);$(this,"textMatrix",null);$(this,"textMatrixScale",1);$(this,"fontMatrix",Nf);$(this,"leading",0);$(this,"x",0);$(this,"y",0);$(this,"lineX",0);$(this,"lineY",0);$(this,"charSpacing",0);$(this,"wordSpacing",0);$(this,"textHScale",1);$(this,"textRenderingMode",Re.FILL);$(this,"textRise",0);$(this,"fillColor","#000000");$(this,"strokeColor","#000000");$(this,"patternFill",!1);$(this,"patternStroke",!1);$(this,"fillAlpha",1);$(this,"strokeAlpha",1);$(this,"lineWidth",1);$(this,"activeSMask",null);$(this,"transferMaps","none");this.clipBox=new Float32Array([0,0,t,e]),this.minMax=ia.slice()}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t.minMax=this.minMax.slice(),t}getPathBoundingBox(t=xe.FILL,e=null){const s=this.minMax.slice();if(t===xe.STROKE){e||Pt("Stroke bounding box must include transform."),Q.singularValueDecompose2dScale(e,ys);const n=ys[0]*this.lineWidth/2,r=ys[1]*this.lineWidth/2;s[0]-=n,s[1]-=r,s[2]+=n,s[3]+=r}return s}updateClipFromPath(){const t=Q.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(t){this.clipBox.set(t,0),this.minMax.set(ia,0)}getClippedPathBoundingBox(t=xe.FILL,e=null){return Q.intersect(this.clipBox,this.getPathBoundingBox(t,e))}}function Fm(i,t){if(t instanceof ImageData){i.putImageData(t,0,0);return}const e=t.height,s=t.width,n=e%Ze,r=(e-n)/Ze,o=n===0?r:r+1,l=i.createImageData(s,Ze);let c=0,h;const u=t.data,d=l.data;let f,p,y,g;if(t.kind===Zl.GRAYSCALE_1BPP){const v=u.byteLength,w=new Uint32Array(d.buffer,0,d.byteLength>>2),_=w.length,C=s+7>>3,x=4294967295,E=ye.isLittleEndian?4278190080:255;for(f=0;f<o;f++){for(y=f<r?Ze:n,h=0,p=0;p<y;p++){const T=v-c;let P=0;const M=T>C?s:T*8-7,D=M&-8;let S=0,k=0;for(;P<D;P+=8)k=u[c++],w[h++]=k&128?x:E,w[h++]=k&64?x:E,w[h++]=k&32?x:E,w[h++]=k&16?x:E,w[h++]=k&8?x:E,w[h++]=k&4?x:E,w[h++]=k&2?x:E,w[h++]=k&1?x:E;for(;P<M;P++)S===0&&(k=u[c++],S=128),w[h++]=k&S?x:E,S>>=1}for(;h<_;)w[h++]=0;i.putImageData(l,0,f*Ze)}}else if(t.kind===Zl.RGBA_32BPP){for(p=0,g=s*Ze*4,f=0;f<r;f++)d.set(u.subarray(c,c+g)),c+=g,i.putImageData(l,0,p),p+=Ze;f<o&&(g=s*n*4,d.set(u.subarray(c,c+g)),i.putImageData(l,0,p))}else if(t.kind===Zl.RGB_24BPP)for(y=Ze,g=s*y,f=0;f<o;f++){for(f>=r&&(y=n,g=s*y),h=0,p=g;p--;)d[h++]=u[c++],d[h++]=u[c++],d[h++]=u[c++],d[h++]=255;i.putImageData(l,0,f*Ze)}else throw new Error(`bad image kind: ${t.kind}`)}function $m(i,t){if(t.bitmap){i.drawImage(t.bitmap,0,0);return}const e=t.height,s=t.width,n=e%Ze,r=(e-n)/Ze,o=n===0?r:r+1,l=i.createImageData(s,Ze);let c=0;const h=t.data,u=l.data;for(let d=0;d<o;d++){const f=d<r?Ze:n;({srcPos:c}=Y1({src:h,srcPos:c,dest:u,width:s,height:f,nonBlackColor:0})),i.putImageData(l,0,d*Ze)}}function Tl(i,t){const e=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const s of e)i[s]!==void 0&&(t[s]=i[s]);i.setLineDash!==void 0&&(t.setLineDash(i.getLineDash()),t.lineDashOffset=i.lineDashOffset)}function uu(i){i.strokeStyle=i.fillStyle="#000000",i.fillRule="nonzero",i.globalAlpha=1,i.lineWidth=1,i.lineCap="butt",i.lineJoin="miter",i.miterLimit=10,i.globalCompositeOperation="source-over",i.font="10px sans-serif",i.setLineDash!==void 0&&(i.setLineDash([]),i.lineDashOffset=0);const{filter:t}=i;t!=="none"&&t!==""&&(i.filter="none")}function Bm(i,t){if(t)return!0;Q.singularValueDecompose2dScale(i,ys);const e=Math.fround(nn.pixelRatio*Ei.PDF_TO_CSS_UNITS);return ys[0]<=e&&ys[1]<=e}const Z1=["butt","round","square"],tx=["miter","round","bevel"],ex={},jm={};var rn,op,ap,lp;const Mg=class Mg{constructor(t,e,s,n,r,{optionalContentConfig:o,markedContentStack:l=null},c,h){b(this,rn);this.ctx=t,this.current=new Nm(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=s,this.canvasFactory=n,this.filterFactory=r,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=l||[],this.optionalContentConfig=o,this.cachedCanvases=new J1(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=c,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=h,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(t,e=null){return typeof t=="string"?t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t):e}beginDrawing({transform:t,viewport:e,transparency:s=!1,background:n=null}){const r=this.ctx.canvas.width,o=this.ctx.canvas.height,l=this.ctx.fillStyle;if(this.ctx.fillStyle=n||"#ffffff",this.ctx.fillRect(0,0,r,o),this.ctx.fillStyle=l,s){const c=this.cachedCanvases.getCanvas("transparent",r,o);this.compositeCtx=this.ctx,this.transparentCanvas=c.canvas,this.ctx=c.context,this.ctx.save(),this.ctx.transform(...Ut(this.compositeCtx))}this.ctx.save(),uu(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...e.transform),this.viewportScale=e.scale,this.baseTransform=Ut(this.ctx)}executeOperatorList(t,e,s,n){const r=t.argsArray,o=t.fnArray;let l=e||0;const c=r.length;if(c===l)return l;const h=c-l>Om&&typeof s=="function",u=h?Date.now()+K1:0;let d=0;const f=this.commonObjs,p=this.objs;let y;for(;;){if(n!==void 0&&l===n.nextBreakPoint)return n.breakIt(l,s),l;if(y=o[l],y!==ac.dependency)this[y].apply(this,r[l]);else for(const g of r[l]){const v=g.startsWith("g_")?f:p;if(!v.has(g))return v.get(g,s),l}if(l++,l===c)return l;if(h&&++d>Om){if(Date.now()>u)return s(),l;d=0}}}endDrawing(){A(this,rn,op).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const e of t.values())typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement&&(e.width=e.height=0);t.clear()}this._cachedBitmapsMap.clear(),A(this,rn,ap).call(this)}_scaleImage(t,e){const s=t.width??t.displayWidth,n=t.height??t.displayHeight;let r=Math.max(Math.hypot(e[0],e[1]),1),o=Math.max(Math.hypot(e[2],e[3]),1),l=s,c=n,h="prescale1",u,d;for(;r>2&&l>1||o>2&&c>1;){let f=l,p=c;r>2&&l>1&&(f=l>=16384?Math.floor(l/2)-1||1:Math.ceil(l/2),r/=l/f),o>2&&c>1&&(p=c>=16384?Math.floor(c/2)-1||1:Math.ceil(c)/2,o/=c/p),u=this.cachedCanvases.getCanvas(h,f,p),d=u.context,d.clearRect(0,0,f,p),d.drawImage(t,0,0,l,c,0,0,f,p),t=u.canvas,l=f,c=p,h=h==="prescale1"?"prescale2":"prescale1"}return{img:t,paintWidth:l,paintHeight:c}}_createMaskCanvas(t){const e=this.ctx,{width:s,height:n}=t,r=this.current.fillColor,o=this.current.patternFill,l=Ut(e);let c,h,u,d;if((t.bitmap||t.data)&&t.count>1){const D=t.bitmap||t.data.buffer;h=JSON.stringify(o?l:[l.slice(0,4),r]),c=this._cachedBitmapsMap.get(D),c||(c=new Map,this._cachedBitmapsMap.set(D,c));const S=c.get(h);if(S&&!o){const k=Math.round(Math.min(l[0],l[2])+l[4]),N=Math.round(Math.min(l[1],l[3])+l[5]);return{canvas:S,offsetX:k,offsetY:N}}u=S}u||(d=this.cachedCanvases.getCanvas("maskCanvas",s,n),$m(d.context,t));let f=Q.transform(l,[1/s,0,0,-1/n,0,0]);f=Q.transform(f,[1,0,0,1,0,-n]);const p=ia.slice();Q.axialAlignedBoundingBox([0,0,s,n],f,p);const[y,g,v,w]=p,_=Math.round(v-y)||1,C=Math.round(w-g)||1,x=this.cachedCanvases.getCanvas("fillCanvas",_,C),E=x.context,T=y,P=g;E.translate(-T,-P),E.transform(...f),u||(u=this._scaleImage(d.canvas,an(E)),u=u.img,c&&o&&c.set(h,u)),E.imageSmoothingEnabled=Bm(Ut(E),t.interpolate),hu(E,u,0,0,u.width,u.height,0,0,s,n),E.globalCompositeOperation="source-in";const M=Q.transform(an(E),[1,0,0,1,-T,-P]);return E.fillStyle=o?r.getPattern(e,this,M,xe.FILL):r,E.fillRect(0,0,s,n),c&&!o&&(this.cachedCanvases.delete("fillCanvas"),c.set(h,x.canvas)),{canvas:x.canvas,offsetX:Math.round(T),offsetY:Math.round(P)}}setLineWidth(t){t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(t){this.ctx.lineCap=Z1[t]}setLineJoin(t){this.ctx.lineJoin=tx[t]}setMiterLimit(t){this.ctx.miterLimit=t}setDash(t,e){const s=this.ctx;s.setLineDash!==void 0&&(s.setLineDash(t),s.lineDashOffset=e)}setRenderingIntent(t){}setFlatness(t){}setGState(t){for(const[e,s]of t)switch(e){case"LW":this.setLineWidth(s);break;case"LC":this.setLineCap(s);break;case"LJ":this.setLineJoin(s);break;case"ML":this.setMiterLimit(s);break;case"D":this.setDash(s[0],s[1]);break;case"RI":this.setRenderingIntent(s);break;case"FL":this.setFlatness(s);break;case"Font":this.setFont(s[0],s[1]);break;case"CA":this.current.strokeAlpha=s;break;case"ca":this.ctx.globalAlpha=this.current.fillAlpha=s;break;case"BM":this.ctx.globalCompositeOperation=s;break;case"SMask":this.current.activeSMask=s?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(s);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const t=this.ctx.canvas.width,e=this.ctx.canvas.height,s="smaskGroupAt"+this.groupLevel,n=this.cachedCanvases.getCanvas(s,t,e);this.suspendedCtx=this.ctx;const r=this.ctx=n.context;r.setTransform(this.suspendedCtx.getTransform()),Tl(this.suspendedCtx,r),Q1(r,this.suspendedCtx),this.setGState([["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Tl(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const e=this.current.activeSMask,s=this.suspendedCtx;this.composeSMask(s,e,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,e,s,n){const r=n[0],o=n[1],l=n[2]-r,c=n[3]-o;l===0||c===0||(this.genericComposeSMask(e.context,s,l,c,e.subtype,e.backdrop,e.transferMap,r,o,e.offsetX,e.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(s.canvas,0,0),t.restore())}genericComposeSMask(t,e,s,n,r,o,l,c,h,u,d){let f=t.canvas,p=c-u,y=h-d;if(o)if(p<0||y<0||p+s>f.width||y+n>f.height){const v=this.cachedCanvases.getCanvas("maskExtension",s,n),w=v.context;w.drawImage(f,-p,-y),w.globalCompositeOperation="destination-atop",w.fillStyle=o,w.fillRect(0,0,s,n),w.globalCompositeOperation="source-over",f=v.canvas,p=y=0}else{t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const v=new Path2D;v.rect(p,y,s,n),t.clip(v),t.globalCompositeOperation="destination-atop",t.fillStyle=o,t.fillRect(p,y,s,n),t.restore()}e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0),r==="Alpha"&&l?e.filter=this.filterFactory.addAlphaFilter(l):r==="Luminosity"&&(e.filter=this.filterFactory.addLuminosityFilter(l));const g=new Path2D;g.rect(c,h,s,n),e.clip(g),e.globalCompositeOperation="destination-in",e.drawImage(f,p,y,s,n,c,h,s,n),e.restore()}save(){this.inSMaskMode&&Tl(this.ctx,this.suspendedCtx),this.ctx.save();const t=this.current;this.stateStack.push(t),this.current=t.clone()}restore(){if(this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&Tl(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(t,e,s,n,r,o){this.ctx.transform(t,e,s,n,r,o),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,e,s){let[n]=e;if(!s){n||(n=e[0]=new Path2D),this[t](n);return}if(!(n instanceof Path2D)){const r=e[0]=new Path2D;for(let o=0,l=n.length;o<l;)switch(n[o++]){case au.moveTo:r.moveTo(n[o++],n[o++]);break;case au.lineTo:r.lineTo(n[o++],n[o++]);break;case au.curveTo:r.bezierCurveTo(n[o++],n[o++],n[o++],n[o++],n[o++],n[o++]);break;case au.closePath:r.closePath();break;default:st(`Unrecognized drawing path operator: ${n[o-1]}`);break}n=r}Q.axialAlignedBoundingBox(s,Ut(this.ctx),this.current.minMax),this[t](n)}closePath(){this.ctx.closePath()}stroke(t,e=!0){const s=this.ctx,n=this.current.strokeColor;if(s.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof n=="object"&&(n!=null&&n.getPattern)){const r=n.isModifyingCurrentTransform()?s.getTransform():null;if(s.save(),s.strokeStyle=n.getPattern(s,this,an(s),xe.STROKE),r){const o=new Path2D;o.addPath(t,s.getTransform().invertSelf().multiplySelf(r)),t=o}this.rescaleAndStroke(t,!1),s.restore()}else this.rescaleAndStroke(t,!0);e&&this.consumePath(t,this.current.getClippedPathBoundingBox(xe.STROKE,Ut(this.ctx))),s.globalAlpha=this.current.fillAlpha}closeStroke(t){this.stroke(t)}fill(t,e=!0){const s=this.ctx,n=this.current.fillColor,r=this.current.patternFill;let o=!1;if(r){const c=n.isModifyingCurrentTransform()?s.getTransform():null;if(s.save(),s.fillStyle=n.getPattern(s,this,an(s),xe.FILL),c){const h=new Path2D;h.addPath(t,s.getTransform().invertSelf().multiplySelf(c)),t=h}o=!0}const l=this.current.getClippedPathBoundingBox();this.contentVisible&&l!==null&&(this.pendingEOFill?(s.fill(t,"evenodd"),this.pendingEOFill=!1):s.fill(t)),o&&s.restore(),e&&this.consumePath(t,l)}eoFill(t){this.pendingEOFill=!0,this.fill(t)}fillStroke(t){this.fill(t,!1),this.stroke(t,!1),this.consumePath(t)}eoFillStroke(t){this.pendingEOFill=!0,this.fillStroke(t)}closeFillStroke(t){this.fillStroke(t)}closeEOFillStroke(t){this.pendingEOFill=!0,this.fillStroke(t)}endPath(t){this.consumePath(t)}rawFillPath(t){this.ctx.fill(t)}clip(){this.pendingClip=ex}eoClip(){this.pendingClip=jm}beginText(){this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const t=this.pendingTextPaths,e=this.ctx;if(t===void 0)return;const s=new Path2D,n=e.getTransform().invertSelf();for(const{transform:r,x:o,y:l,fontSize:c,path:h}of t)s.addPath(h,new DOMMatrix(r).preMultiplySelf(n).translate(o,l).scale(c,-c));e.clip(s),delete this.pendingTextPaths}setCharSpacing(t){this.current.charSpacing=t}setWordSpacing(t){this.current.wordSpacing=t}setHScale(t){this.current.textHScale=t/100}setLeading(t){this.current.leading=-t}setFont(t,e){var u;const s=this.commonObjs.get(t),n=this.current;if(!s)throw new Error(`Can't find font for ${t}`);if(n.fontMatrix=s.fontMatrix||Nf,(n.fontMatrix[0]===0||n.fontMatrix[3]===0)&&st("Invalid font matrix for font "+t),e<0?(e=-e,n.fontDirection=-1):n.fontDirection=1,this.current.font=s,this.current.fontSize=e,s.isType3Font)return;const r=s.loadedName||"sans-serif",o=((u=s.systemFontInfo)==null?void 0:u.css)||`"${r}", ${s.fallbackName}`;let l="normal";s.black?l="900":s.bold&&(l="bold");const c=s.italic?"italic":"normal";let h=e;e<Lm?h=Lm:e>Dm&&(h=Dm),this.current.fontSizeScale=e/h,this.ctx.font=`${c} ${l} ${h}px ${o}`}setTextRenderingMode(t){this.current.textRenderingMode=t}setTextRise(t){this.current.textRise=t}moveText(t,e){this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=e}setLeadingMoveText(t,e){this.setLeading(-e),this.moveText(t,e)}setTextMatrix(t){const{current:e}=this;e.textMatrix=t,e.textMatrixScale=Math.hypot(t[0],t[1]),e.x=e.lineX=0,e.y=e.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(t,e,s,n,r){const o=this.ctx,l=this.current,c=l.font,h=l.textRenderingMode,u=l.fontSize/l.fontSizeScale,d=h&Re.FILL_STROKE_MASK,f=!!(h&Re.ADD_TO_PATH_FLAG),p=l.patternFill&&!c.missingFile,y=l.patternStroke&&!c.missingFile;let g;if((c.disableFontFace||f||p||y)&&(g=c.getPathGenerator(this.commonObjs,t)),c.disableFontFace||p||y){o.save(),o.translate(e,s),o.scale(u,-u);let v;if((d===Re.FILL||d===Re.FILL_STROKE)&&(n?(v=o.getTransform(),o.setTransform(...n),o.fill(A(this,rn,lp).call(this,g,v,n))):o.fill(g)),d===Re.STROKE||d===Re.FILL_STROKE)if(r){v||(v=o.getTransform()),o.setTransform(...r);const{a:w,b:_,c:C,d:x}=v,E=Q.inverseTransform(r),T=Q.transform([w,_,C,x,0,0],E);Q.singularValueDecompose2dScale(T,ys),o.lineWidth*=Math.max(ys[0],ys[1])/u,o.stroke(A(this,rn,lp).call(this,g,v,r))}else o.lineWidth/=u,o.stroke(g);o.restore()}else(d===Re.FILL||d===Re.FILL_STROKE)&&o.fillText(t,e,s),(d===Re.STROKE||d===Re.FILL_STROKE)&&o.strokeText(t,e,s);f&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:Ut(o),x:e,y:s,fontSize:u,path:g})}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const e=t.getImageData(0,0,10,10).data;let s=!1;for(let n=3;n<e.length;n+=4)if(e[n]>0&&e[n]<255){s=!0;break}return dt(this,"isFontSubpixelAAEnabled",s)}showText(t){const e=this.current,s=e.font;if(s.isType3Font)return this.showType3Text(t);const n=e.fontSize;if(n===0)return;const r=this.ctx,o=e.fontSizeScale,l=e.charSpacing,c=e.wordSpacing,h=e.fontDirection,u=e.textHScale*h,d=t.length,f=s.vertical,p=f?1:-1,y=s.defaultVMetrics,g=n*e.fontMatrix[0],v=e.textRenderingMode===Re.FILL&&!s.disableFontFace&&!e.patternFill;r.save(),e.textMatrix&&r.transform(...e.textMatrix),r.translate(e.x,e.y+e.textRise),h>0?r.scale(u,-1):r.scale(u,1);let w,_;if(e.patternFill){r.save();const P=e.fillColor.getPattern(r,this,an(r),xe.FILL);w=Ut(r),r.restore(),r.fillStyle=P}if(e.patternStroke){r.save();const P=e.strokeColor.getPattern(r,this,an(r),xe.STROKE);_=Ut(r),r.restore(),r.strokeStyle=P}let C=e.lineWidth;const x=e.textMatrixScale;if(x===0||C===0){const P=e.textRenderingMode&Re.FILL_STROKE_MASK;(P===Re.STROKE||P===Re.FILL_STROKE)&&(C=this.getSinglePixelWidth())}else C/=x;if(o!==1&&(r.scale(o,o),C/=o),r.lineWidth=C,s.isInvalidPDFjsFont){const P=[];let M=0;for(const D of t)P.push(D.unicode),M+=D.width;r.fillText(P.join(""),0,0),e.x+=M*g*u,r.restore(),this.compose();return}let E=0,T;for(T=0;T<d;++T){const P=t[T];if(typeof P=="number"){E+=p*P*n/1e3;continue}let M=!1;const D=(P.isSpace?c:0)+l,S=P.fontChar,k=P.accent;let N,H,z=P.width;if(f){const F=P.vmetric||y,j=-(P.vmetric?F[1]:z*.5)*g,lt=F[2]*g;z=F?-F[0]:z,N=j/o,H=(E+lt)/o}else N=E/o,H=0;if(s.remeasure&&z>0){const F=r.measureText(S).width*1e3/n*o;if(z<F&&this.isFontSubpixelAAEnabled){const j=z/F;M=!0,r.save(),r.scale(j,1),N/=j}else z!==F&&(N+=(z-F)/2e3*n/o)}if(this.contentVisible&&(P.isInFont||s.missingFile)){if(v&&!k)r.fillText(S,N,H);else if(this.paintChar(S,N,H,w,_),k){const F=N+n*k.offset.x/o,j=H-n*k.offset.y/o;this.paintChar(k.fontChar,F,j,w,_)}}const q=f?z*g-D*h:z*g+D*h;E+=q,M&&r.restore()}f?e.y-=E:e.x+=E*u,r.restore(),this.compose()}showType3Text(t){const e=this.ctx,s=this.current,n=s.font,r=s.fontSize,o=s.fontDirection,l=n.vertical?1:-1,c=s.charSpacing,h=s.wordSpacing,u=s.textHScale*o,d=s.fontMatrix||Nf,f=t.length,p=s.textRenderingMode===Re.INVISIBLE;let y,g,v,w;if(!(p||r===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,e.save(),s.textMatrix&&e.transform(...s.textMatrix),e.translate(s.x,s.y+s.textRise),e.scale(u,o),y=0;y<f;++y){if(g=t[y],typeof g=="number"){w=l*g*r/1e3,this.ctx.translate(w,0),s.x+=w*u;continue}const _=(g.isSpace?h:0)+c,C=n.charProcOperatorList[g.operatorListId];C?this.contentVisible&&(this.save(),e.scale(r,r),e.transform(...d),this.executeOperatorList(C),this.restore()):st(`Type3 character "${g.operatorListId}" is not available.`);const x=[g.width,0];Q.applyTransform(x,d),v=x[0]*r+_,e.translate(v,0),s.x+=v*u}e.restore()}}setCharWidth(t,e){}setCharWidthAndBounds(t,e,s,n,r,o){const l=new Path2D;l.rect(s,n,r-s,o-n),this.ctx.clip(l),this.endPath()}getColorN_Pattern(t){let e;if(t[0]==="TilingPattern"){const s=this.baseTransform||Ut(this.ctx),n={createCanvasGraphics:r=>new Mg(r,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};e=new rp(t,this.ctx,n,s)}else e=this._getPattern(t[1],t[2]);return e}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments),this.current.patternStroke=!0}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(t){this.ctx.strokeStyle=this.current.strokeColor=t,this.current.patternStroke=!1}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(t){this.ctx.fillStyle=this.current.fillColor=t,this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(t,e=null){let s;return this.cachedPatterns.has(t)?s=this.cachedPatterns.get(t):(s=X1(this.getObject(t)),this.cachedPatterns.set(t,s)),e&&(s.matrix=e),s}shadingFill(t){if(!this.contentVisible)return;const e=this.ctx;this.save();const s=this._getPattern(t);e.fillStyle=s.getPattern(e,this,an(e),xe.SHADING);const n=an(e);if(n){const{width:r,height:o}=e.canvas,l=ia.slice();Q.axialAlignedBoundingBox([0,0,r,o],n,l);const[c,h,u,d]=l;this.ctx.fillRect(c,h,u-c,d-h)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){Pt("Should not call beginInlineImage")}beginImageData(){Pt("Should not call beginImageData")}paintFormXObjectBegin(t,e){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),t&&this.transform(...t),this.baseTransform=Ut(this.ctx),e)){Q.axialAlignedBoundingBox(e,this.baseTransform,this.current.minMax);const[s,n,r,o]=e,l=new Path2D;l.rect(s,n,r-s,o-n),this.ctx.clip(l),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const e=this.ctx;t.isolated||zd("TODO: Support non-isolated groups."),t.knockout&&st("Knockout groups not supported.");const s=Ut(e);if(t.matrix&&e.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let n=ia.slice();Q.axialAlignedBoundingBox(t.bbox,Ut(e),n);const r=[0,0,e.canvas.width,e.canvas.height];n=Q.intersect(n,r)||[0,0,0,0];const o=Math.floor(n[0]),l=Math.floor(n[1]),c=Math.max(Math.ceil(n[2])-o,1),h=Math.max(Math.ceil(n[3])-l,1);this.current.startNewPathAndClipBox([0,0,c,h]);let u="groupAt"+this.groupLevel;t.smask&&(u+="_smask_"+this.smaskCounter++%2);const d=this.cachedCanvases.getCanvas(u,c,h),f=d.context;f.translate(-o,-l),f.transform(...s);let p=new Path2D;const[y,g,v,w]=t.bbox;if(p.rect(y,g,v-y,w-g),t.matrix){const _=new Path2D;_.addPath(p,new DOMMatrix(t.matrix)),p=_}f.clip(p),t.smask?this.smaskStack.push({canvas:d.canvas,context:f,offsetX:o,offsetY:l,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}):(e.setTransform(1,0,0,1,0,0),e.translate(o,l),e.save()),Tl(e,f),this.ctx=f,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(e),this.groupLevel++}endGroup(t){if(!this.contentVisible)return;this.groupLevel--;const e=this.ctx,s=this.groupStack.pop();if(this.ctx=s,this.ctx.imageSmoothingEnabled=!1,t.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const n=Ut(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...n);const r=ia.slice();Q.axialAlignedBoundingBox([0,0,e.canvas.width,e.canvas.height],n,r),this.ctx.drawImage(e.canvas,0,0),this.ctx.restore(),this.compose(r)}}beginAnnotation(t,e,s,n,r){if(A(this,rn,op).call(this),uu(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),e){const o=e[2]-e[0],l=e[3]-e[1];if(r&&this.annotationCanvasMap){s=s.slice(),s[4]-=e[0],s[5]-=e[1],e=e.slice(),e[0]=e[1]=0,e[2]=o,e[3]=l,Q.singularValueDecompose2dScale(Ut(this.ctx),ys);const{viewportScale:c}=this,h=Math.ceil(o*this.outputScaleX*c),u=Math.ceil(l*this.outputScaleY*c);this.annotationCanvas=this.canvasFactory.create(h,u);const{canvas:d,context:f}=this.annotationCanvas;this.annotationCanvasMap.set(t,d),this.annotationCanvas.savedCtx=this.ctx,this.ctx=f,this.ctx.save(),this.ctx.setTransform(ys[0],0,0,-ys[1],0,l*ys[1]),uu(this.ctx)}else{uu(this.ctx),this.endPath();const c=new Path2D;c.rect(e[0],e[1],o,l),this.ctx.clip(c)}}this.current=new Nm(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...s),this.transform(...n)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),A(this,rn,ap).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t){if(!this.contentVisible)return;const e=t.count;t=this.getObject(t.data,t),t.count=e;const s=this.ctx,n=this._createMaskCanvas(t),r=n.canvas;s.save(),s.setTransform(1,0,0,1,0,0),s.drawImage(r,n.offsetX,n.offsetY),s.restore(),this.compose()}paintImageMaskXObjectRepeat(t,e,s=0,n=0,r,o){if(!this.contentVisible)return;t=this.getObject(t.data,t);const l=this.ctx;l.save();const c=Ut(l);l.transform(e,s,n,r,0,0);const h=this._createMaskCanvas(t);l.setTransform(1,0,0,1,h.offsetX-c[4],h.offsetY-c[5]);for(let u=0,d=o.length;u<d;u+=2){const f=Q.transform(c,[e,s,n,r,o[u],o[u+1]]);l.drawImage(h.canvas,f[4],f[5])}l.restore(),this.compose()}paintImageMaskXObjectGroup(t){if(!this.contentVisible)return;const e=this.ctx,s=this.current.fillColor,n=this.current.patternFill;for(const r of t){const{data:o,width:l,height:c,transform:h}=r,u=this.cachedCanvases.getCanvas("maskCanvas",l,c),d=u.context;d.save();const f=this.getObject(o,r);$m(d,f),d.globalCompositeOperation="source-in",d.fillStyle=n?s.getPattern(d,this,an(e),xe.FILL):s,d.fillRect(0,0,l,c),d.restore(),e.save(),e.transform(...h),e.scale(1,-1),hu(e,u.canvas,0,0,l,c,0,-1,1,1),e.restore()}this.compose()}paintImageXObject(t){if(!this.contentVisible)return;const e=this.getObject(t);if(!e){st("Dependent image isn't ready yet");return}this.paintInlineImageXObject(e)}paintImageXObjectRepeat(t,e,s,n){if(!this.contentVisible)return;const r=this.getObject(t);if(!r){st("Dependent image isn't ready yet");return}const o=r.width,l=r.height,c=[];for(let h=0,u=n.length;h<u;h+=2)c.push({transform:[e,0,0,s,n[h],n[h+1]],x:0,y:0,w:o,h:l});this.paintInlineImageXObjectGroup(r,c)}applyTransferMapsToCanvas(t){return this.current.transferMaps!=="none"&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if(this.current.transferMaps==="none")return t.bitmap;const{bitmap:e,width:s,height:n}=t,r=this.cachedCanvases.getCanvas("inlineImage",s,n),o=r.context;return o.filter=this.current.transferMaps,o.drawImage(e,0,0),o.filter="none",r.canvas}paintInlineImageXObject(t){if(!this.contentVisible)return;const e=t.width,s=t.height,n=this.ctx;this.save();const{filter:r}=n;r!=="none"&&r!==""&&(n.filter="none"),n.scale(1/e,-1/s);let o;if(t.bitmap)o=this.applyTransferMapsToBitmap(t);else if(typeof HTMLElement=="function"&&t instanceof HTMLElement||!t.data)o=t;else{const h=this.cachedCanvases.getCanvas("inlineImage",e,s).context;Fm(h,t),o=this.applyTransferMapsToCanvas(h)}const l=this._scaleImage(o,an(n));n.imageSmoothingEnabled=Bm(Ut(n),t.interpolate),hu(n,l.img,0,0,l.paintWidth,l.paintHeight,0,-s,e,s),this.compose(),this.restore()}paintInlineImageXObjectGroup(t,e){if(!this.contentVisible)return;const s=this.ctx;let n;if(t.bitmap)n=t.bitmap;else{const r=t.width,o=t.height,c=this.cachedCanvases.getCanvas("inlineImage",r,o).context;Fm(c,t),n=this.applyTransferMapsToCanvas(c)}for(const r of e)s.save(),s.transform(...r.transform),s.scale(1,-1),hu(s,n,r.x,r.y,r.w,r.h,0,-1,1,1),s.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t){}markPointProps(t,e){}beginMarkedContent(t){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,e){t==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(e)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(t,e){const s=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(e);const n=this.ctx;this.pendingClip&&(s||(this.pendingClip===jm?n.clip(t,"evenodd"):n.clip(t)),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=Ut(this.ctx);if(t[1]===0&&t[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const e=Math.abs(t[0]*t[3]-t[2]*t[1]),s=Math.hypot(t[0],t[2]),n=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(s,n)/e}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:t}=this.current,{a:e,b:s,c:n,d:r}=this.ctx.getTransform();let o,l;if(s===0&&n===0){const c=Math.abs(e),h=Math.abs(r);if(c===h)if(t===0)o=l=1/c;else{const u=c*t;o=l=u<1?1/u:1}else if(t===0)o=1/c,l=1/h;else{const u=c*t,d=h*t;o=u<1?1/u:1,l=d<1?1/d:1}}else{const c=Math.abs(e*r-s*n),h=Math.hypot(e,s),u=Math.hypot(n,r);if(t===0)o=u/c,l=h/c;else{const d=t*c;o=u>d?u/d:1,l=h>d?h/d:1}}this._cachedScaleForStroking[0]=o,this._cachedScaleForStroking[1]=l}return this._cachedScaleForStroking}rescaleAndStroke(t,e){const{ctx:s,current:{lineWidth:n}}=this,[r,o]=this.getScaleForStroking();if(r===o){s.lineWidth=(n||1)*r,s.stroke(t);return}const l=s.getLineDash();e&&s.save(),s.scale(r,o),yf.a=1/r,yf.d=1/o;const c=new Path2D;if(c.addPath(t,yf),l.length>0){const h=Math.max(r,o);s.setLineDash(l.map(u=>u/h)),s.lineDashOffset/=h}s.lineWidth=n||1,s.stroke(c),e&&s.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}};rn=new WeakSet,op=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},ap=function(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(t!=="none"){const e=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=e}}},lp=function(t,e,s){const n=new Path2D;return n.addPath(t,new DOMMatrix(s).invertSelf().multiplySelf(e)),n};let ca=Mg;for(const i in ac)ca.prototype[i]!==void 0&&(ca.prototype[ac[i]]=ca.prototype[i]);var jc,Hc;class Ds{static get workerPort(){return a(this,jc)}static set workerPort(t){if(!(typeof Worker<"u"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");m(this,jc,t)}static get workerSrc(){return a(this,Hc)}static set workerSrc(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");m(this,Hc,t)}}jc=new WeakMap,Hc=new WeakMap,b(Ds,jc,null),b(Ds,Hc,"");var ka,zc;class sx{constructor({parsedData:t,rawData:e}){b(this,ka);b(this,zc);m(this,ka,t),m(this,zc,e)}getRaw(){return a(this,zc)}get(t){return a(this,ka).get(t)??null}[Symbol.iterator](){return a(this,ka).entries()}}ka=new WeakMap,zc=new WeakMap;const ta=Symbol("INTERNAL");var Gc,Uc,Vc,Ia;class nx{constructor(t,{name:e,intent:s,usage:n,rbGroups:r}){b(this,Gc,!1);b(this,Uc,!1);b(this,Vc,!1);b(this,Ia,!0);m(this,Gc,!!(t&ms.DISPLAY)),m(this,Uc,!!(t&ms.PRINT)),this.name=e,this.intent=s,this.usage=n,this.rbGroups=r}get visible(){if(a(this,Vc))return a(this,Ia);if(!a(this,Ia))return!1;const{print:t,view:e}=this.usage;return a(this,Gc)?(e==null?void 0:e.viewState)!=="OFF":a(this,Uc)?(t==null?void 0:t.printState)!=="OFF":!0}_setVisible(t,e,s=!1){t!==ta&&Pt("Internal method `_setVisible` called."),m(this,Vc,s),m(this,Ia,e)}}Gc=new WeakMap,Uc=new WeakMap,Vc=new WeakMap,Ia=new WeakMap;var Gi,Ct,Ma,La,Wc,cp;class ix{constructor(t,e=ms.DISPLAY){b(this,Wc);b(this,Gi,null);b(this,Ct,new Map);b(this,Ma,null);b(this,La,null);if(this.renderingIntent=e,this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,m(this,La,t.order);for(const s of t.groups)a(this,Ct).set(s.id,new nx(e,s));if(t.baseState==="OFF")for(const s of a(this,Ct).values())s._setVisible(ta,!1);for(const s of t.on)a(this,Ct).get(s)._setVisible(ta,!0);for(const s of t.off)a(this,Ct).get(s)._setVisible(ta,!1);m(this,Ma,this.getHash())}}isVisible(t){if(a(this,Ct).size===0)return!0;if(!t)return zd("Optional content group not defined."),!0;if(t.type==="OCG")return a(this,Ct).has(t.id)?a(this,Ct).get(t.id).visible:(st(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return A(this,Wc,cp).call(this,t.expression);if(!t.policy||t.policy==="AnyOn"){for(const e of t.ids){if(!a(this,Ct).has(e))return st(`Optional content group not found: ${e}`),!0;if(a(this,Ct).get(e).visible)return!0}return!1}else if(t.policy==="AllOn"){for(const e of t.ids){if(!a(this,Ct).has(e))return st(`Optional content group not found: ${e}`),!0;if(!a(this,Ct).get(e).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(const e of t.ids){if(!a(this,Ct).has(e))return st(`Optional content group not found: ${e}`),!0;if(!a(this,Ct).get(e).visible)return!0}return!1}else if(t.policy==="AllOff"){for(const e of t.ids){if(!a(this,Ct).has(e))return st(`Optional content group not found: ${e}`),!0;if(a(this,Ct).get(e).visible)return!1}return!0}return st(`Unknown optional content policy ${t.policy}.`),!0}return st(`Unknown group type ${t.type}.`),!0}setVisibility(t,e=!0,s=!0){var r;const n=a(this,Ct).get(t);if(!n){st(`Optional content group not found: ${t}`);return}if(s&&e&&n.rbGroups.length)for(const o of n.rbGroups)for(const l of o)l!==t&&((r=a(this,Ct).get(l))==null||r._setVisible(ta,!1,!0));n._setVisible(ta,!!e,!0),m(this,Gi,null)}setOCGState({state:t,preserveRB:e}){let s;for(const n of t){switch(n){case"ON":case"OFF":case"Toggle":s=n;continue}const r=a(this,Ct).get(n);if(r)switch(s){case"ON":this.setVisibility(n,!0,e);break;case"OFF":this.setVisibility(n,!1,e);break;case"Toggle":this.setVisibility(n,!r.visible,e);break}}m(this,Gi,null)}get hasInitialVisibility(){return a(this,Ma)===null||this.getHash()===a(this,Ma)}getOrder(){return a(this,Ct).size?a(this,La)?a(this,La).slice():[...a(this,Ct).keys()]:null}getGroup(t){return a(this,Ct).get(t)||null}getHash(){if(a(this,Gi)!==null)return a(this,Gi);const t=new Rb;for(const[e,s]of a(this,Ct))t.update(`${e}:${s.visible}`);return m(this,Gi,t.hexdigest())}[Symbol.iterator](){return a(this,Ct).entries()}}Gi=new WeakMap,Ct=new WeakMap,Ma=new WeakMap,La=new WeakMap,Wc=new WeakSet,cp=function(t){const e=t.length;if(e<2)return!0;const s=t[0];for(let n=1;n<e;n++){const r=t[n];let o;if(Array.isArray(r))o=A(this,Wc,cp).call(this,r);else if(a(this,Ct).has(r))o=a(this,Ct).get(r).visible;else return st(`Optional content group not found: ${r}`),!0;switch(s){case"And":if(!o)return!1;break;case"Or":if(o)return!0;break;case"Not":return!o;default:return!0}}return s==="And"};class rx{constructor(t,{disableRange:e=!1,disableStream:s=!1}){re(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:n,initialData:r,progressiveDone:o,contentDispositionFilename:l}=t;if(this._queuedChunks=[],this._progressiveDone=o,this._contentDispositionFilename=l,(r==null?void 0:r.length)>0){const c=r instanceof Uint8Array&&r.byteLength===r.buffer.byteLength?r.buffer:new Uint8Array(r).buffer;this._queuedChunks.push(c)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!s,this._isRangeSupported=!e,this._contentLength=n,this._fullRequestReader=null,this._rangeReaders=[],t.addRangeListener((c,h)=>{this._onReceiveData({begin:c,chunk:h})}),t.addProgressListener((c,h)=>{this._onProgress({loaded:c,total:h})}),t.addProgressiveReadListener(c=>{this._onReceiveData({chunk:c})}),t.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),t.transportReady()}_onReceiveData({begin:t,chunk:e}){const s=e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer;if(t===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(s):this._queuedChunks.push(s);else{const n=this._rangeReaders.some(function(r){return r._begin!==t?!1:(r._enqueue(s),!0)});re(n,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}_onProgress(t){var e,s,n,r;t.total===void 0?(s=(e=this._rangeReaders[0])==null?void 0:e.onProgress)==null||s.call(e,{loaded:t.loaded}):(r=(n=this._fullRequestReader)==null?void 0:n.onProgress)==null||r.call(n,{loaded:t.loaded,total:t.total})}_onProgressiveDone(){var t;(t=this._fullRequestReader)==null||t.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){const e=this._rangeReaders.indexOf(t);e>=0&&this._rangeReaders.splice(e,1)}getFullReader(){re(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;return this._queuedChunks=null,new ox(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const s=new ax(this,t,e);return this._pdfDataRangeTransport.requestDataRange(t,e),this._rangeReaders.push(s),s}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const s of this._rangeReaders.slice(0))s.cancel(t);this._pdfDataRangeTransport.abort()}}class ox{constructor(t,e,s=!1,n=null){this._stream=t,this._done=s||!1,this._filename=Ud(n)?n:null,this._queuedChunks=e||[],this._loaded=0;for(const r of this._queuedChunks)this._loaded+=r.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class ax{constructor(t,e,s){this._stream=t,this._begin=e,this._end=s,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function lx(i){let t=!0,e=s("filename\\*","i").exec(i);if(e){e=e[1];let u=l(e);return u=unescape(u),u=c(u),u=h(u),r(u)}if(e=o(i),e){const u=h(e);return r(u)}if(e=s("filename","i").exec(i),e){e=e[1];let u=l(e);return u=h(u),r(u)}function s(u,d){return new RegExp("(?:^|;)\\s*"+u+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',d)}function n(u,d){if(u){if(!/^[\x00-\xFF]+$/.test(d))return d;try{const f=new TextDecoder(u,{fatal:!0}),p=Wh(d);d=f.decode(p),t=!1}catch{}}return d}function r(u){return t&&/[\x80-\xff]/.test(u)&&(u=n("utf-8",u),t&&(u=n("iso-8859-1",u))),u}function o(u){const d=[];let f;const p=s("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(f=p.exec(u))!==null;){let[,g,v,w]=f;if(g=parseInt(g,10),g in d){if(g===0)break;continue}d[g]=[v,w]}const y=[];for(let g=0;g<d.length&&g in d;++g){let[v,w]=d[g];w=l(w),v&&(w=unescape(w),g===0&&(w=c(w))),y.push(w)}return y.join("")}function l(u){if(u.startsWith('"')){const d=u.slice(1).split('\\"');for(let f=0;f<d.length;++f){const p=d[f].indexOf('"');p!==-1&&(d[f]=d[f].slice(0,p),d.length=f+1),d[f]=d[f].replaceAll(/\\(.)/g,"$1")}u=d.join('"')}return u}function c(u){const d=u.indexOf("'");if(d===-1)return u;const f=u.slice(0,d),y=u.slice(d+1).replace(/^[^']*'/,"");return n(f,y)}function h(u){return!u.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(u)?u:u.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(d,f,p,y){if(p==="q"||p==="Q")return y=y.replaceAll("_"," "),y=y.replaceAll(/=([0-9a-fA-F]{2})/g,function(g,v){return String.fromCharCode(parseInt(v,16))}),n(f,y);try{y=atob(y)}catch{}return n(f,y)})}return""}function zb(i,t){const e=new Headers;if(!i||!t||typeof t!="object")return e;for(const s in t){const n=t[s];n!==void 0&&e.append(s,n)}return e}function Wd(i){var t;return((t=URL.parse(i))==null?void 0:t.origin)??null}function Gb({responseHeaders:i,isHttp:t,rangeChunkSize:e,disableRange:s}){const n={allowRangeRequests:!1,suggestedLength:void 0},r=parseInt(i.get("Content-Length"),10);return!Number.isInteger(r)||(n.suggestedLength=r,r<=2*e)||s||!t||i.get("Accept-Ranges")!=="bytes"||(i.get("Content-Encoding")||"identity")!=="identity"||(n.allowRangeRequests=!0),n}function Ub(i){const t=i.get("Content-Disposition");if(t){let e=lx(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch{}if(Ud(e))return e}return null}function Kh(i,t){return new lc(`Unexpected server response (${i}) while retrieving PDF "${t}".`,i,i===404||i===0&&t.startsWith("file:"))}function Vb(i){return i===200||i===206}function Wb(i,t,e){return{method:"GET",headers:i,signal:e.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function qb(i){return i instanceof Uint8Array?i.buffer:i instanceof ArrayBuffer?i:(st(`getArrayBuffer - unexpected data format: ${i}`),new Uint8Array(i).buffer)}class cx{constructor(t){$(this,"_responseOrigin",null);this.source=t,this.isHttp=/^https?:/i.test(t.url),this.headers=zb(this.isHttp,t.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}getFullReader(){return re(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new hx(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const s=new ux(this,t,e);return this._rangeRequestReaders.push(s),s}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const s of this._rangeRequestReaders.slice(0))s.cancel(t)}}class hx{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;const e=t.source;this._withCredentials=e.withCredentials||!1,this._contentLength=e.length,this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange;const s=new Headers(t.headers),n=e.url;fetch(n,Wb(s,this._withCredentials,this._abortController)).then(r=>{if(t._responseOrigin=Wd(r.url),!Vb(r.status))throw Kh(r.status,n);this._reader=r.body.getReader(),this._headersCapability.resolve();const o=r.headers,{allowRangeRequests:l,suggestedLength:c}=Gb({responseHeaders:o,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=l,this._contentLength=c||this._contentLength,this._filename=Ub(o),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Si("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;await this._headersCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded,total:this._contentLength}),{value:qb(t),done:!1})}cancel(t){var e;(e=this._reader)==null||e.cancel(t),this._abortController.abort()}}class ux{constructor(t,e,s){this._stream=t,this._reader=null,this._loaded=0;const n=t.source;this._withCredentials=n.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!n.disableStream,this._abortController=new AbortController;const r=new Headers(t.headers);r.append("Range",`bytes=${e}-${s-1}`);const o=n.url;fetch(o,Wb(r,this._withCredentials,this._abortController)).then(l=>{const c=Wd(l.url);if(c!==t._responseOrigin)throw new Error(`Expected range response-origin "${c}" to match "${t._responseOrigin}".`);if(!Vb(l.status))throw Kh(l.status,o);this._readCapability.resolve(),this._reader=l.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;await this._readCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded}),{value:qb(t),done:!1})}cancel(t){var e;(e=this._reader)==null||e.cancel(t),this._abortController.abort()}}const bf=200,vf=206;function dx(i){const t=i.response;return typeof t!="string"?t:Wh(t).buffer}class fx{constructor({url:t,httpHeaders:e,withCredentials:s}){$(this,"_responseOrigin",null);this.url=t,this.isHttp=/^https?:/i.test(t),this.headers=zb(this.isHttp,e),this.withCredentials=s||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(t){const e=new XMLHttpRequest,s=this.currXhrId++,n=this.pendingRequests[s]={xhr:e};e.open("GET",this.url),e.withCredentials=this.withCredentials;for(const[r,o]of this.headers)e.setRequestHeader(r,o);return this.isHttp&&"begin"in t&&"end"in t?(e.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),n.expectedStatus=vf):n.expectedStatus=bf,e.responseType="arraybuffer",re(t.onError,"Expected `onError` callback to be provided."),e.onerror=()=>{t.onError(e.status)},e.onreadystatechange=this.onStateChange.bind(this,s),e.onprogress=this.onProgress.bind(this,s),n.onHeadersReceived=t.onHeadersReceived,n.onDone=t.onDone,n.onError=t.onError,n.onProgress=t.onProgress,e.send(null),s}onProgress(t,e){var n;const s=this.pendingRequests[t];s&&((n=s.onProgress)==null||n.call(s,e))}onStateChange(t,e){const s=this.pendingRequests[t];if(!s)return;const n=s.xhr;if(n.readyState>=2&&s.onHeadersReceived&&(s.onHeadersReceived(),delete s.onHeadersReceived),n.readyState!==4||!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],n.status===0&&this.isHttp){s.onError(n.status);return}const r=n.status||bf;if(!(r===bf&&s.expectedStatus===vf)&&r!==s.expectedStatus){s.onError(n.status);return}const l=dx(n);if(r===vf){const c=n.getResponseHeader("Content-Range"),h=/bytes (\d+)-(\d+)\/(\d+)/.exec(c);h?s.onDone({begin:parseInt(h[1],10),chunk:l}):(st('Missing or invalid "Content-Range" header.'),s.onError(0))}else l?s.onDone({begin:0,chunk:l}):s.onError(n.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){const e=this.pendingRequests[t].xhr;delete this.pendingRequests[t],e.abort()}}class px{constructor(t){this._source=t,this._manager=new fx(t),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){const e=this._rangeRequestReaders.indexOf(t);e>=0&&this._rangeRequestReaders.splice(e,1)}getFullReader(){return re(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new gx(this._manager,this._source),this._fullRequestReader}getRangeReader(t,e){const s=new mx(this._manager,t,e);return s.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(s),s}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const s of this._rangeRequestReaders.slice(0))s.cancel(t)}}class gx{constructor(t,e){this._manager=t,this._url=e.url,this._fullRequestId=t.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._contentLength=e.length,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const t=this._fullRequestId,e=this._manager.getRequestXhr(t);this._manager._responseOrigin=Wd(e.responseURL);const s=e.getAllResponseHeaders(),n=new Headers(s?s.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(l=>{const[c,...h]=l.split(": ");return[c,h.join(": ")]}):[]),{allowRangeRequests:r,suggestedLength:o}=Gb({responseHeaders:n,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});r&&(this._isRangeSupported=!0),this._contentLength=o||this._contentLength,this._filename=Ub(n),this._isRangeSupported&&this._manager.abortRequest(t),this._headersCapability.resolve()}_onDone(t){if(t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=Kh(t,this._url),this._headersCapability.reject(this._storedError);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){var e;(e=this.onProgress)==null||e.call(this,{loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersCapability.reject(t);for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class mx{constructor(t,e,s){this._manager=t,this._url=t.url,this._requestId=t.request({begin:e,end:s,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){var e;const t=Wd((e=this._manager.getRequestXhr(this._requestId))==null?void 0:e.responseURL);t!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${t}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){var t;(t=this.onClosed)==null||t.call(this,this)}_onDone(t){const e=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunk=e,this._done=!0;for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){this._storedError??(this._storedError=Kh(t,this._url));for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){var e;this.isStreamingSupported||(e=this.onProgress)==null||e.call(this,{loaded:t.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const yx=/^[a-z][a-z0-9\-+.]+:/i;function bx(i){if(yx.test(i))return new URL(i);const t=process.getBuiltinModule("url");return new URL(t.pathToFileURL(i))}class vx{constructor(t){this.source=t,this.url=bx(t.url),re(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}getFullReader(){return re(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new Ax(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const s=new wx(this,t,e);return this._rangeRequestReaders.push(s),s}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const s of this._rangeRequestReaders.slice(0))s.cancel(t)}}class Ax{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;const e=t.source;this._contentLength=e.length,this._loaded=0,this._filename=null,this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const s=process.getBuiltinModule("fs");s.promises.lstat(this._url).then(n=>{this._contentLength=n.size,this._setReadableStream(s.createReadStream(this._url)),this._headersCapability.resolve()},n=>{n.code==="ENOENT"&&(n=Kh(0,this._url.href)),this._storedError=n,this._headersCapability.reject(n)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Si("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class wx{constructor(t,e,s){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const n=t.source;this._isStreamingSupported=!n.disableStream;const r=process.getBuiltinModule("fs");this._setReadableStream(r.createReadStream(this._url,{start:e,end:s-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const Pl=Symbol("INITIAL_DATA");var os,qc,hp;class Xb{constructor(){b(this,qc);b(this,os,Object.create(null))}get(t,e=null){if(e){const n=A(this,qc,hp).call(this,t);return n.promise.then(()=>e(n.data)),null}const s=a(this,os)[t];if(!s||s.data===Pl)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return s.data}has(t){const e=a(this,os)[t];return!!e&&e.data!==Pl}delete(t){const e=a(this,os)[t];return!e||e.data===Pl?!1:(delete a(this,os)[t],!0)}resolve(t,e=null){const s=A(this,qc,hp).call(this,t);s.data=e,s.resolve()}clear(){var t;for(const e in a(this,os)){const{data:s}=a(this,os)[e];(t=s==null?void 0:s.bitmap)==null||t.close()}m(this,os,Object.create(null))}*[Symbol.iterator](){for(const t in a(this,os)){const{data:e}=a(this,os)[t];e!==Pl&&(yield[t,e])}}}os=new WeakMap,qc=new WeakSet,hp=function(t){var e;return(e=a(this,os))[t]||(e[t]={...Promise.withResolvers(),data:Pl})};const Sx=1e5,Hm=30;var ey,Ui,Qe,Xc,Yc,Qr,si,Kc,Qc,Jr,Da,Oa,Vi,Na,Jc,Fa,Zr,Zc,th,Xt,$a,to,eh,Wi,Ba,xi,Yb,Kb,up,ws,Ru,dp,Qb,Jb;let hc=(Xt=class{constructor({textContentSource:t,container:e,viewport:s}){b(this,xi);b(this,Ui,Promise.withResolvers());b(this,Qe,null);b(this,Xc,!1);b(this,Yc,!!((ey=globalThis.FontInspector)!=null&&ey.enabled));b(this,Qr,null);b(this,si,null);b(this,Kc,0);b(this,Qc,0);b(this,Jr,null);b(this,Da,null);b(this,Oa,0);b(this,Vi,0);b(this,Na,Object.create(null));b(this,Jc,[]);b(this,Fa,null);b(this,Zr,[]);b(this,Zc,new WeakMap);b(this,th,null);var c;if(t instanceof ReadableStream)m(this,Fa,t);else if(typeof t=="object")m(this,Fa,new ReadableStream({start(h){h.enqueue(t),h.close()}}));else throw new Error('No "textContentSource" parameter specified.');m(this,Qe,m(this,Da,e)),m(this,Vi,s.scale*nn.pixelRatio),m(this,Oa,s.rotation),m(this,si,{div:null,properties:null,ctx:null});const{pageWidth:n,pageHeight:r,pageX:o,pageY:l}=s.rawDims;m(this,th,[1,0,0,-1,-o,l+r]),m(this,Qc,n),m(this,Kc,r),A(c=Xt,ws,Qb).call(c),fr(e,s),a(this,Ui).promise.finally(()=>{a(Xt,Ba).delete(this),m(this,si,null),m(this,Na,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:t,isFirefox:e}=ye.platform;return dt(this,"fontFamilyMap",new Map([["sans-serif",`${t&&e?"Calibri, ":""}sans-serif`],["monospace",`${t&&e?"Lucida Console, ":""}monospace`]]))}render(){const t=()=>{a(this,Jr).read().then(({value:e,done:s})=>{if(s){a(this,Ui).resolve();return}a(this,Qr)??m(this,Qr,e.lang),Object.assign(a(this,Na),e.styles),A(this,xi,Yb).call(this,e.items),t()},a(this,Ui).reject)};return m(this,Jr,a(this,Fa).getReader()),a(Xt,Ba).add(this),t(),a(this,Ui).promise}update({viewport:t,onBefore:e=null}){var r;const s=t.scale*nn.pixelRatio,n=t.rotation;if(n!==a(this,Oa)&&(e==null||e(),m(this,Oa,n),fr(a(this,Da),{rotation:n})),s!==a(this,Vi)){e==null||e(),m(this,Vi,s);const o={div:null,properties:null,ctx:A(r=Xt,ws,Ru).call(r,a(this,Qr))};for(const l of a(this,Zr))o.properties=a(this,Zc).get(l),o.div=l,A(this,xi,up).call(this,o)}}cancel(){var e;const t=new Si("TextLayer task cancelled.");(e=a(this,Jr))==null||e.cancel(t).catch(()=>{}),m(this,Jr,null),a(this,Ui).reject(t)}get textDivs(){return a(this,Zr)}get textContentItemsStr(){return a(this,Jc)}static cleanup(){if(!(a(this,Ba).size>0)){a(this,$a).clear();for(const{canvas:t}of a(this,to).values())t.remove();a(this,to).clear()}}},Ui=new WeakMap,Qe=new WeakMap,Xc=new WeakMap,Yc=new WeakMap,Qr=new WeakMap,si=new WeakMap,Kc=new WeakMap,Qc=new WeakMap,Jr=new WeakMap,Da=new WeakMap,Oa=new WeakMap,Vi=new WeakMap,Na=new WeakMap,Jc=new WeakMap,Fa=new WeakMap,Zr=new WeakMap,Zc=new WeakMap,th=new WeakMap,$a=new WeakMap,to=new WeakMap,eh=new WeakMap,Wi=new WeakMap,Ba=new WeakMap,xi=new WeakSet,Yb=function(t){var n,r;if(a(this,Xc))return;(r=a(this,si)).ctx??(r.ctx=A(n=Xt,ws,Ru).call(n,a(this,Qr)));const e=a(this,Zr),s=a(this,Jc);for(const o of t){if(e.length>Sx){st("Ignoring additional textDivs for performance reasons."),m(this,Xc,!0);return}if(o.str===void 0){if(o.type==="beginMarkedContentProps"||o.type==="beginMarkedContent"){const l=a(this,Qe);m(this,Qe,document.createElement("span")),a(this,Qe).classList.add("markedContent"),o.id!==null&&a(this,Qe).setAttribute("id",`${o.id}`),l.append(a(this,Qe))}else o.type==="endMarkedContent"&&m(this,Qe,a(this,Qe).parentNode);continue}s.push(o.str),A(this,xi,Kb).call(this,o)}},Kb=function(t){var g;const e=document.createElement("span"),s={angle:0,canvasWidth:0,hasText:t.str!=="",hasEOL:t.hasEOL,fontSize:0};a(this,Zr).push(e);const n=Q.transform(a(this,th),t.transform);let r=Math.atan2(n[1],n[0]);const o=a(this,Na)[t.fontName];o.vertical&&(r+=Math.PI/2);let l=a(this,Yc)&&o.fontSubstitution||o.fontFamily;l=Xt.fontFamilyMap.get(l)||l;const c=Math.hypot(n[2],n[3]),h=c*A(g=Xt,ws,Jb).call(g,l,o,a(this,Qr));let u,d;r===0?(u=n[4],d=n[5]-h):(u=n[4]+h*Math.sin(r),d=n[5]-h*Math.cos(r));const f="calc(var(--total-scale-factor) *",p=e.style;a(this,Qe)===a(this,Da)?(p.left=`${(100*u/a(this,Qc)).toFixed(2)}%`,p.top=`${(100*d/a(this,Kc)).toFixed(2)}%`):(p.left=`${f}${u.toFixed(2)}px)`,p.top=`${f}${d.toFixed(2)}px)`),p.fontSize=`${f}${(a(Xt,Wi)*c).toFixed(2)}px)`,p.fontFamily=l,s.fontSize=c,e.setAttribute("role","presentation"),e.textContent=t.str,e.dir=t.dir,a(this,Yc)&&(e.dataset.fontName=o.fontSubstitutionLoadedName||t.fontName),r!==0&&(s.angle=r*(180/Math.PI));let y=!1;if(t.str.length>1)y=!0;else if(t.str!==" "&&t.transform[0]!==t.transform[3]){const v=Math.abs(t.transform[0]),w=Math.abs(t.transform[3]);v!==w&&Math.max(v,w)/Math.min(v,w)>1.5&&(y=!0)}if(y&&(s.canvasWidth=o.vertical?t.height:t.width),a(this,Zc).set(e,s),a(this,si).div=e,a(this,si).properties=s,A(this,xi,up).call(this,a(this,si)),s.hasText&&a(this,Qe).append(e),s.hasEOL){const v=document.createElement("br");v.setAttribute("role","presentation"),a(this,Qe).append(v)}},up=function(t){var l;const{div:e,properties:s,ctx:n}=t,{style:r}=e;let o="";if(a(Xt,Wi)>1&&(o=`scale(${1/a(Xt,Wi)})`),s.canvasWidth!==0&&s.hasText){const{fontFamily:c}=r,{canvasWidth:h,fontSize:u}=s;A(l=Xt,ws,dp).call(l,n,u*a(this,Vi),c);const{width:d}=n.measureText(e.textContent);d>0&&(o=`scaleX(${h*a(this,Vi)/d}) ${o}`)}s.angle!==0&&(o=`rotate(${s.angle}deg) ${o}`),o.length>0&&(r.transform=o)},ws=new WeakSet,Ru=function(t=null){let e=a(this,to).get(t||(t=""));if(!e){const s=document.createElement("canvas");s.className="hiddenCanvasElement",s.lang=t,document.body.append(s),e=s.getContext("2d",{alpha:!1,willReadFrequently:!0}),a(this,to).set(t,e),a(this,eh).set(e,{size:0,family:""})}return e},dp=function(t,e,s){const n=a(this,eh).get(t);e===n.size&&s===n.family||(t.font=`${e}px ${s}`,n.size=e,n.family=s)},Qb=function(){if(a(this,Wi)!==null)return;const t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.style.position="absolute",t.textContent="X",document.body.append(t),m(this,Wi,t.getBoundingClientRect().height),t.remove()},Jb=function(t,e,s){const n=a(this,$a).get(t);if(n)return n;const r=A(this,ws,Ru).call(this,s);r.canvas.width=r.canvas.height=Hm,A(this,ws,dp).call(this,r,Hm,t);const o=r.measureText(""),l=o.fontBoundingBoxAscent,c=Math.abs(o.fontBoundingBoxDescent);r.canvas.width=r.canvas.height=0;let h=.8;return l?h=l/(l+c):(ye.platform.isFirefox&&st("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),e.ascent?h=e.ascent:e.descent&&(h=1+e.descent)),a(this,$a).set(t,h),h},b(Xt,ws),b(Xt,$a,new Map),b(Xt,to,new Map),b(Xt,eh,new WeakMap),b(Xt,Wi,null),b(Xt,Ba,new Set),Xt);class uc{static textContent(t){const e=[],s={items:e,styles:Object.create(null)};function n(r){var c;if(!r)return;let o=null;const l=r.name;if(l==="#text")o=r.value;else if(uc.shouldBuildText(l))(c=r==null?void 0:r.attributes)!=null&&c.textContent?o=r.attributes.textContent:r.value&&(o=r.value);else return;if(o!==null&&e.push({str:o}),!!r.children)for(const h of r.children)n(h)}return n(t),s}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}}const Ex=100;function Eg(i={}){typeof i=="string"||i instanceof URL?i={url:i}:(i instanceof ArrayBuffer||ArrayBuffer.isView(i))&&(i={data:i});const t=new fp,{docId:e}=t,s=i.url?L1(i.url):null,n=i.data?D1(i.data):null,r=i.httpHeaders||null,o=i.withCredentials===!0,l=i.password??null,c=i.range instanceof xg?i.range:null,h=Number.isInteger(i.rangeChunkSize)&&i.rangeChunkSize>0?i.rangeChunkSize:2**16;let u=i.worker instanceof Al?i.worker:null;const d=i.verbosity,f=typeof i.docBaseUrl=="string"&&!Xh(i.docBaseUrl)?i.docBaseUrl:null,p=lu(i.cMapUrl),y=i.cMapPacked!==!1,g=i.CMapReaderFactory||(Ge?H1:Rm),v=lu(i.iccUrl),w=lu(i.standardFontDataUrl),_=i.StandardFontDataFactory||(Ge?z1:km),C=lu(i.wasmUrl),x=i.WasmFactory||(Ge?G1:Im),E=i.stopAtErrors!==!0,T=Number.isInteger(i.maxImageSize)&&i.maxImageSize>-1?i.maxImageSize:-1,P=i.isEvalSupported!==!1,M=typeof i.isOffscreenCanvasSupported=="boolean"?i.isOffscreenCanvasSupported:!Ge,D=typeof i.isImageDecoderSupported=="boolean"?i.isImageDecoderSupported:!Ge&&(ye.platform.isFirefox||!globalThis.chrome),S=Number.isInteger(i.canvasMaxAreaInBytes)?i.canvasMaxAreaInBytes:-1,k=typeof i.disableFontFace=="boolean"?i.disableFontFace:Ge,N=i.fontExtraProperties===!0,H=i.enableXfa===!0,z=i.ownerDocument||globalThis.document,q=i.disableRange===!0,F=i.disableStream===!0,j=i.disableAutoFetch===!0,lt=i.pdfBug===!0,ut=i.CanvasFactory||(Ge?j1:F1),R=i.FilterFactory||(Ge?B1:$1),O=i.enableHWA===!0,U=i.useWasm!==!1,V=c?c.length:i.length??NaN,tt=typeof i.useSystemFonts=="boolean"?i.useSystemFonts:!Ge&&!k,at=typeof i.useWorkerFetch=="boolean"?i.useWorkerFetch:!!(g===Rm&&_===km&&x===Im&&p&&w&&C&&Ll(p,document.baseURI)&&Ll(w,document.baseURI)&&Ll(C,document.baseURI)),J=null;g1(d);const ct={canvasFactory:new ut({ownerDocument:z,enableHWA:O}),filterFactory:new R({docId:e,ownerDocument:z}),cMapReaderFactory:at?null:new g({baseUrl:p,isCompressed:y}),standardFontDataFactory:at?null:new _({baseUrl:w}),wasmFactory:at?null:new x({baseUrl:C})};u||(u=Al.create({verbosity:d,port:Ds.workerPort}),t._worker=u);const yt={docId:e,apiVersion:"5.3.31",data:n,password:l,disableAutoFetch:j,rangeChunkSize:h,length:V,docBaseUrl:f,enableXfa:H,evaluatorOptions:{maxImageSize:T,disableFontFace:k,ignoreErrors:E,isEvalSupported:P,isOffscreenCanvasSupported:M,isImageDecoderSupported:D,canvasMaxAreaInBytes:S,fontExtraProperties:N,useSystemFonts:tt,useWasm:U,useWorkerFetch:at,cMapUrl:p,iccUrl:v,standardFontDataUrl:w,wasmUrl:C}},qe={ownerDocument:z,pdfBug:lt,styleElement:J,loadingParams:{disableAutoFetch:j,enableXfa:H}};return u.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(u.destroyed)throw new Error("Worker was destroyed");const Lt=u.messageHandler.sendWithPromise("GetDocRequest",yt,n?[n.buffer]:null);let Bs;if(c)Bs=new rx(c,{disableRange:q,disableStream:F});else if(!n){if(!s)throw new Error("getDocument - no `url` parameter provided.");const js=Ll(s)?cx:Ge?vx:px;Bs=new js({url:s,length:V,httpHeaders:r,withCredentials:o,rangeChunkSize:h,disableRange:q,disableStream:F})}return Lt.then(js=>{if(t.destroyed)throw new Error("Loading aborted");if(u.destroyed)throw new Error("Worker was destroyed");const be=new $l(e,js,u.port),wt=new Cx(be,t,Bs,qe,ct);t._transport=wt,be.send("Ready",null)})}).catch(t._capability.reject),t}var yd;const bd=class bd{constructor(){$(this,"_capability",Promise.withResolvers());$(this,"_transport",null);$(this,"_worker",null);$(this,"docId",`d${Fe(bd,yd)._++}`);$(this,"destroyed",!1);$(this,"onPassword",null);$(this,"onProgress",null)}get promise(){return this._capability.promise}async destroy(){var t,e,s,n;this.destroyed=!0;try{(t=this._worker)!=null&&t.port&&(this._worker._pendingDestroy=!0),await((e=this._transport)==null?void 0:e.destroy())}catch(r){throw(s=this._worker)!=null&&s.port&&delete this._worker._pendingDestroy,r}this._transport=null,(n=this._worker)==null||n.destroy(),this._worker=null}async getData(){return this._transport.getData()}};yd=new WeakMap,b(bd,yd,0);let fp=bd;var eo,sh,nh,ih,rh,sy;let xg=(sy=class{constructor(t,e,s=!1,n=null){b(this,eo,Promise.withResolvers());b(this,sh,[]);b(this,nh,[]);b(this,ih,[]);b(this,rh,[]);this.length=t,this.initialData=e,this.progressiveDone=s,this.contentDispositionFilename=n}addRangeListener(t){a(this,rh).push(t)}addProgressListener(t){a(this,ih).push(t)}addProgressiveReadListener(t){a(this,nh).push(t)}addProgressiveDoneListener(t){a(this,sh).push(t)}onDataRange(t,e){for(const s of a(this,rh))s(t,e)}onDataProgress(t,e){a(this,eo).promise.then(()=>{for(const s of a(this,ih))s(t,e)})}onDataProgressiveRead(t){a(this,eo).promise.then(()=>{for(const e of a(this,nh))e(t)})}onDataProgressiveDone(){a(this,eo).promise.then(()=>{for(const t of a(this,sh))t()})}transportReady(){a(this,eo).resolve()}requestDataRange(t,e){Pt("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}},eo=new WeakMap,sh=new WeakMap,nh=new WeakMap,ih=new WeakMap,rh=new WeakMap,sy);class xx{constructor(t,e){this._pdfInfo=t,this._transport=e}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return dt(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(e)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var ni,so,Gl;class _x{constructor(t,e,s,n=!1){b(this,so);b(this,ni,!1);this._pageIndex=t,this._pageInfo=e,this._transport=s,this._stats=n?new Cm:null,this._pdfBug=n,this.commonObjs=s.commonObjs,this.objs=new Xb,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:e=this.rotate,offsetX:s=0,offsetY:n=0,dontFlip:r=!1}={}){return new qh({viewBox:this.view,userUnit:this.userUnit,scale:t,rotation:e,offsetX:s,offsetY:n,dontFlip:r})}getAnnotations({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,e)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return dt(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var t;return((t=this._transport._htmlForXfa)==null?void 0:t.children[this._pageIndex])||null}render({canvasContext:t,viewport:e,intent:s="display",annotationMode:n=kn.ENABLE,transform:r=null,background:o=null,optionalContentConfigPromise:l=null,annotationCanvasMap:c=null,pageColors:h=null,printAnnotationStorage:u=null,isEditing:d=!1}){var x,E;(x=this._stats)==null||x.time("Overall");const f=this._transport.getRenderingIntent(s,n,u,d),{renderingIntent:p,cacheKey:y}=f;m(this,ni,!1),l||(l=this._transport.getOptionalContentConfig(p));let g=this._intentStates.get(y);g||(g=Object.create(null),this._intentStates.set(y,g)),g.streamReaderCancelTimeout&&(clearTimeout(g.streamReaderCancelTimeout),g.streamReaderCancelTimeout=null);const v=!!(p&ms.PRINT);g.displayReadyCapability||(g.displayReadyCapability=Promise.withResolvers(),g.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(E=this._stats)==null||E.time("Page Request"),this._pumpOperatorList(f));const w=T=>{var P;g.renderTasks.delete(_),v&&m(this,ni,!0),A(this,so,Gl).call(this),T?(_.capability.reject(T),this._abortOperatorList({intentState:g,reason:T instanceof Error?T:new Error(T)})):_.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(P=globalThis.Stats)!=null&&P.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},_=new pp({callback:w,params:{canvasContext:t,viewport:e,transform:r,background:o},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:c,operatorList:g.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!v,pdfBug:this._pdfBug,pageColors:h});(g.renderTasks||(g.renderTasks=new Set)).add(_);const C=_.task;return Promise.all([g.displayReadyCapability.promise,l]).then(([T,P])=>{var M;if(this.destroyed){w();return}if((M=this._stats)==null||M.time("Rendering"),!(P.renderingIntent&p))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");_.initializeGraphics({transparency:T,optionalContentConfig:P}),_.operatorListChanged()}).catch(w),C}getOperatorList({intent:t="display",annotationMode:e=kn.ENABLE,printAnnotationStorage:s=null,isEditing:n=!1}={}){var h;function r(){l.operatorList.lastChunk&&(l.opListReadCapability.resolve(l.operatorList),l.renderTasks.delete(c))}const o=this._transport.getRenderingIntent(t,e,s,n,!0);let l=this._intentStates.get(o.cacheKey);l||(l=Object.create(null),this._intentStates.set(o.cacheKey,l));let c;return l.opListReadCapability||(c=Object.create(null),c.operatorListChanged=r,l.opListReadCapability=Promise.withResolvers(),(l.renderTasks||(l.renderTasks=new Set)).add(c),l.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(h=this._stats)==null||h.time("Page Request"),this._pumpOperatorList(o)),l.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:e=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:e===!0},{highWaterMark:100,size(n){return n.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(s=>uc.textContent(s));const e=this.streamTextContent(t);return new Promise(function(s,n){function r(){o.read().then(function({value:c,done:h}){if(h){s(l);return}l.lang??(l.lang=c.lang),Object.assign(l.styles,c.styles),l.items.push(...c.items),r()},n)}const o=e.getReader(),l={items:[],styles:Object.create(null),lang:null};r()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const e of this._intentStates.values())if(this._abortOperatorList({intentState:e,reason:new Error("Page was destroyed."),force:!0}),!e.opListReadCapability)for(const s of e.renderTasks)t.push(s.completed),s.cancel();return this.objs.clear(),m(this,ni,!1),Promise.all(t)}cleanup(t=!1){m(this,ni,!0);const e=A(this,so,Gl).call(this);return t&&e&&this._stats&&(this._stats=new Cm),e}_startRenderPage(t,e){var n,r;const s=this._intentStates.get(e);s&&((n=this._stats)==null||n.timeEnd("Page Request"),(r=s.displayReadyCapability)==null||r.resolve(t))}_renderPageChunk(t,e){for(let s=0,n=t.length;s<n;s++)e.operatorList.fnArray.push(t.fnArray[s]),e.operatorList.argsArray.push(t.argsArray[s]);e.operatorList.lastChunk=t.lastChunk,e.operatorList.separateAnnots=t.separateAnnots;for(const s of e.renderTasks)s.operatorListChanged();t.lastChunk&&A(this,so,Gl).call(this)}_pumpOperatorList({renderingIntent:t,cacheKey:e,annotationStorageSerializable:s,modifiedIds:n}){const{map:r,transfer:o}=s,c=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:e,annotationStorage:r,modifiedIds:n},o).getReader(),h=this._intentStates.get(e);h.streamReader=c;const u=()=>{c.read().then(({value:d,done:f})=>{if(f){h.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(d,h),u())},d=>{if(h.streamReader=null,!this._transport.destroyed){if(h.operatorList){h.operatorList.lastChunk=!0;for(const f of h.renderTasks)f.operatorListChanged();A(this,so,Gl).call(this)}if(h.displayReadyCapability)h.displayReadyCapability.reject(d);else if(h.opListReadCapability)h.opListReadCapability.reject(d);else throw d}})};u()}_abortOperatorList({intentState:t,reason:e,force:s=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!s){if(t.renderTasks.size>0)return;if(e instanceof Gd){let n=Ex;e.extraDelay>0&&e.extraDelay<1e3&&(n+=e.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:e,force:!0})},n);return}}if(t.streamReader.cancel(new Si(e.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[n,r]of this._intentStates)if(r===t){this._intentStates.delete(n);break}this.cleanup()}}}get stats(){return this._stats}}ni=new WeakMap,so=new WeakSet,Gl=function(){if(!a(this,ni)||this.destroyed)return!1;for(const{renderTasks:t,operatorList:e}of this._intentStates.values())if(t.size>0||!e.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),m(this,ni,!1),!0};var qi,Vs,ii,no,vd,io,ro,Ue,ku,Zb,t0,Ul,ja,Iu;const Bt=class Bt{constructor({name:t=null,port:e=null,verbosity:s=m1()}={}){b(this,Ue);b(this,qi,Promise.withResolvers());b(this,Vs,null);b(this,ii,null);b(this,no,null);if(this.name=t,this.destroyed=!1,this.verbosity=s,e){if(a(Bt,ro).has(e))throw new Error("Cannot use more than one PDFWorker per port.");a(Bt,ro).set(e,this),A(this,Ue,Zb).call(this,e)}else A(this,Ue,t0).call(this)}get promise(){return a(this,qi).promise}get port(){return a(this,ii)}get messageHandler(){return a(this,Vs)}destroy(){var t,e;this.destroyed=!0,(t=a(this,no))==null||t.terminate(),m(this,no,null),a(Bt,ro).delete(a(this,ii)),m(this,ii,null),(e=a(this,Vs))==null||e.destroy(),m(this,Vs,null)}static create(t){const e=a(this,ro).get(t==null?void 0:t.port);if(e){if(e._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return e}return new Bt(t)}static get workerSrc(){if(Ds.workerSrc)return Ds.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return dt(this,"_setupFakeWorkerGlobal",(async()=>a(this,ja,Iu)?a(this,ja,Iu):(await import(this.workerSrc)).WorkerMessageHandler)())}};qi=new WeakMap,Vs=new WeakMap,ii=new WeakMap,no=new WeakMap,vd=new WeakMap,io=new WeakMap,ro=new WeakMap,Ue=new WeakSet,ku=function(){a(this,qi).resolve(),a(this,Vs).send("configure",{verbosity:this.verbosity})},Zb=function(t){m(this,ii,t),m(this,Vs,new $l("main","worker",t)),a(this,Vs).on("ready",()=>{}),A(this,Ue,ku).call(this)},t0=function(){if(a(Bt,io)||a(Bt,ja,Iu)){A(this,Ue,Ul).call(this);return}let{workerSrc:t}=Bt;try{Bt._isSameOrigin(window.location,t)||(t=Bt._createCDNWrapper(new URL(t,window.location).href));const e=new Worker(t,{type:"module"}),s=new $l("main","worker",e),n=()=>{r.abort(),s.destroy(),e.terminate(),this.destroyed?a(this,qi).reject(new Error("Worker was destroyed")):A(this,Ue,Ul).call(this)},r=new AbortController;e.addEventListener("error",()=>{a(this,no)||n()},{signal:r.signal}),s.on("test",l=>{if(r.abort(),this.destroyed||!l){n();return}m(this,Vs,s),m(this,ii,e),m(this,no,e),A(this,Ue,ku).call(this)}),s.on("ready",l=>{if(r.abort(),this.destroyed){n();return}try{o()}catch{A(this,Ue,Ul).call(this)}});const o=()=>{const l=new Uint8Array;s.send("test",l,[l.buffer])};o();return}catch{zd("The worker has been disabled.")}A(this,Ue,Ul).call(this)},Ul=function(){a(Bt,io)||(st("Setting up fake worker."),m(Bt,io,!0)),Bt._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){a(this,qi).reject(new Error("Worker was destroyed"));return}const e=new N1;m(this,ii,e);const s=`fake${Fe(Bt,vd)._++}`,n=new $l(s+"_worker",s,e);t.setup(n,e),m(this,Vs,new $l(s,s+"_worker",e)),A(this,Ue,ku).call(this)}).catch(t=>{a(this,qi).reject(new Error(`Setting up fake worker failed: "${t.message}".`))})},ja=new WeakSet,Iu=function(){var t;try{return((t=globalThis.pdfjsWorker)==null?void 0:t.WorkerMessageHandler)||null}catch{return null}},b(Bt,ja),b(Bt,vd,0),b(Bt,io,!1),b(Bt,ro,new WeakMap),Ge&&(m(Bt,io,!0),Ds.workerSrc||(Ds.workerSrc="./pdf.worker.mjs")),Bt._isSameOrigin=(t,e)=>{const s=URL.parse(t);if(!(s!=null&&s.origin)||s.origin==="null")return!1;const n=new URL(e,s);return s.origin===n.origin},Bt._createCDNWrapper=t=>{const e=`await import("${t}");`;return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))},Bt.fromPort=t=>{if(_1("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!(t!=null&&t.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return Bt.create(t)};let Al=Bt;var ri,vn,Ha,za,oi,oo,Vl;class Cx{constructor(t,e,s,n,r){b(this,oo);b(this,ri,new Map);b(this,vn,new Map);b(this,Ha,new Map);b(this,za,new Map);b(this,oi,null);this.messageHandler=t,this.loadingTask=e,this.commonObjs=new Xb,this.fontLoader=new I1({ownerDocument:n.ownerDocument,styleElement:n.styleElement}),this.loadingParams=n.loadingParams,this._params=n,this.canvasFactory=r.canvasFactory,this.filterFactory=r.filterFactory,this.cMapReaderFactory=r.cMapReaderFactory,this.standardFontDataFactory=r.standardFontDataFactory,this.wasmFactory=r.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=s,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}get annotationStorage(){return dt(this,"annotationStorage",new Ag)}getRenderingIntent(t,e=kn.ENABLE,s=null,n=!1,r=!1){let o=ms.DISPLAY,l=tp;switch(t){case"any":o=ms.ANY;break;case"display":break;case"print":o=ms.PRINT;break;default:st(`getRenderingIntent - invalid intent: ${t}`)}const c=o&ms.PRINT&&s instanceof Ib?s:this.annotationStorage;switch(e){case kn.DISABLE:o+=ms.ANNOTATIONS_DISABLE;break;case kn.ENABLE:break;case kn.ENABLE_FORMS:o+=ms.ANNOTATIONS_FORMS;break;case kn.ENABLE_STORAGE:o+=ms.ANNOTATIONS_STORAGE,l=c.serializable;break;default:st(`getRenderingIntent - invalid annotationMode: ${e}`)}n&&(o+=ms.IS_EDITING),r&&(o+=ms.OPLIST);const{ids:h,hash:u}=c.modifiedIds,d=[o,l.hash,u];return{renderingIntent:o,cacheKey:d.join("_"),annotationStorageSerializable:l,modifiedIds:h}}destroy(){var s;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(s=a(this,oi))==null||s.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const n of a(this,vn).values())t.push(n._destroy());a(this,vn).clear(),a(this,Ha).clear(),a(this,za).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const e=this.messageHandler.sendWithPromise("Terminate",null);return t.push(e),Promise.all(t).then(()=>{var n,r;this.commonObjs.clear(),this.fontLoader.clear(),a(this,ri).clear(),this.filterFactory.destroy(),hc.cleanup(),(n=this._networkStream)==null||n.cancelAllRequests(new Si("Worker was terminated.")),(r=this.messageHandler)==null||r.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:e}=this;t.on("GetReader",(s,n)=>{re(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=r=>{this._lastProgress={loaded:r.loaded,total:r.total}},n.onPull=()=>{this._fullReader.read().then(function({value:r,done:o}){if(o){n.close();return}re(r instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),n.enqueue(new Uint8Array(r),1,[r])}).catch(r=>{n.error(r)})},n.onCancel=r=>{this._fullReader.cancel(r),n.ready.catch(o=>{if(!this.destroyed)throw o})}}),t.on("ReaderHeadersReady",async s=>{var l;await this._fullReader.headersReady;const{isStreamingSupported:n,isRangeSupported:r,contentLength:o}=this._fullReader;return(!n||!r)&&(this._lastProgress&&((l=e.onProgress)==null||l.call(e,this._lastProgress)),this._fullReader.onProgress=c=>{var h;(h=e.onProgress)==null||h.call(e,{loaded:c.loaded,total:c.total})}),{isStreamingSupported:n,isRangeSupported:r,contentLength:o}}),t.on("GetRangeReader",(s,n)=>{re(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const r=this._networkStream.getRangeReader(s.begin,s.end);if(!r){n.close();return}n.onPull=()=>{r.read().then(function({value:o,done:l}){if(l){n.close();return}re(o instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),n.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{n.error(o)})},n.onCancel=o=>{r.cancel(o),n.ready.catch(l=>{if(!this.destroyed)throw l})}}),t.on("GetDoc",({pdfInfo:s})=>{this._numPages=s.numPages,this._htmlForXfa=s.htmlForXfa,delete s.htmlForXfa,e._capability.resolve(new xx(s,this))}),t.on("DocException",s=>{e._capability.reject(Xe(s))}),t.on("PasswordRequest",s=>{m(this,oi,Promise.withResolvers());try{if(!e.onPassword)throw Xe(s);const n=r=>{r instanceof Error?a(this,oi).reject(r):a(this,oi).resolve({password:r})};e.onPassword(n,s.code)}catch(n){a(this,oi).reject(n)}return a(this,oi).promise}),t.on("DataLoaded",s=>{var n;(n=e.onProgress)==null||n.call(e,{loaded:s.length,total:s.length}),this.downloadInfoCapability.resolve(s)}),t.on("StartRenderPage",s=>{if(this.destroyed)return;a(this,vn).get(s.pageIndex)._startRenderPage(s.transparency,s.cacheKey)}),t.on("commonobj",([s,n,r])=>{var o;if(this.destroyed||this.commonObjs.has(s))return null;switch(n){case"Font":if("error"in r){const u=r.error;st(`Error during font loading: ${u}`),this.commonObjs.resolve(s,u);break}const l=this._params.pdfBug&&((o=globalThis.FontInspector)!=null&&o.enabled)?(u,d)=>globalThis.FontInspector.fontAdded(u,d):null,c=new M1(r,l);this.fontLoader.bind(c).catch(()=>t.sendWithPromise("FontFallback",{id:s})).finally(()=>{!c.fontExtraProperties&&c.data&&(c.data=null),this.commonObjs.resolve(s,c)});break;case"CopyLocalImage":const{imageRef:h}=r;re(h,"The imageRef must be defined.");for(const u of a(this,vn).values())for(const[,d]of u.objs)if((d==null?void 0:d.ref)===h)return d.dataLen?(this.commonObjs.resolve(s,structuredClone(d)),d.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(s,r);break;default:throw new Error(`Got unknown common object type ${n}`)}return null}),t.on("obj",([s,n,r,o])=>{var c;if(this.destroyed)return;const l=a(this,vn).get(n);if(!l.objs.has(s)){if(l._intentStates.size===0){(c=o==null?void 0:o.bitmap)==null||c.close();return}switch(r){case"Image":case"Pattern":l.objs.resolve(s,o);break;default:throw new Error(`Got unknown object type ${r}`)}}}),t.on("DocProgress",s=>{var n;this.destroyed||(n=e.onProgress)==null||n.call(e,{loaded:s.loaded,total:s.total})}),t.on("FetchBinaryData",async s=>{if(this.destroyed)throw new Error("Worker was destroyed.");const n=this[s.type];if(!n)throw new Error(`${s.type} not initialized, see the \`useWorkerFetch\` parameter.`);return n.fetch(s)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var s;this.annotationStorage.size<=0&&st("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:t,transfer:e}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:((s=this._fullReader)==null?void 0:s.filename)??null},e).finally(()=>{this.annotationStorage.resetModified()})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const e=t-1,s=a(this,Ha).get(e);if(s)return s;const n=this.messageHandler.sendWithPromise("GetPage",{pageIndex:e}).then(r=>{if(this.destroyed)throw new Error("Transport destroyed");r.refStr&&a(this,za).set(r.refStr,t);const o=new _x(e,r,this,this._params.pdfBug);return a(this,vn).set(e,o),o});return a(this,Ha).set(e,n),n}getPageIndex(t){return ep(t)?this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:e})}getFieldObjects(){return A(this,oo,Vl).call(this,"GetFieldObjects")}hasJSActions(){return A(this,oo,Vl).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return A(this,oo,Vl).call(this,"GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return A(this,oo,Vl).call(this,"GetOptionalContentConfig").then(e=>new ix(e,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",e=a(this,ri).get(t);if(e)return e;const s=this.messageHandler.sendWithPromise(t,null).then(n=>{var r,o;return{info:n[0],metadata:n[1]?new sx(n[1]):null,contentDispositionFilename:((r=this._fullReader)==null?void 0:r.filename)??null,contentLength:((o=this._fullReader)==null?void 0:o.contentLength)??null}});return a(this,ri).set(t,s),s}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const e of a(this,vn).values())if(!e.cleanup())throw new Error(`startCleanup: Page ${e.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),a(this,ri).clear(),this.filterFactory.destroy(!0),hc.cleanup()}}cachedPageNumber(t){if(!ep(t))return null;const e=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`;return a(this,za).get(e)??null}}ri=new WeakMap,vn=new WeakMap,Ha=new WeakMap,za=new WeakMap,oi=new WeakMap,oo=new WeakSet,Vl=function(t,e=null){const s=a(this,ri).get(t);if(s)return s;const n=this.messageHandler.sendWithPromise(t,e);return a(this,ri).set(t,n),n};var Xi;class Tx{constructor(t){b(this,Xi,null);$(this,"onContinue",null);$(this,"onError",null);m(this,Xi,t)}get promise(){return a(this,Xi).capability.promise}cancel(t=0){a(this,Xi).cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=a(this,Xi).operatorList;if(!t)return!1;const{annotationCanvasMap:e}=a(this,Xi);return t.form||t.canvas&&(e==null?void 0:e.size)>0}}Xi=new WeakMap;var Yi,ao;const Cr=class Cr{constructor({callback:t,params:e,objs:s,commonObjs:n,annotationCanvasMap:r,operatorList:o,pageIndex:l,canvasFactory:c,filterFactory:h,useRequestAnimationFrame:u=!1,pdfBug:d=!1,pageColors:f=null}){b(this,Yi,null);this.callback=t,this.params=e,this.objs=s,this.commonObjs=n,this.annotationCanvasMap=r,this.operatorListIdx=null,this.operatorList=o,this._pageIndex=l,this.canvasFactory=c,this.filterFactory=h,this._pdfBug=d,this.pageColors=f,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=u===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new Tx(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=e.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:e}){var l,c;if(this.cancelled)return;if(this._canvas){if(a(Cr,ao).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");a(Cr,ao).add(this._canvas)}this._pdfBug&&((l=globalThis.StepperManager)!=null&&l.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:s,viewport:n,transform:r,background:o}=this.params;this.gfx=new ca(s,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:e},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:r,viewport:n,transparency:t,background:o}),this.operatorListIdx=0,this.graphicsReady=!0,(c=this.graphicsReadyCallback)==null||c.call(this)}cancel(t=null,e=0){var s,n,r;this.running=!1,this.cancelled=!0,(s=this.gfx)==null||s.endDrawing(),a(this,Yi)&&(window.cancelAnimationFrame(a(this,Yi)),m(this,Yi,null)),a(Cr,ao).delete(this._canvas),t||(t=new Gd(`Rendering cancelled, page ${this._pageIndex+1}`,e)),this.callback(t),(r=(n=this.task).onError)==null||r.call(n,t)}operatorListChanged(){var t;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(t=this.stepper)==null||t.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?m(this,Yi,window.requestAnimationFrame(()=>{m(this,Yi,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),a(Cr,ao).delete(this._canvas),this.callback())))}};Yi=new WeakMap,ao=new WeakMap,b(Cr,ao,new WeakSet);let pp=Cr;const e0="5.3.31",s0="47ad820d9";function zm(i){return Math.floor(Math.max(0,Math.min(1,i))*255).toString(16).padStart(2,"0")}function Rl(i){return Math.max(0,Math.min(255,255*i))}class Gm{static CMYK_G([t,e,s,n]){return["G",1-Math.min(1,.3*t+.59*s+.11*e+n)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=Rl(t),[t,t,t]}static G_HTML([t]){const e=zm(t);return`#${e}${e}${e}`}static RGB_G([t,e,s]){return["G",.3*t+.59*e+.11*s]}static RGB_rgb(t){return t.map(Rl)}static RGB_HTML(t){return`#${t.map(zm).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,e,s,n]){return["RGB",1-Math.min(1,t+n),1-Math.min(1,s+n),1-Math.min(1,e+n)]}static CMYK_rgb([t,e,s,n]){return[Rl(1-Math.min(1,t+n)),Rl(1-Math.min(1,s+n)),Rl(1-Math.min(1,e+n))]}static CMYK_HTML(t){const e=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(e)}static RGB_CMYK([t,e,s]){const n=1-t,r=1-e,o=1-s,l=Math.min(n,r,o);return["CMYK",n,r,o,l]}}class Px{create(t,e,s=!1){if(t<=0||e<=0)throw new Error("Invalid SVG dimensions");const n=this._createSVG("svg:svg");return n.setAttribute("version","1.1"),s||(n.setAttribute("width",`${t}px`),n.setAttribute("height",`${e}px`)),n.setAttribute("preserveAspectRatio","none"),n.setAttribute("viewBox",`0 0 ${t} ${e}`),n}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){Pt("Abstract method `_createSVG` called.")}}class dc extends Px{_createSVG(t){return document.createElementNS(Bn,t)}}class _g{static setupStorage(t,e,s,n,r){const o=n.getValue(e,{value:null});switch(s.name){case"textarea":if(o.value!==null&&(t.textContent=o.value),r==="print")break;t.addEventListener("input",l=>{n.setValue(e,{value:l.target.value})});break;case"input":if(s.attributes.type==="radio"||s.attributes.type==="checkbox"){if(o.value===s.attributes.xfaOn?t.setAttribute("checked",!0):o.value===s.attributes.xfaOff&&t.removeAttribute("checked"),r==="print")break;t.addEventListener("change",l=>{n.setValue(e,{value:l.target.checked?l.target.getAttribute("xfaOn"):l.target.getAttribute("xfaOff")})})}else{if(o.value!==null&&t.setAttribute("value",o.value),r==="print")break;t.addEventListener("input",l=>{n.setValue(e,{value:l.target.value})})}break;case"select":if(o.value!==null){t.setAttribute("value",o.value);for(const l of s.children)l.attributes.value===o.value?l.attributes.selected=!0:l.attributes.hasOwnProperty("selected")&&delete l.attributes.selected}t.addEventListener("input",l=>{const c=l.target.options,h=c.selectedIndex===-1?"":c[c.selectedIndex].value;n.setValue(e,{value:h})});break}}static setAttributes({html:t,element:e,storage:s=null,intent:n,linkService:r}){const{attributes:o}=e,l=t instanceof HTMLAnchorElement;o.type==="radio"&&(o.name=`${o.name}-${n}`);for(const[c,h]of Object.entries(o))if(h!=null)switch(c){case"class":h.length&&t.setAttribute(c,h.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",h);break;case"style":Object.assign(t.style,h);break;case"textContent":t.textContent=h;break;default:(!l||c!=="href"&&c!=="newWindow")&&t.setAttribute(c,h)}l&&r.addLinkAttributes(t,o.href,o.newWindow),s&&o.dataId&&this.setupStorage(t,o.dataId,e,s)}static render(t){var d,f;const e=t.annotationStorage,s=t.linkService,n=t.xfaHtml,r=t.intent||"display",o=document.createElement(n.name);n.attributes&&this.setAttributes({html:o,element:n,intent:r,linkService:s});const l=r!=="richText",c=t.div;if(c.append(o),t.viewport){const p=`matrix(${t.viewport.transform.join(",")})`;c.style.transform=p}l&&c.setAttribute("class","xfaLayer xfaFont");const h=[];if(n.children.length===0){if(n.value){const p=document.createTextNode(n.value);o.append(p),l&&uc.shouldBuildText(n.name)&&h.push(p)}return{textDivs:h}}const u=[[n,-1,o]];for(;u.length>0;){const[p,y,g]=u.at(-1);if(y+1===p.children.length){u.pop();continue}const v=p.children[++u.at(-1)[1]];if(v===null)continue;const{name:w}=v;if(w==="#text"){const C=document.createTextNode(v.value);h.push(C),g.append(C);continue}const _=(d=v==null?void 0:v.attributes)!=null&&d.xmlns?document.createElementNS(v.attributes.xmlns,w):document.createElement(w);if(g.append(_),v.attributes&&this.setAttributes({html:_,element:v,storage:e,intent:r,linkService:s}),((f=v.children)==null?void 0:f.length)>0)u.push([v,-1,_]);else if(v.value){const C=document.createTextNode(v.value);l&&uc.shouldBuildText(w)&&h.push(C),_.append(C)}}for(const p of c.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))p.setAttribute("readOnly",!0);return{textDivs:h}}static update(t){const e=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=e,t.div.hidden=!1}}const Qh=1e3,Rx=9,$o=new WeakSet;class Um{static create(t){switch(t.data.annotationType){case Yt.LINK:return new n0(t);case Yt.TEXT:return new kx(t);case Yt.WIDGET:switch(t.data.fieldType){case"Tx":return new Ix(t);case"Btn":return t.data.radioButton?new o0(t):t.data.checkBox?new Lx(t):new Dx(t);case"Ch":return new Ox(t);case"Sig":return new Mx(t)}return new Ho(t);case Yt.POPUP:return new mp(t);case Yt.FREETEXT:return new u0(t);case Yt.LINE:return new Fx(t);case Yt.SQUARE:return new $x(t);case Yt.CIRCLE:return new Bx(t);case Yt.POLYLINE:return new d0(t);case Yt.CARET:return new Hx(t);case Yt.INK:return new Cg(t);case Yt.POLYGON:return new jx(t);case Yt.HIGHLIGHT:return new f0(t);case Yt.UNDERLINE:return new zx(t);case Yt.SQUIGGLY:return new Gx(t);case Yt.STRIKEOUT:return new Ux(t);case Yt.STAMP:return new p0(t);case Yt.FILEATTACHMENT:return new Vx(t);default:return new Zt(t)}}}var lo,Ga,Ua,oh,gp;const Lg=class Lg{constructor(t,{isRenderable:e=!1,ignoreBorder:s=!1,createQuadrilaterals:n=!1}={}){b(this,oh);b(this,lo,null);b(this,Ga,!1);b(this,Ua,null);this.isRenderable=e,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,e&&(this.container=this._createContainer(s)),n&&this._createQuadrilaterals()}static _hasPopupData({titleObj:t,contentsObj:e,richText:s}){return!!(t!=null&&t.str||e!=null&&e.str||s!=null&&s.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return Lg._hasPopupData(this.data)}updateEdited(t){var s;if(!this.container)return;a(this,lo)||m(this,lo,{rect:this.data.rect.slice(0)});const{rect:e}=t;e&&A(this,oh,gp).call(this,e),(s=a(this,Ua))==null||s.popup.updateEdited(t)}resetEdited(){var t;a(this,lo)&&(A(this,oh,gp).call(this,a(this,lo).rect),(t=a(this,Ua))==null||t.popup.resetEdited(),m(this,lo,null))}_createContainer(t){const{data:e,parent:{page:s,viewport:n}}=this,r=document.createElement("section");r.setAttribute("data-annotation-id",e.id),this instanceof Ho||(r.tabIndex=Qh);const{style:o}=r;if(o.zIndex=this.parent.zIndex++,e.alternativeText&&(r.title=e.alternativeText),e.noRotate&&r.classList.add("norotate"),!e.rect||this instanceof mp){const{rotation:g}=e;return!e.hasOwnCanvas&&g!==0&&this.setRotation(g,r),r}const{width:l,height:c}=this;if(!t&&e.borderStyle.width>0){o.borderWidth=`${e.borderStyle.width}px`;const g=e.borderStyle.horizontalCornerRadius,v=e.borderStyle.verticalCornerRadius;if(g>0||v>0){const _=`calc(${g}px * var(--total-scale-factor)) / calc(${v}px * var(--total-scale-factor))`;o.borderRadius=_}else if(this instanceof o0){const _=`calc(${l}px * var(--total-scale-factor)) / calc(${c}px * var(--total-scale-factor))`;o.borderRadius=_}switch(e.borderStyle.style){case Ko.SOLID:o.borderStyle="solid";break;case Ko.DASHED:o.borderStyle="dashed";break;case Ko.BEVELED:st("Unimplemented border style: beveled");break;case Ko.INSET:st("Unimplemented border style: inset");break;case Ko.UNDERLINE:o.borderBottomStyle="solid";break}const w=e.borderColor||null;w?(m(this,Ga,!0),o.borderColor=Q.makeHexColor(w[0]|0,w[1]|0,w[2]|0)):o.borderWidth=0}const h=Q.normalizeRect([e.rect[0],s.view[3]-e.rect[1]+s.view[1],e.rect[2],s.view[3]-e.rect[3]+s.view[1]]),{pageWidth:u,pageHeight:d,pageX:f,pageY:p}=n.rawDims;o.left=`${100*(h[0]-f)/u}%`,o.top=`${100*(h[1]-p)/d}%`;const{rotation:y}=e;return e.hasOwnCanvas||y===0?(o.width=`${100*l/u}%`,o.height=`${100*c/d}%`):this.setRotation(y,r),r}setRotation(t,e=this.container){if(!this.data.rect)return;const{pageWidth:s,pageHeight:n}=this.parent.viewport.rawDims;let{width:r,height:o}=this;t%180!==0&&([r,o]=[o,r]),e.style.width=`${100*r/s}%`,e.style.height=`${100*o/n}%`,e.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(e,s,n)=>{const r=n.detail[e],o=r[0],l=r.slice(1);n.target.style[s]=Gm[`${o}_HTML`](l),this.annotationStorage.setValue(this.data.id,{[s]:Gm[`${o}_rgb`](l)})};return dt(this,"_commonActions",{display:e=>{const{display:s}=e.detail,n=s%2===1;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:n,noPrint:s===1||s===2})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{const{hidden:s}=e.detail;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:s,noView:s})},focus:e=>{setTimeout(()=>e.target.focus({preventScroll:!1}),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:e=>{t("bgColor","backgroundColor",e)},fillColor:e=>{t("fillColor","backgroundColor",e)},fgColor:e=>{t("fgColor","color",e)},textColor:e=>{t("textColor","color",e)},borderColor:e=>{t("borderColor","borderColor",e)},strokeColor:e=>{t("strokeColor","borderColor",e)},rotation:e=>{const s=e.detail.rotation;this.setRotation(s),this.annotationStorage.setValue(this.data.id,{rotation:s})}})}_dispatchEventFromSandbox(t,e){const s=this._commonActions;for(const n of Object.keys(e.detail)){const r=t[n]||s[n];r==null||r(e)}}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const e=this.annotationStorage.getRawValue(this.data.id);if(!e)return;const s=this._commonActions;for(const[n,r]of Object.entries(e)){const o=s[n];if(o){const l={detail:{[n]:r},target:t};o(l),delete e[n]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[e,s,n,r]=this.data.rect.map(g=>Math.fround(g));if(t.length===8){const[g,v,w,_]=t.subarray(2,6);if(n===g&&r===v&&e===w&&s===_)return}const{style:o}=this.container;let l;if(a(this,Ga)){const{borderColor:g,borderWidth:v}=o;o.borderWidth=0,l=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${g}" stroke-width="${v}">`],this.container.classList.add("hasBorder")}const c=n-e,h=r-s,{svgFactory:u}=this,d=u.createElement("svg");d.classList.add("quadrilateralsContainer"),d.setAttribute("width",0),d.setAttribute("height",0);const f=u.createElement("defs");d.append(f);const p=u.createElement("clipPath"),y=`clippath_${this.data.id}`;p.setAttribute("id",y),p.setAttribute("clipPathUnits","objectBoundingBox"),f.append(p);for(let g=2,v=t.length;g<v;g+=8){const w=t[g],_=t[g+1],C=t[g+2],x=t[g+3],E=u.createElement("rect"),T=(C-e)/c,P=(r-_)/h,M=(w-C)/c,D=(_-x)/h;E.setAttribute("x",T),E.setAttribute("y",P),E.setAttribute("width",M),E.setAttribute("height",D),p.append(E),l==null||l.push(`<rect vector-effect="non-scaling-stroke" x="${T}" y="${P}" width="${M}" height="${D}"/>`)}a(this,Ga)&&(l.push("</g></svg>')"),o.backgroundImage=l.join("")),this.container.append(d),this.container.style.clipPath=`url(#${y})`}_createPopup(){const{data:t}=this,e=m(this,Ua,new mp({data:{color:t.color,titleObj:t.titleObj,modificationDate:t.modificationDate,contentsObj:t.contentsObj,richText:t.richText,parentRect:t.rect,borderStyle:0,id:`popup_${t.id}`,rotation:t.rotation},parent:this.parent,elements:[this]}));this.parent.div.append(e.render())}render(){Pt("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,e=null){const s=[];if(this._fieldObjects){const n=this._fieldObjects[t];if(n)for(const{page:r,id:o,exportValues:l}of n){if(r===-1||o===e)continue;const c=typeof l=="string"?l:null,h=document.querySelector(`[data-element-id="${o}"]`);if(h&&!$o.has(h)){st(`_getElementsByName - element not allowed: ${o}`);continue}s.push({id:o,exportValue:c,domElement:h})}return s}for(const n of document.getElementsByName(t)){const{exportValue:r}=n,o=n.getAttribute("data-element-id");o!==e&&$o.has(n)&&s.push({id:o,exportValue:r,domElement:n})}return s}show(){var t;this.container&&(this.container.hidden=!1),(t=this.popup)==null||t.maybeShow()}hide(){var t;this.container&&(this.container.hidden=!0),(t=this.popup)==null||t.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const e of t)e.classList.add("highlightArea");else t.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:e}}=this;this.container.addEventListener("dblclick",()=>{var s;(s=this.linkService.eventBus)==null||s.dispatch("switchannotationeditormode",{source:this,mode:t,editId:e})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}};lo=new WeakMap,Ga=new WeakMap,Ua=new WeakMap,oh=new WeakSet,gp=function(t){const{container:{style:e},data:{rect:s,rotation:n},parent:{viewport:{rawDims:{pageWidth:r,pageHeight:o,pageX:l,pageY:c}}}}=this;s==null||s.splice(0,4,...t),e.left=`${100*(t[0]-l)/r}%`,e.top=`${100*(o-t[3]+c)/o}%`,n===0?(e.width=`${100*(t[2]-t[0])/r}%`,e.height=`${100*(t[3]-t[1])/o}%`):this.setRotation(n)};let Zt=Lg;var bs,Sr,i0,r0;class n0 extends Zt{constructor(e,s=null){super(e,{isRenderable:!0,ignoreBorder:!!(s!=null&&s.ignoreBorder),createQuadrilaterals:!0});b(this,bs);this.isTooltipOnly=e.data.isTooltipOnly}render(){const{data:e,linkService:s}=this,n=document.createElement("a");n.setAttribute("data-element-id",e.id);let r=!1;return e.url?(s.addLinkAttributes(n,e.url,e.newWindow),r=!0):e.action?(this._bindNamedAction(n,e.action),r=!0):e.attachment?(A(this,bs,i0).call(this,n,e.attachment,e.attachmentDest),r=!0):e.setOCGState?(A(this,bs,r0).call(this,n,e.setOCGState),r=!0):e.dest?(this._bindLink(n,e.dest),r=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(n,e),r=!0),e.resetForm?(this._bindResetFormAction(n,e.resetForm),r=!0):this.isTooltipOnly&&!r&&(this._bindLink(n,""),r=!0)),this.container.classList.add("linkAnnotation"),r&&this.container.append(n),this.container}_bindLink(e,s){e.href=this.linkService.getDestinationHash(s),e.onclick=()=>(s&&this.linkService.goToDestination(s),!1),(s||s==="")&&A(this,bs,Sr).call(this)}_bindNamedAction(e,s){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(s),!1),A(this,bs,Sr).call(this)}_bindJSAction(e,s){e.href=this.linkService.getAnchorUrl("");const n=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const r of Object.keys(s.actions)){const o=n.get(r);o&&(e[o]=()=>{var l;return(l=this.linkService.eventBus)==null||l.dispatch("dispatcheventinsandbox",{source:this,detail:{id:s.id,name:r}}),!1})}e.onclick||(e.onclick=()=>!1),A(this,bs,Sr).call(this)}_bindResetFormAction(e,s){const n=e.onclick;if(n||(e.href=this.linkService.getAnchorUrl("")),A(this,bs,Sr).call(this),!this._fieldObjects){st('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),n||(e.onclick=()=>!1);return}e.onclick=()=>{var d;n==null||n();const{fields:r,refs:o,include:l}=s,c=[];if(r.length!==0||o.length!==0){const f=new Set(o);for(const p of r){const y=this._fieldObjects[p]||[];for(const{id:g}of y)f.add(g)}for(const p of Object.values(this._fieldObjects))for(const y of p)f.has(y.id)===l&&c.push(y)}else for(const f of Object.values(this._fieldObjects))c.push(...f);const h=this.annotationStorage,u=[];for(const f of c){const{id:p}=f;switch(u.push(p),f.type){case"text":{const g=f.defaultValue||"";h.setValue(p,{value:g});break}case"checkbox":case"radiobutton":{const g=f.defaultValue===f.exportValues;h.setValue(p,{value:g});break}case"combobox":case"listbox":{const g=f.defaultValue||"";h.setValue(p,{value:g});break}default:continue}const y=document.querySelector(`[data-element-id="${p}"]`);if(y){if(!$o.has(y)){st(`_bindResetFormAction - element not allowed: ${p}`);continue}}else continue;y.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((d=this.linkService.eventBus)==null||d.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:u,name:"ResetForm"}})),!1}}}bs=new WeakSet,Sr=function(){this.container.setAttribute("data-internal-link","")},i0=function(e,s,n=null){e.href=this.linkService.getAnchorUrl(""),s.description&&(e.title=s.description),e.onclick=()=>{var r;return(r=this.downloadManager)==null||r.openOrDownloadData(s.content,s.filename,n),!1},A(this,bs,Sr).call(this)},r0=function(e,s){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(s),!1),A(this,bs,Sr).call(this)};class kx extends Zt{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(t),this.container}}class Ho extends Zt{render(){return this.container}showElementAndHideCanvas(t){var e;this.data.hasOwnCanvas&&(((e=t.previousSibling)==null?void 0:e.nodeName)==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return ye.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,e,s,n,r){s.includes("mouse")?t.addEventListener(s,o=>{var l;(l=this.linkService.eventBus)==null||l.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:n,value:r(o),shift:o.shiftKey,modifier:this._getKeyModifier(o)}})}):t.addEventListener(s,o=>{var l;if(s==="blur"){if(!e.focused||!o.relatedTarget)return;e.focused=!1}else if(s==="focus"){if(e.focused)return;e.focused=!0}r&&((l=this.linkService.eventBus)==null||l.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:n,value:r(o)}}))})}_setEventListeners(t,e,s,n){var r,o,l;for(const[c,h]of s)(h==="Action"||(r=this.data.actions)!=null&&r[h])&&((h==="Focus"||h==="Blur")&&(e||(e={focused:!1})),this._setEventListener(t,e,c,h,n),h==="Focus"&&!((o=this.data.actions)!=null&&o.Blur)?this._setEventListener(t,e,"blur","Blur",null):h==="Blur"&&!((l=this.data.actions)!=null&&l.Focus)&&this._setEventListener(t,e,"focus","Focus",null))}_setBackgroundColor(t){const e=this.data.backgroundColor||null;t.style.backgroundColor=e===null?"transparent":Q.makeHexColor(e[0],e[1],e[2])}_setTextStyle(t){const e=["left","center","right"],{fontColor:s}=this.data.defaultAppearanceData,n=this.data.defaultAppearanceData.fontSize||Rx,r=t.style;let o;const l=2,c=h=>Math.round(10*h)/10;if(this.data.multiLine){const h=Math.abs(this.data.rect[3]-this.data.rect[1]-l),u=Math.round(h/(df*n))||1,d=h/u;o=Math.min(n,c(d/df))}else{const h=Math.abs(this.data.rect[3]-this.data.rect[1]-l);o=Math.min(n,c(h/df))}r.fontSize=`calc(${o}px * var(--total-scale-factor))`,r.color=Q.makeHexColor(s[0],s[1],s[2]),this.data.textAlignment!==null&&(r.textAlign=e[this.data.textAlignment])}_setRequired(t,e){e?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",e)}}class Ix extends Ho{constructor(t){const e=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:e})}setPropertyOnSiblings(t,e,s,n){const r=this.annotationStorage;for(const o of this._getElementsByName(t.name,t.id))o.domElement&&(o.domElement[e]=s),r.setValue(o.id,{[n]:s})}render(){var n,r;const t=this.annotationStorage,e=this.data.id;this.container.classList.add("textWidgetAnnotation");let s=null;if(this.renderForms){const o=t.getValue(e,{value:this.data.fieldValue});let l=o.value||"";const c=t.getValue(e,{charLimit:this.data.maxLen}).charLimit;c&&l.length>c&&(l=l.slice(0,c));let h=o.formattedValue||((n=this.data.textContent)==null?void 0:n.join(`
`))||null;h&&this.data.comb&&(h=h.replaceAll(/\s+/g,""));const u={userValue:l,formattedValue:h,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(s=document.createElement("textarea"),s.textContent=h??l,this.data.doNotScroll&&(s.style.overflowY="hidden")):(s=document.createElement("input"),s.type=this.data.password?"password":"text",s.setAttribute("value",h??l),this.data.doNotScroll&&(s.style.overflowX="hidden")),this.data.hasOwnCanvas&&(s.hidden=!0),$o.add(s),s.setAttribute("data-element-id",e),s.disabled=this.data.readOnly,s.name=this.data.fieldName,s.tabIndex=Qh,this._setRequired(s,this.data.required),c&&(s.maxLength=c),s.addEventListener("input",f=>{t.setValue(e,{value:f.target.value}),this.setPropertyOnSiblings(s,"value",f.target.value,"value"),u.formattedValue=null}),s.addEventListener("resetform",f=>{const p=this.data.defaultFieldValue??"";s.value=u.userValue=p,u.formattedValue=null});let d=f=>{const{formattedValue:p}=u;p!=null&&(f.target.value=p),f.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){s.addEventListener("focus",p=>{var g;if(u.focused)return;const{target:y}=p;u.userValue&&(y.value=u.userValue),u.lastCommittedValue=y.value,u.commitKey=1,(g=this.data.actions)!=null&&g.Focus||(u.focused=!0)}),s.addEventListener("updatefromsandbox",p=>{this.showElementAndHideCanvas(p.target);const y={value(g){u.userValue=g.detail.value??"",t.setValue(e,{value:u.userValue.toString()}),g.target.value=u.userValue},formattedValue(g){const{formattedValue:v}=g.detail;u.formattedValue=v,v!=null&&g.target!==document.activeElement&&(g.target.value=v),t.setValue(e,{formattedValue:v})},selRange(g){g.target.setSelectionRange(...g.detail.selRange)},charLimit:g=>{var C;const{charLimit:v}=g.detail,{target:w}=g;if(v===0){w.removeAttribute("maxLength");return}w.setAttribute("maxLength",v);let _=u.userValue;!_||_.length<=v||(_=_.slice(0,v),w.value=u.userValue=_,t.setValue(e,{value:_}),(C=this.linkService.eventBus)==null||C.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:_,willCommit:!0,commitKey:1,selStart:w.selectionStart,selEnd:w.selectionEnd}}))}};this._dispatchEventFromSandbox(y,p)}),s.addEventListener("keydown",p=>{var v;u.commitKey=1;let y=-1;if(p.key==="Escape"?y=0:p.key==="Enter"&&!this.data.multiLine?y=2:p.key==="Tab"&&(u.commitKey=3),y===-1)return;const{value:g}=p.target;u.lastCommittedValue!==g&&(u.lastCommittedValue=g,u.userValue=g,(v=this.linkService.eventBus)==null||v.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:g,willCommit:!0,commitKey:y,selStart:p.target.selectionStart,selEnd:p.target.selectionEnd}}))});const f=d;d=null,s.addEventListener("blur",p=>{var g,v;if(!u.focused||!p.relatedTarget)return;(g=this.data.actions)!=null&&g.Blur||(u.focused=!1);const{value:y}=p.target;u.userValue=y,u.lastCommittedValue!==y&&((v=this.linkService.eventBus)==null||v.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:y,willCommit:!0,commitKey:u.commitKey,selStart:p.target.selectionStart,selEnd:p.target.selectionEnd}})),f(p)}),(r=this.data.actions)!=null&&r.Keystroke&&s.addEventListener("beforeinput",p=>{var E;u.lastCommittedValue=null;const{data:y,target:g}=p,{value:v,selectionStart:w,selectionEnd:_}=g;let C=w,x=_;switch(p.inputType){case"deleteWordBackward":{const T=v.substring(0,w).match(/\w*[^\w]*$/);T&&(C-=T[0].length);break}case"deleteWordForward":{const T=v.substring(w).match(/^[^\w]*\w*/);T&&(x+=T[0].length);break}case"deleteContentBackward":w===_&&(C-=1);break;case"deleteContentForward":w===_&&(x+=1);break}p.preventDefault(),(E=this.linkService.eventBus)==null||E.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:v,change:y||"",willCommit:!1,selStart:C,selEnd:x}})}),this._setEventListeners(s,u,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],p=>p.target.value)}if(d&&s.addEventListener("blur",d),this.data.comb){const p=(this.data.rect[2]-this.data.rect[0])/c;s.classList.add("comb"),s.style.letterSpacing=`calc(${p}px * var(--total-scale-factor) - 1ch)`}}else s=document.createElement("div"),s.textContent=this.data.fieldValue,s.style.verticalAlign="middle",s.style.display="table-cell",this.data.hasOwnCanvas&&(s.hidden=!0);return this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class Mx extends Ho{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class Lx extends Ho{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,e=this.data,s=e.id;let n=t.getValue(s,{value:e.exportValue===e.fieldValue}).value;typeof n=="string"&&(n=n!=="Off",t.setValue(s,{value:n})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const r=document.createElement("input");return $o.add(r),r.setAttribute("data-element-id",s),r.disabled=e.readOnly,this._setRequired(r,this.data.required),r.type="checkbox",r.name=e.fieldName,n&&r.setAttribute("checked",!0),r.setAttribute("exportValue",e.exportValue),r.tabIndex=Qh,r.addEventListener("change",o=>{const{name:l,checked:c}=o.target;for(const h of this._getElementsByName(l,s)){const u=c&&h.exportValue===e.exportValue;h.domElement&&(h.domElement.checked=u),t.setValue(h.id,{value:u})}t.setValue(s,{value:c})}),r.addEventListener("resetform",o=>{const l=e.defaultFieldValue||"Off";o.target.checked=l===e.exportValue}),this.enableScripting&&this.hasJSActions&&(r.addEventListener("updatefromsandbox",o=>{const l={value(c){c.target.checked=c.detail.value!=="Off",t.setValue(s,{value:c.target.checked})}};this._dispatchEventFromSandbox(l,o)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class o0 extends Ho{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,e=this.data,s=e.id;let n=t.getValue(s,{value:e.fieldValue===e.buttonValue}).value;if(typeof n=="string"&&(n=n!==e.buttonValue,t.setValue(s,{value:n})),n)for(const o of this._getElementsByName(e.fieldName,s))t.setValue(o.id,{value:!1});const r=document.createElement("input");if($o.add(r),r.setAttribute("data-element-id",s),r.disabled=e.readOnly,this._setRequired(r,this.data.required),r.type="radio",r.name=e.fieldName,n&&r.setAttribute("checked",!0),r.tabIndex=Qh,r.addEventListener("change",o=>{const{name:l,checked:c}=o.target;for(const h of this._getElementsByName(l,s))t.setValue(h.id,{value:!1});t.setValue(s,{value:c})}),r.addEventListener("resetform",o=>{const l=e.defaultFieldValue;o.target.checked=l!=null&&l===e.buttonValue}),this.enableScripting&&this.hasJSActions){const o=e.buttonValue;r.addEventListener("updatefromsandbox",l=>{const c={value:h=>{const u=o===h.detail.value;for(const d of this._getElementsByName(h.target.name)){const f=u&&d.id===s;d.domElement&&(d.domElement.checked=f),t.setValue(d.id,{value:f})}}};this._dispatchEventFromSandbox(c,l)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],l=>l.target.checked)}return this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class Dx extends n0{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const e=t.lastChild;return this.enableScripting&&this.hasJSActions&&e&&(this._setDefaultPropertiesFromJS(e),e.addEventListener("updatefromsandbox",s=>{this._dispatchEventFromSandbox({},s)})),t}}class Ox extends Ho{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,e=this.data.id,s=t.getValue(e,{value:this.data.fieldValue}),n=document.createElement("select");$o.add(n),n.setAttribute("data-element-id",e),n.disabled=this.data.readOnly,this._setRequired(n,this.data.required),n.name=this.data.fieldName,n.tabIndex=Qh;let r=this.data.combo&&this.data.options.length>0;this.data.combo||(n.size=this.data.options.length,this.data.multiSelect&&(n.multiple=!0)),n.addEventListener("resetform",u=>{const d=this.data.defaultFieldValue;for(const f of n.options)f.selected=f.value===d});for(const u of this.data.options){const d=document.createElement("option");d.textContent=u.displayValue,d.value=u.exportValue,s.value.includes(u.exportValue)&&(d.setAttribute("selected",!0),r=!1),n.append(d)}let o=null;if(r){const u=document.createElement("option");u.value=" ",u.setAttribute("hidden",!0),u.setAttribute("selected",!0),n.prepend(u),o=()=>{u.remove(),n.removeEventListener("input",o),o=null},n.addEventListener("input",o)}const l=u=>{const d=u?"value":"textContent",{options:f,multiple:p}=n;return p?Array.prototype.filter.call(f,y=>y.selected).map(y=>y[d]):f.selectedIndex===-1?null:f[f.selectedIndex][d]};let c=l(!1);const h=u=>{const d=u.target.options;return Array.prototype.map.call(d,f=>({displayValue:f.textContent,exportValue:f.value}))};return this.enableScripting&&this.hasJSActions?(n.addEventListener("updatefromsandbox",u=>{const d={value(f){o==null||o();const p=f.detail.value,y=new Set(Array.isArray(p)?p:[p]);for(const g of n.options)g.selected=y.has(g.value);t.setValue(e,{value:l(!0)}),c=l(!1)},multipleSelection(f){n.multiple=!0},remove(f){const p=n.options,y=f.detail.remove;p[y].selected=!1,n.remove(y),p.length>0&&Array.prototype.findIndex.call(p,v=>v.selected)===-1&&(p[0].selected=!0),t.setValue(e,{value:l(!0),items:h(f)}),c=l(!1)},clear(f){for(;n.length!==0;)n.remove(0);t.setValue(e,{value:null,items:[]}),c=l(!1)},insert(f){const{index:p,displayValue:y,exportValue:g}=f.detail.insert,v=n.children[p],w=document.createElement("option");w.textContent=y,w.value=g,v?v.before(w):n.append(w),t.setValue(e,{value:l(!0),items:h(f)}),c=l(!1)},items(f){const{items:p}=f.detail;for(;n.length!==0;)n.remove(0);for(const y of p){const{displayValue:g,exportValue:v}=y,w=document.createElement("option");w.textContent=g,w.value=v,n.append(w)}n.options.length>0&&(n.options[0].selected=!0),t.setValue(e,{value:l(!0),items:h(f)}),c=l(!1)},indices(f){const p=new Set(f.detail.indices);for(const y of f.target.options)y.selected=p.has(y.index);t.setValue(e,{value:l(!0)}),c=l(!1)},editable(f){f.target.disabled=!f.detail.editable}};this._dispatchEventFromSandbox(d,u)}),n.addEventListener("input",u=>{var p;const d=l(!0),f=l(!1);t.setValue(e,{value:d}),u.preventDefault(),(p=this.linkService.eventBus)==null||p.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:c,change:f,changeEx:d,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(n,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],u=>u.target.value)):n.addEventListener("input",function(u){t.setValue(e,{value:l(!0)})}),this.data.combo&&this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class mp extends Zt{constructor(t){const{data:e,elements:s}=t;super(t,{isRenderable:Zt._hasPopupData(e)}),this.elements=s,this.popup=null}render(){this.container.classList.add("popupAnnotation");const t=this.popup=new Nx({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),e=[];for(const s of this.elements)s.popup=t,s.container.ariaHasPopup="dialog",e.push(s.data.id),s.addHighlightArea();return this.container.setAttribute("aria-controls",e.map(s=>`${bg}${s}`).join(",")),this.container}}var Va,Ad,wd,Wa,qa,qt,ai,Xa,ah,lh,Ya,li,Ws,ci,ch,hi,hh,co,ho,Rt,Mu,yp,a0,l0,c0,h0,Lu,Du,bp;class Nx{constructor({container:t,color:e,elements:s,titleObj:n,modificationDate:r,contentsObj:o,richText:l,parent:c,rect:h,parentRect:u,open:d}){b(this,Rt);b(this,Va,A(this,Rt,c0).bind(this));b(this,Ad,A(this,Rt,bp).bind(this));b(this,wd,A(this,Rt,Du).bind(this));b(this,Wa,A(this,Rt,Lu).bind(this));b(this,qa,null);b(this,qt,null);b(this,ai,null);b(this,Xa,null);b(this,ah,null);b(this,lh,null);b(this,Ya,null);b(this,li,!1);b(this,Ws,null);b(this,ci,null);b(this,ch,null);b(this,hi,null);b(this,hh,null);b(this,co,null);b(this,ho,!1);var f;m(this,qt,t),m(this,hh,n),m(this,ai,o),m(this,hi,l),m(this,lh,c),m(this,qa,e),m(this,ch,h),m(this,Ya,u),m(this,ah,s),m(this,Xa,Vd.toDateObject(r)),this.trigger=s.flatMap(p=>p.getElementsToTriggerPopup());for(const p of this.trigger)p.addEventListener("click",a(this,Wa)),p.addEventListener("mouseenter",a(this,wd)),p.addEventListener("mouseleave",a(this,Ad)),p.classList.add("popupTriggerArea");for(const p of s)(f=p.container)==null||f.addEventListener("keydown",a(this,Va));a(this,qt).hidden=!0,d&&A(this,Rt,Lu).call(this)}render(){if(a(this,Ws))return;const t=m(this,Ws,document.createElement("div"));if(t.className="popup",a(this,qa)){const r=t.style.outlineColor=Q.makeHexColor(...a(this,qa));t.style.backgroundColor=`color-mix(in srgb, ${r} 30%, white)`}const e=document.createElement("span");e.className="header";const s=document.createElement("h1");if(e.append(s),{dir:s.dir,str:s.textContent}=a(this,hh),t.append(e),a(this,Xa)){const r=document.createElement("span");r.classList.add("popupDate"),r.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),r.setAttribute("data-l10n-args",JSON.stringify({dateObj:a(this,Xa).valueOf()})),e.append(r)}const n=a(this,Rt,Mu);if(n)_g.render({xfaHtml:n,intent:"richText",div:t}),t.lastChild.classList.add("richText","popupContent");else{const r=this._formatContents(a(this,ai));t.append(r)}a(this,qt).append(t)}_formatContents({str:t,dir:e}){const s=document.createElement("p");s.classList.add("popupContent"),s.dir=e;const n=t.split(/(?:\r\n?|\n)/);for(let r=0,o=n.length;r<o;++r){const l=n[r];s.append(document.createTextNode(l)),r<o-1&&s.append(document.createElement("br"))}return s}updateEdited({rect:t,popupContent:e}){var s;a(this,co)||m(this,co,{contentsObj:a(this,ai),richText:a(this,hi)}),t&&m(this,ci,null),e&&(m(this,hi,A(this,Rt,l0).call(this,e)),m(this,ai,null)),(s=a(this,Ws))==null||s.remove(),m(this,Ws,null)}resetEdited(){var t;a(this,co)&&({contentsObj:Fe(this,ai)._,richText:Fe(this,hi)._}=a(this,co),m(this,co,null),(t=a(this,Ws))==null||t.remove(),m(this,Ws,null),m(this,ci,null))}forceHide(){m(this,ho,this.isVisible),a(this,ho)&&(a(this,qt).hidden=!0)}maybeShow(){a(this,ho)&&(a(this,Ws)||A(this,Rt,Du).call(this),m(this,ho,!1),a(this,qt).hidden=!1)}get isVisible(){return a(this,qt).hidden===!1}}Va=new WeakMap,Ad=new WeakMap,wd=new WeakMap,Wa=new WeakMap,qa=new WeakMap,qt=new WeakMap,ai=new WeakMap,Xa=new WeakMap,ah=new WeakMap,lh=new WeakMap,Ya=new WeakMap,li=new WeakMap,Ws=new WeakMap,ci=new WeakMap,ch=new WeakMap,hi=new WeakMap,hh=new WeakMap,co=new WeakMap,ho=new WeakMap,Rt=new WeakSet,Mu=function(){const t=a(this,hi),e=a(this,ai);return t!=null&&t.str&&(!(e!=null&&e.str)||e.str===t.str)&&a(this,hi).html||null},yp=function(){var t,e,s;return((s=(e=(t=a(this,Rt,Mu))==null?void 0:t.attributes)==null?void 0:e.style)==null?void 0:s.fontSize)||0},a0=function(){var t,e,s;return((s=(e=(t=a(this,Rt,Mu))==null?void 0:t.attributes)==null?void 0:e.style)==null?void 0:s.color)||null},l0=function(t){const e=[],s={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:e}]}},n={style:{color:a(this,Rt,a0),fontSize:a(this,Rt,yp)?`calc(${a(this,Rt,yp)}px * var(--total-scale-factor))`:""}};for(const r of t.split(`
`))e.push({name:"span",value:r,attributes:n});return s},c0=function(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(t.key==="Enter"||t.key==="Escape"&&a(this,li))&&A(this,Rt,Lu).call(this)},h0=function(){if(a(this,ci)!==null)return;const{page:{view:t},viewport:{rawDims:{pageWidth:e,pageHeight:s,pageX:n,pageY:r}}}=a(this,lh);let o=!!a(this,Ya),l=o?a(this,Ya):a(this,ch);for(const y of a(this,ah))if(!l||Q.intersect(y.data.rect,l)!==null){l=y.data.rect,o=!0;break}const c=Q.normalizeRect([l[0],t[3]-l[1]+t[1],l[2],t[3]-l[3]+t[1]]),u=o?l[2]-l[0]+5:0,d=c[0]+u,f=c[1];m(this,ci,[100*(d-n)/e,100*(f-r)/s]);const{style:p}=a(this,qt);p.left=`${a(this,ci)[0]}%`,p.top=`${a(this,ci)[1]}%`},Lu=function(){m(this,li,!a(this,li)),a(this,li)?(A(this,Rt,Du).call(this),a(this,qt).addEventListener("click",a(this,Wa)),a(this,qt).addEventListener("keydown",a(this,Va))):(A(this,Rt,bp).call(this),a(this,qt).removeEventListener("click",a(this,Wa)),a(this,qt).removeEventListener("keydown",a(this,Va)))},Du=function(){a(this,Ws)||this.render(),this.isVisible?a(this,li)&&a(this,qt).classList.add("focused"):(A(this,Rt,h0).call(this),a(this,qt).hidden=!1,a(this,qt).style.zIndex=parseInt(a(this,qt).style.zIndex)+1e3)},bp=function(){a(this,qt).classList.remove("focused"),!(a(this,li)||!this.isVisible)&&(a(this,qt).hidden=!0,a(this,qt).style.zIndex=parseInt(a(this,qt).style.zIndex)-1e3)};class u0 extends Zt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=et.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const e of this.textContent){const s=document.createElement("span");s.textContent=e,t.append(s)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var uh;class Fx extends Zt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});b(this,uh,null)}render(){this.container.classList.add("lineAnnotation");const{data:e,width:s,height:n}=this,r=this.svgFactory.create(s,n,!0),o=m(this,uh,this.svgFactory.createElement("svg:line"));return o.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),o.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),o.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),o.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),o.setAttribute("stroke-width",e.borderStyle.width||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),r.append(o),this.container.append(r),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return a(this,uh)}addHighlightArea(){this.container.classList.add("highlightArea")}}uh=new WeakMap;var dh;class $x extends Zt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});b(this,dh,null)}render(){this.container.classList.add("squareAnnotation");const{data:e,width:s,height:n}=this,r=this.svgFactory.create(s,n,!0),o=e.borderStyle.width,l=m(this,dh,this.svgFactory.createElement("svg:rect"));return l.setAttribute("x",o/2),l.setAttribute("y",o/2),l.setAttribute("width",s-o),l.setAttribute("height",n-o),l.setAttribute("stroke-width",o||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),r.append(l),this.container.append(r),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return a(this,dh)}addHighlightArea(){this.container.classList.add("highlightArea")}}dh=new WeakMap;var fh;class Bx extends Zt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});b(this,fh,null)}render(){this.container.classList.add("circleAnnotation");const{data:e,width:s,height:n}=this,r=this.svgFactory.create(s,n,!0),o=e.borderStyle.width,l=m(this,fh,this.svgFactory.createElement("svg:ellipse"));return l.setAttribute("cx",s/2),l.setAttribute("cy",n/2),l.setAttribute("rx",s/2-o/2),l.setAttribute("ry",n/2-o/2),l.setAttribute("stroke-width",o||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),r.append(l),this.container.append(r),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return a(this,fh)}addHighlightArea(){this.container.classList.add("highlightArea")}}fh=new WeakMap;var ph;class d0 extends Zt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});b(this,ph,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,vertices:s,borderStyle:n,popupRef:r},width:o,height:l}=this;if(!s)return this.container;const c=this.svgFactory.create(o,l,!0);let h=[];for(let d=0,f=s.length;d<f;d+=2){const p=s[d]-e[0],y=e[3]-s[d+1];h.push(`${p},${y}`)}h=h.join(" ");const u=m(this,ph,this.svgFactory.createElement(this.svgElementName));return u.setAttribute("points",h),u.setAttribute("stroke-width",n.width||1),u.setAttribute("stroke","transparent"),u.setAttribute("fill","transparent"),c.append(u),this.container.append(c),!r&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return a(this,ph)}addHighlightArea(){this.container.classList.add("highlightArea")}}ph=new WeakMap;class jx extends d0{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class Hx extends Zt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var gh,uo,mh,vp;class Cg extends Zt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});b(this,mh);b(this,gh,null);b(this,uo,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?et.HIGHLIGHT:et.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,rotation:s,inkLists:n,borderStyle:r,popupRef:o}}=this,{transform:l,width:c,height:h}=A(this,mh,vp).call(this,s,e),u=this.svgFactory.create(c,h,!0),d=m(this,gh,this.svgFactory.createElement("svg:g"));u.append(d),d.setAttribute("stroke-width",r.width||1),d.setAttribute("stroke-linecap","round"),d.setAttribute("stroke-linejoin","round"),d.setAttribute("stroke-miterlimit",10),d.setAttribute("stroke","transparent"),d.setAttribute("fill","transparent"),d.setAttribute("transform",l);for(let f=0,p=n.length;f<p;f++){const y=this.svgFactory.createElement(this.svgElementName);a(this,uo).push(y),y.setAttribute("points",n[f].join(",")),d.append(y)}return!o&&this.hasPopupData&&this._createPopup(),this.container.append(u),this._editOnDoubleClick(),this.container}updateEdited(e){super.updateEdited(e);const{thickness:s,points:n,rect:r}=e,o=a(this,gh);if(s>=0&&o.setAttribute("stroke-width",s||1),n)for(let l=0,c=a(this,uo).length;l<c;l++)a(this,uo)[l].setAttribute("points",n[l].join(","));if(r){const{transform:l,width:c,height:h}=A(this,mh,vp).call(this,this.data.rotation,r);o.parentElement.setAttribute("viewBox",`0 0 ${c} ${h}`),o.setAttribute("transform",l)}}getElementsToTriggerPopup(){return a(this,uo)}addHighlightArea(){this.container.classList.add("highlightArea")}}gh=new WeakMap,uo=new WeakMap,mh=new WeakSet,vp=function(e,s){switch(e){case 90:return{transform:`rotate(90) translate(${-s[0]},${s[1]}) scale(1,-1)`,width:s[3]-s[1],height:s[2]-s[0]};case 180:return{transform:`rotate(180) translate(${-s[2]},${s[1]}) scale(1,-1)`,width:s[2]-s[0],height:s[3]-s[1]};case 270:return{transform:`rotate(270) translate(${-s[2]},${s[3]}) scale(1,-1)`,width:s[3]-s[1],height:s[2]-s[0]};default:return{transform:`translate(${-s[0]},${s[3]}) scale(1,-1)`,width:s[2]-s[0],height:s[3]-s[1]}}};class f0 extends Zt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=et.HIGHLIGHT}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),this.container}}class zx extends Zt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class Gx extends Zt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class Ux extends Zt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class p0 extends Zt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=et.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var yh,bh,Ap;class Vx extends Zt{constructor(e){var n;super(e,{isRenderable:!0});b(this,bh);b(this,yh,null);const{file:s}=this.data;this.filename=s.filename,this.content=s.content,(n=this.linkService.eventBus)==null||n.dispatch("fileattachmentannotation",{source:this,...s})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:e,data:s}=this;let n;s.hasAppearance||s.fillAlpha===0?n=document.createElement("div"):(n=document.createElement("img"),n.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(s.name)?"paperclip":"pushpin"}.svg`,s.fillAlpha&&s.fillAlpha<1&&(n.style=`filter: opacity(${Math.round(s.fillAlpha*100)}%);`)),n.addEventListener("dblclick",A(this,bh,Ap).bind(this)),m(this,yh,n);const{isMac:r}=ye.platform;return e.addEventListener("keydown",o=>{o.key==="Enter"&&(r?o.metaKey:o.ctrlKey)&&A(this,bh,Ap).call(this)}),!s.popupRef&&this.hasPopupData?this._createPopup():n.classList.add("popupTriggerArea"),e.append(n),e}getElementsToTriggerPopup(){return a(this,yh)}addHighlightArea(){this.container.classList.add("highlightArea")}}yh=new WeakMap,bh=new WeakSet,Ap=function(){var e;(e=this.downloadManager)==null||e.openOrDownloadData(this.content,this.filename)};var vh,fo,Ki,Ah,yr,wp,Sp,Ka;let Tg=(Ka=class{constructor({div:t,accessibilityManager:e,annotationCanvasMap:s,annotationEditorUIManager:n,page:r,viewport:o,structTreeLayer:l}){b(this,yr);b(this,vh,null);b(this,fo,null);b(this,Ki,new Map);b(this,Ah,null);this.div=t,m(this,vh,e),m(this,fo,s),m(this,Ah,l||null),this.page=r,this.viewport=o,this.zIndex=0,this._annotationEditorUIManager=n}hasEditableAnnotations(){return a(this,Ki).size>0}async render(t){var o;const{annotations:e}=t,s=this.div;fr(s,this.viewport);const n=new Map,r={data:null,layer:s,linkService:t.linkService,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new dc,annotationStorage:t.annotationStorage||new Ag,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const l of e){if(l.noHTML)continue;const c=l.annotationType===Yt.POPUP;if(c){const d=n.get(l.id);if(!d)continue;r.elements=d}else if(l.rect[2]===l.rect[0]||l.rect[3]===l.rect[1])continue;r.data=l;const h=Um.create(r);if(!h.isRenderable)continue;if(!c&&l.popupRef){const d=n.get(l.popupRef);d?d.push(h):n.set(l.popupRef,[h])}const u=h.render();l.hidden&&(u.style.visibility="hidden"),await A(this,yr,wp).call(this,u,l.id),h._isEditable&&(a(this,Ki).set(h.data.id,h),(o=this._annotationEditorUIManager)==null||o.renderAnnotationElement(h))}A(this,yr,Sp).call(this)}async addLinkAnnotations(t,e){const s={data:null,layer:this.div,linkService:e,svgFactory:new dc,parent:this};for(const n of t){n.borderStyle||(n.borderStyle=Ka._defaultBorderStyle),s.data=n;const r=Um.create(s);if(!r.isRenderable)continue;const o=r.render();await A(this,yr,wp).call(this,o,n.id)}}update({viewport:t}){const e=this.div;this.viewport=t,fr(e,{rotation:t.rotation}),A(this,yr,Sp).call(this),e.hidden=!1}getEditableAnnotations(){return Array.from(a(this,Ki).values())}getEditableAnnotation(t){return a(this,Ki).get(t)}static get _defaultBorderStyle(){return dt(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:Ko.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}},vh=new WeakMap,fo=new WeakMap,Ki=new WeakMap,Ah=new WeakMap,yr=new WeakSet,wp=async function(t,e){var o,l;const s=t.firstChild||t,n=s.id=`${bg}${e}`,r=await((o=a(this,Ah))==null?void 0:o.getAriaAttributes(n));if(r)for(const[c,h]of r)s.setAttribute(c,h);this.div.append(t),(l=a(this,vh))==null||l.moveElementInDOM(this.div,t,s,!1)},Sp=function(){var e;if(!a(this,fo))return;const t=this.div;for(const[s,n]of a(this,fo)){const r=t.querySelector(`[data-annotation-id="${s}"]`);if(!r)continue;n.className="annotationContent";const{firstChild:o}=r;o?o.nodeName==="CANVAS"?o.replaceWith(n):o.classList.contains("annotationContent")?o.after(n):o.before(n):r.append(n);const l=a(this,Ki).get(s);l&&(l._hasNoCanvas?((e=this._annotationEditorUIManager)==null||e.setMissingCanvas(s,r.id,n),l._hasNoCanvas=!1):l.canvas=n)}a(this,fo).clear()},Ka);const du=/\r\n?|\n/g;var qs,as,wh,po,ls,oe,g0,m0,y0,Ou,Ai,Nu,Fu,b0,xp,v0;const Dt=class Dt extends Nt{constructor(e){super({...e,name:"freeTextEditor"});b(this,oe);b(this,qs);b(this,as,"");b(this,wh,`${this.id}-editor`);b(this,po,null);b(this,ls);m(this,qs,e.color||Dt._defaultColor||Nt._defaultLineColor),m(this,ls,e.fontSize||Dt._defaultFontSize)}static get _keyboardManager(){const e=Dt.prototype,s=o=>o.isEmpty(),n=pr.TRANSLATE_SMALL,r=pr.TRANSLATE_BIG;return dt(this,"_keyboardManager",new Yh([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-n,0],checker:s}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-r,0],checker:s}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[n,0],checker:s}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[r,0],checker:s}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-n],checker:s}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-r],checker:s}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,n],checker:s}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,r],checker:s}]]))}static initialize(e,s){Nt.initialize(e,s);const n=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(n.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,s){switch(e){case ft.FREETEXT_SIZE:Dt._defaultFontSize=s;break;case ft.FREETEXT_COLOR:Dt._defaultColor=s;break}}updateParams(e,s){switch(e){case ft.FREETEXT_SIZE:A(this,oe,g0).call(this,s);break;case ft.FREETEXT_COLOR:A(this,oe,m0).call(this,s);break}}static get defaultPropertiesToUpdate(){return[[ft.FREETEXT_SIZE,Dt._defaultFontSize],[ft.FREETEXT_COLOR,Dt._defaultColor||Nt._defaultLineColor]]}get propertiesToUpdate(){return[[ft.FREETEXT_SIZE,a(this,ls)],[ft.FREETEXT_COLOR,a(this,qs)]]}_translateEmpty(e,s){this._uiManager.translateSelectedEditors(e,s,!0)}getInitialTranslation(){const e=this.parentScale;return[-Dt._internalPadding*e,-(Dt._internalPadding+a(this,ls))*e]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),m(this,po,new AbortController);const e=this._uiManager.combinedSignal(a(this,po));return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:e}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:e}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:e}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:e}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:e}),!0}disableEditMode(){var e;return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",a(this,wh)),this._isDraggable=!0,(e=a(this,po))==null||e.abort(),m(this,po,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(e){var s;this.width||(this.enableEditMode(),e&&this.editorDiv.focus(),(s=this._initialOptions)!=null&&s.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const e=a(this,as),s=m(this,as,A(this,oe,y0).call(this).trimEnd());if(e===s)return;const n=r=>{if(m(this,as,r),!r){this.remove();return}A(this,oe,Fu).call(this),this._uiManager.rebuild(this),A(this,oe,Ou).call(this)};this.addCommands({cmd:()=>{n(s)},undo:()=>{n(e)},mustExec:!1}),A(this,oe,Ou).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(e){e.target===this.div&&e.key==="Enter"&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(e){Dt._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let e,s;(this._isCopy||this.annotationElementId)&&(e=this.x,s=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",a(this,wh)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:n}=this.editorDiv;if(n.fontSize=`calc(${a(this,ls)}px * var(--total-scale-factor))`,n.color=a(this,qs),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[r,o]=this.parentDimensions;if(this.annotationElementId){const{position:l}=this._initialData;let[c,h]=this.getInitialTranslation();[c,h]=this.pageTranslationToScreen(c,h);const[u,d]=this.pageDimensions,[f,p]=this.pageTranslation;let y,g;switch(this.rotation){case 0:y=e+(l[0]-f)/u,g=s+this.height-(l[1]-p)/d;break;case 90:y=e+(l[0]-f)/u,g=s-(l[1]-p)/d,[c,h]=[h,-c];break;case 180:y=e-this.width+(l[0]-f)/u,g=s-(l[1]-p)/d,[c,h]=[-c,-h];break;case 270:y=e+(l[0]-f-this.height*d)/u,g=s+(l[1]-p-this.width*u)/d,[c,h]=[-h,c];break}this.setAt(y*r,g*o,c,h)}else this._moveAfterPaste(e,s);A(this,oe,Fu).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(e){var y,g,v;const s=e.clipboardData||window.clipboardData,{types:n}=s;if(n.length===1&&n[0]==="text/plain")return;e.preventDefault();const r=A(y=Dt,Ai,xp).call(y,s.getData("text")||"").replaceAll(du,`
`);if(!r)return;const o=window.getSelection();if(!o.rangeCount)return;this.editorDiv.normalize(),o.deleteFromDocument();const l=o.getRangeAt(0);if(!r.includes(`
`)){l.insertNode(document.createTextNode(r)),this.editorDiv.normalize(),o.collapseToStart();return}const{startContainer:c,startOffset:h}=l,u=[],d=[];if(c.nodeType===Node.TEXT_NODE){const w=c.parentElement;if(d.push(c.nodeValue.slice(h).replaceAll(du,"")),w!==this.editorDiv){let _=u;for(const C of this.editorDiv.childNodes){if(C===w){_=d;continue}_.push(A(g=Dt,Ai,Nu).call(g,C))}}u.push(c.nodeValue.slice(0,h).replaceAll(du,""))}else if(c===this.editorDiv){let w=u,_=0;for(const C of this.editorDiv.childNodes)_++===h&&(w=d),w.push(A(v=Dt,Ai,Nu).call(v,C))}m(this,as,`${u.join(`
`)}${r}${d.join(`
`)}`),A(this,oe,Fu).call(this);const f=new Range;let p=Math.sumPrecise(u.map(w=>w.length));for(const{firstChild:w}of this.editorDiv.childNodes)if(w.nodeType===Node.TEXT_NODE){const _=w.nodeValue.length;if(p<=_){f.setStart(w,p),f.setEnd(w,p);break}p-=_}o.removeAllRanges(),o.addRange(f)}get contentDiv(){return this.editorDiv}static async deserialize(e,s,n){var l;let r=null;if(e instanceof u0){const{data:{defaultAppearanceData:{fontSize:c,fontColor:h},rect:u,rotation:d,id:f,popupRef:p},textContent:y,textPosition:g,parent:{page:{pageNumber:v}}}=e;if(!y||y.length===0)return null;r=e={annotationType:et.FREETEXT,color:Array.from(h),fontSize:c,value:y.join(`
`),position:g,pageIndex:v-1,rect:u.slice(0),rotation:d,id:f,deleted:!1,popupRef:p}}const o=await super.deserialize(e,s,n);return m(o,ls,e.fontSize),m(o,qs,Q.makeHexColor(...e.color)),m(o,as,A(l=Dt,Ai,xp).call(l,e.value)),o.annotationElementId=e.id||null,o._initialData=r,o}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const s=Dt._internalPadding*this.parentScale,n=this.getRect(s,s),r=Nt._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:a(this,qs)),o={annotationType:et.FREETEXT,color:r,fontSize:a(this,ls),value:A(this,oe,b0).call(this),pageIndex:this.pageIndex,rect:n,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?(o.isCopy=!0,o):this.annotationElementId&&!A(this,oe,v0).call(this,o)?null:(o.id=this.annotationElementId,o)}renderAnnotationElement(e){const s=super.renderAnnotationElement(e);if(this.deleted)return s;const{style:n}=s;n.fontSize=`calc(${a(this,ls)}px * var(--total-scale-factor))`,n.color=a(this,qs),s.replaceChildren();for(const o of a(this,as).split(`
`)){const l=document.createElement("div");l.append(o?document.createTextNode(o):document.createElement("br")),s.append(l)}const r=Dt._internalPadding*this.parentScale;return e.updateEdited({rect:this.getRect(r,r),popupContent:a(this,as)}),s}resetAnnotationElement(e){super.resetAnnotationElement(e),e.resetEdited()}};qs=new WeakMap,as=new WeakMap,wh=new WeakMap,po=new WeakMap,ls=new WeakMap,oe=new WeakSet,g0=function(e){const s=r=>{this.editorDiv.style.fontSize=`calc(${r}px * var(--total-scale-factor))`,this.translate(0,-(r-a(this,ls))*this.parentScale),m(this,ls,r),A(this,oe,Ou).call(this)},n=a(this,ls);this.addCommands({cmd:s.bind(this,e),undo:s.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ft.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},m0=function(e){const s=r=>{m(this,qs,this.editorDiv.style.color=r)},n=a(this,qs);this.addCommands({cmd:s.bind(this,e),undo:s.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ft.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},y0=function(){var n;const e=[];this.editorDiv.normalize();let s=null;for(const r of this.editorDiv.childNodes)(s==null?void 0:s.nodeType)===Node.TEXT_NODE&&r.nodeName==="BR"||(e.push(A(n=Dt,Ai,Nu).call(n,r)),s=r);return e.join(`
`)},Ou=function(){const[e,s]=this.parentDimensions;let n;if(this.isAttachedToDOM)n=this.div.getBoundingClientRect();else{const{currentLayer:r,div:o}=this,l=o.style.display,c=o.classList.contains("hidden");o.classList.remove("hidden"),o.style.display="hidden",r.div.append(this.div),n=o.getBoundingClientRect(),o.remove(),o.style.display=l,o.classList.toggle("hidden",c)}this.rotation%180===this.parentRotation%180?(this.width=n.width/e,this.height=n.height/s):(this.width=n.height/e,this.height=n.width/s),this.fixAndSetPosition()},Ai=new WeakSet,Nu=function(e){return(e.nodeType===Node.TEXT_NODE?e.nodeValue:e.innerText).replaceAll(du,"")},Fu=function(){if(this.editorDiv.replaceChildren(),!!a(this,as))for(const e of a(this,as).split(`
`)){const s=document.createElement("div");s.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(s)}},b0=function(){return a(this,as).replaceAll(" "," ")},xp=function(e){return e.replaceAll(" "," ")},v0=function(e){const{value:s,fontSize:n,color:r,pageIndex:o}=this._initialData;return this._hasBeenMoved||e.value!==s||e.fontSize!==n||e.color.some((l,c)=>l!==r[c])||e.pageIndex!==o},b(Dt,Ai),$(Dt,"_freeTextDefaultContent",""),$(Dt,"_internalPadding",0),$(Dt,"_defaultColor",null),$(Dt,"_defaultFontSize",10),$(Dt,"_type","freetext"),$(Dt,"_editorType",et.FREETEXT);let Ep=Dt;class X{toSVGPath(){Pt("Abstract method `toSVGPath` must be implemented.")}get box(){Pt("Abstract getter `box` must be implemented.")}serialize(t,e){Pt("Abstract method `serialize` must be implemented.")}static _rescale(t,e,s,n,r,o){o||(o=new Float32Array(t.length));for(let l=0,c=t.length;l<c;l+=2)o[l]=e+t[l]*n,o[l+1]=s+t[l+1]*r;return o}static _rescaleAndSwap(t,e,s,n,r,o){o||(o=new Float32Array(t.length));for(let l=0,c=t.length;l<c;l+=2)o[l]=e+t[l+1]*n,o[l+1]=s+t[l]*r;return o}static _translate(t,e,s,n){n||(n=new Float32Array(t.length));for(let r=0,o=t.length;r<o;r+=2)n[r]=e+t[r],n[r+1]=s+t[r+1];return n}static svgRound(t){return Math.round(t*1e4)}static _normalizePoint(t,e,s,n,r){switch(r){case 90:return[1-e/s,t/n];case 180:return[1-t/s,1-e/n];case 270:return[e/s,1-t/n];default:return[t/s,e/n]}}static _normalizePagePoint(t,e,s){switch(s){case 90:return[1-e,t];case 180:return[1-t,1-e];case 270:return[e,1-t];default:return[t,e]}}static createBezierPoints(t,e,s,n,r,o){return[(t+5*s)/6,(e+5*n)/6,(5*s+r)/6,(5*n+o)/6,(s+r)/2,(n+o)/2]}}$(X,"PRECISION",1e-4);var cs,Xs,Qa,Ja,An,ht,go,mo,Sh,Eh,Za,tl,Qi,xh,Sd,Ed,he,Wl,A0,w0,S0,E0,x0,_0;const Gn=class Gn{constructor({x:t,y:e},s,n,r,o,l=0){b(this,he);b(this,cs);b(this,Xs,[]);b(this,Qa);b(this,Ja);b(this,An,[]);b(this,ht,new Float32Array(18));b(this,go);b(this,mo);b(this,Sh);b(this,Eh);b(this,Za);b(this,tl);b(this,Qi,[]);m(this,cs,s),m(this,tl,r*n),m(this,Ja,o),a(this,ht).set([NaN,NaN,NaN,NaN,t,e],6),m(this,Qa,l),m(this,Eh,a(Gn,xh)*n),m(this,Sh,a(Gn,Ed)*n),m(this,Za,n),a(this,Qi).push(t,e)}isEmpty(){return isNaN(a(this,ht)[8])}add({x:t,y:e}){var D;m(this,go,t),m(this,mo,e);const[s,n,r,o]=a(this,cs);let[l,c,h,u]=a(this,ht).subarray(8,12);const d=t-h,f=e-u,p=Math.hypot(d,f);if(p<a(this,Sh))return!1;const y=p-a(this,Eh),g=y/p,v=g*d,w=g*f;let _=l,C=c;l=h,c=u,h+=v,u+=w,(D=a(this,Qi))==null||D.push(t,e);const x=-w/y,E=v/y,T=x*a(this,tl),P=E*a(this,tl);return a(this,ht).set(a(this,ht).subarray(2,8),0),a(this,ht).set([h+T,u+P],4),a(this,ht).set(a(this,ht).subarray(14,18),12),a(this,ht).set([h-T,u-P],16),isNaN(a(this,ht)[6])?(a(this,An).length===0&&(a(this,ht).set([l+T,c+P],2),a(this,An).push(NaN,NaN,NaN,NaN,(l+T-s)/r,(c+P-n)/o),a(this,ht).set([l-T,c-P],14),a(this,Xs).push(NaN,NaN,NaN,NaN,(l-T-s)/r,(c-P-n)/o)),a(this,ht).set([_,C,l,c,h,u],6),!this.isEmpty()):(a(this,ht).set([_,C,l,c,h,u],6),Math.abs(Math.atan2(C-c,_-l)-Math.atan2(w,v))<Math.PI/2?([l,c,h,u]=a(this,ht).subarray(2,6),a(this,An).push(NaN,NaN,NaN,NaN,((l+h)/2-s)/r,((c+u)/2-n)/o),[l,c,_,C]=a(this,ht).subarray(14,18),a(this,Xs).push(NaN,NaN,NaN,NaN,((_+l)/2-s)/r,((C+c)/2-n)/o),!0):([_,C,l,c,h,u]=a(this,ht).subarray(0,6),a(this,An).push(((_+5*l)/6-s)/r,((C+5*c)/6-n)/o,((5*l+h)/6-s)/r,((5*c+u)/6-n)/o,((l+h)/2-s)/r,((c+u)/2-n)/o),[h,u,l,c,_,C]=a(this,ht).subarray(12,18),a(this,Xs).push(((_+5*l)/6-s)/r,((C+5*c)/6-n)/o,((5*l+h)/6-s)/r,((5*c+u)/6-n)/o,((l+h)/2-s)/r,((c+u)/2-n)/o),!0))}toSVGPath(){if(this.isEmpty())return"";const t=a(this,An),e=a(this,Xs);if(isNaN(a(this,ht)[6])&&!this.isEmpty())return A(this,he,A0).call(this);const s=[];s.push(`M${t[4]} ${t[5]}`);for(let n=6;n<t.length;n+=6)isNaN(t[n])?s.push(`L${t[n+4]} ${t[n+5]}`):s.push(`C${t[n]} ${t[n+1]} ${t[n+2]} ${t[n+3]} ${t[n+4]} ${t[n+5]}`);A(this,he,S0).call(this,s);for(let n=e.length-6;n>=6;n-=6)isNaN(e[n])?s.push(`L${e[n+4]} ${e[n+5]}`):s.push(`C${e[n]} ${e[n+1]} ${e[n+2]} ${e[n+3]} ${e[n+4]} ${e[n+5]}`);return A(this,he,w0).call(this,s),s.join(" ")}newFreeDrawOutline(t,e,s,n,r,o){return new C0(t,e,s,n,r,o)}getOutlines(){var d;const t=a(this,An),e=a(this,Xs),s=a(this,ht),[n,r,o,l]=a(this,cs),c=new Float32Array((((d=a(this,Qi))==null?void 0:d.length)??0)+2);for(let f=0,p=c.length-2;f<p;f+=2)c[f]=(a(this,Qi)[f]-n)/o,c[f+1]=(a(this,Qi)[f+1]-r)/l;if(c[c.length-2]=(a(this,go)-n)/o,c[c.length-1]=(a(this,mo)-r)/l,isNaN(s[6])&&!this.isEmpty())return A(this,he,E0).call(this,c);const h=new Float32Array(a(this,An).length+24+a(this,Xs).length);let u=t.length;for(let f=0;f<u;f+=2){if(isNaN(t[f])){h[f]=h[f+1]=NaN;continue}h[f]=t[f],h[f+1]=t[f+1]}u=A(this,he,_0).call(this,h,u);for(let f=e.length-6;f>=6;f-=6)for(let p=0;p<6;p+=2){if(isNaN(e[f+p])){h[u]=h[u+1]=NaN,u+=2;continue}h[u]=e[f+p],h[u+1]=e[f+p+1],u+=2}return A(this,he,x0).call(this,h,u),this.newFreeDrawOutline(h,c,a(this,cs),a(this,Za),a(this,Qa),a(this,Ja))}};cs=new WeakMap,Xs=new WeakMap,Qa=new WeakMap,Ja=new WeakMap,An=new WeakMap,ht=new WeakMap,go=new WeakMap,mo=new WeakMap,Sh=new WeakMap,Eh=new WeakMap,Za=new WeakMap,tl=new WeakMap,Qi=new WeakMap,xh=new WeakMap,Sd=new WeakMap,Ed=new WeakMap,he=new WeakSet,Wl=function(){const t=a(this,ht).subarray(4,6),e=a(this,ht).subarray(16,18),[s,n,r,o]=a(this,cs);return[(a(this,go)+(t[0]-e[0])/2-s)/r,(a(this,mo)+(t[1]-e[1])/2-n)/o,(a(this,go)+(e[0]-t[0])/2-s)/r,(a(this,mo)+(e[1]-t[1])/2-n)/o]},A0=function(){const[t,e,s,n]=a(this,cs),[r,o,l,c]=A(this,he,Wl).call(this);return`M${(a(this,ht)[2]-t)/s} ${(a(this,ht)[3]-e)/n} L${(a(this,ht)[4]-t)/s} ${(a(this,ht)[5]-e)/n} L${r} ${o} L${l} ${c} L${(a(this,ht)[16]-t)/s} ${(a(this,ht)[17]-e)/n} L${(a(this,ht)[14]-t)/s} ${(a(this,ht)[15]-e)/n} Z`},w0=function(t){const e=a(this,Xs);t.push(`L${e[4]} ${e[5]} Z`)},S0=function(t){const[e,s,n,r]=a(this,cs),o=a(this,ht).subarray(4,6),l=a(this,ht).subarray(16,18),[c,h,u,d]=A(this,he,Wl).call(this);t.push(`L${(o[0]-e)/n} ${(o[1]-s)/r} L${c} ${h} L${u} ${d} L${(l[0]-e)/n} ${(l[1]-s)/r}`)},E0=function(t){const e=a(this,ht),[s,n,r,o]=a(this,cs),[l,c,h,u]=A(this,he,Wl).call(this),d=new Float32Array(36);return d.set([NaN,NaN,NaN,NaN,(e[2]-s)/r,(e[3]-n)/o,NaN,NaN,NaN,NaN,(e[4]-s)/r,(e[5]-n)/o,NaN,NaN,NaN,NaN,l,c,NaN,NaN,NaN,NaN,h,u,NaN,NaN,NaN,NaN,(e[16]-s)/r,(e[17]-n)/o,NaN,NaN,NaN,NaN,(e[14]-s)/r,(e[15]-n)/o],0),this.newFreeDrawOutline(d,t,a(this,cs),a(this,Za),a(this,Qa),a(this,Ja))},x0=function(t,e){const s=a(this,Xs);return t.set([NaN,NaN,NaN,NaN,s[4],s[5]],e),e+=6},_0=function(t,e){const s=a(this,ht).subarray(4,6),n=a(this,ht).subarray(16,18),[r,o,l,c]=a(this,cs),[h,u,d,f]=A(this,he,Wl).call(this);return t.set([NaN,NaN,NaN,NaN,(s[0]-r)/l,(s[1]-o)/c,NaN,NaN,NaN,NaN,h,u,NaN,NaN,NaN,NaN,d,f,NaN,NaN,NaN,NaN,(n[0]-r)/l,(n[1]-o)/c],e),e+=24},b(Gn,xh,8),b(Gn,Sd,2),b(Gn,Ed,a(Gn,xh)+a(Gn,Sd));let nd=Gn;var el,yo,ui,_h,hs,Ch,Qt,xd,T0;class C0 extends X{constructor(e,s,n,r,o,l){super();b(this,xd);b(this,el);b(this,yo,new Float32Array(4));b(this,ui);b(this,_h);b(this,hs);b(this,Ch);b(this,Qt);m(this,Qt,e),m(this,hs,s),m(this,el,n),m(this,Ch,r),m(this,ui,o),m(this,_h,l),this.lastPoint=[NaN,NaN],A(this,xd,T0).call(this,l);const[c,h,u,d]=a(this,yo);for(let f=0,p=e.length;f<p;f+=2)e[f]=(e[f]-c)/u,e[f+1]=(e[f+1]-h)/d;for(let f=0,p=s.length;f<p;f+=2)s[f]=(s[f]-c)/u,s[f+1]=(s[f+1]-h)/d}toSVGPath(){const e=[`M${a(this,Qt)[4]} ${a(this,Qt)[5]}`];for(let s=6,n=a(this,Qt).length;s<n;s+=6){if(isNaN(a(this,Qt)[s])){e.push(`L${a(this,Qt)[s+4]} ${a(this,Qt)[s+5]}`);continue}e.push(`C${a(this,Qt)[s]} ${a(this,Qt)[s+1]} ${a(this,Qt)[s+2]} ${a(this,Qt)[s+3]} ${a(this,Qt)[s+4]} ${a(this,Qt)[s+5]}`)}return e.push("Z"),e.join(" ")}serialize([e,s,n,r],o){const l=n-e,c=r-s;let h,u;switch(o){case 0:h=X._rescale(a(this,Qt),e,r,l,-c),u=X._rescale(a(this,hs),e,r,l,-c);break;case 90:h=X._rescaleAndSwap(a(this,Qt),e,s,l,c),u=X._rescaleAndSwap(a(this,hs),e,s,l,c);break;case 180:h=X._rescale(a(this,Qt),n,s,-l,c),u=X._rescale(a(this,hs),n,s,-l,c);break;case 270:h=X._rescaleAndSwap(a(this,Qt),n,r,-l,-c),u=X._rescaleAndSwap(a(this,hs),n,r,-l,-c);break}return{outline:Array.from(h),points:[Array.from(u)]}}get box(){return a(this,yo)}newOutliner(e,s,n,r,o,l=0){return new nd(e,s,n,r,o,l)}getNewOutline(e,s){const[n,r,o,l]=a(this,yo),[c,h,u,d]=a(this,el),f=o*u,p=l*d,y=n*u+c,g=r*d+h,v=this.newOutliner({x:a(this,hs)[0]*f+y,y:a(this,hs)[1]*p+g},a(this,el),a(this,Ch),e,a(this,_h),s??a(this,ui));for(let w=2;w<a(this,hs).length;w+=2)v.add({x:a(this,hs)[w]*f+y,y:a(this,hs)[w+1]*p+g});return v.getOutlines()}}el=new WeakMap,yo=new WeakMap,ui=new WeakMap,_h=new WeakMap,hs=new WeakMap,Ch=new WeakMap,Qt=new WeakMap,xd=new WeakSet,T0=function(e){const s=a(this,Qt);let n=s[4],r=s[5];const o=[n,r,n,r];let l=n,c=r;const h=e?Math.max:Math.min;for(let d=6,f=s.length;d<f;d+=6){const p=s[d+4],y=s[d+5];if(isNaN(s[d]))Q.pointBoundingBox(p,y,o),c<y?(l=p,c=y):c===y&&(l=h(l,p));else{const g=[1/0,1/0,-1/0,-1/0];Q.bezierBoundingBox(n,r,...s.slice(d,d+6),g),Q.rectBoundingBox(...g,o),c<g[3]?(l=g[2],c=g[3]):c===g[3]&&(l=h(l,g[2]))}n=p,r=y}const u=a(this,yo);u[0]=o[0]-a(this,ui),u[1]=o[1]-a(this,ui),u[2]=o[2]-o[0]+2*a(this,ui),u[3]=o[3]-o[1]+2*a(this,ui),this.lastPoint=[l,c]};var Th,Ph,Ji,Ys,We,P0,$u,R0,k0,Cp;class _p{constructor(t,e=0,s=0,n=!0){b(this,We);b(this,Th);b(this,Ph);b(this,Ji,[]);b(this,Ys,[]);const r=[1/0,1/0,-1/0,-1/0],o=10**-4;for(const{x:p,y,width:g,height:v}of t){const w=Math.floor((p-e)/o)*o,_=Math.ceil((p+g+e)/o)*o,C=Math.floor((y-e)/o)*o,x=Math.ceil((y+v+e)/o)*o,E=[w,C,x,!0],T=[_,C,x,!1];a(this,Ji).push(E,T),Q.rectBoundingBox(w,C,_,x,r)}const l=r[2]-r[0]+2*s,c=r[3]-r[1]+2*s,h=r[0]-s,u=r[1]-s,d=a(this,Ji).at(n?-1:-2),f=[d[0],d[2]];for(const p of a(this,Ji)){const[y,g,v]=p;p[0]=(y-h)/l,p[1]=(g-u)/c,p[2]=(v-u)/c}m(this,Th,new Float32Array([h,u,l,c])),m(this,Ph,f)}getOutlines(){a(this,Ji).sort((e,s)=>e[0]-s[0]||e[1]-s[1]||e[2]-s[2]);const t=[];for(const e of a(this,Ji))e[3]?(t.push(...A(this,We,Cp).call(this,e)),A(this,We,R0).call(this,e)):(A(this,We,k0).call(this,e),t.push(...A(this,We,Cp).call(this,e)));return A(this,We,P0).call(this,t)}}Th=new WeakMap,Ph=new WeakMap,Ji=new WeakMap,Ys=new WeakMap,We=new WeakSet,P0=function(t){const e=[],s=new Set;for(const o of t){const[l,c,h]=o;e.push([l,c,o],[l,h,o])}e.sort((o,l)=>o[1]-l[1]||o[0]-l[0]);for(let o=0,l=e.length;o<l;o+=2){const c=e[o][2],h=e[o+1][2];c.push(h),h.push(c),s.add(c),s.add(h)}const n=[];let r;for(;s.size>0;){const o=s.values().next().value;let[l,c,h,u,d]=o;s.delete(o);let f=l,p=c;for(r=[l,h],n.push(r);;){let y;if(s.has(u))y=u;else if(s.has(d))y=d;else break;s.delete(y),[l,c,h,u,d]=y,f!==l&&(r.push(f,p,l,p===c?c:h),f=l),p=p===c?h:c}r.push(f,p)}return new Wx(n,a(this,Th),a(this,Ph))},$u=function(t){const e=a(this,Ys);let s=0,n=e.length-1;for(;s<=n;){const r=s+n>>1,o=e[r][0];if(o===t)return r;o<t?s=r+1:n=r-1}return n+1},R0=function([,t,e]){const s=A(this,We,$u).call(this,t);a(this,Ys).splice(s,0,[t,e])},k0=function([,t,e]){const s=A(this,We,$u).call(this,t);for(let n=s;n<a(this,Ys).length;n++){const[r,o]=a(this,Ys)[n];if(r!==t)break;if(r===t&&o===e){a(this,Ys).splice(n,1);return}}for(let n=s-1;n>=0;n--){const[r,o]=a(this,Ys)[n];if(r!==t)break;if(r===t&&o===e){a(this,Ys).splice(n,1);return}}},Cp=function(t){const[e,s,n]=t,r=[[e,s,n]],o=A(this,We,$u).call(this,n);for(let l=0;l<o;l++){const[c,h]=a(this,Ys)[l];for(let u=0,d=r.length;u<d;u++){const[,f,p]=r[u];if(!(h<=f||p<=c)){if(f>=c){if(p>h)r[u][1]=h;else{if(d===1)return[];r.splice(u,1),u--,d--}continue}r[u][2]=c,p>h&&r.push([e,h,p])}}}return r};var Rh,sl;class Wx extends X{constructor(e,s,n){super();b(this,Rh);b(this,sl);m(this,sl,e),m(this,Rh,s),this.lastPoint=n}toSVGPath(){const e=[];for(const s of a(this,sl)){let[n,r]=s;e.push(`M${n} ${r}`);for(let o=2;o<s.length;o+=2){const l=s[o],c=s[o+1];l===n?(e.push(`V${c}`),r=c):c===r&&(e.push(`H${l}`),n=l)}e.push("Z")}return e.join(" ")}serialize([e,s,n,r],o){const l=[],c=n-e,h=r-s;for(const u of a(this,sl)){const d=new Array(u.length);for(let f=0;f<u.length;f+=2)d[f]=e+u[f]*c,d[f+1]=r-u[f+1]*h;l.push(d)}return l}get box(){return a(this,Rh)}get classNamesForOutlining(){return["highlightOutline"]}}Rh=new WeakMap,sl=new WeakMap;class Tp extends nd{newFreeDrawOutline(t,e,s,n,r,o){return new qx(t,e,s,n,r,o)}}class qx extends C0{newOutliner(t,e,s,n,r,o=0){return new Tp(t,e,s,n,r,o)}}var Ks,bo,nl,ce,kh,il,Ih,Mh,Zi,Qs,rl,Lh,Tt,Pp,Rp,kp,Er,I0,Ti;const Ye=class Ye{constructor({editor:t=null,uiManager:e=null}){b(this,Tt);b(this,Ks,null);b(this,bo,null);b(this,nl);b(this,ce,null);b(this,kh,!1);b(this,il,!1);b(this,Ih,null);b(this,Mh);b(this,Zi,null);b(this,Qs,null);b(this,rl);var s;t?(m(this,il,!1),m(this,rl,ft.HIGHLIGHT_COLOR),m(this,Ih,t)):(m(this,il,!0),m(this,rl,ft.HIGHLIGHT_DEFAULT_COLOR)),m(this,Qs,(t==null?void 0:t._uiManager)||e),m(this,Mh,a(this,Qs)._eventBus),m(this,nl,(t==null?void 0:t.color)||((s=a(this,Qs))==null?void 0:s.highlightColors.values().next().value)||"#FFFF98"),a(Ye,Lh)||m(Ye,Lh,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return dt(this,"_keyboardManager",new Yh([[["Escape","mac+Escape"],Ye.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],Ye.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],Ye.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],Ye.prototype._moveToPrevious],[["Home","mac+Home"],Ye.prototype._moveToBeginning],[["End","mac+End"],Ye.prototype._moveToEnd]]))}renderButton(){const t=m(this,Ks,document.createElement("button"));t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.setAttribute("aria-haspopup",!0);const e=a(this,Qs)._signal;t.addEventListener("click",A(this,Tt,Er).bind(this),{signal:e}),t.addEventListener("keydown",A(this,Tt,kp).bind(this),{signal:e});const s=m(this,bo,document.createElement("span"));return s.className="swatch",s.setAttribute("aria-hidden",!0),s.style.backgroundColor=a(this,nl),t.append(s),t}renderMainDropdown(){const t=m(this,ce,A(this,Tt,Pp).call(this));return t.setAttribute("aria-orientation","horizontal"),t.setAttribute("aria-labelledby","highlightColorPickerLabel"),t}_colorSelectFromKeyboard(t){if(t.target===a(this,Ks)){A(this,Tt,Er).call(this,t);return}const e=t.target.getAttribute("data-color");e&&A(this,Tt,Rp).call(this,e,t)}_moveToNext(t){var e,s;if(!a(this,Tt,Ti)){A(this,Tt,Er).call(this,t);return}if(t.target===a(this,Ks)){(e=a(this,ce).firstChild)==null||e.focus();return}(s=t.target.nextSibling)==null||s.focus()}_moveToPrevious(t){var e,s;if(t.target===((e=a(this,ce))==null?void 0:e.firstChild)||t.target===a(this,Ks)){a(this,Tt,Ti)&&this._hideDropdownFromKeyboard();return}a(this,Tt,Ti)||A(this,Tt,Er).call(this,t),(s=t.target.previousSibling)==null||s.focus()}_moveToBeginning(t){var e;if(!a(this,Tt,Ti)){A(this,Tt,Er).call(this,t);return}(e=a(this,ce).firstChild)==null||e.focus()}_moveToEnd(t){var e;if(!a(this,Tt,Ti)){A(this,Tt,Er).call(this,t);return}(e=a(this,ce).lastChild)==null||e.focus()}hideDropdown(){var t,e;(t=a(this,ce))==null||t.classList.add("hidden"),(e=a(this,Zi))==null||e.abort(),m(this,Zi,null)}_hideDropdownFromKeyboard(){var t;if(!a(this,il)){if(!a(this,Tt,Ti)){(t=a(this,Ih))==null||t.unselect();return}this.hideDropdown(),a(this,Ks).focus({preventScroll:!0,focusVisible:a(this,kh)})}}updateColor(t){if(a(this,bo)&&(a(this,bo).style.backgroundColor=t),!a(this,ce))return;const e=a(this,Qs).highlightColors.values();for(const s of a(this,ce).children)s.setAttribute("aria-selected",e.next().value===t)}destroy(){var t,e;(t=a(this,Ks))==null||t.remove(),m(this,Ks,null),m(this,bo,null),(e=a(this,ce))==null||e.remove(),m(this,ce,null)}};Ks=new WeakMap,bo=new WeakMap,nl=new WeakMap,ce=new WeakMap,kh=new WeakMap,il=new WeakMap,Ih=new WeakMap,Mh=new WeakMap,Zi=new WeakMap,Qs=new WeakMap,rl=new WeakMap,Lh=new WeakMap,Tt=new WeakSet,Pp=function(){const t=document.createElement("div"),e=a(this,Qs)._signal;t.addEventListener("contextmenu",Fs,{signal:e}),t.className="dropdown",t.role="listbox",t.setAttribute("aria-multiselectable",!1),t.setAttribute("aria-orientation","vertical"),t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[s,n]of a(this,Qs).highlightColors){const r=document.createElement("button");r.tabIndex="0",r.role="option",r.setAttribute("data-color",n),r.title=s,r.setAttribute("data-l10n-id",a(Ye,Lh)[s]);const o=document.createElement("span");r.append(o),o.className="swatch",o.style.backgroundColor=n,r.setAttribute("aria-selected",n===a(this,nl)),r.addEventListener("click",A(this,Tt,Rp).bind(this,n),{signal:e}),t.append(r)}return t.addEventListener("keydown",A(this,Tt,kp).bind(this),{signal:e}),t},Rp=function(t,e){e.stopPropagation(),a(this,Mh).dispatch("switchannotationeditorparams",{source:this,type:a(this,rl),value:t})},kp=function(t){Ye._keyboardManager.exec(this,t)},Er=function(t){if(a(this,Tt,Ti)){this.hideDropdown();return}if(m(this,kh,t.detail===0),a(this,Zi)||(m(this,Zi,new AbortController),window.addEventListener("pointerdown",A(this,Tt,I0).bind(this),{signal:a(this,Qs).combinedSignal(a(this,Zi))})),a(this,ce)){a(this,ce).classList.remove("hidden");return}const e=m(this,ce,A(this,Tt,Pp).call(this));a(this,Ks).append(e)},I0=function(t){var e;(e=a(this,ce))!=null&&e.contains(t.target)||this.hideDropdown()},Ti=function(){return a(this,ce)&&!a(this,ce).classList.contains("hidden")},b(Ye,Lh,null);let fc=Ye;var ol,Dh,di,vo,al,Je,Oh,Nh,Ao,Ps,us,Se,ll,fi,Le,cl,Rs,Fh,nt,Ip,Bu,M0,L0,D0,Mp,xr,Os,ea,O0,ju,ql,N0,F0,$0,B0,j0;const vt=class vt extends Nt{constructor(e){super({...e,name:"highlightEditor"});b(this,nt);b(this,ol,null);b(this,Dh,0);b(this,di);b(this,vo,null);b(this,al,null);b(this,Je,null);b(this,Oh,null);b(this,Nh,0);b(this,Ao,null);b(this,Ps,null);b(this,us,null);b(this,Se,!1);b(this,ll,null);b(this,fi);b(this,Le,null);b(this,cl,"");b(this,Rs);b(this,Fh,"");this.color=e.color||vt._defaultColor,m(this,Rs,e.thickness||vt._defaultThickness),m(this,fi,e.opacity||vt._defaultOpacity),m(this,di,e.boxes||null),m(this,Fh,e.methodOfCreation||""),m(this,cl,e.text||""),this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",e.highlightId>-1?(m(this,Se,!0),A(this,nt,Bu).call(this,e),A(this,nt,xr).call(this)):a(this,di)&&(m(this,ol,e.anchorNode),m(this,Dh,e.anchorOffset),m(this,Oh,e.focusNode),m(this,Nh,e.focusOffset),A(this,nt,Ip).call(this),A(this,nt,xr).call(this),this.rotate(this.rotation))}static get _keyboardManager(){const e=vt.prototype;return dt(this,"_keyboardManager",new Yh([[["ArrowLeft","mac+ArrowLeft"],e._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],e._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],e._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],e._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:a(this,Se)?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:a(this,Rs),methodOfCreation:a(this,Fh)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(e){return{numberOfColors:e.get("color").size}}static initialize(e,s){var n;Nt.initialize(e,s),vt._defaultColor||(vt._defaultColor=((n=s.highlightColors)==null?void 0:n.values().next().value)||"#fff066")}static updateDefaultParams(e,s){switch(e){case ft.HIGHLIGHT_DEFAULT_COLOR:vt._defaultColor=s;break;case ft.HIGHLIGHT_THICKNESS:vt._defaultThickness=s;break}}translateInPage(e,s){}get toolbarPosition(){return a(this,ll)}updateParams(e,s){switch(e){case ft.HIGHLIGHT_COLOR:A(this,nt,M0).call(this,s);break;case ft.HIGHLIGHT_THICKNESS:A(this,nt,L0).call(this,s);break}}static get defaultPropertiesToUpdate(){return[[ft.HIGHLIGHT_DEFAULT_COLOR,vt._defaultColor],[ft.HIGHLIGHT_THICKNESS,vt._defaultThickness]]}get propertiesToUpdate(){return[[ft.HIGHLIGHT_COLOR,this.color||vt._defaultColor],[ft.HIGHLIGHT_THICKNESS,a(this,Rs)||vt._defaultThickness],[ft.HIGHLIGHT_FREE,a(this,Se)]]}async addEditToolbar(){const e=await super.addEditToolbar();return e?(this._uiManager.highlightColors&&(m(this,al,new fc({editor:this})),e.addColorPicker(a(this,al))),e):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(A(this,nt,ql).call(this))}getBaseTranslation(){return[0,0]}getRect(e,s){return super.getRect(e,s,A(this,nt,ql).call(this))}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),e&&this.div.focus()}remove(){A(this,nt,Mp).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(A(this,nt,xr).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){var n;let s=!1;this.parent&&!e?A(this,nt,Mp).call(this):e&&(A(this,nt,xr).call(this,e),s=!this.parent&&((n=this.div)==null?void 0:n.classList.contains("selectedEditor"))),super.setParent(e),this.show(this._isVisible),s&&this.select()}rotate(e){var r,o,l;const{drawLayer:s}=this.parent;let n;a(this,Se)?(e=(e-this.rotation+360)%360,n=A(r=vt,Os,ea).call(r,a(this,Ps).box,e)):n=A(o=vt,Os,ea).call(o,[this.x,this.y,this.width,this.height],e),s.updateProperties(a(this,us),{bbox:n,root:{"data-main-rotation":e}}),s.updateProperties(a(this,Le),{bbox:A(l=vt,Os,ea).call(l,a(this,Je).box,e),root:{"data-main-rotation":e}})}render(){if(this.div)return this.div;const e=super.render();a(this,cl)&&(e.setAttribute("aria-label",a(this,cl)),e.setAttribute("role","mark")),a(this,Se)?e.classList.add("free"):this.div.addEventListener("keydown",A(this,nt,O0).bind(this),{signal:this._uiManager._signal});const s=m(this,Ao,document.createElement("div"));e.append(s),s.setAttribute("aria-hidden","true"),s.className="internal",s.style.clipPath=a(this,vo);const[n,r]=this.parentDimensions;return this.setDims(this.width*n,this.height*r),rb(this,a(this,Ao),["pointerover","pointerleave"]),this.enableEditing(),e}pointerover(){var e;this.isSelected||(e=this.parent)==null||e.drawLayer.updateProperties(a(this,Le),{rootClass:{hovered:!0}})}pointerleave(){var e;this.isSelected||(e=this.parent)==null||e.drawLayer.updateProperties(a(this,Le),{rootClass:{hovered:!1}})}_moveCaret(e){switch(this.parent.unselect(this),e){case 0:case 2:A(this,nt,ju).call(this,!0);break;case 1:case 3:A(this,nt,ju).call(this,!1);break}}select(){var e;super.select(),a(this,Le)&&((e=this.parent)==null||e.drawLayer.updateProperties(a(this,Le),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var e;super.unselect(),a(this,Le)&&((e=this.parent)==null||e.drawLayer.updateProperties(a(this,Le),{rootClass:{selected:!1}}),a(this,Se)||A(this,nt,ju).call(this,!1))}get _mustFixPosition(){return!a(this,Se)}show(e=this._isVisible){super.show(e),this.parent&&(this.parent.drawLayer.updateProperties(a(this,us),{rootClass:{hidden:!e}}),this.parent.drawLayer.updateProperties(a(this,Le),{rootClass:{hidden:!e}}))}static startHighlighting(e,s,{target:n,x:r,y:o}){const{x:l,y:c,width:h,height:u}=n.getBoundingClientRect(),d=new AbortController,f=e.combinedSignal(d),p=y=>{d.abort(),A(this,Os,B0).call(this,e,y)};window.addEventListener("blur",p,{signal:f}),window.addEventListener("pointerup",p,{signal:f}),window.addEventListener("pointerdown",Jt,{capture:!0,passive:!1,signal:f}),window.addEventListener("contextmenu",Fs,{signal:f}),n.addEventListener("pointermove",A(this,Os,$0).bind(this,e),{signal:f}),this._freeHighlight=new Tp({x:r,y:o},[l,c,h,u],e.scale,this._defaultThickness/2,s,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static async deserialize(e,s,n){var g,v,w,_;let r=null;if(e instanceof f0){const{data:{quadPoints:C,rect:x,rotation:E,id:T,color:P,opacity:M,popupRef:D},parent:{page:{pageNumber:S}}}=e;r=e={annotationType:et.HIGHLIGHT,color:Array.from(P),opacity:M,quadPoints:C,boxes:null,pageIndex:S-1,rect:x.slice(0),rotation:E,id:T,deleted:!1,popupRef:D}}else if(e instanceof Cg){const{data:{inkLists:C,rect:x,rotation:E,id:T,color:P,borderStyle:{rawWidth:M},popupRef:D},parent:{page:{pageNumber:S}}}=e;r=e={annotationType:et.HIGHLIGHT,color:Array.from(P),thickness:M,inkLists:C,boxes:null,pageIndex:S-1,rect:x.slice(0),rotation:E,id:T,deleted:!1,popupRef:D}}const{color:o,quadPoints:l,inkLists:c,opacity:h}=e,u=await super.deserialize(e,s,n);u.color=Q.makeHexColor(...o),m(u,fi,h||1),c&&m(u,Rs,e.thickness),u.annotationElementId=e.id||null,u._initialData=r;const[d,f]=u.pageDimensions,[p,y]=u.pageTranslation;if(l){const C=m(u,di,[]);for(let x=0;x<l.length;x+=8)C.push({x:(l[x]-p)/d,y:1-(l[x+1]-y)/f,width:(l[x+2]-l[x])/d,height:(l[x+1]-l[x+5])/f});A(g=u,nt,Ip).call(g),A(v=u,nt,xr).call(v),u.rotate(u.rotation)}else if(c){m(u,Se,!0);const C=c[0],x={x:C[0]-p,y:f-(C[1]-y)},E=new Tp(x,[0,0,d,f],1,a(u,Rs)/2,!0,.001);for(let M=0,D=C.length;M<D;M+=2)x.x=C[M]-p,x.y=f-(C[M+1]-y),E.add(x);const{id:T,clipPathId:P}=s.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:u.color,"fill-opacity":u._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:E.toSVGPath()}},!0,!0);A(w=u,nt,Bu).call(w,{highlightOutlines:E.getOutlines(),highlightId:T,clipPathId:P}),A(_=u,nt,xr).call(_),u.rotate(u.parentRotation)}return u}serialize(e=!1){if(this.isEmpty()||e)return null;if(this.deleted)return this.serializeDeleted();const s=this.getRect(0,0),n=Nt._colorManager.convert(this.color),r={annotationType:et.HIGHLIGHT,color:n,opacity:a(this,fi),thickness:a(this,Rs),quadPoints:A(this,nt,N0).call(this),outlines:A(this,nt,F0).call(this,s),pageIndex:this.pageIndex,rect:s,rotation:A(this,nt,ql).call(this),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!A(this,nt,j0).call(this,r)?null:(r.id=this.annotationElementId,r)}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};ol=new WeakMap,Dh=new WeakMap,di=new WeakMap,vo=new WeakMap,al=new WeakMap,Je=new WeakMap,Oh=new WeakMap,Nh=new WeakMap,Ao=new WeakMap,Ps=new WeakMap,us=new WeakMap,Se=new WeakMap,ll=new WeakMap,fi=new WeakMap,Le=new WeakMap,cl=new WeakMap,Rs=new WeakMap,Fh=new WeakMap,nt=new WeakSet,Ip=function(){const e=new _p(a(this,di),.001);m(this,Ps,e.getOutlines()),[this.x,this.y,this.width,this.height]=a(this,Ps).box;const s=new _p(a(this,di),.0025,.001,this._uiManager.direction==="ltr");m(this,Je,s.getOutlines());const{lastPoint:n}=a(this,Je);m(this,ll,[(n[0]-this.x)/this.width,(n[1]-this.y)/this.height])},Bu=function({highlightOutlines:e,highlightId:s,clipPathId:n}){var d,f;if(m(this,Ps,e),m(this,Je,e.getNewOutline(a(this,Rs)/2+1.5,.0025)),s>=0)m(this,us,s),m(this,vo,n),this.parent.drawLayer.finalizeDraw(s,{bbox:e.box,path:{d:e.toSVGPath()}}),m(this,Le,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:a(this,Je).box,path:{d:a(this,Je).toSVGPath()}},!0));else if(this.parent){const p=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(a(this,us),{bbox:A(d=vt,Os,ea).call(d,a(this,Ps).box,(p-this.rotation+360)%360),path:{d:e.toSVGPath()}}),this.parent.drawLayer.updateProperties(a(this,Le),{bbox:A(f=vt,Os,ea).call(f,a(this,Je).box,p),path:{d:a(this,Je).toSVGPath()}})}const[o,l,c,h]=e.box;switch(this.rotation){case 0:this.x=o,this.y=l,this.width=c,this.height=h;break;case 90:{const[p,y]=this.parentDimensions;this.x=l,this.y=1-o,this.width=c*y/p,this.height=h*p/y;break}case 180:this.x=1-o,this.y=1-l,this.width=c,this.height=h;break;case 270:{const[p,y]=this.parentDimensions;this.x=1-l,this.y=o,this.width=c*y/p,this.height=h*p/y;break}}const{lastPoint:u}=a(this,Je);m(this,ll,[(u[0]-o)/c,(u[1]-l)/h])},M0=function(e){const s=(o,l)=>{var c,h;this.color=o,m(this,fi,l),(c=this.parent)==null||c.drawLayer.updateProperties(a(this,us),{root:{fill:o,"fill-opacity":l}}),(h=a(this,al))==null||h.updateColor(o)},n=this.color,r=a(this,fi);this.addCommands({cmd:s.bind(this,e,vt._defaultOpacity),undo:s.bind(this,n,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ft.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(e)},!0)},L0=function(e){const s=a(this,Rs),n=r=>{m(this,Rs,r),A(this,nt,D0).call(this,r)};this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ft.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:e},!0)},D0=function(e){if(!a(this,Se))return;A(this,nt,Bu).call(this,{highlightOutlines:a(this,Ps).getNewOutline(e/2)}),this.fixAndSetPosition();const[s,n]=this.parentDimensions;this.setDims(this.width*s,this.height*n)},Mp=function(){a(this,us)===null||!this.parent||(this.parent.drawLayer.remove(a(this,us)),m(this,us,null),this.parent.drawLayer.remove(a(this,Le)),m(this,Le,null))},xr=function(e=this.parent){a(this,us)===null&&({id:Fe(this,us)._,clipPathId:Fe(this,vo)._}=e.drawLayer.draw({bbox:a(this,Ps).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":a(this,fi)},rootClass:{highlight:!0,free:a(this,Se)},path:{d:a(this,Ps).toSVGPath()}},!1,!0),m(this,Le,e.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:a(this,Se)},bbox:a(this,Je).box,path:{d:a(this,Je).toSVGPath()}},a(this,Se))),a(this,Ao)&&(a(this,Ao).style.clipPath=a(this,vo)))},Os=new WeakSet,ea=function([e,s,n,r],o){switch(o){case 90:return[1-s-r,e,r,n];case 180:return[1-e-n,1-s-r,n,r];case 270:return[s,1-e-n,r,n]}return[e,s,n,r]},O0=function(e){vt._keyboardManager.exec(this,e)},ju=function(e){if(!a(this,ol))return;const s=window.getSelection();e?s.setPosition(a(this,ol),a(this,Dh)):s.setPosition(a(this,Oh),a(this,Nh))},ql=function(){return a(this,Se)?this.rotation:0},N0=function(){if(a(this,Se))return null;const[e,s]=this.pageDimensions,[n,r]=this.pageTranslation,o=a(this,di),l=new Float32Array(o.length*8);let c=0;for(const{x:h,y:u,width:d,height:f}of o){const p=h*e+n,y=(1-u)*s+r;l[c]=l[c+4]=p,l[c+1]=l[c+3]=y,l[c+2]=l[c+6]=p+d*e,l[c+5]=l[c+7]=y-f*s,c+=8}return l},F0=function(e){return a(this,Ps).serialize(e,A(this,nt,ql).call(this))},$0=function(e,s){this._freeHighlight.add(s)&&e.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})},B0=function(e,s){this._freeHighlight.isEmpty()?e.drawLayer.remove(this._freeHighlightId):e.createAndAddNewEditor(s,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},j0=function(e){const{color:s}=this._initialData;return e.color.some((n,r)=>n!==s[r])},b(vt,Os),$(vt,"_defaultColor",null),$(vt,"_defaultOpacity",1),$(vt,"_defaultThickness",12),$(vt,"_type","highlight"),$(vt,"_editorType",et.HIGHLIGHT),$(vt,"_freeHighlightId",-1),$(vt,"_freeHighlight",null),$(vt,"_freeHighlightClipId","");let id=vt;var wo;class H0{constructor(){b(this,wo,Object.create(null))}updateProperty(t,e){this[t]=e,this.updateSVGProperty(t,e)}updateProperties(t){if(t)for(const[e,s]of Object.entries(t))e.startsWith("_")||this.updateProperty(e,s)}updateSVGProperty(t,e){a(this,wo)[t]=e}toSVGProperties(){const t=a(this,wo);return m(this,wo,Object.create(null)),{root:t}}reset(){m(this,wo,Object.create(null))}updateAll(t=this){this.updateProperties(t)}clone(){Pt("Not implemented")}}wo=new WeakMap;var ds,hl,fe,So,Eo,tr,er,sr,xo,gt,Lp,Dp,Op,Xl,z0,Hu,Yl,sa;const Y=class Y extends Nt{constructor(e){super(e);b(this,gt);b(this,ds,null);b(this,hl);$(this,"_drawId",null);m(this,hl,e.mustBeCommitted||!1),this._addOutlines(e)}_addOutlines(e){e.drawOutlines&&(A(this,gt,Lp).call(this,e),A(this,gt,Xl).call(this))}static _mergeSVGProperties(e,s){const n=new Set(Object.keys(e));for(const[r,o]of Object.entries(s))n.has(r)?Object.assign(e[r],o):e[r]=o;return e}static getDefaultDrawingOptions(e){Pt("Not implemented")}static get typesMap(){Pt("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(e,s){const n=this.typesMap.get(e);n&&this._defaultDrawingOptions.updateProperty(n,s),this._currentParent&&(a(Y,fe).updateProperty(n,s),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(e,s){const n=this.constructor.typesMap.get(e);n&&this._updateProperty(e,n,s)}static get defaultPropertiesToUpdate(){const e=[],s=this._defaultDrawingOptions;for(const[n,r]of this.typesMap)e.push([n,s[r]]);return e}get propertiesToUpdate(){const e=[],{_drawingOptions:s}=this;for(const[n,r]of this.constructor.typesMap)e.push([n,s[r]]);return e}_updateProperty(e,s,n){const r=this._drawingOptions,o=r[s],l=c=>{var u;r.updateProperty(s,c);const h=a(this,ds).updateProperty(s,c);h&&A(this,gt,Yl).call(this,h),(u=this.parent)==null||u.drawLayer.updateProperties(this._drawId,r.toSVGProperties())};this.addCommands({cmd:l.bind(this,n),undo:l.bind(this,o),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:e,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,Y._mergeSVGProperties(a(this,ds).getPathResizingSVGProperties(A(this,gt,Hu).call(this)),{bbox:A(this,gt,sa).call(this)}))}_onResized(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,Y._mergeSVGProperties(a(this,ds).getPathResizedSVGProperties(A(this,gt,Hu).call(this)),{bbox:A(this,gt,sa).call(this)}))}_onTranslating(e,s){var n;(n=this.parent)==null||n.drawLayer.updateProperties(this._drawId,{bbox:A(this,gt,sa).call(this)})}_onTranslated(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,Y._mergeSVGProperties(a(this,ds).getPathTranslatedSVGProperties(A(this,gt,Hu).call(this),this.parentDimensions),{bbox:A(this,gt,sa).call(this)}))}_onStartDragging(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,a(this,hl)&&(m(this,hl,!1),this.commit(),this.parent.setSelected(this),e&&this.isOnScreen&&this.div.focus())}remove(){A(this,gt,Op).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(A(this,gt,Xl).call(this),A(this,gt,Yl).call(this,a(this,ds).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){var n;let s=!1;this.parent&&!e?(this._uiManager.removeShouldRescale(this),A(this,gt,Op).call(this)):e&&(this._uiManager.addShouldRescale(this),A(this,gt,Xl).call(this,e),s=!this.parent&&((n=this.div)==null?void 0:n.classList.contains("selectedEditor"))),super.setParent(e),s&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,Y._mergeSVGProperties({bbox:A(this,gt,sa).call(this)},a(this,ds).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&A(this,gt,Yl).call(this,a(this,ds).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let e,s;this._isCopy&&(e=this.x,s=this.y);const n=super.render();n.classList.add("draw");const r=document.createElement("div");n.append(r),r.setAttribute("aria-hidden","true"),r.className="internal";const[o,l]=this.parentDimensions;return this.setDims(this.width*o,this.height*l),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(e,s),n}static createDrawerInstance(e,s,n,r,o){Pt("Not implemented")}static startDrawing(e,s,n,r){var v;const{target:o,offsetX:l,offsetY:c,pointerId:h,pointerType:u}=r;if(a(Y,er)&&a(Y,er)!==u)return;const{viewport:{rotation:d}}=e,{width:f,height:p}=o.getBoundingClientRect(),y=m(Y,So,new AbortController),g=e.combinedSignal(y);if(a(Y,tr)||m(Y,tr,h),a(Y,er)??m(Y,er,u),window.addEventListener("pointerup",w=>{var _;a(Y,tr)===w.pointerId?this._endDraw(w):(_=a(Y,sr))==null||_.delete(w.pointerId)},{signal:g}),window.addEventListener("pointercancel",w=>{var _;a(Y,tr)===w.pointerId?this._currentParent.endDrawingSession():(_=a(Y,sr))==null||_.delete(w.pointerId)},{signal:g}),window.addEventListener("pointerdown",w=>{a(Y,er)===w.pointerType&&((a(Y,sr)||m(Y,sr,new Set)).add(w.pointerId),a(Y,fe).isCancellable()&&(a(Y,fe).removeLastElement(),a(Y,fe).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:g}),window.addEventListener("contextmenu",Fs,{signal:g}),o.addEventListener("pointermove",this._drawMove.bind(this),{signal:g}),o.addEventListener("touchmove",w=>{w.timeStamp===a(Y,xo)&&Jt(w)},{signal:g}),e.toggleDrawing(),(v=s._editorUndoBar)==null||v.hide(),a(Y,fe)){e.drawLayer.updateProperties(this._currentDrawId,a(Y,fe).startNew(l,c,f,p,d));return}s.updateUIForDefaultProperties(this),m(Y,fe,this.createDrawerInstance(l,c,f,p,d)),m(Y,Eo,this.getDefaultDrawingOptions()),this._currentParent=e,{id:this._currentDrawId}=e.drawLayer.draw(this._mergeSVGProperties(a(Y,Eo).toSVGProperties(),a(Y,fe).defaultSVGProperties),!0,!1)}static _drawMove(e){var o;if(m(Y,xo,-1),!a(Y,fe))return;const{offsetX:s,offsetY:n,pointerId:r}=e;if(a(Y,tr)===r){if(((o=a(Y,sr))==null?void 0:o.size)>=1){this._endDraw(e);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,a(Y,fe).add(s,n)),m(Y,xo,e.timeStamp),Jt(e)}}static _cleanup(e){e&&(this._currentDrawId=-1,this._currentParent=null,m(Y,fe,null),m(Y,Eo,null),m(Y,er,null),m(Y,xo,NaN)),a(Y,So)&&(a(Y,So).abort(),m(Y,So,null),m(Y,tr,NaN),m(Y,sr,null))}static _endDraw(e){const s=this._currentParent;if(s){if(s.toggleDrawing(!0),this._cleanup(!1),(e==null?void 0:e.target)===s.div&&s.drawLayer.updateProperties(this._currentDrawId,a(Y,fe).end(e.offsetX,e.offsetY)),this.supportMultipleDrawings){const n=a(Y,fe),r=this._currentDrawId,o=n.getLastElement();s.addCommands({cmd:()=>{s.drawLayer.updateProperties(r,n.setLastElement(o))},undo:()=>{s.drawLayer.updateProperties(r,n.removeLastElement())},mustExec:!1,type:ft.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(e){const s=this._currentParent;if(!s)return null;if(s.toggleDrawing(!0),s.cleanUndoStack(ft.DRAW_STEP),!a(Y,fe).isEmpty()){const{pageDimensions:[n,r],scale:o}=s,l=s.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:a(Y,fe).getOutlines(n*o,r*o,o,this._INNER_MARGIN),drawingOptions:a(Y,Eo),mustBeCommitted:!e});return this._cleanup(!0),l}return s.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(e){}static deserializeDraw(e,s,n,r,o,l){Pt("Not implemented")}static async deserialize(e,s,n){var d,f;const{rawDims:{pageWidth:r,pageHeight:o,pageX:l,pageY:c}}=s.viewport,h=this.deserializeDraw(l,c,r,o,this._INNER_MARGIN,e),u=await super.deserialize(e,s,n);return u.createDrawingOptions(e),A(d=u,gt,Lp).call(d,{drawOutlines:h}),A(f=u,gt,Xl).call(f),u.onScaleChanging(),u.rotate(),u}serializeDraw(e){const[s,n]=this.pageTranslation,[r,o]=this.pageDimensions;return a(this,ds).serialize([s,n,r,o],e)}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};ds=new WeakMap,hl=new WeakMap,fe=new WeakMap,So=new WeakMap,Eo=new WeakMap,tr=new WeakMap,er=new WeakMap,sr=new WeakMap,xo=new WeakMap,gt=new WeakSet,Lp=function({drawOutlines:e,drawId:s,drawingOptions:n}){m(this,ds,e),this._drawingOptions||(this._drawingOptions=n),s>=0?(this._drawId=s,this.parent.drawLayer.finalizeDraw(s,e.defaultProperties)):this._drawId=A(this,gt,Dp).call(this,e,this.parent),A(this,gt,Yl).call(this,e.box)},Dp=function(e,s){const{id:n}=s.drawLayer.draw(Y._mergeSVGProperties(this._drawingOptions.toSVGProperties(),e.defaultSVGProperties),!1,!1);return n},Op=function(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())},Xl=function(e=this.parent){if(!(this._drawId!==null&&this.parent===e)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,e.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=A(this,gt,Dp).call(this,a(this,ds),e)}},z0=function([e,s,n,r]){const{parentDimensions:[o,l],rotation:c}=this;switch(c){case 90:return[s,1-e,n*(l/o),r*(o/l)];case 180:return[1-e,1-s,n,r];case 270:return[1-s,e,n*(l/o),r*(o/l)];default:return[e,s,n,r]}},Hu=function(){const{x:e,y:s,width:n,height:r,parentDimensions:[o,l],rotation:c}=this;switch(c){case 90:return[1-s,e,n*(o/l),r*(l/o)];case 180:return[1-e,1-s,n,r];case 270:return[s,1-e,n*(o/l),r*(l/o)];default:return[e,s,n,r]}},Yl=function(e){if([this.x,this.y,this.width,this.height]=A(this,gt,z0).call(this,e),this.div){this.fixAndSetPosition();const[s,n]=this.parentDimensions;this.setDims(this.width*s,this.height*n)}this._onResized()},sa=function(){const{x:e,y:s,width:n,height:r,rotation:o,parentRotation:l,parentDimensions:[c,h]}=this;switch((o*4+l)/90){case 1:return[1-s-r,e,r,n];case 2:return[1-e-n,1-s-r,n,r];case 3:return[s,1-e-n,r,n];case 4:return[e,s-n*(c/h),r*(h/c),n*(c/h)];case 5:return[1-s,e,n*(c/h),r*(h/c)];case 6:return[1-e-r*(h/c),1-s,r*(h/c),n*(c/h)];case 7:return[s-n*(c/h),1-e-r*(h/c),n*(c/h),r*(h/c)];case 8:return[e-n,s-r,n,r];case 9:return[1-s,e-n,r,n];case 10:return[1-e,1-s,n,r];case 11:return[s-r,1-e,r,n];case 12:return[e-r*(h/c),s,r*(h/c),n*(c/h)];case 13:return[1-s-n*(c/h),e-r*(h/c),n*(c/h),r*(h/c)];case 14:return[1-e,1-s-n*(c/h),r*(h/c),n*(c/h)];case 15:return[s,1-e,n*(c/h),r*(h/c)];default:return[e,s,n,r]}},$(Y,"_currentDrawId",-1),$(Y,"_currentParent",null),b(Y,fe,null),b(Y,So,null),b(Y,Eo,null),b(Y,tr,NaN),b(Y,er,null),b(Y,sr,null),b(Y,xo,NaN),$(Y,"_INNER_MARGIN",3);let rd=Y;var wn,pe,ge,_o,ul,je,Ee,ks,Co,To,Po,dl,zu;class Xx{constructor(t,e,s,n,r,o){b(this,dl);b(this,wn,new Float64Array(6));b(this,pe);b(this,ge);b(this,_o);b(this,ul);b(this,je);b(this,Ee,"");b(this,ks,0);b(this,Co,new Jh);b(this,To);b(this,Po);m(this,To,s),m(this,Po,n),m(this,_o,r),m(this,ul,o),[t,e]=A(this,dl,zu).call(this,t,e);const l=m(this,pe,[NaN,NaN,NaN,NaN,t,e]);m(this,je,[t,e]),m(this,ge,[{line:l,points:a(this,je)}]),a(this,wn).set(l,0)}updateProperty(t,e){t==="stroke-width"&&m(this,ul,e)}isEmpty(){return!a(this,ge)||a(this,ge).length===0}isCancellable(){return a(this,je).length<=10}add(t,e){[t,e]=A(this,dl,zu).call(this,t,e);const[s,n,r,o]=a(this,wn).subarray(2,6),l=t-r,c=e-o;return Math.hypot(a(this,To)*l,a(this,Po)*c)<=2?null:(a(this,je).push(t,e),isNaN(s)?(a(this,wn).set([r,o,t,e],2),a(this,pe).push(NaN,NaN,NaN,NaN,t,e),{path:{d:this.toSVGPath()}}):(isNaN(a(this,wn)[0])&&a(this,pe).splice(6,6),a(this,wn).set([s,n,r,o,t,e],0),a(this,pe).push(...X.createBezierPoints(s,n,r,o,t,e)),{path:{d:this.toSVGPath()}}))}end(t,e){const s=this.add(t,e);return s||(a(this,je).length===2?{path:{d:this.toSVGPath()}}:null)}startNew(t,e,s,n,r){m(this,To,s),m(this,Po,n),m(this,_o,r),[t,e]=A(this,dl,zu).call(this,t,e);const o=m(this,pe,[NaN,NaN,NaN,NaN,t,e]);m(this,je,[t,e]);const l=a(this,ge).at(-1);return l&&(l.line=new Float32Array(l.line),l.points=new Float32Array(l.points)),a(this,ge).push({line:o,points:a(this,je)}),a(this,wn).set(o,0),m(this,ks,0),this.toSVGPath(),null}getLastElement(){return a(this,ge).at(-1)}setLastElement(t){return a(this,ge)?(a(this,ge).push(t),m(this,pe,t.line),m(this,je,t.points),m(this,ks,0),{path:{d:this.toSVGPath()}}):a(this,Co).setLastElement(t)}removeLastElement(){if(!a(this,ge))return a(this,Co).removeLastElement();a(this,ge).pop(),m(this,Ee,"");for(let t=0,e=a(this,ge).length;t<e;t++){const{line:s,points:n}=a(this,ge)[t];m(this,pe,s),m(this,je,n),m(this,ks,0),this.toSVGPath()}return{path:{d:a(this,Ee)}}}toSVGPath(){const t=X.svgRound(a(this,pe)[4]),e=X.svgRound(a(this,pe)[5]);if(a(this,je).length===2)return m(this,Ee,`${a(this,Ee)} M ${t} ${e} Z`),a(this,Ee);if(a(this,je).length<=6){const n=a(this,Ee).lastIndexOf("M");m(this,Ee,`${a(this,Ee).slice(0,n)} M ${t} ${e}`),m(this,ks,6)}if(a(this,je).length===4){const n=X.svgRound(a(this,pe)[10]),r=X.svgRound(a(this,pe)[11]);return m(this,Ee,`${a(this,Ee)} L ${n} ${r}`),m(this,ks,12),a(this,Ee)}const s=[];a(this,ks)===0&&(s.push(`M ${t} ${e}`),m(this,ks,6));for(let n=a(this,ks),r=a(this,pe).length;n<r;n+=6){const[o,l,c,h,u,d]=a(this,pe).slice(n,n+6).map(X.svgRound);s.push(`C${o} ${l} ${c} ${h} ${u} ${d}`)}return m(this,Ee,a(this,Ee)+s.join(" ")),m(this,ks,a(this,pe).length),a(this,Ee)}getOutlines(t,e,s,n){const r=a(this,ge).at(-1);return r.line=new Float32Array(r.line),r.points=new Float32Array(r.points),a(this,Co).build(a(this,ge),t,e,s,a(this,_o),a(this,ul),n),m(this,wn,null),m(this,pe,null),m(this,ge,null),m(this,Ee,null),a(this,Co)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}wn=new WeakMap,pe=new WeakMap,ge=new WeakMap,_o=new WeakMap,ul=new WeakMap,je=new WeakMap,Ee=new WeakMap,ks=new WeakMap,Co=new WeakMap,To=new WeakMap,Po=new WeakMap,dl=new WeakSet,zu=function(t,e){return X._normalizePoint(t,e,a(this,To),a(this,Po),a(this,_o))};var He,$h,Bh,fs,Sn,En,fl,pl,Ro,_e,Hn,G0,U0,V0;class Jh extends X{constructor(){super(...arguments);b(this,_e);b(this,He);b(this,$h,0);b(this,Bh);b(this,fs);b(this,Sn);b(this,En);b(this,fl);b(this,pl);b(this,Ro)}build(e,s,n,r,o,l,c){m(this,Sn,s),m(this,En,n),m(this,fl,r),m(this,pl,o),m(this,Ro,l),m(this,Bh,c??0),m(this,fs,e),A(this,_e,U0).call(this)}get thickness(){return a(this,Ro)}setLastElement(e){return a(this,fs).push(e),{path:{d:this.toSVGPath()}}}removeLastElement(){return a(this,fs).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const e=[];for(const{line:s}of a(this,fs)){if(e.push(`M${X.svgRound(s[4])} ${X.svgRound(s[5])}`),s.length===6){e.push("Z");continue}if(s.length===12&&isNaN(s[6])){e.push(`L${X.svgRound(s[10])} ${X.svgRound(s[11])}`);continue}for(let n=6,r=s.length;n<r;n+=6){const[o,l,c,h,u,d]=s.subarray(n,n+6).map(X.svgRound);e.push(`C${o} ${l} ${c} ${h} ${u} ${d}`)}}return e.join("")}serialize([e,s,n,r],o){const l=[],c=[],[h,u,d,f]=A(this,_e,G0).call(this);let p,y,g,v,w,_,C,x,E;switch(a(this,pl)){case 0:E=X._rescale,p=e,y=s+r,g=n,v=-r,w=e+h*n,_=s+(1-u-f)*r,C=e+(h+d)*n,x=s+(1-u)*r;break;case 90:E=X._rescaleAndSwap,p=e,y=s,g=n,v=r,w=e+u*n,_=s+h*r,C=e+(u+f)*n,x=s+(h+d)*r;break;case 180:E=X._rescale,p=e+n,y=s,g=-n,v=r,w=e+(1-h-d)*n,_=s+u*r,C=e+(1-h)*n,x=s+(u+f)*r;break;case 270:E=X._rescaleAndSwap,p=e+n,y=s+r,g=-n,v=-r,w=e+(1-u-f)*n,_=s+(1-h-d)*r,C=e+(1-u)*n,x=s+(1-h)*r;break}for(const{line:T,points:P}of a(this,fs))l.push(E(T,p,y,g,v,o?new Array(T.length):null)),c.push(E(P,p,y,g,v,o?new Array(P.length):null));return{lines:l,points:c,rect:[w,_,C,x]}}static deserialize(e,s,n,r,o,{paths:{lines:l,points:c},rotation:h,thickness:u}){const d=[];let f,p,y,g,v;switch(h){case 0:v=X._rescale,f=-e/n,p=s/r+1,y=1/n,g=-1/r;break;case 90:v=X._rescaleAndSwap,f=-s/r,p=-e/n,y=1/r,g=1/n;break;case 180:v=X._rescale,f=e/n+1,p=-s/r,y=-1/n,g=1/r;break;case 270:v=X._rescaleAndSwap,f=s/r+1,p=e/n+1,y=-1/r,g=-1/n;break}if(!l){l=[];for(const _ of c){const C=_.length;if(C===2){l.push(new Float32Array([NaN,NaN,NaN,NaN,_[0],_[1]]));continue}if(C===4){l.push(new Float32Array([NaN,NaN,NaN,NaN,_[0],_[1],NaN,NaN,NaN,NaN,_[2],_[3]]));continue}const x=new Float32Array(3*(C-2));l.push(x);let[E,T,P,M]=_.subarray(0,4);x.set([NaN,NaN,NaN,NaN,E,T],0);for(let D=4;D<C;D+=2){const S=_[D],k=_[D+1];x.set(X.createBezierPoints(E,T,P,M,S,k),(D-2)*3),[E,T,P,M]=[P,M,S,k]}}}for(let _=0,C=l.length;_<C;_++)d.push({line:v(l[_].map(x=>x??NaN),f,p,y,g),points:v(c[_].map(x=>x??NaN),f,p,y,g)});const w=new this.prototype.constructor;return w.build(d,n,r,1,h,u,o),w}get box(){return a(this,He)}updateProperty(e,s){return e==="stroke-width"?A(this,_e,V0).call(this,s):null}updateParentDimensions([e,s],n){const[r,o]=A(this,_e,Hn).call(this);m(this,Sn,e),m(this,En,s),m(this,fl,n);const[l,c]=A(this,_e,Hn).call(this),h=l-r,u=c-o,d=a(this,He);return d[0]-=h,d[1]-=u,d[2]+=2*h,d[3]+=2*u,d}updateRotation(e){return m(this,$h,e),{path:{transform:this.rotationTransform}}}get viewBox(){return a(this,He).map(X.svgRound).join(" ")}get defaultProperties(){const[e,s]=a(this,He);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${X.svgRound(e)} ${X.svgRound(s)}`}}}get rotationTransform(){const[,,e,s]=a(this,He);let n=0,r=0,o=0,l=0,c=0,h=0;switch(a(this,$h)){case 90:r=s/e,o=-e/s,c=e;break;case 180:n=-1,l=-1,c=e,h=s;break;case 270:r=-s/e,o=e/s,h=s;break;default:return""}return`matrix(${n} ${r} ${o} ${l} ${X.svgRound(c)} ${X.svgRound(h)})`}getPathResizingSVGProperties([e,s,n,r]){const[o,l]=A(this,_e,Hn).call(this),[c,h,u,d]=a(this,He);if(Math.abs(u-o)<=X.PRECISION||Math.abs(d-l)<=X.PRECISION){const v=e+n/2-(c+u/2),w=s+r/2-(h+d/2);return{path:{"transform-origin":`${X.svgRound(e)} ${X.svgRound(s)}`,transform:`${this.rotationTransform} translate(${v} ${w})`}}}const f=(n-2*o)/(u-2*o),p=(r-2*l)/(d-2*l),y=u/n,g=d/r;return{path:{"transform-origin":`${X.svgRound(c)} ${X.svgRound(h)}`,transform:`${this.rotationTransform} scale(${y} ${g}) translate(${X.svgRound(o)} ${X.svgRound(l)}) scale(${f} ${p}) translate(${X.svgRound(-o)} ${X.svgRound(-l)})`}}}getPathResizedSVGProperties([e,s,n,r]){const[o,l]=A(this,_e,Hn).call(this),c=a(this,He),[h,u,d,f]=c;if(c[0]=e,c[1]=s,c[2]=n,c[3]=r,Math.abs(d-o)<=X.PRECISION||Math.abs(f-l)<=X.PRECISION){const w=e+n/2-(h+d/2),_=s+r/2-(u+f/2);for(const{line:C,points:x}of a(this,fs))X._translate(C,w,_,C),X._translate(x,w,_,x);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${X.svgRound(e)} ${X.svgRound(s)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const p=(n-2*o)/(d-2*o),y=(r-2*l)/(f-2*l),g=-p*(h+o)+e+o,v=-y*(u+l)+s+l;if(p!==1||y!==1||g!==0||v!==0)for(const{line:w,points:_}of a(this,fs))X._rescale(w,g,v,p,y,w),X._rescale(_,g,v,p,y,_);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${X.svgRound(e)} ${X.svgRound(s)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([e,s],n){const[r,o]=n,l=a(this,He),c=e-l[0],h=s-l[1];if(a(this,Sn)===r&&a(this,En)===o)for(const{line:u,points:d}of a(this,fs))X._translate(u,c,h,u),X._translate(d,c,h,d);else{const u=a(this,Sn)/r,d=a(this,En)/o;m(this,Sn,r),m(this,En,o);for(const{line:f,points:p}of a(this,fs))X._rescale(f,c,h,u,d,f),X._rescale(p,c,h,u,d,p);l[2]*=u,l[3]*=d}return l[0]=e,l[1]=s,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${X.svgRound(e)} ${X.svgRound(s)}`}}}get defaultSVGProperties(){const e=a(this,He);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${X.svgRound(e[0])} ${X.svgRound(e[1])}`,transform:this.rotationTransform||null},bbox:e}}}He=new WeakMap,$h=new WeakMap,Bh=new WeakMap,fs=new WeakMap,Sn=new WeakMap,En=new WeakMap,fl=new WeakMap,pl=new WeakMap,Ro=new WeakMap,_e=new WeakSet,Hn=function(e=a(this,Ro)){const s=a(this,Bh)+e/2*a(this,fl);return a(this,pl)%180===0?[s/a(this,Sn),s/a(this,En)]:[s/a(this,En),s/a(this,Sn)]},G0=function(){const[e,s,n,r]=a(this,He),[o,l]=A(this,_e,Hn).call(this,0);return[e+o,s+l,n-2*o,r-2*l]},U0=function(){const e=m(this,He,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:r}of a(this,fs)){if(r.length<=12){for(let c=4,h=r.length;c<h;c+=6)Q.pointBoundingBox(r[c],r[c+1],e);continue}let o=r[4],l=r[5];for(let c=6,h=r.length;c<h;c+=6){const[u,d,f,p,y,g]=r.subarray(c,c+6);Q.bezierBoundingBox(o,l,u,d,f,p,y,g,e),o=y,l=g}}const[s,n]=A(this,_e,Hn).call(this);e[0]=Oe(e[0]-s,0,1),e[1]=Oe(e[1]-n,0,1),e[2]=Oe(e[2]+s,0,1),e[3]=Oe(e[3]+n,0,1),e[2]-=e[0],e[3]-=e[1]},V0=function(e){const[s,n]=A(this,_e,Hn).call(this);m(this,Ro,e);const[r,o]=A(this,_e,Hn).call(this),[l,c]=[r-s,o-n],h=a(this,He);return h[0]-=l,h[1]-=c,h[2]+=2*l,h[3]+=2*c,h};class qd extends H0{constructor(t){super(),this._viewParameters=t,super.updateProperties({fill:"none",stroke:Nt._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(t,e){t==="stroke-width"&&(e??(e=this["stroke-width"]),e*=this._viewParameters.realScale),super.updateSVGProperty(t,e)}clone(){const t=new qd(this._viewParameters);return t.updateAll(this),t}}var _d,W0;const oa=class oa extends rd{constructor(e){super({...e,name:"inkEditor"});b(this,_d);this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(e,s){Nt.initialize(e,s),this._defaultDrawingOptions=new qd(s.viewParameters)}static getDefaultDrawingOptions(e){const s=this._defaultDrawingOptions.clone();return s.updateProperties(e),s}static get supportMultipleDrawings(){return!0}static get typesMap(){return dt(this,"typesMap",new Map([[ft.INK_THICKNESS,"stroke-width"],[ft.INK_COLOR,"stroke"],[ft.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(e,s,n,r,o){return new Xx(e,s,n,r,o,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(e,s,n,r,o,l){return Jh.deserialize(e,s,n,r,o,l)}static async deserialize(e,s,n){let r=null;if(e instanceof Cg){const{data:{inkLists:l,rect:c,rotation:h,id:u,color:d,opacity:f,borderStyle:{rawWidth:p},popupRef:y},parent:{page:{pageNumber:g}}}=e;r=e={annotationType:et.INK,color:Array.from(d),thickness:p,opacity:f,paths:{points:l},boxes:null,pageIndex:g-1,rect:c.slice(0),rotation:h,id:u,deleted:!1,popupRef:y}}const o=await super.deserialize(e,s,n);return o.annotationElementId=e.id||null,o._initialData=r,o}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:e,_drawingOptions:s,parent:n}=this;s.updateSVGProperty("stroke-width"),n.drawLayer.updateProperties(e,s.toSVGProperties())}static onScaleChangingWhenDrawing(){const e=this._currentParent;e&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),e.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:e,thickness:s,opacity:n}){this._drawingOptions=oa.getDefaultDrawingOptions({stroke:Q.makeHexColor(...e),"stroke-width":s,"stroke-opacity":n})}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:s,points:n,rect:r}=this.serializeDraw(e),{_drawingOptions:{stroke:o,"stroke-opacity":l,"stroke-width":c}}=this,h={annotationType:et.INK,color:Nt._colorManager.convert(o),opacity:l,thickness:c,paths:{lines:s,points:n},pageIndex:this.pageIndex,rect:r,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?(h.isCopy=!0,h):this.annotationElementId&&!A(this,_d,W0).call(this,h)?null:(h.id=this.annotationElementId,h)}renderAnnotationElement(e){const{points:s,rect:n}=this.serializeDraw(!1);return e.updateEdited({rect:n,thickness:this._drawingOptions["stroke-width"],points:s}),null}};_d=new WeakSet,W0=function(e){const{color:s,thickness:n,opacity:r,pageIndex:o}=this._initialData;return this._hasBeenMoved||this._hasBeenResized||e.color.some((l,c)=>l!==s[c])||e.thickness!==n||e.opacity!==r||e.pageIndex!==o},$(oa,"_type","ink"),$(oa,"_editorType",et.INK),$(oa,"_defaultDrawingOptions",null);let Np=oa;class Fp extends Jh{toSVGPath(){let t=super.toSVGPath();return t.endsWith("Z")||(t+="Z"),t}}const fu=8,kl=3;var ko,Et,$p,Js,q0,X0,Bp,Gu,Y0,K0,Q0,jp,Hp,J0;class In{static extractContoursFromText(t,{fontFamily:e,fontStyle:s,fontWeight:n},r,o,l,c){let h=new OffscreenCanvas(1,1),u=h.getContext("2d",{alpha:!1});const d=200,f=u.font=`${s} ${n} ${d}px ${e}`,{actualBoundingBoxLeft:p,actualBoundingBoxRight:y,actualBoundingBoxAscent:g,actualBoundingBoxDescent:v,fontBoundingBoxAscent:w,fontBoundingBoxDescent:_,width:C}=u.measureText(t),x=1.5,E=Math.ceil(Math.max(Math.abs(p)+Math.abs(y)||0,C)*x),T=Math.ceil(Math.max(Math.abs(g)+Math.abs(v)||d,Math.abs(w)+Math.abs(_)||d)*x);h=new OffscreenCanvas(E,T),u=h.getContext("2d",{alpha:!0,willReadFrequently:!0}),u.font=f,u.filter="grayscale(1)",u.fillStyle="white",u.fillRect(0,0,E,T),u.fillStyle="black",u.fillText(t,E*(x-1)/2,T*(3-x)/2);const P=A(this,Et,jp).call(this,u.getImageData(0,0,E,T).data),M=A(this,Et,Q0).call(this,P),D=A(this,Et,Hp).call(this,M),S=A(this,Et,Bp).call(this,P,E,T,D);return this.processDrawnLines({lines:{curves:S,width:E,height:T},pageWidth:r,pageHeight:o,rotation:l,innerMargin:c,mustSmooth:!0,areContours:!0})}static process(t,e,s,n,r){const[o,l,c]=A(this,Et,J0).call(this,t),[h,u]=A(this,Et,K0).call(this,o,l,c,Math.hypot(l,c)*a(this,ko).sigmaSFactor,a(this,ko).sigmaR,a(this,ko).kernelSize),d=A(this,Et,Hp).call(this,u),f=A(this,Et,Bp).call(this,h,l,c,d);return this.processDrawnLines({lines:{curves:f,width:l,height:c},pageWidth:e,pageHeight:s,rotation:n,innerMargin:r,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:t,pageWidth:e,pageHeight:s,rotation:n,innerMargin:r,mustSmooth:o,areContours:l}){n%180!==0&&([e,s]=[s,e]);const{curves:c,width:h,height:u}=t,d=t.thickness??0,f=[],p=Math.min(e/h,s/u),y=p/e,g=p/s,v=[];for(const{points:_}of c){const C=o?A(this,Et,Y0).call(this,_):_;if(!C)continue;v.push(C);const x=C.length,E=new Float32Array(x),T=new Float32Array(3*(x===2?2:x-2));if(f.push({line:T,points:E}),x===2){E[0]=C[0]*y,E[1]=C[1]*g,T.set([NaN,NaN,NaN,NaN,E[0],E[1]],0);continue}let[P,M,D,S]=C;P*=y,M*=g,D*=y,S*=g,E.set([P,M,D,S],0),T.set([NaN,NaN,NaN,NaN,P,M],0);for(let k=4;k<x;k+=2){const N=E[k]=C[k]*y,H=E[k+1]=C[k+1]*g;T.set(X.createBezierPoints(P,M,D,S,N,H),(k-2)*3),[P,M,D,S]=[D,S,N,H]}}if(f.length===0)return null;const w=l?new Fp:new Jh;return w.build(f,e,s,1,n,l?0:d,r),{outline:w,newCurves:v,areContours:l,thickness:d,width:h,height:u}}static async compressSignature({outlines:t,areContours:e,thickness:s,width:n,height:r}){let o=1/0,l=-1/0,c=0;for(const C of t){c+=C.length;for(let x=2,E=C.length;x<E;x++){const T=C[x]-C[x-2];o=Math.min(o,T),l=Math.max(l,T)}}let h;o>=-128&&l<=127?h=Int8Array:o>=-32768&&l<=32767?h=Int16Array:h=Int32Array;const u=t.length,d=fu+kl*u,f=new Uint32Array(d);let p=0;f[p++]=d*Uint32Array.BYTES_PER_ELEMENT+(c-2*u)*h.BYTES_PER_ELEMENT,f[p++]=0,f[p++]=n,f[p++]=r,f[p++]=e?0:1,f[p++]=Math.max(0,Math.floor(s??0)),f[p++]=u,f[p++]=h.BYTES_PER_ELEMENT;for(const C of t)f[p++]=C.length-2,f[p++]=C[0],f[p++]=C[1];const y=new CompressionStream("deflate-raw"),g=y.writable.getWriter();await g.ready,g.write(f);const v=h.prototype.constructor;for(const C of t){const x=new v(C.length-2);for(let E=2,T=C.length;E<T;E++)x[E-2]=C[E]-C[E-2];g.write(x)}g.close();const w=await new Response(y.readable).arrayBuffer(),_=new Uint8Array(w);return Xy(_)}static async decompressSignature(t){try{const e=x1(t),{readable:s,writable:n}=new DecompressionStream("deflate-raw"),r=n.getWriter();await r.ready,r.write(e).then(async()=>{await r.ready,await r.close()}).catch(()=>{});let o=null,l=0;for await(const C of s)o||(o=new Uint8Array(new Uint32Array(C.buffer,0,4)[0])),o.set(C,l),l+=C.length;const c=new Uint32Array(o.buffer,0,o.length>>2),h=c[1];if(h!==0)throw new Error(`Invalid version: ${h}`);const u=c[2],d=c[3],f=c[4]===0,p=c[5],y=c[6],g=c[7],v=[],w=(fu+kl*y)*Uint32Array.BYTES_PER_ELEMENT;let _;switch(g){case Int8Array.BYTES_PER_ELEMENT:_=new Int8Array(o.buffer,w);break;case Int16Array.BYTES_PER_ELEMENT:_=new Int16Array(o.buffer,w);break;case Int32Array.BYTES_PER_ELEMENT:_=new Int32Array(o.buffer,w);break}l=0;for(let C=0;C<y;C++){const x=c[kl*C+fu],E=new Float32Array(x+2);v.push(E);for(let T=0;T<kl-1;T++)E[T]=c[kl*C+fu+T+1];for(let T=0;T<x;T++)E[T+2]=E[T]+_[l++]}return{areContours:f,thickness:p,outlines:v,width:u,height:d}}catch(e){return st(`decompressSignature: ${e}`),null}}}ko=new WeakMap,Et=new WeakSet,$p=function(t,e,s,n){return s-=t,n-=e,s===0?n>0?0:4:s===1?n+6:2-n},Js=new WeakMap,q0=function(t,e,s,n,r,o,l){const c=A(this,Et,$p).call(this,s,n,r,o);for(let h=0;h<8;h++){const u=(-h+c-l+16)%8,d=a(this,Js)[2*u],f=a(this,Js)[2*u+1];if(t[(s+d)*e+(n+f)]!==0)return u}return-1},X0=function(t,e,s,n,r,o,l){const c=A(this,Et,$p).call(this,s,n,r,o);for(let h=0;h<8;h++){const u=(h+c+l+16)%8,d=a(this,Js)[2*u],f=a(this,Js)[2*u+1];if(t[(s+d)*e+(n+f)]!==0)return u}return-1},Bp=function(t,e,s,n){const r=t.length,o=new Int32Array(r);for(let u=0;u<r;u++)o[u]=t[u]<=n?1:0;for(let u=1;u<s-1;u++)o[u*e]=o[u*e+e-1]=0;for(let u=0;u<e;u++)o[u]=o[e*s-1-u]=0;let l=1,c;const h=[];for(let u=1;u<s-1;u++){c=1;for(let d=1;d<e-1;d++){const f=u*e+d,p=o[f];if(p===0)continue;let y=u,g=d;if(p===1&&o[f-1]===0)l+=1,g-=1;else if(p>=1&&o[f+1]===0)l+=1,g+=1,p>1&&(c=p);else{p!==1&&(c=Math.abs(p));continue}const v=[d,u],w=g===d+1,_={isHole:w,points:v,id:l,parent:0};h.push(_);let C;for(const k of h)if(k.id===c){C=k;break}C?C.isHole?_.parent=w?C.parent:c:_.parent=w?c:C.parent:_.parent=w?c:0;const x=A(this,Et,q0).call(this,o,e,u,d,y,g,0);if(x===-1){o[f]=-l,o[f]!==1&&(c=Math.abs(o[f]));continue}let E=a(this,Js)[2*x],T=a(this,Js)[2*x+1];const P=u+E,M=d+T;y=P,g=M;let D=u,S=d;for(;;){const k=A(this,Et,X0).call(this,o,e,D,S,y,g,1);E=a(this,Js)[2*k],T=a(this,Js)[2*k+1];const N=D+E,H=S+T;v.push(H,N);const z=D*e+S;if(o[z+1]===0?o[z]=-l:o[z]===1&&(o[z]=l),N===u&&H===d&&D===P&&S===M){o[f]!==1&&(c=Math.abs(o[f]));break}else y=D,g=S,D=N,S=H}}}return h},Gu=function(t,e,s,n){if(s-e<=4){for(let P=e;P<s-2;P+=2)n.push(t[P],t[P+1]);return}const r=t[e],o=t[e+1],l=t[s-4]-r,c=t[s-3]-o,h=Math.hypot(l,c),u=l/h,d=c/h,f=u*o-d*r,p=c/l,y=1/h,g=Math.atan(p),v=Math.cos(g),w=Math.sin(g),_=y*(Math.abs(v)+Math.abs(w)),C=y*(1-_+_**2),x=Math.max(Math.atan(Math.abs(w+v)*C),Math.atan(Math.abs(w-v)*C));let E=0,T=e;for(let P=e+2;P<s-2;P+=2){const M=Math.abs(f-u*t[P+1]+d*t[P]);M>E&&(T=P,E=M)}E>(h*x)**2?(A(this,Et,Gu).call(this,t,e,T+2,n),A(this,Et,Gu).call(this,t,T,s,n)):n.push(r,o)},Y0=function(t){const e=[],s=t.length;return A(this,Et,Gu).call(this,t,0,s,e),e.push(t[s-2],t[s-1]),e.length<=4?null:e},K0=function(t,e,s,n,r,o){const l=new Float32Array(o**2),c=-2*n**2,h=o>>1;for(let g=0;g<o;g++){const v=(g-h)**2;for(let w=0;w<o;w++)l[g*o+w]=Math.exp((v+(w-h)**2)/c)}const u=new Float32Array(256),d=-2*r**2;for(let g=0;g<256;g++)u[g]=Math.exp(g**2/d);const f=t.length,p=new Uint8Array(f),y=new Uint32Array(256);for(let g=0;g<s;g++)for(let v=0;v<e;v++){const w=g*e+v,_=t[w];let C=0,x=0;for(let T=0;T<o;T++){const P=g+T-h;if(!(P<0||P>=s))for(let M=0;M<o;M++){const D=v+M-h;if(D<0||D>=e)continue;const S=t[P*e+D],k=l[T*o+M]*u[Math.abs(S-_)];C+=S*k,x+=k}}const E=p[w]=Math.round(C/x);y[E]++}return[p,y]},Q0=function(t){const e=new Uint32Array(256);for(const s of t)e[s]++;return e},jp=function(t){const e=t.length,s=new Uint8ClampedArray(e>>2);let n=-1/0,r=1/0;for(let l=0,c=s.length;l<c;l++){if(t[(l<<2)+3]===0){n=s[l]=255;continue}const u=s[l]=t[l<<2];u>n&&(n=u),u<r&&(r=u)}const o=255/(n-r);for(let l=0;l<e;l++)s[l]=(s[l]-r)*o;return s},Hp=function(t){let e,s=-1/0,n=-1/0;const r=t.findIndex(c=>c!==0);let o=r,l=r;for(e=r;e<256;e++){const c=t[e];c>s&&(e-o>n&&(n=e-o,l=e-1),s=c,o=e)}for(e=l-1;e>=0&&!(t[e]>t[e+1]);e--);return e},J0=function(t){const e=t,{width:s,height:n}=t,{maxDim:r}=a(this,ko);let o=s,l=n;if(s>r||n>r){let f=s,p=n,y=Math.log2(Math.max(s,n)/r);const g=Math.floor(y);y=y===g?g-1:g;for(let w=0;w<y;w++){o=Math.ceil(f/2),l=Math.ceil(p/2);const _=new OffscreenCanvas(o,l);_.getContext("2d").drawImage(t,0,0,f,p,0,0,o,l),f=o,p=l,t!==e&&t.close(),t=_.transferToImageBitmap()}const v=Math.min(r/o,r/l);o=Math.round(o*v),l=Math.round(l*v)}const h=new OffscreenCanvas(o,l).getContext("2d",{willReadFrequently:!0});h.filter="grayscale(1)",h.drawImage(t,0,0,t.width,t.height,0,0,o,l);const u=h.getImageData(0,0,o,l).data;return[A(this,Et,jp).call(this,u),o,l]},b(In,Et),b(In,ko,{maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16}),b(In,Js,new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]));class Pg extends H0{constructor(){super(),super.updateProperties({fill:Nt._defaultLineColor,"stroke-width":0})}clone(){const t=new Pg;return t.updateAll(this),t}}class Rg extends qd{constructor(t){super(t),super.updateProperties({stroke:Nt._defaultLineColor,"stroke-width":1})}clone(){const t=new Rg(this._viewParameters);return t.updateAll(this),t}}var nr,ps,ir,rr;const ss=class ss extends rd{constructor(e){super({...e,mustBeCommitted:!0,name:"signatureEditor"});b(this,nr,!1);b(this,ps,null);b(this,ir,null);b(this,rr,null);this._willKeepAspectRatio=!0,m(this,ir,e.signatureData||null),m(this,ps,null),this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(e,s){Nt.initialize(e,s),this._defaultDrawingOptions=new Pg,this._defaultDrawnSignatureOptions=new Rg(s.viewParameters)}static getDefaultDrawingOptions(e){const s=this._defaultDrawingOptions.clone();return s.updateProperties(e),s}static get supportMultipleDrawings(){return!1}static get typesMap(){return dt(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!a(this,ps)}}static computeTelemetryFinalData(e){const s=e.get("hasDescription");return{hasAltText:s.get(!0)??0,hasNoAltText:s.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let e,s;const{_isCopy:n}=this;if(n&&(this._isCopy=!1,e=this.x,s=this.y),super.render(),this._drawId===null)if(a(this,ir)){const{lines:r,mustSmooth:o,areContours:l,description:c,uuid:h,heightInPage:u}=a(this,ir),{rawDims:{pageWidth:d,pageHeight:f},rotation:p}=this.parent.viewport,y=In.processDrawnLines({lines:r,pageWidth:d,pageHeight:f,rotation:p,innerMargin:ss._INNER_MARGIN,mustSmooth:o,areContours:l});this.addSignature(y,u,c,h)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);return n&&(this._isCopy=!0,this._moveAfterPaste(e,s)),this.div}setUuid(e){m(this,rr,e),this.addEditToolbar()}getUuid(){return a(this,rr)}get description(){return a(this,ps)}set description(e){m(this,ps,e),super.addEditToolbar().then(s=>{s==null||s.updateEditSignatureButton(e)})}getSignaturePreview(){const{newCurves:e,areContours:s,thickness:n,width:r,height:o}=a(this,ir),l=Math.max(r,o),c=In.processDrawnLines({lines:{curves:e.map(h=>({points:h})),thickness:n,width:r,height:o},pageWidth:l,pageHeight:l,rotation:0,innerMargin:0,mustSmooth:!1,areContours:s});return{areContours:s,outline:c.outline}}async addEditToolbar(){const e=await super.addEditToolbar();return e?(this._uiManager.signatureManager&&a(this,ps)!==null&&(await e.addEditSignatureButton(this._uiManager.signatureManager,a(this,rr),a(this,ps)),e.show()),e):null}addSignature(e,s,n,r){const{x:o,y:l}=this,{outline:c}=m(this,ir,e);m(this,nr,c instanceof Fp),m(this,ps,n),this.div.setAttribute("data-l10n-args",JSON.stringify({description:n}));let h;a(this,nr)?h=ss.getDefaultDrawingOptions():(h=ss._defaultDrawnSignatureOptions.clone(),h.updateProperties({"stroke-width":c.thickness})),this._addOutlines({drawOutlines:c,drawingOptions:h});const[u,d]=this.parentDimensions,[,f]=this.pageDimensions;let p=s/f;p=p>=1?.5:p,this.width*=p/this.height,this.width>=1&&(p*=.9/this.width,this.width=.9),this.height=p,this.setDims(u*this.width,d*this.height),this.x=o,this.y=l,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(r),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!r,hasDescription:!!n}}),this.div.hidden=!1}getFromImage(e){const{rawDims:{pageWidth:s,pageHeight:n},rotation:r}=this.parent.viewport;return In.process(e,s,n,r,ss._INNER_MARGIN)}getFromText(e,s){const{rawDims:{pageWidth:n,pageHeight:r},rotation:o}=this.parent.viewport;return In.extractContoursFromText(e,s,n,r,o,ss._INNER_MARGIN)}getDrawnSignature(e){const{rawDims:{pageWidth:s,pageHeight:n},rotation:r}=this.parent.viewport;return In.processDrawnLines({lines:e,pageWidth:s,pageHeight:n,rotation:r,innerMargin:ss._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:e,thickness:s}){e?this._drawingOptions=ss.getDefaultDrawingOptions():(this._drawingOptions=ss._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":s}))}serialize(e=!1){if(this.isEmpty())return null;const{lines:s,points:n,rect:r}=this.serializeDraw(e),{_drawingOptions:{"stroke-width":o}}=this,l={annotationType:et.SIGNATURE,isSignature:!0,areContours:a(this,nr),color:[0,0,0],thickness:a(this,nr)?0:o,pageIndex:this.pageIndex,rect:r,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?(l.paths={lines:s,points:n},l.uuid=a(this,rr),l.isCopy=!0):l.lines=s,a(this,ps)&&(l.accessibilityData={type:"Figure",alt:a(this,ps)}),l}static deserializeDraw(e,s,n,r,o,l){return l.areContours?Fp.deserialize(e,s,n,r,o,l):Jh.deserialize(e,s,n,r,o,l)}static async deserialize(e,s,n){var o;const r=await super.deserialize(e,s,n);return m(r,nr,e.areContours),m(r,ps,((o=e.accessibilityData)==null?void 0:o.alt)||""),m(r,rr,e.uuid),r}};nr=new WeakMap,ps=new WeakMap,ir=new WeakMap,rr=new WeakMap,$(ss,"_type","signature"),$(ss,"_editorType",et.SIGNATURE),$(ss,"_defaultDrawingOptions",null);let zp=ss;var jt,me,or,pi,ar,gl,gi,Io,xn,gs,ml,mt,Kl,Ql,Uu,Vu,Wu,Up,qu,Z0;class Gp extends Nt{constructor(e){super({...e,name:"stampEditor"});b(this,mt);b(this,jt,null);b(this,me,null);b(this,or,null);b(this,pi,null);b(this,ar,null);b(this,gl,"");b(this,gi,null);b(this,Io,!1);b(this,xn,null);b(this,gs,!1);b(this,ml,!1);m(this,pi,e.bitmapUrl),m(this,ar,e.bitmapFile),this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(e,s){Nt.initialize(e,s)}static isHandlingMimeForPasting(e){return ed.includes(e)}static paste(e,s){s.pasteEditor({mode:et.STAMP},{bitmapFile:e.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var e;return{type:"stamp",hasAltText:!!((e=this.altTextData)!=null&&e.altText)}}static computeTelemetryFinalData(e){const s=e.get("hasAltText");return{hasAltText:s.get(!0)??0,hasNoAltText:s.get(!1)??0}}async mlGuessAltText(e=null,s=!0){if(this.hasAltTextData())return null;const{mlManager:n}=this._uiManager;if(!n)throw new Error("No ML.");if(!await n.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:r,width:o,height:l}=e||this.copyCanvas(null,null,!0).imageData,c=await n.guess({name:"altText",request:{data:r,width:o,height:l,channels:r.length/(o*l)}});if(!c)throw new Error("No response from the AI service.");if(c.error)throw new Error("Error from the AI service.");if(c.cancel)return null;if(!c.output)throw new Error("No valid response from the AI service.");const h=c.output;return await this.setGuessedAltText(h),s&&!this.hasAltTextData()&&(this.altTextData={alt:h,decorative:!1}),h}remove(){var e;a(this,me)&&(m(this,jt,null),this._uiManager.imageManager.deleteId(a(this,me)),(e=a(this,gi))==null||e.remove(),m(this,gi,null),a(this,xn)&&(clearTimeout(a(this,xn)),m(this,xn,null))),super.remove()}rebuild(){if(!this.parent){a(this,me)&&A(this,mt,Uu).call(this);return}super.rebuild(),this.div!==null&&(a(this,me)&&a(this,gi)===null&&A(this,mt,Uu).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(e){this._isDraggable=!0,e&&this.div.focus()}isEmpty(){return!(a(this,or)||a(this,jt)||a(this,pi)||a(this,ar)||a(this,me)||a(this,Io))}get isResizable(){return!0}render(){if(this.div)return this.div;let e,s;return this._isCopy&&(e=this.x,s=this.y),super.render(),this.div.hidden=!0,this.addAltTextButton(),a(this,Io)||(a(this,jt)?A(this,mt,Vu).call(this):A(this,mt,Uu).call(this)),this._isCopy&&this._moveAfterPaste(e,s),this._uiManager.addShouldRescale(this),this.div}setCanvas(e,s){const{id:n,bitmap:r}=this._uiManager.imageManager.getFromCanvas(e,s);s.remove(),n&&this._uiManager.imageManager.isValidId(n)&&(m(this,me,n),r&&m(this,jt,r),m(this,Io,!1),A(this,mt,Vu).call(this))}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;a(this,xn)!==null&&clearTimeout(a(this,xn)),m(this,xn,setTimeout(()=>{m(this,xn,null),A(this,mt,Up).call(this)},200))}copyCanvas(e,s,n=!1){var p;e||(e=224);const{width:r,height:o}=a(this,jt),l=new nn;let c=a(this,jt),h=r,u=o,d=null;if(s){if(r>s||o>s){const M=Math.min(s/r,s/o);h=Math.floor(r*M),u=Math.floor(o*M)}d=document.createElement("canvas");const y=d.width=Math.ceil(h*l.sx),g=d.height=Math.ceil(u*l.sy);a(this,gs)||(c=A(this,mt,Wu).call(this,y,g));const v=d.getContext("2d");v.filter=this._uiManager.hcmFilter;let w="white",_="#cfcfd8";this._uiManager.hcmFilter!=="none"?_="black":(p=window.matchMedia)!=null&&p.call(window,"(prefers-color-scheme: dark)").matches&&(w="#8f8f9d",_="#42414d");const C=15,x=C*l.sx,E=C*l.sy,T=new OffscreenCanvas(x*2,E*2),P=T.getContext("2d");P.fillStyle=w,P.fillRect(0,0,x*2,E*2),P.fillStyle=_,P.fillRect(0,0,x,E),P.fillRect(x,E,x,E),v.fillStyle=v.createPattern(T,"repeat"),v.fillRect(0,0,y,g),v.drawImage(c,0,0,c.width,c.height,0,0,y,g)}let f=null;if(n){let y,g;if(l.symmetric&&c.width<e&&c.height<e)y=c.width,g=c.height;else if(c=a(this,jt),r>e||o>e){const _=Math.min(e/r,e/o);y=Math.floor(r*_),g=Math.floor(o*_),a(this,gs)||(c=A(this,mt,Wu).call(this,y,g))}const w=new OffscreenCanvas(y,g).getContext("2d",{willReadFrequently:!0});w.drawImage(c,0,0,c.width,c.height,0,0,y,g),f={width:y,height:g,data:w.getImageData(0,0,y,g).data}}return{canvas:d,width:h,height:u,imageData:f}}static async deserialize(e,s,n){var v;let r=null,o=!1;if(e instanceof p0){const{data:{rect:w,rotation:_,id:C,structParent:x,popupRef:E},container:T,parent:{page:{pageNumber:P}},canvas:M}=e;let D,S;M?(delete e.canvas,{id:D,bitmap:S}=n.imageManager.getFromCanvas(T.id,M),M.remove()):(o=!0,e._hasNoCanvas=!0);const k=((v=await s._structTree.getAriaAttributes(`${bg}${C}`))==null?void 0:v.get("aria-label"))||"";r=e={annotationType:et.STAMP,bitmapId:D,bitmap:S,pageIndex:P-1,rect:w.slice(0),rotation:_,id:C,deleted:!1,accessibilityData:{decorative:!1,altText:k},isSvg:!1,structParent:x,popupRef:E}}const l=await super.deserialize(e,s,n),{rect:c,bitmap:h,bitmapUrl:u,bitmapId:d,isSvg:f,accessibilityData:p}=e;o?(n.addMissingCanvas(e.id,l),m(l,Io,!0)):d&&n.imageManager.isValidId(d)?(m(l,me,d),h&&m(l,jt,h)):m(l,pi,u),m(l,gs,f);const[y,g]=l.pageDimensions;return l.width=(c[2]-c[0])/y,l.height=(c[3]-c[1])/g,l.annotationElementId=e.id||null,p&&(l.altTextData=p),l._initialData=r,m(l,ml,!!r),l}serialize(e=!1,s=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const n={annotationType:et.STAMP,bitmapId:a(this,me),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:a(this,gs),structTreeParentId:this._structTreeParentId};if(e)return n.bitmapUrl=A(this,mt,qu).call(this,!0),n.accessibilityData=this.serializeAltText(!0),n.isCopy=!0,n;const{decorative:r,altText:o}=this.serializeAltText(!1);if(!r&&o&&(n.accessibilityData={type:"Figure",alt:o}),this.annotationElementId){const c=A(this,mt,Z0).call(this,n);if(c.isSame)return null;c.isSameAltText?delete n.accessibilityData:n.accessibilityData.structParent=this._initialData.structParent??-1}if(n.id=this.annotationElementId,s===null)return n;s.stamps||(s.stamps=new Map);const l=a(this,gs)?(n.rect[2]-n.rect[0])*(n.rect[3]-n.rect[1]):null;if(!s.stamps.has(a(this,me)))s.stamps.set(a(this,me),{area:l,serialized:n}),n.bitmap=A(this,mt,qu).call(this,!1);else if(a(this,gs)){const c=s.stamps.get(a(this,me));l>c.area&&(c.area=l,c.serialized.bitmap.close(),c.serialized.bitmap=A(this,mt,qu).call(this,!1))}return n}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}}jt=new WeakMap,me=new WeakMap,or=new WeakMap,pi=new WeakMap,ar=new WeakMap,gl=new WeakMap,gi=new WeakMap,Io=new WeakMap,xn=new WeakMap,gs=new WeakMap,ml=new WeakMap,mt=new WeakSet,Kl=function(e,s=!1){if(!e){this.remove();return}m(this,jt,e.bitmap),s||(m(this,me,e.id),m(this,gs,e.isSvg)),e.file&&m(this,gl,e.file.name),A(this,mt,Vu).call(this)},Ql=function(){if(m(this,or,null),this._uiManager.enableWaiting(!1),!!a(this,gi)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&a(this,jt)){this._editToolbar.hide(),this._uiManager.editAltText(this,!0);return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&a(this,jt)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},Uu=function(){if(a(this,me)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(a(this,me)).then(n=>A(this,mt,Kl).call(this,n,!0)).finally(()=>A(this,mt,Ql).call(this));return}if(a(this,pi)){const n=a(this,pi);m(this,pi,null),this._uiManager.enableWaiting(!0),m(this,or,this._uiManager.imageManager.getFromUrl(n).then(r=>A(this,mt,Kl).call(this,r)).finally(()=>A(this,mt,Ql).call(this)));return}if(a(this,ar)){const n=a(this,ar);m(this,ar,null),this._uiManager.enableWaiting(!0),m(this,or,this._uiManager.imageManager.getFromFile(n).then(r=>A(this,mt,Kl).call(this,r)).finally(()=>A(this,mt,Ql).call(this)));return}const e=document.createElement("input");e.type="file",e.accept=ed.join(",");const s=this._uiManager._signal;m(this,or,new Promise(n=>{e.addEventListener("change",async()=>{if(!e.files||e.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const r=await this._uiManager.imageManager.getFromFile(e.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),A(this,mt,Kl).call(this,r)}n()},{signal:s}),e.addEventListener("cancel",()=>{this.remove(),n()},{signal:s})}).finally(()=>A(this,mt,Ql).call(this))),e.click()},Vu=function(){var d;const{div:e}=this;let{width:s,height:n}=a(this,jt);const[r,o]=this.pageDimensions,l=.75;if(this.width)s=this.width*r,n=this.height*o;else if(s>l*r||n>l*o){const f=Math.min(l*r/s,l*o/n);s*=f,n*=f}const[c,h]=this.parentDimensions;this.setDims(s*c/r,n*h/o),this._uiManager.enableWaiting(!1);const u=m(this,gi,document.createElement("canvas"));u.setAttribute("role","img"),this.addContainer(u),this.width=s/r,this.height=n/o,(d=this._initialOptions)!=null&&d.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(e.hidden=!1),A(this,mt,Up).call(this),a(this,ml)||(this.parent.addUndoableEditor(this),m(this,ml,!0)),this._reportTelemetry({action:"inserted_image"}),a(this,gl)&&this.div.setAttribute("aria-description",a(this,gl))},Wu=function(e,s){const{width:n,height:r}=a(this,jt);let o=n,l=r,c=a(this,jt);for(;o>2*e||l>2*s;){const h=o,u=l;o>2*e&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2)),l>2*s&&(l=l>=16384?Math.floor(l/2)-1:Math.ceil(l/2));const d=new OffscreenCanvas(o,l);d.getContext("2d").drawImage(c,0,0,h,u,0,0,o,l),c=d.transferToImageBitmap()}return c},Up=function(){const[e,s]=this.parentDimensions,{width:n,height:r}=this,o=new nn,l=Math.ceil(n*e*o.sx),c=Math.ceil(r*s*o.sy),h=a(this,gi);if(!h||h.width===l&&h.height===c)return;h.width=l,h.height=c;const u=a(this,gs)?a(this,jt):A(this,mt,Wu).call(this,l,c),d=h.getContext("2d");d.filter=this._uiManager.hcmFilter,d.drawImage(u,0,0,u.width,u.height,0,0,l,c)},qu=function(e){if(e){if(a(this,gs)){const r=this._uiManager.imageManager.getSvgUrl(a(this,me));if(r)return r}const s=document.createElement("canvas");return{width:s.width,height:s.height}=a(this,jt),s.getContext("2d").drawImage(a(this,jt),0,0),s.toDataURL()}if(a(this,gs)){const[s,n]=this.pageDimensions,r=Math.round(this.width*s*Ei.PDF_TO_CSS_UNITS),o=Math.round(this.height*n*Ei.PDF_TO_CSS_UNITS),l=new OffscreenCanvas(r,o);return l.getContext("2d").drawImage(a(this,jt),0,0,a(this,jt).width,a(this,jt).height,0,0,r,o),l.transferToImageBitmap()}return structuredClone(a(this,jt))},Z0=function(e){var l;const{pageIndex:s,accessibilityData:{altText:n}}=this._initialData,r=e.pageIndex===s,o=(((l=e.accessibilityData)==null?void 0:l.alt)||"")===n;return{isSame:!this._hasBeenMoved&&!this._hasBeenResized&&r&&o,isSameAltText:o}},$(Gp,"_type","stamp"),$(Gp,"_editorType",et.STAMP);var Mo,yl,_n,lr,mi,Is,cr,bl,Lo,Zs,yi,De,bi,K,hr,Ht,tv,cn,Vp,Wp,Xu;const Hs=class Hs{constructor({uiManager:t,pageIndex:e,div:s,structTreeLayer:n,accessibilityManager:r,annotationLayer:o,drawLayer:l,textLayer:c,viewport:h,l10n:u}){b(this,Ht);b(this,Mo);b(this,yl,!1);b(this,_n,null);b(this,lr,null);b(this,mi,null);b(this,Is,new Map);b(this,cr,!1);b(this,bl,!1);b(this,Lo,!1);b(this,Zs,null);b(this,yi,null);b(this,De,null);b(this,bi,null);b(this,K);const d=[...a(Hs,hr).values()];if(!Hs._initialized){Hs._initialized=!0;for(const f of d)f.initialize(u,t)}t.registerEditorTypes(d),m(this,K,t),this.pageIndex=e,this.div=s,m(this,Mo,r),m(this,_n,o),this.viewport=h,m(this,De,c),this.drawLayer=l,this._structTree=n,a(this,K).addLayer(this)}get isEmpty(){return a(this,Is).size===0}get isInvisible(){return this.isEmpty&&a(this,K).getMode()===et.NONE}updateToolbar(t){a(this,K).updateToolbar(t)}updateMode(t=a(this,K).getMode()){switch(A(this,Ht,Xu).call(this),t){case et.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case et.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case et.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:e}=this.div;for(const s of a(Hs,hr).values())e.toggle(`${s._type}Editing`,t===s._editorType);this.div.hidden=!1}hasTextLayer(t){var e;return t===((e=a(this,De))==null?void 0:e.div)}setEditingState(t){a(this,K).setEditingState(t)}addCommands(t){a(this,K).addCommands(t)}cleanUndoStack(t){a(this,K).cleanUndoStack(t)}toggleDrawing(t=!1){this.div.classList.toggle("drawing",!t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){var e;(e=a(this,_n))==null||e.div.classList.toggle("disabled",!t)}async enable(){m(this,Lo,!0),this.div.tabIndex=0,this.togglePointerEvents(!0);const t=new Set;for(const s of a(this,Is).values())s.enableEditing(),s.show(!0),s.annotationElementId&&(a(this,K).removeChangedExistingAnnotation(s),t.add(s.annotationElementId));if(!a(this,_n)){m(this,Lo,!1);return}const e=a(this,_n).getEditableAnnotations();for(const s of e){if(s.hide(),a(this,K).isDeletedAnnotationElement(s.data.id)||t.has(s.data.id))continue;const n=await this.deserialize(s);n&&(this.addOrRebuild(n),n.enableEditing())}m(this,Lo,!1)}disable(){var n;m(this,bl,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1);const t=new Map,e=new Map;for(const r of a(this,Is).values())if(r.disableEditing(),!!r.annotationElementId){if(r.serialize()!==null){t.set(r.annotationElementId,r);continue}else e.set(r.annotationElementId,r);(n=this.getEditableAnnotation(r.annotationElementId))==null||n.show(),r.remove()}if(a(this,_n)){const r=a(this,_n).getEditableAnnotations();for(const o of r){const{id:l}=o.data;if(a(this,K).isDeletedAnnotationElement(l))continue;let c=e.get(l);if(c){c.resetAnnotationElement(o),c.show(!1),o.show();continue}c=t.get(l),c&&(a(this,K).addChangedExistingAnnotation(c),c.renderAnnotationElement(o)&&c.show(!1)),o.show()}}A(this,Ht,Xu).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:s}=this.div;for(const r of a(Hs,hr).values())s.remove(`${r._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),m(this,bl,!1)}getEditableAnnotation(t){var e;return((e=a(this,_n))==null?void 0:e.getEditableAnnotation(t))||null}setActiveEditor(t){a(this,K).getActive()!==t&&a(this,K).setActiveEditor(t)}enableTextSelection(){var t;if(this.div.tabIndex=-1,(t=a(this,De))!=null&&t.div&&!a(this,bi)){m(this,bi,new AbortController);const e=a(this,K).combinedSignal(a(this,bi));a(this,De).div.addEventListener("pointerdown",A(this,Ht,tv).bind(this),{signal:e}),a(this,De).div.classList.add("highlighting")}}disableTextSelection(){var t;this.div.tabIndex=0,(t=a(this,De))!=null&&t.div&&a(this,bi)&&(a(this,bi).abort(),m(this,bi,null),a(this,De).div.classList.remove("highlighting"))}enableClick(){if(a(this,lr))return;m(this,lr,new AbortController);const t=a(this,K).combinedSignal(a(this,lr));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t});const e=this.pointerup.bind(this);this.div.addEventListener("pointerup",e,{signal:t}),this.div.addEventListener("pointercancel",e,{signal:t})}disableClick(){var t;(t=a(this,lr))==null||t.abort(),m(this,lr,null)}attach(t){a(this,Is).set(t.id,t);const{annotationElementId:e}=t;e&&a(this,K).isDeletedAnnotationElement(e)&&a(this,K).removeDeletedAnnotationElement(t)}detach(t){var e;a(this,Is).delete(t.id),(e=a(this,Mo))==null||e.removePointerInTextLayer(t.contentDiv),!a(this,bl)&&t.annotationElementId&&a(this,K).addDeletedAnnotationElement(t)}remove(t){this.detach(t),a(this,K).removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1}changeParent(t){var e;t.parent!==this&&(t.parent&&t.annotationElementId&&(a(this,K).addDeletedAnnotationElement(t.annotationElementId),Nt.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),(e=t.parent)==null||e.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),a(this,K).addEditor(t),this.attach(t),!t.isAttachedToDOM){const e=t.render();this.div.append(e),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(!a(this,Lo)),a(this,K).addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){var s;if(!t.isAttachedToDOM)return;const{activeElement:e}=document;t.div.contains(e)&&!a(this,mi)&&(t._focusEventsAllowed=!1,m(this,mi,setTimeout(()=>{m(this,mi,null),t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:a(this,K)._signal}),e.focus())},0))),t._structTreeParentId=(s=a(this,Mo))==null?void 0:s.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||(t.parent=this),t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){const e=()=>t._uiManager.rebuild(t),s=()=>{t.remove()};this.addCommands({cmd:e,undo:s,mustExec:!1})}getNextId(){return a(this,K).getId()}combinedSignal(t){return a(this,K).combinedSignal(t)}canCreateNewEmptyEditor(){var t;return(t=a(this,Ht,cn))==null?void 0:t.canCreateNewEmptyEditor()}async pasteEditor(t,e){this.updateToolbar(t),await a(this,K).updateMode(t.mode);const{offsetX:s,offsetY:n}=A(this,Ht,Wp).call(this),r=this.getNextId(),o=A(this,Ht,Vp).call(this,{parent:this,id:r,x:s,y:n,uiManager:a(this,K),isCentered:!0,...e});o&&this.add(o)}async deserialize(t){var e;return await((e=a(Hs,hr).get(t.annotationType??t.annotationEditorType))==null?void 0:e.deserialize(t,this,a(this,K)))||null}createAndAddNewEditor(t,e,s={}){const n=this.getNextId(),r=A(this,Ht,Vp).call(this,{parent:this,id:n,x:t.offsetX,y:t.offsetY,uiManager:a(this,K),isCentered:e,...s});return r&&this.add(r),r}addNewEditor(t={}){this.createAndAddNewEditor(A(this,Ht,Wp).call(this),!0,t)}setSelected(t){a(this,K).setSelected(t)}toggleSelected(t){a(this,K).toggleSelected(t)}unselect(t){a(this,K).unselect(t)}pointerup(t){var n;const{isMac:e}=ye.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div||!a(this,cr)||(m(this,cr,!1),(n=a(this,Ht,cn))!=null&&n.isDrawer&&a(this,Ht,cn).supportMultipleDrawings))return;if(!a(this,yl)){m(this,yl,!0);return}const s=a(this,K).getMode();if(s===et.STAMP||s===et.SIGNATURE){a(this,K).unselectAll();return}this.createAndAddNewEditor(t,!1)}pointerdown(t){var n;if(a(this,K).getMode()===et.HIGHLIGHT&&this.enableTextSelection(),a(this,cr)){m(this,cr,!1);return}const{isMac:e}=ye.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div)return;if(m(this,cr,!0),(n=a(this,Ht,cn))!=null&&n.isDrawer){this.startDrawingSession(t);return}const s=a(this,K).getActive();m(this,yl,!s||s.isEmpty())}startDrawingSession(t){if(this.div.focus({preventScroll:!0}),a(this,Zs)){a(this,Ht,cn).startDrawing(this,a(this,K),!1,t);return}a(this,K).setCurrentDrawingSession(this),m(this,Zs,new AbortController);const e=a(this,K).combinedSignal(a(this,Zs));this.div.addEventListener("blur",({relatedTarget:s})=>{s&&!this.div.contains(s)&&(m(this,yi,null),this.commitOrRemove())},{signal:e}),a(this,Ht,cn).startDrawing(this,a(this,K),!1,t)}pause(t){if(t){const{activeElement:e}=document;this.div.contains(e)&&m(this,yi,e);return}a(this,yi)&&setTimeout(()=>{var e;(e=a(this,yi))==null||e.focus(),m(this,yi,null)},0)}endDrawingSession(t=!1){return a(this,Zs)?(a(this,K).setCurrentDrawingSession(null),a(this,Zs).abort(),m(this,Zs,null),m(this,yi,null),a(this,Ht,cn).endDrawing(t)):null}findNewParent(t,e,s){const n=a(this,K).findParent(e,s);return n===null||n===this?!1:(n.changeParent(t),!0)}commitOrRemove(){return a(this,Zs)?(this.endDrawingSession(),!0):!1}onScaleChanging(){a(this,Zs)&&a(this,Ht,cn).onScaleChangingWhenDrawing(this)}destroy(){var t,e;this.commitOrRemove(),((t=a(this,K).getActive())==null?void 0:t.parent)===this&&(a(this,K).commitOrRemove(),a(this,K).setActiveEditor(null)),a(this,mi)&&(clearTimeout(a(this,mi)),m(this,mi,null));for(const s of a(this,Is).values())(e=a(this,Mo))==null||e.removePointerInTextLayer(s.contentDiv),s.setParent(null),s.isAttachedToDOM=!1,s.div.remove();this.div=null,a(this,Is).clear(),a(this,K).removeLayer(this)}render({viewport:t}){this.viewport=t,fr(this.div,t);for(const e of a(this,K).getEditors(this.pageIndex))this.add(e),e.rebuild();this.updateMode()}update({viewport:t}){a(this,K).commitOrRemove(),A(this,Ht,Xu).call(this);const e=this.viewport.rotation,s=t.rotation;if(this.viewport=t,fr(this.div,{rotation:s}),e!==s)for(const n of a(this,Is).values())n.rotate(s)}get pageDimensions(){const{pageWidth:t,pageHeight:e}=this.viewport.rawDims;return[t,e]}get scale(){return a(this,K).viewParameters.realScale}};Mo=new WeakMap,yl=new WeakMap,_n=new WeakMap,lr=new WeakMap,mi=new WeakMap,Is=new WeakMap,cr=new WeakMap,bl=new WeakMap,Lo=new WeakMap,Zs=new WeakMap,yi=new WeakMap,De=new WeakMap,bi=new WeakMap,K=new WeakMap,hr=new WeakMap,Ht=new WeakSet,tv=function(t){a(this,K).unselectAll();const{target:e}=t;if(e===a(this,De).div||(e.getAttribute("role")==="img"||e.classList.contains("endOfContent"))&&a(this,De).div.contains(e)){const{isMac:s}=ye.platform;if(t.button!==0||t.ctrlKey&&s)return;a(this,K).showAllEditors("highlight",!0,!0),a(this,De).div.classList.add("free"),this.toggleDrawing(),id.startHighlighting(this,a(this,K).direction==="ltr",{target:a(this,De).div,x:t.x,y:t.y}),a(this,De).div.addEventListener("pointerup",()=>{a(this,De).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:a(this,K)._signal}),t.preventDefault()}},cn=function(){return a(Hs,hr).get(a(this,K).getMode())},Vp=function(t){const e=a(this,Ht,cn);return e?new e.prototype.constructor(t):null},Wp=function(){const{x:t,y:e,width:s,height:n}=this.div.getBoundingClientRect(),r=Math.max(0,t),o=Math.max(0,e),l=Math.min(window.innerWidth,t+s),c=Math.min(window.innerHeight,e+n),h=(r+l)/2-t,u=(o+c)/2-e,[d,f]=this.viewport.rotation%180===0?[h,u]:[u,h];return{offsetX:d,offsetY:f}},Xu=function(){for(const t of a(this,Is).values())t.isEmpty()&&t.remove()},$(Hs,"_initialized",!1),b(Hs,hr,new Map([Ep,Np,Gp,id,zp].map(t=>[t._editorType,t])));let od=Hs;var tn,ze,Do,jh,Cd,ev,Ln,qp,sv,Xp;const ae=class ae{constructor({pageIndex:t}){b(this,Ln);b(this,tn,null);b(this,ze,new Map);b(this,Do,new Map);this.pageIndex=t}setParent(t){if(!a(this,tn)){m(this,tn,t);return}if(a(this,tn)!==t){if(a(this,ze).size>0)for(const e of a(this,ze).values())e.remove(),t.append(e);m(this,tn,t)}}static get _svgFactory(){return dt(this,"_svgFactory",new dc)}draw(t,e=!1,s=!1){const n=Fe(ae,jh)._++,r=A(this,Ln,qp).call(this),o=ae._svgFactory.createElement("defs");r.append(o);const l=ae._svgFactory.createElement("path");o.append(l);const c=`path_p${this.pageIndex}_${n}`;l.setAttribute("id",c),l.setAttribute("vector-effect","non-scaling-stroke"),e&&a(this,Do).set(n,l);const h=s?A(this,Ln,sv).call(this,o,c):null,u=ae._svgFactory.createElement("use");return r.append(u),u.setAttribute("href",`#${c}`),this.updateProperties(r,t),a(this,ze).set(n,r),{id:n,clipPathId:`url(#${h})`}}drawOutline(t,e){const s=Fe(ae,jh)._++,n=A(this,Ln,qp).call(this),r=ae._svgFactory.createElement("defs");n.append(r);const o=ae._svgFactory.createElement("path");r.append(o);const l=`path_p${this.pageIndex}_${s}`;o.setAttribute("id",l),o.setAttribute("vector-effect","non-scaling-stroke");let c;if(e){const d=ae._svgFactory.createElement("mask");r.append(d),c=`mask_p${this.pageIndex}_${s}`,d.setAttribute("id",c),d.setAttribute("maskUnits","objectBoundingBox");const f=ae._svgFactory.createElement("rect");d.append(f),f.setAttribute("width","1"),f.setAttribute("height","1"),f.setAttribute("fill","white");const p=ae._svgFactory.createElement("use");d.append(p),p.setAttribute("href",`#${l}`),p.setAttribute("stroke","none"),p.setAttribute("fill","black"),p.setAttribute("fill-rule","nonzero"),p.classList.add("mask")}const h=ae._svgFactory.createElement("use");n.append(h),h.setAttribute("href",`#${l}`),c&&h.setAttribute("mask",`url(#${c})`);const u=h.cloneNode();return n.append(u),h.classList.add("mainOutline"),u.classList.add("secondaryOutline"),this.updateProperties(n,t),a(this,ze).set(s,n),s}finalizeDraw(t,e){a(this,Do).delete(t),this.updateProperties(t,e)}updateProperties(t,e){var c;if(!e)return;const{root:s,bbox:n,rootClass:r,path:o}=e,l=typeof t=="number"?a(this,ze).get(t):t;if(l){if(s&&A(this,Ln,Xp).call(this,l,s),n&&A(c=ae,Cd,ev).call(c,l,n),r){const{classList:h}=l;for(const[u,d]of Object.entries(r))h.toggle(u,d)}if(o){const u=l.firstChild.firstChild;A(this,Ln,Xp).call(this,u,o)}}}updateParent(t,e){if(e===this)return;const s=a(this,ze).get(t);s&&(a(e,tn).append(s),a(this,ze).delete(t),a(e,ze).set(t,s))}remove(t){a(this,Do).delete(t),a(this,tn)!==null&&(a(this,ze).get(t).remove(),a(this,ze).delete(t))}destroy(){m(this,tn,null);for(const t of a(this,ze).values())t.remove();a(this,ze).clear(),a(this,Do).clear()}};tn=new WeakMap,ze=new WeakMap,Do=new WeakMap,jh=new WeakMap,Cd=new WeakSet,ev=function(t,[e,s,n,r]){const{style:o}=t;o.top=`${100*s}%`,o.left=`${100*e}%`,o.width=`${100*n}%`,o.height=`${100*r}%`},Ln=new WeakSet,qp=function(){const t=ae._svgFactory.create(1,1,!0);return a(this,tn).append(t),t.setAttribute("aria-hidden",!0),t},sv=function(t,e){const s=ae._svgFactory.createElement("clipPath");t.append(s);const n=`clip_${e}`;s.setAttribute("id",n),s.setAttribute("clipPathUnits","objectBoundingBox");const r=ae._svgFactory.createElement("use");return s.append(r),r.setAttribute("href",`#${e}`),r.classList.add("clip"),n},Xp=function(t,e){for(const[s,n]of Object.entries(e))n===null?t.removeAttribute(s):t.setAttribute(s,n)},b(ae,Cd),b(ae,jh,0);let ad=ae;globalThis._pdfjsTestingUtils={HighlightOutliner:_p};globalThis.pdfjsLib={AbortException:Si,AnnotationEditorLayer:od,AnnotationEditorParamsType:ft,AnnotationEditorType:et,AnnotationEditorUIManager:pr,AnnotationLayer:Tg,AnnotationMode:kn,AnnotationType:Yt,build:s0,ColorPicker:fc,createValidAbsoluteUrl:gg,DOMSVGFactory:dc,DrawLayer:ad,FeatureTest:ye,fetchData:El,getDocument:Eg,getFilenameFromUrl:Yy,getPdfFilenameFromUrl:Ky,getUuid:yg,getXfaPageViewport:Qy,GlobalWorkerOptions:Ds,ImageKind:Zl,InvalidPDFException:td,isDataScheme:Xh,isPdfFile:Ud,isValidExplicitDest:Mb,MathClamp:Oe,noContextMenu:Fs,normalizeUnicode:qy,OPS:ac,OutputScale:nn,PasswordResponses:Vy,PDFDataRangeTransport:xg,PDFDateString:Vd,PDFWorker:Al,PermissionFlag:Uy,PixelsPerInch:Ei,RenderingCancelledException:Gd,ResponseException:lc,setLayerDimensions:fr,shadow:dt,SignatureExtractor:In,stopEvent:Jt,SupportedImageMimeTypes:ed,TextLayer:hc,TouchManager:cc,updateUrlHash:mg,Util:Q,VerbosityLevel:Vh,version:e0,XfaLayer:_g};const Yx=Object.freeze(Object.defineProperty({__proto__:null,AbortException:Si,AnnotationEditorLayer:od,AnnotationEditorParamsType:ft,AnnotationEditorType:et,AnnotationEditorUIManager:pr,AnnotationLayer:Tg,AnnotationMode:kn,AnnotationType:Yt,ColorPicker:fc,DOMSVGFactory:dc,DrawLayer:ad,FeatureTest:ye,GlobalWorkerOptions:Ds,ImageKind:Zl,InvalidPDFException:td,MathClamp:Oe,OPS:ac,OutputScale:nn,PDFDataRangeTransport:xg,PDFDateString:Vd,PDFWorker:Al,PasswordResponses:Vy,PermissionFlag:Uy,PixelsPerInch:Ei,RenderingCancelledException:Gd,ResponseException:lc,SignatureExtractor:In,SupportedImageMimeTypes:ed,TextLayer:hc,TouchManager:cc,Util:Q,VerbosityLevel:Vh,XfaLayer:_g,build:s0,createValidAbsoluteUrl:gg,fetchData:El,getDocument:Eg,getFilenameFromUrl:Yy,getPdfFilenameFromUrl:Ky,getUuid:yg,getXfaPageViewport:Qy,isDataScheme:Xh,isPdfFile:Ud,isValidExplicitDest:Mb,noContextMenu:Fs,normalizeUnicode:qy,setLayerDimensions:fr,shadow:dt,stopEvent:Jt,updateUrlHash:mg,version:e0},Symbol.toStringTag,{value:"Module"})),Kx=["onCopy","onCut","onPaste"],Qx=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],Jx=["onFocus","onBlur"],Zx=["onInput","onInvalid","onReset","onSubmit"],t_=["onLoad","onError"],e_=["onKeyDown","onKeyPress","onKeyUp"],s_=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],n_=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],i_=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],r_=["onSelect"],o_=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],a_=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],l_=["onScroll"],c_=["onWheel"],h_=["onAnimationStart","onAnimationEnd","onAnimationIteration"],u_=["onTransitionEnd"],d_=["onToggle"],f_=["onChange"],p_=[...Kx,...Qx,...Jx,...Zx,...t_,...e_,...s_,...n_,...i_,...r_,...o_,...a_,...l_,...c_,...h_,...u_,...f_,...d_];function nv(i,t){const e={};for(const s of p_){const n=i[s];n&&(t?e[s]=r=>n(r,t(s)):e[s]=n)}return e}function Zh(i){let t=!1;return{promise:new Promise((s,n)=>{i.then(r=>!t&&s(r)).catch(r=>!t&&n(r))}),cancel(){t=!0}}}var g_="Invariant failed";function Mt(i,t){if(!i)throw new Error(g_)}var Af,Vm;function m_(){if(Vm)return Af;Vm=1;var i=function(){};return Af=i,Af}var y_=m_();const Ne=ny(y_);var Wm=Object.prototype.hasOwnProperty;function qm(i,t,e){for(e of i.keys())if(ha(e,t))return e}function ha(i,t){var e,s,n;if(i===t)return!0;if(i&&t&&(e=i.constructor)===t.constructor){if(e===Date)return i.getTime()===t.getTime();if(e===RegExp)return i.toString()===t.toString();if(e===Array){if((s=i.length)===t.length)for(;s--&&ha(i[s],t[s]););return s===-1}if(e===Set){if(i.size!==t.size)return!1;for(s of i)if(n=s,n&&typeof n=="object"&&(n=qm(t,n),!n)||!t.has(n))return!1;return!0}if(e===Map){if(i.size!==t.size)return!1;for(s of i)if(n=s[0],n&&typeof n=="object"&&(n=qm(t,n),!n)||!ha(s[1],t.get(n)))return!1;return!0}if(e===ArrayBuffer)i=new Uint8Array(i),t=new Uint8Array(t);else if(e===DataView){if((s=i.byteLength)===t.byteLength)for(;s--&&i.getInt8(s)===t.getInt8(s););return s===-1}if(ArrayBuffer.isView(i)){if((s=i.byteLength)===t.byteLength)for(;s--&&i[s]===t[s];);return s===-1}if(!e||typeof i=="object"){s=0;for(e in i)if(Wm.call(i,e)&&++s&&!Wm.call(t,e)||!(e in t)||!ha(i[e],t[e]))return!1;return Object.keys(t).length===s}}return i!==i&&t!==t}const iv=I.createContext(null);function ua({children:i,type:t}){return B.jsx("div",{className:`react-pdf__message react-pdf__message--${t}`,children:i})}const b_="noopener noreferrer nofollow";class v_{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(t){this.pdfDocument=t}setViewer(t){this.pdfViewer=t}setExternalLinkRel(t){this.externalLinkRel=t}setExternalLinkTarget(t){this.externalLinkTarget=t}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return Mt(this.pdfViewer),this.pdfViewer.currentPageNumber||0}set page(t){Mt(this.pdfViewer),this.pdfViewer.currentPageNumber=t}get rotation(){return 0}set rotation(t){}goToDestination(t){return new Promise(e=>{Mt(this.pdfDocument),Mt(t),typeof t=="string"?this.pdfDocument.getDestination(t).then(e):Array.isArray(t)?e(t):t.then(e)}).then(e=>{Mt(Array.isArray(e));const s=e[0];new Promise(n=>{Mt(this.pdfDocument),s instanceof Object?this.pdfDocument.getPageIndex(s).then(r=>{n(r)}).catch(()=>{Mt(!1)}):typeof s=="number"?n(s):Mt(!1)}).then(n=>{const r=n+1;Mt(this.pdfViewer),Mt(r>=1&&r<=this.pagesCount),this.pdfViewer.scrollPageIntoView({dest:e,pageIndex:n,pageNumber:r})})})}navigateTo(t){this.goToDestination(t)}goToPage(t){const e=t-1;Mt(this.pdfViewer),Mt(t>=1&&t<=this.pagesCount),this.pdfViewer.scrollPageIntoView({pageIndex:e,pageNumber:t})}addLinkAttributes(t,e,s){t.href=e,t.rel=this.externalLinkRel||b_,t.target=s?"_blank":this.externalLinkTarget||""}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}setHash(){}executeNamedAction(){}cachePageRef(){}isPageVisible(){return!0}isPageCached(){return!0}executeSetOCGState(){}}const Xm={NEED_PASSWORD:1,INCORRECT_PASSWORD:2},Xd=typeof window<"u",rv=Xd&&window.location.protocol==="file:";function A_(i){return typeof i<"u"}function wr(i){return A_(i)&&i!==null}function w_(i){return typeof i=="string"}function S_(i){return i instanceof ArrayBuffer}function E_(i){return Mt(Xd),i instanceof Blob}function Yp(i){return w_(i)&&/^data:/.test(i)}function Ym(i){Mt(Yp(i));const[t="",e=""]=i.split(",");return t.split(";").indexOf("base64")!==-1?atob(e):unescape(e)}function x_(){return Xd&&window.devicePixelRatio||1}const ov="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function Km(){Ne(!rv,`Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ${ov}`)}function __(){Ne(!rv,`Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ${ov}`)}function Bo(i){i!=null&&i.cancel&&i.cancel()}function Kp(i,t){return Object.defineProperty(i,"width",{get(){return this.view[2]*t},configurable:!0}),Object.defineProperty(i,"height",{get(){return this.view[3]*t},configurable:!0}),Object.defineProperty(i,"originalWidth",{get(){return this.view[2]},configurable:!0}),Object.defineProperty(i,"originalHeight",{get(){return this.view[3]},configurable:!0}),i}function C_(i){return i.name==="RenderingCancelledException"}function T_(i){return new Promise((t,e)=>{const s=new FileReader;s.onload=()=>{if(!s.result)return e(new Error("Error while reading a file."));t(s.result)},s.onerror=n=>{if(!n.target)return e(new Error("Error while reading a file."));const{error:r}=n.target;if(!r)return e(new Error("Error while reading a file."));switch(r.code){case r.NOT_FOUND_ERR:return e(new Error("Error while reading a file: File not found."));case r.SECURITY_ERR:return e(new Error("Error while reading a file: Security error."));case r.ABORT_ERR:return e(new Error("Error while reading a file: Aborted."));default:return e(new Error("Error while reading a file."))}},s.readAsArrayBuffer(i)})}function P_(i,t){switch(t.type){case"RESOLVE":return{value:t.value,error:void 0};case"REJECT":return{value:!1,error:t.error};case"RESET":return{value:void 0,error:void 0};default:return i}}function wl(){return I.useReducer(P_,{value:void 0,error:void 0})}var Qm=function(i,t){var e={};for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&t.indexOf(s)<0&&(e[s]=i[s]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,s=Object.getOwnPropertySymbols(i);n<s.length;n++)t.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(i,s[n])&&(e[s[n]]=i[s[n]]);return e};const{PDFDataRangeTransport:R_}=Yx,k_=(i,t)=>{switch(t){case Xm.NEED_PASSWORD:{const e=prompt("Enter the password to open this PDF file.");i(e);break}case Xm.INCORRECT_PASSWORD:{const e=prompt("Invalid password. Please try again.");i(e);break}}};function Jm(i){return typeof i=="object"&&i!==null&&("data"in i||"range"in i||"url"in i)}const I_=I.forwardRef(function(t,e){var{children:s,className:n,error:r="Failed to load PDF file.",externalLinkRel:o,externalLinkTarget:l,file:c,inputRef:h,imageResourcesPath:u,loading:d="Loading PDF…",noData:f="No PDF file specified.",onItemClick:p,onLoadError:y,onLoadProgress:g,onLoadSuccess:v,onPassword:w=k_,onSourceError:_,onSourceSuccess:C,options:x,renderMode:E,rotate:T,scale:P}=t,M=Qm(t,["children","className","error","externalLinkRel","externalLinkTarget","file","inputRef","imageResourcesPath","loading","noData","onItemClick","onLoadError","onLoadProgress","onLoadSuccess","onPassword","onSourceError","onSourceSuccess","options","renderMode","rotate","scale"]);const[D,S]=wl(),{value:k,error:N}=D,[H,z]=wl(),{value:q,error:F}=H,j=I.useRef(new v_),lt=I.useRef([]),ut=I.useRef(void 0),R=I.useRef(void 0);c&&c!==ut.current&&Jm(c)&&(Ne(!ha(c,ut.current),`File prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.`),ut.current=c),x&&x!==R.current&&(Ne(!ha(x,R.current),`Options prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.`),R.current=x);const O=I.useRef({scrollPageIntoView:wt=>{const{dest:se,pageNumber:zt,pageIndex:es=zt-1}=wt;if(p){p({dest:se,pageIndex:es,pageNumber:zt});return}const Ss=lt.current[es];if(Ss){Ss.scrollIntoView();return}Ne(!1,`An internal link leading to page ${zt} was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>.`)}});I.useImperativeHandle(e,()=>({linkService:j,pages:lt,viewer:O}),[]);function U(){C&&C()}function V(){N&&(Ne(!1,N.toString()),_&&_(N))}function tt(){S({type:"RESET"})}I.useEffect(tt,[c,S]);const at=I.useCallback(async()=>{if(!c)return null;if(typeof c=="string")return Yp(c)?{data:Ym(c)}:(Km(),{url:c});if(c instanceof R_)return{range:c};if(S_(c))return{data:c};if(Xd&&E_(c))return{data:await T_(c)};if(Mt(typeof c=="object"),Mt(Jm(c)),"url"in c&&typeof c.url=="string"){if(Yp(c.url)){const{url:wt}=c,se=Qm(c,["url"]),zt=Ym(wt);return Object.assign({data:zt},se)}Km()}return c},[c]);I.useEffect(()=>{const wt=Zh(at());return wt.promise.then(se=>{S({type:"RESOLVE",value:se})}).catch(se=>{S({type:"REJECT",error:se})}),()=>{Bo(wt)}},[at,S]),I.useEffect(()=>{if(!(typeof k>"u")){if(k===!1){V();return}U()}},[k]);function J(){q&&(v&&v(q),lt.current=new Array(q.numPages),j.current.setDocument(q))}function ct(){F&&(Ne(!1,F.toString()),y&&y(F))}I.useEffect(function(){z({type:"RESET"})},[z,k]),I.useEffect(function(){if(!k)return;const se=x?Object.assign(Object.assign({},k),x):k,zt=Eg(se);g&&(zt.onProgress=g),w&&(zt.onPassword=w);const es=zt,Ss=es.promise.then(vr=>{z({type:"RESOLVE",value:vr})}).catch(vr=>{es.destroyed||z({type:"REJECT",error:vr})});return()=>{Ss.finally(()=>es.destroy())}},[x,z,k]),I.useEffect(()=>{if(!(typeof q>"u")){if(q===!1){ct();return}J()}},[q]),I.useEffect(function(){j.current.setViewer(O.current),j.current.setExternalLinkRel(o),j.current.setExternalLinkTarget(l)},[o,l]);const yt=I.useCallback((wt,se)=>{lt.current[wt]=se},[]),qe=I.useCallback(wt=>{delete lt.current[wt]},[]),Lt=I.useMemo(()=>({imageResourcesPath:u,linkService:j.current,onItemClick:p,pdf:q,registerPage:yt,renderMode:E,rotate:T,scale:P,unregisterPage:qe}),[u,p,q,yt,E,T,P,qe]),Bs=I.useMemo(()=>nv(M,()=>q),[M,q]);function js(){return B.jsx(iv.Provider,{value:Lt,children:s})}function be(){return c?q==null?B.jsx(ua,{type:"loading",children:typeof d=="function"?d():d}):q===!1?B.jsx(ua,{type:"error",children:typeof r=="function"?r():r}):js():B.jsx(ua,{type:"no-data",children:typeof f=="function"?f():f})}return B.jsx("div",Object.assign({className:Ot("react-pdf__Document",n),ref:h},Bs,{children:be()}))});function av(){return I.useContext(iv)}function lv(){for(var i=[],t=0;t<arguments.length;t++)i[t]=arguments[t];var e=i.filter(Boolean);if(e.length<=1){var s=e[0];return s||null}return function(r){for(var o=0,l=e;o<l.length;o++){var c=l[o];typeof c=="function"?c(r):c&&(c.current=r)}}}const cv=I.createContext(null),hv={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},M_=/^H(\d+)$/;function L_(i){return i in hv}function Yd(i){return"children"in i}function uv(i){return Yd(i)?i.children.length===1&&0 in i.children&&"id"in i.children[0]:!1}function D_(i){const t={};if(Yd(i)){const{role:e}=i,s=e.match(M_);if(s)t.role="heading",t["aria-level"]=Number(s[1]);else if(L_(e)){const n=hv[e];n&&(t.role=n)}}return t}function dv(i){const t={};if(Yd(i)){if(i.alt!==void 0&&(t["aria-label"]=i.alt),i.lang!==void 0&&(t.lang=i.lang),uv(i)){const[e]=i.children;if(e){const s=dv(e);return Object.assign(Object.assign({},t),s)}}}else"id"in i&&(t["aria-owns"]=i.id);return t}function O_(i){return i?Object.assign(Object.assign({},D_(i)),dv(i)):null}function fv({className:i,node:t}){const e=I.useMemo(()=>O_(t),[t]),s=I.useMemo(()=>!Yd(t)||uv(t)?null:t.children.map((n,r)=>B.jsx(fv,{node:n},r)),[t]);return B.jsx("span",Object.assign({className:i},e,{children:s}))}function Kd(){return I.useContext(cv)}function N_(){const i=Kd();Mt(i);const{onGetStructTreeError:t,onGetStructTreeSuccess:e}=i,[s,n]=wl(),{value:r,error:o}=s,{customTextRenderer:l,page:c}=i;function h(){r&&e&&e(r)}function u(){o&&(Ne(!1,o.toString()),t&&t(o))}return I.useEffect(function(){n({type:"RESET"})},[n,c]),I.useEffect(function(){if(l||!c)return;const f=Zh(c.getStructTree()),p=f;return f.promise.then(y=>{n({type:"RESOLVE",value:y})}).catch(y=>{n({type:"REJECT",error:y})}),()=>Bo(p)},[l,c,n]),I.useEffect(()=>{if(r!==void 0){if(r===!1){u();return}h()}},[r]),r?B.jsx(fv,{className:"react-pdf__Page__structTree structTree",node:r}):null}const Zm=kn;function F_(i){const t=Kd();Mt(t);const e=Object.assign(Object.assign({},t),i),{_className:s,canvasBackground:n,devicePixelRatio:r=x_(),onRenderError:o,onRenderSuccess:l,page:c,renderForms:h,renderTextLayer:u,rotate:d,scale:f}=e,{canvasRef:p}=i;Mt(c);const y=I.useRef(null);function g(){c&&l&&l(Kp(c,f))}function v(x){C_(x)||(Ne(!1,x.toString()),o&&o(x))}const w=I.useMemo(()=>c.getViewport({scale:f*r,rotation:d}),[r,c,d,f]),_=I.useMemo(()=>c.getViewport({scale:f,rotation:d}),[c,d,f]);I.useEffect(function(){if(!c)return;c.cleanup();const{current:E}=y;if(!E)return;E.width=w.width,E.height=w.height,E.style.width=`${Math.floor(_.width)}px`,E.style.height=`${Math.floor(_.height)}px`,E.style.visibility="hidden";const T={annotationMode:h?Zm.ENABLE_FORMS:Zm.ENABLE,canvasContext:E.getContext("2d",{alpha:!1}),viewport:w};n&&(T.background=n);const P=c.render(T),M=P;return P.promise.then(()=>{E.style.visibility="",g()}).catch(v),()=>Bo(M)},[n,c,h,w,_]);const C=I.useCallback(()=>{const{current:x}=y;x&&(x.width=0,x.height=0)},[]);return I.useEffect(()=>C,[C]),B.jsx("canvas",{className:`${s}__canvas`,dir:"ltr",ref:lv(p,y),style:{display:"block",userSelect:"none"},children:u?B.jsx(N_,{}):null})}function $_(i){return"str"in i}function B_(){const i=Kd();Mt(i);const{customTextRenderer:t,onGetTextError:e,onGetTextSuccess:s,onRenderTextLayerError:n,onRenderTextLayerSuccess:r,page:o,pageIndex:l,pageNumber:c,rotate:h,scale:u}=i;Mt(o);const[d,f]=wl(),{value:p,error:y}=d,g=I.useRef(null);Ne(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10)===1,"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer");function v(){p&&s&&s(p)}function w(){y&&(Ne(!1,y.toString()),e&&e(y))}I.useEffect(function(){f({type:"RESET"})},[o,f]),I.useEffect(function(){if(!o)return;const M=Zh(o.getTextContent()),D=M;return M.promise.then(S=>{f({type:"RESOLVE",value:S})}).catch(S=>{f({type:"REJECT",error:S})}),()=>Bo(D)},[o,f]),I.useEffect(()=>{if(p!==void 0){if(p===!1){w();return}v()}},[p]);const _=I.useCallback(()=>{r&&r()},[r]),C=I.useCallback(P=>{Ne(!1,P.toString()),n&&n(P)},[n]);function x(){const P=g.current;P&&P.classList.add("selecting")}function E(){const P=g.current;P&&P.classList.remove("selecting")}const T=I.useMemo(()=>o.getViewport({scale:u,rotation:h}),[o,h,u]);return I.useLayoutEffect(function(){if(!o||!p)return;const{current:M}=g;if(!M)return;M.innerHTML="";const D=o.streamTextContent({includeMarkedContent:!0}),S={container:M,textContentSource:D,viewport:T},k=new hc(S),N=k;return k.render().then(()=>{const H=document.createElement("div");H.className="endOfContent",M.append(H);const z=M.querySelectorAll('[role="presentation"]');if(t){let q=0;p.items.forEach((F,j)=>{if(!$_(F))return;const lt=z[q];if(!lt)return;const ut=t(Object.assign({pageIndex:l,pageNumber:c,itemIndex:j},F));lt.innerHTML=ut,q+=F.str&&F.hasEOL?2:1})}_()}).catch(C),()=>Bo(N)},[t,C,_,o,l,c,p,T]),B.jsx("div",{className:Ot("react-pdf__Page__textContent","textLayer"),onMouseUp:E,onMouseDown:x,ref:g})}function j_(){const i=av(),t=Kd();Mt(t);const e=Object.assign(Object.assign({},i),t),{imageResourcesPath:s,linkService:n,onGetAnnotationsError:r,onGetAnnotationsSuccess:o,onRenderAnnotationLayerError:l,onRenderAnnotationLayerSuccess:c,page:h,pdf:u,renderForms:d,rotate:f,scale:p=1}=e;Mt(u),Mt(h),Mt(n);const[y,g]=wl(),{value:v,error:w}=y,_=I.useRef(null);Ne(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10)===1,"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations");function C(){v&&o&&o(v)}function x(){w&&(Ne(!1,w.toString()),r&&r(w))}I.useEffect(function(){g({type:"RESET"})},[g,h]),I.useEffect(function(){if(!h)return;const D=Zh(h.getAnnotations()),S=D;return D.promise.then(k=>{g({type:"RESOLVE",value:k})}).catch(k=>{g({type:"REJECT",error:k})}),()=>{Bo(S)}},[g,h]),I.useEffect(()=>{if(v!==void 0){if(v===!1){x();return}C()}},[v]);function E(){c&&c()}function T(M){Ne(!1,`${M}`),l&&l(M)}const P=I.useMemo(()=>h.getViewport({scale:p,rotation:f}),[h,f,p]);return I.useEffect(function(){if(!u||!h||!n||!v)return;const{current:D}=_;if(!D)return;const S=P.clone({dontFlip:!0}),k={accessibilityManager:null,annotationCanvasMap:null,annotationEditorUIManager:null,div:D,l10n:null,page:h,structTreeLayer:null,viewport:S},N={annotations:v,annotationStorage:u.annotationStorage,div:D,imageResourcesPath:s,linkService:n,page:h,renderForms:d,viewport:S};D.innerHTML="";try{new Tg(k).render(N),E()}catch(H){T(H)}return()=>{}},[v,s,n,h,u,d,P]),B.jsx("div",{className:Ot("react-pdf__Page__annotations","annotationLayer"),ref:_})}var H_=function(i,t){var e={};for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&t.indexOf(s)<0&&(e[s]=i[s]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,s=Object.getOwnPropertySymbols(i);n<s.length;n++)t.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(i,s[n])&&(e[s[n]]=i[s[n]]);return e};const ty=1;function z_(i){const t=av(),e=Object.assign(Object.assign({},t),i),{_className:s="react-pdf__Page",_enableRegisterUnregisterPage:n=!0,canvasBackground:r,canvasRef:o,children:l,className:c,customRenderer:h,customTextRenderer:u,devicePixelRatio:d,error:f="Failed to load the page.",height:p,inputRef:y,loading:g="Loading page…",noData:v="No page specified.",onGetAnnotationsError:w,onGetAnnotationsSuccess:_,onGetStructTreeError:C,onGetStructTreeSuccess:x,onGetTextError:E,onGetTextSuccess:T,onLoadError:P,onLoadSuccess:M,onRenderAnnotationLayerError:D,onRenderAnnotationLayerSuccess:S,onRenderError:k,onRenderSuccess:N,onRenderTextLayerError:H,onRenderTextLayerSuccess:z,pageIndex:q,pageNumber:F,pdf:j,registerPage:lt,renderAnnotationLayer:ut=!0,renderForms:R=!1,renderMode:O="canvas",renderTextLayer:U=!0,rotate:V,scale:tt=ty,unregisterPage:at,width:J}=e,ct=H_(e,["_className","_enableRegisterUnregisterPage","canvasBackground","canvasRef","children","className","customRenderer","customTextRenderer","devicePixelRatio","error","height","inputRef","loading","noData","onGetAnnotationsError","onGetAnnotationsSuccess","onGetStructTreeError","onGetStructTreeSuccess","onGetTextError","onGetTextSuccess","onLoadError","onLoadSuccess","onRenderAnnotationLayerError","onRenderAnnotationLayerSuccess","onRenderError","onRenderSuccess","onRenderTextLayerError","onRenderTextLayerSuccess","pageIndex","pageNumber","pdf","registerPage","renderAnnotationLayer","renderForms","renderMode","renderTextLayer","rotate","scale","unregisterPage","width"]),[yt,qe]=wl(),{value:Lt,error:Bs}=yt,js=I.useRef(null);Mt(j);const be=wr(F)?F-1:q??null,wt=F??(wr(q)?q+1:null),se=V??(Lt?Lt.rotate:null),zt=I.useMemo(()=>{if(!Lt)return null;let Go=1;const eu=tt??ty;if(J||p){const su=Lt.getViewport({scale:1,rotation:se});J?Go=J/su.width:p&&(Go=p/su.height)}return eu*Go},[p,Lt,se,tt,J]);I.useEffect(function(){return()=>{wr(be)&&n&&at&&at(be)}},[n,j,be,at]);function es(){if(M){if(!Lt||!zt)return;M(Kp(Lt,zt))}if(n&&lt){if(!wr(be)||!js.current)return;lt(be,js.current)}}function Ss(){Bs&&(Ne(!1,Bs.toString()),P&&P(Bs))}I.useEffect(function(){qe({type:"RESET"})},[qe,j,be]),I.useEffect(function(){if(!j||!wt)return;const eu=Zh(j.getPage(wt)),su=eu;return eu.promise.then(Qd=>{qe({type:"RESOLVE",value:Qd})}).catch(Qd=>{qe({type:"REJECT",error:Qd})}),()=>Bo(su)},[qe,j,wt]),I.useEffect(()=>{if(Lt!==void 0){if(Lt===!1){Ss();return}es()}},[Lt,zt]);const vr=I.useMemo(()=>Lt&&wr(be)&&wt&&wr(se)&&wr(zt)?{_className:s,canvasBackground:r,customTextRenderer:u,devicePixelRatio:d,onGetAnnotationsError:w,onGetAnnotationsSuccess:_,onGetStructTreeError:C,onGetStructTreeSuccess:x,onGetTextError:E,onGetTextSuccess:T,onRenderAnnotationLayerError:D,onRenderAnnotationLayerSuccess:S,onRenderError:k,onRenderSuccess:N,onRenderTextLayerError:H,onRenderTextLayerSuccess:z,page:Lt,pageIndex:be,pageNumber:wt,renderForms:R,renderTextLayer:U,rotate:se,scale:zt}:null,[s,r,u,d,w,_,C,x,E,T,D,S,k,N,H,z,Lt,be,wt,R,U,se,zt]),tu=I.useMemo(()=>nv(ct,()=>Lt&&(zt?Kp(Lt,zt):void 0)),[ct,Lt,zt]),zo=`${be}@${zt}/${se}`;function it(){switch(O){case"custom":return Mt(h),B.jsx(h,{},`${zo}_custom`);case"none":return null;case"canvas":default:return B.jsx(F_,{canvasRef:o},`${zo}_canvas`)}}function pv(){return U?B.jsx(B_,{},`${zo}_text`):null}function gv(){return ut?B.jsx(j_,{},`${zo}_annotations`):null}function mv(){return B.jsxs(cv.Provider,{value:vr,children:[it(),pv(),gv(),l]})}function yv(){return wt?j===null||Lt===void 0||Lt===null?B.jsx(ua,{type:"loading",children:typeof g=="function"?g():g}):j===!1||Lt===!1?B.jsx(ua,{type:"error",children:typeof f=="function"?f():f}):mv():B.jsx(ua,{type:"no-data",children:typeof v=="function"?v():v})}return B.jsx("div",Object.assign({className:Ot(s,c),"data-page-number":wt,ref:lv(y,js),style:{"--scale-round-x":"1px","--scale-round-y":"1px","--scale-factor":"1","--user-unit":`${zt}`,"--total-scale-factor":"calc(var(--scale-factor) * var(--user-unit))",backgroundColor:r||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"}},tu,{children:yv()}))}__();Ds.workerSrc="pdf.worker.mjs";Ds.workerSrc="/assets/pdf.worker.min.mjs";function V_(){const i=I.useRef(null),[t,e]=I.useState(null),[s,n]=I.useState(0),[r,o]=I.useState(1),[l,c]=I.useState(!1),[h,u]=I.useState(""),[d,f]=I.useState(void 0),p=v=>{var _;if(v.preventDefault(),l)return;const w=(_=v.dataTransfer.files)==null?void 0:_[0];w&&w.type==="application/pdf"&&y(w)},y=v=>{e(v),u(""),o(1),n(0),f(URL.createObjectURL(v))},g=async()=>{if(t){u(""),c(!0);try{const v=new FormData;v.append("file",t);const _=await(await fetch(`${h1}/api/upload_pdf`,{method:"POST",body:v})).json();console.log("後端回傳 pdf_url:",_.pdf_url),_.pdf_url?window.open(_.pdf_url,"_blank"):u("上傳失敗，請再試一次！")}catch(v){u("上傳失敗："+v.message)}c(!1)}};return B.jsxs(hf,{sx:{maxWidth:700,mx:"auto",mt:4,p:2},children:[B.jsx(ou,{variant:"h5",gutterBottom:!0,children:"PDF Reader"}),B.jsxs(Hy,{variant:"outlined",sx:{p:2,bgcolor:"#f8fafc",border:"2px dashed #90caf9",textAlign:"center",mb:2,cursor:l?"not-allowed":"pointer"},onDrop:p,onDragOver:v=>v.preventDefault(),onClick:()=>{var v;return!l&&((v=i.current)==null?void 0:v.click())},children:[B.jsx(u1,{sx:{fontSize:40,color:"#90caf9"}}),B.jsx(ou,{sx:{mt:1},children:"拖曳 PDF 到這裡，或點擊選擇檔案"}),B.jsx(uf,{variant:"contained",sx:{mt:2},disabled:l,component:"span",children:"選擇檔案"}),B.jsx("input",{ref:i,type:"file",accept:"application/pdf",hidden:!0,onClick:v=>{v.target.value=""},onChange:v=>{var _;const w=(_=v.target.files)==null?void 0:_[0];w&&w.type==="application/pdf"&&y(w)}}),t&&B.jsx(ou,{sx:{mt:1},color:"primary",children:t.name})]}),d&&B.jsxs(hf,{sx:{mb:2,border:"1px solid #eee",borderRadius:2,overflow:"hidden",bgcolor:"#fff"},children:[B.jsx(I_,{file:d,onLoadSuccess:({numPages:v})=>n(v),onLoadError:v=>u("PDF 載入失敗: "+v.message),loading:B.jsx(hf,{sx:{py:4},children:B.jsx(Zu,{})}),children:B.jsx(z_,{pageNumber:r,width:640,renderTextLayer:!0})}),B.jsxs(Em,{direction:"row",alignItems:"center",justifyContent:"center",sx:{py:1},children:[B.jsx(Of,{onClick:v=>{v.stopPropagation(),o(w=>Math.max(w-1,1))},disabled:r<=1,children:B.jsx(d1,{})}),B.jsxs(ou,{children:[r," / ",s]}),B.jsx(Of,{onClick:v=>{v.stopPropagation(),o(w=>Math.min(w+1,s))},disabled:r>=s,children:B.jsx(f1,{})})]}),B.jsxs(Em,{direction:"row",spacing:2,justifyContent:"center",sx:{mb:2},children:[B.jsx(uf,{variant:"contained",color:"primary",disabled:l,onClick:g,children:l?B.jsx(Zu,{size:22,sx:{color:"#fff"}}):"確認上傳"}),B.jsx(uf,{variant:"outlined",color:"error",disabled:l,onClick:()=>{e(null),f(void 0),n(0),o(1)},children:"重新選擇"})]})]}),h&&B.jsx(XE,{severity:"error",sx:{mt:2},children:h})]})}export{V_ as P,na as R,ny as g,B as j,xv as r};
